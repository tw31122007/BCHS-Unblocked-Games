!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.h5branding=e.h5branding||{})}(this,function(p){"use strict";var F="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function u(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function e(e,t){return e(t={exports:{}},t.exports),t.exports}var t,r;e(function(e,t){e.exports=function(){function p(e){return"function"==typeof e}var i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=0,t=void 0,r=void 0,s=function(e,t){d[n]=e,d[n+1]=t,2===(n+=2)&&(r?r(c):g())},e="undefined"!=typeof window?window:void 0,o=e||{},a=o.MutationObserver||o.WebKitMutationObserver,l="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function u(){var e=setTimeout;return function(){return e(c,1)}}var d=new Array(1e3);function c(){for(var e=0;e<n;e+=2){var t=d[e],i=d[e+1];t(i),d[e]=void 0,d[e+1]=void 0}n=0}var _,y,x,m,g=void 0;function f(e,t){var i=this,n=new this.constructor(w);void 0===n[z]&&L(n);var r=i._state;if(r){var o=arguments[r-1];s(function(){return D(r,n,o,i._result)})}else E(i,n,e,t);return n}function v(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(w);return k(t,e),t}g=l?function(){return process.nextTick(c)}:a?(y=0,x=new a(c),m=document.createTextNode(""),x.observe(m,{characterData:!0}),function(){m.data=y=++y%2}):h?((_=new MessageChannel).port1.onmessage=c,function(){return _.port2.postMessage(0)}):void 0===e?function(){try{var e=Function("return this")().require("vertx");return void 0===(t=e.runOnLoop||e.runOnContext)?u():function(){t(c)}}catch(e){return u()}}():u();var z=Math.random().toString(36).substring(2);function w(){}var b=void 0,S=1,C=2;function M(e,t,i,n){try{e.call(t,i,n)}catch(e){return e}}function P(e,t,i){var n,r,o,a;t.constructor===e.constructor&&i===f&&t.constructor.resolve===v?(o=e,(a=t)._state===S?A(o,a._result):a._state===C?O(o,a._result):E(a,void 0,function(e){return k(o,e)},function(e){return O(o,e)})):void 0===i?A(e,t):p(i)?(n=t,r=i,s(function(t){var i=!1,e=M(r,n,function(e){i||(i=!0,n!==e?k(t,e):A(t,e))},function(e){i||(i=!0,O(t,e))},t._label);!i&&e&&(i=!0,O(t,e))},e)):A(e,t)}function k(t,e){if(t===e)O(t,new TypeError("You cannot resolve a promise with itself"));else if(r=typeof(n=e),null===n||"object"!==r&&"function"!==r)A(t,e);else{var i=void 0;try{i=e.then}catch(e){return void O(t,e)}P(t,e,i)}var n,r}function T(e){e._onerror&&e._onerror(e._result),G(e)}function A(e,t){e._state===b&&(e._result=t,e._state=S,0!==e._subscribers.length&&s(G,e))}function O(e,t){e._state===b&&(e._state=C,e._result=t,s(T,e))}function E(e,t,i,n){var r=e._subscribers,o=r.length;e._onerror=null,r[o]=t,r[o+S]=i,r[o+C]=n,0===o&&e._state&&s(G,e)}function G(e){var t=e._subscribers,i=e._state;if(0!==t.length){for(var n=void 0,r=void 0,o=e._result,a=0;a<t.length;a+=3)n=t[a],r=t[a+i],n?D(i,n,r,o):r(o);e._subscribers.length=0}}function D(e,t,i,n){var r=p(i),o=void 0,a=void 0,s=!0;if(r){try{o=i(n)}catch(e){s=!1,a=e}if(t===o)return void O(t,new TypeError("A promises callback cannot return that same promise."))}else o=n;t._state!==b||(r&&s?k(t,o):!1===s?O(t,a):e===S?A(t,o):e===C&&O(t,o))}var I=0;function L(e){e[z]=I++,e._state=void 0,e._result=void 0,e._subscribers=[]}var B=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(w),this.promise[z]||L(this.promise),i(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&A(this.promise,this._result))):O(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===b&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(t,e){var i=this._instanceConstructor,n=i.resolve;if(n===v){var r=void 0,o=void 0,a=!1;try{r=t.then}catch(e){a=!0,o=e}if(r===f&&t._state!==b)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(i===R){var s=new i(w);a?O(s,o):P(s,t,r),this._willSettleAt(s,e)}else this._willSettleAt(new i(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},e.prototype._settledAt=function(e,t,i){var n=this.promise;n._state===b&&(this._remaining--,e===C?O(n,i):this._result[t]=i),0===this._remaining&&A(n,this._result)},e.prototype._willSettleAt=function(e,t){var i=this;E(e,void 0,function(e){return i._settledAt(S,t,e)},function(e){return i._settledAt(C,t,e)})},e}(),R=function(){function t(e){this[z]=I++,this._result=this._state=void 0,this._subscribers=[],w!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(t,e){try{e(function(e){k(t,e)},function(e){O(t,e)})}catch(e){O(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var i=this.constructor;return p(t)?this.then(function(e){return i.resolve(t()).then(function(){return e})},function(e){return i.resolve(t()).then(function(){throw e})}):this.then(t,t)},t}();return R.prototype.then=f,R.all=function(e){return new B(this,e).promise},R.race=function(r){var o=this;return i(r)?new o(function(e,t){for(var i=r.length,n=0;n<i;n++)o.resolve(r[n]).then(e,t)}):new o(function(e,t){return t(new TypeError("You must pass an array to race."))})},R.resolve=v,R.reject=function(e){var t=new this(w);return O(t,e),t},R._setScheduler=function(e){r=e},R._setAsap=function(e){s=e},R._asap=s,R.polyfill=function(){var e=void 0;if(void 0!==F)e=F;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===i&&!t.cast)return}e.Promise=R},R.Promise=R}()}).polyfill();(t=p.BrandingDomain||(p.BrandingDomain={}))[t.Neutral=0]="Neutral",t[t.Yepi=1]="Yepi",t[t.Spele=2]="Spele",t[t.Funnygames=3]="Funnygames",t[t.Kizi=4]="Kizi",t[t.PlayCell=5]="PlayCell",t[t.GameCell=6]="GameCell",t[t.Bild=7]="Bild",t[t.AGame=8]="AGame",t[t.Admeen=9]="Admeen",t[t.PlayTime=10]="PlayTime",t[t.Zigiz=11]="Zigiz";var i,n=function(){function e(){}return e.has=function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;var i=e.lastIndexOf(".",t-1);if(i<=0||t-1<=i)return!1;var n=r[e.slice(t+1)];return!!n&&0<=n.indexOf(" "+e.slice(i+1,t)+" ")},e.is=function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;if(0<=e.lastIndexOf(".",t-1))return!1;var i=r[e.slice(t+1)];return!!i&&0<=i.indexOf(" "+e.slice(0,t)+" ")},e.get=function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return null;var i=e.lastIndexOf(".",t-1);if(i<=0||t-1<=i)return null;var n=r[e.slice(t+1)];return n?n.indexOf(" "+e.slice(i+1,t)+" ")<0?null:e.slice(i+1):null},e}(),o=function(){function e(){}return e.setList=function(e){r=e||{}},e.getDomain=function(e){if(!r)return null;var t=e.match(/\./g);if(t&&t.length<2)return e;var i=this.getTld(e);if(!i)return null;var n=e.length-i.length-1;return n=e.lastIndexOf(".",n-1)+1,e.substring(n)||""},e.getTld=function(e){if(!r)return"";var t=e.lastIndexOf("."),i=e.substring(t+1);return r[i.toLowerCase()]&&n.get(e)||i},e.KEY="Domains",e}(),a=function(){function e(){this.cache={}}return Object.defineProperty(e,"instance",{get:function(){return void 0===e.classInstance&&(e.classInstance=new e),e.classInstance},enumerable:!1,configurable:!0}),e.prototype.load=function(t,e,i){var n=this;return this.contains(t)?Promise.reject("Already in cache."):(this.cache[t]={url:e,data:null},this.requestXhr(e,i).then(function(e){return n.loadComplete(t,e)}).catch(function(e){return n.remove(t),Promise.reject(e)}))},e.prototype.loadComplete=function(e,t){if(!this.contains(e))return Promise.reject("Item was removed from cache before loading was complete.");try{var i=JSON.parse(t);return this.cache[e].data=i,Promise.resolve(i)}catch(e){return Promise.reject("There was an error parsing JSON file.")}},e.prototype.remove=function(e){this.contains(e)&&delete this.cache[e]},e.prototype.get=function(e){return this.contains(e)?this.cache[e].data:null},e.prototype.contains=function(e){return this.cache.hasOwnProperty(e)},e.prototype.isLoading=function(e){return this.contains(e)&&null===this.cache[e].data},e.prototype.isLoaded=function(e){return this.contains(e)&&null!==this.cache[e].data},e.prototype.loadScript=function(n,e,r){return void 0===e&&(e=!0),new Promise(function(e,t){var i=document.createElement("script");i.src=n,i.async=!1,i.onload=function(){"function"==typeof r&&r(),e()},document.head.appendChild(i)})},e.prototype.requestXhr=function(i,n){var r;return void 0===n&&(n="application/json"),window.XMLHttpRequest?(r=new XMLHttpRequest,new Promise(function(e,t){r.onreadystatechange=function(){4===r.readyState&&(200===r.status?(e(r.responseText),r.onreadystatechange=null):0<r.status&&(t("There was a problem with the request: status "+r.status),r.onreadystatechange=null))};try{r.open("GET",i,!0),r.setRequestHeader("Content-Type",n),r.send()}catch(e){t("Error: Unable to send request, CORS not allowed.")}})):Promise.reject("Unable to send request, XMLHttpRequest not supported.")},e}();function s(e,t,i){var n=document.createElement("script");n.setAttribute("src",e+"?v="+t),"function"==typeof i&&(n.onload=i),document.body.appendChild(n)}(i=p.UtmTargets||(p.UtmTargets={}))[i.splashscreen=0]="splashscreen",i[i.logo=1]="logo",i[i.facebook=2]="facebook",i[i.twitter=3]="twitter",i[i.playstore=4]="playstore",i[i.appstore=5]="appstore",i[i.more_games=6]="more_games",i[i.download_game=7]="download_game",i[i.walkthrough=8]="walkthrough",i[i.disclaimer=9]="disclaimer",i[i.highscores=10]="highscores";var l,h,d,c,_,y,x,m,g,f,v,z,w=function(){function e(){}return e.loadPortalScript=function(e){e&&e.hasOwnProperty("minijuegos")&&-1!==e.minijuegos.indexOf(S.getSourceSite())&&(void 0!==window.mpConfig?window.mpConfig.partner="orange-games":window.mpConfig={partner:"orange-games"},s("https://ext.minijuegosgratis.com/external-host/main.js",Date.now()/1e3)),e&&e.hasOwnProperty("kongregate")&&-1!==e.kongregate.indexOf(S.getSourceSite())&&s("https://cdn1.kongregate.com/javascripts/kongregate_api.js",Date.now()/1e3,function(){"undefined"!=typeof kongregateAPI&&kongregateAPI.loadAPI(function(){window.kongregate=kongregateAPI.getAPI()})}),e&&e.hasOwnProperty("newgrounds")&&-1!==e.newgrounds.indexOf(S.getSourceSite())&&s("https://cdn.fbrq.io/@azerion/splash/assets/scripts/newgroundsio.min.js",Date.now()/1e3)},e}(),b=function(){function s(){}return s.preload=function(e){var t=Promise.all([a.instance.load(o.KEY,S.ASSET_LOCATION+"json/domains.json?v="+e,"text/plain"),a.instance.load(s.SITELOCK_PORTALS,S.ASSET_LOCATION+"json/sitelock.json?v="+e,"text/plain")]);return Promise.all([a.instance.load(s.INTERNAL_PORTALS_KEY,S.ASSET_LOCATION+"json/internal.json?v="+e,"text/plain"),a.instance.load(s.CONTRACTED_PORTALS_KEY,S.ASSET_LOCATION+"json/contracted.json?v="+e,"text/plain"),a.instance.load(s.SPECIAL_PORTALS_KEY,S.ASSET_LOCATION+"json/special.json?v="+e,"text/plain"),a.instance.load(s.GAME_ICONS_KEY,S.ASSET_LOCATION+"json/games.json?v="+e,"text/plain")]),t.then(function(e){var t=e[0],i=e[1];o.setList(t),w.loadPortalScript(i),s.setSiteLock(i)}).catch(function(){})},s.setSiteLock=function(e){s.siteLocks=e},Object.defineProperty(s,"brandingLogoUrl",{get:function(){var e;switch(S.isOnDevice()||s.isAirfi()?S.ASSET_LOCATION="assets/":"fbrq.io"===S.getSourceSite(!0)&&(S.ASSET_LOCATION="https://"+window.location.host+"/@azerion/splash/assets/"),S.getBrandingDomain()){case p.BrandingDomain.Spele:e="spele";break;case p.BrandingDomain.PlayCell:e="playcell";break;case p.BrandingDomain.GameCell:e="gamecell";break;case p.BrandingDomain.Yepi:e="yepi";break;case p.BrandingDomain.Admeen:e="admeen";break;case p.BrandingDomain.Bild:e="bild";break;case p.BrandingDomain.Kizi:e="kizi";break;case p.BrandingDomain.Funnygames:e="funnygames";break;case p.BrandingDomain.PlayTime:e="playtime";break;default:case p.BrandingDomain.AGame:e="agame";break;case p.BrandingDomain.Zigiz:e="zigiz"}return S.ASSET_LOCATION+"images/branding_logo_"+e+"_small.png"},enumerable:!1,configurable:!0}),Object.defineProperty(s,"brandingBackgroundColor",{get:function(){var e;switch(S.getBrandingDomain()){case p.BrandingDomain.Spele:e="#4a72ad";break;case p.BrandingDomain.PlayCell:e="#52a1e1";break;case p.BrandingDomain.GameCell:e="#c600b2";break;case p.BrandingDomain.Yepi:e="#0573a7";break;case p.BrandingDomain.AGame:e="#0C486C";break;case p.BrandingDomain.Admeen:e="#4267B2";break;case p.BrandingDomain.Bild:e="#de0000";break;default:case p.BrandingDomain.Kizi:e="#012f50";break;case p.BrandingDomain.Funnygames:e="#33b0ff";break;case p.BrandingDomain.PlayTime:case p.BrandingDomain.Zigiz:e="#023a63"}return e},enumerable:!1,configurable:!0}),s.openCampaignLink=function(e,t){if(!S.isOnDevice()&&!s.isSpecial()&&s.outGoingLinksAllowed()){var i,n,r=S.getSourceSite(),o=S.isOnDevice()?"https://":"//";switch(S.getBrandingDomain()){case p.BrandingDomain.Spele:i=o+"www.spele.nl";break;case p.BrandingDomain.Yepi:i=o+"www.yepi.com";break;case p.BrandingDomain.Admeen:return i="https://media.admeen.com/branding/link.php",void((n=window.open(i,"_blank"))&&n.focus&&n.focus());case p.BrandingDomain.PlayCell:i=o+"www.playcell.com";break;case p.BrandingDomain.GameCell:i=o+"www.gamecell.com";break;case p.BrandingDomain.Kizi:i=o+"www.kizi.com";break;case p.BrandingDomain.Bild:return void((n=window.open(o+"www.bildspielt.de","_blank"))&&n.focus&&n.focus());case p.BrandingDomain.Funnygames:i=o+"www.funnygames.nu";break;case p.BrandingDomain.PlayTime:i=o+"playtime.nl";break;default:case p.BrandingDomain.AGame:i=o+"www.agame.com";break;case p.BrandingDomain.Zigiz:i=o+"m.zigiz.com"}var a="string"==typeof t?t:p.UtmTargets[t];(n=window.open(i+"/?utm_source="+r+"&utm_medium=html5&utm_term="+e+"&utm_content="+a+"&utm_campaign=Gamedistribution","_blank"))&&n.focus&&n.focus()}},s.isInternal=function(){return s.hostMatchesList(a.instance.get(s.INTERNAL_PORTALS_KEY))},s.isContracted=function(){return s.hostMatchesList(a.instance.get(s.CONTRACTED_PORTALS_KEY))},s.isSpecial=function(){return s.hostMatchesList(a.instance.get(s.SPECIAL_PORTALS_KEY))},s.isAdmeen=function(){if(!s.siteLocks||!s.siteLocks.hasOwnProperty("admeen"))return!1;var e=s.siteLocks.admeen;return s.hostMatchesList(e)},s.isKongregate=function(){if(!s.siteLocks||!s.siteLocks.hasOwnProperty("kongregate"))return!1;var e=s.siteLocks.kongregate;return s.hostMatchesList(e)},s.isNewgrounds=function(){if(!s.siteLocks||!s.siteLocks.hasOwnProperty("newgrounds"))return!1;var e=s.siteLocks.newgrounds;return s.hostMatchesList(e)},s.isBild=function(){return"bild.fbrq.io"===window.location.host||-1!==window.location.host.indexOf("contentfleet.com")},s.isPlaytime=function(){return-1!==window.location.host.indexOf("playtime.nl")},s.isBip=function(){return-1!==window.location.search.indexOf("bipgaming")||"bip.fbrq.io"===window.location.host},s.isPlaycellApp=function(){return-1!==window.location.search.indexOf("playcellApp")},s.isAGame=function(){return-1!==window.location.search.indexOf("agame")},s.isAirfi=function(){return!!window.hasOwnProperty("airfi")&&window.airfi},s.outGoingLinksAllowed=function(){return!(s.isAirfi()||s.isSpecial()||s.isContracted())&&(!window.hasOwnProperty("fbrqLA")||window.fbrqLA)},s.hostMatchesList=function(e){e=e||[];for(var t=S.getSourceSite(),i=0;i<e.length;i++)if(t===e[i])return!0;return!1},s.LOGO_KEY="branding_logo",s.INTERNAL_PORTALS_KEY="branding_portals",s.CONTRACTED_PORTALS_KEY="branding_contracted",s.SPECIAL_PORTALS_KEY="branding_special",s.SITELOCK_PORTALS="sitelock_portals",s.GAME_ICONS_KEY="more_games",s.DOMAIN_OVERWRITE=null,s.analyticsEnabled=!0,s}(),S=function(){function n(){}return n.getSourceSite=function(e){void 0===e&&(e=!1);var t=document.referrer||window.location.host;if(e&&(t=window.location.host),-1!==t.indexOf("embed.gamedistribution.com")&&-1!==window.location.search.indexOf("gd_sdk_referrer_url")&&(t=n.getUrlParameter("gd_sdk_referrer_url")||t),t=decodeURIComponent(t),b.isBild())return"bildspielt.de";if(b.isBip())return"bipgaming.com";t=(t=-1<t.indexOf("://")?t.split("/")[2]:t.split("/")[0]).split(":")[0];var i=o.getDomain(t);return null!==i?i:(3===t.split(".").length&&(t=t.substr(t.indexOf(".")+1)),t)},n.getBrandingDomain=function(){if(window.hasOwnProperty("fbrqBD")&&window.fbrqBD in p.BrandingDomain)return window.fbrqBD;if(b.DOMAIN_OVERWRITE)return b.DOMAIN_OVERWRITE;var e=n.getSourceSite();if(b.isAdmeen())return p.BrandingDomain.Admeen;if(b.isPlaycellApp()||b.isBip())return p.BrandingDomain.PlayCell;switch(e){case"spele.nl":return p.BrandingDomain.Spele;case"yepi.com":return p.BrandingDomain.Yepi;case"oyunskor.com":case"barbioyunu.com.tr":case"bebekoyunu.com.tr":case"oyunkolu.com":case"oyungemisi.com":case"oyunlar1.com":case"oyunkuzusu.com":case"kraloyun.com":case"rekoroyun.com":case"oyundedem.com":case"oyunoyna.com":case"pastaoyunu.com.tr":case"playcell.com":return p.BrandingDomain.PlayCell;case"gamecell.com":return p.BrandingDomain.GameCell;case"playxl.com":return p.BrandingDomain.Admeen;case"kizi.com":return p.BrandingDomain.Kizi;case"bildspielt.de":return p.BrandingDomain.Bild;case"funnygames.nl":return p.BrandingDomain.Funnygames;case"playtime.nl":return p.BrandingDomain.PlayTime;default:case"agame.com":return p.BrandingDomain.AGame;case"zigiz.com":return p.BrandingDomain.Zigiz}},n.getReferrer=function(e){return-1!==e.indexOf("?ref=")?e.substr(e.indexOf("?ref=")+5):e},n.inIframe=function(){try{return window.self!==window.top}catch(e){return!0}},n.inGDGameZone=function(){return-1!==document.referrer.indexOf("html5.gamedistribution.com")},n.getDomain=function(e){var t=document.createElement("a");return t.href=e,t.origin},n.isOnDevice=function(){return void 0!==window.cordova&&!/(gamedistribution\.com)/.test(window.location.hostname)},n.isTc=function(){return/(teamcity\.azerdev\.com)/.test(window.location.host)},n.getRandomRange=function(e,t){return Math.random()*(t-e)+e|0},n.getUrlParameter=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},n.intTimeToString=function(e){var t=Math.floor(e/3600),i=Math.floor(e%3600/60),n=e%60;return(t<10?"0"+t:t.toString())+":"+(i<10?"0"+i:i.toString())+":"+(n<10?"0"+n:n.toString())},n.ASSET_LOCATION=window.hasOwnProperty("fbrqSA")&&!0===window.fbrqSA?"assets/":"https://cdn.fbrq.io/@azerion/splash/assets/",n}(),C=function(){function e(){}return e.preload=function(){return b.analyticsEnabled?new Promise(function(e,t){var i,n,r,o,a,s,p=S.isOnDevice()?"https://":"//";i=window,n=document,r=p+"www.google-analytics.com/analytics.js",o="ga",i.GoogleAnalyticsObject=o,i.ga=i.ga?i.ga:function(){(i.ga.q=i.ga.q||[]).push(arguments)},i.ga.l=Date.now(),a=n.createElement("script"),s=n.getElementsByTagName("script")[0],a.async=1,a.src=r,s.parentNode.insertBefore(a,s),e()}):Promise.resolve()},e.prototype.setup=function(e,t,i,n,r){if(void 0===n&&(n="auto"),void 0===r&&(r=100),!b.analyticsEnabled)return null;if(ga("create",e,n,{sampleRate:r}),S.isOnDevice()&&ga("set","checkProtocolTask",null),void 0!==t&&ga("set","appName",t),void 0!==t&&ga("set","appVersion",i),ga("send","pageview"),"auto"!==n){var o={name:"fbrq",sampleRate:1};for(var a in n)n.hasOwnProperty(a)&&(o[a]=n[a]);ga("create","UA-60359297-50",o)}else ga("create","UA-60359297-50",n,"fbrq",{sampleRate:1});if(b.isAGame()){var s=S.getReferrer(decodeURIComponent(document.referrer));ga("fbrq.set","referrer",s),ga("set","referrer",s)}return S.isOnDevice()&&ga("fbrq.set","checkProtocolTask",null),ga("fbrq.set","appName","All"),ga("fbrq.send","pageview"),ga},e.prototype.sendScreenView=function(t){b.analyticsEnabled&&["send","fbrq.send"].forEach(function(e){ga(e,"screenview",{screenName:t})})},e.prototype.sendGenericEvent=function(t,i,n){b.analyticsEnabled&&["send","fbrq.send"].forEach(function(e){ga(e,"event",t,i,n)})},e}(),M=M||function(s,e){var t={},i=t.lib={},n=function(){},r=i.Base={extend:function(e){n.prototype=this;var t=new n;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},p=i.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var r=0;r<e;r++)t[n+r>>>2]|=(i[r>>>2]>>>24-r%4*8&255)<<24-(n+r)%4*8;else if(65535<i.length)for(r=0;r<e;r+=4)t[n+r>>>2]=i[r>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=s.ceil(t/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],i=0;i<e;i+=4)t.push(4294967296*s.random()|0);return new p.init(t,e)}}),o=t.enc={},a=o.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++){var r=t[n>>>2]>>>24-n%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new p.init(i,t/2)}},l=o.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++)i.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new p.init(i,t)}},h=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},u=i.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new p.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,i=t.words,n=t.sigBytes,r=this.blockSize,o=n/(4*r);if(e=(o=e?s.ceil(o):s.max((0|o)-this._minBufferSize,0))*r,n=s.min(4*e,n),e){for(var a=0;a<e;a+=r)this._doProcessBlock(i,a);a=i.splice(0,e),t.sigBytes-=n}return new p.init(a,n)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=u.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(i){return function(e,t){return new i.init(t).finalize(e)}},_createHmacHelper:function(i){return function(e,t){return new d.HMAC.init(i,t).finalize(e)}}});var d=t.algo={};return t}(Math);!function(r){for(var e=M,t=(n=e.lib).WordArray,i=n.Hasher,n=e.algo,o=[],_=[],a=function(e){return 4294967296*(e-(0|e))|0},s=2,p=0;p<64;){var l;e:{l=s;for(var h=r.sqrt(l),u=2;u<=h;u++)if(!(l%u)){l=!1;break e}l=!0}l&&(p<8&&(o[p]=a(r.pow(s,.5))),_[p]=a(r.pow(s,1/3)),p++),s++}var y=[];n=n.SHA256=i.extend({_doReset:function(){this._hash=new t.init(o.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],r=i[1],o=i[2],a=i[3],s=i[4],p=i[5],l=i[6],h=i[7],u=0;u<64;u++){if(u<16)y[u]=0|e[t+u];else{var d=y[u-15],c=y[u-2];y[u]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+y[u-7]+((c<<15|c>>>17)^(c<<13|c>>>19)^c>>>10)+y[u-16]}d=h+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&p^~s&l)+_[u]+y[u],c=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&r^n&o^r&o),h=l,l=p,p=s,s=a+d|0,a=o,o=r,r=n,n=d+c|0}i[0]=i[0]+n|0,i[1]=i[1]+r|0,i[2]=i[2]+o|0,i[3]=i[3]+a|0,i[4]=i[4]+s|0,i[5]=i[5]+p|0,i[6]=i[6]+l|0,i[7]=i[7]+h|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=r.floor(i/4294967296),t[15+(n+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA256=i._createHelper(n),e.HmacSHA256=i._createHmacHelper(n)}(Math),h=(l=M).enc.Utf8,l.algo.HMAC=l.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=h.parse(t));var i=e.blockSize,n=4*i;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),o=this._iKey=t.clone(),a=r.words,s=o.words,p=0;p<i;p++)a[p]^=1549556828,s[p]^=909522486;r.sigBytes=o.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}}),c=(d=M).lib.WordArray,d.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,n=this._map;e.clamp(),e=[];for(var r=0;r<i;r+=3)for(var o=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,a=0;a<4&&r+.75*a<i;a++)e.push(n.charAt(o>>>6*(3-a)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,i=this._map;(n=i.charAt(64))&&-1!=(n=e.indexOf(n))&&(t=n);for(var n=[],r=0,o=0;o<t;o++)if(o%4){var a=i.indexOf(e.charAt(o-1))<<o%4*2,s=i.indexOf(e.charAt(o))>>>6-o%4*2;n[r>>>2]|=(a|s)<<24-r%4*8,r++}return c.create(n,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},_=Ie||(Ie={}),(y=_.EGAErrorSeverity||(_.EGAErrorSeverity={}))[y.Undefined=0]="Undefined",y[y.Debug=1]="Debug",y[y.Info=2]="Info",y[y.Warning=3]="Warning",y[y.Error=4]="Error",y[y.Critical=5]="Critical",(x=_.EGAGender||(_.EGAGender={}))[x.Undefined=0]="Undefined",x[x.Male=1]="Male",x[x.Female=2]="Female",(m=_.EGAProgressionStatus||(_.EGAProgressionStatus={}))[m.Undefined=0]="Undefined",m[m.Start=1]="Start",m[m.Complete=2]="Complete",m[m.Fail=3]="Fail",(g=_.EGAResourceFlowType||(_.EGAResourceFlowType={}))[g.Undefined=0]="Undefined",g[g.Source=1]="Source",g[g.Sink=2]="Sink",f=_.http||(_.http={}),(v=f.EGASdkErrorType||(f.EGASdkErrorType={}))[v.Undefined=0]="Undefined",v[v.Rejected=1]="Rejected",(z=f.EGAHTTPApiResponse||(f.EGAHTTPApiResponse={}))[z.NoResponse=0]="NoResponse",z[z.BadResponse=1]="BadResponse",z[z.RequestTimeout=2]="RequestTimeout",z[z.JsonEncodeFailed=3]="JsonEncodeFailed",z[z.JsonDecodeFailed=4]="JsonDecodeFailed",z[z.InternalServerError=5]="InternalServerError",z[z.BadRequest=6]="BadRequest",z[z.Unauthorized=7]="Unauthorized",z[z.UnknownResponseCode=8]="UnknownResponseCode",z[z.Ok=9]="Ok";var P,k,T,A,O,E,G,D,I,L,B,R,j,N,U,V,H,W,q,X,Y,K,Z,J,Q,$,ee,te,ie,ne,re,oe,ae,se,pe,le,he,ue,de,ce,_e,ye,xe,me,ge,fe,ve,ze,we,be,Se,Ce,Me,Pe,ke,Te,Ae,Oe,Ee,Ge,De,Ie,Le,Be,Re,Fe,je,Ne,Ue,Ve,He,We,qe,Xe;Ie.EGAErrorSeverity,Ie.EGAGender,Ie.EGAProgressionStatus,Ie.EGAResourceFlowType;(function(e){var n,t;(t=n||(n={}))[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Debug=3]="Debug";var i=function(){function i(){i.debugEnabled=!1}return i.setInfoLog=function(e){i.instance.infoLogEnabled=e},i.setVerboseLog=function(e){i.instance.infoLogVerboseEnabled=e},i.i=function(e){if(i.instance.infoLogEnabled){var t="Info/"+i.Tag+": "+e;i.instance.sendNotificationMessage(t,n.Info)}},i.w=function(e){var t="Warning/"+i.Tag+": "+e;i.instance.sendNotificationMessage(t,n.Warning)},i.e=function(e){var t="Error/"+i.Tag+": "+e;i.instance.sendNotificationMessage(t,n.Error)},i.ii=function(e){if(i.instance.infoLogVerboseEnabled){var t="Verbose/"+i.Tag+": "+e;i.instance.sendNotificationMessage(t,n.Info)}},i.d=function(e){if(i.debugEnabled){var t="Debug/"+i.Tag+": "+e;i.instance.sendNotificationMessage(t,n.Debug)}},i.prototype.sendNotificationMessage=function(e,t){switch(t){case n.Error:case n.Warning:break;case n.Debug:console.debug;break;case n.Info:}},i.instance=new i,i.Tag="GameAnalytics",i}();e.GALogger=i})((P=Ie||(Ie={})).logging||(P.logging={})),k=Ie||(Ie={}),T=k.utilities||(k.utilities={}),A=k.logging.GALogger,O=function(){function h(){}return h.getHmac=function(e,t){var i=M.HmacSHA256(t,e);return M.enc.Base64.stringify(i)},h.stringMatch=function(e,t){return!(!e||!t)&&t.test(e)},h.joinStringArray=function(e,t){for(var i="",n=0,r=e.length;n<r;n++)0<n&&(i+=t),i+=e[n];return i},h.stringArrayContainsString=function(e,t){if(0===e.length)return!1;for(var i in e)if(e[i]===t)return!0;return!1},h.encode64=function(e){e=encodeURI(e);for(var t,i,n,r,o,a="",s=0,p=0,l=0;n=(t=e.charCodeAt(l++))>>2,r=(3&t)<<4|(i=e.charCodeAt(l++))>>4,o=(15&i)<<2|(s=e.charCodeAt(l++))>>6,p=63&s,isNaN(i)?o=p=64:isNaN(s)&&(p=64),a=a+h.keyStr.charAt(n)+h.keyStr.charAt(r)+h.keyStr.charAt(o)+h.keyStr.charAt(p),t=i=s=0,n=r=o=p=0,l<e.length;);return a},h.decode64=function(e){var t,i,n,r,o="",a=0,s=0,p=0;for(/[^A-Za-z0-9\+\/\=]/g.exec(e)&&A.w("There were invalid base64 characters in the input text. Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='. Expect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");t=h.keyStr.indexOf(e.charAt(p++))<<2|(n=h.keyStr.indexOf(e.charAt(p++)))>>4,i=(15&n)<<4|(r=h.keyStr.indexOf(e.charAt(p++)))>>2,a=(3&r)<<6|(s=h.keyStr.indexOf(e.charAt(p++))),o+=String.fromCharCode(t),64!=r&&(o+=String.fromCharCode(i)),64!=s&&(o+=String.fromCharCode(a)),t=i=a=0,n=r=s=0,p<e.length;);return decodeURI(o)},h.timeIntervalSince1970=function(){var e=new Date;return Math.round(e.getTime()/1e3)},h.createGuid=function(){return(h.s4()+h.s4()+"-"+h.s4()+"-4"+h.s4().substr(0,3)+"-"+h.s4()+"-"+h.s4()+h.s4()+h.s4()).toLowerCase()},h.s4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},h.keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h}(),T.GAUtilities=O,E=Ie||(Ie={}),G=E.validators||(E.validators={}),D=E.logging.GALogger,I=E.http.EGASdkErrorType,L=E.utilities.GAUtilities,B=function(){function s(){}return s.validateBusinessEvent=function(e,t,i,n,r){return s.validateCurrency(e)?t<0?(D.w("Validation fail - business event - amount. Cannot be less than 0. Failed amount: "+t),!1):s.validateShortString(i,!0)?s.validateEventPartLength(n,!1)?s.validateEventPartCharacters(n)?s.validateEventPartLength(r,!1)?!!s.validateEventPartCharacters(r)||(D.w("Validation fail - business event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+r),!1):(D.w("Validation fail - business event - itemId. Cannot be (null), empty or above 64 characters. String: "+r),!1):(D.w("Validation fail - business event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+n),!1):(D.w("Validation fail - business event - itemType: Cannot be (null), empty or above 64 characters. String: "+n),!1):(D.w("Validation fail - business event - cartType. Cannot be above 32 length. String: "+i),!1):(D.w("Validation fail - business event - currency: Cannot be (null) and need to be A-Z, 3 characters and in the standard at openexchangerates.org. Failed currency: "+e),!1)},s.validateResourceEvent=function(e,t,i,n,r,o,a){return e==E.EGAResourceFlowType.Undefined?(D.w("Validation fail - resource event - flowType: Invalid flow type."),!1):t?L.stringArrayContainsString(o,t)?0<i?n?s.validateEventPartLength(n,!1)?s.validateEventPartCharacters(n)?L.stringArrayContainsString(a,n)?s.validateEventPartLength(r,!1)?!!s.validateEventPartCharacters(r)||(D.w("Validation fail - resource event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+r),!1):(D.w("Validation fail - resource event - itemId: Cannot be (null), empty or above 64 characters. String: "+r),!1):(D.w("Validation fail - resource event - itemType: Not found in list of pre-defined available resource itemTypes. String: "+n),!1):(D.w("Validation fail - resource event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+n),!1):(D.w("Validation fail - resource event - itemType: Cannot be (null), empty or above 64 characters. String: "+n),!1):(D.w("Validation fail - resource event - itemType: Cannot be (null)"),!1):(D.w("Validation fail - resource event - amount: Float amount cannot be 0 or negative. Value: "+i),!1):(D.w("Validation fail - resource event - currency: Not found in list of pre-defined available resource currencies. String: "+t),!1):(D.w("Validation fail - resource event - currency: Cannot be (null)"),!1)},s.validateProgressionEvent=function(e,t,i,n){if(e==E.EGAProgressionStatus.Undefined)return D.w("Validation fail - progression event: Invalid progression status."),!1;if(n&&!i&&t)return D.w("Validation fail - progression event: 03 found but 01+02 are invalid. Progression must be set as either 01, 01+02 or 01+02+03."),!1;if(i&&!t)return D.w("Validation fail - progression event: 02 found but not 01. Progression must be set as either 01, 01+02 or 01+02+03"),!1;if(!t)return D.w("Validation fail - progression event: progression01 not valid. Progressions must be set as either 01, 01+02 or 01+02+03"),!1;if(!s.validateEventPartLength(t,!1))return D.w("Validation fail - progression event - progression01: Cannot be (null), empty or above 64 characters. String: "+t),!1;if(!s.validateEventPartCharacters(t))return D.w("Validation fail - progression event - progression01: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+t),!1;if(i){if(!s.validateEventPartLength(i,!0))return D.w("Validation fail - progression event - progression02: Cannot be empty or above 64 characters. String: "+i),!1;if(!s.validateEventPartCharacters(i))return D.w("Validation fail - progression event - progression02: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+i),!1}if(n){if(!s.validateEventPartLength(n,!0))return D.w("Validation fail - progression event - progression03: Cannot be empty or above 64 characters. String: "+n),!1;if(!s.validateEventPartCharacters(n))return D.w("Validation fail - progression event - progression03: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+n),!1}return!0},s.validateDesignEvent=function(e,t){return s.validateEventIdLength(e)?!!s.validateEventIdCharacters(e)||(D.w("Validation fail - design event - eventId: Non valid characters. Only allowed A-z, 0-9, -_., ()!?. String: "+e),!1):(D.w("Validation fail - design event - eventId: Cannot be (null) or empty. Only 5 event parts allowed seperated by :. Each part need to be 32 characters or less. String: "+e),!1)},s.validateErrorEvent=function(e,t){return e==E.EGAErrorSeverity.Undefined?(D.w("Validation fail - error event - severity: Severity was unsupported value."),!1):!!s.validateLongString(t,!0)||(D.w("Validation fail - error event - message: Message cannot be above 8192 characters."),!1)},s.validateSdkErrorEvent=function(e,t,i){return!(!s.validateKeys(e,t)||i===I.Undefined&&(D.w("Validation fail - sdk error event - type: Type was unsupported value."),1))},s.validateKeys=function(e,t){return!(!L.stringMatch(e,/^[A-z0-9]{32}$/)||!L.stringMatch(t,/^[A-z0-9]{40}$/))},s.validateCurrency=function(e){return!!e&&!!L.stringMatch(e,/^[A-Z]{3}$/)},s.validateEventPartLength=function(e,t){return!(!t||e)||!!e&&!(64<e.length)},s.validateEventPartCharacters=function(e){return!!L.stringMatch(e,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}$/)},s.validateEventIdLength=function(e){return!!e&&!!L.stringMatch(e,/^[^:]{1,64}(?::[^:]{1,64}){0,4}$/)},s.validateEventIdCharacters=function(e){return!!e&&!!L.stringMatch(e,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}(:[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}){0,4}$/)},s.validateAndCleanInitRequestResponse=function(t){if(null==t)return D.w("validateInitRequestResponse failed - no response dictionary."),null;var e={};try{e.enabled=t.enabled}catch(e){return D.w("validateInitRequestResponse failed - invalid type in 'enabled' field."),null}try{var i=t.server_ts;if(!(0<i))return D.w("validateInitRequestResponse failed - invalid value in 'server_ts' field."),null;e.server_ts=i}catch(e){return D.w("validateInitRequestResponse failed - invalid type in 'server_ts' field. type="+typeof t.server_ts+", value="+t.server_ts+", "+e),null}try{var n=t.configurations;e.configurations=n}catch(e){return D.w("validateInitRequestResponse failed - invalid type in 'configurations' field. type="+typeof t.configurations+", value="+t.configurations+", "+e),null}return e},s.validateBuild=function(e){return!!s.validateShortString(e,!1)},s.validateSdkWrapperVersion=function(e){return!!L.stringMatch(e,/^(unity|unreal|gamemaker|cocos2d|construct|defold) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/)},s.validateEngineVersion=function(e){return!(!e||!L.stringMatch(e,/^(unity|unreal|gamemaker|cocos2d|construct|defold) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/))},s.validateUserId=function(e){return!!s.validateString(e,!1)||(D.w("Validation fail - user id: id cannot be (null), empty or above 64 characters."),!1)},s.validateShortString=function(e,t){return!(!t||e)||!(!e||32<e.length)},s.validateString=function(e,t){return!(!t||e)||!(!e||64<e.length)},s.validateLongString=function(e,t){return!(!t||e)||!(!e||8192<e.length)},s.validateConnectionType=function(e){return L.stringMatch(e,/^(wwan|wifi|lan|offline)$/)},s.validateCustomDimensions=function(e){return s.validateArrayOfStrings(20,32,!1,"custom dimensions",e)},s.validateResourceCurrencies=function(e){if(!s.validateArrayOfStrings(20,64,!1,"resource currencies",e))return!1;for(var t=0;t<e.length;++t)if(!L.stringMatch(e[t],/^[A-Za-z]+$/))return D.w("resource currencies validation failed: a resource currency can only be A-Z, a-z. String was: "+e[t]),!1;return!0},s.validateResourceItemTypes=function(e){if(!s.validateArrayOfStrings(20,32,!1,"resource item types",e))return!1;for(var t=0;t<e.length;++t)if(!s.validateEventPartCharacters(e[t]))return D.w("resource item types validation failed: a resource item type cannot contain other characters than A-z, 0-9, -_., ()!?. String was: "+e[t]),!1;return!0},s.validateDimension01=function(e,t){return!e||!!L.stringArrayContainsString(t,e)},s.validateDimension02=function(e,t){return!e||!!L.stringArrayContainsString(t,e)},s.validateDimension03=function(e,t){return!e||!!L.stringArrayContainsString(t,e)},s.validateArrayOfStrings=function(e,t,i,n,r){var o=n;if(o||(o="Array"),!r)return D.w(o+" validation failed: array cannot be null. "),!1;if(0==i&&0==r.length)return D.w(o+" validation failed: array cannot be empty. "),!1;if(0<e&&r.length>e)return D.w(o+" validation failed: array cannot exceed "+e+" values. It has "+r.length+" values."),!1;for(var a=0;a<r.length;++a){var s=r[a]?r[a].length:0;if(0===s)return D.w(o+" validation failed: contained an empty string. Array="+JSON.stringify(r)),!1;if(0<t&&t<s)return D.w(o+" validation failed: a string exceeded max allowed length (which is: "+t+"). String was: "+r[a]),!1}return!0},s.validateFacebookId=function(e){return!!s.validateString(e,!1)||(D.w("Validation fail - facebook id: id cannot be (null), empty or above 64 characters."),!1)},s.validateGender=function(e){if(isNaN(Number(E.EGAGender[e]))){if(e==E.EGAGender.Undefined||e!=E.EGAGender.Male&&e!=E.EGAGender.Female)return D.w("Validation fail - gender: Has to be 'male' or 'female'. Was: "+e),!1}else if(e==E.EGAGender[E.EGAGender.Undefined]||e!=E.EGAGender[E.EGAGender.Male]&&e!=E.EGAGender[E.EGAGender.Female])return D.w("Validation fail - gender: Has to be 'male' or 'female'. Was: "+e),!1;return!0},s.validateBirthyear=function(e){return!(e<0||9999<e)||(D.w("Validation fail - birthYear: Cannot be (null) or invalid range."),!1)},s.validateClientTs=function(e){return!(e<-4294967294||4294967294<e)},s}(),G.GAValidator=B,function(e){var t=function(e,t,i){this.name=e,this.value=t,this.version=i};e.NameValueVersion=t;var h=function(e,t){this.name=e,this.version=t};e.NameVersion=h;var i=function(){function r(){}return r.touch=function(){},r.getRelevantSdkVersion=function(){return r.sdkGameEngineVersion?r.sdkGameEngineVersion:r.sdkWrapperVersion},r.getConnectionType=function(){return r.connectionType},r.updateConnectionType=function(){r.connectionType=navigator.onLine?"ios"===r.buildPlatform||"android"===r.buildPlatform?"wwan":"lan":"offline"},r.getOSVersionString=function(){return r.buildPlatform+" "+r.osVersionPair.version},r.runtimePlatformToString=function(){return r.osVersionPair.name},r.getBrowserVersionString=function(){var e,t=navigator.userAgent,i=t.match(/(opera|chrome|safari|firefox|ubrowser|msie|trident|fbav(?=\/))\/?\s*(\d+)/i)||[];if(0==i.length&&"ios"===r.buildPlatform)return"webkit_"+r.osVersion;if(/trident/i.test(i[1]))return"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||"");if("Chrome"===i[1]&&null!=(e=t.match(/\b(OPR|Edge|UBrowser)\/(\d+)/)))return e.slice(1).join(" ").replace("OPR","Opera").replace("UBrowser","UC").toLowerCase();if(i[1]&&"fbav"===i[1].toLowerCase()&&(i[1]="facebook",i[2]))return"facebook "+i[2];var n=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"];return null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),n.join(" ").toLowerCase()},r.getDeviceModel=function(){return"unknown"},r.getDeviceManufacturer=function(){return"unknown"},r.matchItem=function(e,t){var i,n,r,o,a=new h("unknown","0.0.0"),s=0,p=0;for(s=0;s<t.length;s+=1)if(new RegExp(t[s].value,"i").test(e)){if(i=new RegExp(t[s].version+"[- /:;]([\\d._]+)","i"),o="",(n=e.match(i))&&n[1]&&(r=n[1]),r){var l=r.split(/[._]+/);for(p=0;p<Math.min(l.length,3);p+=1)o+=l[p]+(p<Math.min(l.length,3)-1?".":"")}else o="0.0.0";return a.name=t[s].name,a.version=o,a}return a},r.sdkWrapperVersion="javascript 3.1.2",r.osVersionPair=r.matchItem([navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor].join(" "),[new t("windows_phone","Windows Phone","OS"),new t("windows","Win","NT"),new t("ios","iPhone","OS"),new t("ios","iPad","OS"),new t("ios","iPod","OS"),new t("android","Android","Android"),new t("blackBerry","BlackBerry","/"),new t("mac_osx","Mac","OS X"),new t("tizen","Tizen","Tizen"),new t("linux","Linux","rv")]),r.buildPlatform=r.runtimePlatformToString(),r.deviceModel=r.getDeviceModel(),r.deviceManufacturer=r.getDeviceManufacturer(),r.osVersion=r.getOSVersionString(),r.browserVersion=r.getBrowserVersionString(),r.maxSafeInteger=Math.pow(2,53)-1,r}();e.GADevice=i}((R=Ie||(Ie={})).device||(R.device={})),j=Ie||(Ie={}),N=j.threading||(j.threading={}),U=function(){function t(e){this.deadline=e,this.ignore=!1,this.async=!1,this.running=!1,this.id=++t.idCounter}return t.idCounter=0,t}(),N.TimedBlock=U,V=Ie||(Ie={}),H=V.threading||(V.threading={}),W=function(){function e(e){this.comparer=e,this._subQueues={},this._sortedKeys=[]}return e.prototype.enqueue=function(e,t){-1===this._sortedKeys.indexOf(e)&&this.addQueueOfPriority(e),this._subQueues[e].push(t)},e.prototype.addQueueOfPriority=function(e){var i=this;this._sortedKeys.push(e),this._sortedKeys.sort(function(e,t){return i.comparer.compare(e,t)}),this._subQueues[e]=[]},e.prototype.peek=function(){if(this.hasItems())return this._subQueues[this._sortedKeys[0]][0];throw new Error("The queue is empty")},e.prototype.hasItems=function(){return 0<this._sortedKeys.length},e.prototype.dequeue=function(){if(this.hasItems())return this.dequeueFromHighPriorityQueue();throw new Error("The queue is empty")},e.prototype.dequeueFromHighPriorityQueue=function(){var e=this._sortedKeys[0],t=this._subQueues[e].shift();return 0===this._subQueues[e].length&&(this._sortedKeys.shift(),delete this._subQueues[e]),t},e}(),H.PriorityQueue=W,function(e){var d,t,i,n,r=q.logging.GALogger;(t=d=e.EGAStoreArgsOperator||(e.EGAStoreArgsOperator={}))[t.Equal=0]="Equal",t[t.LessOrEqual=1]="LessOrEqual",t[t.NotEqual=2]="NotEqual",(n=i=e.EGAStore||(e.EGAStore={}))[n.Events=0]="Events",n[n.Sessions=1]="Sessions",n[n.Progression=2]="Progression";var o=function(){function u(){this.eventsStore=[],this.sessionsStore=[],this.progressionStore=[],this.storeItems={};try{u.storageAvailable="object"==typeof localStorage&&(localStorage.setItem("testingLocalStorage","yes"),localStorage.removeItem("testingLocalStorage"),!0)}catch(e){}}return u.isStorageAvailable=function(){return u.storageAvailable},u.isStoreTooLargeForEvents=function(){return u.instance.eventsStore.length+u.instance.sessionsStore.length>u.MaxNumberOfEntries},u.select=function(e,t,i,n){void 0===t&&(t=[]),void 0===i&&(i=!1),void 0===n&&(n=0);var r=u.getStore(e);if(!r)return null;for(var o=[],a=0;a<r.length;++a){for(var s=r[a],p=!0,l=0;l<t.length;++l){var h=t[l];if(s[h[0]])switch(h[1]){case d.Equal:p=s[h[0]]==h[2];break;case d.LessOrEqual:p=s[h[0]]<=h[2];break;case d.NotEqual:p=s[h[0]]!=h[2];break;default:p=!1}else p=!1;if(!p)break}p&&o.push(s)}return i&&o.sort(function(e,t){return e.client_ts-t.client_ts}),0<n&&o.length>n&&(o=o.slice(0,n+1)),o},u.update=function(e,t,i){void 0===i&&(i=[]);var n=u.getStore(e);if(!n)return!1;for(var r=0;r<n.length;++r){for(var o=n[r],a=!0,s=0;s<i.length;++s){var p=i[s];if(o[p[0]])switch(p[1]){case d.Equal:a=o[p[0]]==p[2];break;case d.LessOrEqual:a=o[p[0]]<=p[2];break;case d.NotEqual:a=o[p[0]]!=p[2];break;default:a=!1}else a=!1;if(!a)break}if(a)for(s=0;s<t.length;++s){var l=t[s];o[l[0]]=l[1]}}return!0},u.delete=function(e,t){var i=u.getStore(e);if(i)for(var n=0;n<i.length;++n){for(var r=i[n],o=!0,a=0;a<t.length;++a){var s=t[a];if(r[s[0]])switch(s[1]){case d.Equal:o=r[s[0]]==s[2];break;case d.LessOrEqual:o=r[s[0]]<=s[2];break;case d.NotEqual:o=r[s[0]]!=s[2];break;default:o=!1}else o=!1;if(!o)break}o&&(i.splice(n,1),--n)}},u.insert=function(e,t,i,n){void 0===i&&(i=!1),void 0===n&&(n=null);var r=u.getStore(e);if(r)if(i){if(!n)return;for(var o=!1,a=0;a<r.length;++a){var s=r[a];if(s[n]==t[n]){for(var p in t)s[p]=t[p];o=!0;break}}o||r.push(t)}else r.push(t)},u.save=function(){u.isStorageAvailable()?(localStorage.setItem(u.KeyPrefix+u.EventsStoreKey,JSON.stringify(u.instance.eventsStore)),localStorage.setItem(u.KeyPrefix+u.SessionsStoreKey,JSON.stringify(u.instance.sessionsStore)),localStorage.setItem(u.KeyPrefix+u.ProgressionStoreKey,JSON.stringify(u.instance.progressionStore)),localStorage.setItem(u.KeyPrefix+u.ItemsStoreKey,JSON.stringify(u.instance.storeItems))):r.w("Storage is not available, cannot save.")},u.load=function(){if(u.isStorageAvailable()){try{u.instance.eventsStore=JSON.parse(localStorage.getItem(u.KeyPrefix+u.EventsStoreKey)),u.instance.eventsStore||(u.instance.eventsStore=[])}catch(e){r.w("Load failed for 'events' store. Using empty store."),u.instance.eventsStore=[]}try{u.instance.sessionsStore=JSON.parse(localStorage.getItem(u.KeyPrefix+u.SessionsStoreKey)),u.instance.sessionsStore||(u.instance.sessionsStore=[])}catch(e){r.w("Load failed for 'sessions' store. Using empty store."),u.instance.sessionsStore=[]}try{u.instance.progressionStore=JSON.parse(localStorage.getItem(u.KeyPrefix+u.ProgressionStoreKey)),u.instance.progressionStore||(u.instance.progressionStore=[])}catch(e){r.w("Load failed for 'progression' store. Using empty store."),u.instance.progressionStore=[]}try{u.instance.storeItems=JSON.parse(localStorage.getItem(u.KeyPrefix+u.ItemsStoreKey)),u.instance.storeItems||(u.instance.storeItems={})}catch(e){r.w("Load failed for 'items' store. Using empty store."),u.instance.progressionStore=[]}}else r.w("Storage is not available, cannot load.")},u.setItem=function(e,t){var i=u.KeyPrefix+e;t?u.instance.storeItems[i]=t:i in u.instance.storeItems&&delete u.instance.storeItems[i]},u.getItem=function(e){var t=u.KeyPrefix+e;return t in u.instance.storeItems?u.instance.storeItems[t]:null},u.getStore=function(e){switch(e){case i.Events:return u.instance.eventsStore;case i.Sessions:return u.instance.sessionsStore;case i.Progression:return u.instance.progressionStore;default:return r.w("GAStore.getStore(): Cannot find store: "+e),null}},u.instance=new u,u.MaxNumberOfEntries=2e3,u.KeyPrefix="GA::",u.EventsStoreKey="ga_event",u.SessionsStoreKey="ga_session",u.ProgressionStoreKey="ga_progression",u.ItemsStoreKey="ga_items",u}();e.GAStore=o}((q=Ie||(Ie={})).store||(q.store={})),X=Ie||(Ie={}),Y=X.state||(X.state={}),K=X.validators.GAValidator,Z=X.utilities.GAUtilities,J=X.logging.GALogger,Q=X.store.GAStore,$=X.device.GADevice,ee=X.store.EGAStore,te=X.store.EGAStoreArgsOperator,ie=function(){function h(){this.availableCustomDimensions01=[],this.availableCustomDimensions02=[],this.availableCustomDimensions03=[],this.availableResourceCurrencies=[],this.availableResourceItemTypes=[],this.configurations={},this.commandCenterListeners=[],this.sdkConfigDefault={},this.sdkConfig={},this.progressionTries={},this._isEventSubmissionEnabled=!0}return h.setUserId=function(e){h.instance.userId=e,h.cacheIdentifier()},h.getIdentifier=function(){return h.instance.identifier},h.isInitialized=function(){return h.instance.initialized},h.setInitialized=function(e){h.instance.initialized=e},h.getSessionStart=function(){return h.instance.sessionStart},h.getSessionNum=function(){return h.instance.sessionNum},h.getTransactionNum=function(){return h.instance.transactionNum},h.getSessionId=function(){return h.instance.sessionId},h.getCurrentCustomDimension01=function(){return h.instance.currentCustomDimension01},h.getCurrentCustomDimension02=function(){return h.instance.currentCustomDimension02},h.getCurrentCustomDimension03=function(){return h.instance.currentCustomDimension03},h.getGameKey=function(){return h.instance.gameKey},h.getGameSecret=function(){return h.instance.gameSecret},h.getAvailableCustomDimensions01=function(){return h.instance.availableCustomDimensions01},h.setAvailableCustomDimensions01=function(e){K.validateCustomDimensions(e)&&(h.instance.availableCustomDimensions01=e,h.validateAndFixCurrentDimensions(),J.i("Set available custom01 dimension values: ("+Z.joinStringArray(e,", ")+")"))},h.getAvailableCustomDimensions02=function(){return h.instance.availableCustomDimensions02},h.setAvailableCustomDimensions02=function(e){K.validateCustomDimensions(e)&&(h.instance.availableCustomDimensions02=e,h.validateAndFixCurrentDimensions(),J.i("Set available custom02 dimension values: ("+Z.joinStringArray(e,", ")+")"))},h.getAvailableCustomDimensions03=function(){return h.instance.availableCustomDimensions03},h.setAvailableCustomDimensions03=function(e){K.validateCustomDimensions(e)&&(h.instance.availableCustomDimensions03=e,h.validateAndFixCurrentDimensions(),J.i("Set available custom03 dimension values: ("+Z.joinStringArray(e,", ")+")"))},h.getAvailableResourceCurrencies=function(){return h.instance.availableResourceCurrencies},h.setAvailableResourceCurrencies=function(e){K.validateResourceCurrencies(e)&&(h.instance.availableResourceCurrencies=e,J.i("Set available resource currencies: ("+Z.joinStringArray(e,", ")+")"))},h.getAvailableResourceItemTypes=function(){return h.instance.availableResourceItemTypes},h.setAvailableResourceItemTypes=function(e){K.validateResourceItemTypes(e)&&(h.instance.availableResourceItemTypes=e,J.i("Set available resource item types: ("+Z.joinStringArray(e,", ")+")"))},h.getBuild=function(){return h.instance.build},h.setBuild=function(e){h.instance.build=e,J.i("Set build version: "+e)},h.getUseManualSessionHandling=function(){return h.instance.useManualSessionHandling},h.isEventSubmissionEnabled=function(){return h.instance._isEventSubmissionEnabled},h.prototype.setDefaultId=function(e){this.defaultUserId=e||"",h.cacheIdentifier()},h.getDefaultId=function(){return h.instance.defaultUserId},h.getSdkConfig=function(){var e,t=0;for(var i in h.instance.sdkConfig)0===t&&(e=i),++t;if(e&&0<t)return h.instance.sdkConfig;for(var i in t=0,h.instance.sdkConfigCached)0===t&&(e=i),++t;return e&&0<t?h.instance.sdkConfigCached:h.instance.sdkConfigDefault},h.isEnabled=function(){var e=h.getSdkConfig();return!(e.enabled&&"false"==e.enabled||!h.instance.initAuthorized)},h.setCustomDimension01=function(e){h.instance.currentCustomDimension01=e,Q.setItem(h.Dimension01Key,e),J.i("Set custom01 dimension value: "+e)},h.setCustomDimension02=function(e){h.instance.currentCustomDimension02=e,Q.setItem(h.Dimension02Key,e),J.i("Set custom02 dimension value: "+e)},h.setCustomDimension03=function(e){h.instance.currentCustomDimension03=e,Q.setItem(h.Dimension03Key,e),J.i("Set custom03 dimension value: "+e)},h.setFacebookId=function(e){h.instance.facebookId=e,Q.setItem(h.FacebookIdKey,e),J.i("Set facebook id: "+e)},h.setGender=function(e){h.instance.gender=isNaN(Number(X.EGAGender[e]))?X.EGAGender[e].toString().toLowerCase():X.EGAGender[X.EGAGender[e]].toString().toLowerCase(),Q.setItem(h.GenderKey,h.instance.gender),J.i("Set gender: "+h.instance.gender)},h.setBirthYear=function(e){h.instance.birthYear=e,Q.setItem(h.BirthYearKey,e.toString()),J.i("Set birth year: "+e)},h.incrementSessionNum=function(){var e=h.getSessionNum()+1;h.instance.sessionNum=e},h.incrementTransactionNum=function(){var e=h.getTransactionNum()+1;h.instance.transactionNum=e},h.incrementProgressionTries=function(e){var t=h.getProgressionTries(e)+1;h.instance.progressionTries[e]=t;var i={};i.progression=e,i.tries=t,Q.insert(ee.Progression,i,!0,"progression")},h.getProgressionTries=function(e){return e in h.instance.progressionTries?h.instance.progressionTries[e]:0},h.clearProgressionTries=function(e){e in h.instance.progressionTries&&delete h.instance.progressionTries[e];var t=[];t.push(["progression",te.Equal,e]),Q.delete(ee.Progression,t)},h.setKeys=function(e,t){h.instance.gameKey=e,h.instance.gameSecret=t},h.setManualSessionHandling=function(e){h.instance.useManualSessionHandling=e,J.i("Use manual session handling: "+e)},h.setEnabledEventSubmission=function(e){h.instance._isEventSubmissionEnabled=e},h.getEventAnnotations=function(){var e={v:2};e.user_id=h.instance.identifier,e.client_ts=h.getClientTsAdjusted(),e.sdk_version=$.getRelevantSdkVersion(),e.os_version=$.osVersion,e.manufacturer=$.deviceManufacturer,e.device=$.deviceModel,e.browser_version=$.browserVersion,e.platform=$.buildPlatform,e.session_id=h.instance.sessionId,e[h.SessionNumKey]=h.instance.sessionNum;var t=$.getConnectionType();return K.validateConnectionType(t)&&(e.connection_type=t),$.gameEngineVersion&&(e.engine_version=$.gameEngineVersion),h.instance.build&&(e.build=h.instance.build),h.instance.facebookId&&(e[h.FacebookIdKey]=h.instance.facebookId),h.instance.gender&&(e[h.GenderKey]=h.instance.gender),0!=h.instance.birthYear&&(e[h.BirthYearKey]=h.instance.birthYear),e},h.getSdkErrorEventAnnotations=function(){var e={v:2};e.category=h.CategorySdkError,e.sdk_version=$.getRelevantSdkVersion(),e.os_version=$.osVersion,e.manufacturer=$.deviceManufacturer,e.device=$.deviceModel,e.platform=$.buildPlatform;var t=$.getConnectionType();return K.validateConnectionType(t)&&(e.connection_type=t),$.gameEngineVersion&&(e.engine_version=$.gameEngineVersion),e},h.getInitAnnotations=function(){var e={};return e.user_id=h.getIdentifier(),e.sdk_version=$.getRelevantSdkVersion(),e.os_version=$.osVersion,e.platform=$.buildPlatform,e},h.getClientTsAdjusted=function(){var e=Z.timeIntervalSince1970(),t=e+h.instance.clientServerTimeOffset;return K.validateClientTs(t)?t:e},h.sessionIsStarted=function(){return 0!=h.instance.sessionStart},h.cacheIdentifier=function(){h.instance.userId?h.instance.identifier=h.instance.userId:h.instance.defaultUserId&&(h.instance.identifier=h.instance.defaultUserId)},h.ensurePersistedStates=function(){Q.isStorageAvailable()&&Q.load();var e=h.instance;e.setDefaultId(null!=Q.getItem(h.DefaultUserIdKey)?Q.getItem(h.DefaultUserIdKey):Z.createGuid()),e.sessionNum=null!=Q.getItem(h.SessionNumKey)?Number(Q.getItem(h.SessionNumKey)):0,e.transactionNum=null!=Q.getItem(h.TransactionNumKey)?Number(Q.getItem(h.TransactionNumKey)):0,e.facebookId?Q.setItem(h.FacebookIdKey,e.facebookId):(e.facebookId=null!=Q.getItem(h.FacebookIdKey)?Q.getItem(h.FacebookIdKey):"",e.facebookId),e.gender?Q.setItem(h.GenderKey,e.gender):(e.gender=null!=Q.getItem(h.GenderKey)?Q.getItem(h.GenderKey):"",e.gender),e.birthYear&&0!=e.birthYear?Q.setItem(h.BirthYearKey,e.birthYear.toString()):(e.birthYear=null!=Q.getItem(h.BirthYearKey)?Number(Q.getItem(h.BirthYearKey)):0,e.birthYear),e.currentCustomDimension01?Q.setItem(h.Dimension01Key,e.currentCustomDimension01):(e.currentCustomDimension01=null!=Q.getItem(h.Dimension01Key)?Q.getItem(h.Dimension01Key):"",e.currentCustomDimension01),e.currentCustomDimension02?Q.setItem(h.Dimension02Key,e.currentCustomDimension02):(e.currentCustomDimension02=null!=Q.getItem(h.Dimension02Key)?Q.getItem(h.Dimension02Key):"",e.currentCustomDimension02),e.currentCustomDimension03?Q.setItem(h.Dimension03Key,e.currentCustomDimension03):(e.currentCustomDimension03=null!=Q.getItem(h.Dimension03Key)?Q.getItem(h.Dimension03Key):"",e.currentCustomDimension03);var t=null!=Q.getItem(h.SdkConfigCachedKey)?Q.getItem(h.SdkConfigCachedKey):"";if(t){var i=JSON.parse(Z.decode64(t));i&&(e.sdkConfigCached=i)}var n=Q.select(ee.Progression);if(n)for(var r=0;r<n.length;++r){var o=n[r];o&&(e.progressionTries[o.progression]=o.tries)}},h.calculateServerTimeOffset=function(e){return e-Z.timeIntervalSince1970()},h.validateAndCleanCustomFields=function(e){var t={};if(e){var i=0;for(var n in e){var r=e[n];if(n&&r)if(i<h.MAX_CUSTOM_FIELDS_COUNT){var o=new RegExp("^[a-zA-Z0-9_]{1,"+h.MAX_CUSTOM_FIELDS_KEY_LENGTH+"}$");if(Z.stringMatch(n,o)){var a=typeof r;if("string"===a||r instanceof String){var s=r;s.length<=h.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH&&0<s.length?(t[n]=s,++i):J.w("validateAndCleanCustomFields: entry with key="+n+", value="+r+" has been omitted because its value is an empty string or exceeds the max number of characters ("+h.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH+")")}else if("number"===a||r instanceof Number){var p=r;t[n]=p,++i}else J.w("validateAndCleanCustomFields: entry with key="+n+", value="+r+" has been omitted because its value is not a string or number")}else J.w("validateAndCleanCustomFields: entry with key="+n+", value="+r+" has been omitted because its key contains illegal character, is empty or exceeds the max number of characters ("+h.MAX_CUSTOM_FIELDS_KEY_LENGTH+")")}else J.w("validateAndCleanCustomFields: entry with key="+n+", value="+r+" has been omitted because it exceeds the max number of custom fields ("+h.MAX_CUSTOM_FIELDS_COUNT+")");else J.w("validateAndCleanCustomFields: entry with key="+n+", value="+r+" has been omitted because its key or value is null")}}return t},h.validateAndFixCurrentDimensions=function(){K.validateDimension01(h.getCurrentCustomDimension01(),h.getAvailableCustomDimensions01())||h.setCustomDimension01(""),K.validateDimension02(h.getCurrentCustomDimension02(),h.getAvailableCustomDimensions02())||h.setCustomDimension02(""),K.validateDimension03(h.getCurrentCustomDimension03(),h.getAvailableCustomDimensions03())||h.setCustomDimension03("")},h.getConfigurationStringValue=function(e,t){return h.instance.configurations[e]?h.instance.configurations[e].toString():t},h.isCommandCenterReady=function(){return h.instance.commandCenterIsReady},h.addCommandCenterListener=function(e){h.instance.commandCenterListeners.indexOf(e)<0&&h.instance.commandCenterListeners.push(e)},h.removeCommandCenterListener=function(e){var t=h.instance.commandCenterListeners.indexOf(e);-1<t&&h.instance.commandCenterListeners.splice(t,1)},h.getConfigurationsContentAsString=function(){return JSON.stringify(h.instance.configurations)},h.populateConfigurations=function(e){var t=e.configurations;if(t)for(var i=0;i<t.length;++i){var n=t[i];if(n){var r=n.key,o=n.value,a=n.start?n.start:Number.MIN_VALUE,s=n.end?n.end:Number.MAX_VALUE,p=h.getClientTsAdjusted();r&&o&&a<p&&p<s&&(h.instance.configurations[r]=o)}}h.instance.commandCenterIsReady=!0;var l=h.instance.commandCenterListeners;for(i=0;i<l.length;++i)l[i]&&l[i].onCommandCenterUpdated()},h.CategorySdkError="sdk_error",h.MAX_CUSTOM_FIELDS_COUNT=50,h.MAX_CUSTOM_FIELDS_KEY_LENGTH=64,h.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH=256,h.instance=new h,h.DefaultUserIdKey="default_user_id",h.SessionNumKey="session_num",h.TransactionNumKey="transaction_num",h.FacebookIdKey="facebook_id",h.GenderKey="gender",h.BirthYearKey="birth_year",h.Dimension01Key="dimension01",h.Dimension02Key="dimension02",h.Dimension03Key="dimension03",h.SdkConfigCachedKey="sdk_config_cached",h}(),Y.GAState=ie,ne=Ie||(Ie={}),re=ne.tasks||(ne.tasks={}),oe=ne.utilities.GAUtilities,ae=ne.logging.GALogger,se=function(){function a(){}return a.execute=function(e,t,i,n){if(a.countMap[t]||(a.countMap[t]=0),!(a.countMap[t]>=a.MaxCount)){var r=oe.getHmac(n,i),o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState){if(!o.responseText)return;if(200!=o.status)return void ae.w("sdk error failed. response code not 200. status code: "+o.status+", description: "+o.statusText+", body: "+o.responseText);a.countMap[t]=a.countMap[t]+1}},o.open("POST",e,!0),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Authorization",r);try{o.send(i)}catch(e){}}},a.MaxCount=10,a.countMap={},a}(),re.SdkErrorTask=se,pe=Ie||(Ie={}),le=pe.http||(pe.http={}),he=pe.state.GAState,ue=pe.logging.GALogger,de=pe.utilities.GAUtilities,ce=pe.validators.GAValidator,_e=pe.tasks.SdkErrorTask,ye=function(){function h(){this.protocol="https",this.hostName="api.gameanalytics.com",this.version="v2",this.baseUrl=this.protocol+"://"+this.hostName+"/"+this.version,this.initializeUrlPath="init",this.eventsUrlPath="events",this.useGzip=!1}return h.prototype.requestInit=function(e){var t=he.getGameKey(),i=(this.baseUrl,this.initializeUrlPath);i="https://rubick.gameanalytics.com/v2/command_center?game_key="+t+"&interval_seconds=1000000";var n=he.getInitAnnotations(),r=JSON.stringify(n);if(r){var o=this.createPayloadData(r,this.useGzip),a=[];a.push(r),h.sendRequest(i,o,a,this.useGzip,h.initRequestCallback,e)}else e(le.EGAHTTPApiResponse.JsonEncodeFailed,null)},h.prototype.sendEventsInArray=function(e,t,i){if(0!=e.length){var n=he.getGameKey(),r=this.baseUrl+"/"+n+"/"+this.eventsUrlPath,o=JSON.stringify(e);if(o){var a=this.createPayloadData(o,this.useGzip),s=[];s.push(o),s.push(t),s.push(e.length.toString()),h.sendRequest(r,a,s,this.useGzip,h.sendEventInArrayRequestCallback,i)}else i(le.EGAHTTPApiResponse.JsonEncodeFailed,null,t,e.length)}},h.prototype.sendSdkErrorEvent=function(e){if(he.isEventSubmissionEnabled()){var t=he.getGameKey(),i=he.getGameSecret();if(ce.validateSdkErrorEvent(t,i,e)){var n,r=this.baseUrl+"/"+t+"/"+this.eventsUrlPath,o=he.getSdkErrorEventAnnotations(),a=h.sdkErrorTypeToString(e);o.type=a;var s=[];s.push(o),(n=JSON.stringify(s))?_e.execute(r,e,n,i):ue.w("sendSdkErrorEvent: JSON encoding failed.")}}},h.sendEventInArrayRequestCallback=function(e,t,i,n){void 0===n&&(n=null),n[0],n[1];var r,o,a=n[2],s=parseInt(n[3]);r=e.responseText,o=e.status;var p=h.instance.processRequestResponse(o,e.statusText,r,"Events");if(p==le.EGAHTTPApiResponse.Ok||p==le.EGAHTTPApiResponse.BadRequest){var l=r?JSON.parse(r):{};null!=l?(le.EGAHTTPApiResponse.BadRequest,i(p,l,a,s)):i(le.EGAHTTPApiResponse.JsonDecodeFailed,null,a,s)}else i(p,null,a,s)},h.sendRequest=function(e,t,i,n,r,o){var a=new XMLHttpRequest,s=he.getGameSecret(),p=de.getHmac(s,t),l=[];for(var h in l.push(p),i)l.push(i[h]);if(a.onreadystatechange=function(){4===a.readyState&&r(a,e,o,l)},a.open("POST",e,!0),a.setRequestHeader("Content-Type","text/plain"),a.setRequestHeader("Authorization",p),n)throw new Error("gzip not supported");try{a.send(t)}catch(e){}},h.initRequestCallback=function(e,t,i,n){var r,o;void 0===n&&(n=null),n[0],n[1],r=e.responseText,o=e.status;var a=r?JSON.parse(r):{},s=h.instance.processRequestResponse(o,e.statusText,r,"Init");if(s==le.EGAHTTPApiResponse.Ok||s==le.EGAHTTPApiResponse.BadRequest)if(null!=a)if(s!==le.EGAHTTPApiResponse.BadRequest){var p=ce.validateAndCleanInitRequestResponse(a);p?i(le.EGAHTTPApiResponse.Ok,p,"",0):i(le.EGAHTTPApiResponse.BadResponse,null,"",0)}else i(s,null,"",0);else i(le.EGAHTTPApiResponse.JsonDecodeFailed,null,"",0);else i(s,null,"",0)},h.prototype.createPayloadData=function(e,t){if(t)throw new Error("gzip not supported");return e},h.prototype.processRequestResponse=function(e,t,i,n){return i?200===e?le.EGAHTTPApiResponse.Ok:0===e||401===e?le.EGAHTTPApiResponse.Unauthorized:400===e?le.EGAHTTPApiResponse.BadRequest:500===e?le.EGAHTTPApiResponse.InternalServerError:le.EGAHTTPApiResponse.UnknownResponseCode:le.EGAHTTPApiResponse.NoResponse},h.sdkErrorTypeToString=function(e){switch(e){case le.EGASdkErrorType.Rejected:return"rejected";default:return""}},h.instance=new h,h}(),le.GAHTTPApi=ye,xe=Ie||(Ie={}),me=xe.events||(xe.events={}),ge=xe.store.GAStore,fe=xe.store.EGAStore,ve=xe.store.EGAStoreArgsOperator,ze=xe.state.GAState,we=xe.logging.GALogger,be=xe.utilities.GAUtilities,Se=xe.http.EGAHTTPApiResponse,Ce=xe.http.GAHTTPApi,Me=xe.validators.GAValidator,Pe=xe.http.EGASdkErrorType,ke=function(){function d(){}return d.addSessionStartEvent=function(){if(ze.isEventSubmissionEnabled()){var e={};e.category=d.CategorySessionStart,ze.incrementSessionNum(),ge.setItem(ze.SessionNumKey,ze.getSessionNum().toString()),d.addDimensionsToEvent(e),d.addEventToStore(e),we.i("Add SESSION START event"),d.processEvents(d.CategorySessionStart,!1)}},d.addSessionEndEvent=function(){if(ze.isEventSubmissionEnabled()){var e=ze.getSessionStart(),t=ze.getClientTsAdjusted()-e;t<0&&(we.w("Session length was calculated to be less then 0. Should not be possible. Resetting to 0."),t=0);var i={};i.category=d.CategorySessionEnd,i.length=t,d.addDimensionsToEvent(i),d.addEventToStore(i),we.i("Add SESSION END event."),d.processEvents("",!1)}},d.addBusinessEvent=function(e,t,i,n,r,o){if(void 0===r&&(r=null),ze.isEventSubmissionEnabled())if(Me.validateBusinessEvent(e,t,r,i,n)){var a={};ze.incrementTransactionNum(),ge.setItem(ze.TransactionNumKey,ze.getTransactionNum().toString()),a.event_id=i+":"+n,a.category=d.CategoryBusiness,a.currency=e,a.amount=t,a[ze.TransactionNumKey]=ze.getTransactionNum(),r&&(a.cart_type=r),d.addDimensionsToEvent(a),d.addFieldsToEvent(a,ze.validateAndCleanCustomFields(o)),we.i("Add BUSINESS event: {currency:"+e+", amount:"+t+", itemType:"+i+", itemId:"+n+", cartType:"+r+"}"),d.addEventToStore(a)}else Ce.instance.sendSdkErrorEvent(Pe.Rejected)},d.addResourceEvent=function(e,t,i,n,r,o){if(ze.isEventSubmissionEnabled())if(Me.validateResourceEvent(e,t,i,n,r,ze.getAvailableResourceCurrencies(),ze.getAvailableResourceItemTypes())){e===xe.EGAResourceFlowType.Sink&&(i*=-1);var a={},s=d.resourceFlowTypeToString(e);a.event_id=s+":"+t+":"+n+":"+r,a.category=d.CategoryResource,a.amount=i,d.addDimensionsToEvent(a),d.addFieldsToEvent(a,ze.validateAndCleanCustomFields(o)),we.i("Add RESOURCE event: {currency:"+t+", amount:"+i+", itemType:"+n+", itemId:"+r+"}"),d.addEventToStore(a)}else Ce.instance.sendSdkErrorEvent(Pe.Rejected)},d.addProgressionEvent=function(e,t,i,n,r,o,a){if(ze.isEventSubmissionEnabled()){var s=d.progressionStatusToString(e);if(Me.validateProgressionEvent(e,t,i,n)){var p,l={};p=i?n?t+":"+i+":"+n:t+":"+i:t,l.category=d.CategoryProgression,l.event_id=s+":"+p;var h=0;o&&e!=xe.EGAProgressionStatus.Start&&(l.score=r),e===xe.EGAProgressionStatus.Fail&&ze.incrementProgressionTries(p),e===xe.EGAProgressionStatus.Complete&&(ze.incrementProgressionTries(p),h=ze.getProgressionTries(p),l.attempt_num=h,ze.clearProgressionTries(p)),d.addDimensionsToEvent(l),d.addFieldsToEvent(l,ze.validateAndCleanCustomFields(a)),we.i("Add PROGRESSION event: {status:"+s+", progression01:"+t+", progression02:"+i+", progression03:"+n+", score:"+r+", attempt:"+h+"}"),d.addEventToStore(l)}else Ce.instance.sendSdkErrorEvent(Pe.Rejected)}},d.addDesignEvent=function(e,t,i,n){if(ze.isEventSubmissionEnabled())if(Me.validateDesignEvent(e,t)){var r={};r.category=d.CategoryDesign,r.event_id=e,i&&(r.value=t),d.addDimensionsToEvent(r),d.addFieldsToEvent(r,ze.validateAndCleanCustomFields(n)),we.i("Add DESIGN event: {eventId:"+e+", value:"+t+"}"),d.addEventToStore(r)}else Ce.instance.sendSdkErrorEvent(Pe.Rejected)},d.addErrorEvent=function(e,t,i){if(ze.isEventSubmissionEnabled()){var n=d.errorSeverityToString(e);if(Me.validateErrorEvent(e,t)){var r={};r.category=d.CategoryError,r.severity=n,r.message=t,d.addDimensionsToEvent(r),d.addFieldsToEvent(r,ze.validateAndCleanCustomFields(i)),we.i("Add ERROR event: {severity:"+n+", message:"+t+"}"),d.addEventToStore(r)}else Ce.instance.sendSdkErrorEvent(Pe.Rejected)}},d.processEvents=function(e,t){if(ze.isEventSubmissionEnabled())try{var i=be.createGuid();t&&(d.cleanupEvents(),d.fixMissingSessionEndEvents());var n=[];n.push(["status",ve.Equal,"new"]);var r=[];r.push(["status",ve.Equal,"new"]),e&&(n.push(["category",ve.Equal,e]),r.push(["category",ve.Equal,e]));var o=[];o.push(["status",i]);var a=ge.select(fe.Events,n);if(!a||0==a.length)return we.i("Event queue: No events to send"),void d.updateSessionStore();if(a.length>d.MaxEventCount){if(!(a=ge.select(fe.Events,n,!0,d.MaxEventCount)))return;var s=a[a.length-1].client_ts;if(n.push(["client_ts",ve.LessOrEqual,s]),!(a=ge.select(fe.Events,n)))return;r.push(["client_ts",ve.LessOrEqual,s])}if(we.i("Event queue: Sending "+a.length+" events."),!ge.update(fe.Events,o,r))return;for(var p=[],l=0;l<a.length;++l){var h=a[l],u=JSON.parse(be.decode64(h.event));0!=u.length&&p.push(u)}Ce.instance.sendEventsInArray(p,i,d.processEventsCallback)}catch(e){we.e("Error during ProcessEvents(): "+e.stack)}},d.processEventsCallback=function(e,t,i,n){var r=[];if(r.push(["status",ve.Equal,i]),e===Se.Ok)ge.delete(fe.Events,r),we.i("Event queue: "+n+" events sent.");else if(e===Se.NoResponse){var o=[];o.push(["status","new"]),we.w("Event queue: Failed to send events to collector - Retrying next time"),ge.update(fe.Events,o,r)}else{if(t){var a,s=0;for(var p in t)0==s&&(a=t[p]),++s;e===Se.BadRequest&&a.constructor===Array?we.w("Event queue: "+n+" events sent. "+s+" events failed GA server validation."):we.w("Event queue: Failed to send events.")}else we.w("Event queue: Failed to send events.");ge.delete(fe.Events,r)}},d.cleanupEvents=function(){ge.update(fe.Events,[["status","new"]])},d.fixMissingSessionEndEvents=function(){if(ze.isEventSubmissionEnabled()){var e=[];e.push(["session_id",ve.NotEqual,ze.getSessionId()]);var t=ge.select(fe.Sessions,e);if(t&&0!=t.length){we.i(t.length+" session(s) located with missing session_end event.");for(var i=0;i<t.length;++i){var n=JSON.parse(be.decode64(t[i].event)),r=n.client_ts-t[i].timestamp;r=Math.max(0,r),n.category=d.CategorySessionEnd,n.length=r,d.addEventToStore(n)}}}},d.addEventToStore=function(e){if(ze.isEventSubmissionEnabled())if(ze.isInitialized())try{if(ge.isStoreTooLargeForEvents()&&!be.stringMatch(e.category,/^(user|session_end|business)$/))return void we.w("Database too large. Event has been blocked.");var t=ze.getEventAnnotations(),i=be.encode64(JSON.stringify(t));for(var n in e)t[n]=e[n];var r=JSON.stringify(t);we.ii("Event added to queue: "+r);var o={status:"new"};o.category=t.category,o.session_id=t.session_id,o.client_ts=t.client_ts,o.event=be.encode64(JSON.stringify(t)),ge.insert(fe.Events,o),e.category==d.CategorySessionEnd?ge.delete(fe.Sessions,[["session_id",ve.Equal,t.session_id]]):((o={}).session_id=t.session_id,o.timestamp=ze.getSessionStart(),o.event=i,ge.insert(fe.Sessions,o,!0,"session_id")),ge.isStorageAvailable()&&ge.save()}catch(n){we.e("addEventToStore: error"),we.e(n.stack)}else we.w("Could not add event: SDK is not initialized")},d.updateSessionStore=function(){if(ze.sessionIsStarted()){var e={};e.session_id=ze.instance.sessionId,e.timestamp=ze.getSessionStart(),e.event=be.encode64(JSON.stringify(ze.getEventAnnotations())),ge.insert(fe.Sessions,e,!0,"session_id"),ge.isStorageAvailable()&&ge.save()}},d.addDimensionsToEvent=function(e){e&&(ze.getCurrentCustomDimension01()&&(e.custom_01=ze.getCurrentCustomDimension01()),ze.getCurrentCustomDimension02()&&(e.custom_02=ze.getCurrentCustomDimension02()),ze.getCurrentCustomDimension03()&&(e.custom_03=ze.getCurrentCustomDimension03()))},d.addFieldsToEvent=function(e,t){e&&t&&0<Object.keys(t).length&&(e.custom_fields=t)},d.resourceFlowTypeToString=function(e){return e==xe.EGAResourceFlowType.Source||e==xe.EGAResourceFlowType[xe.EGAResourceFlowType.Source]?"Source":e==xe.EGAResourceFlowType.Sink||e==xe.EGAResourceFlowType[xe.EGAResourceFlowType.Sink]?"Sink":""},d.progressionStatusToString=function(e){return e==xe.EGAProgressionStatus.Start||e==xe.EGAProgressionStatus[xe.EGAProgressionStatus.Start]?"Start":e==xe.EGAProgressionStatus.Complete||e==xe.EGAProgressionStatus[xe.EGAProgressionStatus.Complete]?"Complete":e==xe.EGAProgressionStatus.Fail||e==xe.EGAProgressionStatus[xe.EGAProgressionStatus.Fail]?"Fail":""},d.errorSeverityToString=function(e){return e==xe.EGAErrorSeverity.Debug||e==xe.EGAErrorSeverity[xe.EGAErrorSeverity.Debug]?"debug":e==xe.EGAErrorSeverity.Info||e==xe.EGAErrorSeverity[xe.EGAErrorSeverity.Info]?"info":e==xe.EGAErrorSeverity.Warning||e==xe.EGAErrorSeverity[xe.EGAErrorSeverity.Warning]?"warning":e==xe.EGAErrorSeverity.Error||e==xe.EGAErrorSeverity[xe.EGAErrorSeverity.Error]?"error":e==xe.EGAErrorSeverity.Critical||e==xe.EGAErrorSeverity[xe.EGAErrorSeverity.Critical]?"critical":""},d.instance=new d,d.CategorySessionStart="user",d.CategorySessionEnd="session_end",d.CategoryDesign="design",d.CategoryBusiness="business",d.CategoryProgression="progression",d.CategoryResource="resource",d.CategoryError="error",d.MaxEventCount=500,d}(),me.GAEvents=ke,Te=Ie||(Ie={}),Ae=Te.threading||(Te.threading={}),Oe=Te.logging.GALogger,Ee=Te.state.GAState,Ge=Te.events.GAEvents,De=function(){function r(){this.blocks=new Ae.PriorityQueue({compare:function(e,t){return e-t}}),this.id2TimedBlockMap={},r.startThread()}return r.createTimedBlock=function(e){void 0===e&&(e=0);var t=new Date;return t.setSeconds(t.getSeconds()+e),new Ae.TimedBlock(t)},r.performTaskOnGAThread=function(e,t){void 0===t&&(t=0);var i=new Date;i.setSeconds(i.getSeconds()+t);var n=new Ae.TimedBlock(i);n.block=e,r.instance.id2TimedBlockMap[n.id]=n,r.instance.addTimedBlock(n)},r.performTimedBlockOnGAThread=function(e){r.instance.id2TimedBlockMap[e.id]=e,r.instance.addTimedBlock(e)},r.scheduleTimer=function(e,t){var i=new Date;i.setSeconds(i.getSeconds()+e);var n=new Ae.TimedBlock(i);return n.block=t,r.instance.id2TimedBlockMap[n.id]=n,r.instance.addTimedBlock(n),n.id},r.getTimedBlockById=function(e){return e in r.instance.id2TimedBlockMap?r.instance.id2TimedBlockMap[e]:null},r.ensureEventQueueIsRunning=function(){r.instance.keepRunning=!0,r.instance.isRunning||(r.instance.isRunning=!0,r.scheduleTimer(r.ProcessEventsIntervalInSeconds,r.processEventQueue))},r.endSessionAndStopQueue=function(){Ee.isInitialized()&&(Oe.i("Ending session."),r.stopEventQueue(),Ee.isEnabled()&&Ee.sessionIsStarted()&&(Ge.addSessionEndEvent(),Ee.instance.sessionStart=0))},r.stopEventQueue=function(){r.instance.keepRunning=!1},r.ignoreTimer=function(e){e in r.instance.id2TimedBlockMap&&(r.instance.id2TimedBlockMap[e].ignore=!0)},r.setEventProcessInterval=function(e){0<e&&(r.ProcessEventsIntervalInSeconds=e)},r.prototype.addTimedBlock=function(e){this.blocks.enqueue(e.deadline.getTime(),e)},r.run=function(){clearTimeout(r.runTimeoutId);try{for(var e;e=r.getNextBlock();)if(!e.ignore)if(e.async){if(!e.running){e.running=!0,e.block();break}}else e.block();return void(r.runTimeoutId=setTimeout(r.run,r.ThreadWaitTimeInMs))}catch(e){Oe.e("Error on GA thread"),Oe.e(e.stack)}},r.startThread=function(){r.runTimeoutId=setTimeout(r.run,0)},r.getNextBlock=function(){var e=new Date;return r.instance.blocks.hasItems()&&r.instance.blocks.peek().deadline.getTime()<=e.getTime()?r.instance.blocks.peek().async&&r.instance.blocks.peek().running?r.instance.blocks.peek():r.instance.blocks.dequeue():null},r.processEventQueue=function(){Ge.processEvents("",!0),r.instance.keepRunning?r.scheduleTimer(r.ProcessEventsIntervalInSeconds,r.processEventQueue):r.instance.isRunning=!1},r.instance=new r,r.ThreadWaitTimeInMs=1e3,r.ProcessEventsIntervalInSeconds=8,r}(),Ae.GAThreading=De,Le=Ie||(Ie={}),Be=Le.threading.GAThreading,Re=Le.logging.GALogger,Fe=Le.store.GAStore,je=Le.state.GAState,Ne=Le.http.GAHTTPApi,Ue=Le.device.GADevice,Ve=Le.validators.GAValidator,He=Le.http.EGAHTTPApiResponse,We=Le.utilities.GAUtilities,qe=Le.events.GAEvents,Xe=function(){function a(){}return a.init=function(){if(Ue.touch(),a.methodMap.configureAvailableCustomDimensions01=a.configureAvailableCustomDimensions01,a.methodMap.configureAvailableCustomDimensions02=a.configureAvailableCustomDimensions02,a.methodMap.configureAvailableCustomDimensions03=a.configureAvailableCustomDimensions03,a.methodMap.configureAvailableResourceCurrencies=a.configureAvailableResourceCurrencies,a.methodMap.configureAvailableResourceItemTypes=a.configureAvailableResourceItemTypes,a.methodMap.configureBuild=a.configureBuild,a.methodMap.configureSdkGameEngineVersion=a.configureSdkGameEngineVersion,a.methodMap.configureGameEngineVersion=a.configureGameEngineVersion,a.methodMap.configureUserId=a.configureUserId,a.methodMap.initialize=a.initialize,a.methodMap.addBusinessEvent=a.addBusinessEvent,a.methodMap.addResourceEvent=a.addResourceEvent,a.methodMap.addProgressionEvent=a.addProgressionEvent,a.methodMap.addDesignEvent=a.addDesignEvent,a.methodMap.addErrorEvent=a.addErrorEvent,a.methodMap.addErrorEvent=a.addErrorEvent,a.methodMap.setEnabledInfoLog=a.setEnabledInfoLog,a.methodMap.setEnabledVerboseLog=a.setEnabledVerboseLog,a.methodMap.setEnabledManualSessionHandling=a.setEnabledManualSessionHandling,a.methodMap.setEnabledEventSubmission=a.setEnabledEventSubmission,a.methodMap.setCustomDimension01=a.setCustomDimension01,a.methodMap.setCustomDimension02=a.setCustomDimension02,a.methodMap.setCustomDimension03=a.setCustomDimension03,a.methodMap.setFacebookId=a.setFacebookId,a.methodMap.setGender=a.setGender,a.methodMap.setBirthYear=a.setBirthYear,a.methodMap.setEventProcessInterval=a.setEventProcessInterval,a.methodMap.startSession=a.startSession,a.methodMap.endSession=a.endSession,a.methodMap.onStop=a.onStop,a.methodMap.onResume=a.onResume,a.methodMap.addCommandCenterListener=a.addCommandCenterListener,a.methodMap.removeCommandCenterListener=a.removeCommandCenterListener,a.methodMap.getCommandCenterValueAsString=a.getCommandCenterValueAsString,a.methodMap.isCommandCenterReady=a.isCommandCenterReady,a.methodMap.getConfigurationsContentAsString=a.getConfigurationsContentAsString,"undefined"!=typeof window&&void 0!==window.GameAnalytics&&void 0!==window.GameAnalytics.q){var e=window.GameAnalytics.q;for(var t in e)a.gaCommand.apply(null,e[t])}},a.gaCommand=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0<e.length&&e[0]in Le.GameAnalytics.methodMap&&(1<e.length?Le.GameAnalytics.methodMap[e[0]].apply(null,Array.prototype.slice.call(e,1)):Le.GameAnalytics.methodMap[e[0]]())},a.configureAvailableCustomDimensions01=function(e){void 0===e&&(e=[]),Be.performTaskOnGAThread(function(){a.isSdkReady(!0,!1)?Re.w("Available custom dimensions must be set before SDK is initialized"):je.setAvailableCustomDimensions01(e)})},a.configureAvailableCustomDimensions02=function(e){void 0===e&&(e=[]),Be.performTaskOnGAThread(function(){a.isSdkReady(!0,!1)?Re.w("Available custom dimensions must be set before SDK is initialized"):je.setAvailableCustomDimensions02(e)})},a.configureAvailableCustomDimensions03=function(e){void 0===e&&(e=[]),Be.performTaskOnGAThread(function(){a.isSdkReady(!0,!1)?Re.w("Available custom dimensions must be set before SDK is initialized"):je.setAvailableCustomDimensions03(e)})},a.configureAvailableResourceCurrencies=function(e){void 0===e&&(e=[]),Be.performTaskOnGAThread(function(){a.isSdkReady(!0,!1)?Re.w("Available resource currencies must be set before SDK is initialized"):je.setAvailableResourceCurrencies(e)})},a.configureAvailableResourceItemTypes=function(e){void 0===e&&(e=[]),Be.performTaskOnGAThread(function(){a.isSdkReady(!0,!1)?Re.w("Available resource item types must be set before SDK is initialized"):je.setAvailableResourceItemTypes(e)})},a.configureBuild=function(e){void 0===e&&(e=""),Be.performTaskOnGAThread(function(){a.isSdkReady(!0,!1)?Re.w("Build version must be set before SDK is initialized."):Ve.validateBuild(e)?je.setBuild(e):Re.i("Validation fail - configure build: Cannot be null, empty or above 32 length. String: "+e)})},a.configureSdkGameEngineVersion=function(e){void 0===e&&(e=""),Be.performTaskOnGAThread(function(){a.isSdkReady(!0,!1)||(Ve.validateSdkWrapperVersion(e)?Ue.sdkGameEngineVersion=e:Re.i("Validation fail - configure sdk version: Sdk version not supported. String: "+e))})},a.configureGameEngineVersion=function(e){void 0===e&&(e=""),Be.performTaskOnGAThread(function(){a.isSdkReady(!0,!1)||(Ve.validateEngineVersion(e)?Ue.gameEngineVersion=e:Re.i("Validation fail - configure game engine version: Game engine version not supported. String: "+e))})},a.configureUserId=function(e){void 0===e&&(e=""),Be.performTaskOnGAThread(function(){a.isSdkReady(!0,!1)?Re.w("A custom user id must be set before SDK is initialized."):Ve.validateUserId(e)?je.setUserId(e):Re.i("Validation fail - configure user_id: Cannot be null, empty or above 64 length. Will use default user_id method. Used string: "+e)})},a.initialize=function(e,t){void 0===e&&(e=""),void 0===t&&(t=""),Ue.updateConnectionType();var i=Be.createTimedBlock();i.async=!0,a.initTimedBlockId=i.id,i.block=function(){a.isSdkReady(!0,!1)?Re.w("SDK already initialized. Can only be called once."):Ve.validateKeys(e,t)?(je.setKeys(e,t),a.internalInitialize()):Re.w("SDK failed initialize. Game key or secret key is invalid. Can only contain characters A-z 0-9, gameKey is 32 length, gameSecret is 40 length. Failed keys - gameKey: "+e+", secretKey: "+t)},Be.performTimedBlockOnGAThread(i)},a.addBusinessEvent=function(e,t,i,n,r){void 0===e&&(e=""),void 0===t&&(t=0),void 0===i&&(i=""),void 0===n&&(n=""),void 0===r&&(r=""),Ue.updateConnectionType(),Be.performTaskOnGAThread(function(){a.isSdkReady(!0,!0,"Could not add business event")&&qe.addBusinessEvent(e,t,i,n,r,{})})},a.addResourceEvent=function(e,t,i,n,r){void 0===e&&(e=Le.EGAResourceFlowType.Undefined),void 0===t&&(t=""),void 0===i&&(i=0),void 0===n&&(n=""),void 0===r&&(r=""),Ue.updateConnectionType(),Be.performTaskOnGAThread(function(){a.isSdkReady(!0,!0,"Could not add resource event")&&qe.addResourceEvent(e,t,i,n,r,{})})},a.addProgressionEvent=function(t,i,n,r,o){void 0===t&&(t=Le.EGAProgressionStatus.Undefined),void 0===i&&(i=""),void 0===n&&(n=""),void 0===r&&(r=""),Ue.updateConnectionType(),Be.performTaskOnGAThread(function(){if(a.isSdkReady(!0,!0,"Could not add progression event")){var e="number"==typeof o;qe.addProgressionEvent(t,i,n,r,e?o:0,e,{})}})},a.addDesignEvent=function(t,i){Ue.updateConnectionType(),Be.performTaskOnGAThread(function(){if(a.isSdkReady(!0,!0,"Could not add design event")){var e="number"==typeof i;qe.addDesignEvent(t,e?i:0,e,{})}})},a.addErrorEvent=function(e,t){void 0===e&&(e=Le.EGAErrorSeverity.Undefined),void 0===t&&(t=""),Ue.updateConnectionType(),Be.performTaskOnGAThread(function(){a.isSdkReady(!0,!0,"Could not add error event")&&qe.addErrorEvent(e,t,{})})},a.setEnabledInfoLog=function(e){void 0===e&&(e=!1),Be.performTaskOnGAThread(function(){e?(Re.setInfoLog(e),Re.i("Info logging enabled")):(Re.i("Info logging disabled"),Re.setInfoLog(e))})},a.setEnabledVerboseLog=function(e){void 0===e&&(e=!1),Be.performTaskOnGAThread(function(){e?(Re.setVerboseLog(e),Re.i("Verbose logging enabled")):(Re.i("Verbose logging disabled"),Re.setVerboseLog(e))})},a.setEnabledManualSessionHandling=function(e){void 0===e&&(e=!1),Be.performTaskOnGAThread(function(){je.setManualSessionHandling(e)})},a.setEnabledEventSubmission=function(e){void 0===e&&(e=!1),Be.performTaskOnGAThread(function(){e?(je.setEnabledEventSubmission(e),Re.i("Event submission enabled")):(Re.i("Event submission disabled"),je.setEnabledEventSubmission(e))})},a.setCustomDimension01=function(e){void 0===e&&(e=""),Be.performTaskOnGAThread(function(){Ve.validateDimension01(e,je.getAvailableCustomDimensions01())?je.setCustomDimension01(e):Re.w("Could not set custom01 dimension value to '"+e+"'. Value not found in available custom01 dimension values")})},a.setCustomDimension02=function(e){void 0===e&&(e=""),Be.performTaskOnGAThread(function(){Ve.validateDimension02(e,je.getAvailableCustomDimensions02())?je.setCustomDimension02(e):Re.w("Could not set custom02 dimension value to '"+e+"'. Value not found in available custom02 dimension values")})},a.setCustomDimension03=function(e){void 0===e&&(e=""),Be.performTaskOnGAThread(function(){Ve.validateDimension03(e,je.getAvailableCustomDimensions03())?je.setCustomDimension03(e):Re.w("Could not set custom03 dimension value to '"+e+"'. Value not found in available custom03 dimension values")})},a.setFacebookId=function(e){void 0===e&&(e=""),Be.performTaskOnGAThread(function(){Ve.validateFacebookId(e)&&je.setFacebookId(e)})},a.setGender=function(e){void 0===e&&(e=Le.EGAGender.Undefined),Be.performTaskOnGAThread(function(){Ve.validateGender(e)&&je.setGender(e)})},a.setBirthYear=function(e){void 0===e&&(e=0),Be.performTaskOnGAThread(function(){Ve.validateBirthyear(e)&&je.setBirthYear(e)})},a.setEventProcessInterval=function(e){Be.performTaskOnGAThread(function(){Be.setEventProcessInterval(e)})},a.startSession=function(){if(je.isInitialized()){var e=Be.createTimedBlock();e.async=!0,a.initTimedBlockId=e.id,e.block=function(){je.isEnabled()&&je.sessionIsStarted()&&Be.endSessionAndStopQueue(),a.resumeSessionAndStartQueue()},Be.performTimedBlockOnGAThread(e)}},a.endSession=function(){a.onStop()},a.onStop=function(){Be.performTaskOnGAThread(function(){try{Be.endSessionAndStopQueue()}catch(e){}})},a.onResume=function(){var e=Be.createTimedBlock();e.async=!0,a.initTimedBlockId=e.id,e.block=function(){a.resumeSessionAndStartQueue()},Be.performTimedBlockOnGAThread(e)},a.getCommandCenterValueAsString=function(e,t){return void 0===t&&(t=null),je.getConfigurationStringValue(e,t)},a.isCommandCenterReady=function(){return je.isCommandCenterReady()},a.addCommandCenterListener=function(e){je.addCommandCenterListener(e)},a.removeCommandCenterListener=function(e){je.removeCommandCenterListener(e)},a.getConfigurationsContentAsString=function(){return je.getConfigurationsContentAsString()},a.internalInitialize=function(){je.ensurePersistedStates(),Fe.setItem(je.DefaultUserIdKey,je.getDefaultId()),je.setInitialized(!0),a.newSession(),je.isEnabled()&&Be.ensureEventQueueIsRunning()},a.newSession=function(){Re.i("Starting a new session."),je.validateAndFixCurrentDimensions(),Ne.instance.requestInit(a.startNewSessionCallback)},a.startNewSessionCallback=function(e,t){if(e===He.Ok&&t){var i=0;if(t.server_ts){var n=t.server_ts;i=je.calculateServerTimeOffset(n)}t.time_offset=i,Fe.setItem(je.SdkConfigCachedKey,We.encode64(JSON.stringify(t))),je.instance.sdkConfigCached=t,je.instance.sdkConfig=t,je.instance.initAuthorized=!0}else e==He.Unauthorized?(Re.w("Initialize SDK failed - Unauthorized"),je.instance.initAuthorized=!1):(e===He.NoResponse||e===He.RequestTimeout?Re.i("Init call (session start) failed - no response. Could be offline or timeout."):e===He.BadResponse||e===He.JsonEncodeFailed||e===He.JsonDecodeFailed?Re.i("Init call (session start) failed - bad response. Could be bad response from proxy or GA servers."):e!==He.BadRequest&&e!==He.UnknownResponseCode||Re.i("Init call (session start) failed - bad request or unknown response."),null==je.instance.sdkConfig?null!=je.instance.sdkConfigCached?(Re.i("Init call (session start) failed - using cached init values."),je.instance.sdkConfig=je.instance.sdkConfigCached):(Re.i("Init call (session start) failed - using default init values."),je.instance.sdkConfig=je.instance.sdkConfigDefault):Re.i("Init call (session start) failed - using cached init values."),je.instance.initAuthorized=!0);if(je.instance.clientServerTimeOffset=je.getSdkConfig().time_offset?je.getSdkConfig().time_offset:0,je.populateConfigurations(je.getSdkConfig()),!je.isEnabled())return Re.w("Could not start session: SDK is disabled."),void Be.stopEventQueue();Be.ensureEventQueueIsRunning();var r=We.createGuid();je.instance.sessionId=r,je.instance.sessionStart=je.getClientTsAdjusted(),qe.addSessionStartEvent();var o=Be.getTimedBlockById(a.initTimedBlockId);null!=o&&(o.running=!1),a.initTimedBlockId=-1},a.resumeSessionAndStartQueue=function(){je.isInitialized()&&(Re.i("Resuming session."),je.sessionIsStarted()||a.newSession())},a.isSdkReady=function(e,t,i){return void 0===t&&(t=!0),void 0===i&&(i=""),i&&(i+=": "),e&&!je.isInitialized()?(t&&Re.w(i+"SDK is not initialized"),!1):e&&!je.isEnabled()?(t&&Re.w(i+"SDK is disabled"),!1):!(e&&!je.sessionIsStarted())||(t&&Re.w(i+"Session has not started yet"),!1)},a.initTimedBlockId=-1,a.methodMap={},a}(),Le.GameAnalytics=Xe,Ie.GameAnalytics.init();Ie.GameAnalytics.gaCommand;var Ye=Ie,Ke=function(){function e(){}return e.prototype.setup=function(e,t,i){b.analyticsEnabled&&(Ye.GameAnalytics.initialize(e,t),Ye.GameAnalytics.configureBuild(i),Ye.GameAnalytics.startSession(),window.addEventListener("beforeunload",function(){Ye.GameAnalytics.endSession()}))},e.prototype.addProgressionEvent=function(e,t,i,n,r){b.analyticsEnabled&&Ye.GameAnalytics.addProgressionEvent(e,t,i,n,r)},e.prototype.addDesignEvent=function(e,t){b.analyticsEnabled&&Ye.GameAnalytics.addDesignEvent(e,t)},e}();function Ze(o,a,s,p){return new(s||(s=Promise))(function(e,t){function i(e){try{r(p.next(e))}catch(e){t(e)}}function n(e){try{r(p.throw(e))}catch(e){t(e)}}function r(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(i,n)}r((p=p.apply(o,a||[])).next())})}function Je(i,n){var r,o,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&t[0]?o.return:t[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,t[1])).done)return a;switch(o=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=n.call(i,s)}catch(e){t=[6,e],o=0}finally{r=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var Qe=e(function(e,t){e.exports=function o(a,s,p){function l(i,e){if(!s[i]){if(!a[i]){var t=u;if(!e&&t)return t(i,!0);if(h)return h(i,!0);var n=new Error("Cannot find module '"+i+"'");throw n.code="MODULE_NOT_FOUND",n}var r=s[i]={exports:{}};a[i][0].call(r.exports,function(e){var t=a[i][1][e];return l(t||e)},r,r.exports,o,a,s,p)}return s[i].exports}for(var h=u,e=0;e<p.length;e++)l(p[e]);return l}({1:[function(e,n,v){(function(){var x,t=this||Function("return this")(),m=function(){var u,i,d,c,_,y,e=Date.now?Date.now:function(){return+new Date},x="undefined"!=typeof SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:e;function r(){}function o(e,t){var i;for(i in e)Object.hasOwnProperty.call(e,i)&&t(i)}function a(t,i){return o(i,function(e){t[e]=i[e]}),t}function s(t,i){o(i,function(e){void 0===t[e]&&(t[e]=i[e])})}function m(e,t,i,n,r,o,a){var s,p,l,h=e<o?0:(e-o)/r;for(s in t)t.hasOwnProperty(s)&&(p=a[s],l="function"==typeof p?p:u[p],t[s]=g(i[s],n[s],l,h));return t}function g(e,t,i,n){return e+(t-e)*i(n)}function f(t,i){var n=h.prototype.filter,r=t._filterArgs;o(n,function(e){void 0!==n[e][i]&&n[e][i].apply(t,r)})}function p(e,t,i,n,r,o,a,s,p,l,h){d=t+i+n,c=Math.min(h||x(),d),_=d<=c,y=n-(d-c),e.isPlaying()&&(_?(p(a,e._attachment,y),e.stop(!0)):(e._scheduleId=l(e._timeoutHandler,1e3/60),f(e,"beforeTween"),c<t+i?m(1,r,o,a,1,1,s):m(c,r,o,a,n,t+i,s),f(e,"afterTween"),p(r,e._attachment,y)))}function l(e,t){var i={},n=typeof t;return o(e,"string"===n||"function"===n?function(e){i[e]=t}:function(e){i[e]||(i[e]=t[e]||"linear")}),i}function h(e,t){this._currentState=e||{},this._configured=!1,this._scheduleFunction=i,void 0!==t&&this.setConfig(t)}return i="undefined"!=typeof window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame)||setTimeout,h.prototype.tween=function(e){return this._isTweening?this:(void 0===e&&this._configured||this.setConfig(e),this._timestamp=x(),this._start(this.get(),this._attachment),this.resume())},h.prototype.setConfig=function(e){e=e||{},this._configured=!0,this._attachment=e.attachment,this._pausedAtTime=null,this._scheduleId=null,this._delay=e.delay||0,this._start=e.start||r,this._step=e.step||r,this._finish=e.finish||r,this._duration=e.duration||500,this._currentState=a({},e.from||this.get()),this._originalState=this.get(),this._targetState=a({},e.to||this.get());var t=this;this._timeoutHandler=function(){p(t,t._timestamp,t._delay,t._duration,t._currentState,t._originalState,t._targetState,t._easing,t._step,t._scheduleFunction)};var i=this._currentState,n=this._targetState;return s(n,i),this._easing=l(i,e.easing||"linear"),this._filterArgs=[i,this._originalState,n,this._easing],f(this,"tweenCreated"),this},h.prototype.get=function(){return a({},this._currentState)},h.prototype.set=function(e){this._currentState=e},h.prototype.pause=function(){return this._pausedAtTime=x(),this._isPaused=!0,this},h.prototype.resume=function(){return this._isPaused&&(this._timestamp+=x()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0,this._timeoutHandler(),this},h.prototype.seek=function(e){e=Math.max(e,0);var t=x();return this._timestamp+e===0||(this._timestamp=t-e,this.isPlaying()||(this._isTweening=!0,this._isPaused=!1,p(this,this._timestamp,this._delay,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction,t),this.pause())),this},h.prototype.stop=function(e){return this._isTweening=!1,this._isPaused=!1,this._timeoutHandler=r,(t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.oCancelAnimationFrame||t.msCancelAnimationFrame||t.mozCancelRequestAnimationFrame||t.clearTimeout)(this._scheduleId),e&&(f(this,"beforeTween"),m(1,this._currentState,this._originalState,this._targetState,1,0,this._easing),f(this,"afterTween"),f(this,"afterTweenEnd"),this._finish.call(this,this._currentState,this._attachment)),this},h.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused},h.prototype.setScheduleFunction=function(e){this._scheduleFunction=e},h.prototype.dispose=function(){var e;for(e in this)this.hasOwnProperty(e)&&delete this[e]},h.prototype.filter={},u=h.prototype.formula={linear:function(e){return e}},a(h,{now:x,each:o,tweenProps:m,tweenProp:g,applyFilter:f,shallowCopy:a,defaults:s,composeEasingObject:l}),"function"==typeof SHIFTY_DEBUG_NOW&&(t.timeoutHandler=p),"object"==typeof v?n.exports=h:void 0===t.Tweenable&&(t.Tweenable=h),h}();m.shallowCopy(m.prototype.formula,{easeInQuad:function(e){return Math.pow(e,2)},easeOutQuad:function(e){return-(Math.pow(e-1,2)-1)},easeInOutQuad:function(e){return(e/=.5)<1?.5*Math.pow(e,2):-.5*((e-=2)*e-2)},easeInCubic:function(e){return Math.pow(e,3)},easeOutCubic:function(e){return Math.pow(e-1,3)+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},easeInQuart:function(e){return Math.pow(e,4)},easeOutQuart:function(e){return-(Math.pow(e-1,4)-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeInQuint:function(e){return Math.pow(e,5)},easeOutQuint:function(e){return Math.pow(e-1,5)+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInBack:function(e){return e*e*(2.70158*e-1.70158)},easeOutBack:function(e){return(e-=1)*e*(2.70158*e+1.70158)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},elastic:function(e){return-1*Math.pow(4,-8*e)*Math.sin((6*e-1)*(2*Math.PI)/2)+1},swingFromTo:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},swingFrom:function(e){return e*e*(2.70158*e-1.70158)},swingTo:function(e){return(e-=1)*e*(2.70158*e+1.70158)+1},bounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bouncePast:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?2-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?2-(7.5625*(e-=2.25/2.75)*e+.9375):2-(7.5625*(e-=2.625/2.75)*e+.984375)},easeFromTo:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeFrom:function(e){return Math.pow(e,4)},easeTo:function(e){return Math.pow(e,.25)}}),function(){function h(e,t,i,n,r,o){var a,l=0,h=0,u=0,s=0,p=0,d=0;function c(e){return((l*e+h)*e+u)*e}function _(e){return 0<=e?e:0-e}function y(e,t){var i,n,r,o,a,s,p;for(r=e,s=0;s<8;s++){if(_(o=c(r)-e)<t)return r;if(_(a=(3*l*(p=r)+2*h)*p+u)<1e-6)break;r-=o/a}if(n=1,(r=e)<(i=0))return i;if(n<r)return n;for(;i<n;){if(_((o=c(r))-e)<t)return r;o<e?i=r:n=r,r=.5*(n-i)+i}return r}return l=1-(u=3*t)-(h=3*(n-t)-u),s=1-(d=3*i)-(p=3*(r-i)-d),a=y(e,1/(200*o)),((s*a+p)*a+d)*a}m.setBezierFunction=function(e,t,i,n,r){var o,a,s,p,l=(o=t,a=i,s=n,p=r,function(e){return h(e,o,a,s,p,1)});return l.displayName=e,l.x1=t,l.y1=i,l.x2=n,l.y2=r,m.prototype.formula[e]=l},m.unsetBezierFunction=function(e){delete m.prototype.formula[e]}}(),(x=new m)._filterArgs=[],m.interpolate=function(e,t,i,n,r){var o=m.shallowCopy({},e),a=r||0,s=m.composeEasingObject(e,n||"linear");x.set({});var p=x._filterArgs;p.length=0,p[0]=o,p[1]=e,p[2]=t,p[3]=s,m.applyFilter(x,"tweenCreated"),m.applyFilter(x,"beforeTween");var l,h,u,d,c,_,y=(l=e,h=o,u=t,d=i,c=s,_=a,m.tweenProps(d,h,l,u,1,_,c));return m.applyFilter(x,"afterTween"),y},function(s){var p=/(\d|\-|\.)/,l=/([^\-0-9\.]+)/g,o=/[0-9.\-]+/g,a=new RegExp("rgb\\("+o.source+/,\s*/.source+o.source+/,\s*/.source+o.source+"\\)","g"),h=/^.*\(/,n=/#([0-9]|[a-f]){3,6}/gi,u="VAL";function r(i){s.each(i,function(e){var t=i[e];"string"==typeof t&&t.match(n)&&(i[e]=y(n,t,d))})}function d(e){var t,i=(3===(t=(t=e).replace(/#/,"")).length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]),c[0]=_(t.substr(0,2)),c[1]=_(t.substr(2,2)),c[2]=_(t.substr(4,2)),c);return"rgb("+i[0]+","+i[1]+","+i[2]+")"}var c=[];function _(e){return parseInt(e,16)}function y(e,t,i){var n=t.match(e),r=t.replace(e,u);if(n)for(var o,a=n.length,s=0;s<a;s++)o=n.shift(),r=r.replace(u,i(o));return r}function x(e){for(var t=e.match(o),i=t.length,n=e.match(h)[0],r=0;r<i;r++)n+=parseInt(t[r],10)+",";return n=n.slice(0,-1)+")"}function m(o){var a={};return s.each(o,function(e){var t,i,n=o[e];if("string"==typeof n){var r=z(n);a[e]={formatString:(t=n,i=t.match(l),i?(1===i.length||t.charAt(0).match(p))&&i.unshift(""):i=["",""],i.join(u)),chunkNames:function(e,t){var i,n=[],r=e.length;for(i=0;i<r;i++)n.push("_"+t+"_"+i);return n}(r,e)}}}),a}function g(o,a){s.each(a,function(e){for(var t=o[e],i=z(t),n=i.length,r=0;r<n;r++)o[a[e].chunkNames[r]]=+i[r];delete o[e]})}function f(r,o){s.each(o,function(e){var t=r[e],i=function(e,t){for(var i,n={},r=t.length,o=0;o<r;o++)i=t[o],n[i]=e[i],delete e[i];return n}(r,o[e].chunkNames),n=function(e,t){v.length=0;for(var i=t.length,n=0;n<i;n++)v.push(e[t[n]]);return v}(i,o[e].chunkNames);t=function(e,t){for(var i=e,n=t.length,r=0;r<n;r++)i=i.replace(u,+t[r].toFixed(4));return i}(o[e].formatString,n),r[e]=y(a,t,x)})}var v=[];function z(e){return e.match(o)}s.prototype.filter.token={tweenCreated:function(e,t,i,n){r(e),r(t),r(i),this._tokenData=m(e)},beforeTween:function(e,t,i,n){var p,l;p=n,l=this._tokenData,s.each(l,function(e){var t,i=l[e],n=i.chunkNames,r=n.length,o=p[e];if("string"==typeof o){var a=o.split(" "),s=a[a.length-1];for(t=0;t<r;t++)p[n[t]]=a[t]||s}else for(t=0;t<r;t++)p[n[t]]=o;delete p[e]}),g(e,this._tokenData),g(t,this._tokenData),g(i,this._tokenData)},afterTween:function(e,t,i,n){var p,l;f(e,this._tokenData),f(t,this._tokenData),f(i,this._tokenData),p=n,l=this._tokenData,s.each(l,function(e){var t=l[e],i=t.chunkNames,n=i.length,r=p[i[0]],o=typeof r;if("string"===o){for(var a="",s=0;s<n;s++)a+=" "+p[i[s]],delete p[i[s]];p[e]=a.substr(1)}else p[e]=r})}}}(m)}).call(null)},{}],2:[function(e,t,i){var n=e("./shape"),r=e("./utils"),o=function(e,t){this._pathTemplate="M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{2radius} a {radius},{radius} 0 1 1 0,-{2radius}",this.containerAspectRatio=1,n.apply(this,arguments)};((o.prototype=new n).constructor=o).prototype._pathString=function(e){var t=e.strokeWidth;e.trailWidth&&e.trailWidth>e.strokeWidth&&(t=e.trailWidth);var i=50-t/2;return r.render(this._pathTemplate,{radius:i,"2radius":2*i})},o.prototype._trailString=function(e){return this._pathString(e)},t.exports=o},{"./shape":7,"./utils":9}],3:[function(e,t,i){var n=e("./shape"),r=e("./utils"),o=function(e,t){this._pathTemplate="M 0,{center} L 100,{center}",n.apply(this,arguments)};((o.prototype=new n).constructor=o).prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 "+t.strokeWidth),e.setAttribute("preserveAspectRatio","none")},o.prototype._pathString=function(e){return r.render(this._pathTemplate,{center:e.strokeWidth/2})},o.prototype._trailString=function(e){return this._pathString(e)},t.exports=o},{"./shape":7,"./utils":9}],4:[function(e,t,i){t.exports={Line:e("./line"),Circle:e("./circle"),SemiCircle:e("./semicircle"),Square:e("./square"),Path:e("./path"),Shape:e("./shape"),utils:e("./utils")}},{"./circle":2,"./line":3,"./path":5,"./semicircle":6,"./shape":7,"./square":8,"./utils":9}],5:[function(e,t,i){var h=e("shifty"),u=e("./utils"),n={easeIn:"easeInCubic",easeOut:"easeOutCubic",easeInOut:"easeInOutCubic"},r=function e(t,i){if(!(this instanceof e))throw new Error("Constructor was called without new keyword");var n;i=u.extend({duration:800,easing:"linear",from:{},to:{},step:function(){}},i),n=u.isString(t)?document.querySelector(t):t,this.path=n,this._opts=i,this._tweenable=null;var r=this.path.getTotalLength();this.path.style.strokeDasharray=r+" "+r,this.set(0)};r.prototype.value=function(){var e=this._getComputedDashOffset(),t=this.path.getTotalLength(),i=1-e/t;return parseFloat(i.toFixed(6),10)},r.prototype.set=function(e){this.stop(),this.path.style.strokeDashoffset=this._progressToOffset(e);var t=this._opts.step;if(u.isFunction(t)){var i=this._easing(this._opts.easing),n=this._calculateTo(e,i),r=this._opts.shape||this;t(n,r,this._opts.attachment)}},r.prototype.stop=function(){this._stopTween(),this.path.style.strokeDashoffset=this._getComputedDashOffset()},r.prototype.animate=function(e,i,t){i=i||{},u.isFunction(i)&&(t=i,i={});var n=u.extend({},i),r=u.extend({},this._opts);i=u.extend(r,i);var o=this._easing(i.easing),a=this._resolveFromAndTo(e,o,n);this.stop(),this.path.getBoundingClientRect();var s=this._getComputedDashOffset(),p=this._progressToOffset(e),l=this;this._tweenable=new h,this._tweenable.tween({from:u.extend({offset:s},a.from),to:u.extend({offset:p},a.to),duration:i.duration,easing:o,step:function(e){l.path.style.strokeDashoffset=e.offset;var t=i.shape||l;i.step(e,t,i.attachment)},finish:function(e){u.isFunction(t)&&t()}})},r.prototype._getComputedDashOffset=function(){var e=window.getComputedStyle(this.path,null);return parseFloat(e.getPropertyValue("stroke-dashoffset"),10)},r.prototype._progressToOffset=function(e){var t=this.path.getTotalLength();return t-e*t},r.prototype._resolveFromAndTo=function(e,t,i){return i.from&&i.to?{from:i.from,to:i.to}:{from:this._calculateFrom(t),to:this._calculateTo(e,t)}},r.prototype._calculateFrom=function(e){return h.interpolate(this._opts.from,this._opts.to,this.value(),e)},r.prototype._calculateTo=function(e,t){return h.interpolate(this._opts.from,this._opts.to,e,t)},r.prototype._stopTween=function(){null!==this._tweenable&&(this._tweenable.stop(),this._tweenable=null)},r.prototype._easing=function(e){return n.hasOwnProperty(e)?n[e]:e},t.exports=r},{"./utils":9,shifty:1}],6:[function(e,t,i){var n=e("./shape"),r=e("./circle"),o=e("./utils"),a=function(e,t){this._pathTemplate="M 50,50 m -{radius},0 a {radius},{radius} 0 1 1 {2radius},0",this.containerAspectRatio=2,n.apply(this,arguments)};((a.prototype=new n).constructor=a).prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 50")},a.prototype._initializeTextContainer=function(e,t,i){e.text.style&&(i.style.top="auto",i.style.bottom="0",e.text.alignToBottom?o.setStyle(i,"transform","translate(-50%, 0)"):o.setStyle(i,"transform","translate(-50%, 50%)"))},a.prototype._pathString=r.prototype._pathString,a.prototype._trailString=r.prototype._trailString,t.exports=a},{"./circle":2,"./shape":7,"./utils":9}],7:[function(e,t,i){var a=e("./path"),s=e("./utils"),n="Object is destroyed",r=function e(t,i){if(!(this instanceof e))throw new Error("Constructor was called without new keyword");if(0!==arguments.length){this._opts=s.extend({color:"#555",strokeWidth:1,trailColor:null,trailWidth:null,fill:null,text:{style:{color:null,position:"absolute",left:"50%",top:"50%",padding:0,margin:0,transform:{prefix:!0,value:"translate(-50%, -50%)"}},autoStyleContainer:!0,alignToBottom:!0,value:null,className:"progressbar-text"},svgStyle:{display:"block",width:"100%"},warnings:!1},i,!0),s.isObject(i)&&void 0!==i.svgStyle&&(this._opts.svgStyle=i.svgStyle),s.isObject(i)&&s.isObject(i.text)&&void 0!==i.text.style&&(this._opts.text.style=i.text.style);var n,r=this._createSvgView(this._opts);if(!(n=s.isString(t)?document.querySelector(t):t))throw new Error("Container does not exist: "+t);this._container=n,this._container.appendChild(r.svg),this._opts.warnings&&this._warnContainerAspectRatio(this._container),this._opts.svgStyle&&s.setStyles(r.svg,this._opts.svgStyle),this.svg=r.svg,this.path=r.path,this.trail=r.trail,this.text=null;var o=s.extend({attachment:void 0,shape:this},this._opts);this._progressPath=new a(r.path,o),s.isObject(this._opts.text)&&null!==this._opts.text.value&&this.setText(this._opts.text.value)}};r.prototype.animate=function(e,t,i){if(null===this._progressPath)throw new Error(n);this._progressPath.animate(e,t,i)},r.prototype.stop=function(){if(null===this._progressPath)throw new Error(n);void 0!==this._progressPath&&this._progressPath.stop()},r.prototype.destroy=function(){if(null===this._progressPath)throw new Error(n);this.stop(),this.svg.parentNode.removeChild(this.svg),this.svg=null,this.path=null,this.trail=null,(this._progressPath=null)!==this.text&&(this.text.parentNode.removeChild(this.text),this.text=null)},r.prototype.set=function(e){if(null===this._progressPath)throw new Error(n);this._progressPath.set(e)},r.prototype.value=function(){if(null===this._progressPath)throw new Error(n);return void 0===this._progressPath?0:this._progressPath.value()},r.prototype.setText=function(e){if(null===this._progressPath)throw new Error(n);null===this.text&&(this.text=this._createTextContainer(this._opts,this._container),this._container.appendChild(this.text)),s.isObject(e)?(s.removeChildren(this.text),this.text.appendChild(e)):this.text.innerHTML=e},r.prototype._createSvgView=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");this._initializeSvg(t,e);var i=null;(e.trailColor||e.trailWidth)&&(i=this._createTrail(e),t.appendChild(i));var n=this._createPath(e);return t.appendChild(n),{svg:t,path:n,trail:i}},r.prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 100")},r.prototype._createPath=function(e){var t=this._pathString(e);return this._createPathElement(t,e)},r.prototype._createTrail=function(e){var t=this._trailString(e),i=s.extend({},e);return i.trailColor||(i.trailColor="#eee"),i.trailWidth||(i.trailWidth=i.strokeWidth),i.color=i.trailColor,i.strokeWidth=i.trailWidth,i.fill=null,this._createPathElement(t,i)},r.prototype._createPathElement=function(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",e),i.setAttribute("stroke",t.color),i.setAttribute("stroke-width",t.strokeWidth),t.fill?i.setAttribute("fill",t.fill):i.setAttribute("fill-opacity","0"),i},r.prototype._createTextContainer=function(e,t){var i=document.createElement("div");i.className=e.text.className;var n=e.text.style;return n&&(e.text.autoStyleContainer&&(t.style.position="relative"),s.setStyles(i,n),n.color||(i.style.color=e.color)),this._initializeTextContainer(e,t,i),i},r.prototype._initializeTextContainer=function(e,t,i){},r.prototype._pathString=function(e){throw new Error("Override this function for each progress bar")},r.prototype._trailString=function(e){throw new Error("Override this function for each progress bar")},r.prototype._warnContainerAspectRatio=function(e){if(this.containerAspectRatio){var t=window.getComputedStyle(e,null),i=parseFloat(t.getPropertyValue("width"),10),n=parseFloat(t.getPropertyValue("height"),10);s.floatEquals(this.containerAspectRatio,i/n)}},t.exports=r},{"./path":5,"./utils":9}],8:[function(e,t,i){var n=e("./shape"),r=e("./utils"),o=function(e,t){this._pathTemplate="M 0,{halfOfStrokeWidth} L {width},{halfOfStrokeWidth} L {width},{width} L {halfOfStrokeWidth},{width} L {halfOfStrokeWidth},{strokeWidth}",this._trailTemplate="M {startMargin},{halfOfStrokeWidth} L {width},{halfOfStrokeWidth} L {width},{width} L {halfOfStrokeWidth},{width} L {halfOfStrokeWidth},{halfOfStrokeWidth}",n.apply(this,arguments)};((o.prototype=new n).constructor=o).prototype._pathString=function(e){var t=100-e.strokeWidth/2;return r.render(this._pathTemplate,{width:t,strokeWidth:e.strokeWidth,halfOfStrokeWidth:e.strokeWidth/2})},o.prototype._trailString=function(e){var t=100-e.strokeWidth/2;return r.render(this._trailTemplate,{width:t,strokeWidth:e.strokeWidth,halfOfStrokeWidth:e.strokeWidth/2,startMargin:e.strokeWidth/2-e.trailWidth/2})},t.exports=o},{"./shape":7,"./utils":9}],9:[function(e,t,i){var a="Webkit Moz O ms".split(" ");function n(e,t,i){for(var n=e.style,r=0;r<a.length;++r){var o=a[r];n[o+s(t)]=i}n[t]=i}function s(e){return e.charAt(0).toUpperCase()+e.slice(1)}function p(e){if(t=e,"[object Array]"===Object.prototype.toString.call(t))return!1;var t,i=typeof e;return"object"===i&&!!e}function r(e,t){for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];t(n,i)}}t.exports={extend:function e(t,i,n){for(var r in t=t||{},n=n||!1,i=i||{})if(i.hasOwnProperty(r)){var o=t[r],a=i[r];n&&p(o)&&p(a)?t[r]=e(o,a,n):t[r]=a}return t},render:function(e,t){var i=e;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n],o="\\{"+n+"\\}",a=new RegExp(o,"g");i=i.replace(a,r)}return i},setStyle:n,setStyles:function(i,e){r(e,function(e,t){null!=e&&(p(e)&&!0===e.prefix?n(i,t,e.value):i.style[t]=e)})},capitalize:s,isString:function(e){return"string"==typeof e||e instanceof String},isFunction:function(e){return"function"==typeof e},isObject:p,forEachObject:r,floatEquals:function(e,t){return Math.abs(e-t)<.001},removeChildren:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}}},{}]},{},[4])(4)});var $e=function(){function t(e){this.circleLoader=null,this.loaded=!1,this.showPlayButton="undefined"==typeof playBtn||playBtn,this.progress=0,this.options={gameId:"12346",gameTitle:"Place Holder",gameName:"place-holder",libs:[],version:"dev",barColor:"white"},this.options.gameId=e.gameId,this.options.gameTitle=e.gameTitle,this.options.version=e.version,this.options.barColor=e.barColor?e.barColor:this.options.barColor,this.options.libs=e.libs}return t.getInstance=function(e){if(!t.instance){if(!e)throw new Error("Can not create new SplashLoader instance without options!");t.instance=new t(e)}return t.instance},t.prototype.create=function(){return Ze(this,void 0,void 0,function(){var n,r,o,a,s,p;return Je(this,function(e){switch(e.label){case 0:return n="\n        #h5branding-center {\n            position: absolute;\n            top: 45%;\n            left: 50%;\n            transform: translate(-50%, -20%);\n            text-align: center;\n            width: 100%;\n        }\n        #h5branding-wrapper {\n            position: relative;\n            z-index: 665;\n            width: 150px;\n            height: 150px;\n            display:inline-block;\n            margin: 35px 40px 96px 40px;\n        }\n\n        #h5branding-wrapper > #h5branding-bar, #h5branding-wrapper > img {\n            box-shadow: inset 10px 10px 20px 5px rgba(0, 0, 0, 0.5);\n            border-radius: 50%;\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n        }\n\n        #h5branding-ad {\n            position: relative;\n            z-index: 667;\n            border-radius: 5px;\n            border: 3px solid white;\n            background: rgba(256, 256, 256, 0.2);\n            width: 336px;\n            height: 280px;\n            display: none;\n            margin: 0px 10px 0px 10px;\n        }\n\n        #h5branding-wrapper > img {\n            /* Needs appropriate vendor prefixes */\n            box-sizing: border-box;\n\n            /* This needs to be equal to strokeWidth */\n            padding: 4%;\n        }\n\n        #h5branding-wrapper > img {\n            border-radius: 50%;\n            box-shadow: inset 0 5px 5px rgba(0, 0, 0, 0.5), 5px 5px 7px rgba(0, 0, 0, 0.3);\n        }\n\n        #h5branding-container {\n            box-sizing: border-box;\n            position: absolute;\n            z-index: 664;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background-color: #000;\n            overflow: hidden;\n        }\n        \n        #h5branding-background {\n            position: absolute;\n            top: -25%;\n            left: -25%;\n            width: 150%;\n            height: 150%;\n            background-blend-mode: multiply;\n            background-size: cover;\n            filter: blur(40px) brightness(1.5);\n        }\n        \n        @media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n             /* IE10+ CSS styles go here */\n             #h5branding-background {\n                background-image: none !important;\n             }\n        }\n\n        #h5branding-logo {\n            position: absolute;\n            margin: 0 auto;\n            left: 0;\n            right: 0;\n            text-align: center;\n            top: 10%;\n        }\n\n        #h5branding-logo > img {\n            height: 150px;\n        }\n\n        #h5branding-title {\n            position: absolute;\n            width: 100%;\n            background: linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.5) 50%, transparent);\n            color: #fff;\n            text-shadow: 0 0 1px rgba(0, 0, 0, 0.7);\n            bottom:10%;\n            padding: 15px 0;\n            text-align: center;\n            font-size: 18px;\n            font-family: Helvetica, Arial, sans-serif;\n            font-weight: bold;\n            line-height: 100%;\n        }\n        \n        #h5branding-button {\n            /* border: 0; */\n            padding: 10px 22px;\n            border-radius: 5px;\n            border: 3px solid white;\n            background: linear-gradient(0deg, #dddddd, #ffffff);\n            color: #222;\n            text-transform: uppercase;\n            text-shadow: 0 0 1px #fff;\n            font-family: Helvetica, Arial, sans-serif;\n            font-weight: bold;\n            font-size: 18px;\n            cursor: pointer;\n            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n            display: none;\n            width: 150px;\n            position: absolute;\n            top: 170px;\n            margin: 0 auto;\n            left: 0;\n            right: 0;\n        }\n        \n        @media (orientation: portrait) and (max-width: 1080px) {\n            #h5branding-logo > img {\n                height: initial;\n                width:100%;\n            }\n        }\n        \n        @media (orientation: landscape) and (max-height: 640px) {\n            #h5branding-title {\n                display: none;\n            }\n            \n            #h5branding-logo > img {\n                height: 100px;\n            }\n        }\n        \n        @media (orientation: landscape) and (max-height: 460px) {\n            #h5branding-title {\n                display: none;\n            }\n            \n            #h5branding-wrapper {\n                width: 110px;\n                height: 110px;\n                margin: 0;\n            }\n            \n            #h5branding-logo {\n                top: 0;\n                transform: scale(0.7, 0.7);\n            }\n       \n            #h5branding-button {\n                top: initial;\n                width: 110px;\n                font-size: 14px;\n                position: absolute;\n                top: 140px;\n                left: 0;\n                right: 0;\n            }\n            \n            #h5branding-ad {\n               display: none !important;\n            }\n        }\n        \n        @media (orientation: portrait) and (max-width: 250px) {\n            #h5branding-logo {\n                top: 2%;\n            }\n        }\n        \n        @media (orientation: landscape) and (max-width: 330px) {\n             #h5branding-button {\n                top: 120px;\n            }\n            \n            #h5branding-logo > img {\n                height: 70px;\n            }\n        }\n        \n        @media (max-width: 600px) and (max-height: 850px) {\n            #h5branding-ad {\n               display: none !important;\n            }\n        }\n        \n        @media (max-width: 600px) and (max-height: 1100px) {\n            #h5branding-center {\n                top: 40%;\n            }\n\n            #h5branding-title {\n               bottom: 5%\n            }\n        }\n        \n        @media (max-width: 600px) and (max-height: 900px) {\n            #h5branding-title {\n               display: none\n            }\n        }\n        \n        @media (orientation: landscape) and (min-width: 800px) {\n            #h5branding-wrapper {\n                margin-left: 120px;\n                margin-right: 120px;\n            }\n        }\n\n        ",t=this.getGameLogoUrl(this.options.gameId),i=this.options.gameTitle,r='\n        <div id="h5branding-background"></div>\n        <div id="h5branding-logo"></div>\n        <div id="h5branding-center">\n            <div id="h5branding-ad"></div>\n            <div id="h5branding-wrapper">\n                <img src="'+t+'" />\n                <div id="h5branding-bar"></div>\n                <button id="h5branding-button" onclick="h5branding.SplashLoader.getInstance().onPlayButtonClick();">Play</button>\n            </div>\n        </div>\n        <div id="h5branding-title">'+i+"</div>\n    ",o=document.head||document.getElementsByTagName("head")[0],(a=document.createElement("style")).type="text/css",a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n)),o.appendChild(a),(s=document.createElement("div")).innerHTML=r,s.id="h5branding-container",(p=document.body||document.getElementsByTagName("body")[0]).insertBefore(s,p.firstChild),this.circleLoader=new Qe.Circle("#h5branding-bar",{strokeWidth:3,color:this.options.barColor}),[4,Promise.all([this.loadBranding(),this.loadLibs(),C.preload()])];case 1:return e.sent(),this.loaded=!0,[2]}var t,i})})},t.prototype.loadBranding=function(){return Ze(this,void 0,void 0,function(){var t,i,n;return Je(this,function(e){switch(e.label){case 0:return[4,b.preload(Date.now().toString())];case 1:return e.sent(),(t=document.getElementById("h5branding-background"))&&(t.style.backgroundImage="url("+this.getGameLogoUrl(this.options.gameId)+")",t.style.backgroundColor=b.brandingBackgroundColor),(i=document.getElementById("h5branding-logo"))&&S.getBrandingDomain()!==p.BrandingDomain.Neutral&&((n=document.createElement("img")).src=b.brandingLogoUrl.replace("_small",""),i.appendChild(n)),[2]}})})},t.prototype.loadLibs=function(){var i=this,n=this.options.libs.map(function(e,t){return a.instance.loadScript(e,!0,function(){i.setScriptloadProgress(n.length,t+1)})});return Promise.all(n)},Object.defineProperty(t.prototype,"bannerAllowed",{get:function(){var e=document.body.clientWidth,t=document.body.clientHeight;return this.progress<100&&!(t<e&&t<=460)&&!(e<600&&t<850)},enumerable:!1,configurable:!0}),t.prototype.showBanner=function(){if(!this.bannerAllowed)return null;var e=document.getElementById("h5branding-ad");return e?(e.style.display="inline-flex",e):null},t.prototype.setScriptloadProgress=function(e,t){var i=.3*t/e;this.circleLoader.animate(i,null,function(){})},t.prototype.setLoadProgress=function(e){var t=this;if(this.loaded)if(e=30+.7*e,100===(this.progress=e)){var i=document.querySelector("#h5branding-button");this.circleLoader.animate(1,null,function(){!S.inGDGameZone()&&i&&!0===t.showPlayButton?i.style.display="block":(S.inGDGameZone()||!1===t.showPlayButton)&&t.onPlayButtonClick()})}else this.circleLoader.animate(e/100,null,function(){})},t.prototype.setButtonCallback=function(e){this.buttonCallback=e},t.prototype.onPlayButtonClick=function(){this.buttonCallback&&this.buttonCallback()},t.prototype.destroy=function(){var e=document.querySelector("#h5branding-container");null!==e&&null!==e.parentNode&&e.parentNode.removeChild(e)},t.prototype.getGameLogoUrl=function(e){var t=e+"-512x512.jpeg";return window.hasOwnProperty("fbrqSA")&&!0===window.fbrqSA?"assets/"+t:"https://img.gamedistribution.com/"+t},t}(),et=Ye.EGAProgressionStatus,tt=new C,it=new Ke;p.EGAProgressionStatus=et,p.google=tt,p.gameanalytics=it,p.Utils=S,p.Domain=o,p.Branding=b,p.SplashLoader=$e,Object.defineProperty(p,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.h5ads=e.h5ads||{})}(this,function(a){"use strict";var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};var e,i,t,r=(function(e){var n=Object.prototype.hasOwnProperty,c="~";function i(){}function s(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function r(e,t,i,n,r){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new s(i,n||e,r),a=c?c+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],o]:e._events[a].push(o):(e._events[a]=o,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function t(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(c=!1)),t.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)n.call(e,t)&&i.push(c?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},t.prototype.listeners=function(e){var t=c?c+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,r=i.length,o=new Array(r);n<r;n++)o[n]=i[n].fn;return o},t.prototype.listenerCount=function(e){var t=c?c+e:e,i=this._events[t];return i?i.fn?1:i.length:0},t.prototype.emit=function(e,t,i,n,r,o){var a=c?c+e:e;if(!this._events[a])return!1;var s,p,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,i),!0;case 4:return l.fn.call(l.context,t,i,n),!0;case 5:return l.fn.call(l.context,t,i,n,r),!0;case 6:return l.fn.call(l.context,t,i,n,r,o),!0}for(p=1,s=new Array(h-1);p<h;p++)s[p-1]=arguments[p];l.fn.apply(l.context,s)}else{var u,d=l.length;for(p=0;p<d;p++)switch(l[p].once&&this.removeListener(e,l[p].fn,void 0,!0),h){case 1:l[p].fn.call(l[p].context);break;case 2:l[p].fn.call(l[p].context,t);break;case 3:l[p].fn.call(l[p].context,t,i);break;case 4:l[p].fn.call(l[p].context,t,i,n);break;default:if(!s)for(u=1,s=new Array(h-1);u<h;u++)s[u-1]=arguments[u];l[p].fn.apply(l[p].context,s)}}return!0},t.prototype.on=function(e,t,i){return r(this,e,t,i,!1)},t.prototype.once=function(e,t,i){return r(this,e,t,i,!0)},t.prototype.removeListener=function(e,t,i,n){var r=c?c+e:e;if(!this._events[r])return this;if(!t)return l(this,r),this;var o=this._events[r];if(o.fn)o.fn!==t||n&&!o.once||i&&o.context!==i||l(this,r);else{for(var a=0,s=[],p=o.length;a<p;a++)(o[a].fn!==t||n&&!o[a].once||i&&o[a].context!==i)&&s.push(o[a]);s.length?this._events[r]=1===s.length?s[0]:s:l(this,r)}return this},t.prototype.removeAllListeners=function(e){var t;return e?(t=c?c+e:e,this._events[t]&&l(this,t)):(this._events=new i,this._eventsCount=0),this},t.prototype.off=t.prototype.removeListener,t.prototype.addListener=t.prototype.on,t.prefixed=c,t.EventEmitter=t,e.exports=t}(e={exports:{}},e.exports),e.exports);(t=i||(i={}))[t.AdMob=0]="AdMob",t[t.MoPub=1]="MoPub",t[t.Chartboost=2]="Chartboost",t[t.Heyzap=3]="Heyzap";var o,s,p,l,h=function(){function e(e,t){if(this.adsEnabled=!1,this.bannerShowable=!1,this.interstitialShowable=!1,this.insentiveShowable=!1,Cocoon&&Cocoon.Ad){switch(this.adsEnabled=!0,e){default:case i.AdMob:this.cocoonProvider=Cocoon.Ad.AdMob;break;case i.Chartboost:this.cocoonProvider=Cocoon.Ad.Chartboost;break;case i.Heyzap:this.cocoonProvider=Cocoon.Ad.Heyzap;break;case i.MoPub:this.cocoonProvider=Cocoon.Ad.MoPub}this.cocoonProvider.configure(t)}}return e.prototype.setManager=function(e){this.adManager=e,this.adManager.emit(a.AdEvents.AD_PROVIDER_LOADED)},e.prototype.showAd=function(e){if(this.adsEnabled){if(e===a.AdType.banner){if(!this.bannerShowable||null===this.banner)return;this.adManager.emit(a.AdEvents.BANNER_SHOWN,this.banner.width,this.banner.height),this.adManager.bannerActive=!0,this.banner.show()}if(e===a.AdType.interstitial){if(!this.interstitialShowable||null===this.interstitial)return void this.adManager.emit(a.AdEvents.CONTENT_RESUMED,a.AdType.interstitial);this.interstitial.show()}if(e===a.AdType.rewarded){if(!this.insentiveShowable||null===this.insentive)return void this.adManager.emit(a.AdEvents.CONTENT_RESUMED,a.AdType.rewarded);this.insentive.show()}}else e!==a.AdType.banner&&this.adManager.emit(a.AdEvents.CONTENT_RESUMED)},e.prototype.adAvailable=function(e){return!0},e.prototype.preloadAd=function(e,t,i){var n=this;this.adsEnabled&&(this.destroyAd(e),e===a.AdType.banner&&(this.banner=this.cocoonProvider.createBanner(t),i&&this.banner.setLayout(i),this.banner.on("load",function(){n.bannerShowable=!0}),this.banner.on("fail",function(){n.bannerShowable=!1,n.banner=null}),this.banner.on("click",function(){n.adManager.emit(a.AdEvents.AD_CLICKED,a.AdType.banner)}),this.banner.on("show",function(){}),this.banner.on("dismiss",function(){}),this.banner.load()),e===a.AdType.interstitial&&(this.interstitial=this.cocoonProvider.createInterstitial(t),this.interstitial.on("load",function(){n.interstitialShowable=!0}),this.interstitial.on("fail",function(){n.interstitialShowable=!1,n.interstitial=null}),this.interstitial.on("click",function(){n.adManager.emit(a.AdEvents.AD_CLICKED,a.AdType.interstitial)}),this.interstitial.on("show",function(){n.adManager.emit(a.AdEvents.CONTENT_PAUSED,a.AdType.interstitial)}),this.interstitial.on("dismiss",function(){n.adManager.emit(a.AdEvents.CONTENT_RESUMED,a.AdType.interstitial),n.interstitialShowable=!1,n.interstitial=null}),this.interstitial.load()),e===a.AdType.rewarded&&(this.insentive=this.cocoonProvider.createRewardedVideo(t),this.insentive.on("load",function(){n.insentiveShowable=!0}),this.insentive.on("fail",function(){n.insentiveShowable=!1,n.insentive=null}),this.insentive.on("click",function(){n.adManager.emit(a.AdEvents.AD_CLICKED,a.AdType.rewarded)}),this.insentive.on("show",function(){n.adManager.emit(a.AdEvents.CONTENT_PAUSED,a.AdType.rewarded)}),this.insentive.on("dismiss",function(){n.adManager.emit(a.AdEvents.CONTENT_RESUMED,a.AdType.rewarded),n.insentiveShowable=!1,n.insentive=null}),this.insentive.on("reward",function(){n.adManager.emit(a.AdEvents.AD_REWARDED,a.AdType.rewarded),n.insentiveShowable=!1,n.insentive=null}),this.insentive.load()))},e.prototype.destroyAd=function(e){if(this.adsEnabled){if(e===a.AdType.banner&&null!==this.banner){try{this.cocoonProvider.releaseBanner(this.banner)}catch(e){}this.banner=null,this.bannerShowable=!1}e===a.AdType.interstitial&&null!==this.interstitial&&(this.cocoonProvider.releaseInterstitial(this.interstitial),this.interstitial=null,this.interstitialShowable=!1)}},e.prototype.hideAd=function(e){this.adsEnabled&&(e===a.AdType.interstitial&&null!==this.interstitial&&this.interstitial.hide(),e===a.AdType.banner&&null!==this.banner&&(this.adManager.bannerActive&&(this.adManager.bannerActive=!1,this.adManager.emit(a.AdEvents.BANNER_HIDDEN,this.banner.width,this.banner.height)),this.banner.hide()),e===a.AdType.rewarded&&null!==this.insentive&&this.insentive.hide())},e}(),u=function(){function e(e,t,i){void 0===i&&(i=!1),this.adsEnabled=!1,void 0===cordova.plugins||void 0!==cordova.plugins&&void 0===cordova.plugins.gdApi||(i&&cordova.plugins.gdApi.enableTestAds(),this.setAdListeners(),cordova.plugins.gdApi.init([e,t],function(e){},function(e){}))}return e.prototype.setAdListeners=function(){var t=this;cordova.plugins.gdApi.setAdListener(function(e){switch(e.event){case"BANNER_STARTED":t.adManager.emit(a.AdEvents.CONTENT_PAUSED);break;case"API_IS_READY":t.adsEnabled=!0;break;case"API_ALREADY_INITIALIZED":break;case"BANNER_CLOSED":case"API_NOT_READY":case"BANNER_FAILED":t.adManager.emit(a.AdEvents.CONTENT_RESUMED)}},function(e){t.adsEnabled=!1})},e.prototype.setManager=function(e){this.adManager=e,this.adManager.emit(a.AdEvents.AD_PROVIDER_LOADED)},e.prototype.showAd=function(e){var t=this;this.adsEnabled?cordova.plugins.gdApi.showBanner(function(e){},function(e){t.adManager.emit(a.AdEvents.CONTENT_RESUMED)}):this.adManager.emit(a.AdEvents.CONTENT_RESUMED)},e.prototype.adAvailable=function(e){return!0},e.prototype.preloadAd=function(e){},e.prototype.destroyAd=function(e){},e.prototype.hideAd=function(e){},e}(),d=function(){function e(){var t=this;if(this.adsEnabled=!1,this.rewardedLoaded=!1,"undefined"!=typeof gamedockSDK){gamedockSDK.on("PrivacyPolicyStatus",function(e){t.adManager.emit(a.AdEvents.AD_PROVIDER_LOADED)}),gamedockSDK.initialise(!1,{shouldBlock:!0,requiredAge:12},!0,"PRODUCTION",[]),gamedockSDK.on("AdAvailable",function(e){switch(e.type){case"interstitial":t.interstitalAvailable();break;case"rewardVideo":t.rewardedChanged(!0);break;case"banner":throw new Error("Not yet implemented.")}}),gamedockSDK.on("AdNotAvailable",function(e){switch(e.type){case"interstitial":case"rewardVideo":t.resumeGameplay();break;case"banner":throw new Error("Not yet implemented.")}}),gamedockSDK.on("AdFinished",function(e){switch(e.type){case"interstitial":t.resumeGameplay();break;case"rewardVideo":t.rewardVideoFinished(e.reason);break;case"banner":throw new Error("Not yet implemented.")}})}}return e.prototype.setManager=function(e){this.adManager=e},e.prototype.showAd=function(e){if(void 0===e&&(e=a.AdType.interstitial),"undefined"!=typeof gamedockSDK)switch(e){case a.AdType.interstitial:this.adManager.emit(a.AdEvents.CONTENT_PAUSED),gamedockSDK.requestInterstitial();break;case a.AdType.rewarded:if(!this.adAvailable(a.AdType.rewarded)){this.resumeGameplay();break}this.adManager.emit(a.AdEvents.CONTENT_PAUSED),this.rewardedChanged(!1),gamedockSDK.playRewardVideo();break;default:this.resumeGameplay()}},e.prototype.interstitalAvailable=function(){"undefined"!=typeof gamedockSDK&&gamedockSDK.playInterstitial()},e.prototype.rewardVideoFinished=function(e){switch(e){case"dismiss":this.resumeGameplay();break;case"close":this.adManager.emit(a.AdEvents.AD_REWARDED)}},e.prototype.resumeGameplay=function(){this.adManager.emit(a.AdEvents.CONTENT_RESUMED)},e.prototype.preloadAd=function(e){if(void 0===e&&(e=a.AdType.interstitial),"undefined"!=typeof gamedockSDK)switch(e){case a.AdType.rewarded:if(this.rewardedLoaded)return;gamedockSDK.requestRewardVideo()}},e.prototype.destroyAd=function(){},e.prototype.hideAd=function(){},e.prototype.adAvailable=function(e){switch(e){case a.AdType.rewarded:return this.rewardedLoaded}return!1},e.prototype.rewardedChanged=function(e){this.rewardedLoaded=e},e}(),c=function(){function e(e){var t=this;this.adsEnabled=!1,this.adsEnabled=!0,HeyzapAds.start(e).then(function(){},function(e){t.adsEnabled=!1})}return e.prototype.setManager=function(e){this.adManager=e,this.adManager.emit(a.AdEvents.AD_PROVIDER_LOADED)},e.prototype.showAd=function(e,t){var i=this;switch(this.adsEnabled||this.adManager.emit(a.AdEvents.CONTENT_RESUMED),e){case a.AdType.interstitial:HeyzapAds.InterstitialAd.addEventListener(HeyzapAds.InterstitialAd.Events.HIDE,function(){i.adManager.emit(a.AdEvents.CONTENT_RESUMED,HeyzapAds.InterstitialAd.Events.HIDE)}),HeyzapAds.InterstitialAd.addEventListener(HeyzapAds.InterstitialAd.Events.SHOW_FAILED,function(){i.adManager.emit(a.AdEvents.CONTENT_RESUMED,HeyzapAds.InterstitialAd.Events.SHOW_FAILED)}),HeyzapAds.InterstitialAd.addEventListener(HeyzapAds.InterstitialAd.Events.CLICKED,function(){i.adManager.emit(a.AdEvents.AD_CLICKED,HeyzapAds.InterstitialAd.Events.CLICKED)}),HeyzapAds.InterstitialAd.show().then(function(){i.adManager.emit(a.AdEvents.CONTENT_PAUSED)},function(e){i.adManager.emit(a.AdEvents.CONTENT_RESUMED)});break;case a.AdType.interstitial:HeyzapAds.VideoAd.addEventListener(HeyzapAds.VideoAd.Events.HIDE,function(){i.adManager.emit(a.AdEvents.CONTENT_RESUMED,HeyzapAds.VideoAd.Events.HIDE)}),HeyzapAds.VideoAd.addEventListener(HeyzapAds.VideoAd.Events.SHOW_FAILED,function(){i.adManager.emit(a.AdEvents.CONTENT_RESUMED,HeyzapAds.VideoAd.Events.SHOW_FAILED)}),HeyzapAds.VideoAd.addEventListener(HeyzapAds.VideoAd.Events.CLICKED,function(){i.adManager.emit(a.AdEvents.AD_CLICKED,HeyzapAds.VideoAd.Events.CLICKED)}),HeyzapAds.VideoAd.show().then(function(){i.adManager.emit(a.AdEvents.CONTENT_PAUSED)},function(e){i.adManager.emit(a.AdEvents.CONTENT_RESUMED)});break;case a.AdType.rewarded:HeyzapAds.IncentivizedAd.addEventListener(HeyzapAds.IncentivizedAd.Events.HIDE,function(){i.adManager.emit(a.AdEvents.CONTENT_RESUMED,HeyzapAds.IncentivizedAd.Events.HIDE)}),HeyzapAds.IncentivizedAd.addEventListener(HeyzapAds.IncentivizedAd.Events.SHOW_FAILED,function(){i.adManager.emit(a.AdEvents.CONTENT_RESUMED,HeyzapAds.IncentivizedAd.Events.SHOW_FAILED)}),HeyzapAds.IncentivizedAd.addEventListener(HeyzapAds.IncentivizedAd.Events.CLICKED,function(){i.adManager.emit(a.AdEvents.AD_CLICKED,HeyzapAds.IncentivizedAd.Events.CLICKED)}),HeyzapAds.IncentivizedAd.show().then(function(){i.adManager.emit(a.AdEvents.CONTENT_PAUSED)},function(e){i.adManager.emit(a.AdEvents.CONTENT_RESUMED)});break;case a.AdType.banner:if(void 0===t)return;HeyzapAds.BannerAd.show(t).then(function(){},function(e){})}},e.prototype.adAvailable=function(e){return!0},e.prototype.preloadAd=function(e){this.adsEnabled&&e===a.AdType.rewarded&&HeyzapAds.IncentivizedAd.fetch().then(function(){},function(e){})},e.prototype.destroyAd=function(e){this.adsEnabled&&e===a.AdType.banner&&HeyzapAds.BannerAd.destroy().then(function(){},function(e){})},e.prototype.hideAd=function(e){this.adsEnabled&&e===a.AdType.banner&&HeyzapAds.BannerAd.hide().then(function(){},function(e){})},e}(),_=function(){function e(e){var t=this;if(this.adsEnabled=!1,this.interstitialLoaded=!1,this.rewardedLoaded=!1,"undefined"!=typeof IronSourceAds){IronSourceAds.init({appKey:e});var i=function(){return t.resumeGameplay()};window.addEventListener("interstitialClosed",i),window.addEventListener("interstitialShowFailed",i),window.addEventListener("interstitialLoaded",function(){return t.interstitialChanged(!0)}),window.addEventListener("rewardedVideoClosed",i),window.addEventListener("rewardedVideoFailed",i),IronSourceAds.hasRewardedVideo({onSuccess:this.rewardedChanged.bind(this)}),window.addEventListener("rewardedVideoAvailabilityChanged",function(e){return t.rewardedChanged(e.available)})}}return e.prototype.setManager=function(e){this.adManager=e,this.adManager.emit(a.AdEvents.AD_PROVIDER_LOADED)},e.prototype.showAd=function(e){switch(void 0===e&&(e=a.AdType.interstitial),e){case a.AdType.interstitial:if(!this.interstitialLoaded){this.resumeGameplay();break}this.interstitialChanged(!1),this.adManager.emit(a.AdEvents.CONTENT_PAUSED),IronSourceAds.showInterstitial();break;case a.AdType.rewarded:if(!this.rewardedLoaded){this.resumeGameplay();break}this.adManager.emit(a.AdEvents.CONTENT_PAUSED),IronSourceAds.showRewardedVideo();break;default:this.resumeGameplay()}},e.prototype.resumeGameplay=function(){this.adManager.emit(a.AdEvents.CONTENT_RESUMED)},e.prototype.preloadAd=function(e){void 0===e&&(e=a.AdType.interstitial),e===a.AdType.interstitial&&IronSourceAds.loadInterstitial()},e.prototype.destroyAd=function(){},e.prototype.hideAd=function(){},e.prototype.adAvailable=function(e){switch(e){case a.AdType.interstitial:return this.interstitialLoaded;case a.AdType.rewarded:return this.rewardedLoaded}return!1},e.prototype.interstitialChanged=function(e){this.interstitialLoaded=e},e.prototype.rewardedChanged=function(e){this.rewardedLoaded=e},e}();(s=o||(o={})).interstitial="interstitial",s.rewarded="rewarded",s.display="display",(p=a.GameDistributionBannerSize||(a.GameDistributionBannerSize={}))[p.LargeRectangle=0]="LargeRectangle",p[p.MediumRectangle=1]="MediumRectangle",p[p.Billboard=2]="Billboard",p[p.Leaderboard=3]="Leaderboard",p[p.Skyscraper=4]="Skyscraper",p[p.WideSkyscraper=5]="WideSkyscraper",(l=a.GameDistributionAlignment||(a.GameDistributionAlignment={}))[l.TopLeft=0]="TopLeft",l[l.TopCenter=1]="TopCenter",l[l.TopRight=2]="TopRight",l[l.CenterLeft=3]="CenterLeft",l[l.Center=4]="Center",l[l.CenterRight=5]="CenterRight",l[l.BottomLeft=6]="BottomLeft",l[l.BottomCenter=7]="BottomCenter",l[l.BottomRight=8]="BottomRight";var y,x,m=function(){function e(){this.scaleFactor=1,this.offsetX=0,this.offsetY=0,this.element=document.createElement("div"),this.element.style.position="absolute",this.element.style.top="0px",this.element.style.left="0px",this.element.id="banner-"+Date.now()+(1e7*Math.random()|0),document.body.appendChild(this.element)}return e.prototype.loadBanner=function(){return"undefined"==typeof gdsdk?Promise.reject("GD Sdk not available, probably due to adblocker"):gdsdk.showAd(o.display,{containerId:this.element.id})},e.prototype.destroy=function(){document.body.removeChild(this.element),this.resizeListener&&window.removeEventListener("resize",this.resizeListener),delete this.element,delete this.parent,delete this.alignment},e.prototype.alignIn=function(e,t){var i=this;this.parent||(this.parent=e,this.alignment=t,this.resizeListener=function(){return i.resize()},window.addEventListener("resize",this.resizeListener),this.resize())},e.prototype.setOffset=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.offsetX=e,this.offsetY=t,this.resize()},e.prototype.resize=function(){if(this.parent){var e=this.parent.getBoundingClientRect();switch(this.alignment){case a.GameDistributionAlignment.TopLeft:this.position(e.left,e.top);break;case a.GameDistributionAlignment.TopCenter:this.position(e.left+e.width/2-this.width*this.scaleFactor/2,e.top);break;case a.GameDistributionAlignment.TopRight:this.position(e.left+e.width-this.width*this.scaleFactor,e.top);break;case a.GameDistributionAlignment.CenterLeft:this.position(e.left,e.top+e.height/2-this.height*this.scaleFactor/2);break;case a.GameDistributionAlignment.Center:this.position(e.left+e.width/2-this.width*this.scaleFactor/2,e.top+e.height/2-this.height*this.scaleFactor/2);break;case a.GameDistributionAlignment.CenterRight:this.position(e.left+e.width-this.width*this.scaleFactor,e.top+e.height/2-this.height*this.scaleFactor/2);break;case a.GameDistributionAlignment.BottomLeft:this.position(e.left,e.top+e.height-this.height*this.scaleFactor);break;case a.GameDistributionAlignment.BottomCenter:this.position(e.left+e.width/2-this.width*this.scaleFactor/2,e.top+e.height-this.height*this.scaleFactor);break;case a.GameDistributionAlignment.BottomRight:this.position(e.left+e.width-this.width*this.scaleFactor,e.top+e.height-this.height*this.scaleFactor)}}},e.prototype.setSize=function(e){var t,i;switch(e){default:case a.GameDistributionBannerSize.LargeRectangle:t=336,i=280;break;case a.GameDistributionBannerSize.MediumRectangle:t=300,i=250;break;case a.GameDistributionBannerSize.Billboard:t=970,i=250;break;case a.GameDistributionBannerSize.Leaderboard:t=728,i=90;break;case a.GameDistributionBannerSize.Skyscraper:t=120,i=600;break;case a.GameDistributionBannerSize.WideSkyscraper:t=160,i=600}this.width=t,this.height=i,this.element.style.width=t+"px",this.element.style.height=i+"px"},e.prototype.position=function(e,t){this.element.style.left=e+this.offsetX+"px",this.element.style.top=t+this.offsetY+"px"},e.prototype.scale=function(e){this.element.style.transformOrigin="left top",this.scaleFactor=e,this.element.style.transform="scale("+e+")"},e}(),g=function(){function e(e){var t,i,n,r,o=this;this.adsEnabled=!1,this.hasRewarded=!1,this.adShowing=!1,this.areAdsEnabled(),window.GD_OPTIONS={gameId:e,advertisementSettings:{autoplay:!1},onEvent:function(e){switch(e.name){case"SDK_GAME_PAUSE":o.adManager.emit(a.AdEvents.CONTENT_PAUSED);break;case"SDK_READY":o.sdkLoaded()}}},t=document,i="gamedistribution-jssdk",r=t.getElementsByTagName("script")[0],t.getElementById(i)||((n=t.createElement("script")).id=i,n.src="/main.min.js",r.parentNode&&r.parentNode.insertBefore(n,r))}return e.prototype.setManager=function(e){this.adManager=e,this.adManager.emit(a.AdEvents.AD_PROVIDER_LOADED)},e.prototype.sdkLoaded=function(){var t=this;this.areAdsEnabled().then(function(e){e&&(t.adsEnabled=!0)})},e.prototype.showAd=function(e){var t=this;if(this.adsEnabled){if("undefined"==typeof gdsdk||gdsdk&&void 0===gdsdk.showAd)return this.adsEnabled=!1,void this.adManager.emit(a.AdEvents.CONTENT_RESUMED);gdsdk.showAd(e===a.AdType.rewarded?o.rewarded:o.interstitial).then(function(){e===a.AdType.rewarded&&(t.adManager.emit(a.AdEvents.AD_REWARDED),t.hasRewarded=!1),t.adManager.emit(a.AdEvents.CONTENT_RESUMED)}).catch(function(){e===a.AdType.rewarded&&t.hasRewarded&&(t.hasRewarded=!1),t.adManager.emit(a.AdEvents.CONTENT_RESUMED)})}else this.adManager.emit(a.AdEvents.CONTENT_RESUMED)},e.prototype.createBanner=function(e){if(this.adsEnabled){var t=new m;return t.setSize(e),t}},e.prototype.loadBanner=function(e){if(this.adsEnabled){var t=new m;return t.setSize(e),t.loadBanner(),t}},e.prototype.preloadAd=function(e){var t=this;!this.hasRewarded&&this.adsEnabled&&e===a.AdType.rewarded&&gdsdk.preloadAd(o.rewarded).then(function(){t.hasRewarded=!0,t.adManager.emit(a.AdEvents.AD_LOADED,e)})},e.prototype.adAvailable=function(e){return e!==a.AdType.rewarded||this.hasRewarded},e.prototype.destroyAd=function(){},e.prototype.hideAd=function(){},e.prototype.areAdsEnabled=function(){var i=document.createElement("div");i.innerHTML="&nbsp;",i.className="adsbox",i.style.position="absolute",i.style.fontSize="10px",document.body.appendChild(i);return new Promise(function(t){window.setTimeout(function(){var e;t((e=!0,0===i.offsetHeight&&(e=!1),i.parentNode&&i.parentNode.removeChild(i),e))},100)})},e}();(x=y||(y={}))[x.start=0]="start",x[x.firstQuartile=1]="firstQuartile",x[x.midPoint=2]="midPoint",x[x.thirdQuartile=3]="thirdQuartile",x[x.complete=4]="complete";var f,v,z=function(){function e(e,t){this.googleEnabled=!1,this.adsEnabled=!0,this.adTagUrl="",this.adRequested=!1,this.areAdsEnabled(),"undefined"!=typeof google&&(this.googleEnabled=!0,this.gameContent="string"==typeof e.parentElement?document.getElementById(e.parentElement):e.parentElement,this.gameContent.style.position="absolute",this.gameContent.style.width="100%",this.adContent=this.gameContent.parentNode.appendChild(document.createElement("div")),this.adContent.id="phaser-ad-container",this.adContent.style.position="absolute",this.adContent.style.zIndex="9999",this.adContent.style.display="none",this.adContent.style.top="0",this.adContent.style.left="0",this.adContent.style.width="100%",this.adContent.style.height="100%",this.adContent.style.overflow="hidden",this.adTagUrl=t,this.adDisplay=new google.ima.AdDisplayContainer(this.adContent),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale("nl"),this.adLoader=new google.ima.AdsLoader(this.adDisplay),this.adLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdManagerLoader,!1,this),this.adLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1,this))}return e.prototype.setManager=function(e){this.adManager=e,this.adManager.emit(a.AdEvents.AD_PROVIDER_LOADED)},e.prototype.showAd=function(e,t){if(!this.adRequested)if(this.adsEnabled||this.adManager.emit(a.AdEvents.AD_DISABLED,!0),this.googleEnabled){this.adDisplay.initialize();var i=new google.ima.AdsRequest;i.adTagUrl=this.adTagUrl+this.parseCustomParams(t);var n=window.innerWidth,r=window.innerHeight;document.body.clientHeight<window.innerHeight&&(r=document.body.clientHeight,n=document.body.clientWidth),i.linearAdSlotWidth=n,i.linearAdSlotHeight=r,i.nonLinearAdSlotWidth=n,i.nonLinearAdSlotHeight=r,i.forceNonLinearFullSlot=!0;try{this.adRequested=!0,this.adLoader.requestAds(i)}catch(e){this.onContentResumeRequested()}}else this.onContentResumeRequested()},e.prototype.adAvailable=function(e){return!0},e.prototype.preloadAd=function(){},e.prototype.destroyAd=function(){},e.prototype.hideAd=function(){},e.prototype.onAdManagerLoader=function(e){var t=this,i=new google.ima.AdsRenderingSettings;i.restoreCustomPlaybackStateOnAdBreakComplete=!0;var n=e.getAdsManager(this.gameContent,i);(this.adsManager=n).addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested,!1,this),n.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested,!1,this),n.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1,this),[google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE].forEach(function(e){n.addEventListener(e,t.onAdEvent,!1,t)});try{this.adContent.style.display="block";var r=window.innerWidth,o=window.innerHeight;this.adsManager.init(r,o,google.ima.ViewMode.NORMAL),this.adsManager.start(),this.resizeListener=function(){null!==t.adsManager&&t.adsManager.resize(window.innerWidth,window.innerHeight,google.ima.ViewMode.NORMAL)},window.addEventListener("resize",this.resizeListener)}catch(e){this.onAdError(e)}},e.prototype.onAdEvent=function(e){switch(e.type){case google.ima.AdEvent.Type.CLICK:this.adManager.emit(a.AdEvents.AD_CLICKED);break;case google.ima.AdEvent.Type.LOADED:this.adRequested=!1;var t=e.getAd();t.isLinear()||this.onContentResumeRequested();break;case google.ima.AdEvent.Type.STARTED:this.adManager.emit(a.AdEvents.AD_PROGRESSION,y.start);break;case google.ima.AdEvent.Type.FIRST_QUARTILE:this.adManager.emit(a.AdEvents.AD_PROGRESSION,y.firstQuartile);break;case google.ima.AdEvent.Type.MIDPOINT:this.adManager.emit(a.AdEvents.AD_PROGRESSION,y.midPoint);break;case google.ima.AdEvent.Type.THIRD_QUARTILE:this.adManager.emit(a.AdEvents.AD_PROGRESSION,y.thirdQuartile);break;case google.ima.AdEvent.Type.COMPLETE:this.adManager.emit(a.AdEvents.AD_PROGRESSION,y.complete);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.onContentResumeRequested()}},e.prototype.onAdError=function(e){null!==this.adsManager&&(this.adsManager.destroy(),null!==this.resizeListener&&window.removeEventListener("resize",this.resizeListener)),this.adRequested&&(this.adRequested=!1),this.onContentResumeRequested()},e.prototype.onContentPauseRequested=function(){this.adManager.emit(a.AdEvents.CONTENT_PAUSED)},e.prototype.onContentResumeRequested=function(){"undefined"!=typeof google&&(this.adContent.style.display="none"),this.adManager.emit(a.AdEvents.CONTENT_RESUMED)},e.prototype.parseCustomParams=function(e){if(void 0===e)return"";var t="";for(var i in e){if(e.hasOwnProperty(i))0<t.length&&(t+="&"),t+=i+"="+(Array.isArray(e[i])?e[i].join(","):e[i])}return"&cust_params="+encodeURIComponent(t)},e.prototype.areAdsEnabled=function(){var t=this,i=document.createElement("div");i.innerHTML="&nbsp;",i.className="adsbox",i.style.position="absolute",i.style.fontSize="10px",document.body.appendChild(i);window.setTimeout(function(){var e;t.adsEnabled=(e=!0,0===i.offsetHeight&&(e=!1),i.parentNode&&i.parentNode.removeChild(i),e)},100)},e}();(f=a.AdEvents||(a.AdEvents={})).CONTENT_PAUSED="onContentPaused",f.CONTENT_RESUMED="onContentResumed",f.AD_PROGRESSION="onAdProgression",f.AD_DISABLED="onAdsDisabled",f.AD_CLICKED="onAdClicked",f.AD_REWARDED="onAdRewardGranted",f.BANNER_SHOWN="onBannerShown",f.BANNER_HIDDEN="onBannerHidden",f.AD_LOADED="onAdLoaded",f.AD_PROVIDER_LOADED="onAdProviderLoaded",(v=a.AdType||(a.AdType={}))[v.interstitial=0]="interstitial",v[v.rewarded=1]="rewarded",v[v.banner=2]="banner";var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bannerActive=!1,e.provider=null,e}return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}(e,t),e.prototype.setAdProvider=function(e){this.provider=e,this.provider.setManager(this)},e.prototype.showAd=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(null===this.provider)throw new Error("Can not request an ad without an provider, please attach an ad provider!");t.unshift(e),this.provider.showAd.apply(this.provider,t)},e.prototype.createBanner=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.provider.loadBanner.apply(this.provider,e)},e.prototype.loadBanner=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.provider.loadBanner.apply(this.provider,e)},e.prototype.preloadAd=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(null===this.provider)throw new Error("Can not preload an ad without an provider, please attach an ad provider!");t.unshift(e),this.provider.preloadAd.apply(this.provider,t)},e.prototype.destroyAd=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(null===this.provider)throw new Error("Can not destroy an ad without an provider, please attach an ad provider!");t.unshift(e),this.provider.destroyAd.apply(this.provider,t)},e.prototype.hideAd=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(null===this.provider)throw new Error("Can not hide an ad without an provider, please attach an ad provider!");t.unshift(e),this.provider.hideAd.apply(this.provider,t)},e.prototype.adsEnabled=function(){if(null===this.provider)throw new Error("Can not hide an ad without an provider, please attach an ad provider!");return this.provider.adsEnabled},e.prototype.adAvailable=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(null===this.provider)throw new Error("Can not hide an ad without an provider, please attach an ad provider!");return t.unshift(e),this.provider.adAvailable.apply(this.provider,t)},e}(r),b=new w;a.H5AdWrapper=w,a.adWrapper=b,a.CocoonAds=h,a.CordovaGamedistribution=u,a.CordovaGamedock=d,a.CordovaHeyzap=c,a.CordovaIronSource=_,a.GameDistribution=g,a.GameDistributionBanner=m,a.Ima3=z,Object.defineProperty(a,"__esModule",{value:!0})}),function(e){function i(){for(var e=0;e<w.length;e++)w[e][0](w[e][1]);y=!(w=[])}function n(e,t){w.push([e,t]),y||(y=!0,z(i,0))}function r(t){var e=(i=t.owner).state_,i=i.data_,n=t[e];if(t=t.then,"function"==typeof n){e=g;try{i=n(i)}catch(e){p(t,e)}}o(t,i)||(e===g&&a(t,i),e===f&&p(t,i))}function o(t,i){var n;try{if(t===i)throw new TypeError("A promises callback cannot return that same promise.");if(i&&("function"==typeof i||"object"==typeof i)){var e=i.then;if("function"==typeof e)return e.call(i,function(e){n||(n=!0,i!==e?a(t,e):s(t,e))},function(e){n||(n=!0,p(t,e))}),!0}}catch(e){return n||p(t,e),!0}return!1}function a(e,t){e!==t&&o(e,t)||s(e,t)}function s(e,t){e.state_===x&&(e.state_=m,e.data_=t,n(l,e))}function p(e,t){e.state_===x&&(e.state_=m,e.data_=t,n(h,e))}function t(e){var t=e.then_;for(e.then_=void 0,e=0;e<t.length;e++)r(t[e])}function l(e){e.state_=g,t(e)}function h(e){e.state_=f,t(e)}function u(e){if("function"!=typeof e)throw new TypeError("Promise constructor takes a function argument");if(!1==this instanceof u)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(e,t){function i(e){p(t,e)}try{e(function(e){a(t,e)},i)}catch(e){i(e)}}(e,this)}var d,c=e.Promise,_=c&&"resolve"in c&&"reject"in c&&"all"in c&&"race"in c&&(new c(function(e){d=e}),"function"==typeof d);"undefined"!=typeof exports&&exports?(exports.Promise=_?c:u,exports.Polyfill=u):"function"==typeof define&&define.amd?define(function(){return _?c:u}):_||(e.Promise=u);var y,x="pending",m="sealed",g="fulfilled",f="rejected",v=function(){},z="undefined"!=typeof setImmediate?setImmediate:setTimeout,w=[];u.prototype={constructor:u,state_:x,then_:null,data_:void 0,then:function(e,t){var i={owner:this,then:new this.constructor(v),fulfilled:e,rejected:t};return this.state_===g||this.state_===f?n(r,i):this.then_.push(i),i.then},catch:function(e){return this.then(null,e)}},u.all=function(s){if("[object Array]"!==Object.prototype.toString.call(s))throw new TypeError("You must pass an array to Promise.all().");return new this(function(i,e){function t(t){return o++,function(e){r[t]=e,--o||i(r)}}for(var n,r=[],o=0,a=0;a<s.length;a++)(n=s[a])&&"function"==typeof n.then?n.then(t(a),e):r[a]=n;o||i(r)})},u.race=function(r){if("[object Array]"!==Object.prototype.toString.call(r))throw new TypeError("You must pass an array to Promise.race().");return new this(function(e,t){for(var i,n=0;n<r.length;n++)(i=r[n])&&"function"==typeof i.then?i.then(e,t):e(i)})},u.resolve=function(t){return t&&"object"==typeof t&&t.constructor===this?t:new this(function(e){e(t)})},u.reject=function(i){return new this(function(e,t){t(i)})}}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this),function(e){var t;"object"==typeof exports?module.exports=e():("undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.p2=e())}(function(){return function r(o,a,s){function p(i,e){if(!a[i]){if(!o[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(l)return l(i,!0);throw new Error("Cannot find module '"+i+"'")}var n=a[i]={exports:{}};o[i][0].call(n.exports,function(e){var t=o[i][1][e];return p(t||e)},n,n.exports,r,o,a,s)}return a[i].exports}for(var l="function"==typeof require&&require,e=0;e<s.length;e++)p(s[e]);return p}({1:[function(e,t,i){var u=e("./Scalar");function n(){}(t.exports=n).lineInt=function(e,t,i){i=i||0;var n,r,o,a,s,p,l,h=[0,0];return n=e[1][1]-e[0][1],r=e[0][0]-e[1][0],o=n*e[0][0]+r*e[0][1],a=t[1][1]-t[0][1],s=t[0][0]-t[1][0],p=a*t[0][0]+s*t[0][1],l=n*s-a*r,u.eq(l,0,i)||(h[0]=(s*o-r*p)/l,h[1]=(n*p-a*o)/l),h},n.segmentsIntersect=function(e,t,i,n){var r=t[0]-e[0],o=t[1]-e[1],a=n[0]-i[0],s=n[1]-i[1];if(a*o-s*r==0)return!1;var p=(r*(i[1]-e[1])+o*(e[0]-i[0]))/(a*o-s*r),l=(a*(e[1]-i[1])+s*(i[0]-e[0]))/(s*r-a*o);return 0<=p&&p<=1&&0<=l&&l<=1}},{"./Scalar":4}],2:[function(e,t,i){function l(){}(t.exports=l).area=function(e,t,i){return(t[0]-e[0])*(i[1]-e[1])-(i[0]-e[0])*(t[1]-e[1])},l.left=function(e,t,i){return 0<l.area(e,t,i)},l.leftOn=function(e,t,i){return 0<=l.area(e,t,i)},l.right=function(e,t,i){return l.area(e,t,i)<0},l.rightOn=function(e,t,i){return l.area(e,t,i)<=0};var h=[],u=[];l.collinear=function(e,t,i,n){if(n){var r=h,o=u;r[0]=t[0]-e[0],r[1]=t[1]-e[1],o[0]=i[0]-t[0],o[1]=i[1]-t[1];var a=r[0]*o[0]+r[1]*o[1],s=Math.sqrt(r[0]*r[0]+r[1]*r[1]),p=Math.sqrt(o[0]*o[0]+o[1]*o[1]);return Math.acos(a/(s*p))<n}return 0==l.area(e,t,i)},l.sqdist=function(e,t){var i=t[0]-e[0],n=t[1]-e[1];return i*i+n*n}},{}],3:[function(e,t,i){var s=e("./Line"),w=e("./Point"),d=e("./Scalar");function b(){this.vertices=[]}(t.exports=b).prototype.at=function(e){var t=this.vertices,i=t.length;return t[e<0?e%i+i:e%i]},b.prototype.first=function(){return this.vertices[0]},b.prototype.last=function(){return this.vertices[this.vertices.length-1]},b.prototype.clear=function(){this.vertices.length=0},b.prototype.append=function(e,t,i){if(void 0===t)throw new Error("From is not given!");if(void 0===i)throw new Error("To is not given!");if(i-1<t)throw new Error("lol1");if(i>e.vertices.length)throw new Error("lol2");if(t<0)throw new Error("lol3");for(var n=t;n<i;n++)this.vertices.push(e.vertices[n])},b.prototype.makeCCW=function(){for(var e=0,t=this.vertices,i=1;i<this.vertices.length;++i)(t[i][1]<t[e][1]||t[i][1]==t[e][1]&&t[i][0]>t[e][0])&&(e=i);w.left(this.at(e-1),this.at(e),this.at(e+1))||this.reverse()},b.prototype.reverse=function(){for(var e=[],t=0,i=this.vertices.length;t!==i;t++)e.push(this.vertices.pop());this.vertices=e},b.prototype.isReflex=function(e){return w.right(this.at(e-1),this.at(e),this.at(e+1))};var p=[],l=[];function S(e,t,i,n,r){r=r||0;var o=t[1]-e[1],a=e[0]-t[0],s=o*e[0]+a*e[1],p=n[1]-i[1],l=i[0]-n[0],h=p*i[0]+l*i[1],u=o*l-p*a;return d.eq(u,0,r)?[0,0]:[(l*s-a*h)/u,(o*h-p*s)/u]}b.prototype.canSee=function(e,t){var i,n,r=p,o=l;if(w.leftOn(this.at(e+1),this.at(e),this.at(t))&&w.rightOn(this.at(e-1),this.at(e),this.at(t)))return!1;n=w.sqdist(this.at(e),this.at(t));for(var a=0;a!==this.vertices.length;++a)if((a+1)%this.vertices.length!==e&&a!==e&&w.leftOn(this.at(e),this.at(t),this.at(a+1))&&w.rightOn(this.at(e),this.at(t),this.at(a))&&(r[0]=this.at(e),r[1]=this.at(t),o[0]=this.at(a),o[1]=this.at(a+1),i=s.lineInt(r,o),w.sqdist(this.at(e),i)<n))return!1;return!0},b.prototype.copy=function(e,t,i){var n=i||new b;if(n.clear(),e<t)for(var r=e;r<=t;r++)n.vertices.push(this.vertices[r]);else{for(r=0;r<=t;r++)n.vertices.push(this.vertices[r]);for(r=e;r<this.vertices.length;r++)n.vertices.push(this.vertices[r])}return n},b.prototype.getCutEdges=function(){for(var e=[],t=[],i=[],n=new b,r=Number.MAX_VALUE,o=0;o<this.vertices.length;++o)if(this.isReflex(o))for(var a=0;a<this.vertices.length;++a)if(this.canSee(o,a)){t=this.copy(o,a,n).getCutEdges(),i=this.copy(a,o,n).getCutEdges();for(var s=0;s<i.length;s++)t.push(i[s]);t.length<r&&(r=(e=t).length,e.push([this.at(o),this.at(a)]))}return e},b.prototype.decomp=function(){var e=this.getCutEdges();return 0<e.length?this.slice(e):[this]},b.prototype.slice=function(e){if(0==e.length)return[this];if(e instanceof Array&&e.length&&e[0]instanceof Array&&2==e[0].length&&e[0][0]instanceof Array){for(var t=[this],i=0;i<e.length;i++)for(var n=e[i],r=0;r<t.length;r++){var o=t[r].slice(n);if(o){t.splice(r,1),t.push(o[0],o[1]);break}}return t}n=e,i=this.vertices.indexOf(n[0]),r=this.vertices.indexOf(n[1]);return-1!=i&&-1!=r&&[this.copy(i,r),this.copy(r,i)]},b.prototype.isSimple=function(){for(var e=this.vertices,t=0;t<e.length-1;t++)for(var i=0;i<t-1;i++)if(s.segmentsIntersect(e[t],e[t+1],e[i],e[i+1]))return!1;for(t=1;t<e.length-2;t++)if(s.segmentsIntersect(e[0],e[e.length-1],e[t],e[t+1]))return!1;return!0},b.prototype.quickDecomp=function(e,t,i,n,r,o){r=r||100,o=o||0,n=n||25,e=void 0!==e?e:[],t=t||[],i=i||[];var a=[0,0],s=[0,0],p=[0,0],l=0,h=0,u=0,d=0,c=0,_=0,y=0,x=new b,m=new b,g=this,f=this.vertices;if(f.length<3)return e;if(r<++o)return e;for(var v=0;v<this.vertices.length;++v)if(g.isReflex(v)){t.push(g.vertices[v]),l=h=Number.MAX_VALUE;for(var z=0;z<this.vertices.length;++z)w.left(g.at(v-1),g.at(v),g.at(z))&&w.rightOn(g.at(v-1),g.at(v),g.at(z-1))&&(p=S(g.at(v-1),g.at(v),g.at(z),g.at(z-1)),w.right(g.at(v+1),g.at(v),p)&&(u=w.sqdist(g.vertices[v],p))<h&&(h=u,s=p,_=z)),w.left(g.at(v+1),g.at(v),g.at(z+1))&&w.rightOn(g.at(v+1),g.at(v),g.at(z))&&(p=S(g.at(v+1),g.at(v),g.at(z),g.at(z+1)),w.left(g.at(v-1),g.at(v),p)&&(u=w.sqdist(g.vertices[v],p))<l&&(l=u,a=p,c=z));if(_==(c+1)%this.vertices.length)p[0]=(s[0]+a[0])/2,p[1]=(s[1]+a[1])/2,i.push(p),v<c?(x.append(g,v,c+1),x.vertices.push(p),m.vertices.push(p),0!=_&&m.append(g,_,g.vertices.length),m.append(g,0,v+1)):(0!=v&&x.append(g,v,g.vertices.length),x.append(g,0,c+1),x.vertices.push(p),m.vertices.push(p),m.append(g,_,v+1));else{if(c<_&&(c+=this.vertices.length),d=Number.MAX_VALUE,c<_)return e;for(z=_;z<=c;++z)w.leftOn(g.at(v-1),g.at(v),g.at(z))&&w.rightOn(g.at(v+1),g.at(v),g.at(z))&&(u=w.sqdist(g.at(v),g.at(z)))<d&&(d=u,y=z%this.vertices.length);v<y?(x.append(g,v,y+1),0!=y&&m.append(g,y,f.length),m.append(g,0,v+1)):(0!=v&&x.append(g,v,f.length),x.append(g,0,y+1),m.append(g,y,v+1))}return x.vertices.length<m.vertices.length?(x.quickDecomp(e,t,i,n,r,o),m.quickDecomp(e,t,i,n,r,o)):(m.quickDecomp(e,t,i,n,r,o),x.quickDecomp(e,t,i,n,r,o)),e}return e.push(this),e},b.prototype.removeCollinearPoints=function(e){for(var t=0,i=this.vertices.length-1;3<this.vertices.length&&0<=i;--i)w.collinear(this.at(i-1),this.at(i),this.at(i+1),e)&&(this.vertices.splice(i%this.vertices.length,1),i--,t++);return t}},{"./Line":1,"./Point":2,"./Scalar":4}],4:[function(e,t,i){function n(){}(t.exports=n).eq=function(e,t,i){return i=i||0,Math.abs(e-t)<i}},{}],5:[function(e,t,i){t.exports={Polygon:e("./Polygon"),Point:e("./Point")}},{"./Point":2,"./Polygon":3}],6:[function(e,t,i){t.exports={name:"p2",version:"0.7.0",description:"A JavaScript 2D physics engine.",author:"Stefan Hedman <schteppe@gmail.com> (http://steffe.se)",keywords:["p2.js","p2","physics","engine","2d"],main:"./src/p2.js",engines:{node:"*"},repository:{type:"git",url:"https://github.com/schteppe/p2.js.git"},bugs:{url:"https://github.com/schteppe/p2.js/issues"},licenses:[{type:"MIT"}],devDependencies:{grunt:"^0.4.5","grunt-contrib-jshint":"^0.11.2","grunt-contrib-nodeunit":"^0.4.1","grunt-contrib-uglify":"~0.4.0","grunt-contrib-watch":"~0.5.0","grunt-browserify":"~2.0.1","grunt-contrib-concat":"^0.4.0"},dependencies:{"poly-decomp":"0.1.0"}}},{}],7:[function(e,t,i){var c=e("../math/vec2");e("../utils/Utils");function n(e){this.lowerBound=c.create(),e&&e.lowerBound&&c.copy(this.lowerBound,e.lowerBound),this.upperBound=c.create(),e&&e.upperBound&&c.copy(this.upperBound,e.upperBound)}t.exports=n;var _=c.create();n.prototype.setFromPoints=function(e,t,i,n){var r=this.lowerBound,o=this.upperBound;"number"!=typeof i&&(i=0),0!==i?c.rotate(r,e[0],i):c.copy(r,e[0]),c.copy(o,r);for(var a=Math.cos(i),s=Math.sin(i),p=1;p<e.length;p++){var l=e[p];if(0!==i){var h=l[0],u=l[1];_[0]=a*h-s*u,_[1]=s*h+a*u,l=_}for(var d=0;d<2;d++)l[d]>o[d]&&(o[d]=l[d]),l[d]<r[d]&&(r[d]=l[d])}t&&(c.add(this.lowerBound,this.lowerBound,t),c.add(this.upperBound,this.upperBound,t)),n&&(this.lowerBound[0]-=n,this.lowerBound[1]-=n,this.upperBound[0]+=n,this.upperBound[1]+=n)},n.prototype.copy=function(e){c.copy(this.lowerBound,e.lowerBound),c.copy(this.upperBound,e.upperBound)},n.prototype.extend=function(e){for(var t=2;t--;){var i=e.lowerBound[t];this.lowerBound[t]>i&&(this.lowerBound[t]=i);var n=e.upperBound[t];this.upperBound[t]<n&&(this.upperBound[t]=n)}},n.prototype.overlaps=function(e){var t=this.lowerBound,i=this.upperBound,n=e.lowerBound,r=e.upperBound;return(n[0]<=i[0]&&i[0]<=r[0]||t[0]<=r[0]&&r[0]<=i[0])&&(n[1]<=i[1]&&i[1]<=r[1]||t[1]<=r[1]&&r[1]<=i[1])},n.prototype.containsPoint=function(e){var t=this.lowerBound,i=this.upperBound;return t[0]<=e[0]&&e[0]<=i[0]&&t[1]<=e[1]&&e[1]<=i[1]},n.prototype.overlapsRay=function(e){var t=1/e.direction[0],i=1/e.direction[1],n=(this.lowerBound[0]-e.from[0])*t,r=(this.upperBound[0]-e.from[0])*t,o=(this.lowerBound[1]-e.from[1])*i,a=(this.upperBound[1]-e.from[1])*i,s=Math.max(Math.max(Math.min(n,r),Math.min(o,a))),p=Math.min(Math.min(Math.max(n,r),Math.max(o,a)));return p<0?-1:p<s?-1:s}},{"../math/vec2":30,"../utils/Utils":57}],8:[function(e,t,i){var r=e("../math/vec2"),o=e("../objects/Body");function n(e){this.type=e,this.result=[],this.world=null,this.boundingVolumeType=n.AABB}(t.exports=n).AABB=1,n.BOUNDING_CIRCLE=2,n.prototype.setWorld=function(e){this.world=e},n.prototype.getCollisionPairs=function(e){};var a=r.create();n.boundingRadiusCheck=function(e,t){r.sub(a,e.position,t.position);var i=r.squaredLength(a),n=e.boundingRadius+t.boundingRadius;return i<=n*n},n.aabbCheck=function(e,t){return e.getAABB().overlaps(t.getAABB())},n.prototype.boundingVolumeCheck=function(e,t){var i;switch(this.boundingVolumeType){case n.BOUNDING_CIRCLE:i=n.boundingRadiusCheck(e,t);break;case n.AABB:i=n.aabbCheck(e,t);break;default:throw new Error("Bounding volume type not recognized: "+this.boundingVolumeType)}return i},n.canCollide=function(e,t){var i=o.KINEMATIC,n=o.STATIC;return(e.type!==n||t.type!==n)&&(!(e.type===i&&t.type===n||e.type===n&&t.type===i)&&((e.type!==i||t.type!==i)&&((e.sleepState!==o.SLEEPING||t.sleepState!==o.SLEEPING)&&!(e.sleepState===o.SLEEPING&&t.type===n||t.sleepState===o.SLEEPING&&e.type===n))))},n.NAIVE=1,n.SAP=2},{"../math/vec2":30,"../objects/Body":31}],9:[function(e,t,i){e("../shapes/Circle"),e("../shapes/Plane"),e("../shapes/Shape"),e("../shapes/Particle");var p=e("../collision/Broadphase");e("../math/vec2");function n(){p.call(this,p.NAIVE)}(((t.exports=n).prototype=new p).constructor=n).prototype.getCollisionPairs=function(e){for(var t=e.bodies,i=this.result,n=i.length=0,r=t.length;n!==r;n++)for(var o=t[n],a=0;a<n;a++){var s=t[a];p.canCollide(o,s)&&this.boundingVolumeCheck(o,s)&&i.push(o,s)}return i},n.prototype.aabbQuery=function(e,t,i){i=i||[];for(var n=e.bodies,r=0;r<n.length;r++){var o=n[r];o.aabbNeedsUpdate&&o.updateAABB(),o.aabb.overlaps(t)&&i.push(o)}return i}},{"../collision/Broadphase":8,"../math/vec2":30,"../shapes/Circle":39,"../shapes/Particle":43,"../shapes/Plane":44,"../shapes/Shape":45}],10:[function(e,t,i){var N=e("../math/vec2"),U=N.sub,V=N.add,H=N.dot,n=(e("../utils/Utils"),e("../utils/ContactEquationPool")),r=e("../utils/FrictionEquationPool"),o=e("../utils/TupleDictionary"),a=e("../equations/Equation"),s=(e("../equations/ContactEquation"),e("../equations/FrictionEquation"),e("../shapes/Circle")),p=e("../shapes/Convex"),l=e("../shapes/Shape"),b=(e("../objects/Body"),e("../shapes/Box"));t.exports=$;var S=N.fromValues(0,1),W=N.fromValues(0,0),q=N.fromValues(0,0),X=N.fromValues(0,0),Y=N.fromValues(0,0),K=N.fromValues(0,0),D=N.fromValues(0,0),Z=N.fromValues(0,0),J=N.fromValues(0,0),Q=N.fromValues(0,0),I=N.fromValues(0,0),L=N.fromValues(0,0),B=N.fromValues(0,0),R=N.fromValues(0,0),F=N.fromValues(0,0),A=N.fromValues(0,0),O=N.fromValues(0,0),k=N.fromValues(0,0),T=N.fromValues(0,0),j=[];function $(){this.contactEquations=[],this.frictionEquations=[],this.enableFriction=!0,this.enabledEquations=!0,this.slipForce=10,this.frictionCoefficient=.3,this.surfaceVelocity=0,this.contactEquationPool=new n({size:32}),this.frictionEquationPool=new r({size:64}),this.restitution=0,this.stiffness=a.DEFAULT_STIFFNESS,this.relaxation=a.DEFAULT_RELAXATION,this.frictionStiffness=a.DEFAULT_STIFFNESS,this.frictionRelaxation=a.DEFAULT_RELAXATION,this.enableFrictionReduction=!0,this.collidingBodiesLastStep=new o,this.contactSkinSize=.01}var h=N.create(),u=N.create();function f(e,t){N.set(e.vertices[0],.5*-t.length,-t.radius),N.set(e.vertices[1],.5*t.length,-t.radius),N.set(e.vertices[2],.5*t.length,t.radius),N.set(e.vertices[3],.5*-t.length,t.radius)}$.prototype.bodiesOverlap=function(e,t){for(var i=h,n=u,r=0,o=e.shapes.length;r!==o;r++){var a=e.shapes[r];e.toWorldFrame(i,a.position);for(var s=0,p=t.shapes.length;s!==p;s++){var l=t.shapes[s];if(t.toWorldFrame(n,l.position),this[a.type|l.type](e,a,i,a.angle+e.angle,t,l,n,l.angle+t.angle,!0))return!0}}return!1},$.prototype.collidedLastStep=function(e,t){var i=0|e.id,n=0|t.id;return!!this.collidingBodiesLastStep.get(i,n)},$.prototype.reset=function(){this.collidingBodiesLastStep.reset();for(var e=this.contactEquations,t=e.length;t--;){var i=e[t],n=i.bodyA.id,r=i.bodyB.id;this.collidingBodiesLastStep.set(n,r,!0)}for(var o=this.contactEquations,a=this.frictionEquations,s=0;s<o.length;s++)this.contactEquationPool.release(o[s]);for(s=0;s<a.length;s++)this.frictionEquationPool.release(a[s]);this.contactEquations.length=this.frictionEquations.length=0},$.prototype.createContactEquation=function(e,t,i,n){var r=this.contactEquationPool.get();return r.bodyA=e,r.bodyB=t,r.shapeA=i,r.shapeB=n,r.restitution=this.restitution,r.firstImpact=!this.collidedLastStep(e,t),r.stiffness=this.stiffness,r.relaxation=this.relaxation,r.needsUpdate=!0,r.enabled=this.enabledEquations,r.offset=this.contactSkinSize,r},$.prototype.createFrictionEquation=function(e,t,i,n){var r=this.frictionEquationPool.get();return r.bodyA=e,r.bodyB=t,r.shapeA=i,r.shapeB=n,r.setSlipForce(this.slipForce),r.frictionCoefficient=this.frictionCoefficient,r.relativeVelocity=this.surfaceVelocity,r.enabled=this.enabledEquations,r.needsUpdate=!0,r.stiffness=this.frictionStiffness,r.relaxation=this.frictionRelaxation,r.contactEquations.length=0,r},$.prototype.createFrictionFromContact=function(e){var t=this.createFrictionEquation(e.bodyA,e.bodyB,e.shapeA,e.shapeB);return N.copy(t.contactPointA,e.contactPointA),N.copy(t.contactPointB,e.contactPointB),N.rotate90cw(t.t,e.normalA),t.contactEquations.push(e),t},$.prototype.createFrictionFromAverage=function(e){var t=this.contactEquations[this.contactEquations.length-1],i=this.createFrictionEquation(t.bodyA,t.bodyB,t.shapeA,t.shapeB),n=t.bodyA;t.bodyB;N.set(i.contactPointA,0,0),N.set(i.contactPointB,0,0),N.set(i.t,0,0);for(var r=0;r!==e;r++)(t=this.contactEquations[this.contactEquations.length-1-r]).bodyA===n?(N.add(i.t,i.t,t.normalA),N.add(i.contactPointA,i.contactPointA,t.contactPointA),N.add(i.contactPointB,i.contactPointB,t.contactPointB)):(N.sub(i.t,i.t,t.normalA),N.add(i.contactPointA,i.contactPointA,t.contactPointB),N.add(i.contactPointB,i.contactPointB,t.contactPointA)),i.contactEquations.push(t);var o=1/e;return N.scale(i.contactPointA,i.contactPointA,o),N.scale(i.contactPointB,i.contactPointB,o),N.normalize(i.t,i.t),N.rotate90cw(i.t,i.t),i},$.prototype[l.LINE|l.CONVEX]=$.prototype.convexLine=function(e,t,i,n,r,o,a,s,p){return!p&&0},$.prototype[l.LINE|l.BOX]=$.prototype.lineBox=function(e,t,i,n,r,o,a,s,p){return!p&&0};var c=new b({width:1,height:1}),_=N.create();$.prototype[l.CAPSULE|l.CONVEX]=$.prototype[l.CAPSULE|l.BOX]=$.prototype.convexCapsule=function(e,t,i,n,r,o,a,s,p){var l=_;N.set(l,o.length/2,0),N.rotate(l,l,s),N.add(l,l,a);var h=this.circleConvex(r,o,l,s,e,t,i,n,p,o.radius);N.set(l,-o.length/2,0),N.rotate(l,l,s),N.add(l,l,a);var u=this.circleConvex(r,o,l,s,e,t,i,n,p,o.radius);if(p&&(h||u))return!0;var d=c;return f(d,o),this.convexConvex(e,t,i,n,r,d,a,s,p)+h+u},$.prototype[l.CAPSULE|l.LINE]=$.prototype.lineCapsule=function(e,t,i,n,r,o,a,s,p){return!p&&0};var v=N.create(),z=N.create(),w=new b({width:1,height:1});$.prototype[l.CAPSULE|l.CAPSULE]=$.prototype.capsuleCapsule=function(e,t,i,n,r,o,a,s,p){for(var l=v,h=z,u=0,d=0;d<2;d++){N.set(l,(0===d?-1:1)*t.length/2,0),N.rotate(l,l,n),N.add(l,l,i);for(var c=0;c<2;c++){N.set(h,(0===c?-1:1)*o.length/2,0),N.rotate(h,h,s),N.add(h,h,a),this.enableFrictionReduction&&(m=this.enableFriction,this.enableFriction=!1);var _=this.circleCircle(e,t,l,n,r,o,h,s,p,t.radius,o.radius);if(this.enableFrictionReduction&&(this.enableFriction=m),p&&_)return!0;u+=_}}this.enableFrictionReduction&&(m=this.enableFriction,this.enableFriction=!1);var y=w;f(y,t);var x=this.convexCapsule(e,y,i,n,r,o,a,s,p);if(this.enableFrictionReduction&&(this.enableFriction=m),p&&x)return!0;if(u+=x,this.enableFrictionReduction){var m=this.enableFriction;this.enableFriction=!1}f(y,o);var g=this.convexCapsule(r,y,a,s,e,t,i,n,p);return this.enableFrictionReduction&&(this.enableFriction=m),!(!p||!g)||(u+=g,this.enableFrictionReduction&&u&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(u)),u)},$.prototype[l.LINE|l.LINE]=$.prototype.lineLine=function(e,t,i,n,r,o,a,s,p){return!p&&0},$.prototype[l.PLANE|l.LINE]=$.prototype.planeLine=function(e,t,i,n,r,o,a,s,p){var l=W,h=q,u=X,d=Y,c=K,_=D,y=Z,x=J,m=Q,g=j,f=0;N.set(l,-o.length/2,0),N.set(h,o.length/2,0),N.rotate(u,l,s),N.rotate(d,h,s),V(u,u,a),V(d,d,a),N.copy(l,u),N.copy(h,d),U(c,h,l),N.normalize(_,c),N.rotate90cw(m,_),N.rotate(x,S,n),g[0]=l,g[1]=h;for(var v=0;v<g.length;v++){var z=g[v];U(y,z,i);var w=H(y,x);if(w<0){if(p)return!0;var b=this.createContactEquation(e,r,t,o);f++,N.copy(b.normalA,x),N.normalize(b.normalA,b.normalA),N.scale(y,x,w),U(b.contactPointA,z,y),U(b.contactPointA,b.contactPointA,e.position),U(b.contactPointB,z,a),V(b.contactPointB,b.contactPointB,a),U(b.contactPointB,b.contactPointB,r.position),this.contactEquations.push(b),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(b))}}return!p&&(this.enableFrictionReduction||f&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(f)),f)},$.prototype[l.PARTICLE|l.CAPSULE]=$.prototype.particleCapsule=function(e,t,i,n,r,o,a,s,p){return this.circleLine(e,t,i,n,r,o,a,s,p,o.radius,0)},$.prototype[l.CIRCLE|l.LINE]=$.prototype.circleLine=function(e,t,i,n,r,o,a,s,p,l,h){l=l||0,h=void 0!==h?h:t.radius;var u=W,d=q,c=X,_=Y,y=K,x=D,m=Z,g=J,f=Q,v=I,z=L,w=B,b=R,S=F,C=j;N.set(g,-o.length/2,0),N.set(f,o.length/2,0),N.rotate(v,g,s),N.rotate(z,f,s),V(v,v,a),V(z,z,a),N.copy(g,v),N.copy(f,z),U(x,f,g),N.normalize(m,x),N.rotate90cw(y,m),U(w,i,g);var M=H(w,y);U(_,g,a),U(b,i,a);var P=h+l;if(Math.abs(M)<P){N.scale(u,y,M),U(c,i,u),N.scale(d,y,H(y,b)),N.normalize(d,d),N.scale(d,d,l),V(c,c,d);var k=H(m,c),T=H(m,g),A=H(m,f);if(T<k&&k<A){if(p)return!0;var O=this.createContactEquation(e,r,t,o);return N.scale(O.normalA,u,-1),N.normalize(O.normalA,O.normalA),N.scale(O.contactPointA,O.normalA,h),V(O.contactPointA,O.contactPointA,i),U(O.contactPointA,O.contactPointA,e.position),U(O.contactPointB,c,a),V(O.contactPointB,O.contactPointB,a),U(O.contactPointB,O.contactPointB,r.position),this.contactEquations.push(O),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(O)),1}}C[0]=g,C[1]=f;for(var E=0;E<C.length;E++){var G=C[E];if(U(w,G,i),N.squaredLength(w)<Math.pow(P,2)){if(p)return!0;O=this.createContactEquation(e,r,t,o);return N.copy(O.normalA,w),N.normalize(O.normalA,O.normalA),N.scale(O.contactPointA,O.normalA,h),V(O.contactPointA,O.contactPointA,i),U(O.contactPointA,O.contactPointA,e.position),U(O.contactPointB,G,a),N.scale(S,O.normalA,-l),V(O.contactPointB,O.contactPointB,S),V(O.contactPointB,O.contactPointB,a),U(O.contactPointB,O.contactPointB,r.position),this.contactEquations.push(O),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(O)),1}}return 0},$.prototype[l.CIRCLE|l.CAPSULE]=$.prototype.circleCapsule=function(e,t,i,n,r,o,a,s,p){return this.circleLine(e,t,i,n,r,o,a,s,p,o.radius)},$.prototype[l.CIRCLE|l.CONVEX]=$.prototype[l.CIRCLE|l.BOX]=$.prototype.circleConvex=function(e,t,i,n,r,o,a,s,p,l){l="number"==typeof l?l:t.radius;for(var h=W,u=q,d=X,c=Y,_=K,y=I,x=L,m=R,g=F,f=A,v=O,z=!1,w=Number.MAX_VALUE,b=o.vertices,S=0;S!==b.length+1;S++){var C=b[S%b.length],M=b[(S+1)%b.length];if(N.rotate(h,C,s),N.rotate(u,M,s),V(h,h,a),V(u,u,a),U(d,u,h),N.normalize(c,d),N.rotate90cw(_,c),N.scale(g,_,-t.radius),V(g,g,i),E(g,o,a,s)){N.sub(f,h,g);var P=Math.abs(N.dot(f,_));P<w&&(N.copy(v,g),w=P,N.scale(m,_,P),N.add(m,m,g),z=!0)}}if(z){if(p)return!0;var k=this.createContactEquation(e,r,t,o);return N.sub(k.normalA,v,i),N.normalize(k.normalA,k.normalA),N.scale(k.contactPointA,k.normalA,l),V(k.contactPointA,k.contactPointA,i),U(k.contactPointA,k.contactPointA,e.position),U(k.contactPointB,m,a),V(k.contactPointB,k.contactPointB,a),U(k.contactPointB,k.contactPointB,r.position),this.contactEquations.push(k),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(k)),1}if(0<l)for(S=0;S<b.length;S++){var T=b[S];if(N.rotate(x,T,s),V(x,x,a),U(y,x,i),N.squaredLength(y)<Math.pow(l,2)){if(p)return!0;k=this.createContactEquation(e,r,t,o);return N.copy(k.normalA,y),N.normalize(k.normalA,k.normalA),N.scale(k.contactPointA,k.normalA,l),V(k.contactPointA,k.contactPointA,i),U(k.contactPointA,k.contactPointA,e.position),U(k.contactPointB,x,a),V(k.contactPointB,k.contactPointB,a),U(k.contactPointB,k.contactPointB,r.position),this.contactEquations.push(k),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(k)),1}}return 0};var y=N.create(),x=N.create(),m=N.create(),g=N.create();function E(e,t,i,n){for(var r=y,o=x,a=m,s=g,p=e,l=t.vertices,h=null,u=0;u!==l.length+1;u++){var d=l[u%l.length],c=l[(u+1)%l.length];N.rotate(r,d,n),N.rotate(o,c,n),V(r,r,i),V(o,o,i),U(a,r,p),U(s,o,p);var _=N.crossLength(a,s);if(null===h&&(h=_),_*h<=0)return!1;h=_}return!0}$.prototype[l.PARTICLE|l.CONVEX]=$.prototype[l.PARTICLE|l.BOX]=$.prototype.particleConvex=function(e,t,i,n,r,o,a,s,p){var l=W,h=q,u=X,d=Y,c=K,_=D,y=Z,x=I,m=R,g=k,f=T,v=Number.MAX_VALUE,z=!1,w=o.vertices;if(!E(i,o,a,s))return 0;if(p)return!0;for(var b=0;b!==w.length+1;b++){var S=w[b%w.length],C=w[(b+1)%w.length];N.rotate(l,S,s),N.rotate(h,C,s),V(l,l,a),V(h,h,a),U(u,h,l),N.normalize(d,u),N.rotate90cw(c,d),U(x,i,l);H(x,c);U(_,l,a),U(y,i,a),N.sub(g,l,i);var M=Math.abs(N.dot(g,c));M<v&&(v=M,N.scale(m,c,M),N.add(m,m,i),N.copy(f,c),z=!0)}if(z){var P=this.createContactEquation(e,r,t,o);return N.scale(P.normalA,f,-1),N.normalize(P.normalA,P.normalA),N.set(P.contactPointA,0,0),V(P.contactPointA,P.contactPointA,i),U(P.contactPointA,P.contactPointA,e.position),U(P.contactPointB,m,a),V(P.contactPointB,P.contactPointB,a),U(P.contactPointB,P.contactPointB,r.position),this.contactEquations.push(P),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(P)),1}return 0},$.prototype[l.CIRCLE]=$.prototype.circleCircle=function(e,t,i,n,r,o,a,s,p,l,h){var u=W;l=l||t.radius,h=h||o.radius;U(u,i,a);var d=l+h;if(N.squaredLength(u)>Math.pow(d,2))return 0;if(p)return!0;var c=this.createContactEquation(e,r,t,o);return U(c.normalA,a,i),N.normalize(c.normalA,c.normalA),N.scale(c.contactPointA,c.normalA,l),N.scale(c.contactPointB,c.normalA,-h),V(c.contactPointA,c.contactPointA,i),U(c.contactPointA,c.contactPointA,e.position),V(c.contactPointB,c.contactPointB,a),U(c.contactPointB,c.contactPointB,r.position),this.contactEquations.push(c),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(c)),1},$.prototype[l.PLANE|l.CONVEX]=$.prototype[l.PLANE|l.BOX]=$.prototype.planeConvex=function(e,t,i,n,r,o,a,s,p){var l=W,h=q,u=X,d=0;N.rotate(h,S,n);for(var c=0;c!==o.vertices.length;c++){var _=o.vertices[c];if(N.rotate(l,_,s),V(l,l,a),U(u,l,i),H(u,h)<=0){if(p)return!0;d++;var y=this.createContactEquation(e,r,t,o);U(u,l,i),N.copy(y.normalA,h);var x=H(u,y.normalA);N.scale(u,y.normalA,x),U(y.contactPointB,l,r.position),U(y.contactPointA,l,u),U(y.contactPointA,y.contactPointA,e.position),this.contactEquations.push(y),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(y))}}return this.enableFrictionReduction&&this.enableFriction&&d&&this.frictionEquations.push(this.createFrictionFromAverage(d)),d},$.prototype[l.PARTICLE|l.PLANE]=$.prototype.particlePlane=function(e,t,i,n,r,o,a,s,p){var l=W,h=q;s=s||0,U(l,i,a),N.rotate(h,S,s);var u=H(l,h);if(0<u)return 0;if(p)return!0;var d=this.createContactEquation(r,e,o,t);return N.copy(d.normalA,h),N.scale(l,d.normalA,u),U(d.contactPointA,i,l),U(d.contactPointA,d.contactPointA,r.position),U(d.contactPointB,i,e.position),this.contactEquations.push(d),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(d)),1},$.prototype[l.CIRCLE|l.PARTICLE]=$.prototype.circleParticle=function(e,t,i,n,r,o,a,s,p){var l=W;if(U(l,a,i),N.squaredLength(l)>Math.pow(t.radius,2))return 0;if(p)return!0;var h=this.createContactEquation(e,r,t,o);return N.copy(h.normalA,l),N.normalize(h.normalA,h.normalA),N.scale(h.contactPointA,h.normalA,t.radius),V(h.contactPointA,h.contactPointA,i),U(h.contactPointA,h.contactPointA,e.position),U(h.contactPointB,a,r.position),this.contactEquations.push(h),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(h)),1};var C=new s({radius:1}),M=N.create(),P=N.create();N.create();$.prototype[l.PLANE|l.CAPSULE]=$.prototype.planeCapsule=function(e,t,i,n,r,o,a,s,p){var l,h=M,u=P,d=C;N.set(h,-o.length/2,0),N.rotate(h,h,s),V(h,h,a),N.set(u,o.length/2,0),N.rotate(u,u,s),V(u,u,a),d.radius=o.radius,this.enableFrictionReduction&&(l=this.enableFriction,this.enableFriction=!1);var c=this.circlePlane(r,d,h,0,e,t,i,n,p),_=this.circlePlane(r,d,u,0,e,t,i,n,p);if(this.enableFrictionReduction&&(this.enableFriction=l),p)return c||_;var y=c+_;return this.enableFrictionReduction&&y&&this.frictionEquations.push(this.createFrictionFromAverage(y)),y},$.prototype[l.CIRCLE|l.PLANE]=$.prototype.circlePlane=function(e,t,i,n,r,o,a,s,p){var l=e,h=t,u=i,d=r,c=a,_=s;_=_||0;var y=W,x=q,m=X;U(y,u,c),N.rotate(x,S,_);var g=H(x,y);if(g>h.radius)return 0;if(p)return!0;var f=this.createContactEquation(d,l,o,t);return N.copy(f.normalA,x),N.scale(f.contactPointB,f.normalA,-h.radius),V(f.contactPointB,f.contactPointB,u),U(f.contactPointB,f.contactPointB,l.position),N.scale(m,f.normalA,g),U(f.contactPointA,y,m),V(f.contactPointA,f.contactPointA,c),U(f.contactPointA,f.contactPointA,d.position),this.contactEquations.push(f),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(f)),1},$.prototype[l.CONVEX]=$.prototype[l.CONVEX|l.BOX]=$.prototype[l.BOX]=$.prototype.convexConvex=function(e,t,i,n,r,o,a,s,p,l){var h=W,u=q,d=X,c=Y,_=K,y=Z,x=J,m=Q,g=0;l="number"==typeof l?l:0;if(!$.findSeparatingAxis(t,i,n,o,a,s,h))return 0;U(x,a,i),0<H(h,x)&&N.scale(h,h,-1);var f=$.getClosestEdge(t,n,h,!0),v=$.getClosestEdge(o,s,h);if(-1===f||-1===v)return 0;for(var z=0;z<2;z++){var w,b=f,S=v,C=t,M=o,P=i,k=a,T=n,A=s,O=e,E=r;if(0===z)w=b,b=S,S=w,w=C,C=M,M=w,w=P,P=k,k=w,w=T,T=A,A=w,w=O,O=E,E=w;for(var G=S;G<S+2;G++){var D=M.vertices[(G+M.vertices.length)%M.vertices.length];N.rotate(u,D,A),V(u,u,k);for(var I=0,L=b-1;L<b+2;L++){var B=C.vertices[(L+C.vertices.length)%C.vertices.length],R=C.vertices[(L+1+C.vertices.length)%C.vertices.length];N.rotate(d,B,T),N.rotate(c,R,T),V(d,d,P),V(c,c,P),U(_,c,d),N.rotate90cw(m,_),N.normalize(m,m),U(x,u,d);var F=H(m,x);(L===b&&F<=l||L!==b&&F<=0)&&I++}if(3<=I){if(p)return!0;var j=this.createContactEquation(O,E,C,M);g++;B=C.vertices[b%C.vertices.length],R=C.vertices[(b+1)%C.vertices.length];N.rotate(d,B,T),N.rotate(c,R,T),V(d,d,P),V(c,c,P),U(_,c,d),N.rotate90cw(j.normalA,_),N.normalize(j.normalA,j.normalA),U(x,u,d);F=H(j.normalA,x);N.scale(y,j.normalA,F),U(j.contactPointA,u,P),U(j.contactPointA,j.contactPointA,y),V(j.contactPointA,j.contactPointA,P),U(j.contactPointA,j.contactPointA,O.position),U(j.contactPointB,u,k),V(j.contactPointB,j.contactPointB,k),U(j.contactPointB,j.contactPointB,E.position),this.contactEquations.push(j),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(j))}}}return this.enableFrictionReduction&&this.enableFriction&&g&&this.frictionEquations.push(this.createFrictionFromAverage(g)),g};var G=N.fromValues(0,0);$.projectConvexOntoAxis=function(e,t,i,n,r){var o,a,s=null,p=null,l=G;N.rotate(l,n,-i);for(var h=0;h<e.vertices.length;h++)o=e.vertices[h],a=H(o,l),(null===s||s<a)&&(s=a),(null===p||a<p)&&(p=a);if(s<p){var u=p;p=s,s=u}var d=H(t,n);N.set(r,p+d,s+d)};var ee=N.fromValues(0,0),te=N.fromValues(0,0),ie=N.fromValues(0,0),ne=N.fromValues(0,0),re=N.fromValues(0,0),oe=N.fromValues(0,0);$.findSeparatingAxis=function(e,t,i,n,r,o,a){var s=null,p=!1,l=!1,h=ee,u=te,d=ie,c=ne,_=re,y=oe;if(e instanceof b&&n instanceof b)for(var x=0;2!==x;x++){var m=e,g=i;1===x&&(m=n,g=o);for(var f=0;2!==f;f++){0===f?N.set(c,0,1):1===f&&N.set(c,1,0),0!==g&&N.rotate(c,c,g),$.projectConvexOntoAxis(e,t,i,c,_),$.projectConvexOntoAxis(n,r,o,c,y);var v=_,z=y;_[0]>y[0]&&(z=_,v=y,!0),p=(w=z[0]-v[1])<=0,(null===s||s<w)&&(N.copy(a,c),s=w,l=p)}}else for(x=0;2!==x;x++){m=e,g=i;1===x&&(m=n,g=o);for(f=0;f!==m.vertices.length;f++){N.rotate(u,m.vertices[f],g),N.rotate(d,m.vertices[(f+1)%m.vertices.length],g),U(h,d,u),N.rotate90cw(c,h),N.normalize(c,c),$.projectConvexOntoAxis(e,t,i,c,_),$.projectConvexOntoAxis(n,r,o,c,y);var w;v=_,z=y;_[0]>y[0]&&(z=_,v=y,!0),p=(w=z[0]-v[1])<=0,(null===s||s<w)&&(N.copy(a,c),s=w,l=p)}}return l};var d=N.fromValues(0,0),ae=N.fromValues(0,0),se=N.fromValues(0,0);$.getClosestEdge=function(e,t,i,n){var r=d,o=ae,a=se;N.rotate(r,i,-t),n&&N.scale(r,r,-1);for(var s=-1,p=e.vertices.length,l=-1,h=0;h!==p;h++){U(o,e.vertices[(h+1)%p],e.vertices[h%p]),N.rotate90cw(a,o),N.normalize(a,a);var u=H(a,r);(-1===s||l<u)&&(s=h%p,l=u)}return s};var pe=N.create(),le=N.create(),he=N.create(),ue=N.create(),de=N.create(),ce=N.create(),_e=N.create();$.prototype[l.CIRCLE|l.HEIGHTFIELD]=$.prototype.circleHeightfield=function(e,t,i,n,r,o,a,s,p,l){var h=o.heights,u=(l=l||t.radius,o.elementWidth),d=le,c=pe,_=de,y=_e,x=ce,m=he,g=ue,f=Math.floor((i[0]-l-a[0])/u),v=Math.ceil((i[0]+l-a[0])/u);f<0&&(f=0),v>=h.length&&(v=h.length-1);for(var z=h[f],w=h[v],b=f;b<v;b++)h[b]<w&&(w=h[b]),h[b]>z&&(z=h[b]);if(i[1]-l>z)return!p&&0;var S=!1;for(b=f;b<v;b++){N.set(m,b*u,h[b]),N.set(g,(b+1)*u,h[b+1]),N.add(m,m,a),N.add(g,g,a),N.sub(x,g,m),N.rotate(x,x,Math.PI/2),N.normalize(x,x),N.scale(c,x,-l),N.add(c,c,i),N.sub(d,c,m);var C=N.dot(d,x);if(c[0]>=m[0]&&c[0]<g[0]&&C<=0){if(p)return!0;S=!0,N.scale(d,x,-C),N.add(_,c,d),N.copy(y,x);var M=this.createContactEquation(r,e,o,t);N.copy(M.normalA,y),N.scale(M.contactPointB,M.normalA,-l),V(M.contactPointB,M.contactPointB,i),U(M.contactPointB,M.contactPointB,e.position),N.copy(M.contactPointA,_),N.sub(M.contactPointA,M.contactPointA,r.position),this.contactEquations.push(M),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(M))}}if(S=!1,0<l)for(b=f;b<=v;b++)if(N.set(m,b*u,h[b]),N.add(m,m,a),N.sub(d,i,m),N.squaredLength(d)<Math.pow(l,2)){if(p)return!0;S=!0;M=this.createContactEquation(r,e,o,t);N.copy(M.normalA,d),N.normalize(M.normalA,M.normalA),N.scale(M.contactPointB,M.normalA,-l),V(M.contactPointB,M.contactPointB,i),U(M.contactPointB,M.contactPointB,e.position),U(M.contactPointA,m,a),V(M.contactPointA,M.contactPointA,a),U(M.contactPointA,M.contactPointA,r.position),this.contactEquations.push(M),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(M))}return S?1:0};var ye=N.create(),xe=N.create(),me=N.create(),ge=new p({vertices:[N.create(),N.create(),N.create(),N.create()]});$.prototype[l.BOX|l.HEIGHTFIELD]=$.prototype[l.CONVEX|l.HEIGHTFIELD]=$.prototype.convexHeightfield=function(e,t,i,n,r,o,a,s,p){var l=o.heights,h=o.elementWidth,u=ye,d=xe,c=me,_=ge,y=Math.floor((e.aabb.lowerBound[0]-a[0])/h),x=Math.ceil((e.aabb.upperBound[0]-a[0])/h);y<0&&(y=0),x>=l.length&&(x=l.length-1);for(var m=l[y],g=l[x],f=y;f<x;f++)l[f]<g&&(g=l[f]),l[f]>m&&(m=l[f]);if(e.aabb.lowerBound[1]>m)return!p&&0;var v=0;for(f=y;f<x;f++){N.set(u,f*h,l[f]),N.set(d,(f+1)*h,l[f+1]),N.add(u,u,a),N.add(d,d,a);N.set(c,.5*(d[0]+u[0]),.5*(d[1]+u[1]-100)),N.sub(_.vertices[0],d,c),N.sub(_.vertices[1],u,c),N.copy(_.vertices[2],_.vertices[1]),N.copy(_.vertices[3],_.vertices[0]),_.vertices[2][1]-=100,_.vertices[3][1]-=100,v+=this.convexConvex(e,t,i,n,r,_,c,0,p)}return v}},{"../equations/ContactEquation":21,"../equations/Equation":22,"../equations/FrictionEquation":23,"../math/vec2":30,"../objects/Body":31,"../shapes/Box":37,"../shapes/Circle":39,"../shapes/Convex":40,"../shapes/Shape":45,"../utils/ContactEquationPool":48,"../utils/FrictionEquationPool":49,"../utils/TupleDictionary":56,"../utils/Utils":57}],11:[function(e,t,i){t.exports=a;var p=e("../math/vec2");e("../collision/RaycastResult"),e("../shapes/Shape"),e("../collision/AABB");function a(e){e=e||{},this.from=e.from?p.fromValues(e.from[0],e.from[1]):p.create(),this.to=e.to?p.fromValues(e.to[0],e.to[1]):p.create(),this.checkCollisionResponse=void 0===e.checkCollisionResponse||e.checkCollisionResponse,this.skipBackfaces=!!e.skipBackfaces,this.collisionMask=void 0!==e.collisionMask?e.collisionMask:-1,this.collisionGroup=void 0!==e.collisionGroup?e.collisionGroup:-1,this.mode=void 0!==e.mode?e.mode:a.ANY,this.callback=e.callback||function(e){},this.direction=p.create(),this.length=1,this.update()}(a.prototype.constructor=a).CLOSEST=1,a.ANY=2,a.ALL=4,a.prototype.update=function(){var e=this.direction;p.sub(e,this.to,this.from),this.length=p.length(e),p.normalize(e,e)},a.prototype.intersectBodies=function(e,t){for(var i=0,n=t.length;!e.shouldStop(this)&&i<n;i++){var r=t[i],o=r.getAABB();(0<=o.overlapsRay(this)||o.containsPoint(this.from))&&this.intersectBody(e,r)}};var l=p.create();a.prototype.intersectBody=function(e,t){var i=this.checkCollisionResponse;if(!i||t.collisionResponse)for(var n=l,r=0,o=t.shapes.length;r<o;r++){var a=t.shapes[r];if((!i||a.collisionResponse)&&(0!=(this.collisionGroup&a.collisionMask)&&0!=(a.collisionGroup&this.collisionMask))){p.rotate(n,a.position,t.angle),p.add(n,n,t.position);var s=a.angle+t.angle;if(this.intersectShape(e,a,s,n,t),e.shouldStop(this))break}}},a.prototype.intersectShape=function(e,t,i,n,r){(function(e,t,i){p.sub(o,i,e);var n=p.dot(o,t);return p.scale(s,t,n),p.add(s,s,e),p.squaredDistance(i,s)})(this.from,this.direction,n)>t.boundingRadius*t.boundingRadius||(this._currentBody=r,(this._currentShape=t).raycast(e,this,n,i),this._currentBody=this._currentShape=null)},a.prototype.getAABB=function(e){var t=this.to,i=this.from;p.set(e.lowerBound,Math.min(t[0],i[0]),Math.min(t[1],i[1])),p.set(e.upperBound,Math.max(t[0],i[0]),Math.max(t[1],i[1]))};p.create();a.prototype.reportIntersection=function(e,t,i,n){this.from,this.to;var r=this._currentShape,o=this._currentBody;if(!(this.skipBackfaces&&0<p.dot(i,this.direction)))switch(this.mode){case a.ALL:e.set(i,r,o,t,n),this.callback(e);break;case a.CLOSEST:(t<e.fraction||!e.hasHit())&&e.set(i,r,o,t,n);break;case a.ANY:e.set(i,r,o,t,n)}};var o=p.create(),s=p.create()},{"../collision/AABB":7,"../collision/RaycastResult":12,"../math/vec2":30,"../shapes/Shape":45}],12:[function(e,t,i){var o=e("../math/vec2"),n=e("../collision/Ray");function r(){this.normal=o.create(),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1}(t.exports=r).prototype.reset=function(){o.set(this.normal,0,0),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1},r.prototype.getHitDistance=function(e){return o.distance(e.from,e.to)*this.fraction},r.prototype.hasHit=function(){return-1!==this.fraction},r.prototype.getHitPoint=function(e,t){o.lerp(e,t.from,t.to,this.fraction)},r.prototype.stop=function(){this.isStopped=!0},r.prototype.shouldStop=function(e){return this.isStopped||-1!==this.fraction&&e.mode===n.ANY},r.prototype.set=function(e,t,i,n,r){o.copy(this.normal,e),this.shape=t,this.body=i,this.fraction=n,this.faceIndex=r}},{"../collision/Ray":11,"../math/vec2":30}],13:[function(e,t,i){var n=e("../utils/Utils"),u=e("../collision/Broadphase");function r(){u.call(this,u.SAP),this.axisList=[],this.axisIndex=0;var i=this;this._addBodyHandler=function(e){i.axisList.push(e.body)},this._removeBodyHandler=function(e){var t=i.axisList.indexOf(e.body);-1!==t&&i.axisList.splice(t,1)}}(((t.exports=r).prototype=new u).constructor=r).prototype.setWorld=function(e){this.axisList.length=0,n.appendArray(this.axisList,e.bodies),e.off("addBody",this._addBodyHandler).off("removeBody",this._removeBodyHandler),e.on("addBody",this._addBodyHandler).on("removeBody",this._removeBodyHandler),this.world=e},r.sortAxisList=function(e,t){t|=0;for(var i=1,n=e.length;i<n;i++){for(var r=e[i],o=i-1;0<=o&&!(e[o].aabb.lowerBound[t]<=r.aabb.lowerBound[t]);o--)e[o+1]=e[o];e[o+1]=r}return e},r.prototype.sortList=function(){var e=this.axisList,t=this.axisIndex;r.sortAxisList(e,t)},r.prototype.getCollisionPairs=function(e){var t=this.axisList,i=this.result,n=this.axisIndex;i.length=0;for(var r=t.length;r--;){var o=t[r];o.aabbNeedsUpdate&&o.updateAABB()}this.sortList();for(var a=0,s=0|t.length;a!==s;a++)for(var p=t[a],l=a+1;l<s;l++){var h=t[l];if(!(h.aabb.lowerBound[n]<=p.aabb.upperBound[n]))break;u.canCollide(p,h)&&this.boundingVolumeCheck(p,h)&&i.push(p,h)}return i},r.prototype.aabbQuery=function(e,t,i){i=i||[],this.sortList();var n=this.axisIndex,r="x";1===n&&(r="y"),2===n&&(r="z");for(var o=this.axisList,a=(t.lowerBound[r],t.upperBound[r],0);a<o.length;a++){var s=o[a];s.aabbNeedsUpdate&&s.updateAABB(),s.aabb.overlaps(t)&&i.push(s)}return i}},{"../collision/Broadphase":8,"../utils/Utils":57}],14:[function(e,t,i){t.exports=n;var r=e("../utils/Utils");function n(e,t,i,n){this.type=i,n=r.defaults(n,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=e,this.bodyB=t,this.collideConnected=n.collideConnected,n.wakeUpBodies&&(e&&e.wakeUp(),t&&t.wakeUp())}n.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!")},n.DISTANCE=1,n.GEAR=2,n.LOCK=3,n.PRISMATIC=4,n.REVOLUTE=5,n.prototype.setStiffness=function(e){for(var t=this.equations,i=0;i!==t.length;i++){var n=t[i];n.stiffness=e,n.needsUpdate=!0}},n.prototype.setRelaxation=function(e){for(var t=this.equations,i=0;i!==t.length;i++){var n=t[i];n.relaxation=e,n.needsUpdate=!0}}},{"../utils/Utils":57}],15:[function(e,t,i){var c=e("./Constraint"),_=e("../equations/Equation"),y=e("../math/vec2"),x=e("../utils/Utils");function n(e,t,i){i=x.defaults(i,{localAnchorA:[0,0],localAnchorB:[0,0]}),c.call(this,e,t,c.DISTANCE,i),this.localAnchorA=y.fromValues(i.localAnchorA[0],i.localAnchorA[1]),this.localAnchorB=y.fromValues(i.localAnchorB[0],i.localAnchorB[1]);var n,r=this.localAnchorA,o=this.localAnchorB;if(this.distance=0,"number"==typeof i.distance)this.distance=i.distance;else{var a=y.create(),s=y.create(),p=y.create();y.rotate(a,r,e.angle),y.rotate(s,o,t.angle),y.add(p,t.position,s),y.sub(p,p,a),y.sub(p,p,e.position),this.distance=y.length(p)}n=void 0===i.maxForce?Number.MAX_VALUE:i.maxForce;var l=new _(e,t,-n,n);this.equations=[l],this.maxForce=n;p=y.create();var h=y.create(),u=y.create(),d=this;l.computeGq=function(){var e=this.bodyA,t=this.bodyB,i=e.position,n=t.position;return y.rotate(h,r,e.angle),y.rotate(u,o,t.angle),y.add(p,n,u),y.sub(p,p,h),y.sub(p,p,i),y.length(p)-d.distance},this.setMaxForce(n),this.upperLimitEnabled=!1,this.upperLimit=1,this.lowerLimitEnabled=!1,this.lowerLimit=0,this.position=0}((t.exports=n).prototype=new c).constructor=n;var h=y.create(),u=y.create(),d=y.create();n.prototype.update=function(){var e=this.equations[0],t=this.bodyA,i=this.bodyB,n=(this.distance,t.position),r=i.position,o=this.equations[0],a=e.G;y.rotate(u,this.localAnchorA,t.angle),y.rotate(d,this.localAnchorB,i.angle),y.add(h,r,d),y.sub(h,h,u),y.sub(h,h,n),this.position=y.length(h);var s=!1;if(this.upperLimitEnabled&&this.position>this.upperLimit&&(o.maxForce=0,o.minForce=-this.maxForce,this.distance=this.upperLimit,s=!0),this.lowerLimitEnabled&&this.position<this.lowerLimit&&(o.maxForce=this.maxForce,o.minForce=0,this.distance=this.lowerLimit,s=!0),!this.lowerLimitEnabled&&!this.upperLimitEnabled||s){o.enabled=!0,y.normalize(h,h);var p=y.crossLength(u,h),l=y.crossLength(d,h);a[0]=-h[0],a[1]=-h[1],a[2]=-p,a[3]=h[0],a[4]=h[1],a[5]=l}else o.enabled=!1},n.prototype.setMaxForce=function(e){var t=this.equations[0];t.minForce=-e,t.maxForce=e},n.prototype.getMaxForce=function(){return this.equations[0].maxForce}},{"../equations/Equation":22,"../math/vec2":30,"../utils/Utils":57,"./Constraint":14}],16:[function(e,t,i){var n=e("./Constraint"),r=(e("../equations/Equation"),e("../equations/AngleLockEquation"));e("../math/vec2");function o(e,t,i){i=i||{},n.call(this,e,t,n.GEAR,i),this.ratio=void 0!==i.ratio?i.ratio:1,this.angle=void 0!==i.angle?i.angle:t.angle-this.ratio*e.angle,i.angle=this.angle,i.ratio=this.ratio,this.equations=[new r(e,t,i)],void 0!==i.maxTorque&&this.setMaxTorque(i.maxTorque)}(((t.exports=o).prototype=new n).constructor=o).prototype.update=function(){var e=this.equations[0];e.ratio!==this.ratio&&e.setRatio(this.ratio),e.angle=this.angle},o.prototype.setMaxTorque=function(e){this.equations[0].setMaxTorque(e)},o.prototype.getMaxTorque=function(e){return this.equations[0].maxForce}},{"../equations/AngleLockEquation":20,"../equations/Equation":22,"../math/vec2":30,"./Constraint":14}],17:[function(e,t,i){var d=e("./Constraint"),c=e("../math/vec2"),_=e("../equations/Equation");function n(e,t,i){i=i||{},d.call(this,e,t,d.LOCK,i);var n=void 0===i.maxForce?Number.MAX_VALUE:i.maxForce,r=(i.localAngleB,new _(e,t,-n,n)),o=new _(e,t,-n,n),a=new _(e,t,-n,n),s=c.create(),p=c.create(),l=this;r.computeGq=function(){return c.rotate(s,l.localOffsetB,e.angle),c.sub(p,t.position,e.position),c.sub(p,p,s),p[0]},o.computeGq=function(){return c.rotate(s,l.localOffsetB,e.angle),c.sub(p,t.position,e.position),c.sub(p,p,s),p[1]};var h=c.create(),u=c.create();a.computeGq=function(){return c.rotate(h,l.localOffsetB,t.angle-l.localAngleB),c.scale(h,h,-1),c.sub(p,e.position,t.position),c.add(p,p,h),c.rotate(u,h,-Math.PI/2),c.normalize(u,u),c.dot(p,u)},this.localOffsetB=c.create(),i.localOffsetB?c.copy(this.localOffsetB,i.localOffsetB):(c.sub(this.localOffsetB,t.position,e.position),c.rotate(this.localOffsetB,this.localOffsetB,-e.angle)),this.localAngleB=0,"number"==typeof i.localAngleB?this.localAngleB=i.localAngleB:this.localAngleB=t.angle-e.angle,this.equations.push(r,o,a),this.setMaxForce(n)}(((t.exports=n).prototype=new d).constructor=n).prototype.setMaxForce=function(e){for(var t=this.equations,i=0;i<this.equations.length;i++)t[i].maxForce=e,t[i].minForce=-e},n.prototype.getMaxForce=function(){return this.equations[0].maxForce};var o=c.create(),a=c.create(),s=c.create(),p=c.fromValues(1,0),l=c.fromValues(0,1);n.prototype.update=function(){var e=this.equations[0],t=this.equations[1],i=this.equations[2],n=this.bodyA,r=this.bodyB;c.rotate(o,this.localOffsetB,n.angle),c.rotate(a,this.localOffsetB,r.angle-this.localAngleB),c.scale(a,a,-1),c.rotate(s,a,Math.PI/2),c.normalize(s,s),e.G[0]=-1,e.G[1]=0,e.G[2]=-c.crossLength(o,p),e.G[3]=1,t.G[0]=0,t.G[1]=-1,t.G[2]=-c.crossLength(o,l),t.G[4]=1,i.G[0]=-s[0],i.G[1]=-s[1],i.G[3]=s[0],i.G[4]=s[1],i.G[5]=c.crossLength(a,s)}},{"../equations/Equation":22,"../math/vec2":30,"./Constraint":14}],18:[function(e,t,i){var y=e("./Constraint"),x=e("../equations/ContactEquation"),m=e("../equations/Equation"),g=e("../math/vec2"),f=e("../equations/RotationalLockEquation");function n(n,r,e){e=e||{},y.call(this,n,r,y.PRISMATIC,e);var o=g.fromValues(0,0),a=g.fromValues(1,0),s=g.fromValues(0,0);e.localAnchorA&&g.copy(o,e.localAnchorA),e.localAxisA&&g.copy(a,e.localAxisA),e.localAnchorB&&g.copy(s,e.localAnchorB),this.localAnchorA=o,this.localAnchorB=s,this.localAxisA=a;var t=this.maxForce=void 0!==e.maxForce?e.maxForce:Number.MAX_VALUE,i=new m(n,r,-t,t),p=new g.create,l=new g.create,h=new g.create,u=new g.create;if(i.computeGq=function(){return g.dot(h,u)},i.updateJacobian=function(){var e=this.G,t=n.position,i=r.position;g.rotate(p,o,n.angle),g.rotate(l,s,r.angle),g.add(h,i,l),g.sub(h,h,t),g.sub(h,h,p),g.rotate(u,a,n.angle+Math.PI/2),e[0]=-u[0],e[1]=-u[1],e[2]=-g.crossLength(p,u)+g.crossLength(u,h),e[3]=u[0],e[4]=u[1],e[5]=g.crossLength(l,u)},this.equations.push(i),!e.disableRotationalLock){var d=new f(n,r,-t,t);this.equations.push(d)}this.position=0,this.velocity=0,this.lowerLimitEnabled=void 0!==e.lowerLimit,this.upperLimitEnabled=void 0!==e.upperLimit,this.lowerLimit=void 0!==e.lowerLimit?e.lowerLimit:0,this.upperLimit=void 0!==e.upperLimit?e.upperLimit:1,this.upperLimitEquation=new x(n,r),this.lowerLimitEquation=new x(n,r),this.upperLimitEquation.minForce=this.lowerLimitEquation.minForce=0,this.upperLimitEquation.maxForce=this.lowerLimitEquation.maxForce=t,this.motorEquation=new m(n,r),this.motorEnabled=!1,this.motorSpeed=0;var c=this,_=this.motorEquation;_.computeGW;_.computeGq=function(){return 0},_.computeGW=function(){var e=this.G,t=this.bodyA,i=this.bodyB,n=t.velocity,r=i.velocity,o=t.angularVelocity,a=i.angularVelocity;return this.gmult(e,n,o,r,a)+c.motorSpeed}}((t.exports=n).prototype=new y).constructor=n;var _=g.create(),v=g.create(),z=g.create(),w=g.create(),b=g.create(),S=g.create();n.prototype.update=function(){var e=this.equations,t=e[0],i=this.upperLimit,n=this.lowerLimit,r=this.upperLimitEquation,o=this.lowerLimitEquation,a=this.bodyA,s=this.bodyB,p=this.localAxisA,l=this.localAnchorA,h=this.localAnchorB;t.updateJacobian(),g.rotate(_,p,a.angle),g.rotate(w,l,a.angle),g.add(v,w,a.position),g.rotate(b,h,s.angle),g.add(z,b,s.position);var u,d=this.position=g.dot(z,_)-g.dot(v,_);if(this.motorEnabled){var c=this.motorEquation.G;c[0]=_[0],c[1]=_[1],c[2]=g.crossLength(_,b),c[3]=-_[0],c[4]=-_[1],c[5]=-g.crossLength(_,w)}this.upperLimitEnabled&&i<d?(g.scale(r.normalA,_,-1),g.sub(r.contactPointA,v,a.position),g.sub(r.contactPointB,z,s.position),g.scale(S,_,i),g.add(r.contactPointA,r.contactPointA,S),-1===e.indexOf(r)&&e.push(r)):-1!==(u=e.indexOf(r))&&e.splice(u,1);this.lowerLimitEnabled&&d<n?(g.scale(o.normalA,_,1),g.sub(o.contactPointA,v,a.position),g.sub(o.contactPointB,z,s.position),g.scale(S,_,n),g.sub(o.contactPointB,o.contactPointB,S),-1===e.indexOf(o)&&e.push(o)):-1!==(u=e.indexOf(o))&&e.splice(u,1)},n.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},n.prototype.disableMotor=function(){if(this.motorEnabled){var e=this.equations.indexOf(this.motorEquation);this.equations.splice(e,1),this.motorEnabled=!1}},n.prototype.setLimits=function(e,t){"number"==typeof e?(this.lowerLimit=e,this.lowerLimitEnabled=!0):(this.lowerLimit=e,this.lowerLimitEnabled=!1),"number"==typeof t?(this.upperLimit=t,this.upperLimitEnabled=!0):(this.upperLimit=t,this.upperLimitEnabled=!1)}},{"../equations/ContactEquation":21,"../equations/Equation":22,"../equations/RotationalLockEquation":24,"../math/vec2":30,"./Constraint":14}],19:[function(e,t,i){var p=e("./Constraint"),l=e("../equations/Equation"),h=e("../equations/RotationalVelocityEquation"),u=e("../equations/RotationalLockEquation"),c=e("../math/vec2");t.exports=n;var _=c.create(),y=c.create(),x=c.fromValues(1,0),m=c.fromValues(0,1),d=c.create();function n(e,t,i){i=i||{},p.call(this,e,t,p.REVOLUTE,i);var n=this.maxForce=void 0!==i.maxForce?i.maxForce:Number.MAX_VALUE;this.pivotA=c.create(),this.pivotB=c.create(),i.worldPivot?(c.sub(this.pivotA,i.worldPivot,e.position),c.sub(this.pivotB,i.worldPivot,t.position),c.rotate(this.pivotA,this.pivotA,-e.angle),c.rotate(this.pivotB,this.pivotB,-t.angle)):(c.copy(this.pivotA,i.localPivotA),c.copy(this.pivotB,i.localPivotB));var r=this.equations=[new l(e,t,-n,n),new l(e,t,-n,n)],o=r[0],a=r[1],s=this;o.computeGq=function(){return c.rotate(_,s.pivotA,e.angle),c.rotate(y,s.pivotB,t.angle),c.add(d,t.position,y),c.sub(d,d,e.position),c.sub(d,d,_),c.dot(d,x)},a.computeGq=function(){return c.rotate(_,s.pivotA,e.angle),c.rotate(y,s.pivotB,t.angle),c.add(d,t.position,y),c.sub(d,d,e.position),c.sub(d,d,_),c.dot(d,m)},a.minForce=o.minForce=-n,a.maxForce=o.maxForce=n,this.motorEquation=new h(e,t),this.motorEnabled=!1,this.angle=0,this.lowerLimitEnabled=!1,this.upperLimitEnabled=!1,this.lowerLimit=0,this.upperLimit=0,this.upperLimitEquation=new u(e,t),this.lowerLimitEquation=new u(e,t),this.upperLimitEquation.minForce=0,this.lowerLimitEquation.maxForce=0}((n.prototype=new p).constructor=n).prototype.setLimits=function(e,t){"number"==typeof e?(this.lowerLimit=e,this.lowerLimitEnabled=!0):(this.lowerLimit=e,this.lowerLimitEnabled=!1),"number"==typeof t?(this.upperLimit=t,this.upperLimitEnabled=!0):(this.upperLimit=t,this.upperLimitEnabled=!1)},n.prototype.update=function(){var e,t=this.bodyA,i=this.bodyB,n=this.pivotA,r=this.pivotB,o=this.equations,a=(o[0],o[1],o[0]),s=o[1],p=this.upperLimit,l=this.lowerLimit,h=this.upperLimitEquation,u=this.lowerLimitEquation,d=this.angle=i.angle-t.angle;this.upperLimitEnabled&&p<d?(h.angle=p,-1===o.indexOf(h)&&o.push(h)):-1!==(e=o.indexOf(h))&&o.splice(e,1);this.lowerLimitEnabled&&d<l?(u.angle=l,-1===o.indexOf(u)&&o.push(u)):-1!==(e=o.indexOf(u))&&o.splice(e,1);c.rotate(_,n,t.angle),c.rotate(y,r,i.angle),a.G[0]=-1,a.G[1]=0,a.G[2]=-c.crossLength(_,x),a.G[3]=1,a.G[4]=0,a.G[5]=c.crossLength(y,x),s.G[0]=0,s.G[1]=-1,s.G[2]=-c.crossLength(_,m),s.G[3]=0,s.G[4]=1,s.G[5]=c.crossLength(y,m)},n.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},n.prototype.disableMotor=function(){if(this.motorEnabled){var e=this.equations.indexOf(this.motorEquation);this.equations.splice(e,1),this.motorEnabled=!1}},n.prototype.motorIsEnabled=function(){return!!this.motorEnabled},n.prototype.setMotorSpeed=function(e){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations[t].relativeVelocity=e}},n.prototype.getMotorSpeed=function(){return!!this.motorEnabled&&this.motorEquation.relativeVelocity}},{"../equations/Equation":22,"../equations/RotationalLockEquation":24,"../equations/RotationalVelocityEquation":25,"../math/vec2":30,"./Constraint":14}],20:[function(e,t,i){var n=e("./Equation");e("../math/vec2");function r(e,t,i){i=i||{},n.call(this,e,t,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=i.angle||0,this.ratio="number"==typeof i.ratio?i.ratio:1,this.setRatio(this.ratio)}(((t.exports=r).prototype=new n).constructor=r).prototype.computeGq=function(){return this.ratio*this.bodyA.angle-this.bodyB.angle+this.angle},r.prototype.setRatio=function(e){var t=this.G;t[2]=e,t[5]=-1,this.ratio=e},r.prototype.setMaxTorque=function(e){this.maxForce=e,this.minForce=-e}},{"../math/vec2":30,"./Equation":22}],21:[function(e,t,i){var n=e("./Equation"),x=e("../math/vec2");function r(e,t){n.call(this,e,t,0,Number.MAX_VALUE),this.contactPointA=x.create(),this.penetrationVec=x.create(),this.contactPointB=x.create(),this.normalA=x.create(),this.restitution=0,this.firstImpact=!1,this.shapeA=null,this.shapeB=null}(((t.exports=r).prototype=new n).constructor=r).prototype.computeB=function(e,t,i){var n,r,o=this.bodyA,a=this.bodyB,s=this.contactPointA,p=this.contactPointB,l=o.position,h=a.position,u=this.penetrationVec,d=this.normalA,c=this.G,_=x.crossLength(s,d),y=x.crossLength(p,d);return c[0]=-d[0],c[1]=-d[1],c[2]=-_,c[3]=d[0],c[4]=d[1],c[5]=y,x.add(u,h,p),x.sub(u,u,l),x.sub(u,u,s),n=this.firstImpact&&0!==this.restitution?(r=0,1/t*(1+this.restitution)*this.computeGW()):(r=x.dot(d,u)+this.offset,this.computeGW()),-r*e-n*t-i*this.computeGiMf()}},{"../math/vec2":30,"./Equation":22}],22:[function(e,t,i){t.exports=a;var u=e("../math/vec2"),o=e("../utils/Utils");e("../objects/Body");function a(e,t,i,n){this.minForce=void 0===i?-Number.MAX_VALUE:i,this.maxForce=void 0===n?Number.MAX_VALUE:n,this.bodyA=e,this.bodyB=t,this.stiffness=a.DEFAULT_STIFFNESS,this.relaxation=a.DEFAULT_RELAXATION,this.G=new o.ARRAY_TYPE(6);for(var r=0;r<6;r++)this.G[r]=0;this.offset=0,this.a=0,this.b=0,this.epsilon=0,this.timeStep=1/60,this.needsUpdate=!0,this.multiplier=0,this.relativeVelocity=0,this.enabled=!0}(a.prototype.constructor=a).DEFAULT_STIFFNESS=1e6,a.DEFAULT_RELAXATION=4,a.prototype.update=function(){var e=this.stiffness,t=this.relaxation,i=this.timeStep;this.a=4/(i*(1+4*t)),this.b=4*t/(1+4*t),this.epsilon=4/(i*i*e*(1+4*t)),this.needsUpdate=!1},a.prototype.gmult=function(e,t,i,n,r){return e[0]*t[0]+e[1]*t[1]+e[2]*i+e[3]*n[0]+e[4]*n[1]+e[5]*r},a.prototype.computeB=function(e,t,i){var n=this.computeGW();return-this.computeGq()*e-n*t-this.computeGiMf()*i};var s=u.create(),p=u.create();a.prototype.computeGq=function(){var e=this.G,t=this.bodyA,i=this.bodyB,n=(t.position,i.position,t.angle),r=i.angle;return this.gmult(e,s,n,p,r)+this.offset},a.prototype.computeGW=function(){var e=this.G,t=this.bodyA,i=this.bodyB,n=t.velocity,r=i.velocity,o=t.angularVelocity,a=i.angularVelocity;return this.gmult(e,n,o,r,a)+this.relativeVelocity},a.prototype.computeGWlambda=function(){var e=this.G,t=this.bodyA,i=this.bodyB,n=t.vlambda,r=i.vlambda,o=t.wlambda,a=i.wlambda;return this.gmult(e,n,o,r,a)};var d=u.create(),c=u.create();a.prototype.computeGiMf=function(){var e=this.bodyA,t=this.bodyB,i=e.force,n=e.angularForce,r=t.force,o=t.angularForce,a=e.invMassSolve,s=t.invMassSolve,p=e.invInertiaSolve,l=t.invInertiaSolve,h=this.G;return u.scale(d,i,a),u.multiply(d,e.massMultiplier,d),u.scale(c,r,s),u.multiply(c,t.massMultiplier,c),this.gmult(h,d,n*p,c,o*l)},a.prototype.computeGiMGt=function(){var e=this.bodyA,t=this.bodyB,i=e.invMassSolve,n=t.invMassSolve,r=e.invInertiaSolve,o=t.invInertiaSolve,a=this.G;return a[0]*a[0]*i*e.massMultiplier[0]+a[1]*a[1]*i*e.massMultiplier[1]+a[2]*a[2]*r+a[3]*a[3]*n*t.massMultiplier[0]+a[4]*a[4]*n*t.massMultiplier[1]+a[5]*a[5]*o};var _=u.create(),y=u.create(),x=u.create();u.create(),u.create(),u.create();a.prototype.addToWlambda=function(e){var t=this.bodyA,i=this.bodyB,n=_,r=y,o=x,a=t.invMassSolve,s=i.invMassSolve,p=t.invInertiaSolve,l=i.invInertiaSolve,h=this.G;r[0]=h[0],r[1]=h[1],o[0]=h[3],o[1]=h[4],u.scale(n,r,a*e),u.multiply(n,n,t.massMultiplier),u.add(t.vlambda,t.vlambda,n),t.wlambda+=p*h[2]*e,u.scale(n,o,s*e),u.multiply(n,n,i.massMultiplier),u.add(i.vlambda,i.vlambda,n),i.wlambda+=l*h[5]*e},a.prototype.computeInvC=function(e){return 1/(this.computeGiMGt()+e)}},{"../math/vec2":30,"../objects/Body":31,"../utils/Utils":57}],23:[function(e,t,i){var s=e("../math/vec2"),n=e("./Equation");e("../utils/Utils");function r(e,t,i){n.call(this,e,t,-i,i),this.contactPointA=s.create(),this.contactPointB=s.create(),this.t=s.create(),this.contactEquations=[],this.shapeA=null,this.shapeB=null,this.frictionCoefficient=.3}(((t.exports=r).prototype=new n).constructor=r).prototype.setSlipForce=function(e){this.maxForce=e,this.minForce=-e},r.prototype.getSlipForce=function(){return this.maxForce},r.prototype.computeB=function(e,t,i){this.bodyA,this.bodyB;var n=this.contactPointA,r=this.contactPointB,o=this.t,a=this.G;return a[0]=-o[0],a[1]=-o[1],a[2]=-s.crossLength(n,o),a[3]=o[0],a[4]=o[1],a[5]=s.crossLength(r,o),-this.computeGW()*t-i*this.computeGiMf()}},{"../math/vec2":30,"../utils/Utils":57,"./Equation":22}],24:[function(e,t,i){var r=e("./Equation"),n=e("../math/vec2");function o(e,t,i){i=i||{},r.call(this,e,t,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=i.angle||0;var n=this.G;n[2]=1,n[5]=-1}((t.exports=o).prototype=new r).constructor=o;var a=n.create(),s=n.create(),p=n.fromValues(1,0),l=n.fromValues(0,1);o.prototype.computeGq=function(){return n.rotate(a,p,this.bodyA.angle+this.angle),n.rotate(s,l,this.bodyB.angle),n.dot(a,s)}},{"../math/vec2":30,"./Equation":22}],25:[function(e,t,i){var n=e("./Equation");e("../math/vec2");function r(e,t){n.call(this,e,t,-Number.MAX_VALUE,Number.MAX_VALUE),this.relativeVelocity=1,this.ratio=1}(((t.exports=r).prototype=new n).constructor=r).prototype.computeB=function(e,t,i){var n=this.G;n[2]=-1,n[5]=this.ratio;var r=this.computeGiMf();return-this.computeGW()*t-i*r}},{"../math/vec2":30,"./Equation":22}],26:[function(e,t,i){var n=function(){};(t.exports=n).prototype={constructor:n,on:function(e,t,i){t.context=i||this,void 0===this._listeners&&(this._listeners={});var n=this._listeners;return void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t),this},has:function(e,t){if(void 0===this._listeners)return!1;var i=this._listeners;if(t){if(void 0!==i[e]&&-1!==i[e].indexOf(t))return!0}else if(void 0!==i[e])return!0;return!1},off:function(e,t){if(void 0===this._listeners)return this;var i=this._listeners,n=i[e].indexOf(t);return-1!==n&&i[e].splice(n,1),this},emit:function(e){if(void 0===this._listeners)return this;var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var i=0,n=t.length;i<n;i++){var r=t[i];r.call(r.context,e)}}return this}}},{}],27:[function(e,t,i){var n=e("./Material"),r=e("../equations/Equation");function o(e,t,i){if(i=i||{},!(e instanceof n&&t instanceof n))throw new Error("First two arguments must be Material instances.");this.id=o.idCounter++,this.materialA=e,this.materialB=t,this.friction=void 0!==i.friction?Number(i.friction):.3,this.restitution=void 0!==i.restitution?Number(i.restitution):0,this.stiffness=void 0!==i.stiffness?Number(i.stiffness):r.DEFAULT_STIFFNESS,this.relaxation=void 0!==i.relaxation?Number(i.relaxation):r.DEFAULT_RELAXATION,this.frictionStiffness=void 0!==i.frictionStiffness?Number(i.frictionStiffness):r.DEFAULT_STIFFNESS,this.frictionRelaxation=void 0!==i.frictionRelaxation?Number(i.frictionRelaxation):r.DEFAULT_RELAXATION,this.surfaceVelocity=void 0!==i.surfaceVelocity?Number(i.surfaceVelocity):0,this.contactSkinSize=.005}(t.exports=o).idCounter=0},{"../equations/Equation":22,"./Material":28}],28:[function(e,t,i){function n(e){this.id=e||n.idCounter++}(t.exports=n).idCounter=0},{}],29:[function(e,t,i){var g={GetArea:function(e){if(e.length<6)return 0;for(var t=e.length-2,i=0,n=0;n<t;n+=2)i+=(e[n+2]-e[n])*(e[n+1]+e[n+3]);return.5*-(i+=(e[0]-e[t])*(e[t+1]+e[1]))},Triangulate:function(e){var t=e.length>>1;if(t<3)return[];for(var i=[],n=[],r=0;r<t;r++)n.push(r);r=0;for(var o=t;3<o;){var a=n[(r+0)%o],s=n[(r+1)%o],p=n[(r+2)%o],l=e[2*a],h=e[2*a+1],u=e[2*s],d=e[2*s+1],c=e[2*p],_=e[2*p+1],y=!1;if(g._convex(l,h,u,d,c,_)){y=!0;for(var x=0;x<o;x++){var m=n[x];if(m!=a&&m!=s&&m!=p&&g._PointInTriangle(e[2*m],e[2*m+1],l,h,u,d,c,_)){y=!1;break}}}if(y)i.push(a,s,p),n.splice((r+1)%o,1),o--,r=0;else if(r++>3*o)break}return i.push(n[0],n[1],n[2]),i},_PointInTriangle:function(e,t,i,n,r,o,a,s){var p=a-i,l=s-n,h=r-i,u=o-n,d=e-i,c=t-n,_=p*p+l*l,y=p*h+l*u,x=p*d+l*c,m=h*h+u*u,g=h*d+u*c,f=1/(_*m-y*y),v=(m*x-y*g)*f,z=(_*g-y*x)*f;return 0<=v&&0<=z&&v+z<1},_convex:function(e,t,i,n,r,o){return 0<=(t-n)*(r-i)+(i-e)*(o-n)}};t.exports=g},{}],30:[function(e,t,i){var a=t.exports={},n=e("../utils/Utils");a.crossLength=function(e,t){return e[0]*t[1]-e[1]*t[0]},a.crossVZ=function(e,t,i){return a.rotate(e,t,-Math.PI/2),a.scale(e,e,i),e},a.crossZV=function(e,t,i){return a.rotate(e,i,Math.PI/2),a.scale(e,e,t),e},a.rotate=function(e,t,i){if(0!==i){var n=Math.cos(i),r=Math.sin(i),o=t[0],a=t[1];e[0]=n*o-r*a,e[1]=r*o+n*a}else e[0]=t[0],e[1]=t[1]},a.rotate90cw=function(e,t){var i=t[0],n=t[1];e[0]=n,e[1]=-i},a.toLocalFrame=function(e,t,i,n){a.copy(e,t),a.sub(e,e,i),a.rotate(e,e,-n)},a.toGlobalFrame=function(e,t,i,n){a.copy(e,t),a.rotate(e,e,n),a.add(e,e,i)},a.vectorToLocalFrame=function(e,t,i){a.rotate(e,t,-i)},a.vectorToGlobalFrame=function(e,t,i){a.rotate(e,t,i)},a.centroid=function(e,t,i,n){return a.add(e,t,i),a.add(e,e,n),a.scale(e,e,1/3),e},a.create=function(){var e=new n.ARRAY_TYPE(2);return e[0]=0,e[1]=0,e},a.clone=function(e){var t=new n.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},a.fromValues=function(e,t){var i=new n.ARRAY_TYPE(2);return i[0]=e,i[1]=t,i},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},a.set=function(e,t,i){return e[0]=t,e[1]=i,e},a.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e},a.subtract=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e},a.sub=a.subtract,a.multiply=function(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e},a.mul=a.multiply,a.divide=function(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e},a.div=a.divide,a.scale=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e},a.distance=function(e,t){var i=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(i*i+n*n)},a.dist=a.distance,a.squaredDistance=function(e,t){var i=t[0]-e[0],n=t[1]-e[1];return i*i+n*n},a.sqrDist=a.squaredDistance,a.length=function(e){var t=e[0],i=e[1];return Math.sqrt(t*t+i*i)},a.len=a.length,a.squaredLength=function(e){var t=e[0],i=e[1];return t*t+i*i},a.sqrLen=a.squaredLength,a.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},a.normalize=function(e,t){var i=t[0],n=t[1],r=i*i+n*n;return 0<r&&(r=1/Math.sqrt(r),e[0]=t[0]*r,e[1]=t[1]*r),e},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},a.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},a.lerp=function(e,t,i,n){var r=t[0],o=t[1];return e[0]=r+n*(i[0]-r),e[1]=o+n*(i[1]-o),e},a.reflect=function(e,t,i){var n=t[0]*i[0]+t[1]*i[1];e[0]=t[0]-2*i[0]*n,e[1]=t[1]-2*i[1]*n},a.getLineSegmentsIntersection=function(e,t,i,n,r){var o=a.getLineSegmentsIntersectionFraction(t,i,n,r);return!(o<0)&&(e[0]=t[0]+o*(i[0]-t[0]),e[1]=t[1]+o*(i[1]-t[1]),!0)},a.getLineSegmentsIntersectionFraction=function(e,t,i,n){var r,o,a=t[0]-e[0],s=t[1]-e[1],p=n[0]-i[0],l=n[1]-i[1];return r=(-s*(e[0]-i[0])+a*(e[1]-i[1]))/(-p*s+a*l),o=(p*(e[1]-i[1])-l*(e[0]-i[0]))/(-p*s+a*l),0<=r&&r<=1&&0<=o&&o<=1?o:-1}},{"../utils/Utils":57}],31:[function(e,t,i){var u=e("../math/vec2"),l=e("poly-decomp"),h=e("../shapes/Convex"),n=e("../collision/RaycastResult"),r=e("../collision/Ray"),o=e("../collision/AABB"),a=e("../events/EventEmitter");function s(e){e=e||{},a.call(this),this.id=e.id||++s._idCounter,this.world=null,this.shapes=[],this.mass=e.mass||0,this.invMass=0,this.inertia=0,this.invInertia=0,this.invMassSolve=0,this.invInertiaSolve=0,this.fixedRotation=!!e.fixedRotation,this.fixedX=!!e.fixedX,this.fixedY=!!e.fixedY,this.massMultiplier=u.create(),this.position=u.fromValues(0,0),e.position&&u.copy(this.position,e.position),this.interpolatedPosition=u.fromValues(0,0),this.interpolatedAngle=0,this.previousPosition=u.fromValues(0,0),this.previousAngle=0,this.velocity=u.fromValues(0,0),e.velocity&&u.copy(this.velocity,e.velocity),this.vlambda=u.fromValues(0,0),this.wlambda=0,this.angle=e.angle||0,this.angularVelocity=e.angularVelocity||0,this.force=u.create(),e.force&&u.copy(this.force,e.force),this.angularForce=e.angularForce||0,this.damping="number"==typeof e.damping?e.damping:.1,this.angularDamping="number"==typeof e.angularDamping?e.angularDamping:.1,this.type=s.STATIC,void 0!==e.type?this.type=e.type:e.mass?this.type=s.DYNAMIC:this.type=s.STATIC,this.boundingRadius=0,this.aabb=new o,this.aabbNeedsUpdate=!0,this.allowSleep=void 0===e.allowSleep||e.allowSleep,this.wantsToSleep=!1,this.sleepState=s.AWAKE,this.sleepSpeedLimit=void 0!==e.sleepSpeedLimit?e.sleepSpeedLimit:.2,this.sleepTimeLimit=void 0!==e.sleepTimeLimit?e.sleepTimeLimit:1,this.gravityScale=void 0!==e.gravityScale?e.gravityScale:1,this.collisionResponse=void 0===e.collisionResponse||e.collisionResponse,this.idleTime=0,this.timeLastSleepy=0,this.ccdSpeedThreshold=void 0!==e.ccdSpeedThreshold?e.ccdSpeedThreshold:-1,this.ccdIterations=void 0!==e.ccdIterations?e.ccdIterations:10,this.concavePath=null,this._wakeUpAfterNarrowphase=!1,this.updateMassProperties()}(((t.exports=s).prototype=new a).constructor=s)._idCounter=0,s.prototype.updateSolveMassProperties=function(){this.sleepState===s.SLEEPING||this.type===s.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve=0):(this.invMassSolve=this.invMass,this.invInertiaSolve=this.invInertia)},s.prototype.setDensity=function(e){var t=this.getArea();this.mass=t*e,this.updateMassProperties()},s.prototype.getArea=function(){for(var e=0,t=0;t<this.shapes.length;t++)e+=this.shapes[t].area;return e},s.prototype.getAABB=function(){return this.aabbNeedsUpdate&&this.updateAABB(),this.aabb};var p=new o,d=u.create();s.prototype.updateAABB=function(){for(var e=this.shapes,t=e.length,i=d,n=this.angle,r=0;r!==t;r++){var o=e[r],a=o.angle+n;u.rotate(i,o.position,n),u.add(i,i,this.position),o.computeAABB(p,i,a),0===r?this.aabb.copy(p):this.aabb.extend(p)}this.aabbNeedsUpdate=!1},s.prototype.updateBoundingRadius=function(){for(var e=this.shapes,t=e.length,i=0,n=0;n!==t;n++){var r=e[n],o=u.length(r.position),a=r.boundingRadius;i<o+a&&(i=o+a)}this.boundingRadius=i},s.prototype.addShape=function(e,t,i){if(e.body)throw new Error("A shape can only be added to one body.");e.body=this,t?u.copy(e.position,t):u.set(e.position,0,0),e.angle=i||0,this.shapes.push(e),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0},s.prototype.removeShape=function(e){var t=this.shapes.indexOf(e);return-1!==t&&(this.shapes.splice(t,1),this.aabbNeedsUpdate=!0,!(e.body=null))},s.prototype.updateMassProperties=function(){if(this.type===s.STATIC||this.type===s.KINEMATIC)this.mass=Number.MAX_VALUE,this.invMass=0,this.inertia=Number.MAX_VALUE,this.invInertia=0;else{var e=this.shapes,t=e.length,i=this.mass/t,n=0;if(this.fixedRotation)this.inertia=Number.MAX_VALUE,this.invInertia=0;else{for(var r=0;r<t;r++){var o=e[r],a=u.squaredLength(o.position);n+=o.computeMomentOfInertia(i)+i*a}this.inertia=n,this.invInertia=0<n?1/n:0}this.invMass=1/this.mass,u.set(this.massMultiplier,this.fixedX?0:1,this.fixedY?0:1)}};u.create();s.prototype.applyForce=function(e,t){if(u.add(this.force,this.force,e),t){var i=u.crossLength(t,e);this.angularForce+=i}};var c=u.create(),_=u.create(),y=u.create();s.prototype.applyForceLocal=function(e,t){t=t||y;var i=c,n=_;this.vectorToWorldFrame(i,e),this.vectorToWorldFrame(n,t),this.applyForce(i,n)};var x=u.create();s.prototype.applyImpulse=function(e,t){if(this.type===s.DYNAMIC){var i=x;if(u.scale(i,e,this.invMass),u.multiply(i,this.massMultiplier,i),u.add(this.velocity,i,this.velocity),t){var n=u.crossLength(t,e);n*=this.invInertia,this.angularVelocity+=n}}};var m=u.create(),g=u.create(),f=u.create();s.prototype.applyImpulseLocal=function(e,t){t=t||f;var i=m,n=g;this.vectorToWorldFrame(i,e),this.vectorToWorldFrame(n,t),this.applyImpulse(i,n)},s.prototype.toLocalFrame=function(e,t){u.toLocalFrame(e,t,this.position,this.angle)},s.prototype.toWorldFrame=function(e,t){u.toGlobalFrame(e,t,this.position,this.angle)},s.prototype.vectorToLocalFrame=function(e,t){u.vectorToLocalFrame(e,t,this.angle)},s.prototype.vectorToWorldFrame=function(e,t){u.vectorToGlobalFrame(e,t,this.angle)},s.prototype.fromPolygon=function(e,t){t=t||{};for(var i=this.shapes.length;0<=i;--i)this.removeShape(this.shapes[i]);var n,r=new l.Polygon;if(r.vertices=e,r.makeCCW(),"number"==typeof t.removeCollinearPoints&&r.removeCollinearPoints(t.removeCollinearPoints),void 0===t.skipSimpleCheck&&!r.isSimple())return!1;this.concavePath=r.vertices.slice(0);for(i=0;i<this.concavePath.length;i++){var o=[0,0];u.copy(o,this.concavePath[i]),this.concavePath[i]=o}n=t.optimalDecomp?r.decomp():r.quickDecomp();var a=u.create();for(i=0;i!==n.length;i++){for(var s=new h({vertices:n[i].vertices}),p=0;p!==s.vertices.length;p++){o=s.vertices[p];u.sub(o,o,s.centerOfMass)}u.scale(a,s.centerOfMass,1),s.updateTriangles(),s.updateCenterOfMass(),s.updateBoundingRadius(),this.addShape(s,a)}return this.adjustCenterOfMass(),this.aabbNeedsUpdate=!0};u.fromValues(0,0);var v=u.fromValues(0,0),z=u.fromValues(0,0),w=u.fromValues(0,0);s.prototype.adjustCenterOfMass=function(){var e=v,t=z,i=w,n=0;u.set(t,0,0);for(var r=0;r!==this.shapes.length;r++){var o=this.shapes[r];u.scale(e,o.position,o.area),u.add(t,t,e),n+=o.area}u.scale(i,t,1/n);for(r=0;r!==this.shapes.length;r++){o=this.shapes[r];u.sub(o.position,o.position,i)}u.add(this.position,this.position,i);for(r=0;this.concavePath&&r<this.concavePath.length;r++)u.sub(this.concavePath[r],this.concavePath[r],i);this.updateMassProperties(),this.updateBoundingRadius()},s.prototype.setZeroForce=function(){u.set(this.force,0,0),this.angularForce=0},s.prototype.resetConstraintVelocity=function(){var e=this.vlambda;u.set(e,0,0),this.wlambda=0},s.prototype.addConstraintVelocity=function(){var e=this.velocity;u.add(e,e,this.vlambda),this.angularVelocity+=this.wlambda},s.prototype.applyDamping=function(e){if(this.type===s.DYNAMIC){var t=this.velocity;u.scale(t,t,Math.pow(1-this.damping,e)),this.angularVelocity*=Math.pow(1-this.angularDamping,e)}},s.prototype.wakeUp=function(){var e=this.sleepState;this.sleepState=s.AWAKE,this.idleTime=0,e!==s.AWAKE&&this.emit(s.wakeUpEvent)},s.prototype.sleep=function(){this.sleepState=s.SLEEPING,this.angularVelocity=0,this.angularForce=0,u.set(this.velocity,0,0),u.set(this.force,0,0),this.emit(s.sleepEvent)},s.prototype.sleepTick=function(e,t,i){if(this.allowSleep&&this.type!==s.SLEEPING){this.wantsToSleep=!1;this.sleepState;var n=u.squaredLength(this.velocity)+Math.pow(this.angularVelocity,2);Math.pow(this.sleepSpeedLimit,2)<=n?(this.idleTime=0,this.sleepState=s.AWAKE):(this.idleTime+=i,this.sleepState=s.SLEEPY),this.idleTime>this.sleepTimeLimit&&(t?this.wantsToSleep=!0:this.sleep())}},s.prototype.overlaps=function(e){return this.world.overlapKeeper.bodiesAreOverlapping(this,e)};var b=u.create(),S=u.create();s.prototype.integrate=function(e){var t=this.invMass,i=this.force,n=this.position,r=this.velocity;u.copy(this.previousPosition,this.position),this.previousAngle=this.angle,this.fixedRotation||(this.angularVelocity+=this.angularForce*this.invInertia*e),u.scale(b,i,e*t),u.multiply(b,this.massMultiplier,b),u.add(r,b,r),this.integrateToTimeOfImpact(e)||(u.scale(S,r,e),u.add(n,n,S),this.fixedRotation||(this.angle+=this.angularVelocity*e)),this.aabbNeedsUpdate=!0};var C=new n,M=new r({mode:r.ALL}),P=u.create(),k=u.create(),T=u.create(),A=u.create();s.prototype.integrateToTimeOfImpact=function(e){if(this.ccdSpeedThreshold<0||u.squaredLength(this.velocity)<Math.pow(this.ccdSpeedThreshold,2))return!1;u.normalize(P,this.velocity),u.scale(k,this.velocity,e),u.add(k,k,this.position),u.sub(T,k,this.position);var t,i=this.angularVelocity*e,n=u.length(T),r=1,o=this;if(C.reset(),M.callback=function(e){e.body!==o&&(t=e.body,e.getHitPoint(k,M),u.sub(T,k,o.position),r=u.length(T)/n,e.stop())},u.copy(M.from,this.position),u.copy(M.to,k),M.update(),this.world.raycast(C,M),!t)return!1;var a=this.angle;u.copy(A,this.position);for(var s=0,p=0,l=0,h=r;p<=h&&s<this.ccdIterations;){s++,l=(h-p)/2,u.scale(S,T,r),u.add(this.position,A,S),this.angle=a+i*r,this.updateAABB(),this.aabb.overlaps(t.aabb)&&this.world.narrowphase.bodiesOverlap(this,t)?p=l:h=l}return r=l,u.copy(this.position,A),this.angle=a,u.scale(S,T,r),u.add(this.position,this.position,S),this.fixedRotation||(this.angle+=i*r),!0},s.prototype.getVelocityAtPoint=function(e,t){return u.crossVZ(e,t,this.angularVelocity),u.subtract(e,this.velocity,e),e},s.sleepyEvent={type:"sleepy"},s.sleepEvent={type:"sleep"},s.wakeUpEvent={type:"wakeup"},s.DYNAMIC=1,s.STATIC=2,s.KINEMATIC=4,s.AWAKE=0,s.SLEEPY=1,s.SLEEPING=2},{"../collision/AABB":7,"../collision/Ray":11,"../collision/RaycastResult":12,"../events/EventEmitter":26,"../math/vec2":30,"../shapes/Convex":40,"poly-decomp":5}],32:[function(e,t,i){var m=e("../math/vec2"),a=e("./Spring");e("../utils/Utils");function n(e,t,i){i=i||{},a.call(this,e,t,i),this.localAnchorA=m.fromValues(0,0),this.localAnchorB=m.fromValues(0,0),i.localAnchorA&&m.copy(this.localAnchorA,i.localAnchorA),i.localAnchorB&&m.copy(this.localAnchorB,i.localAnchorB),i.worldAnchorA&&this.setWorldAnchorA(i.worldAnchorA),i.worldAnchorB&&this.setWorldAnchorB(i.worldAnchorB);var n=m.create(),r=m.create();this.getWorldAnchorA(n),this.getWorldAnchorB(r);var o=m.distance(n,r);this.restLength="number"==typeof i.restLength?i.restLength:o}(((t.exports=n).prototype=new a).constructor=n).prototype.setWorldAnchorA=function(e){this.bodyA.toLocalFrame(this.localAnchorA,e)},n.prototype.setWorldAnchorB=function(e){this.bodyB.toLocalFrame(this.localAnchorB,e)},n.prototype.getWorldAnchorA=function(e){this.bodyA.toWorldFrame(e,this.localAnchorA)},n.prototype.getWorldAnchorB=function(e){this.bodyB.toWorldFrame(e,this.localAnchorB)};var g=m.create(),f=m.create(),v=m.create(),z=m.create(),w=m.create(),b=m.create(),S=m.create(),C=m.create(),M=m.create();n.prototype.applyForce=function(){var e=this.stiffness,t=this.damping,i=this.restLength,n=this.bodyA,r=this.bodyB,o=g,a=f,s=v,p=z,l=M,h=w,u=b,d=S,c=C;this.getWorldAnchorA(h),this.getWorldAnchorB(u),m.sub(d,h,n.position),m.sub(c,u,r.position),m.sub(o,u,h);var _=m.len(o);m.normalize(a,o),m.sub(s,r.velocity,n.velocity),m.crossZV(l,r.angularVelocity,c),m.add(s,s,l),m.crossZV(l,n.angularVelocity,d),m.sub(s,s,l),m.scale(p,a,-e*(_-i)-t*m.dot(s,a)),m.sub(n.force,n.force,p),m.add(r.force,r.force,p);var y=m.crossLength(d,p),x=m.crossLength(c,p);n.angularForce-=y,r.angularForce+=x}},{"../math/vec2":30,"../utils/Utils":57,"./Spring":34}],33:[function(e,t,i){e("../math/vec2");var n=e("./Spring");function r(e,t,i){i=i||{},n.call(this,e,t,i),this.restAngle="number"==typeof i.restAngle?i.restAngle:t.angle-e.angle}(((t.exports=r).prototype=new n).constructor=r).prototype.applyForce=function(){var e=this.stiffness,t=this.damping,i=this.restAngle,n=this.bodyA,r=this.bodyB,o=-e*(r.angle-n.angle-i)-t*(r.angularVelocity-n.angularVelocity)*0;n.angularForce-=o,r.angularForce+=o}},{"../math/vec2":30,"./Spring":34}],34:[function(e,t,i){e("../math/vec2");var n=e("../utils/Utils");function r(e,t,i){i=n.defaults(i,{stiffness:100,damping:1}),this.stiffness=i.stiffness,this.damping=i.damping,this.bodyA=e,this.bodyB=t}(t.exports=r).prototype.applyForce=function(){}},{"../math/vec2":30,"../utils/Utils":57}],35:[function(e,t,i){var n=e("../math/vec2"),r=(e("../utils/Utils"),e("../constraints/Constraint")),o=e("../equations/FrictionEquation"),a=e("../objects/Body");function s(e,t){t=t||{},this.chassisBody=e,this.wheels=[],this.groundBody=new a({mass:0}),this.world=null;var i=this;this.preStepCallback=function(){i.update()}}function p(e,t){t=t||{},this.vehicle=e,this.forwardEquation=new o(e.chassisBody,e.groundBody),this.sideEquation=new o(e.chassisBody,e.groundBody),this.steerValue=0,this.engineForce=0,this.setSideFriction(void 0!==t.sideFriction?t.sideFriction:5),this.localForwardVector=n.fromValues(0,1),t.localForwardVector&&n.copy(this.localForwardVector,t.localForwardVector),this.localPosition=n.fromValues(0,0),t.localPosition&&n.copy(this.localPosition,t.localPosition),r.apply(this,e.chassisBody,e.groundBody),this.equations.push(this.forwardEquation,this.sideEquation),this.setBrakeForce(0)}(t.exports=s).prototype.addToWorld=function(e){(this.world=e).addBody(this.groundBody),e.on("preStep",this.preStepCallback);for(var t=0;t<this.wheels.length;t++){var i=this.wheels[t];e.addConstraint(i)}},s.prototype.removeFromWorld=function(){var e=this.world;e.removeBody(this.groundBody),e.off("preStep",this.preStepCallback);for(var t=0;t<this.wheels.length;t++){var i=this.wheels[t];e.removeConstraint(i)}this.world=null},s.prototype.addWheel=function(e){var t=new p(this,e);return this.wheels.push(t),t},s.prototype.update=function(){for(var e=0;e<this.wheels.length;e++)this.wheels[e].update()},(p.prototype=new r).setBrakeForce=function(e){this.forwardEquation.setSlipForce(e)},p.prototype.setSideFriction=function(e){this.sideEquation.setSlipForce(e)};var l=n.create(),h=n.create();p.prototype.getSpeed=function(){return this.vehicle.chassisBody.vectorToWorldFrame(h,this.localForwardVector),this.vehicle.chassisBody.getVelocityAtPoint(l,h),n.dot(l,h)};var u=n.create();p.prototype.update=function(){this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.t,this.localForwardVector),n.rotate(this.sideEquation.t,this.localForwardVector,Math.PI/2),this.vehicle.chassisBody.vectorToWorldFrame(this.sideEquation.t,this.sideEquation.t),n.rotate(this.forwardEquation.t,this.forwardEquation.t,this.steerValue),n.rotate(this.sideEquation.t,this.sideEquation.t,this.steerValue),this.vehicle.chassisBody.toWorldFrame(this.forwardEquation.contactPointB,this.localPosition),n.copy(this.sideEquation.contactPointB,this.forwardEquation.contactPointB),this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.contactPointA,this.localPosition),n.copy(this.sideEquation.contactPointA,this.forwardEquation.contactPointA),n.normalize(u,this.forwardEquation.t),n.scale(u,u,this.engineForce),this.vehicle.chassisBody.applyForce(u,this.forwardEquation.contactPointA)}},{"../constraints/Constraint":14,"../equations/FrictionEquation":23,"../math/vec2":30,"../objects/Body":31,"../utils/Utils":57}],36:[function(e,t,i){var n=t.exports={AABB:e("./collision/AABB"),AngleLockEquation:e("./equations/AngleLockEquation"),Body:e("./objects/Body"),Broadphase:e("./collision/Broadphase"),Capsule:e("./shapes/Capsule"),Circle:e("./shapes/Circle"),Constraint:e("./constraints/Constraint"),ContactEquation:e("./equations/ContactEquation"),ContactEquationPool:e("./utils/ContactEquationPool"),ContactMaterial:e("./material/ContactMaterial"),Convex:e("./shapes/Convex"),DistanceConstraint:e("./constraints/DistanceConstraint"),Equation:e("./equations/Equation"),EventEmitter:e("./events/EventEmitter"),FrictionEquation:e("./equations/FrictionEquation"),FrictionEquationPool:e("./utils/FrictionEquationPool"),GearConstraint:e("./constraints/GearConstraint"),GSSolver:e("./solver/GSSolver"),Heightfield:e("./shapes/Heightfield"),Line:e("./shapes/Line"),LockConstraint:e("./constraints/LockConstraint"),Material:e("./material/Material"),Narrowphase:e("./collision/Narrowphase"),NaiveBroadphase:e("./collision/NaiveBroadphase"),Particle:e("./shapes/Particle"),Plane:e("./shapes/Plane"),Pool:e("./utils/Pool"),RevoluteConstraint:e("./constraints/RevoluteConstraint"),PrismaticConstraint:e("./constraints/PrismaticConstraint"),Ray:e("./collision/Ray"),RaycastResult:e("./collision/RaycastResult"),Box:e("./shapes/Box"),RotationalVelocityEquation:e("./equations/RotationalVelocityEquation"),SAPBroadphase:e("./collision/SAPBroadphase"),Shape:e("./shapes/Shape"),Solver:e("./solver/Solver"),Spring:e("./objects/Spring"),TopDownVehicle:e("./objects/TopDownVehicle"),LinearSpring:e("./objects/LinearSpring"),RotationalSpring:e("./objects/RotationalSpring"),Utils:e("./utils/Utils"),World:e("./world/World"),vec2:e("./math/vec2"),version:e("../package.json").version};Object.defineProperty(n,"Rectangle",{get:function(){return this.Box}})},{"../package.json":6,"./collision/AABB":7,"./collision/Broadphase":8,"./collision/NaiveBroadphase":9,"./collision/Narrowphase":10,"./collision/Ray":11,"./collision/RaycastResult":12,"./collision/SAPBroadphase":13,"./constraints/Constraint":14,"./constraints/DistanceConstraint":15,"./constraints/GearConstraint":16,"./constraints/LockConstraint":17,"./constraints/PrismaticConstraint":18,"./constraints/RevoluteConstraint":19,"./equations/AngleLockEquation":20,"./equations/ContactEquation":21,"./equations/Equation":22,"./equations/FrictionEquation":23,"./equations/RotationalVelocityEquation":25,"./events/EventEmitter":26,"./material/ContactMaterial":27,"./material/Material":28,"./math/vec2":30,"./objects/Body":31,"./objects/LinearSpring":32,"./objects/RotationalSpring":33,"./objects/Spring":34,"./objects/TopDownVehicle":35,"./shapes/Box":37,"./shapes/Capsule":38,"./shapes/Circle":39,"./shapes/Convex":40,"./shapes/Heightfield":41,"./shapes/Line":42,"./shapes/Particle":43,"./shapes/Plane":44,"./shapes/Shape":45,"./solver/GSSolver":46,"./solver/Solver":47,"./utils/ContactEquationPool":48,"./utils/FrictionEquationPool":49,"./utils/Pool":55,"./utils/Utils":57,"./world/World":61}],37:[function(e,t,i){var o=e("../math/vec2"),a=e("./Shape"),s=e("./Convex");function n(e){"number"==typeof e&&"number"==typeof arguments[1]&&(e={width:e,height:arguments[1]}),e=e||{};var t=this.width=e.width||1,i=this.height=e.height||1,n=[o.fromValues(-t/2,-i/2),o.fromValues(t/2,-i/2),o.fromValues(t/2,i/2),o.fromValues(-t/2,i/2)],r=[o.fromValues(1,0),o.fromValues(0,1)];e.vertices=n,e.axes=r,e.type=a.BOX,s.call(this,e)}(((t.exports=n).prototype=new s).constructor=n).prototype.computeMomentOfInertia=function(e){var t=this.width,i=this.height;return e*(i*i+t*t)/12},n.prototype.updateBoundingRadius=function(){var e=this.width,t=this.height;this.boundingRadius=Math.sqrt(e*e+t*t)/2};o.create(),o.create(),o.create(),o.create();n.prototype.computeAABB=function(e,t,i){e.setFromPoints(this.vertices,t,i,0)},n.prototype.updateArea=function(){this.area=this.width*this.height}},{"../math/vec2":30,"./Convex":40,"./Shape":45}],38:[function(e,t,i){var n=e("./Shape"),w=e("../math/vec2");function r(e){"number"==typeof e&&"number"==typeof arguments[1]&&(e={length:e,radius:arguments[1]}),e=e||{},this.length=e.length||1,this.radius=e.radius||1,e.type=n.CAPSULE,n.call(this,e)}(((t.exports=r).prototype=new n).constructor=r).prototype.computeMomentOfInertia=function(e){var t=this.radius,i=this.length+t,n=2*t;return e*(n*n+i*i)/12},r.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius+this.length/2},r.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius+2*this.radius*this.length};var o=w.create();r.prototype.computeAABB=function(e,t,i){var n=this.radius;w.set(o,this.length/2,0),0!==i&&w.rotate(o,o,i),w.set(e.upperBound,Math.max(o[0]+n,-o[0]+n),Math.max(o[1]+n,-o[1]+n)),w.set(e.lowerBound,Math.min(o[0]-n,-o[0]-n),Math.min(o[1]-n,-o[1]-n)),w.add(e.lowerBound,e.lowerBound,t),w.add(e.upperBound,e.upperBound,t)};var b=w.create(),S=w.create(),C=w.create(),M=w.create(),P=w.fromValues(0,1);r.prototype.raycast=function(e,t,i,n){for(var r=t.from,o=t.to,a=(t.direction,b),s=S,p=C,l=M,h=this.length/2,u=0;u<2;u++){var d=this.radius*(2*u-1);if(w.set(p,-h,d),w.set(l,h,d),w.toGlobalFrame(p,p,i,n),w.toGlobalFrame(l,l,i,n),0<=(_=w.getLineSegmentsIntersectionFraction(r,o,p,l))&&(w.rotate(s,P,n),w.scale(s,s,2*u-1),t.reportIntersection(e,_,s,-1),e.shouldStop(t)))return}var c=Math.pow(this.radius,2)+Math.pow(h,2);for(u=0;u<2;u++){w.set(p,h*(2*u-1),0),w.toGlobalFrame(p,p,i,n);var _,y=Math.pow(o[0]-r[0],2)+Math.pow(o[1]-r[1],2),x=2*((o[0]-r[0])*(r[0]-p[0])+(o[1]-r[1])*(r[1]-p[1])),m=Math.pow(r[0]-p[0],2)+Math.pow(r[1]-p[1],2)-Math.pow(this.radius,2);if(!((_=Math.pow(x,2)-4*y*m)<0))if(0===_){if(w.lerp(a,r,o,_),w.squaredDistance(a,i)>c&&(w.sub(s,a,p),w.normalize(s,s),t.reportIntersection(e,_,s,-1),e.shouldStop(t)))return}else{var g=Math.sqrt(_),f=1/(2*y),v=(-x-g)*f,z=(-x+g)*f;if(0<=v&&v<=1&&(w.lerp(a,r,o,v),w.squaredDistance(a,i)>c&&(w.sub(s,a,p),w.normalize(s,s),t.reportIntersection(e,v,s,-1),e.shouldStop(t))))return;if(0<=z&&z<=1&&(w.lerp(a,r,o,z),w.squaredDistance(a,i)>c&&(w.sub(s,a,p),w.normalize(s,s),t.reportIntersection(e,z,s,-1),e.shouldStop(t))))return}}}},{"../math/vec2":30,"./Shape":45}],39:[function(e,t,i){var n=e("./Shape"),m=e("../math/vec2");function r(e){"number"==typeof e&&(e={radius:e}),e=e||{},this.radius=e.radius||1,e.type=n.CIRCLE,n.call(this,e)}(((t.exports=r).prototype=new n).constructor=r).prototype.computeMomentOfInertia=function(e){var t=this.radius;return e*t*t/2},r.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius},r.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius},r.prototype.computeAABB=function(e,t,i){var n=this.radius;m.set(e.upperBound,n,n),m.set(e.lowerBound,-n,-n),t&&(m.add(e.lowerBound,e.lowerBound,t),m.add(e.upperBound,e.upperBound,t))};var g=m.create(),f=m.create();r.prototype.raycast=function(e,t,i,n){var r=t.from,o=t.to,a=this.radius,s=Math.pow(o[0]-r[0],2)+Math.pow(o[1]-r[1],2),p=2*((o[0]-r[0])*(r[0]-i[0])+(o[1]-r[1])*(r[1]-i[1])),l=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2)-Math.pow(a,2),h=Math.pow(p,2)-4*s*l,u=g,d=f;if(!(h<0))if(0===h)m.lerp(u,r,o,h),m.sub(d,u,i),m.normalize(d,d),t.reportIntersection(e,h,d,-1);else{var c=Math.sqrt(h),_=1/(2*s),y=(-p-c)*_,x=(-p+c)*_;if(0<=y&&y<=1&&(m.lerp(u,r,o,y),m.sub(d,u,i),m.normalize(d,d),t.reportIntersection(e,y,d,-1),e.shouldStop(t)))return;0<=x&&x<=1&&(m.lerp(u,r,o,x),m.sub(d,u,i),m.normalize(d,d),t.reportIntersection(e,x,d,-1))}}},{"../math/vec2":30,"./Shape":45}],40:[function(e,t,i){var p=e("./Shape"),c=e("../math/vec2"),s=e("../math/polyk");e("poly-decomp");function d(e){Array.isArray(e)&&(e={vertices:e,axes:arguments[1]}),e=e||{},this.vertices=[];for(var t=void 0!==e.vertices?e.vertices:[],i=0;i<t.length;i++){var n=c.create();c.copy(n,t[i]),this.vertices.push(n)}if(this.axes=[],e.axes)for(i=0;i<e.axes.length;i++){var r=c.create();c.copy(r,e.axes[i]),this.axes.push(r)}else for(i=0;i<this.vertices.length;i++){var o=this.vertices[i],a=this.vertices[(i+1)%this.vertices.length],s=c.create();c.sub(s,a,o),c.rotate90cw(s,s),c.normalize(s,s),this.axes.push(s)}if(this.centerOfMass=c.fromValues(0,0),this.triangles=[],this.vertices.length&&(this.updateTriangles(),this.updateCenterOfMass()),this.boundingRadius=0,e.type=p.CONVEX,p.call(this,e),this.updateBoundingRadius(),this.updateArea(),this.area<0)throw new Error("Convex vertices must be given in conter-clockwise winding.")}((t.exports=d).prototype=new p).constructor=d;var l=c.create(),a=c.create();d.prototype.projectOntoLocalAxis=function(e,t){for(var i,n,r=null,o=null,a=(e=l,0);a<this.vertices.length;a++)i=this.vertices[a],n=c.dot(i,e),(null===r||r<n)&&(r=n),(null===o||n<o)&&(o=n);if(r<o){var s=o;o=r,r=s}c.set(t,o,r)},d.prototype.projectOntoWorldAxis=function(e,t,i,n){var r=a;this.projectOntoLocalAxis(e,n),0!==i?c.rotate(r,e,i):r=e;var o=c.dot(t,r);c.set(n,n[0]+o,n[1]+o)},d.prototype.updateTriangles=function(){for(var e=[],t=this.triangles.length=0;t<this.vertices.length;t++){var i=this.vertices[t];e.push(i[0],i[1])}var n=s.Triangulate(e);for(t=0;t<n.length;t+=3){var r=n[t],o=n[t+1],a=n[t+2];this.triangles.push([r,o,a])}};var _=c.create(),y=c.create(),x=c.create(),m=c.create(),g=c.create();c.create(),c.create(),c.create(),c.create();d.prototype.updateCenterOfMass=function(){var e=this.triangles,t=this.vertices,i=this.centerOfMass,n=_,r=x,o=m,a=g,s=y;c.set(i,0,0);for(var p=0,l=0;l!==e.length;l++){var h=e[l];r=t[h[0]],o=t[h[1]],a=t[h[2]];c.centroid(n,r,o,a);var u=d.triangleArea(r,o,a);p+=u,c.scale(s,n,u),c.add(i,i,s)}c.scale(i,i,1/p)},d.prototype.computeMomentOfInertia=function(e){for(var t=0,i=0,n=this.vertices.length,r=n-1,o=0;o<n;r=o,o++){var a=this.vertices[r],s=this.vertices[o],p=Math.abs(c.crossLength(a,s));t+=p*(c.dot(s,s)+c.dot(s,a)+c.dot(a,a)),i+=p}return e/6*(t/i)},d.prototype.updateBoundingRadius=function(){for(var e=this.vertices,t=0,i=0;i!==e.length;i++){var n=c.squaredLength(e[i]);t<n&&(t=n)}this.boundingRadius=Math.sqrt(t)},d.triangleArea=function(e,t,i){return.5*((t[0]-e[0])*(i[1]-e[1])-(i[0]-e[0])*(t[1]-e[1]))},d.prototype.updateArea=function(){this.updateTriangles(),this.area=0;for(var e=this.triangles,t=this.vertices,i=0;i!==e.length;i++){var n=e[i],r=t[n[0]],o=t[n[1]],a=t[n[2]],s=d.triangleArea(r,o,a);this.area+=s}},d.prototype.computeAABB=function(e,t,i){e.setFromPoints(this.vertices,t,i,0)};var f=c.create(),v=c.create(),z=c.create();d.prototype.raycast=function(e,t,i,n){var r=f,o=v,a=z,s=this.vertices;c.toLocalFrame(r,t.from,i,n),c.toLocalFrame(o,t.to,i,n);for(var p=s.length,l=0;l<p&&!e.shouldStop(t);l++){var h=s[l],u=s[(l+1)%p],d=c.getLineSegmentsIntersectionFraction(r,o,h,u);0<=d&&(c.sub(a,u,h),c.rotate(a,a,-Math.PI/2+n),c.normalize(a,a),t.reportIntersection(e,d,a,l))}}},{"../math/polyk":29,"../math/vec2":30,"./Shape":45,"poly-decomp":5}],41:[function(e,t,i){var n=e("./Shape"),x=e("../math/vec2");e("../utils/Utils");function r(e){if(Array.isArray(e)&&(e={heights:e},"object"==typeof arguments[1]))for(var t in arguments[1])e[t]=arguments[1][t];e=e||{},this.heights=e.heights?e.heights.slice(0):[],this.maxValue=e.maxValue||null,this.minValue=e.minValue||null,this.elementWidth=e.elementWidth||.1,void 0!==e.maxValue&&void 0!==e.minValue||this.updateMaxMinValues(),e.type=n.HEIGHTFIELD,n.call(this,e)}(((t.exports=r).prototype=new n).constructor=r).prototype.updateMaxMinValues=function(){for(var e=this.heights,t=e[0],i=e[0],n=0;n!==e.length;n++){var r=e[n];t<r&&(t=r),r<i&&(i=r)}this.maxValue=t,this.minValue=i},r.prototype.computeMomentOfInertia=function(e){return Number.MAX_VALUE},r.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},r.prototype.updateArea=function(){for(var e=this.heights,t=0,i=0;i<e.length-1;i++)t+=(e[i]+e[i+1])/2*this.elementWidth;this.area=t};var o=[x.create(),x.create(),x.create(),x.create()];r.prototype.computeAABB=function(e,t,i){x.set(o[0],0,this.maxValue),x.set(o[1],this.elementWidth*this.heights.length,this.maxValue),x.set(o[2],this.elementWidth*this.heights.length,this.minValue),x.set(o[3],0,this.minValue),e.setFromPoints(o,t,i)},r.prototype.getLineSegment=function(e,t,i){var n=this.heights,r=this.elementWidth;x.set(e,i*r,n[i]),x.set(t,(i+1)*r,n[i+1])},r.prototype.getSegmentIndex=function(e){return Math.floor(e[0]/this.elementWidth)},r.prototype.getClampedSegmentIndex=function(e){var t=this.getSegmentIndex(e);return t=Math.min(this.heights.length,Math.max(t,0))};x.create();var m=x.create(),g=x.create(),f=x.create(),v=x.create(),z=x.create();x.fromValues(0,1);r.prototype.raycast=function(e,t,i,n){var r=t.from,o=t.to,a=(t.direction,m),s=g,p=f,l=v,h=z;x.toLocalFrame(l,r,i,n),x.toLocalFrame(h,o,i,n);var u=this.getClampedSegmentIndex(l),d=this.getClampedSegmentIndex(h);if(d<u){var c=u;u=d,d=c}for(var _=0;_<this.heights.length-1;_++){this.getLineSegment(s,p,_);var y=x.getLineSegmentsIntersectionFraction(l,h,s,p);if(0<=y&&(x.sub(a,p,s),x.rotate(a,a,n+Math.PI/2),x.normalize(a,a),t.reportIntersection(e,y,a,-1),e.shouldStop(t)))return}}},{"../math/vec2":30,"../utils/Utils":57,"./Shape":45}],42:[function(e,t,i){var n=e("./Shape"),u=e("../math/vec2");function r(e){"number"==typeof e&&(e={length:e}),e=e||{},this.length=e.length||1,e.type=n.LINE,n.call(this,e)}(((t.exports=r).prototype=new n).constructor=r).prototype.computeMomentOfInertia=function(e){return e*Math.pow(this.length,2)/12},r.prototype.updateBoundingRadius=function(){this.boundingRadius=this.length/2};var o=[u.create(),u.create()];r.prototype.computeAABB=function(e,t,i){var n=this.length/2;u.set(o[0],-n,0),u.set(o[1],n,0),e.setFromPoints(o,t,i,0)};u.create();var d=u.create(),c=u.create(),_=u.create(),y=u.fromValues(0,1);r.prototype.raycast=function(e,t,i,n){var r=t.from,o=t.to,a=c,s=_,p=this.length/2;u.set(a,-p,0),u.set(s,p,0),u.toGlobalFrame(a,a,i,n),u.toGlobalFrame(s,s,i,n);var l=u.getLineSegmentsIntersectionFraction(a,s,r,o);if(0<=l){var h=d;u.rotate(h,y,n),t.reportIntersection(e,l,h,-1)}}},{"../math/vec2":30,"./Shape":45}],43:[function(e,t,i){var n=e("./Shape"),r=e("../math/vec2");function o(e){(e=e||{}).type=n.PARTICLE,n.call(this,e)}(((t.exports=o).prototype=new n).constructor=o).prototype.computeMomentOfInertia=function(e){return 0},o.prototype.updateBoundingRadius=function(){this.boundingRadius=0},o.prototype.computeAABB=function(e,t,i){r.copy(e.lowerBound,t),r.copy(e.upperBound,t)}},{"../math/vec2":30,"./Shape":45}],44:[function(e,t,i){var n=e("./Shape"),c=e("../math/vec2");e("../utils/Utils");function r(e){(e=e||{}).type=n.PLANE,n.call(this,e)}(((t.exports=r).prototype=new n).constructor=r).prototype.computeMomentOfInertia=function(e){return 0},r.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},r.prototype.computeAABB=function(e,t,i){var n=i%(2*Math.PI),r=c.set,o=Number.MAX_VALUE,a=e.lowerBound,s=e.upperBound;0===n?(r(a,-o,-o),r(s,o,0)):n===Math.PI/2?(r(a,0,-o),r(s,o,o)):n===Math.PI?(r(a,-o,0),r(s,o,o)):n===3*Math.PI/2?(r(a,-o,-o),r(s,0,o)):(r(a,-o,-o),r(s,o,o)),c.add(a,a,t),c.add(s,s,t)},r.prototype.updateArea=function(){this.area=Number.MAX_VALUE};var _=c.create(),y=(c.create(),c.create(),c.create()),x=c.create();r.prototype.raycast=function(e,t,i,n){var r=t.from,o=t.to,a=t.direction,s=_,p=y,l=x;c.set(p,0,1),c.rotate(p,p,n),c.sub(l,r,i);var h=c.dot(l,p);if(c.sub(l,o,i),!(0<h*c.dot(l,p)||c.squaredDistance(r,o)<h*h)){var u=c.dot(p,a);c.sub(s,r,i);var d=-c.dot(p,s)/u/t.length;t.reportIntersection(e,d,p,-1)}}},{"../math/vec2":30,"../utils/Utils":57,"./Shape":45}],45:[function(e,t,i){t.exports=r;var n=e("../math/vec2");function r(e){e=e||{},this.body=null,this.position=n.fromValues(0,0),e.position&&n.copy(this.position,e.position),this.angle=e.angle||0,this.type=e.type||0,this.id=r.idCounter++,this.boundingRadius=0,this.collisionGroup=void 0!==e.collisionGroup?e.collisionGroup:1,this.collisionResponse=void 0===e.collisionResponse||e.collisionResponse,this.collisionMask=void 0!==e.collisionMask?e.collisionMask:1,this.material=e.material||null,this.area=0,this.sensor=void 0!==e.sensor&&e.sensor,this.type&&this.updateBoundingRadius(),this.updateArea()}r.idCounter=0,r.CIRCLE=1,r.PARTICLE=2,r.PLANE=4,r.CONVEX=8,r.LINE=16,r.BOX=32,Object.defineProperty(r,"RECTANGLE",{get:function(){return r.BOX}}),r.CAPSULE=64,r.HEIGHTFIELD=128,r.prototype.computeMomentOfInertia=function(e){},r.prototype.updateBoundingRadius=function(){},r.prototype.updateArea=function(){},r.prototype.computeAABB=function(e,t,i){},r.prototype.raycast=function(e,t,i,n){}},{"../math/vec2":30}],46:[function(e,t,i){var w=e("../math/vec2"),n=e("./Solver"),b=e("../utils/Utils"),S=e("../equations/FrictionEquation");function C(e){n.call(this,e,n.GS),e=e||{},this.iterations=e.iterations||10,this.tolerance=e.tolerance||1e-7,this.arrayStep=30,this.lambda=new b.ARRAY_TYPE(this.arrayStep),this.Bs=new b.ARRAY_TYPE(this.arrayStep),this.invCs=new b.ARRAY_TYPE(this.arrayStep),this.useZeroRHS=!1,this.frictionIterations=0,this.usedIterations=0}(((t.exports=C).prototype=new n).constructor=C).prototype.solve=function(e,t){this.sortEquations();var i=0,n=this.iterations,r=this.frictionIterations,o=this.equations,a=o.length,s=Math.pow(this.tolerance*a,2),p=t.bodies,l=t.bodies.length,h=(w.add,w.set,this.useZeroRHS),u=this.lambda;if(this.usedIterations=0,a)for(var d=0;d!==l;d++){p[d].updateSolveMassProperties()}u.length<a&&(u=this.lambda=new b.ARRAY_TYPE(a+this.arrayStep),this.Bs=new b.ARRAY_TYPE(a+this.arrayStep),this.invCs=new b.ARRAY_TYPE(a+this.arrayStep)),function(e){for(var t=e.length;t--;)e[t]=0}(u);var c,_,y=this.invCs,x=this.Bs;for(u=this.lambda,d=0;d!==o.length;d++){var m;((m=o[d]).timeStep!==e||m.needsUpdate)&&(m.timeStep=e,m.update()),x[d]=m.computeB(m.a,m.b,e),y[d]=m.computeInvC(m.epsilon)}if(0!==a){for(d=0;d!==l;d++){p[d].resetConstraintVelocity()}if(r){for(i=0;i!==r;i++){for(_=c=0;_!==a;_++){m=o[_];var g=C.iterateEquation(_,m,m.epsilon,x,y,u,h,e,i);c+=Math.abs(g)}if(this.usedIterations++,c*c<=s)break}for(C.updateMultipliers(o,u,1/e),_=0;_!==a;_++){var f=o[_];if(f instanceof S){for(var v=0,z=0;z!==f.contactEquations.length;z++)v+=f.contactEquations[z].multiplier;v*=f.frictionCoefficient/f.contactEquations.length,f.maxForce=v,f.minForce=-v}}}for(i=0;i!==n;i++){for(_=c=0;_!==a;_++){m=o[_];g=C.iterateEquation(_,m,m.epsilon,x,y,u,h,e,i);c+=Math.abs(g)}if(this.usedIterations++,c*c<=s)break}for(d=0;d!==l;d++)p[d].addConstraintVelocity();C.updateMultipliers(o,u,1/e)}},C.updateMultipliers=function(e,t,i){for(var n=e.length;n--;)e[n].multiplier=t[n]*i},C.iterateEquation=function(e,t,i,n,r,o,a,s,p){var l=n[e],h=r[e],u=o[e],d=t.computeGWlambda(),c=t.maxForce,_=t.minForce;a&&(l=0);var y=h*(l-d-i*u),x=u+y;return x<_*s?y=_*s-u:c*s<x&&(y=c*s-u),o[e]+=y,t.addToWlambda(y),y}},{"../equations/FrictionEquation":23,"../math/vec2":30,"../utils/Utils":57,"./Solver":47}],47:[function(e,t,i){e("../utils/Utils");var n=e("../events/EventEmitter");function r(e,t){e=e||{},n.call(this),this.type=t,this.equations=[],this.equationSortFunction=e.equationSortFunction||!1}(((t.exports=r).prototype=new n).constructor=r).prototype.solve=function(e,t){throw new Error("Solver.solve should be implemented by subclasses!")};var o={bodies:[]};r.prototype.solveIsland=function(e,t){this.removeAllEquations(),t.equations.length&&(this.addEquations(t.equations),o.bodies.length=0,t.getBodies(o.bodies),o.bodies.length&&this.solve(e,o))},r.prototype.sortEquations=function(){this.equationSortFunction&&this.equations.sort(this.equationSortFunction)},r.prototype.addEquation=function(e){e.enabled&&this.equations.push(e)},r.prototype.addEquations=function(e){for(var t=0,i=e.length;t!==i;t++){var n=e[t];n.enabled&&this.equations.push(n)}},r.prototype.removeEquation=function(e){var t=this.equations.indexOf(e);-1!==t&&this.equations.splice(t,1)},r.prototype.removeAllEquations=function(){this.equations.length=0},r.GS=1,r.ISLAND=2},{"../events/EventEmitter":26,"../utils/Utils":57}],48:[function(e,t,i){var n=e("../equations/ContactEquation"),r=e("./Pool");function o(){r.apply(this,arguments)}(((t.exports=o).prototype=new r).constructor=o).prototype.create=function(){return new n},o.prototype.destroy=function(e){return e.bodyA=e.bodyB=null,this}},{"../equations/ContactEquation":21,"./Pool":55}],49:[function(e,t,i){var n=e("../equations/FrictionEquation"),r=e("./Pool");function o(){r.apply(this,arguments)}(((t.exports=o).prototype=new r).constructor=o).prototype.create=function(){return new n},o.prototype.destroy=function(e){return e.bodyA=e.bodyB=null,this}},{"../equations/FrictionEquation":23,"./Pool":55}],50:[function(e,t,i){var n=e("../world/IslandNode"),r=e("./Pool");function o(){r.apply(this,arguments)}(((t.exports=o).prototype=new r).constructor=o).prototype.create=function(){return new n},o.prototype.destroy=function(e){return e.reset(),this}},{"../world/IslandNode":60,"./Pool":55}],51:[function(e,t,i){var n=e("../world/Island"),r=e("./Pool");function o(){r.apply(this,arguments)}(((t.exports=o).prototype=new r).constructor=o).prototype.create=function(){return new n},o.prototype.destroy=function(e){return e.reset(),this}},{"../world/Island":58,"./Pool":55}],52:[function(e,t,i){var n=e("./TupleDictionary"),r=(e("./OverlapKeeperRecord"),e("./OverlapKeeperRecordPool"));e("./Utils");function o(){this.overlappingShapesLastState=new n,this.overlappingShapesCurrentState=new n,this.recordPool=new r({size:16}),this.tmpDict=new n,this.tmpArray1=[]}(t.exports=o).prototype.tick=function(){for(var e=this.overlappingShapesLastState,t=this.overlappingShapesCurrentState,i=e.keys.length;i--;){var n=e.keys[i],r=e.getByKey(n);t.getByKey(n);r&&this.recordPool.release(r)}e.reset(),e.copy(t),t.reset()},o.prototype.setOverlapping=function(e,t,i,n){this.overlappingShapesLastState;var r=this.overlappingShapesCurrentState;if(!r.get(t.id,n.id)){var o=this.recordPool.get();o.set(e,t,i,n),r.set(t.id,n.id,o)}},o.prototype.getNewOverlaps=function(e){return this.getDiff(this.overlappingShapesLastState,this.overlappingShapesCurrentState,e)},o.prototype.getEndOverlaps=function(e){return this.getDiff(this.overlappingShapesCurrentState,this.overlappingShapesLastState,e)},o.prototype.bodiesAreOverlapping=function(e,t){for(var i=this.overlappingShapesCurrentState,n=i.keys.length;n--;){var r=i.keys[n],o=i.data[r];if(o.bodyA===e&&o.bodyB===t||o.bodyA===t&&o.bodyB===e)return!0}return!1},o.prototype.getDiff=function(e,t,i){var n=e,r=t;(i=i||[]).length=0;for(var o=r.keys.length;o--;){var a=r.keys[o],s=r.data[a];if(!s)throw new Error("Key "+a+" had no data!");n.data[a]||i.push(s)}return i},o.prototype.isNewOverlap=function(e,t){var i=0|e.id,n=0|t.id,r=this.overlappingShapesLastState,o=this.overlappingShapesCurrentState;return!r.get(i,n)&&!!o.get(i,n)},o.prototype.getNewBodyOverlaps=function(e){this.tmpArray1.length=0;var t=this.getNewOverlaps(this.tmpArray1);return this.getBodyDiff(t,e)},o.prototype.getEndBodyOverlaps=function(e){this.tmpArray1.length=0;var t=this.getEndOverlaps(this.tmpArray1);return this.getBodyDiff(t,e)},o.prototype.getBodyDiff=function(e,t){t=t||[];for(var i=this.tmpDict,n=e.length;n--;){var r=e[n];i.set(0|r.bodyA.id,0|r.bodyB.id,r)}for(n=i.keys.length;n--;){(r=i.getByKey(i.keys[n]))&&t.push(r.bodyA,r.bodyB)}return i.reset(),t}},{"./OverlapKeeperRecord":53,"./OverlapKeeperRecordPool":54,"./TupleDictionary":56,"./Utils":57}],53:[function(e,t,i){function r(e,t,i,n){this.shapeA=t,this.shapeB=n,this.bodyA=e,this.bodyB=i}(t.exports=r).prototype.set=function(e,t,i,n){r.call(this,e,t,i,n)}},{}],54:[function(e,t,i){var n=e("./OverlapKeeperRecord"),r=e("./Pool");function o(){r.apply(this,arguments)}(((t.exports=o).prototype=new r).constructor=o).prototype.create=function(){return new n},o.prototype.destroy=function(e){return e.bodyA=e.bodyB=e.shapeA=e.shapeB=null,this}},{"./OverlapKeeperRecord":53,"./Pool":55}],55:[function(e,t,i){function n(e){e=e||{},this.objects=[],void 0!==e.size&&this.resize(e.size)}(t.exports=n).prototype.resize=function(e){for(var t=this.objects;t.length>e;)t.pop();for(;t.length<e;)t.push(this.create());return this},n.prototype.get=function(){var e=this.objects;return e.length?e.pop():this.create()},n.prototype.release=function(e){return this.destroy(e),this.objects.push(e),this}},{}],56:[function(e,t,i){var n=e("./Utils");function r(){this.data={},this.keys=[]}(t.exports=r).prototype.getKey=function(e,t){return(0|(e|=0))==(0|(t|=0))?-1:0|((0|t)<(0|e)?e<<16|65535&t:t<<16|65535&e)},r.prototype.getByKey=function(e){return e|=0,this.data[e]},r.prototype.get=function(e,t){return this.data[this.getKey(e,t)]},r.prototype.set=function(e,t,i){if(!i)throw new Error("No data!");var n=this.getKey(e,t);return this.data[n]||this.keys.push(n),this.data[n]=i,n},r.prototype.reset=function(){for(var e=this.data,t=this.keys,i=t.length;i--;)delete e[t[i]];t.length=0},r.prototype.copy=function(e){this.reset(),n.appendArray(this.keys,e.keys);for(var t=e.keys.length;t--;){var i=e.keys[t];this.data[i]=e.data[i]}}},{"./Utils":57}],57:[function(e,t,i){function n(){}(t.exports=n).appendArray=function(e,t){if(t.length<15e4)e.push.apply(e,t);else for(var i=0,n=t.length;i!==n;++i)e.push(t[i])},n.splice=function(e,t,i){i=i||1;for(var n=t,r=e.length-i;n<r;n++)e[n]=e[n+i];e.length=r},n.ARRAY_TYPE="undefined"!=typeof P2_ARRAY_TYPE?P2_ARRAY_TYPE:"undefined"!=typeof Float32Array?Float32Array:Array,n.extend=function(e,t){for(var i in t)e[i]=t[i]},n.defaults=function(e,t){for(var i in e=e||{},t)i in e||(e[i]=t[i]);return e}},{}],58:[function(e,t,i){var n=e("../objects/Body");function r(){this.equations=[],this.bodies=[]}(t.exports=r).prototype.reset=function(){this.equations.length=this.bodies.length=0};var o=[];r.prototype.getBodies=function(e){for(var t=e||[],i=this.equations,n=o.length=0;n!==i.length;n++){var r=i[n];-1===o.indexOf(r.bodyA.id)&&(t.push(r.bodyA),o.push(r.bodyA.id)),-1===o.indexOf(r.bodyB.id)&&(t.push(r.bodyB),o.push(r.bodyB.id))}return t},r.prototype.wantsToSleep=function(){for(var e=0;e<this.bodies.length;e++){var t=this.bodies[e];if(t.type===n.DYNAMIC&&!t.wantsToSleep)return!1}return!0},r.prototype.sleep=function(){for(var e=0;e<this.bodies.length;e++){this.bodies[e].sleep()}return!0}},{"../objects/Body":31}],59:[function(e,t,i){e("../math/vec2"),e("./Island"),e("./IslandNode");var n=e("./../utils/IslandNodePool"),r=e("./../utils/IslandPool"),a=e("../objects/Body");function _(e){this.nodePool=new n({size:16}),this.islandPool=new r({size:8}),this.equations=[],this.islands=[],this.nodes=[],this.queue=[]}(t.exports=_).getUnvisitedNode=function(e){for(var t=e.length,i=0;i!==t;i++){var n=e[i];if(!n.visited&&n.body.type===a.DYNAMIC)return n}return!1},_.prototype.visit=function(e,t,i){t.push(e.body);for(var n=e.equations.length,r=0;r!==n;r++){var o=e.equations[r];-1===i.indexOf(o)&&i.push(o)}},_.prototype.bfs=function(e,t,i){var n=this.queue;for(n.length=0,n.push(e),e.visited=!0,this.visit(e,t,i);n.length;)for(var r,o=n.pop();r=_.getUnvisitedNode(o.neighbors);)r.visited=!0,this.visit(r,t,i),r.body.type===a.DYNAMIC&&n.push(r)},_.prototype.split=function(e){for(var t=e.bodies,i=this.nodes,n=this.equations;i.length;)this.nodePool.release(i.pop());for(var r=0;r!==t.length;r++){var o=this.nodePool.get();o.body=t[r],i.push(o)}for(var a=0;a!==n.length;a++){var s=n[a],p=(r=t.indexOf(s.bodyA),t.indexOf(s.bodyB)),l=i[r],h=i[p];l.neighbors.push(h),h.neighbors.push(l),l.equations.push(s),h.equations.push(s)}var u,d=this.islands;for(r=0;r<d.length;r++)this.islandPool.release(d[r]);for(d.length=0;u=_.getUnvisitedNode(i);){var c=this.islandPool.get();this.bfs(u,c.bodies,c.equations),d.push(c)}return d}},{"../math/vec2":30,"../objects/Body":31,"./../utils/IslandNodePool":50,"./../utils/IslandPool":51,"./Island":58,"./IslandNode":60}],60:[function(e,t,i){function n(e){this.body=e,this.neighbors=[],this.equations=[],this.visited=!1}(t.exports=n).prototype.reset=function(){this.equations.length=0,this.neighbors.length=0,this.visited=!1,this.body=null}},{}],61:[function(e,t,i){var n=e("../solver/GSSolver"),W=(e("../solver/Solver"),e("../collision/Ray"),e("../math/vec2")),m=e("../shapes/Circle"),g=e("../shapes/Convex"),f=(e("../shapes/Line"),e("../shapes/Plane")),v=e("../shapes/Capsule"),z=e("../shapes/Particle"),r=e("../events/EventEmitter"),q=e("../objects/Body"),o=(e("../shapes/Shape"),e("../objects/LinearSpring"),e("../material/Material")),a=e("../material/ContactMaterial"),s=(e("../constraints/DistanceConstraint"),e("../constraints/Constraint"),e("../constraints/LockConstraint"),e("../constraints/RevoluteConstraint"),e("../constraints/PrismaticConstraint"),e("../constraints/GearConstraint"),e("../../package.json"),e("../collision/Broadphase"),e("../collision/AABB")),p=e("../collision/SAPBroadphase"),l=e("../collision/Narrowphase"),X=e("../utils/Utils"),h=e("../utils/OverlapKeeper"),u=e("./IslandManager");e("../objects/RotationalSpring");function Y(e){r.apply(this),e=e||{},this.springs=[],this.bodies=[],this.disabledBodyCollisionPairs=[],this.solver=e.solver||new n,this.narrowphase=new l(this),this.islandManager=new u,this.gravity=W.fromValues(0,-9.78),e.gravity&&W.copy(this.gravity,e.gravity),this.frictionGravity=W.length(this.gravity)||10,this.useWorldGravityAsFrictionGravity=!0,this.useFrictionGravityOnZeroGravity=!0,this.broadphase=e.broadphase||new p,this.broadphase.setWorld(this),this.constraints=[],this.defaultMaterial=new o,this.defaultContactMaterial=new a(this.defaultMaterial,this.defaultMaterial),this.lastTimeStep=1/60,this.applySpringForces=!0,this.applyDamping=!0,this.applyGravity=!0,this.solveConstraints=!0,this.contactMaterials=[],this.time=0,this.accumulator=0,this.stepping=!1,this.bodiesToBeRemoved=[],this.islandSplit=void 0===e.islandSplit||!!e.islandSplit,this.emitImpactEvent=!0,this._constraintIdCounter=0,this._bodyIdCounter=0,this.postStepEvent={type:"postStep"},this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.addSpringEvent={type:"addSpring",spring:null},this.impactEvent={type:"impact",bodyA:null,bodyB:null,shapeA:null,shapeB:null,contactEquation:null},this.postBroadphaseEvent={type:"postBroadphase",pairs:null},this.sleepMode=Y.NO_SLEEPING,this.beginContactEvent={type:"beginContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null,contactEquations:[]},this.endContactEvent={type:"endContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null},this.preSolveEvent={type:"preSolve",contactEquations:null,frictionEquations:null},this.overlappingShapesLastState={keys:[]},this.overlappingShapesCurrentState={keys:[]},this.overlapKeeper=new h}(((t.exports=Y).prototype=new Object(r.prototype)).constructor=Y).NO_SLEEPING=1,Y.BODY_SLEEPING=2,Y.ISLAND_SLEEPING=4,Y.prototype.addConstraint=function(e){this.constraints.push(e)},Y.prototype.addContactMaterial=function(e){this.contactMaterials.push(e)},Y.prototype.removeContactMaterial=function(e){var t=this.contactMaterials.indexOf(e);-1!==t&&X.splice(this.contactMaterials,t,1)},Y.prototype.getContactMaterial=function(e,t){for(var i=this.contactMaterials,n=0,r=i.length;n!==r;n++){var o=i[n];if(o.materialA.id===e.id&&o.materialB.id===t.id||o.materialA.id===t.id&&o.materialB.id===e.id)return o}return!1},Y.prototype.removeConstraint=function(e){var t=this.constraints.indexOf(e);-1!==t&&X.splice(this.constraints,t,1)};W.create(),W.create(),W.create(),W.create(),W.create(),W.create();var K=W.create(),S=W.fromValues(0,0),C=W.fromValues(0,0);W.fromValues(0,0),W.fromValues(0,0);Y.prototype.step=function(e,t,i){if(i=i||10,0===(t=t||0))this.internalStep(e),this.time+=e;else{this.accumulator+=t;for(var n=0;this.accumulator>=e&&n<i;)this.internalStep(e),this.time+=e,this.accumulator-=e,n++;for(var r=this.accumulator%e/e,o=0;o!==this.bodies.length;o++){var a=this.bodies[o];W.lerp(a.interpolatedPosition,a.previousPosition,a.position,r),a.interpolatedAngle=a.previousAngle+r*(a.angle-a.previousAngle)}}};var Z=[];Y.prototype.internalStep=function(e){this.stepping=!0;var t=this.springs.length,i=this.springs,n=this.bodies,r=this.gravity,o=this.solver,a=this.bodies.length,s=this.broadphase,p=this.narrowphase,l=this.constraints,h=K,u=(W.scale,W.add),d=(W.rotate,this.islandManager);if(this.overlapKeeper.tick(),this.lastTimeStep=e,this.useWorldGravityAsFrictionGravity){var c=W.length(this.gravity);0===c&&this.useFrictionGravityOnZeroGravity||(this.frictionGravity=c)}if(this.applyGravity)for(var _=0;_!==a;_++){var y=(x=n[_]).force;x.type===q.DYNAMIC&&x.sleepState!==q.SLEEPING&&(W.scale(h,r,x.mass*x.gravityScale),u(y,y,h))}if(this.applySpringForces)for(_=0;_!==t;_++){i[_].applyForce()}if(this.applyDamping)for(_=0;_!==a;_++){var x;(x=n[_]).type===q.DYNAMIC&&x.applyDamping(e)}var m=s.getCollisionPairs(this),g=this.disabledBodyCollisionPairs;for(_=g.length-2;0<=_;_-=2)for(var f=m.length-2;0<=f;f-=2)(g[_]===m[f]&&g[_+1]===m[f+1]||g[_+1]===m[f]&&g[_]===m[f+1])&&m.splice(f,2);var v=l.length;for(_=0;_!==v;_++){var z=l[_];if(!z.collideConnected)for(f=m.length-2;0<=f;f-=2)(z.bodyA===m[f]&&z.bodyB===m[f+1]||z.bodyB===m[f]&&z.bodyA===m[f+1])&&m.splice(f,2)}this.postBroadphaseEvent.pairs=m,this.emit(this.postBroadphaseEvent),this.postBroadphaseEvent.pairs=null,p.reset(this);_=0;for(var w=m.length;_!==w;_+=2)for(var b=m[_],S=m[_+1],C=0,M=b.shapes.length;C!==M;C++)for(var P=b.shapes[C],k=P.position,T=P.angle,A=0,O=S.shapes.length;A!==O;A++){var E=S.shapes[A],G=E.position,D=E.angle,I=this.defaultContactMaterial;if(P.material&&E.material){var L=this.getContactMaterial(P.material,E.material);L&&(I=L)}this.runNarrowphase(p,b,P,k,T,S,E,G,D,I,this.frictionGravity)}for(_=0;_!==a;_++){(j=n[_])._wakeUpAfterNarrowphase&&(j.wakeUp(),j._wakeUpAfterNarrowphase=!1)}if(this.has("endContact")){this.overlapKeeper.getEndOverlaps(Z);var B=this.endContactEvent;for(A=Z.length;A--;){var R=Z[A];B.shapeA=R.shapeA,B.shapeB=R.shapeB,B.bodyA=R.bodyA,B.bodyB=R.bodyB,this.emit(B)}Z.length=0}var F=this.preSolveEvent;F.contactEquations=p.contactEquations,F.frictionEquations=p.frictionEquations,this.emit(F),F.contactEquations=F.frictionEquations=null;v=l.length;for(_=0;_!==v;_++)l[_].update();if(p.contactEquations.length||p.frictionEquations.length||v)if(this.islandSplit){for(d.equations.length=0,X.appendArray(d.equations,p.contactEquations),X.appendArray(d.equations,p.frictionEquations),_=0;_!==v;_++)X.appendArray(d.equations,l[_].equations);d.split(this);for(_=0;_!==d.islands.length;_++){(V=d.islands[_]).equations.length&&o.solveIsland(e,V)}}else{for(o.addEquations(p.contactEquations),o.addEquations(p.frictionEquations),_=0;_!==v;_++)o.addEquations(l[_].equations);this.solveConstraints&&o.solve(e,this),o.removeAllEquations()}for(_=0;_!==a;_++){var j;(j=n[_]).integrate(e)}for(_=0;_!==a;_++)n[_].setZeroForce();if(this.emitImpactEvent&&this.has("impact")){var N=this.impactEvent;for(_=0;_!==p.contactEquations.length;_++){var U=p.contactEquations[_];U.firstImpact&&(N.bodyA=U.bodyA,N.bodyB=U.bodyB,N.shapeA=U.shapeA,N.shapeB=U.shapeB,N.contactEquation=U,this.emit(N))}}if(this.sleepMode===Y.BODY_SLEEPING)for(_=0;_!==a;_++)n[_].sleepTick(this.time,!1,e);else if(this.sleepMode===Y.ISLAND_SLEEPING&&this.islandSplit){for(_=0;_!==a;_++)n[_].sleepTick(this.time,!0,e);for(_=0;_<this.islandManager.islands.length;_++){var V;(V=this.islandManager.islands[_]).wantsToSleep()&&V.sleep()}}this.stepping=!1;var H=this.bodiesToBeRemoved;for(_=0;_!==H.length;_++)this.removeBody(H[_]);H.length=0,this.emit(this.postStepEvent)},Y.prototype.runNarrowphase=function(e,t,i,n,r,o,a,s,p,l,h){if(0!=(i.collisionGroup&a.collisionMask)&&0!=(a.collisionGroup&i.collisionMask)){W.rotate(S,n,t.angle),W.rotate(C,s,o.angle),W.add(S,S,t.position),W.add(C,C,o.position);var u,d=r+t.angle,c=p+o.angle;e.enableFriction=0<l.friction,e.frictionCoefficient=l.friction,u=t.type===q.STATIC||t.type===q.KINEMATIC?o.mass:o.type===q.STATIC||o.type===q.KINEMATIC?t.mass:t.mass*o.mass/(t.mass+o.mass),e.slipForce=l.friction*h*u,e.restitution=l.restitution,e.surfaceVelocity=l.surfaceVelocity,e.frictionStiffness=l.frictionStiffness,e.frictionRelaxation=l.frictionRelaxation,e.stiffness=l.stiffness,e.relaxation=l.relaxation,e.contactSkinSize=l.contactSkinSize,e.enabledEquations=t.collisionResponse&&o.collisionResponse&&i.collisionResponse&&a.collisionResponse;var _=e[i.type|a.type],y=0;if(_){var x=i.sensor||a.sensor,m=e.frictionEquations.length;y=i.type<a.type?_.call(e,t,i,S,d,o,a,C,c,x):_.call(e,o,a,C,c,t,i,S,d,x);var g=e.frictionEquations.length-m;if(y){if(t.allowSleep&&t.type===q.DYNAMIC&&t.sleepState===q.SLEEPING&&o.sleepState===q.AWAKE&&o.type!==q.STATIC){var f=W.squaredLength(o.velocity)+Math.pow(o.angularVelocity,2);2*Math.pow(o.sleepSpeedLimit,2)<=f&&(t._wakeUpAfterNarrowphase=!0)}if(o.allowSleep&&o.type===q.DYNAMIC&&o.sleepState===q.SLEEPING&&t.sleepState===q.AWAKE&&t.type!==q.STATIC){var v=W.squaredLength(t.velocity)+Math.pow(t.angularVelocity,2);2*Math.pow(t.sleepSpeedLimit,2)<=v&&(o._wakeUpAfterNarrowphase=!0)}if(this.overlapKeeper.setOverlapping(t,i,o,a),this.has("beginContact")&&this.overlapKeeper.isNewOverlap(i,a)){var z=this.beginContactEvent;if(z.shapeA=i,z.shapeB=a,z.bodyA=t,z.bodyB=o,z.contactEquations.length=0,"number"==typeof y)for(var w=e.contactEquations.length-y;w<e.contactEquations.length;w++)z.contactEquations.push(e.contactEquations[w]);this.emit(z)}if("number"==typeof y&&1<g)for(w=e.frictionEquations.length-g;w<e.frictionEquations.length;w++){var b=e.frictionEquations[w];b.setSlipForce(b.getSlipForce()/g)}}}}},Y.prototype.addSpring=function(e){this.springs.push(e);var t=this.addSpringEvent;t.spring=e,this.emit(t),t.spring=null},Y.prototype.removeSpring=function(e){var t=this.springs.indexOf(e);-1!==t&&X.splice(this.springs,t,1)},Y.prototype.addBody=function(e){if(-1===this.bodies.indexOf(e)){this.bodies.push(e);var t=(e.world=this).addBodyEvent;t.body=e,this.emit(t),t.body=null}},Y.prototype.removeBody=function(e){if(this.stepping)this.bodiesToBeRemoved.push(e);else{e.world=null;var t=this.bodies.indexOf(e);-1!==t&&(X.splice(this.bodies,t,1),(this.removeBodyEvent.body=e).resetConstraintVelocity(),this.emit(this.removeBodyEvent),this.removeBodyEvent.body=null)}},Y.prototype.getBodyById=function(e){for(var t=this.bodies,i=0;i<t.length;i++){var n=t[i];if(n.id===e)return n}return!1},Y.prototype.disableBodyCollision=function(e,t){this.disabledBodyCollisionPairs.push(e,t)},Y.prototype.enableBodyCollision=function(e,t){for(var i=this.disabledBodyCollisionPairs,n=0;n<i.length;n+=2)if(i[n]===e&&i[n+1]===t||i[n+1]===e&&i[n]===t)return void i.splice(n,2)},Y.prototype.clear=function(){this.time=0,this.solver&&this.solver.equations.length&&this.solver.removeAllEquations();for(var e=this.constraints,t=e.length-1;0<=t;t--)this.removeConstraint(e[t]);var i=this.bodies;for(t=i.length-1;0<=t;t--)this.removeBody(i[t]);var n=this.springs;for(t=n.length-1;0<=t;t--)this.removeSpring(n[t]);var r=this.contactMaterials;for(t=r.length-1;0<=t;t--)this.removeContactMaterial(r[t]);Y.apply(this)};var w=W.create(),b=(W.fromValues(0,0),W.fromValues(0,0));Y.prototype.hitTest=function(e,t,i){i=i||0;var n=new q({position:e}),r=new z,o=e,a=w,s=b;n.addShape(r);for(var p=this.narrowphase,l=[],h=0,u=t.length;h!==u;h++)for(var d=t[h],c=0,_=d.shapes.length;c!==_;c++){var y=d.shapes[c];W.rotate(a,y.position,d.angle),W.add(a,a,d.position);var x=y.angle+d.angle;(y instanceof m&&p.circleParticle(d,y,a,x,n,r,o,0,!0)||y instanceof g&&p.particleConvex(n,r,o,0,d,y,a,x,!0)||y instanceof f&&p.particlePlane(n,r,o,0,d,y,a,x,!0)||y instanceof v&&p.particleCapsule(n,r,o,0,d,y,a,x,!0)||y instanceof z&&W.squaredLength(W.sub(s,a,e))<i*i)&&l.push(d)}return l},Y.prototype.setGlobalStiffness=function(e){for(var t=this.constraints,i=0;i!==t.length;i++)for(var n=t[i],r=0;r!==n.equations.length;r++){var o=n.equations[r];o.stiffness=e,o.needsUpdate=!0}var a=this.contactMaterials;for(i=0;i!==a.length;i++){(n=a[i]).stiffness=n.frictionStiffness=e}(n=this.defaultContactMaterial).stiffness=n.frictionStiffness=e},Y.prototype.setGlobalRelaxation=function(e){for(var t=0;t!==this.constraints.length;t++)for(var i=this.constraints[t],n=0;n!==i.equations.length;n++){var r=i.equations[n];r.relaxation=e,r.needsUpdate=!0}for(t=0;t!==this.contactMaterials.length;t++){(i=this.contactMaterials[t]).relaxation=i.frictionRelaxation=e}(i=this.defaultContactMaterial).relaxation=i.frictionRelaxation=e};var d=new s,c=[];Y.prototype.raycast=function(e,t){return t.getAABB(d),this.broadphase.aabbQuery(this,d,c),t.intersectBodies(e,c),c.length=0,e.hasHit()}},{"../../package.json":6,"../collision/AABB":7,"../collision/Broadphase":8,"../collision/Narrowphase":10,"../collision/Ray":11,"../collision/SAPBroadphase":13,"../constraints/Constraint":14,"../constraints/DistanceConstraint":15,"../constraints/GearConstraint":16,"../constraints/LockConstraint":17,"../constraints/PrismaticConstraint":18,"../constraints/RevoluteConstraint":19,"../events/EventEmitter":26,"../material/ContactMaterial":27,"../material/Material":28,"../math/vec2":30,"../objects/Body":31,"../objects/LinearSpring":32,"../objects/RotationalSpring":33,"../shapes/Capsule":38,"../shapes/Circle":39,"../shapes/Convex":40,"../shapes/Line":42,"../shapes/Particle":43,"../shapes/Plane":44,"../shapes/Shape":45,"../solver/GSSolver":46,"../solver/Solver":47,"../utils/OverlapKeeper":52,"../utils/Utils":57,"./IslandManager":59}]},{},[36])(36)}),function(){var e=this,D=D||{};return D.game=null,D.WEBGL_RENDERER=0,D.CANVAS_RENDERER=1,D.VERSION="v2.2.9",D._UID=0,"undefined"!=typeof Float32Array?(D.Float32Array=Float32Array,D.Uint16Array=Uint16Array,D.Uint32Array=Uint32Array,D.ArrayBuffer=ArrayBuffer):(D.Float32Array=Array,D.Uint16Array=Array),D.PI_2=2*Math.PI,D.RAD_TO_DEG=180/Math.PI,D.DEG_TO_RAD=Math.PI/180,D.RETINA_PREFIX="@2x",D.DisplayObject=function(){this.position=new D.Point(0,0),this.scale=new D.Point(1,1),this.pivot=new D.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.renderable=!1,this.parent=null,this.worldAlpha=1,this.worldTransform=new D.Matrix,this.worldPosition=new D.Point(0,0),this.worldScale=new D.Point(1,1),this.worldRotation=0,this.filterArea=null,this._sr=0,this._cr=1,this._bounds=new D.Rectangle(0,0,0,0),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1},D.DisplayObject.prototype.constructor=D.DisplayObject,D.DisplayObject.prototype={destroy:function(){if(this.children){for(var e=this.children.length;e--;)this.children[e].destroy();this.children=[]}this.hitArea=null,this.parent=null,this.worldTransform=null,this.filterArea=null,this.renderable=!1,this._bounds=null,this._currentBounds=null,this._mask=null,this._destroyCachedSprite()},updateTransform:function(e){if(!e&&!this.parent&&!this.game)return this;var t=this.parent;e?t=e:this.parent||(t=this.game.world);var i,n,r,o,a,s,p=t.worldTransform,l=this.worldTransform;return this.rotation%D.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),i=this._cr*this.scale.x,n=this._sr*this.scale.x,r=-this._sr*this.scale.y,o=this._cr*this.scale.y,a=this.position.x,s=this.position.y,(this.pivot.x||this.pivot.y)&&(a-=this.pivot.x*i+this.pivot.y*r,s-=this.pivot.x*n+this.pivot.y*o),l.a=i*p.a+n*p.c,l.b=i*p.b+n*p.d,l.c=r*p.a+o*p.c,l.d=r*p.b+o*p.d):(i=this.scale.x,o=this.scale.y,a=this.position.x-this.pivot.x*i,s=this.position.y-this.pivot.y*o,l.a=i*p.a,l.b=i*p.b,l.c=o*p.c,l.d=o*p.d),l.tx=a*p.a+s*p.c+p.tx,l.ty=a*p.b+s*p.d+p.ty,this.worldAlpha=this.alpha*t.worldAlpha,this.worldPosition.set(l.tx,l.ty),this.worldScale.set(this.scale.x*Math.sqrt(l.a*l.a+l.c*l.c),this.scale.y*Math.sqrt(l.b*l.b+l.d*l.d)),this.worldRotation=Math.atan2(-l.c,l.d),this._currentBounds=null,this.transformCallback&&this.transformCallback.call(this.transformCallbackContext,l,p),this},preUpdate:function(){},generateTexture:function(e,t,i){var n=this.getLocalBounds(),r=new D.RenderTexture(0|n.width,0|n.height,i,t,e);return D.DisplayObject._tempMatrix.tx=-n.x,D.DisplayObject._tempMatrix.ty=-n.y,r.render(this,D.DisplayObject._tempMatrix),r},updateCache:function(){return this._generateCachedSprite(),this},toGlobal:function(e){return this.updateTransform(),this.worldTransform.apply(e)},toLocal:function(e,t){return t&&(e=t.toGlobal(e)),this.updateTransform(),this.worldTransform.applyInverse(e)},_renderCachedSprite:function(e){this._cachedSprite.worldAlpha=this.worldAlpha,e.gl?D.Sprite.prototype._renderWebGL.call(this._cachedSprite,e):D.Sprite.prototype._renderCanvas.call(this._cachedSprite,e)},_generateCachedSprite:function(){this._cacheAsBitmap=!1;var e=this.getLocalBounds();if(e.width=Math.max(1,Math.ceil(e.width)),e.height=Math.max(1,Math.ceil(e.height)),this.updateTransform(),this._cachedSprite)this._cachedSprite.texture.resize(e.width,e.height);else{var t=new D.RenderTexture(e.width,e.height);this._cachedSprite=new D.Sprite(t),this._cachedSprite.worldTransform=this.worldTransform}var i=this._filters;this._filters=null,this._cachedSprite.filters=i,D.DisplayObject._tempMatrix.tx=-e.x,D.DisplayObject._tempMatrix.ty=-e.y,this._cachedSprite.texture.render(this,D.DisplayObject._tempMatrix,!0),this._cachedSprite.anchor.x=-e.x/e.width,this._cachedSprite.anchor.y=-e.y/e.height,this._filters=i,this._cacheAsBitmap=!0},_destroyCachedSprite:function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)}},D.DisplayObject.prototype.displayObjectUpdateTransform=D.DisplayObject.prototype.updateTransform,Object.defineProperties(D.DisplayObject.prototype,{x:{get:function(){return this.position.x},set:function(e){this.position.x=e}},y:{get:function(){return this.position.y},set:function(e){this.position.y=e}},worldVisible:{get:function(){if(this.visible){var e=this.parent;if(!e)return this.visible;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}return!1}},mask:{get:function(){return this._mask},set:function(e){this._mask&&(this._mask.isMask=!1),(this._mask=e)&&(this._mask.isMask=!0)}},filters:{get:function(){return this._filters},set:function(e){if(Array.isArray(e)){for(var t=[],i=0;i<e.length;i++)for(var n=e[i].passes,r=0;r<n.length;r++)t.push(n[r]);this._filterBlock={target:this,filterPasses:t}}this._filters=e,this.blendMode&&this.blendMode===D.blendModes.MULTIPLY&&(this.blendMode=D.blendModes.NORMAL)}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){this._cacheAsBitmap!==e&&(e?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=e)}}}),D.DisplayObjectContainer=function(){D.DisplayObject.call(this),this.children=[],this.ignoreChildInput=!1},D.DisplayObjectContainer.prototype=Object.create(D.DisplayObject.prototype),D.DisplayObjectContainer.prototype.constructor=D.DisplayObjectContainer,D.DisplayObjectContainer.prototype.addChild=function(e){return this.addChildAt(e,this.children.length)},D.DisplayObjectContainer.prototype.addChildAt=function(e,t){if(0<=t&&t<=this.children.length)return e.parent&&e.parent.removeChild(e),(e.parent=this).children.splice(t,0,e),e;throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length)},D.DisplayObjectContainer.prototype.swapChildren=function(e,t){if(e!==t){var i=this.getChildIndex(e),n=this.getChildIndex(t);if(i<0||n<0)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[i]=t,this.children[n]=e}},D.DisplayObjectContainer.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},D.DisplayObjectContainer.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The supplied index is out of bounds");var i=this.getChildIndex(e);this.children.splice(i,1),this.children.splice(t,0,e)},D.DisplayObjectContainer.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Supplied index "+e+" does not exist in the child list, or the supplied DisplayObject must be a child of the caller");return this.children[e]},D.DisplayObjectContainer.prototype.removeChild=function(e){var t=this.children.indexOf(e);if(-1!==t)return this.removeChildAt(t)},D.DisplayObjectContainer.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t&&(t.parent=void 0,this.children.splice(e,1)),t},D.DisplayObjectContainer.prototype.removeChildren=function(e,t){void 0===e&&(e=0),void 0===t&&(t=this.children.length);var i=t-e;if(0<i&&i<=t){for(var n=this.children.splice(begin,i),r=0;r<n.length;r++){n[r].parent=void 0}return n}if(0===i&&0===this.children.length)return[];throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")},D.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(this.displayObjectUpdateTransform(),!this._cacheAsBitmap))for(var e=0;e<this.children.length;e++)this.children[e].updateTransform()},D.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform=D.DisplayObjectContainer.prototype.updateTransform,D.DisplayObjectContainer.prototype.getBounds=function(e){var t,i=e&&e instanceof D.DisplayObject,n=!0;if(i?n=e instanceof D.DisplayObjectContainer&&e.contains(this):e=this,i){var r=e.worldTransform;for(e.worldTransform=D.identityMatrix,t=0;t<e.children.length;t++)e.children[t].updateTransform()}var o,a,s,p=1/0,l=1/0,h=-1/0,u=-1/0,d=!1;for(t=0;t<this.children.length;t++){this.children[t].visible&&(d=!0,p=p<(o=this.children[t].getBounds()).x?p:o.x,l=l<o.y?l:o.y,h=(a=o.width+o.x)<h?h:a,u=(s=o.height+o.y)<u?u:s)}var c=this._bounds;if(!d){var _=(c=new D.Rectangle).x,y=c.width+c.x,x=c.y,m=c.height+c.y,g=this.worldTransform,f=g.a,v=g.b,z=g.c,w=g.d,b=g.tx,S=g.ty,C=f*y+z*m+b,M=w*m+v*y+S,P=f*_+z*m+b,k=w*m+v*_+S,T=f*_+z*x+b,A=w*x+v*_+S,O=f*y+z*x+b,E=w*x+v*y+S;p=O<(p=T<(p=P<(p=h=C)?P:p)?T:p)?O:p,l=E<(l=A<(l=k<(l=u=M)?k:l)?A:l)?E:l,h=(h=(h=h<P?P:h)<T?T:h)<O?O:h,u=(u=(u=u<k?k:u)<A?A:u)<E?E:u}if(c.x=p,c.y=l,c.width=h-p,c.height=u-l,i)for(e.worldTransform=r,t=0;t<e.children.length;t++)e.children[t].updateTransform();if(!n){var G=e.getBounds();c.x-=G.x,c.y-=G.y}return c},D.DisplayObjectContainer.prototype.getLocalBounds=function(){return this.getBounds(this)},D.DisplayObjectContainer.prototype.contains=function(e){return!!e&&(e===this||this.contains(e.parent))},D.DisplayObjectContainer.prototype._renderWebGL=function(e){var t;if(this.visible&&!(this.alpha<=0))if(this._cacheAsBitmap)this._renderCachedSprite(e);else if(this._mask||this._filters){for(this._filters&&(e.spriteBatch.flush(),e.filterManager.pushFilter(this._filterBlock)),this._mask&&(e.spriteBatch.stop(),e.maskManager.pushMask(this.mask,e),e.spriteBatch.start()),t=0;t<this.children.length;t++)this.children[t]._renderWebGL(e);e.spriteBatch.stop(),this._mask&&e.maskManager.popMask(this._mask,e),this._filters&&e.filterManager.popFilter(),e.spriteBatch.start()}else for(t=0;t<this.children.length;t++)this.children[t]._renderWebGL(e)},D.DisplayObjectContainer.prototype._renderCanvas=function(e){if(!1!==this.visible&&0!==this.alpha)if(this._cacheAsBitmap)this._renderCachedSprite(e);else{this._mask&&e.maskManager.pushMask(this._mask,e);for(var t=0;t<this.children.length;t++)this.children[t]._renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},Object.defineProperty(D.DisplayObjectContainer.prototype,"width",{get:function(){return this.getLocalBounds().width*this.scale.x},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}}),Object.defineProperty(D.DisplayObjectContainer.prototype,"height",{get:function(){return this.getLocalBounds().height*this.scale.y},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}}),D.Sprite=function(e){D.DisplayObjectContainer.call(this),this.anchor=new D.Point,this.texture=e||D.Texture.emptyTexture,this._width=0,this._height=0,this.tint=16777215,this.cachedTint=-1,this.tintedTexture=null,this.blendMode=D.blendModes.NORMAL,this.shader=null,this.exists=!0,this.texture.baseTexture.hasLoaded&&this.onTextureUpdate(),this.renderable=!0},D.Sprite.prototype=Object.create(D.DisplayObjectContainer.prototype),D.Sprite.prototype.constructor=D.Sprite,Object.defineProperty(D.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(e){this.scale.x=e/this.texture.frame.width,this._width=e}}),Object.defineProperty(D.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(e){this.scale.y=e/this.texture.frame.height,this._height=e}}),D.Sprite.prototype.setTexture=function(e,t){void 0!==t&&this.texture.baseTexture.destroy(),this.texture.baseTexture.skipRender=!1,this.texture=e,this.texture.valid=!0,this.cachedTint=-1},D.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},D.Sprite.prototype.getBounds=function(e){var t=this.texture.frame.width,i=this.texture.frame.height,n=t*(1-this.anchor.x),r=t*-this.anchor.x,o=i*(1-this.anchor.y),a=i*-this.anchor.y,s=e||this.worldTransform,p=s.a,l=s.b,h=s.c,u=s.d,d=s.tx,c=s.ty,_=-1/0,y=-1/0,x=1/0,m=1/0;if(0===l&&0===h){if(p<0){p*=-1;var g=n;n=-r,r=-g}if(u<0){u*=-1;g=o;o=-a,a=-g}x=p*r+d,_=p*n+d,m=u*a+c,y=u*o+c}else{var f=p*r+h*a+d,v=u*a+l*r+c,z=p*n+h*a+d,w=u*a+l*n+c,b=p*n+h*o+d,S=u*o+l*n+c,C=p*r+h*o+d,M=u*o+l*r+c;x=C<(x=b<(x=z<(x=f<x?f:x)?z:x)?b:x)?C:x,m=M<(m=S<(m=w<(m=v<m?v:m)?w:m)?S:m)?M:m,_=(_=(_=(_=_<f?f:_)<z?z:_)<b?b:_)<C?C:_,y=(y=(y=(y=y<v?v:y)<w?w:y)<S?S:y)<M?M:y}var P=this._bounds;return P.x=x,P.width=_-x,P.y=m,P.height=y-m,this._currentBounds=P},D.Sprite.prototype.getLocalBounds=function(){var e=this.worldTransform;this.worldTransform=D.identityMatrix;for(var t=0;t<this.children.length;t++)this.children[t].updateTransform();var i=this.getBounds();for(this.worldTransform=e,t=0;t<this.children.length;t++)this.children[t].updateTransform();return i},D.Sprite.prototype._renderWebGL=function(e,t){if(this.visible&&!(this.alpha<=0)&&this.renderable){var i=this.worldTransform;if(t&&(i=t),this._mask||this._filters){var n=e.spriteBatch;this._filters&&(n.flush(),e.filterManager.pushFilter(this._filterBlock)),this._mask&&(n.stop(),e.maskManager.pushMask(this.mask,e),n.start()),n.render(this);for(var r=0;r<this.children.length;r++)this.children[r]._renderWebGL(e);n.stop(),this._mask&&e.maskManager.popMask(this._mask,e),this._filters&&e.filterManager.popFilter(),n.start()}else{e.spriteBatch.render(this);for(r=0;r<this.children.length;r++)this.children[r]._renderWebGL(e,i)}}},D.Sprite.prototype._renderCanvas=function(e,t){if(!(!this.visible||0===this.alpha||!this.renderable||this.texture.crop.width<=0||this.texture.crop.height<=0)){var i=this.worldTransform;if(t&&(i=t),this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,e.context.globalCompositeOperation=D.blendModesCanvas[e.currentBlendMode]),this._mask&&e.maskManager.pushMask(this._mask,e),this.texture.valid){var n=this.texture.baseTexture.resolution/e.resolution;e.context.globalAlpha=this.worldAlpha,e.smoothProperty&&e.scaleMode!==this.texture.baseTexture.scaleMode&&(e.scaleMode=this.texture.baseTexture.scaleMode,e.context[e.smoothProperty]=e.scaleMode===D.scaleModes.LINEAR);var r=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,o=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height,a=i.tx*e.resolution+e.shakeX,s=i.ty*e.resolution+e.shakeY;e.roundPixels?(e.context.setTransform(i.a,i.b,i.c,i.d,0|a,0|s),r|=0,o|=0):e.context.setTransform(i.a,i.b,i.c,i.d,a,s);var p=this.texture.crop.width,l=this.texture.crop.height;if(r/=n,o/=n,16777215!==this.tint)(this.texture.requiresReTint||this.cachedTint!==this.tint)&&(this.tintedTexture=D.CanvasTinter.getTintedTexture(this,this.tint),this.cachedTint=this.tint,this.texture.requiresReTint=!1),e.context.drawImage(this.tintedTexture,0,0,p,l,r,o,p/n,l/n);else{var h=this.texture.crop.x,u=this.texture.crop.y;e.context.drawImage(this.texture.baseTexture.source,h,u,p,l,r,o,p/n,l/n)}}for(var d=0;d<this.children.length;d++)this.children[d]._renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},D.SpriteBatch=function(e){D.DisplayObjectContainer.call(this),this.textureThing=e,this.ready=!1},D.SpriteBatch.prototype=Object.create(D.DisplayObjectContainer.prototype),D.SpriteBatch.prototype.constructor=D.SpriteBatch,D.SpriteBatch.prototype.initWebGL=function(e){this.fastSpriteBatch=new D.WebGLFastSpriteBatch(e),this.ready=!0},D.SpriteBatch.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},D.SpriteBatch.prototype._renderWebGL=function(e){!this.visible||this.alpha<=0||!this.children.length||(this.ready||this.initWebGL(e.gl),this.fastSpriteBatch.gl!==e.gl&&this.fastSpriteBatch.setContext(e.gl),e.spriteBatch.stop(),e.shaderManager.setShader(e.shaderManager.fastShader),this.fastSpriteBatch.begin(this,e),this.fastSpriteBatch.render(this),e.spriteBatch.start())},D.SpriteBatch.prototype._renderCanvas=function(e){if(this.visible&&!(this.alpha<=0)&&this.children.length){var t=e.context;t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var i=this.worldTransform,n=!0,r=0;r<this.children.length;r++){var o=this.children[r];if(o.visible){var a=o.texture,s=a.frame;if(t.globalAlpha=this.worldAlpha*o.alpha,o.rotation%(2*Math.PI)==0)n&&(t.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),n=!1),t.drawImage(a.baseTexture.source,s.x,s.y,s.width,s.height,o.anchor.x*(-s.width*o.scale.x)+o.position.x+.5+e.shakeX|0,o.anchor.y*(-s.height*o.scale.y)+o.position.y+.5+e.shakeY|0,s.width*o.scale.x,s.height*o.scale.y);else{n||(n=!0),o.displayObjectUpdateTransform();var p=o.worldTransform,l=p.tx*e.resolution+e.shakeX,h=p.ty*e.resolution+e.shakeY;e.roundPixels?t.setTransform(p.a,p.b,p.c,p.d,0|l,0|h):t.setTransform(p.a,p.b,p.c,p.d,l,h),t.drawImage(a.baseTexture.source,s.x,s.y,s.width,s.height,o.anchor.x*-s.width+.5|0,o.anchor.y*-s.height+.5|0,s.width,s.height)}}}}},D.hex2rgb=function(e){return[(e>>16&255)/255,(e>>8&255)/255,(255&e)/255]},D.rgb2hex=function(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]},D.canUseNewCanvasBlendModes=function(){if(void 0===document)return!1;var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",t="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",i=new Image;i.src=e+"AP804Oa6"+t;var n=new Image;n.src=e+"/wCKxvRF"+t;var r=D.CanvasPool.create(this,6,1).getContext("2d");if(r.globalCompositeOperation="multiply",r.drawImage(i,0,0),r.drawImage(n,2,0),!r.getImageData(2,0,1,1))return!1;var o=r.getImageData(2,0,1,1).data;return D.CanvasPool.remove(this),255===o[0]&&0===o[1]&&0===o[2]},D.getNextPowerOfTwo=function(e){if(0<e&&0==(e&e-1))return e;for(var t=1;t<e;)t<<=1;return t},D.isPowerOfTwo=function(e,t){return 0<e&&0==(e&e-1)&&0<t&&0==(t&t-1)},D.CanvasPool={create:function(e,t,i){var n,r=D.CanvasPool.getFirst();if(-1===r){var o={parent:e,canvas:document.createElement("canvas")};D.CanvasPool.pool.push(o),n=o.canvas}else D.CanvasPool.pool[r].parent=e,n=D.CanvasPool.pool[r].canvas;return void 0!==t&&(n.width=t,n.height=i),n},getFirst:function(){for(var e=D.CanvasPool.pool,t=0;t<e.length;t++)if(!e[t].parent)return t;return-1},remove:function(e){for(var t=D.CanvasPool.pool,i=0;i<t.length;i++)t[i].parent===e&&(t[i].parent=null,t[i].canvas.width=1,t[i].canvas.height=1)},removeByCanvas:function(e){for(var t=D.CanvasPool.pool,i=0;i<t.length;i++)t[i].canvas===e&&(t[i].parent=null,t[i].canvas.width=1,t[i].canvas.height=1)},getTotal:function(){for(var e=D.CanvasPool.pool,t=0,i=0;i<e.length;i++)e[i].parent&&t++;return t},getFree:function(){for(var e=D.CanvasPool.pool,t=0,i=0;i<e.length;i++)e[i].parent||t++;return t}},D.CanvasPool.pool=[],D.initDefaultShaders=function(){},D.CompileVertexShader=function(e,t){return D._CompileShader(e,t,e.VERTEX_SHADER)},D.CompileFragmentShader=function(e,t){return D._CompileShader(e,t,e.FRAGMENT_SHADER)},D._CompileShader=function(e,t,i){var n=t;Array.isArray(t)&&(n=t.join("\n"));var r=e.createShader(i);return e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(window.console.log(e.getShaderInfoLog(r)),null)},D.compileProgram=function(e,t,i){var n=D.CompileFragmentShader(e,i),r=D.CompileVertexShader(e,t),o=e.createProgram();return e.attachShader(o,r),e.attachShader(o,n),e.linkProgram(o),e.getProgramParameter(o,e.LINK_STATUS)||(window.console.log(e.getProgramInfoLog(o)),window.console.log("Could not initialise shaders")),o},D.PixiShader=function(e){this._UID=D._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.textureCount=0,this.firstRun=!0,this.dirty=!0,this.attributes=[],this.init()},D.PixiShader.prototype.constructor=D.PixiShader,D.PixiShader.prototype.init=function(){var e=this.gl,t=D.compileProgram(e,this.vertexSrc||D.PixiShader.defaultVertexSrc,this.fragmentSrc);for(var i in e.useProgram(t),this.uSampler=e.getUniformLocation(t,"uSampler"),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.dimensions=e.getUniformLocation(t,"dimensions"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.aTextureCoord=e.getAttribLocation(t,"aTextureCoord"),this.colorAttribute=e.getAttribLocation(t,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute],this.uniforms)this.uniforms[i].uniformLocation=e.getUniformLocation(t,i);this.initUniforms(),this.program=t},D.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var e,t=this.gl;for(var i in this.uniforms){var n=(e=this.uniforms[i]).type;"sampler2D"===n?(e._init=!1,null!==e.value&&this.initSampler2D(e)):"mat2"===n||"mat3"===n||"mat4"===n?(e.glMatrix=!0,e.glValueLength=1,"mat2"===n?e.glFunc=t.uniformMatrix2fv:"mat3"===n?e.glFunc=t.uniformMatrix3fv:"mat4"===n&&(e.glFunc=t.uniformMatrix4fv)):(e.glFunc=t["uniform"+n],e.glValueLength="2f"===n||"2i"===n?2:"3f"===n||"3i"===n?3:"4f"===n||"4i"===n?4:1)}},D.PixiShader.prototype.initSampler2D=function(e){if(e.value&&e.value.baseTexture&&e.value.baseTexture.hasLoaded){var t=this.gl;if(t.activeTexture(t["TEXTURE"+this.textureCount]),t.bindTexture(t.TEXTURE_2D,e.value.baseTexture._glTextures[t.id]),e.textureData){var i=e.textureData,n=i.magFilter?i.magFilter:t.LINEAR,r=i.minFilter?i.minFilter:t.LINEAR,o=i.wrapS?i.wrapS:t.CLAMP_TO_EDGE,a=i.wrapT?i.wrapT:t.CLAMP_TO_EDGE,s=i.luminance?t.LUMINANCE:t.RGBA;if(i.repeat&&(o=t.REPEAT,a=t.REPEAT),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!!i.flipY),i.width){var p=i.width?i.width:512,l=i.height?i.height:2,h=i.border?i.border:0;t.texImage2D(t.TEXTURE_2D,0,s,p,l,h,s,t.UNSIGNED_BYTE,null)}else t.texImage2D(t.TEXTURE_2D,0,s,t.RGBA,t.UNSIGNED_BYTE,e.value.baseTexture.source);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,a)}t.uniform1i(e.uniformLocation,this.textureCount),e._init=!0,this.textureCount++}},D.PixiShader.prototype.syncUniforms=function(){var e;this.textureCount=1;var t=this.gl;for(var i in this.uniforms)1===(e=this.uniforms[i]).glValueLength?!0===e.glMatrix?e.glFunc.call(t,e.uniformLocation,e.transpose,e.value):e.glFunc.call(t,e.uniformLocation,e.value):2===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y):3===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y,e.value.z):4===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y,e.value.z,e.value.w):"sampler2D"===e.type&&(e._init?(t.activeTexture(t["TEXTURE"+this.textureCount]),e.value.baseTexture._dirty[t.id]?D.instances[t.id].updateTexture(e.value.baseTexture):t.bindTexture(t.TEXTURE_2D,e.value.baseTexture._glTextures[t.id]),t.uniform1i(e.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(e))},D.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},D.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"],D.PixiFastShader=function(e){this._UID=D._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],this.textureCount=0,this.init()},D.PixiFastShader.prototype.constructor=D.PixiFastShader,D.PixiFastShader.prototype.init=function(){var e=this.gl,t=D.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.uSampler=e.getUniformLocation(t,"uSampler"),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.dimensions=e.getUniformLocation(t,"dimensions"),this.uMatrix=e.getUniformLocation(t,"uMatrix"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.aPositionCoord=e.getAttribLocation(t,"aPositionCoord"),this.aScale=e.getAttribLocation(t,"aScale"),this.aRotation=e.getAttribLocation(t,"aRotation"),this.aTextureCoord=e.getAttribLocation(t,"aTextureCoord"),this.colorAttribute=e.getAttribLocation(t,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute],this.program=t},D.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},D.StripShader=function(e){this._UID=D._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"],this.init()},D.StripShader.prototype.constructor=D.StripShader,D.StripShader.prototype.init=function(){var e=this.gl,t=D.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.uSampler=e.getUniformLocation(t,"uSampler"),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.colorAttribute=e.getAttribLocation(t,"aColor"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.aTextureCoord=e.getAttribLocation(t,"aTextureCoord"),this.attributes=[this.aVertexPosition,this.aTextureCoord],this.translationMatrix=e.getUniformLocation(t,"translationMatrix"),this.alpha=e.getUniformLocation(t,"alpha"),this.program=t},D.StripShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},D.PrimitiveShader=function(e){this._UID=D._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"],this.init()},D.PrimitiveShader.prototype.constructor=D.PrimitiveShader,D.PrimitiveShader.prototype.init=function(){var e=this.gl,t=D.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.tintColor=e.getUniformLocation(t,"tint"),this.flipY=e.getUniformLocation(t,"flipY"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.colorAttribute=e.getAttribLocation(t,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=e.getUniformLocation(t,"translationMatrix"),this.alpha=e.getUniformLocation(t,"alpha"),this.program=t},D.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},D.ComplexPrimitiveShader=function(e){this._UID=D._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","uniform float flipY;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"],this.init()},D.ComplexPrimitiveShader.prototype.constructor=D.ComplexPrimitiveShader,D.ComplexPrimitiveShader.prototype.init=function(){var e=this.gl,t=D.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.tintColor=e.getUniformLocation(t,"tint"),this.color=e.getUniformLocation(t,"color"),this.flipY=e.getUniformLocation(t,"flipY"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=e.getUniformLocation(t,"translationMatrix"),this.alpha=e.getUniformLocation(t,"alpha"),this.program=t},D.ComplexPrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},D.glContexts=[],D.instances=[],D.WebGLRenderer=function(e){this.game=e,D.defaultRenderer||(D.defaultRenderer=this),this.type=D.WEBGL_RENDERER,this.resolution=e.resolution,this.transparent=e.transparent,this.autoResize=!1,this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.clearBeforeRender=e.clearBeforeRender,this.width=e.width,this.height=e.height,this.view=e.canvas,this._contextOptions={alpha:this.transparent,antialias:e.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:this.preserveDrawingBuffer},this.projection=new D.Point,this.offset=new D.Point,this.shaderManager=new D.WebGLShaderManager,this.spriteBatch=new D.WebGLSpriteBatch,this.maskManager=new D.WebGLMaskManager,this.filterManager=new D.WebGLFilterManager,this.stencilManager=new D.WebGLStencilManager,this.blendModeManager=new D.WebGLBlendModeManager,this.renderSession={},this.renderSession.game=this.game,this.renderSession.gl=this.gl,this.renderSession.drawCount=0,this.renderSession.shaderManager=this.shaderManager,this.renderSession.maskManager=this.maskManager,this.renderSession.filterManager=this.filterManager,this.renderSession.blendModeManager=this.blendModeManager,this.renderSession.spriteBatch=this.spriteBatch,this.renderSession.stencilManager=this.stencilManager,(this.renderSession.renderer=this).renderSession.resolution=this.resolution,this.initContext(),this.mapBlendModes()},D.WebGLRenderer.prototype.constructor=D.WebGLRenderer,D.WebGLRenderer.prototype.initContext=function(){var e=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(!(this.gl=e))throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=e.id=D.WebGLRenderer.glContextId++,D.glContexts[this.glContextId]=e,D.instances[this.glContextId]=this,e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),this.shaderManager.setContext(e),this.spriteBatch.setContext(e),this.maskManager.setContext(e),this.filterManager.setContext(e),this.blendModeManager.setContext(e),this.stencilManager.setContext(e),this.renderSession.gl=this.gl,this.resize(this.width,this.height)},D.WebGLRenderer.prototype.render=function(e){if(!this.contextLost){var t=this.gl;t.viewport(0,0,this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,null),this.game.clearBeforeRender&&(t.clearColor(e._bgColor.r,e._bgColor.g,e._bgColor.b,e._bgColor.a),t.clear(t.COLOR_BUFFER_BIT)),this.offset.x=this.game.camera._shake.x,this.offset.y=this.game.camera._shake.y,this.renderDisplayObject(e,this.projection)}},D.WebGLRenderer.prototype.renderDisplayObject=function(e,t,i,n){this.renderSession.blendModeManager.setBlendMode(D.blendModes.NORMAL),this.renderSession.drawCount=0,this.renderSession.flipY=i?-1:1,this.renderSession.projection=t,this.renderSession.offset=this.offset,this.spriteBatch.begin(this.renderSession),this.filterManager.begin(this.renderSession,i),e._renderWebGL(this.renderSession,n),this.spriteBatch.end()},D.WebGLRenderer.prototype.resize=function(e,t){this.width=e*this.resolution,this.height=t*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px"),this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2/this.resolution,this.projection.y=-this.height/2/this.resolution},D.WebGLRenderer.prototype.updateTexture=function(e){if(!e.hasLoaded)return!1;var t=this.gl;return e._glTextures[t.id]||(e._glTextures[t.id]=t.createTexture()),t.bindTexture(t.TEXTURE_2D,e._glTextures[t.id]),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultipliedAlpha),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e.source),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e.scaleMode===D.scaleModes.LINEAR?t.LINEAR:t.NEAREST),e.mipmap&&D.isPowerOfTwo(e.width,e.height)?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e.scaleMode===D.scaleModes.LINEAR?t.LINEAR_MIPMAP_LINEAR:t.NEAREST_MIPMAP_NEAREST),t.generateMipmap(t.TEXTURE_2D)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e.scaleMode===D.scaleModes.LINEAR?t.LINEAR:t.NEAREST),e._powerOf2?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),!(e._dirty[t.id]=!1)},D.WebGLRenderer.prototype.destroy=function(){D.glContexts[this.glContextId]=null,this.projection=null,this.offset=null,this.shaderManager.destroy(),this.spriteBatch.destroy(),this.maskManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.spriteBatch=null,this.maskManager=null,this.filterManager=null,this.gl=null,this.renderSession=null,D.CanvasPool.remove(this),D.instances[this.glContextId]=null,D.WebGLRenderer.glContextId--},D.WebGLRenderer.prototype.mapBlendModes=function(){var e=this.gl;if(!D.blendModesWebGL){var t=[],i=D.blendModes;t[i.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.ADD]=[e.SRC_ALPHA,e.DST_ALPHA],t[i.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],t[i.SCREEN]=[e.SRC_ALPHA,e.ONE],t[i.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],D.blendModesWebGL=t}},D.WebGLRenderer.glContextId=0,D.WebGLBlendModeManager=function(){this.currentBlendMode=99999},D.WebGLBlendModeManager.prototype.constructor=D.WebGLBlendModeManager,D.WebGLBlendModeManager.prototype.setContext=function(e){this.gl=e},D.WebGLBlendModeManager.prototype.setBlendMode=function(e){if(this.currentBlendMode===e)return!1;this.currentBlendMode=e;var t=D.blendModesWebGL[this.currentBlendMode];return t&&this.gl.blendFunc(t[0],t[1]),!0},D.WebGLBlendModeManager.prototype.destroy=function(){this.gl=null},D.WebGLMaskManager=function(){},D.WebGLMaskManager.prototype.constructor=D.WebGLMaskManager,D.WebGLMaskManager.prototype.setContext=function(e){this.gl=e},D.WebGLMaskManager.prototype.pushMask=function(e,t){var i=t.gl;e.dirty&&D.WebGLGraphics.updateGraphics(e,i),void 0!==e._webGL[i.id]&&void 0!==e._webGL[i.id].data&&0!==e._webGL[i.id].data.length&&t.stencilManager.pushStencil(e,e._webGL[i.id].data[0],t)},D.WebGLMaskManager.prototype.popMask=function(e,t){var i=this.gl;void 0!==e._webGL[i.id]&&void 0!==e._webGL[i.id].data&&0!==e._webGL[i.id].data.length&&t.stencilManager.popStencil(e,e._webGL[i.id].data[0],t)},D.WebGLMaskManager.prototype.destroy=function(){this.gl=null},D.WebGLStencilManager=function(){this.stencilStack=[],this.reverse=!0,this.count=0},D.WebGLStencilManager.prototype.setContext=function(e){this.gl=e},D.WebGLStencilManager.prototype.pushStencil=function(e,t,i){var n=this.gl;this.bindGraphics(e,t,i),0===this.stencilStack.length&&(n.enable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),this.reverse=!0,this.count=0),this.stencilStack.push(t);var r=this.count;n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.ALWAYS,0,255),n.stencilOp(n.KEEP,n.KEEP,n.INVERT),1===t.mode?(n.drawElements(n.TRIANGLE_FAN,t.indices.length-4,n.UNSIGNED_SHORT,0),this.reverse?(n.stencilFunc(n.EQUAL,255-r,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)):(n.stencilFunc(n.EQUAL,r,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(t.indices.length-4)),this.reverse?n.stencilFunc(n.EQUAL,255-(r+1),255):n.stencilFunc(n.EQUAL,r+1,255),this.reverse=!this.reverse):(this.reverse?(n.stencilFunc(n.EQUAL,r,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,255-r,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),n.drawElements(n.TRIANGLE_STRIP,t.indices.length,n.UNSIGNED_SHORT,0),this.reverse?n.stencilFunc(n.EQUAL,r+1,255):n.stencilFunc(n.EQUAL,255-(r+1),255)),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),this.count++},D.WebGLStencilManager.prototype.bindGraphics=function(e,t,i){this._currentGraphics=e;var n,r=this.gl,o=i.projection,a=i.offset;1===t.mode?(n=i.shaderManager.complexPrimitiveShader,i.shaderManager.setShader(n),r.uniform1f(n.flipY,i.flipY),r.uniformMatrix3fv(n.translationMatrix,!1,e.worldTransform.toArray(!0)),r.uniform2f(n.projectionVector,o.x,-o.y),r.uniform2f(n.offsetVector,-a.x,-a.y),r.uniform3fv(n.tintColor,D.hex2rgb(e.tint)),r.uniform3fv(n.color,t.color),r.uniform1f(n.alpha,e.worldAlpha*t.alpha),r.bindBuffer(r.ARRAY_BUFFER,t.buffer),r.vertexAttribPointer(n.aVertexPosition,2,r.FLOAT,!1,8,0)):(n=i.shaderManager.primitiveShader,i.shaderManager.setShader(n),r.uniformMatrix3fv(n.translationMatrix,!1,e.worldTransform.toArray(!0)),r.uniform1f(n.flipY,i.flipY),r.uniform2f(n.projectionVector,o.x,-o.y),r.uniform2f(n.offsetVector,-a.x,-a.y),r.uniform3fv(n.tintColor,D.hex2rgb(e.tint)),r.uniform1f(n.alpha,e.worldAlpha),r.bindBuffer(r.ARRAY_BUFFER,t.buffer),r.vertexAttribPointer(n.aVertexPosition,2,r.FLOAT,!1,24,0),r.vertexAttribPointer(n.colorAttribute,4,r.FLOAT,!1,24,8)),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer)},D.WebGLStencilManager.prototype.popStencil=function(e,t,i){var n=this.gl;if(this.stencilStack.pop(),this.count--,0===this.stencilStack.length)n.disable(n.STENCIL_TEST);else{var r=this.count;this.bindGraphics(e,t,i),n.colorMask(!1,!1,!1,!1),1===t.mode?(this.reverse=!this.reverse,this.reverse?(n.stencilFunc(n.EQUAL,255-(r+1),255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,r+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(t.indices.length-4)),n.stencilFunc(n.ALWAYS,0,255),n.stencilOp(n.KEEP,n.KEEP,n.INVERT),n.drawElements(n.TRIANGLE_FAN,t.indices.length-4,n.UNSIGNED_SHORT,0)):(this.reverse?(n.stencilFunc(n.EQUAL,r+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)):(n.stencilFunc(n.EQUAL,255-(r+1),255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)),n.drawElements(n.TRIANGLE_STRIP,t.indices.length,n.UNSIGNED_SHORT,0)),this.reverse?n.stencilFunc(n.EQUAL,r,255):n.stencilFunc(n.EQUAL,255-r,255),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP)}},D.WebGLStencilManager.prototype.destroy=function(){this.stencilStack=null,this.gl=null},D.WebGLShaderManager=function(){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.stack=[]},D.WebGLShaderManager.prototype.constructor=D.WebGLShaderManager,D.WebGLShaderManager.prototype.setContext=function(e){this.gl=e,this.primitiveShader=new D.PrimitiveShader(e),this.complexPrimitiveShader=new D.ComplexPrimitiveShader(e),this.defaultShader=new D.PixiShader(e),this.fastShader=new D.PixiFastShader(e),this.stripShader=new D.StripShader(e),this.setShader(this.defaultShader)},D.WebGLShaderManager.prototype.setAttribs=function(e){var t;for(t=0;t<this.tempAttribState.length;t++)this.tempAttribState[t]=!1;for(t=0;t<e.length;t++){var i=e[t];this.tempAttribState[i]=!0}var n=this.gl;for(t=0;t<this.attribState.length;t++)this.attribState[t]!==this.tempAttribState[t]&&(this.attribState[t]=this.tempAttribState[t],this.tempAttribState[t]?n.enableVertexAttribArray(t):n.disableVertexAttribArray(t))},D.WebGLShaderManager.prototype.setShader=function(e){return this._currentId!==e._UID&&(this._currentId=e._UID,this.currentShader=e,this.gl.useProgram(e.program),this.setAttribs(e.attributes),!0)},D.WebGLShaderManager.prototype.destroy=function(){this.attribState=null,this.tempAttribState=null,this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),this.defaultShader.destroy(),this.fastShader.destroy(),this.stripShader.destroy(),this.gl=null},D.WebGLSpriteBatch=function(){this.vertSize=5,this.size=2e3;var e=4*this.size*4*this.vertSize,t=6*this.size;this.vertices=new D.ArrayBuffer(e),this.positions=new D.Float32Array(this.vertices),this.colors=new D.Uint32Array(this.vertices),this.indices=new D.Uint16Array(t);for(var i=this.lastIndexCount=0,n=0;i<t;i+=6,n+=4)this.indices[i+0]=n+0,this.indices[i+1]=n+1,this.indices[i+2]=n+2,this.indices[i+3]=n+0,this.indices[i+4]=n+2,this.indices[i+5]=n+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.dirty=!0,this.textures=[],this.blendModes=[],this.shaders=[],this.sprites=[],this.defaultShader=new D.AbstractFilter(["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"])},D.WebGLSpriteBatch.prototype.setContext=function(e){this.gl=e,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW),this.currentBlendMode=99999;var t=new D.PixiShader(e);t.fragmentSrc=this.defaultShader.fragmentSrc,t.uniforms={},t.init(),this.defaultShader.shaders[e.id]=t},D.WebGLSpriteBatch.prototype.begin=function(e){this.renderSession=e,this.shader=this.renderSession.shaderManager.defaultShader,this.start()},D.WebGLSpriteBatch.prototype.end=function(){this.flush()},D.WebGLSpriteBatch.prototype.render=function(e,t){var i=e.texture,n=e.worldTransform;t&&(n=t),this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=i.baseTexture);var r=i._uvs;if(r){var o,a,s,p,l=e.anchor.x,h=e.anchor.y;if(i.trim){var u=i.trim;o=(a=u.x-l*u.width)+i.crop.width,s=(p=u.y-h*u.height)+i.crop.height}else o=i.frame.width*(1-l),a=i.frame.width*-l,s=i.frame.height*(1-h),p=i.frame.height*-h;var d=4*this.currentBatchSize*this.vertSize,c=i.baseTexture.resolution,_=n.a/c,y=n.b/c,x=n.c/c,m=n.d/c,g=n.tx,f=n.ty,v=this.colors,z=this.positions;this.renderSession.roundPixels?(z[d]=_*a+x*p+g|0,z[d+1]=m*p+y*a+f|0,z[d+5]=_*o+x*p+g|0,z[d+6]=m*p+y*o+f|0,z[d+10]=_*o+x*s+g|0,z[d+11]=m*s+y*o+f|0,z[d+15]=_*a+x*s+g|0,z[d+16]=m*s+y*a+f|0):(z[d]=_*a+x*p+g,z[d+1]=m*p+y*a+f,z[d+5]=_*o+x*p+g,z[d+6]=m*p+y*o+f,z[d+10]=_*o+x*s+g,z[d+11]=m*s+y*o+f,z[d+15]=_*a+x*s+g,z[d+16]=m*s+y*a+f),z[d+2]=r.x0,z[d+3]=r.y0,z[d+7]=r.x1,z[d+8]=r.y1,z[d+12]=r.x2,z[d+13]=r.y2,z[d+17]=r.x3,z[d+18]=r.y3;var w=e.tint;v[d+4]=v[d+9]=v[d+14]=v[d+19]=(w>>16)+(65280&w)+((255&w)<<16)+(255*e.worldAlpha<<24),this.sprites[this.currentBatchSize++]=e}},D.WebGLSpriteBatch.prototype.renderTilingSprite=function(e){var t=e.tilingTexture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=t.baseTexture),e._uvs||(e._uvs=new D.TextureUvs);var i=e._uvs,n=t.baseTexture.width,r=t.baseTexture.height;e.tilePosition.x%=n*e.tileScaleOffset.x,e.tilePosition.y%=r*e.tileScaleOffset.y;var o=e.tilePosition.x/(n*e.tileScaleOffset.x),a=e.tilePosition.y/(r*e.tileScaleOffset.y),s=e.width/n/(e.tileScale.x*e.tileScaleOffset.x),p=e.height/r/(e.tileScale.y*e.tileScaleOffset.y);i.x0=0-o,i.y0=0-a,i.x1=1*s-o,i.y1=0-a,i.x2=1*s-o,i.y2=1*p-a,i.x3=0-o,i.y3=1*p-a;var l=e.tint,h=(l>>16)+(65280&l)+((255&l)<<16)+(255*e.worldAlpha<<24),u=this.positions,d=this.colors,c=e.width,_=e.height,y=e.anchor.x,x=e.anchor.y,m=c*(1-y),g=c*-y,f=_*(1-x),v=_*-x,z=4*this.currentBatchSize*this.vertSize,w=t.baseTexture.resolution,b=e.worldTransform,S=b.a/w,C=b.b/w,M=b.c/w,P=b.d/w,k=b.tx,T=b.ty;u[z++]=S*g+M*v+k,u[z++]=P*v+C*g+T,u[z++]=i.x0,u[z++]=i.y0,d[z++]=h,u[z++]=S*m+M*v+k,u[z++]=P*v+C*m+T,u[z++]=i.x1,u[z++]=i.y1,d[z++]=h,u[z++]=S*m+M*f+k,u[z++]=P*f+C*m+T,u[z++]=i.x2,u[z++]=i.y2,d[z++]=h,u[z++]=S*g+M*f+k,u[z++]=P*f+C*g+T,u[z++]=i.x3,u[z++]=i.y3,d[z++]=h,this.sprites[this.currentBatchSize++]=e},D.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var e,t,i,n,r=this.gl;if(this.dirty){this.dirty=!1,r.activeTexture(r.TEXTURE0),r.bindBuffer(r.ARRAY_BUFFER,this.vertexBuffer),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e=this.defaultShader.shaders[r.id];var o=4*this.vertSize;r.vertexAttribPointer(e.aVertexPosition,2,r.FLOAT,!1,o,0),r.vertexAttribPointer(e.aTextureCoord,2,r.FLOAT,!1,o,8),r.vertexAttribPointer(e.colorAttribute,4,r.UNSIGNED_BYTE,!0,o,16)}if(this.currentBatchSize>.5*this.size)r.bufferSubData(r.ARRAY_BUFFER,0,this.vertices);else{var a=this.positions.subarray(0,4*this.currentBatchSize*this.vertSize);r.bufferSubData(r.ARRAY_BUFFER,0,a)}for(var s,p=0,l=0,h=null,u=this.renderSession.blendModeManager.currentBlendMode,d=null,c=!1,_=!1,y=0,x=this.currentBatchSize;y<x;y++){t=(s=this.sprites[y]).tilingTexture?s.tilingTexture.baseTexture:s.texture.baseTexture,c=u!==(i=s.blendMode),_=d!==(n=s.shader||this.defaultShader);var m=t.skipRender;if(m&&0<s.children.length&&(m=!1),(h!==t&&!m||c||_)&&(this.renderBatch(h,p,l),l=y,p=0,h=t,c&&(u=i,this.renderSession.blendModeManager.setBlendMode(u)),_)){(e=(d=n).shaders[r.id])||((e=new D.PixiShader(r)).fragmentSrc=d.fragmentSrc,e.uniforms=d.uniforms,e.init(),d.shaders[r.id]=e),this.renderSession.shaderManager.setShader(e),e.dirty&&e.syncUniforms();var g=this.renderSession.projection;r.uniform2f(e.projectionVector,g.x,g.y);var f=this.renderSession.offset;r.uniform2f(e.offsetVector,f.x,f.y)}p++}this.renderBatch(h,p,l),this.currentBatchSize=0}},D.WebGLSpriteBatch.prototype.renderBatch=function(e,t,i){if(0!==t){var n=this.gl;if(e._dirty[n.id]){if(!this.renderSession.renderer.updateTexture(e))return}else n.bindTexture(n.TEXTURE_2D,e._glTextures[n.id]);n.drawElements(n.TRIANGLES,6*t,n.UNSIGNED_SHORT,6*i*2),this.renderSession.drawCount++}},D.WebGLSpriteBatch.prototype.stop=function(){this.flush(),this.dirty=!0},D.WebGLSpriteBatch.prototype.start=function(){this.dirty=!0},D.WebGLSpriteBatch.prototype.destroy=function(){this.vertices=null,this.indices=null,this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.indexBuffer),this.currentBaseTexture=null,this.gl=null},D.WebGLFastSpriteBatch=function(e){this.vertSize=10,this.maxSize=6e3,this.size=this.maxSize;var t=4*this.size*this.vertSize,i=6*this.maxSize;this.vertices=new D.Float32Array(t),this.indices=new D.Uint16Array(i),this.vertexBuffer=null,this.indexBuffer=null;for(var n=this.lastIndexCount=0,r=0;n<i;n+=6,r+=4)this.indices[n+0]=r+0,this.indices[n+1]=r+1,this.indices[n+2]=r+2,this.indices[n+3]=r+0,this.indices[n+4]=r+2,this.indices[n+5]=r+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.currentBlendMode=0,this.renderSession=null,this.shader=null,this.matrix=null,this.setContext(e)},D.WebGLFastSpriteBatch.prototype.constructor=D.WebGLFastSpriteBatch,D.WebGLFastSpriteBatch.prototype.setContext=function(e){this.gl=e,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW)},D.WebGLFastSpriteBatch.prototype.begin=function(e,t){this.renderSession=t,this.shader=this.renderSession.shaderManager.fastShader,this.matrix=e.worldTransform.toArray(!0),this.start()},D.WebGLFastSpriteBatch.prototype.end=function(){this.flush()},D.WebGLFastSpriteBatch.prototype.render=function(e){var t=e.children,i=t[0];if(i.texture._uvs){this.currentBaseTexture=i.texture.baseTexture,i.blendMode!==this.renderSession.blendModeManager.currentBlendMode&&(this.flush(),this.renderSession.blendModeManager.setBlendMode(i.blendMode));for(var n=0,r=t.length;n<r;n++)this.renderSprite(t[n]);this.flush()}},D.WebGLFastSpriteBatch.prototype.renderSprite=function(e){if(e.visible&&(e.texture.baseTexture===this.currentBaseTexture||e.texture.baseTexture.skipRender||(this.flush(),this.currentBaseTexture=e.texture.baseTexture,e.texture._uvs))){var t,i,n,r,o,a,s=this.vertices;if(t=e.texture._uvs,e.texture.frame.width,e.texture.frame.height,e.texture.trim){var p=e.texture.trim;i=(n=p.x-e.anchor.x*p.width)+e.texture.crop.width,r=(o=p.y-e.anchor.y*p.height)+e.texture.crop.height}else i=e.texture.frame.width*(1-e.anchor.x),n=e.texture.frame.width*-e.anchor.x,r=e.texture.frame.height*(1-e.anchor.y),o=e.texture.frame.height*-e.anchor.y;a=4*this.currentBatchSize*this.vertSize,s[a++]=n,s[a++]=o,s[a++]=e.position.x,s[a++]=e.position.y,s[a++]=e.scale.x,s[a++]=e.scale.y,s[a++]=e.rotation,s[a++]=t.x0,s[a++]=t.y1,s[a++]=e.alpha,s[a++]=i,s[a++]=o,s[a++]=e.position.x,s[a++]=e.position.y,s[a++]=e.scale.x,s[a++]=e.scale.y,s[a++]=e.rotation,s[a++]=t.x1,s[a++]=t.y1,s[a++]=e.alpha,s[a++]=i,s[a++]=r,s[a++]=e.position.x,s[a++]=e.position.y,s[a++]=e.scale.x,s[a++]=e.scale.y,s[a++]=e.rotation,s[a++]=t.x2,s[a++]=t.y2,s[a++]=e.alpha,s[a++]=n,s[a++]=r,s[a++]=e.position.x,s[a++]=e.position.y,s[a++]=e.scale.x,s[a++]=e.scale.y,s[a++]=e.rotation,s[a++]=t.x3,s[a++]=t.y3,s[a++]=e.alpha,this.currentBatchSize++,this.currentBatchSize>=this.size&&this.flush()}},D.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var e=this.gl;if(this.currentBaseTexture._glTextures[e.id]||this.renderSession.renderer.updateTexture(this.currentBaseTexture,e),e.bindTexture(e.TEXTURE_2D,this.currentBaseTexture._glTextures[e.id]),this.currentBatchSize>.5*this.size)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var t=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);e.bufferSubData(e.ARRAY_BUFFER,0,t)}e.drawElements(e.TRIANGLES,6*this.currentBatchSize,e.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}},D.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()},D.WebGLFastSpriteBatch.prototype.start=function(){var e=this.gl;e.activeTexture(e.TEXTURE0),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var t=this.renderSession.projection;e.uniform2f(this.shader.projectionVector,t.x,t.y),e.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);var i=4*this.vertSize;e.vertexAttribPointer(this.shader.aVertexPosition,2,e.FLOAT,!1,i,0),e.vertexAttribPointer(this.shader.aPositionCoord,2,e.FLOAT,!1,i,8),e.vertexAttribPointer(this.shader.aScale,2,e.FLOAT,!1,i,16),e.vertexAttribPointer(this.shader.aRotation,1,e.FLOAT,!1,i,24),e.vertexAttribPointer(this.shader.aTextureCoord,2,e.FLOAT,!1,i,28),e.vertexAttribPointer(this.shader.colorAttribute,1,e.FLOAT,!1,i,36)},D.WebGLFilterManager=function(){this.filterStack=[],this.offsetX=0,this.offsetY=0},D.WebGLFilterManager.prototype.constructor=D.WebGLFilterManager,D.WebGLFilterManager.prototype.setContext=function(e){this.gl=e,this.texturePool=[],this.initShaderBuffers()},D.WebGLFilterManager.prototype.begin=function(e,t){this.renderSession=e,this.defaultShader=e.shaderManager.defaultShader;var i=this.renderSession.projection;this.width=2*i.x,this.height=2*-i.y,this.buffer=t},D.WebGLFilterManager.prototype.pushFilter=function(e){var t=this.gl,i=this.renderSession.projection,n=this.renderSession.offset;e._filterArea=e.target.filterArea||e.target.getBounds(),e._previous_stencil_mgr=this.renderSession.stencilManager,this.renderSession.stencilManager=new D.WebGLStencilManager,this.renderSession.stencilManager.setContext(t),t.disable(t.STENCIL_TEST),this.filterStack.push(e);var r=e.filterPasses[0];this.offsetX+=e._filterArea.x,this.offsetY+=e._filterArea.y;var o=this.texturePool.pop();o?o.resize(this.width*this.renderSession.resolution,this.height*this.renderSession.resolution):o=new D.FilterTexture(this.gl,this.width*this.renderSession.resolution,this.height*this.renderSession.resolution),t.bindTexture(t.TEXTURE_2D,o.texture);var a=e._filterArea,s=r.padding;a.x-=s,a.y-=s,a.width+=2*s,a.height+=2*s,a.x<0&&(a.x=0),a.width>this.width&&(a.width=this.width),a.y<0&&(a.y=0),a.height>this.height&&(a.height=this.height),t.bindFramebuffer(t.FRAMEBUFFER,o.frameBuffer),t.viewport(0,0,a.width*this.renderSession.resolution,a.height*this.renderSession.resolution),i.x=a.width/2,i.y=-a.height/2,n.x=-a.x,n.y=-a.y,t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),e._glFilterTexture=o},D.WebGLFilterManager.prototype.popFilter=function(){var e=this.gl,t=this.filterStack.pop(),i=t._filterArea,n=t._glFilterTexture,r=this.renderSession.projection,o=this.renderSession.offset;if(1<t.filterPasses.length){e.viewport(0,0,i.width*this.renderSession.resolution,i.height*this.renderSession.resolution),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=i.height,this.vertexArray[2]=i.width,this.vertexArray[3]=i.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=i.width,this.vertexArray[7]=0,e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=i.width/this.width,this.uvArray[5]=i.height/this.height,this.uvArray[6]=i.width/this.width,this.uvArray[7]=i.height/this.height,e.bufferSubData(e.ARRAY_BUFFER,0,this.uvArray);var a=n,s=this.texturePool.pop();s||(s=new D.FilterTexture(this.gl,this.width*this.renderSession.resolution,this.height*this.renderSession.resolution)),s.resize(this.width*this.renderSession.resolution,this.height*this.renderSession.resolution),e.bindFramebuffer(e.FRAMEBUFFER,s.frameBuffer),e.clear(e.COLOR_BUFFER_BIT),e.disable(e.BLEND);for(var p=0;p<t.filterPasses.length-1;p++){var l=t.filterPasses[p];e.bindFramebuffer(e.FRAMEBUFFER,s.frameBuffer),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,a.texture),this.applyFilterPass(l,i,i.width,i.height);var h=a;a=s,s=h}e.enable(e.BLEND),n=a,this.texturePool.push(s)}var u=t.filterPasses[t.filterPasses.length-1];this.offsetX-=i.x,this.offsetY-=i.y;var d=this.width,c=this.height,_=0,y=0,x=this.buffer;if(0===this.filterStack.length)e.colorMask(!0,!0,!0,!0);else{var m=this.filterStack[this.filterStack.length-1];d=(i=m._filterArea).width,c=i.height,_=i.x,y=i.y,x=m._glFilterTexture.frameBuffer}r.x=d/2,r.y=-c/2,o.x=_,o.y=y;var g=(i=t._filterArea).x-_,f=i.y-y;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=g,this.vertexArray[1]=f+i.height,this.vertexArray[2]=g+i.width,this.vertexArray[3]=f+i.height,this.vertexArray[4]=g,this.vertexArray[5]=f,this.vertexArray[6]=g+i.width,this.vertexArray[7]=f,e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=i.width/this.width,this.uvArray[5]=i.height/this.height,this.uvArray[6]=i.width/this.width,this.uvArray[7]=i.height/this.height,e.bufferSubData(e.ARRAY_BUFFER,0,this.uvArray),e.viewport(0,0,d*this.renderSession.resolution,c*this.renderSession.resolution),e.bindFramebuffer(e.FRAMEBUFFER,x),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,n.texture),this.renderSession.stencilManager&&this.renderSession.stencilManager.destroy(),this.renderSession.stencilManager=t._previous_stencil_mgr,t._previous_stencil_mgr=null,0<this.renderSession.stencilManager.count?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.applyFilterPass(u,i,d,c),this.texturePool.push(n),t._glFilterTexture=null},D.WebGLFilterManager.prototype.applyFilterPass=function(e,t,i,n){var r=this.gl,o=e.shaders[r.id];o||((o=new D.PixiShader(r)).fragmentSrc=e.fragmentSrc,o.uniforms=e.uniforms,o.init(),e.shaders[r.id]=o),this.renderSession.shaderManager.setShader(o),r.uniform2f(o.projectionVector,i/2,-n/2),r.uniform2f(o.offsetVector,0,0),e.uniforms.dimensions&&(e.uniforms.dimensions.value[0]=this.width,e.uniforms.dimensions.value[1]=this.height,e.uniforms.dimensions.value[2]=this.vertexArray[0],e.uniforms.dimensions.value[3]=this.vertexArray[5]),o.syncUniforms(),r.bindBuffer(r.ARRAY_BUFFER,this.vertexBuffer),r.vertexAttribPointer(o.aVertexPosition,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this.uvBuffer),r.vertexAttribPointer(o.aTextureCoord,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this.colorBuffer),r.vertexAttribPointer(o.colorAttribute,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.indexBuffer),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0),this.renderSession.drawCount++},D.WebGLFilterManager.prototype.initShaderBuffers=function(){var e=this.gl;this.vertexBuffer=e.createBuffer(),this.uvBuffer=e.createBuffer(),this.colorBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.vertexArray=new D.Float32Array([0,0,1,0,0,1,1,1]),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.STATIC_DRAW),this.uvArray=new D.Float32Array([0,0,1,0,0,1,1,1]),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvArray,e.STATIC_DRAW),this.colorArray=new D.Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]),e.bindBuffer(e.ARRAY_BUFFER,this.colorBuffer),e.bufferData(e.ARRAY_BUFFER,this.colorArray,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),e.STATIC_DRAW)},D.WebGLFilterManager.prototype.destroy=function(){var e=this.gl;this.filterStack=null,this.offsetX=0;for(var t=this.offsetY=0;t<this.texturePool.length;t++)this.texturePool[t].destroy();this.texturePool=null,e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.uvBuffer),e.deleteBuffer(this.colorBuffer),e.deleteBuffer(this.indexBuffer)},D.FilterTexture=function(e,t,i,n){this.gl=e,this.frameBuffer=e.createFramebuffer(),this.texture=e.createTexture(),n=n||D.scaleModes.DEFAULT,e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n===D.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n===D.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0),this.renderBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.renderBuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.renderBuffer),this.resize(t,i)},D.FilterTexture.prototype.constructor=D.FilterTexture,D.FilterTexture.prototype.clear=function(){var e=this.gl;e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},D.FilterTexture.prototype.resize=function(e,t){if(this.width!==e||this.height!==t){this.width=e,this.height=t;var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e,t,0,i.RGBA,i.UNSIGNED_BYTE,null),i.bindRenderbuffer(i.RENDERBUFFER,this.renderBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,t)}},D.FilterTexture.prototype.destroy=function(){var e=this.gl;e.deleteFramebuffer(this.frameBuffer),e.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null},D.CanvasBuffer=function(e,t){this.width=e,this.height=t,this.canvas=D.CanvasPool.create(this,this.width,this.height),this.context=this.canvas.getContext("2d"),this.canvas.width=e,this.canvas.height=t},D.CanvasBuffer.prototype.constructor=D.CanvasBuffer,D.CanvasBuffer.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height)},D.CanvasBuffer.prototype.resize=function(e,t){this.width=this.canvas.width=e,this.height=this.canvas.height=t},D.CanvasBuffer.prototype.destroy=function(){D.CanvasPool.remove(this)},D.CanvasMaskManager=function(){},D.CanvasMaskManager.prototype.constructor=D.CanvasMaskManager,D.CanvasMaskManager.prototype.pushMask=function(e,t){var i=t.context;i.save();var n=e.alpha,r=e.worldTransform,o=t.resolution;i.setTransform(r.a*o,r.b*o,r.c*o,r.d*o,r.tx*o,r.ty*o),D.CanvasGraphics.renderGraphicsMask(e,i),i.clip(),e.worldAlpha=n},D.CanvasMaskManager.prototype.popMask=function(e){e.context.restore()},D.CanvasTinter=function(){},D.CanvasTinter.getTintedTexture=function(e,t){var i=e.tintedTexture||D.CanvasPool.create(this);return D.CanvasTinter.tintMethod(e.texture,t,i),i},D.CanvasTinter.tintWithMultiply=function(e,t,i){var n=i.getContext("2d"),r=e.crop;i.width===r.width&&i.height===r.height||(i.width=r.width,i.height=r.height),n.clearRect(0,0,r.width,r.height),n.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="multiply",n.drawImage(e.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(e.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},D.CanvasTinter.tintWithPerPixel=function(e,t,i){var n=i.getContext("2d"),r=e.crop;i.width=r.width,i.height=r.height,n.globalCompositeOperation="copy",n.drawImage(e.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height);for(var o=D.hex2rgb(t),a=o[0],s=o[1],p=o[2],l=n.getImageData(0,0,r.width,r.height),h=l.data,u=0;u<h.length;u+=4)if(h[u+0]*=a,h[u+1]*=s,h[u+2]*=p,!D.CanvasTinter.canHandleAlpha){var d=h[u+3];h[u+0]/=255/d,h[u+1]/=255/d,h[u+2]/=255/d}n.putImageData(l,0,0)},D.CanvasTinter.checkInverseAlpha=function(){var e=new D.CanvasBuffer(2,1);e.context.fillStyle="rgba(10, 20, 30, 0.5)",e.context.fillRect(0,0,1,1);var t=e.context.getImageData(0,0,1,1);if(null===t)return!1;e.context.putImageData(t,1,0);var i=e.context.getImageData(1,0,1,1);return i.data[0]===t.data[0]&&i.data[1]===t.data[1]&&i.data[2]===t.data[2]&&i.data[3]===t.data[3]},D.CanvasTinter.canHandleAlpha=D.CanvasTinter.checkInverseAlpha(),D.CanvasTinter.canUseMultiply=D.canUseNewCanvasBlendModes(),D.CanvasTinter.tintMethod=D.CanvasTinter.canUseMultiply?D.CanvasTinter.tintWithMultiply:D.CanvasTinter.tintWithPerPixel,D.CanvasRenderer=function(e){this.game=e,D.defaultRenderer||(D.defaultRenderer=this),this.type=D.CANVAS_RENDERER,this.resolution=e.resolution,this.clearBeforeRender=e.clearBeforeRender,this.transparent=e.transparent,this.autoResize=!1,this.width=e.width*this.resolution,this.height=e.height*this.resolution,this.view=e.canvas,this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.count=0,this.maskManager=new D.CanvasMaskManager,this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:Phaser.Canvas.getSmoothingPrefix(this.context),roundPixels:!1},this.mapBlendModes(),this.resize(this.width,this.height)},D.CanvasRenderer.prototype.constructor=D.CanvasRenderer,D.CanvasRenderer.prototype.render=function(e){this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.renderSession.currentBlendMode=0,this.renderSession.shakeX=this.game.camera._shake.x,this.renderSession.shakeY=this.game.camera._shake.y,this.context.globalCompositeOperation="source-over",navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):e._bgColor&&(this.context.fillStyle=e._bgColor.rgba,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(e)},D.CanvasRenderer.prototype.destroy=function(e){void 0===e&&(e=!0),e&&this.view.parent&&this.view.parent.removeChild(this.view),this.view=null,this.context=null,this.maskManager=null,this.renderSession=null},D.CanvasRenderer.prototype.resize=function(e,t){this.width=e*this.resolution,this.height=t*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px"),this.renderSession.smoothProperty&&(this.context[this.renderSession.smoothProperty]=this.renderSession.scaleMode===D.scaleModes.LINEAR)},D.CanvasRenderer.prototype.renderDisplayObject=function(e,t,i){this.renderSession.context=t||this.context,this.renderSession.resolution=this.resolution,e._renderCanvas(this.renderSession,i)},D.CanvasRenderer.prototype.mapBlendModes=function(){if(!D.blendModesCanvas){var e=[],t=D.blendModes,i=D.canUseNewCanvasBlendModes();e[t.NORMAL]="source-over",e[t.ADD]="lighter",e[t.MULTIPLY]=i?"multiply":"source-over",e[t.SCREEN]=i?"screen":"source-over",e[t.OVERLAY]=i?"overlay":"source-over",e[t.DARKEN]=i?"darken":"source-over",e[t.LIGHTEN]=i?"lighten":"source-over",e[t.COLOR_DODGE]=i?"color-dodge":"source-over",e[t.COLOR_BURN]=i?"color-burn":"source-over",e[t.HARD_LIGHT]=i?"hard-light":"source-over",e[t.SOFT_LIGHT]=i?"soft-light":"source-over",e[t.DIFFERENCE]=i?"difference":"source-over",e[t.EXCLUSION]=i?"exclusion":"source-over",e[t.HUE]=i?"hue":"source-over",e[t.SATURATION]=i?"saturation":"source-over",e[t.COLOR]=i?"color":"source-over",e[t.LUMINOSITY]=i?"luminosity":"source-over",D.blendModesCanvas=e}},D.BaseTexture=function(e,t){this.resolution=1,this.width=100,this.height=100,this.scaleMode=t||D.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=e,this.premultipliedAlpha=!0,this._glTextures=[],this.mipmap=!1,this._dirty=[!0,!0,!0,!0],e&&((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height&&(this.hasLoaded=!0,this.width=this.source.naturalWidth||this.source.width,this.height=this.source.naturalHeight||this.source.height,this.dirty()),this.skipRender=!1,this._powerOf2=!1)},D.BaseTexture.prototype.constructor=D.BaseTexture,D.BaseTexture.prototype.forceLoaded=function(e,t){this.hasLoaded=!0,this.width=e,this.height=t,this.dirty()},D.BaseTexture.prototype.destroy=function(){this.source&&D.CanvasPool.removeByCanvas(this.source),this.source=null,this.unloadFromGPU()},D.BaseTexture.prototype.updateSourceImage=function(e){},D.BaseTexture.prototype.dirty=function(){for(var e=0;e<this._glTextures.length;e++)this._dirty[e]=!0},D.BaseTexture.prototype.unloadFromGPU=function(){this.dirty();for(var e=this._glTextures.length-1;0<=e;e--){var t=this._glTextures[e],i=D.glContexts[e];i&&t&&i.deleteTexture(t)}this._glTextures.length=0,this.dirty()},D.BaseTexture.fromCanvas=function(e,t){return 0===e.width&&(e.width=1),0===e.height&&(e.height=1),new D.BaseTexture(e,t)},D.TextureSilentFail=!1,D.Texture=function(e,t,i,n){this.noFrame=!1,t||(this.noFrame=!0,t=new D.Rectangle(0,0,1,1)),e instanceof D.Texture&&(e=e.baseTexture),this.baseTexture=e,this.frame=t,this.trim=n,this.valid=!1,this.isTiling=!1,this.requiresUpdate=!1,this.requiresReTint=!1,this._uvs=null,this.width=0,this.height=0,this.crop=i||new D.Rectangle(0,0,1,1),e.hasLoaded&&(this.noFrame&&(t=new D.Rectangle(0,0,e.width,e.height)),this.setFrame(t))},D.Texture.prototype.constructor=D.Texture,D.Texture.prototype.onBaseTextureLoaded=function(){var e=this.baseTexture;this.noFrame&&(this.frame=new D.Rectangle(0,0,e.width,e.height)),this.setFrame(this.frame)},D.Texture.prototype.destroy=function(e){e&&this.baseTexture.destroy(),this.valid=!1},D.Texture.prototype.setFrame=function(e){if(this.noFrame=!1,this.frame=e,this.width=e.width,this.height=e.height,this.crop.x=e.x,this.crop.y=e.y,this.crop.width=e.width,this.crop.height=e.height,this.trim||!(e.x+e.width>this.baseTexture.width||e.y+e.height>this.baseTexture.height))this.valid=e&&e.width&&e.height&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this.frame.width=this.trim.width,this.frame.height=this.trim.height),this.valid&&this._updateUvs();else{if(!D.TextureSilentFail)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=!1}},D.Texture.prototype._updateUvs=function(){this._uvs||(this._uvs=new D.TextureUvs);var e=this.crop,t=this.baseTexture.width,i=this.baseTexture.height;this._uvs.x0=e.x/t,this._uvs.y0=e.y/i,this._uvs.x1=(e.x+e.width)/t,this._uvs.y1=e.y/i,this._uvs.x2=(e.x+e.width)/t,this._uvs.y2=(e.y+e.height)/i,this._uvs.x3=e.x/t,this._uvs.y3=(e.y+e.height)/i},D.Texture.fromCanvas=function(e,t){var i=D.BaseTexture.fromCanvas(e,t);return new D.Texture(i)},D.TextureUvs=function(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0},D.RenderTexture=function(e,t,i,n,r){if(this.width=e||100,this.height=t||100,this.resolution=r||1,this.frame=new D.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.crop=new D.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.baseTexture=new D.BaseTexture,this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution,this.baseTexture._glTextures=[],this.baseTexture.resolution=this.resolution,this.baseTexture.scaleMode=n||D.scaleModes.DEFAULT,this.baseTexture.hasLoaded=!0,D.Texture.call(this,this.baseTexture,new D.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution)),this.renderer=i||D.defaultRenderer,this.renderer.type===D.WEBGL_RENDERER){var o=this.renderer.gl;this.baseTexture._dirty[o.id]=!1,this.textureBuffer=new D.FilterTexture(o,this.width,this.height,this.baseTexture.scaleMode),this.baseTexture._glTextures[o.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new D.Point(.5*this.width,.5*-this.height)}else this.render=this.renderCanvas,this.textureBuffer=new D.CanvasBuffer(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this.tempMatrix=new Phaser.Matrix,this._updateUvs()},D.RenderTexture.prototype=Object.create(D.Texture.prototype),D.RenderTexture.prototype.constructor=D.RenderTexture,D.RenderTexture.prototype.resize=function(e,t,i){e===this.width&&t===this.height||(this.valid=0<e&&0<t,this.width=e,this.height=t,this.frame.width=this.crop.width=e*this.resolution,this.frame.height=this.crop.height=t*this.resolution,i&&(this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution),this.renderer.type===D.WEBGL_RENDERER&&(this.projection.x=this.width/2,this.projection.y=-this.height/2),this.valid&&this.textureBuffer.resize(this.width,this.height))},D.RenderTexture.prototype.clear=function(){this.valid&&(this.renderer.type===D.WEBGL_RENDERER&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},D.RenderTexture.prototype.renderWebGL=function(e,t,i){if(this.valid&&0!==e.alpha){var n=e.worldTransform;n.identity(),n.translate(0,2*this.projection.y),t&&n.append(t),n.scale(1,-1);for(var r=0;r<e.children.length;r++)e.children[r].updateTransform();var o=this.renderer.gl;o.viewport(0,0,this.width*this.resolution,this.height*this.resolution),o.bindFramebuffer(o.FRAMEBUFFER,this.textureBuffer.frameBuffer),i&&this.textureBuffer.clear(),this.renderer.spriteBatch.dirty=!0,this.renderer.renderDisplayObject(e,this.projection,this.textureBuffer.frameBuffer,t),this.renderer.spriteBatch.dirty=!0}},D.RenderTexture.prototype.renderCanvas=function(e,t,i){if(this.valid&&0!==e.alpha){var n=e.worldTransform;n.identity(),t&&n.append(t);for(var r=0;r<e.children.length;r++)e.children[r].updateTransform();i&&this.textureBuffer.clear();var o=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(e,this.textureBuffer.context,t),this.renderer.resolution=o}},D.RenderTexture.prototype.getImage=function(){var e=new Image;return e.src=this.getBase64(),e},D.RenderTexture.prototype.getBase64=function(){return this.getCanvas().toDataURL()},D.RenderTexture.prototype.getCanvas=function(){if(this.renderer.type!==D.WEBGL_RENDERER)return this.textureBuffer.canvas;var e=this.renderer.gl,t=this.textureBuffer.width,i=this.textureBuffer.height,n=new Uint8Array(4*t*i);e.bindFramebuffer(e.FRAMEBUFFER,this.textureBuffer.frameBuffer),e.readPixels(0,0,t,i,e.RGBA,e.UNSIGNED_BYTE,n),e.bindFramebuffer(e.FRAMEBUFFER,null);var r=new D.CanvasBuffer(t,i),o=r.context.getImageData(0,0,t,i);return o.data.set(n),r.context.putImageData(o,0,0),r.canvas},D.AbstractFilter=function(e,t){this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.uniforms=t||{},this.fragmentSrc=e||[]},D.AbstractFilter.prototype.constructor=D.AbstractFilter,D.AbstractFilter.prototype.syncUniforms=function(){for(var e=0,t=this.shaders.length;e<t;e++)this.shaders[e].dirty=!0},D.Strip=function(e){D.DisplayObjectContainer.call(this),this.texture=e,this.uvs=new D.Float32Array([0,1,1,1,1,0,0,1]),this.vertices=new D.Float32Array([0,0,100,0,100,100,0,100]),this.colors=new D.Float32Array([1,1,1,1]),this.indices=new D.Uint16Array([0,1,2,3]),this.dirty=!0,this.blendMode=D.blendModes.NORMAL,this.canvasPadding=0,this.drawMode=D.Strip.DrawModes.TRIANGLE_STRIP},D.Strip.prototype=Object.create(D.DisplayObjectContainer.prototype),D.Strip.prototype.constructor=D.Strip,D.Strip.prototype._renderWebGL=function(e){!this.visible||this.alpha<=0||(e.spriteBatch.stop(),this._vertexBuffer||this._initWebGL(e),e.shaderManager.setShader(e.shaderManager.stripShader),this._renderStrip(e),e.spriteBatch.start())},D.Strip.prototype._initWebGL=function(e){var t=e.gl;this._vertexBuffer=t.createBuffer(),this._indexBuffer=t.createBuffer(),this._uvBuffer=t.createBuffer(),this._colorBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvs,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._colorBuffer),t.bufferData(t.ARRAY_BUFFER,this.colors,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW)},D.Strip.prototype._renderStrip=function(e){var t=e.gl,i=e.projection,n=e.offset,r=e.shaderManager.stripShader,o=this.drawMode===D.Strip.DrawModes.TRIANGLE_STRIP?t.TRIANGLE_STRIP:t.TRIANGLES;e.blendModeManager.setBlendMode(this.blendMode),t.uniformMatrix3fv(r.translationMatrix,!1,this.worldTransform.toArray(!0)),t.uniform2f(r.projectionVector,i.x,-i.y),t.uniform2f(r.offsetVector,-n.x,-n.y),t.uniform1f(r.alpha,this.worldAlpha),this.dirty?(this.dirty=!1,t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.STATIC_DRAW),t.vertexAttribPointer(r.aVertexPosition,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,this._uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvs,t.STATIC_DRAW),t.vertexAttribPointer(r.aTextureCoord,2,t.FLOAT,!1,0,0),t.activeTexture(t.TEXTURE0),this.texture.baseTexture._dirty[t.id]?e.renderer.updateTexture(this.texture.baseTexture):t.bindTexture(t.TEXTURE_2D,this.texture.baseTexture._glTextures[t.id]),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW)):(t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices),t.vertexAttribPointer(r.aVertexPosition,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,this._uvBuffer),t.vertexAttribPointer(r.aTextureCoord,2,t.FLOAT,!1,0,0),t.activeTexture(t.TEXTURE0),this.texture.baseTexture._dirty[t.id]?e.renderer.updateTexture(this.texture.baseTexture):t.bindTexture(t.TEXTURE_2D,this.texture.baseTexture._glTextures[t.id]),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer)),t.drawElements(o,this.indices.length,t.UNSIGNED_SHORT,0)},D.Strip.prototype._renderCanvas=function(e){var t=e.context,i=this.worldTransform,n=i.tx*e.resolution+e.shakeX,r=i.ty*e.resolution+e.shakeY;e.roundPixels?t.setTransform(i.a,i.b,i.c,i.d,0|n,0|r):t.setTransform(i.a,i.b,i.c,i.d,n,r),this.drawMode===D.Strip.DrawModes.TRIANGLE_STRIP?this._renderCanvasTriangleStrip(t):this._renderCanvasTriangles(t)},D.Strip.prototype._renderCanvasTriangleStrip=function(e){var t=this.vertices,i=this.uvs,n=t.length/2;this.count++;for(var r=0;r<n-2;r++){var o=2*r;this._renderCanvasDrawTriangle(e,t,i,o,o+2,o+4)}},D.Strip.prototype._renderCanvasTriangles=function(e){var t=this.vertices,i=this.uvs,n=this.indices,r=n.length;this.count++;for(var o=0;o<r;o+=3){var a=2*n[o],s=2*n[o+1],p=2*n[o+2];this._renderCanvasDrawTriangle(e,t,i,a,s,p)}},D.Strip.prototype._renderCanvasDrawTriangle=function(e,t,i,n,r,o){var a=this.texture.baseTexture.source,s=this.texture.width,p=this.texture.height,l=t[n],h=t[r],u=t[o],d=t[n+1],c=t[r+1],_=t[o+1],y=i[n]*s,x=i[r]*s,m=i[o]*s,g=i[n+1]*p,f=i[r+1]*p,v=i[o+1]*p;if(0<this.canvasPadding){var z=this.canvasPadding/this.worldTransform.a,w=this.canvasPadding/this.worldTransform.d,b=(l+h+u)/3,S=(d+c+_)/3,C=l-b,M=d-S,P=Math.sqrt(C*C+M*M);l=b+C/P*(P+z),d=S+M/P*(P+w),M=c-S,h=b+(C=h-b)/(P=Math.sqrt(C*C+M*M))*(P+z),c=S+M/P*(P+w),M=_-S,u=b+(C=u-b)/(P=Math.sqrt(C*C+M*M))*(P+z),_=S+M/P*(P+w)}e.save(),e.beginPath(),e.moveTo(l,d),e.lineTo(h,c),e.lineTo(u,_),e.closePath(),e.clip();var k=y*f+g*m+x*v-f*m-g*x-y*v,T=l*f+g*u+h*v-f*u-g*h-l*v,A=y*h+l*m+x*u-h*m-l*x-y*u,O=y*f*u+g*h*m+l*x*v-l*f*m-g*x*u-y*h*v,E=d*f+g*_+c*v-f*_-g*c-d*v,G=y*c+d*m+x*_-c*m-d*x-y*_,D=y*f*_+g*c*m+d*x*v-d*f*m-g*x*_-y*c*v;e.transform(T/k,E/k,A/k,G/k,O/k,D/k),e.drawImage(a,0,0),e.restore()},D.Strip.prototype.renderStripFlat=function(e){var t=this.context,i=e.vertices,n=i.length/2;this.count++,t.beginPath();for(var r=1;r<n-2;r++){var o=2*r,a=i[o],s=i[o+2],p=i[o+4],l=i[o+1],h=i[o+3],u=i[o+5];t.moveTo(a,l),t.lineTo(s,h),t.lineTo(p,u)}t.fillStyle="#FF0000",t.fill(),t.closePath()},D.Strip.prototype.onTextureUpdate=function(){this.updateFrame=!0},D.Strip.prototype.getBounds=function(e){for(var t=e||this.worldTransform,i=t.a,n=t.b,r=t.c,o=t.d,a=t.tx,s=t.ty,p=-1/0,l=-1/0,h=1/0,u=1/0,d=this.vertices,c=0,_=d.length;c<_;c+=2){var y=d[c],x=d[c+1],m=i*y+r*x+a,g=o*x+n*y+s;h=m<h?m:h,u=g<u?g:u,p=p<m?m:p,l=l<g?g:l}if(h===-1/0||l===1/0)return D.EmptyRectangle;var f=this._bounds;return f.x=h,f.width=p-h,f.y=u,f.height=l-u,this._currentBounds=f},D.Strip.DrawModes={TRIANGLE_STRIP:0,TRIANGLES:1},D.Rope=function(e,t){D.Strip.call(this,e),this.points=t,this.vertices=new D.Float32Array(4*t.length),this.uvs=new D.Float32Array(4*t.length),this.colors=new D.Float32Array(2*t.length),this.indices=new D.Uint16Array(2*t.length),this.refresh()},D.Rope.prototype=Object.create(D.Strip.prototype),D.Rope.prototype.constructor=D.Rope,D.Rope.prototype.refresh=function(){var e=this.points;if(!(e.length<1)){var t=this.uvs,i=(e[0],this.indices),n=this.colors;this.count-=.2,t[0]=0,t[1]=0,t[2]=0,t[3]=1,n[0]=1,n[1]=1,i[0]=0,i[1]=1;for(var r,o,a,s=e.length,p=1;p<s;p++)r=e[p],a=p/(s-1),t[o=4*p]=a,t[o+1]=0,t[o+2]=a,t[o+3]=1,n[o=2*p]=1,n[o+1]=1,i[o=2*p]=o,i[o+1]=o+1,r}},D.Rope.prototype.updateTransform=function(){var e=this.points;if(!(e.length<1)){var t,i=e[0],n={x:0,y:0};this.count-=.2;for(var r,o,a,s,p=this.vertices,l=e.length,h=0;h<l;h++)r=e[h],o=4*h,t=h<e.length-1?e[h+1]:r,n.y=-(t.x-i.x),n.x=t.y-i.y,1<10*(1-h/(l-1))&&1,a=Math.sqrt(n.x*n.x+n.y*n.y),s=this.texture.height/2,n.x/=a,n.y/=a,n.x*=s,n.y*=s,p[o]=r.x+n.x,p[o+1]=r.y+n.y,p[o+2]=r.x-n.x,p[o+3]=r.y-n.y,i=r;D.DisplayObjectContainer.prototype.updateTransform.call(this)}},D.Rope.prototype.setTexture=function(e){this.texture=e},D.TilingSprite=function(e,t,i){D.Sprite.call(this,e),this._width=t||128,this._height=i||128,this.tileScale=new D.Point(1,1),this.tileScaleOffset=new D.Point(1,1),this.tilePosition=new D.Point,this.renderable=!0,this.tint=16777215,this.textureDebug=!1,this.blendMode=D.blendModes.NORMAL,this.canvasBuffer=null,this.tilingTexture=null,this.tilePattern=null,this.refreshTexture=!0,this.frameWidth=0,this.frameHeight=0},D.TilingSprite.prototype=Object.create(D.Sprite.prototype),D.TilingSprite.prototype.constructor=D.TilingSprite,D.TilingSprite.prototype.setTexture=function(e){this.texture!==e&&(this.texture=e,this.refreshTexture=!0,this.cachedTint=16777215)},D.TilingSprite.prototype._renderWebGL=function(e){if(this.visible&&this.renderable&&0!==this.alpha){if(this._mask&&(e.spriteBatch.stop(),e.maskManager.pushMask(this.mask,e),e.spriteBatch.start()),this._filters&&(e.spriteBatch.flush(),e.filterManager.pushFilter(this._filterBlock)),this.refreshTexture){if(this.generateTilingTexture(!0,e),!this.tilingTexture)return;this.tilingTexture.needsUpdate&&(e.renderer.updateTexture(this.tilingTexture.baseTexture),this.tilingTexture.needsUpdate=!1)}e.spriteBatch.renderTilingSprite(this);for(var t=0;t<this.children.length;t++)this.children[t]._renderWebGL(e);e.spriteBatch.stop(),this._filters&&e.filterManager.popFilter(),this._mask&&e.maskManager.popMask(this._mask,e),e.spriteBatch.start()}},D.TilingSprite.prototype._renderCanvas=function(e){if(this.visible&&this.renderable&&0!==this.alpha){var t=e.context;this._mask&&e.maskManager.pushMask(this._mask,e),t.globalAlpha=this.worldAlpha;var i=this.worldTransform,n=e.resolution,r=i.tx*n+e.shakeX,o=i.ty*n+e.shakeY;if(t.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,r,o),this.refreshTexture){if(this.generateTilingTexture(!1,e),!this.tilingTexture)return;this.tilePattern=t.createPattern(this.tilingTexture.baseTexture.source,"repeat")}var a=e.currentBlendMode;this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,t.globalCompositeOperation=D.blendModesCanvas[e.currentBlendMode]);var s=this.tilePosition,p=this.tileScale;s.x%=this.tilingTexture.baseTexture.width,s.y%=this.tilingTexture.baseTexture.height,t.scale(p.x,p.y),t.translate(s.x+this.anchor.x*-this._width,s.y+this.anchor.y*-this._height),t.fillStyle=this.tilePattern;r=-s.x,o=-s.y;var l=this._width/p.x,h=this._height/p.y;e.roundPixels&&(r|=0,o|=0,l|=0,h|=0),t.fillRect(r,o,l,h),t.scale(1/p.x,1/p.y),t.translate(-s.x+this.anchor.x*this._width,-s.y+this.anchor.y*this._height),this._mask&&e.maskManager.popMask(e);for(var u=0;u<this.children.length;u++)this.children[u]._renderCanvas(e);a!==this.blendMode&&(e.currentBlendMode=a,t.globalCompositeOperation=D.blendModesCanvas[a])}},D.TilingSprite.prototype.onTextureUpdate=function(){},D.TilingSprite.prototype.generateTilingTexture=function(e,t){if(this.texture.baseTexture.hasLoaded){var i=this.texture,n=i.frame,r=this._frame.sourceSizeW||this._frame.width,o=this._frame.sourceSizeH||this._frame.height,a=0,s=0;this._frame.trimmed&&(a=this._frame.spriteSourceSizeX,s=this._frame.spriteSourceSizeY),e&&(r=D.getNextPowerOfTwo(r),o=D.getNextPowerOfTwo(o)),this.canvasBuffer?(this.canvasBuffer.resize(r,o),this.tilingTexture.baseTexture.width=r,this.tilingTexture.baseTexture.height=o):(this.canvasBuffer=new D.CanvasBuffer(r,o),this.tilingTexture=D.Texture.fromCanvas(this.canvasBuffer.canvas),this.tilingTexture.isTiling=!0),this.tilingTexture.needsUpdate=!0,this.textureDebug&&(this.canvasBuffer.context.strokeStyle="#00ff00",this.canvasBuffer.context.strokeRect(0,0,r,o));var p=i.crop.width,l=i.crop.height;p===r&&l===o||(p=r,l=o),this.canvasBuffer.context.drawImage(i.baseTexture.source,i.crop.x,i.crop.y,i.crop.width,i.crop.height,a,s,p,l),this.tileScaleOffset.x=n.width/r,this.tileScaleOffset.y=n.height/o,this.refreshTexture=!1,this.tilingTexture.baseTexture._powerOf2=!0}},D.TilingSprite.prototype.getBounds=function(){var e=this._width,t=this._height,i=e*(1-this.anchor.x),n=e*-this.anchor.x,r=t*(1-this.anchor.y),o=t*-this.anchor.y,a=this.worldTransform,s=a.a,p=a.b,l=a.c,h=a.d,u=a.tx,d=a.ty,c=s*n+l*o+u,_=h*o+p*n+d,y=s*i+l*o+u,x=h*o+p*i+d,m=s*i+l*r+u,g=h*r+p*i+d,f=s*n+l*r+u,v=h*r+p*n+d,z=-1/0,w=-1/0,b=1/0,S=1/0;b=f<(b=m<(b=y<(b=c<b?c:b)?y:b)?m:b)?f:b,S=v<(S=g<(S=x<(S=_<S?_:S)?x:S)?g:S)?v:S,z=(z=(z=(z=z<c?c:z)<y?y:z)<m?m:z)<f?f:z,w=(w=(w=(w=w<_?_:w)<x?x:w)<g?g:w)<v?v:w;var C=this._bounds;return C.x=b,C.width=z-b,C.y=S,C.height=w-S,this._currentBounds=C},D.TilingSprite.prototype.destroy=function(){D.Sprite.prototype.destroy.call(this),this.canvasBuffer&&(this.canvasBuffer.destroy(),this.canvasBuffer=null),this.tileScale=null,this.tileScaleOffset=null,this.tilePosition=null,this.tilingTexture&&(this.tilingTexture.destroy(!0),this.tilingTexture=null)},Object.defineProperty(D.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e}}),Object.defineProperty(D.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e}}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=D),exports.PIXI=D):"undefined"!=typeof define&&define.amd?define("PIXI",e.PIXI=D):e.PIXI=D,D}.call(this),function(){var o,e=this,U=U||{VERSION:"2.6.2",GAMES:[],AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,NONE:0,LEFT:1,RIGHT:2,UP:3,DOWN:4,SPRITE:0,BUTTON:1,IMAGE:2,GRAPHICS:3,TEXT:4,TILESPRITE:5,BITMAPTEXT:6,GROUP:7,RENDERTEXTURE:8,TILEMAP:9,TILEMAPLAYER:10,EMITTER:11,POLYGON:12,BITMAPDATA:13,CANVAS_FILTER:14,WEBGL_FILTER:15,ELLIPSE:16,SPRITEBATCH:17,RETROFONT:18,POINTER:19,ROPE:20,CIRCLE:21,RECTANGLE:22,LINE:23,MATRIX:24,POINT:25,ROUNDEDRECTANGLE:26,CREATURE:27,VIDEO:28,PENDING_ATLAS:-1,HORIZONTAL:0,VERTICAL:1,LANDSCAPE:0,PORTRAIT:1,ANGLE_UP:270,ANGLE_DOWN:90,ANGLE_LEFT:180,ANGLE_RIGHT:0,ANGLE_NORTH_EAST:315,ANGLE_NORTH_WEST:225,ANGLE_SOUTH_EAST:45,ANGLE_SOUTH_WEST:135,TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12,blendModes:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},scaleModes:{DEFAULT:0,LINEAR:0,NEAREST:1},PIXI:PIXI||{}};if(Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Function.prototype.bind||(Function.prototype.bind=(o=Array.prototype.slice,function(t){var i=this,n=o.call(arguments,1);if("function"!=typeof i)throw new TypeError;function r(){var e=n.concat(o.call(arguments));i.apply(this instanceof r?this:t,e)}return r.prototype=function e(t){if(t&&(e.prototype=t),!(this instanceof e))return new e}(i.prototype),r})),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.forEach||(Array.prototype.forEach=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=2<=arguments.length?arguments[1]:void 0,r=0;r<i;r++)r in t&&e.call(n,t[r],r,t)}),"function"!=typeof window.Uint32Array&&"object"!=typeof window.Uint32Array){var t=function(e){var t=new Array;window[e]=function(e){if("number"==typeof e){Array.call(this,e),this.length=e;for(var t=0;t<this.length;t++)this[t]=0}else{Array.call(this,e.length),this.length=e.length;for(t=0;t<this.length;t++)this[t]=e[t]}},window[e].prototype=t,window[e].constructor=window[e]};t("Uint32Array"),t("Int16Array")}function n(e,t){this._scaleFactor=e,this._deltaMode=t,this.originalEvent=null}for(var i in window.console||(window.console={},window.console.log=window.console.assert=function(){},window.console.warn=window.console.assert=function(){}),U.Utils={reverseString:function(e){return e.split("").reverse().join("")},getProperty:function(e,t){for(var i=t.split("."),n=i.pop(),r=i.length,o=1,a=i[0];o<r&&(e=e[a]);)a=i[o],o++;return e?e[n]:null},setProperty:function(e,t,i){for(var n=t.split("."),r=n.pop(),o=n.length,a=1,s=n[0];a<o&&(e=e[s]);)s=n[a],a++;return e&&(e[r]=i),e},chanceRoll:function(e){return void 0===e&&(e=50),0<e&&100*Math.random()<=e},randomChoice:function(e,t){return Math.random()<.5?e:t},parseDimension:function(e,t){var i=0;return"string"==typeof e?"%"===e.substr(-1)?(i=parseInt(e,10)/100,0===t?window.innerWidth*i:window.innerHeight*i):parseInt(e,10):e},pad:function(e,t,i,n){if(void 0===t)t=0;if(void 0===i)i=" ";if(void 0===n)n=3;var r=0;if(t+1>=(e=e.toString()).length)switch(n){case 1:e=new Array(t+1-e.length).join(i)+e;break;case 3:var o=Math.ceil((r=t-e.length)/2);e=new Array(r-o+1).join(i)+e+new Array(o+1).join(i);break;default:e+=new Array(t+1-e.length).join(i)}return e},isPlainObject:function(e){if("object"!=typeof e||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},extend:function(){var e,t,i,n,r,o,a=arguments[0]||{},s=1,p=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[1]||{},s=2),p===s&&(a=this,--s);s<p;s++)if(null!=(e=arguments[s]))for(t in e)i=a[t],a!==(n=e[t])&&(l&&n&&(U.Utils.isPlainObject(n)||(r=Array.isArray(n)))?(o=r?(r=!1,i&&Array.isArray(i)?i:[]):i&&U.Utils.isPlainObject(i)?i:{},a[t]=U.Utils.extend(l,o,n)):void 0!==n&&(a[t]=n));return a},mixinPrototype:function(e,t,i){void 0===i&&(i=!1);for(var n=Object.keys(t),r=0;r<n.length;r++){var o=n[r],a=t[o];!i&&o in e||(!a||"function"!=typeof a.get&&"function"!=typeof a.set?e[o]=a:"function"==typeof a.clone?e[o]=a.clone():Object.defineProperty(e,o,a))}},mixin:function(e,t){if(!e||"object"!=typeof e)return t;for(var i in e){var n=e[i];if(!n.childNodes&&!n.cloneNode){var r=typeof e[i];e[i]&&"object"===r?typeof t[i]===r?t[i]=U.Utils.mixin(e[i],t[i]):t[i]=U.Utils.mixin(e[i],new n.constructor):t[i]=e[i]}}return t}},U.Circle=function(e,t,i){e=e||0,t=t||0,i=i||0,this.x=e,this.y=t,this._diameter=i,(this._radius=0)<i&&(this._radius=.5*i),this.type=U.CIRCLE},U.Circle.prototype={circumference:function(){return Math.PI*this._radius*2},random:function(e){void 0===e&&(e=new U.Point);var t=2*Math.PI*Math.random(),i=Math.random()+Math.random(),n=1<i?2-i:i,r=n*Math.cos(t),o=n*Math.sin(t);return e.x=this.x+r*this.radius,e.y=this.y+o*this.radius,e},getBounds:function(){return new U.Rectangle(this.x-this.radius,this.y-this.radius,this.diameter,this.diameter)},setTo:function(e,t,i){return this.x=e,this.y=t,this._diameter=i,this._radius=.5*i,this},copyFrom:function(e){return this.setTo(e.x,e.y,e.diameter)},copyTo:function(e){return e.x=this.x,e.y=this.y,e.diameter=this._diameter,e},distance:function(e,t){var i=U.Math.distance(this.x,this.y,e.x,e.y);return t?Math.round(i):i},clone:function(e){return null==e?e=new U.Circle(this.x,this.y,this.diameter):e.setTo(this.x,this.y,this.diameter),e},contains:function(e,t){return U.Circle.contains(this,e,t)},circumferencePoint:function(e,t,i){return U.Circle.circumferencePoint(this,e,t,i)},offset:function(e,t){return this.x+=e,this.y+=t,this},offsetPoint:function(e){return this.offset(e.x,e.y)},toString:function(){return"[{Phaser.Circle (x="+this.x+" y="+this.y+" diameter="+this.diameter+" radius="+this.radius+")}]"}},U.Circle.prototype.constructor=U.Circle,Object.defineProperty(U.Circle.prototype,"diameter",{get:function(){return this._diameter},set:function(e){0<e&&(this._diameter=e,this._radius=.5*e)}}),Object.defineProperty(U.Circle.prototype,"radius",{get:function(){return this._radius},set:function(e){0<e&&(this._radius=e,this._diameter=2*e)}}),Object.defineProperty(U.Circle.prototype,"left",{get:function(){return this.x-this._radius},set:function(e){e>this.x?(this._radius=0,this._diameter=0):this.radius=this.x-e}}),Object.defineProperty(U.Circle.prototype,"right",{get:function(){return this.x+this._radius},set:function(e){e<this.x?(this._radius=0,this._diameter=0):this.radius=e-this.x}}),Object.defineProperty(U.Circle.prototype,"top",{get:function(){return this.y-this._radius},set:function(e){e>this.y?(this._radius=0,this._diameter=0):this.radius=this.y-e}}),Object.defineProperty(U.Circle.prototype,"bottom",{get:function(){return this.y+this._radius},set:function(e){e<this.y?(this._radius=0,this._diameter=0):this.radius=e-this.y}}),Object.defineProperty(U.Circle.prototype,"area",{get:function(){return 0<this._radius?Math.PI*this._radius*this._radius:0}}),Object.defineProperty(U.Circle.prototype,"empty",{get:function(){return 0===this._diameter},set:function(e){!0===e&&this.setTo(0,0,0)}}),U.Circle.contains=function(e,t,i){return 0<e.radius&&t>=e.left&&t<=e.right&&i>=e.top&&i<=e.bottom&&(e.x-t)*(e.x-t)+(e.y-i)*(e.y-i)<=e.radius*e.radius},U.Circle.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.diameter===t.diameter},U.Circle.intersects=function(e,t){return U.Math.distance(e.x,e.y,t.x,t.y)<=e.radius+t.radius},U.Circle.circumferencePoint=function(e,t,i,n){return void 0===i&&(i=!1),void 0===n&&(n=new U.Point),!0===i&&(t=U.Math.degToRad(t)),n.x=e.x+e.radius*Math.cos(t),n.y=e.y+e.radius*Math.sin(t),n},U.Circle.intersectsRectangle=function(e,t){var i=Math.abs(e.x-t.x-t.halfWidth);if(t.halfWidth+e.radius<i)return!1;var n=Math.abs(e.y-t.y-t.halfHeight);if(t.halfHeight+e.radius<n)return!1;if(i<=t.halfWidth||n<=t.halfHeight)return!0;var r=i-t.halfWidth,o=n-t.halfHeight;return r*r+o*o<=e.radius*e.radius},PIXI.Circle=U.Circle,U.Ellipse=function(e,t,i,n){e=e||0,t=t||0,i=i||0,n=n||0,this.x=e,this.y=t,this.width=i,this.height=n,this.type=U.ELLIPSE},U.Ellipse.prototype={setTo:function(e,t,i,n){return this.x=e,this.y=t,this.width=i,this.height=n,this},getBounds:function(){return new U.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},copyFrom:function(e){return this.setTo(e.x,e.y,e.width,e.height)},copyTo:function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},clone:function(e){return null==e?e=new U.Ellipse(this.x,this.y,this.width,this.height):e.setTo(this.x,this.y,this.width,this.height),e},contains:function(e,t){return U.Ellipse.contains(this,e,t)},random:function(e){void 0===e&&(e=new U.Point);var t=Math.random()*Math.PI*2,i=Math.random();return e.x=Math.sqrt(i)*Math.cos(t),e.y=Math.sqrt(i)*Math.sin(t),e.x=this.x+e.x*this.width/2,e.y=this.y+e.y*this.height/2,e},toString:function(){return"[{Phaser.Ellipse (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")}]"}},U.Ellipse.prototype.constructor=U.Ellipse,Object.defineProperty(U.Ellipse.prototype,"left",{get:function(){return this.x},set:function(e){this.x=e}}),Object.defineProperty(U.Ellipse.prototype,"right",{get:function(){return this.x+this.width},set:function(e){e<this.x?this.width=0:this.width=e-this.x}}),Object.defineProperty(U.Ellipse.prototype,"top",{get:function(){return this.y},set:function(e){this.y=e}}),Object.defineProperty(U.Ellipse.prototype,"bottom",{get:function(){return this.y+this.height},set:function(e){e<this.y?this.height=0:this.height=e-this.y}}),Object.defineProperty(U.Ellipse.prototype,"empty",{get:function(){return 0===this.width||0===this.height},set:function(e){!0===e&&this.setTo(0,0,0,0)}}),U.Ellipse.contains=function(e,t,i){if(e.width<=0||e.height<=0)return!1;var n=(t-e.x)/e.width-.5,r=(i-e.y)/e.height-.5;return(n*=n)+(r*=r)<.25},PIXI.Ellipse=U.Ellipse,U.Line=function(e,t,i,n){e=e||0,t=t||0,i=i||0,n=n||0,this.start=new U.Point(e,t),this.end=new U.Point(i,n),this.type=U.LINE},U.Line.prototype={setTo:function(e,t,i,n){return this.start.setTo(e,t),this.end.setTo(i,n),this},fromSprite:function(e,t,i){return void 0===i&&(i=!1),i?this.setTo(e.center.x,e.center.y,t.center.x,t.center.y):this.setTo(e.x,e.y,t.x,t.y)},fromAngle:function(e,t,i,n){return this.start.setTo(e,t),this.end.setTo(e+Math.cos(i)*n,t+Math.sin(i)*n),this},rotate:function(e,t){var i=(this.start.x+this.end.x)/2,n=(this.start.y+this.end.y)/2;return this.start.rotate(i,n,e,t),this.end.rotate(i,n,e,t),this},rotateAround:function(e,t,i,n){return this.start.rotate(e,t,i,n),this.end.rotate(e,t,i,n),this},intersects:function(e,t,i){return U.Line.intersectsPoints(this.start,this.end,e.start,e.end,t,i)},reflect:function(e){return U.Line.reflect(this,e)},midPoint:function(e){return void 0===e&&(e=new U.Point),e.x=(this.start.x+this.end.x)/2,e.y=(this.start.y+this.end.y)/2,e},centerOn:function(e,t){var i=e-(this.start.x+this.end.x)/2,n=t-(this.start.y+this.end.y)/2;this.start.add(i,n),this.end.add(i,n)},pointOnLine:function(e,t){return(e-this.start.x)*(this.end.y-this.start.y)==(this.end.x-this.start.x)*(t-this.start.y)},pointOnSegment:function(e,t){var i=Math.min(this.start.x,this.end.x),n=Math.max(this.start.x,this.end.x),r=Math.min(this.start.y,this.end.y),o=Math.max(this.start.y,this.end.y);return this.pointOnLine(e,t)&&i<=e&&e<=n&&r<=t&&t<=o},random:function(e){void 0===e&&(e=new U.Point);var t=Math.random();return e.x=this.start.x+t*(this.end.x-this.start.x),e.y=this.start.y+t*(this.end.y-this.start.y),e},coordinatesOnLine:function(e,t){void 0===e&&(e=1),void 0===t&&(t=[]);var i=Math.round(this.start.x),n=Math.round(this.start.y),r=Math.round(this.end.x),o=Math.round(this.end.y),a=Math.abs(r-i),s=Math.abs(o-n),p=i<r?1:-1,l=n<o?1:-1,h=a-s;t.push([i,n]);for(var u=1;i!==r||n!==o;){var d=h<<1;-s<d&&(h-=s,i+=p),d<a&&(h+=a,n+=l),u%e==0&&t.push([i,n]),u++}return t},clone:function(e){return null==e?e=new U.Line(this.start.x,this.start.y,this.end.x,this.end.y):e.setTo(this.start.x,this.start.y,this.end.x,this.end.y),e}},Object.defineProperty(U.Line.prototype,"length",{get:function(){return Math.sqrt((this.end.x-this.start.x)*(this.end.x-this.start.x)+(this.end.y-this.start.y)*(this.end.y-this.start.y))}}),Object.defineProperty(U.Line.prototype,"angle",{get:function(){return Math.atan2(this.end.y-this.start.y,this.end.x-this.start.x)}}),Object.defineProperty(U.Line.prototype,"slope",{get:function(){return(this.end.y-this.start.y)/(this.end.x-this.start.x)}}),Object.defineProperty(U.Line.prototype,"perpSlope",{get:function(){return-(this.end.x-this.start.x)/(this.end.y-this.start.y)}}),Object.defineProperty(U.Line.prototype,"x",{get:function(){return Math.min(this.start.x,this.end.x)}}),Object.defineProperty(U.Line.prototype,"y",{get:function(){return Math.min(this.start.y,this.end.y)}}),Object.defineProperty(U.Line.prototype,"left",{get:function(){return Math.min(this.start.x,this.end.x)}}),Object.defineProperty(U.Line.prototype,"right",{get:function(){return Math.max(this.start.x,this.end.x)}}),Object.defineProperty(U.Line.prototype,"top",{get:function(){return Math.min(this.start.y,this.end.y)}}),Object.defineProperty(U.Line.prototype,"bottom",{get:function(){return Math.max(this.start.y,this.end.y)}}),Object.defineProperty(U.Line.prototype,"width",{get:function(){return Math.abs(this.start.x-this.end.x)}}),Object.defineProperty(U.Line.prototype,"height",{get:function(){return Math.abs(this.start.y-this.end.y)}}),Object.defineProperty(U.Line.prototype,"normalX",{get:function(){return Math.cos(this.angle-1.5707963267948966)}}),Object.defineProperty(U.Line.prototype,"normalY",{get:function(){return Math.sin(this.angle-1.5707963267948966)}}),Object.defineProperty(U.Line.prototype,"normalAngle",{get:function(){return U.Math.wrap(this.angle-1.5707963267948966,-Math.PI,Math.PI)}}),U.Line.intersectsPoints=function(e,t,i,n,r,o){void 0===r&&(r=!0),void 0===o&&(o=new U.Point);var a=t.y-e.y,s=n.y-i.y,p=e.x-t.x,l=i.x-n.x,h=t.x*e.y-e.x*t.y,u=n.x*i.y-i.x*n.y,d=a*l-s*p;if(0===d)return null;if(o.x=(p*u-l*h)/d,o.y=(s*h-a*u)/d,r){var c=(n.y-i.y)*(t.x-e.x)-(n.x-i.x)*(t.y-e.y),_=((n.x-i.x)*(e.y-i.y)-(n.y-i.y)*(e.x-i.x))/c,y=((t.x-e.x)*(e.y-i.y)-(t.y-e.y)*(e.x-i.x))/c;return 0<=_&&_<=1&&0<=y&&y<=1?o:null}return o},U.Line.intersects=function(e,t,i,n){return U.Line.intersectsPoints(e.start,e.end,t.start,t.end,i,n)},U.Line.intersectsRectangle=function(e,t){if(!U.Rectangle.intersects(e,t))return!1;var i=e.start.x,n=e.start.y,r=e.end.x,o=e.end.y,a=t.x,s=t.y,p=t.right,l=t.bottom,h=0;if(a<=i&&i<=p&&s<=n&&n<=l||a<=r&&r<=p&&s<=o&&o<=l)return!0;if(i<a&&a<=r){if(s<(h=n+(o-n)*(a-i)/(r-i))&&h<=l)return!0}else if(p<i&&r<=p&&s<=(h=n+(o-n)*(p-i)/(r-i))&&h<=l)return!0;if(n<s&&s<=o){if(a<=(h=i+(r-i)*(s-n)/(o-n))&&h<=p)return!0}else if(l<n&&o<=l&&a<=(h=i+(r-i)*(l-n)/(o-n))&&h<=p)return!0;return!1},U.Line.reflect=function(e,t){return 2*t.normalAngle-3.141592653589793-e.angle},U.Matrix=function(e,t,i,n,r,o){null==e&&(e=1),null==t&&(t=0),null==i&&(i=0),null==n&&(n=1),null==r&&(r=0),null==o&&(o=0),this.a=e,this.b=t,this.c=i,this.d=n,this.tx=r,this.ty=o,this.type=U.MATRIX},U.Matrix.prototype={fromArray:function(e){return this.setTo(e[0],e[1],e[3],e[4],e[2],e[5])},setTo:function(e,t,i,n,r,o){return this.a=e,this.b=t,this.c=i,this.d=n,this.tx=r,this.ty=o,this},clone:function(e){return null==e?e=new U.Matrix(this.a,this.b,this.c,this.d,this.tx,this.ty):(e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty),e},copyTo:function(e){return e.copyFrom(this),e},copyFrom:function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},toArray:function(e,t){return void 0===t&&(t=new PIXI.Float32Array(9)),e?(t[0]=this.a,t[1]=this.b,t[2]=0,t[3]=this.c,t[4]=this.d,t[5]=0,t[6]=this.tx,t[7]=this.ty):(t[0]=this.a,t[1]=this.c,t[2]=this.tx,t[3]=this.b,t[4]=this.d,t[5]=this.ty,t[6]=0,t[7]=0),t[8]=1,t},apply:function(e,t){return void 0===t&&(t=new U.Point),t.x=this.a*e.x+this.c*e.y+this.tx,t.y=this.b*e.x+this.d*e.y+this.ty,t},applyInverse:function(e,t){void 0===t&&(t=new U.Point);var i=1/(this.a*this.d+this.c*-this.b),n=e.x,r=e.y;return t.x=this.d*i*n+-this.c*i*r+(this.ty*this.c-this.tx*this.d)*i,t.y=this.a*i*r+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,t},translate:function(e,t){return this.tx+=e,this.ty+=t,this},scale:function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},rotate:function(e){var t=Math.cos(e),i=Math.sin(e),n=this.a,r=this.c,o=this.tx;return this.a=n*t-this.b*i,this.b=n*i+this.b*t,this.c=r*t-this.d*i,this.d=r*i+this.d*t,this.tx=o*t-this.ty*i,this.ty=o*i+this.ty*t,this},append:function(e){var t=this.a,i=this.b,n=this.c,r=this.d;return this.a=e.a*t+e.b*n,this.b=e.a*i+e.b*r,this.c=e.c*t+e.d*n,this.d=e.c*i+e.d*r,this.tx=e.tx*t+e.ty*n+this.tx,this.ty=e.tx*i+e.ty*r+this.ty,this},identity:function(){return this.setTo(1,0,0,1,0,0)}},U.identityMatrix=new U.Matrix,PIXI.Matrix=U.Matrix,PIXI.identityMatrix=U.identityMatrix,U.Point=function(e,t){e=e||0,t=t||0,this.x=e,this.y=t,this.type=U.POINT},U.Point.prototype={copyFrom:function(e){return this.setTo(e.x,e.y)},invert:function(){return this.setTo(this.y,this.x)},setTo:function(e,t){return this.x=e||0,this.y=t||(0!==t?this.x:0),this},set:function(e,t){return this.x=e||0,this.y=t||(0!==t?this.x:0),this},add:function(e,t){return this.x+=e,this.y+=t,this},subtract:function(e,t){return this.x-=e,this.y-=t,this},multiply:function(e,t){return this.x*=e,this.y*=t,this},divide:function(e,t){return this.x/=e,this.y/=t,this},clampX:function(e,t){return this.x=U.Math.clamp(this.x,e,t),this},clampY:function(e,t){return this.y=U.Math.clamp(this.y,e,t),this},clamp:function(e,t){return this.x=U.Math.clamp(this.x,e,t),this.y=U.Math.clamp(this.y,e,t),this},clone:function(e){return null==e?e=new U.Point(this.x,this.y):e.setTo(this.x,this.y),e},copyTo:function(e){return e.x=this.x,e.y=this.y,e},distance:function(e,t){return U.Point.distance(this,e,t)},equals:function(e){return e.x===this.x&&e.y===this.y},angle:function(e,t){return void 0===t&&(t=!1),t?U.Math.radToDeg(Math.atan2(e.y-this.y,e.x-this.x)):Math.atan2(e.y-this.y,e.x-this.x)},rotate:function(e,t,i,n,r){return U.Point.rotate(this,e,t,i,n,r)},getMagnitude:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},getMagnitudeSq:function(){return this.x*this.x+this.y*this.y},setMagnitude:function(e){return this.normalize().multiply(e,e)},normalize:function(){if(!this.isZero()){var e=this.getMagnitude();this.x/=e,this.y/=e}return this},isZero:function(){return 0===this.x&&0===this.y},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},perp:function(){return this.setTo(-this.y,this.x)},rperp:function(){return this.setTo(this.y,-this.x)},normalRightHand:function(){return this.setTo(-1*this.y,this.x)},floor:function(){return this.setTo(Math.floor(this.x),Math.floor(this.y))},ceil:function(){return this.setTo(Math.ceil(this.x),Math.ceil(this.y))},toString:function(){return"[{Point (x="+this.x+" y="+this.y+")}]"}},U.Point.prototype.constructor=U.Point,U.Point.add=function(e,t,i){return void 0===i&&(i=new U.Point),i.x=e.x+t.x,i.y=e.y+t.y,i},U.Point.subtract=function(e,t,i){return void 0===i&&(i=new U.Point),i.x=e.x-t.x,i.y=e.y-t.y,i},U.Point.multiply=function(e,t,i){return void 0===i&&(i=new U.Point),i.x=e.x*t.x,i.y=e.y*t.y,i},U.Point.divide=function(e,t,i){return void 0===i&&(i=new U.Point),i.x=e.x/t.x,i.y=e.y/t.y,i},U.Point.equals=function(e,t){return e.x===t.x&&e.y===t.y},U.Point.angle=function(e,t){return Math.atan2(e.y-t.y,e.x-t.x)},U.Point.negative=function(e,t){return void 0===t&&(t=new U.Point),t.setTo(-e.x,-e.y)},U.Point.multiplyAdd=function(e,t,i,n){return void 0===n&&(n=new U.Point),n.setTo(e.x+t.x*i,e.y+t.y*i)},U.Point.interpolate=function(e,t,i,n){return void 0===n&&(n=new U.Point),n.setTo(e.x+(t.x-e.x)*i,e.y+(t.y-e.y)*i)},U.Point.perp=function(e,t){return void 0===t&&(t=new U.Point),t.setTo(-e.y,e.x)},U.Point.rperp=function(e,t){return void 0===t&&(t=new U.Point),t.setTo(e.y,-e.x)},U.Point.distance=function(e,t,i){var n=U.Math.distance(e.x,e.y,t.x,t.y);return i?Math.round(n):n},U.Point.project=function(e,t,i){void 0===i&&(i=new U.Point);var n=e.dot(t)/t.getMagnitudeSq();return 0!==n&&i.setTo(n*t.x,n*t.y),i},U.Point.projectUnit=function(e,t,i){void 0===i&&(i=new U.Point);var n=e.dot(t);return 0!==n&&i.setTo(n*t.x,n*t.y),i},U.Point.normalRightHand=function(e,t){return void 0===t&&(t=new U.Point),t.setTo(-1*e.y,e.x)},U.Point.normalize=function(e,t){void 0===t&&(t=new U.Point);var i=e.getMagnitude();return 0!==i&&t.setTo(e.x/i,e.y/i),t},U.Point.rotate=function(e,t,i,n,r,o){if(r&&(n=U.Math.degToRad(n)),void 0===o){e.subtract(t,i);var a=Math.sin(n),s=Math.cos(n),p=s*e.x-a*e.y,l=a*e.x+s*e.y;e.x=p+t,e.y=l+i}else{var h=n+Math.atan2(e.y-i,e.x-t);e.x=t+o*Math.cos(h),e.y=i+o*Math.sin(h)}return e},U.Point.centroid=function(e,t){if(void 0===t&&(t=new U.Point),"[object Array]"!==Object.prototype.toString.call(e))throw new Error("Phaser.Point. Parameter 'points' must be an array");var i=e.length;if(i<1)throw new Error("Phaser.Point. Parameter 'points' array must not be empty");if(1===i)return t.copyFrom(e[0]),t;for(var n=0;n<i;n++)U.Point.add(t,e[n],t);return t.divide(i,i),t},U.Point.parse=function(e,t,i){t=t||"x",i=i||"y";var n=new U.Point;return e[t]&&(n.x=parseInt(e[t],10)),e[i]&&(n.y=parseInt(e[i],10)),n},PIXI.Point=U.Point,U.Polygon=function(){this.area=0,this._points=[],0<arguments.length&&this.setTo.apply(this,arguments),this.closed=!0,this.flattened=!1,this.type=U.POLYGON},U.Polygon.prototype={toNumberArray:function(e){void 0===e&&(e=[]);for(var t=0;t<this._points.length;t++)"number"==typeof this._points[t]?(e.push(this._points[t]),e.push(this._points[t+1]),t++):(e.push(this._points[t].x),e.push(this._points[t].y));return e},flatten:function(){return this._points=this.toNumberArray(),this.flattened=!0,this},clone:function(e){var t=this._points.slice();return null==e?e=new U.Polygon(t):e.setTo(t),e},contains:function(e,t){var i=!1;if(this.flattened)for(var n=-2,r=this._points.length-2;(n+=2)<this._points.length;r=n){var o=this._points[n],a=this._points[n+1],s=this._points[r],p=this._points[r+1];(a<=t&&t<p||p<=t&&t<a)&&e<(s-o)*(t-a)/(p-a)+o&&(i=!i)}else for(n=-1,r=this._points.length-1;++n<this._points.length;r=n){o=this._points[n].x,a=this._points[n].y,s=this._points[r].x,p=this._points[r].y;(a<=t&&t<p||p<=t&&t<a)&&e<(s-o)*(t-a)/(p-a)+o&&(i=!i)}return i},setTo:function(e){if(this.area=0,this._points=[],0<arguments.length){Array.isArray(e)||(e=Array.prototype.slice.call(arguments));for(var t=Number.MAX_VALUE,i=0,n=e.length;i<n;i++){if("number"==typeof e[i]){var r=new PIXI.Point(e[i],e[i+1]);i++}else if(Array.isArray(e[i]))r=new PIXI.Point(e[i][0],e[i][1]);else r=new PIXI.Point(e[i].x,e[i].y);this._points.push(r),r.y<t&&(t=r.y)}this.calculateArea(t)}return this},calculateArea:function(e){for(var t,i,n,r,o=0,a=this._points.length;o<a;o++)t=this._points[o],i=o===a-1?this._points[0]:this._points[o+1],n=(t.y-e+(i.y-e))/2,r=t.x-i.x,this.area+=n*r;return this.area}},U.Polygon.prototype.constructor=U.Polygon,Object.defineProperty(U.Polygon.prototype,"points",{get:function(){return this._points},set:function(e){null!=e?this.setTo(e):this.setTo()}}),PIXI.Polygon=U.Polygon,U.Rectangle=function(e,t,i,n){e=e||0,t=t||0,i=i||0,n=n||0,this.x=e,this.y=t,this.width=i,this.height=n,this.type=U.RECTANGLE},U.Rectangle.prototype={offset:function(e,t){return this.x+=e,this.y+=t,this},offsetPoint:function(e){return this.offset(e.x,e.y)},setTo:function(e,t,i,n){return this.x=e,this.y=t,this.width=i,this.height=n,this},scale:function(e,t){return void 0===t&&(t=e),this.width*=e,this.height*=t,this},centerOn:function(e,t){return this.centerX=e,this.centerY=t,this},floor:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y)},floorAll:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.width=Math.floor(this.width),this.height=Math.floor(this.height)},ceil:function(){this.x=Math.ceil(this.x),this.y=Math.ceil(this.y)},ceilAll:function(){this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height)},copyFrom:function(e){return this.setTo(e.x,e.y,e.width,e.height)},copyTo:function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},inflate:function(e,t){return U.Rectangle.inflate(this,e,t)},size:function(e){return U.Rectangle.size(this,e)},resize:function(e,t){return this.width=e,this.height=t,this},clone:function(e){return U.Rectangle.clone(this,e)},contains:function(e,t){return U.Rectangle.contains(this,e,t)},containsRect:function(e){return U.Rectangle.containsRect(e,this)},equals:function(e){return U.Rectangle.equals(this,e)},intersection:function(e,t){return U.Rectangle.intersection(this,e,t)},intersects:function(e){return U.Rectangle.intersects(this,e)},intersectsRaw:function(e,t,i,n,r){return U.Rectangle.intersectsRaw(this,e,t,i,n,r)},union:function(e,t){return U.Rectangle.union(this,e,t)},random:function(e){return void 0===e&&(e=new U.Point),e.x=this.randomX,e.y=this.randomY,e},getPoint:function(e,t){switch(void 0===t&&(t=new U.Point),e){default:case U.TOP_LEFT:return t.set(this.x,this.y);case U.TOP_CENTER:return t.set(this.centerX,this.y);case U.TOP_RIGHT:return t.set(this.right,this.y);case U.LEFT_CENTER:return t.set(this.x,this.centerY);case U.CENTER:return t.set(this.centerX,this.centerY);case U.RIGHT_CENTER:return t.set(this.right,this.centerY);case U.BOTTOM_LEFT:return t.set(this.x,this.bottom);case U.BOTTOM_CENTER:return t.set(this.centerX,this.bottom);case U.BOTTOM_RIGHT:return t.set(this.right,this.bottom)}},toString:function(){return"[{Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+" empty="+this.empty+")}]"}},Object.defineProperty(U.Rectangle.prototype,"halfWidth",{get:function(){return Math.round(this.width/2)}}),Object.defineProperty(U.Rectangle.prototype,"halfHeight",{get:function(){return Math.round(this.height/2)}}),Object.defineProperty(U.Rectangle.prototype,"bottom",{get:function(){return this.y+this.height},set:function(e){e<=this.y?this.height=0:this.height=e-this.y}}),Object.defineProperty(U.Rectangle.prototype,"bottomLeft",{get:function(){return new U.Point(this.x,this.bottom)},set:function(e){this.x=e.x,this.bottom=e.y}}),Object.defineProperty(U.Rectangle.prototype,"bottomRight",{get:function(){return new U.Point(this.right,this.bottom)},set:function(e){this.right=e.x,this.bottom=e.y}}),Object.defineProperty(U.Rectangle.prototype,"left",{get:function(){return this.x},set:function(e){e>=this.right?this.width=0:this.width=this.right-e,this.x=e}}),Object.defineProperty(U.Rectangle.prototype,"right",{get:function(){return this.x+this.width},set:function(e){e<=this.x?this.width=0:this.width=e-this.x}}),Object.defineProperty(U.Rectangle.prototype,"volume",{get:function(){return this.width*this.height}}),Object.defineProperty(U.Rectangle.prototype,"perimeter",{get:function(){return 2*this.width+2*this.height}}),Object.defineProperty(U.Rectangle.prototype,"centerX",{get:function(){return this.x+this.halfWidth},set:function(e){this.x=e-this.halfWidth}}),Object.defineProperty(U.Rectangle.prototype,"centerY",{get:function(){return this.y+this.halfHeight},set:function(e){this.y=e-this.halfHeight}}),Object.defineProperty(U.Rectangle.prototype,"randomX",{get:function(){return this.x+Math.random()*this.width}}),Object.defineProperty(U.Rectangle.prototype,"randomY",{get:function(){return this.y+Math.random()*this.height}}),Object.defineProperty(U.Rectangle.prototype,"top",{get:function(){return this.y},set:function(e){e>=this.bottom?(this.height=0,this.y=e):this.height=this.bottom-e}}),Object.defineProperty(U.Rectangle.prototype,"topLeft",{get:function(){return new U.Point(this.x,this.y)},set:function(e){this.x=e.x,this.y=e.y}}),Object.defineProperty(U.Rectangle.prototype,"topRight",{get:function(){return new U.Point(this.x+this.width,this.y)},set:function(e){this.right=e.x,this.y=e.y}}),Object.defineProperty(U.Rectangle.prototype,"empty",{get:function(){return!this.width||!this.height},set:function(e){!0===e&&this.setTo(0,0,0,0)}}),U.Rectangle.prototype.constructor=U.Rectangle,U.Rectangle.inflate=function(e,t,i){return e.x-=t,e.width+=2*t,e.y-=i,e.height+=2*i,e},U.Rectangle.inflatePoint=function(e,t){return U.Rectangle.inflate(e,t.x,t.y)},U.Rectangle.size=function(e,t){return null==t?t=new U.Point(e.width,e.height):t.setTo(e.width,e.height),t},U.Rectangle.clone=function(e,t){return null==t?t=new U.Rectangle(e.x,e.y,e.width,e.height):t.setTo(e.x,e.y,e.width,e.height),t},U.Rectangle.contains=function(e,t,i){return!(e.width<=0||e.height<=0)&&(t>=e.x&&t<e.right&&i>=e.y&&i<e.bottom)},U.Rectangle.containsRaw=function(e,t,i,n,r,o){return e<=r&&r<e+i&&t<=o&&o<t+n},U.Rectangle.containsPoint=function(e,t){return U.Rectangle.contains(e,t.x,t.y)},U.Rectangle.containsRect=function(e,t){return!(e.volume>t.volume)&&(e.x>=t.x&&e.y>=t.y&&e.right<t.right&&e.bottom<t.bottom)},U.Rectangle.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height},U.Rectangle.sameDimensions=function(e,t){return e.width===t.width&&e.height===t.height},U.Rectangle.intersection=function(e,t,i){return void 0===i&&(i=new U.Rectangle),U.Rectangle.intersects(e,t)&&(i.x=Math.max(e.x,t.x),i.y=Math.max(e.y,t.y),i.width=Math.min(e.right,t.right)-i.x,i.height=Math.min(e.bottom,t.bottom)-i.y),i},U.Rectangle.intersects=function(e,t){return!(e.width<=0||e.height<=0||t.width<=0||t.height<=0)&&!(e.right<t.x||e.bottom<t.y||e.x>t.right||e.y>t.bottom)},U.Rectangle.intersectsRaw=function(e,t,i,n,r,o){return void 0===o&&(o=0),!(t>e.right+o||i<e.left-o||n>e.bottom+o||r<e.top-o)},U.Rectangle.union=function(e,t,i){return void 0===i&&(i=new U.Rectangle),i.setTo(Math.min(e.x,t.x),Math.min(e.y,t.y),Math.max(e.right,t.right)-Math.min(e.left,t.left),Math.max(e.bottom,t.bottom)-Math.min(e.top,t.top))},U.Rectangle.aabb=function(e,t){void 0===t&&(t=new U.Rectangle);var i=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return e.forEach(function(e){e.x>i&&(i=e.x),e.x<n&&(n=e.x),e.y>r&&(r=e.y),e.y<o&&(o=e.y)}),t.setTo(n,o,i-n,r-o),t},PIXI.Rectangle=U.Rectangle,PIXI.EmptyRectangle=new U.Rectangle(0,0,0,0),U.RoundedRectangle=function(e,t,i,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=20),this.x=e,this.y=t,this.width=i,this.height=n,this.radius=r||20,this.type=U.ROUNDEDRECTANGLE},U.RoundedRectangle.prototype={clone:function(){return new U.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},contains:function(e,t){if(this.width<=0||this.height<=0)return!1;var i=this.x;if(i<=e&&e<=i+this.width){var n=this.y;if(n<=t&&t<=n+this.height)return!0}return!1}},U.RoundedRectangle.prototype.constructor=U.RoundedRectangle,PIXI.RoundedRectangle=U.RoundedRectangle,U.Camera=function(e,t,i,n,r,o){this.game=e,this.world=e.world,this.id=0,this.view=new U.Rectangle(i,n,r,o),this.bounds=new U.Rectangle(i,n,r,o),this.deadzone=null,this.visible=!0,this.roundPx=!0,this.atLimit={x:!1,y:!1},this.target=null,this.displayObject=null,this.scale=null,this.totalInView=0,this.lerp=new U.Point(1,1),this.onShakeComplete=new U.Signal,this.onFlashComplete=new U.Signal,this.onFadeComplete=new U.Signal,this.fx=null,this._targetPosition=new U.Point,this._edge=0,this._position=new U.Point,this._shake={intensity:0,duration:0,horizontal:!1,vertical:!1,shakeBounds:!0,x:0,y:0},this._fxDuration=0,this._fxType=0},U.Camera.FOLLOW_LOCKON=0,U.Camera.FOLLOW_PLATFORMER=1,U.Camera.FOLLOW_TOPDOWN=2,U.Camera.FOLLOW_TOPDOWN_TIGHT=3,U.Camera.SHAKE_BOTH=4,U.Camera.SHAKE_HORIZONTAL=5,U.Camera.SHAKE_VERTICAL=6,U.Camera.ENABLE_FX=!0,U.Camera.prototype={boot:function(){this.displayObject=this.game.world,this.scale=this.game.world.scale,this.game.camera=this,U.Graphics&&U.Camera.ENABLE_FX&&(this.fx=new U.Graphics(this.game),this.game.stage.addChild(this.fx))},preUpdate:function(){this.totalInView=0},follow:function(e,t,i,n){var r;switch(void 0===t&&(t=U.Camera.FOLLOW_LOCKON),void 0===i&&(i=1),void 0===n&&(n=1),this.target=e,this.lerp.set(i,n),t){case U.Camera.FOLLOW_PLATFORMER:var o=this.width/8,a=this.height/3;this.deadzone=new U.Rectangle((this.width-o)/2,(this.height-a)/2-.25*a,o,a);break;case U.Camera.FOLLOW_TOPDOWN:r=Math.max(this.width,this.height)/4,this.deadzone=new U.Rectangle((this.width-r)/2,(this.height-r)/2,r,r);break;case U.Camera.FOLLOW_TOPDOWN_TIGHT:r=Math.max(this.width,this.height)/8,this.deadzone=new U.Rectangle((this.width-r)/2,(this.height-r)/2,r,r);break;case U.Camera.FOLLOW_LOCKON:default:this.deadzone=null}},unfollow:function(){this.target=null},focusOn:function(e){this.setPosition(Math.round(e.x-this.view.halfWidth),Math.round(e.y-this.view.halfHeight))},focusOnXY:function(e,t){this.setPosition(Math.round(e-this.view.halfWidth),Math.round(t-this.view.halfHeight))},shake:function(e,t,i,n,r){return void 0===e&&(e=.05),void 0===t&&(t=500),void 0===i&&(i=!0),void 0===n&&(n=U.Camera.SHAKE_BOTH),void 0===r&&(r=!0),!(!i&&0<this._shake.duration)&&(this._shake.intensity=e,this._shake.duration=t,this._shake.shakeBounds=r,this._shake.x=0,this._shake.y=0,this._shake.horizontal=n===U.Camera.SHAKE_BOTH||n===U.Camera.SHAKE_HORIZONTAL,this._shake.vertical=n===U.Camera.SHAKE_BOTH||n===U.Camera.SHAKE_VERTICAL,!0)},flash:function(e,t,i){return void 0===e&&(e=16777215),void 0===t&&(t=500),void 0===i&&(i=!1),!(!this.fx||!i&&0<this._fxDuration)&&(this.fx.clear(),this.fx.beginFill(e),this.fx.drawRect(0,0,this.width,this.height),this.fx.endFill(),this.fx.alpha=1,this._fxDuration=t,!(this._fxType=0))},fade:function(e,t,i){return void 0===e&&(e=0),void 0===t&&(t=500),void 0===i&&(i=!1),!(!this.fx||!i&&0<this._fxDuration)&&(this.fx.clear(),this.fx.beginFill(e),this.fx.drawRect(0,0,this.width,this.height),this.fx.endFill(),this.fx.alpha=0,this._fxDuration=t,this._fxType=1,!0)},update:function(){0<this._fxDuration&&this.updateFX(),0<this._shake.duration&&this.updateShake(),this.bounds&&this.checkBounds(),this.roundPx&&(this.view.floor(),this._shake.x=Math.floor(this._shake.x),this._shake.y=Math.floor(this._shake.y)),this.displayObject.position.x=-this.view.x,this.displayObject.position.y=-this.view.y},updateFX:function(){0===this._fxType?(this.fx.alpha-=this.game.time.elapsedMS/this._fxDuration,this.fx.alpha<=0&&(this._fxDuration=0,this.fx.alpha=0,this.onFlashComplete.dispatch())):(this.fx.alpha+=this.game.time.elapsedMS/this._fxDuration,1<=this.fx.alpha&&(this._fxDuration=0,this.fx.alpha=1,this.onFadeComplete.dispatch()))},updateShake:function(){this._shake.duration-=this.game.time.elapsedMS,this._shake.duration<=0?(this.onShakeComplete.dispatch(),this._shake.x=0,this._shake.y=0):(this._shake.horizontal&&(this._shake.x=this.game.rnd.frac()*this._shake.intensity*this.view.width*2-this._shake.intensity*this.view.width),this._shake.vertical&&(this._shake.y=this.game.rnd.frac()*this._shake.intensity*this.view.height*2-this._shake.intensity*this.view.height))},updateTarget:function(){this._targetPosition.x=this.view.x+this.target.worldPosition.x,this._targetPosition.y=this.view.y+this.target.worldPosition.y,this.deadzone?(this._edge=this._targetPosition.x-this.view.x,this._edge<this.deadzone.left?this.view.x=this.game.math.linear(this.view.x,this._targetPosition.x-this.deadzone.left,this.lerp.x):this._edge>this.deadzone.right&&(this.view.x=this.game.math.linear(this.view.x,this._targetPosition.x-this.deadzone.right,this.lerp.x)),this._edge=this._targetPosition.y-this.view.y,this._edge<this.deadzone.top?this.view.y=this.game.math.linear(this.view.y,this._targetPosition.y-this.deadzone.top,this.lerp.y):this._edge>this.deadzone.bottom&&(this.view.y=this.game.math.linear(this.view.y,this._targetPosition.y-this.deadzone.bottom,this.lerp.y))):(this.view.x=this.game.math.linear(this.view.x,this._targetPosition.x-this.view.halfWidth,this.lerp.x),this.view.y=this.game.math.linear(this.view.y,this._targetPosition.y-this.view.halfHeight,this.lerp.y)),this.bounds&&this.checkBounds(),this.roundPx&&this.view.floor(),this.displayObject.position.x=-this.view.x,this.displayObject.position.y=-this.view.y},setBoundsToWorld:function(){this.bounds&&this.bounds.copyFrom(this.game.world.bounds)},checkBounds:function(){this.atLimit.x=!1,this.atLimit.y=!1;var e=this.view.x+this._shake.x,t=this.view.right+this._shake.x,i=this.view.y+this._shake.y,n=this.view.bottom+this._shake.y;e<=this.bounds.x*this.scale.x&&(this.atLimit.x=!0,this.view.x=this.bounds.x*this.scale.x,this._shake.shakeBounds||(this._shake.x=0)),t>=this.bounds.right*this.scale.x&&(this.atLimit.x=!0,this.view.x=this.bounds.right*this.scale.x-this.width,this._shake.shakeBounds||(this._shake.x=0)),i<=this.bounds.top*this.scale.y&&(this.atLimit.y=!0,this.view.y=this.bounds.top*this.scale.y,this._shake.shakeBounds||(this._shake.y=0)),n>=this.bounds.bottom*this.scale.y&&(this.atLimit.y=!0,this.view.y=this.bounds.bottom*this.scale.y-this.height,this._shake.shakeBounds||(this._shake.y=0))},setPosition:function(e,t){this.view.x=e,this.view.y=t,this.bounds&&this.checkBounds()},setSize:function(e,t){this.view.width=e,this.view.height=t},reset:function(){this.target=null,this.view.x=0,this.view.y=0,this._shake.duration=0,this.resetFX()},resetFX:function(){this.fx.clear(),this.fx.alpha=0,this._fxDuration=0}},U.Camera.prototype.constructor=U.Camera,Object.defineProperty(U.Camera.prototype,"x",{get:function(){return this.view.x},set:function(e){this.view.x=e,this.bounds&&this.checkBounds()}}),Object.defineProperty(U.Camera.prototype,"y",{get:function(){return this.view.y},set:function(e){this.view.y=e,this.bounds&&this.checkBounds()}}),Object.defineProperty(U.Camera.prototype,"position",{get:function(){return this._position.set(this.view.x,this.view.y),this._position},set:function(e){void 0!==e.x&&(this.view.x=e.x),void 0!==e.y&&(this.view.y=e.y),this.bounds&&this.checkBounds()}}),Object.defineProperty(U.Camera.prototype,"width",{get:function(){return this.view.width},set:function(e){this.view.width=e}}),Object.defineProperty(U.Camera.prototype,"height",{get:function(){return this.view.height},set:function(e){this.view.height=e}}),Object.defineProperty(U.Camera.prototype,"shakeIntensity",{get:function(){return this._shake.intensity},set:function(e){this._shake.intensity=e}}),U.State=function(){this.game=null,this.key="",this.add=null,this.make=null,this.camera=null,this.cache=null,this.input=null,this.load=null,this.math=null,this.sound=null,this.scale=null,this.stage=null,this.state=null,this.time=null,this.tweens=null,this.world=null,this.particles=null,this.physics=null,this.rnd=null},U.State.prototype={init:function(){},preload:function(){},loadUpdate:function(){},loadRender:function(){},create:function(){},update:function(){},preRender:function(){},render:function(){},resize:function(){},paused:function(){},resumed:function(){},pauseUpdate:function(){},shutdown:function(){}},U.State.prototype.constructor=U.State,U.StateManager=function(e,t){this.game=e,this.states={},(this._pendingState=null)!=t&&(this._pendingState=t),this._clearWorld=!1,this._clearCache=!1,this._created=!1,this._args=[],this.current="",this.onStateChange=new U.Signal,this.onInitCallback=null,this.onPreloadCallback=null,this.onCreateCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onResizeCallback=null,this.onPreRenderCallback=null,this.onLoadUpdateCallback=null,this.onLoadRenderCallback=null,this.onPausedCallback=null,this.onResumedCallback=null,this.onPauseUpdateCallback=null,this.onShutDownCallback=null},U.StateManager.prototype={boot:function(){this.game.onPause.add(this.pause,this),this.game.onResume.add(this.resume,this),null!==this._pendingState&&"string"!=typeof this._pendingState&&this.add("default",this._pendingState,!0)},add:function(e,t,i){var n;return void 0===i&&(i=!1),t instanceof U.State?n=t:"object"==typeof t?(n=t).game=this.game:"function"==typeof t&&(n=new t(this.game)),this.states[e]=n,i&&(this.game.isBooted?this.start(e):this._pendingState=e),n},remove:function(e){this.current===e&&(this.callbackContext=null,this.onInitCallback=null,this.onShutDownCallback=null,this.onPreloadCallback=null,this.onLoadRenderCallback=null,this.onLoadUpdateCallback=null,this.onCreateCallback=null,this.onUpdateCallback=null,this.onPreRenderCallback=null,this.onRenderCallback=null,this.onResizeCallback=null,this.onPausedCallback=null,this.onResumedCallback=null,this.onPauseUpdateCallback=null),delete this.states[e]},start:function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=!1),this.checkState(e)&&(this._pendingState=e,this._clearWorld=t,this._clearCache=i,3<arguments.length&&(this._args=Array.prototype.splice.call(arguments,3)))},restart:function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!1),this._pendingState=this.current,this._clearWorld=e,this._clearCache=t,2<arguments.length&&(this._args=Array.prototype.slice.call(arguments,2))},dummy:function(){},preUpdate:function(){if(this._pendingState&&this.game.isBooted){var e=this.current;if(this.clearCurrentState(),this.setCurrentState(this._pendingState),this.onStateChange.dispatch(this.current,e),this.current!==this._pendingState)return;this._pendingState=null,this.onPreloadCallback?(this.game.load.reset(!0),this.onPreloadCallback.call(this.callbackContext,this.game),0===this.game.load.totalQueuedFiles()&&0===this.game.load.totalQueuedPacks()?this.loadComplete():this.game.load.start()):this.loadComplete()}},clearCurrentState:function(){this.current&&(this.onShutDownCallback&&this.onShutDownCallback.call(this.callbackContext,this.game),this.game.tweens.removeAll(),this.game.camera.reset(),this.game.input.reset(!0),this.game.physics.clear(),this.game.time.removeAll(),this.game.scale.reset(this._clearWorld),this.game.debug&&this.game.debug.reset(),this._clearWorld&&(this.game.world.shutdown(),this._clearCache&&this.game.cache.destroy()))},checkState:function(e){return!!this.states[e]&&!!(this.states[e].preload||this.states[e].create||this.states[e].update||this.states[e].render)},link:function(e){this.states[e].game=this.game,this.states[e].add=this.game.add,this.states[e].make=this.game.make,this.states[e].camera=this.game.camera,this.states[e].cache=this.game.cache,this.states[e].input=this.game.input,this.states[e].load=this.game.load,this.states[e].math=this.game.math,this.states[e].sound=this.game.sound,this.states[e].scale=this.game.scale,(this.states[e].state=this).states[e].stage=this.game.stage,this.states[e].time=this.game.time,this.states[e].tweens=this.game.tweens,this.states[e].world=this.game.world,this.states[e].particles=this.game.particles,this.states[e].rnd=this.game.rnd,this.states[e].physics=this.game.physics,this.states[e].key=e},unlink:function(e){this.states[e]&&(this.states[e].game=null,this.states[e].add=null,this.states[e].make=null,this.states[e].camera=null,this.states[e].cache=null,this.states[e].input=null,this.states[e].load=null,this.states[e].math=null,this.states[e].sound=null,this.states[e].scale=null,this.states[e].state=null,this.states[e].stage=null,this.states[e].time=null,this.states[e].tweens=null,this.states[e].world=null,this.states[e].particles=null,this.states[e].rnd=null,this.states[e].physics=null)},setCurrentState:function(e){this.callbackContext=this.states[e],this.link(e),this.onInitCallback=this.states[e].init||this.dummy,this.onPreloadCallback=this.states[e].preload||null,this.onLoadRenderCallback=this.states[e].loadRender||null,this.onLoadUpdateCallback=this.states[e].loadUpdate||null,this.onCreateCallback=this.states[e].create||null,this.onUpdateCallback=this.states[e].update||null,this.onPreRenderCallback=this.states[e].preRender||null,this.onRenderCallback=this.states[e].render||null,this.onResizeCallback=this.states[e].resize||null,this.onPausedCallback=this.states[e].paused||null,this.onResumedCallback=this.states[e].resumed||null,this.onPauseUpdateCallback=this.states[e].pauseUpdate||null,this.onShutDownCallback=this.states[e].shutdown||this.dummy,""!==this.current&&this.game.physics.reset(),this.current=e,this._created=!1,this.onInitCallback.apply(this.callbackContext,this._args),e===this._pendingState&&(this._args=[]),this.game._kickstart=!0},getCurrentState:function(){return this.states[this.current]},loadComplete:function(){!1===this._created&&this.onLoadUpdateCallback&&this.onLoadUpdateCallback.call(this.callbackContext,this.game),!1===this._created&&this.onCreateCallback?(this._created=!0,this.onCreateCallback.call(this.callbackContext,this.game)):this._created=!0},pause:function(){this._created&&this.onPausedCallback&&this.onPausedCallback.call(this.callbackContext,this.game)},resume:function(){this._created&&this.onResumedCallback&&this.onResumedCallback.call(this.callbackContext,this.game)},update:function(){this._created?this.onUpdateCallback&&this.onUpdateCallback.call(this.callbackContext,this.game):this.onLoadUpdateCallback&&this.onLoadUpdateCallback.call(this.callbackContext,this.game)},pauseUpdate:function(){this._created?this.onPauseUpdateCallback&&this.onPauseUpdateCallback.call(this.callbackContext,this.game):this.onLoadUpdateCallback&&this.onLoadUpdateCallback.call(this.callbackContext,this.game)},preRender:function(e){this._created&&this.onPreRenderCallback&&this.onPreRenderCallback.call(this.callbackContext,this.game,e)},resize:function(e,t){this.onResizeCallback&&this.onResizeCallback.call(this.callbackContext,e,t)},render:function(){this._created?this.onRenderCallback&&(this.game.renderType===U.CANVAS?(this.game.context.save(),this.game.context.setTransform(1,0,0,1,0,0),this.onRenderCallback.call(this.callbackContext,this.game),this.game.context.restore()):this.onRenderCallback.call(this.callbackContext,this.game)):this.onLoadRenderCallback&&this.onLoadRenderCallback.call(this.callbackContext,this.game)},destroy:function(){this._clearWorld=!0,this._clearCache=!0,this.clearCurrentState(),this.callbackContext=null,this.onInitCallback=null,this.onShutDownCallback=null,this.onPreloadCallback=null,this.onLoadRenderCallback=null,this.onLoadUpdateCallback=null,this.onCreateCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onPausedCallback=null,this.onResumedCallback=null,this.onPauseUpdateCallback=null,this.game=null,this.states={},this._pendingState=null,this.current=""}},U.StateManager.prototype.constructor=U.StateManager,Object.defineProperty(U.StateManager.prototype,"created",{get:function(){return this._created}}),U.Signal=function(){},U.Signal.prototype={_bindings:null,_prevParams:null,memorize:!1,_shouldPropagate:!0,active:!0,_boundDispatch:!1,validateListener:function(e,t){if("function"!=typeof e)throw new Error("Phaser.Signal: listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))},_registerListener:function(e,t,i,n,r){var o,a=this._indexOfListener(e,i);if(-1!==a){if((o=this._bindings[a]).isOnce()!==t)throw new Error("You cannot add"+(t?"":"Once")+"() then add"+(t?"Once":"")+"() the same listener without removing the relationship first.")}else o=new U.SignalBinding(this,e,t,i,n,r),this._addBinding(o);return this.memorize&&this._prevParams&&o.execute(this._prevParams),o},_addBinding:function(e){this._bindings||(this._bindings=[]);for(var t=this._bindings.length;t--,this._bindings[t]&&e._priority<=this._bindings[t]._priority;);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){if(!this._bindings)return-1;void 0===t&&(t=null);for(var i,n=this._bindings.length;n--;)if((i=this._bindings[n])._listener===e&&i.context===t)return n;return-1},has:function(e,t){return-1!==this._indexOfListener(e,t)},add:function(e,t,i){this.validateListener(e,"add");var n=[];if(3<arguments.length)for(var r=3;r<arguments.length;r++)n.push(arguments[r]);return this._registerListener(e,!1,t,i,n)},addOnce:function(e,t,i){this.validateListener(e,"addOnce");var n=[];if(3<arguments.length)for(var r=3;r<arguments.length;r++)n.push(arguments[r]);return this._registerListener(e,!0,t,i,n)},remove:function(e,t){this.validateListener(e,"remove");var i=this._indexOfListener(e,t);return-1!==i&&(this._bindings[i]._destroy(),this._bindings.splice(i,1)),e},removeAll:function(e){if(void 0===e&&(e=null),this._bindings){for(var t=this._bindings.length;t--;)e?this._bindings[t].context===e&&(this._bindings[t]._destroy(),this._bindings.splice(t,1)):this._bindings[t]._destroy();e||(this._bindings.length=0)}},getNumListeners:function(){return this._bindings?this._bindings.length:0},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active&&this._bindings){var e,t=Array.prototype.slice.call(arguments),i=this._bindings.length;if(this.memorize&&(this._prevParams=t),i)for(e=this._bindings.slice(),this._shouldPropagate=!0;e[--i]&&this._shouldPropagate&&!1!==e[i].execute(t););}},forget:function(){this._prevParams&&(this._prevParams=null)},dispose:function(){this.removeAll(),this._bindings=null,this._prevParams&&(this._prevParams=null)},toString:function(){return"[Phaser.Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}},Object.defineProperty(U.Signal.prototype,"boundDispatch",{get:function(){var e=this;return this._boundDispatch||(this._boundDispatch=function(){return e.dispatch.apply(e,arguments)})}}),U.Signal.prototype.constructor=U.Signal,U.SignalBinding=function(e,t,i,n,r,o){this._listener=t,i&&(this._isOnce=!0),null!=n&&(this.context=n),this._signal=e,r&&(this._priority=r),o&&o.length&&(this._args=o)},U.SignalBinding.prototype={context:null,_isOnce:!1,_priority:0,_args:null,callCount:0,active:!0,params:null,execute:function(e){var t,i;return this.active&&this._listener&&(i=this.params?this.params.concat(e):e,this._args&&(i=i.concat(this._args)),t=this._listener.apply(this.context,i),this.callCount++,this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[Phaser.SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},U.SignalBinding.prototype.constructor=U.SignalBinding,U.Filter=function(e,t,i){this.game=e,this.type=U.WEBGL_FILTER,this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.prevPoint=new U.Point;var n=new Date;if(this.uniforms={resolution:{type:"2f",value:{x:256,y:256}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:0,y:0}},date:{type:"4fv",value:[n.getFullYear(),n.getMonth(),n.getDate(),60*n.getHours()*60+60*n.getMinutes()+n.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}},t)for(var r in t)this.uniforms[r]=t[r];this.fragmentSrc=i||""},U.Filter.prototype={init:function(){},setResolution:function(e,t){this.uniforms.resolution.value.x=e,this.uniforms.resolution.value.y=t},update:function(e){if(void 0!==e){var t=e.x/this.game.width,i=1-e.y/this.game.height;t===this.prevPoint.x&&i===this.prevPoint.y||(this.uniforms.mouse.value.x=t.toFixed(2),this.uniforms.mouse.value.y=i.toFixed(2),this.prevPoint.set(t,i))}this.uniforms.time.value=this.game.time.totalElapsedSeconds()},addToWorld:function(e,t,i,n,r,o){void 0===r&&(r=0),void 0===o&&(o=0),null!=i?this.width=i:i=this.width,null!=n?this.height=n:n=this.height;var a=this.game.add.image(e,t,"__default");return a.width=i,a.height=n,a.anchor.set(r,o),a.filters=[this],a},destroy:function(){this.game=null}},U.Filter.prototype.constructor=U.Filter,Object.defineProperty(U.Filter.prototype,"width",{get:function(){return this.uniforms.resolution.value.x},set:function(e){this.uniforms.resolution.value.x=e}}),Object.defineProperty(U.Filter.prototype,"height",{get:function(){return this.uniforms.resolution.value.y},set:function(e){this.uniforms.resolution.value.y=e}}),U.Plugin=function(e,t){void 0===t&&(t=null),this.game=e,this.parent=t,this.active=!1,this.visible=!1,this.hasPreUpdate=!1,this.hasUpdate=!1,this.hasPostUpdate=!1,this.hasRender=!1,this.hasPostRender=!1},U.Plugin.prototype={preUpdate:function(){},update:function(){},render:function(){},postRender:function(){},destroy:function(){this.game=null,this.parent=null,this.active=!1,this.visible=!1}},U.Plugin.prototype.constructor=U.Plugin,U.PluginManager=function(e){this.game=e,this.plugins=[],this._len=0,this._i=0},U.PluginManager.prototype={add:function(e){var t=Array.prototype.slice.call(arguments,1),i=!1;return"function"==typeof e?e=new e(this.game,this):(e.game=this.game,e.parent=this),"function"==typeof e.preUpdate&&(i=e.hasPreUpdate=!0),"function"==typeof e.update&&(i=e.hasUpdate=!0),"function"==typeof e.postUpdate&&(i=e.hasPostUpdate=!0),"function"==typeof e.render&&(i=e.hasRender=!0),"function"==typeof e.postRender&&(i=e.hasPostRender=!0),i?((e.hasPreUpdate||e.hasUpdate||e.hasPostUpdate)&&(e.active=!0),(e.hasRender||e.hasPostRender)&&(e.visible=!0),this._len=this.plugins.push(e),"function"==typeof e.init&&e.init.apply(e,t),e):null},remove:function(e,t){for(void 0===t&&(t=!0),this._i=this._len;this._i--;)if(this.plugins[this._i]===e)return t&&e.destroy(),this.plugins.splice(this._i,1),void this._len--},removeAll:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].destroy();this.plugins.length=0,this._len=0},preUpdate:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].active&&this.plugins[this._i].hasPreUpdate&&this.plugins[this._i].preUpdate()},update:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].active&&this.plugins[this._i].hasUpdate&&this.plugins[this._i].update()},postUpdate:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].active&&this.plugins[this._i].hasPostUpdate&&this.plugins[this._i].postUpdate()},render:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].visible&&this.plugins[this._i].hasRender&&this.plugins[this._i].render()},postRender:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].visible&&this.plugins[this._i].hasPostRender&&this.plugins[this._i].postRender()},destroy:function(){this.removeAll(),this.game=null}},U.PluginManager.prototype.constructor=U.PluginManager,U.Stage=function(e){this.game=e,PIXI.DisplayObjectContainer.call(this),this.name="_stage_root",this.disableVisibilityChange=!1,this.exists=!0,this.worldTransform=new PIXI.Matrix,(this.stage=this).currentRenderOrderID=0,this._hiddenVar="hidden",this._onChange=null,this._bgColor={r:0,g:0,b:0,a:0,color:0,rgba:"#000000"},this.game.transparent||(this._bgColor.a=1),e.config&&this.parseConfig(e.config)},U.Stage.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),U.Stage.prototype.constructor=U.Stage,U.Stage.prototype.parseConfig=function(e){e.disableVisibilityChange&&(this.disableVisibilityChange=e.disableVisibilityChange),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor)},U.Stage.prototype.boot=function(){U.DOM.getOffset(this.game.canvas,this.offset),U.Canvas.setUserSelect(this.game.canvas,"none"),U.Canvas.setTouchAction(this.game.canvas,"none"),this.checkVisibility()},U.Stage.prototype.preUpdate=function(){for(var e=this.currentRenderOrderID=0;e<this.children.length;e++)this.children[e].preUpdate()},U.Stage.prototype.update=function(){for(var e=this.children.length;e--;)this.children[e].update()},U.Stage.prototype.postUpdate=function(){this.game.camera.update(),this.game.camera.target&&(this.game.camera.target.postUpdate(),this.updateTransform(),this.game.camera.updateTarget());for(var e=0;e<this.children.length;e++)this.children[e].postUpdate();this.updateTransform()},U.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var e=0;e<this.children.length;e++)this.children[e].updateTransform()},U.Stage.prototype.checkVisibility=function(){void 0!==document.hidden?this._hiddenVar="visibilitychange":void 0!==document.webkitHidden?this._hiddenVar="webkitvisibilitychange":void 0!==document.mozHidden?this._hiddenVar="mozvisibilitychange":void 0!==document.msHidden?this._hiddenVar="msvisibilitychange":this._hiddenVar=null;var t=this;this._onChange=function(e){return t.visibilityChange(e)},this._hiddenVar&&document.addEventListener(this._hiddenVar,this._onChange,!1),window.onblur=this._onChange,window.onfocus=this._onChange,window.onpagehide=this._onChange,window.onpageshow=this._onChange,this.game.device.cocoonJSApp&&(CocoonJS.App.onSuspended.addEventListener(function(){U.Stage.prototype.visibilityChange.call(t,{type:"pause"})}),CocoonJS.App.onActivated.addEventListener(function(){U.Stage.prototype.visibilityChange.call(t,{type:"resume"})}))},U.Stage.prototype.visibilityChange=function(e){"pagehide"!==e.type&&"blur"!==e.type&&"pageshow"!==e.type&&"focus"!==e.type?this.disableVisibilityChange||(document.hidden||document.mozHidden||document.msHidden||document.webkitHidden||"pause"===e.type?this.game.gamePaused(e):this.game.gameResumed(e)):"pagehide"===e.type||"blur"===e.type?this.game.focusLoss(e):"pageshow"!==e.type&&"focus"!==e.type||this.game.focusGain(e)},U.Stage.prototype.setBackgroundColor=function(e){this.game.transparent||(U.Color.valueToColor(e,this._bgColor),U.Color.updateColor(this._bgColor),this._bgColor.r/=255,this._bgColor.g/=255,this._bgColor.b/=255,this._bgColor.a=1)},U.Stage.prototype.destroy=function(){this._hiddenVar&&document.removeEventListener(this._hiddenVar,this._onChange,!1),window.onpagehide=null,window.onpageshow=null,window.onblur=null,window.onfocus=null},Object.defineProperty(U.Stage.prototype,"backgroundColor",{get:function(){return this._bgColor.color},set:function(e){this.setBackgroundColor(e)}}),Object.defineProperty(U.Stage.prototype,"smoothed",{get:function(){return PIXI.scaleModes.DEFAULT===PIXI.scaleModes.LINEAR},set:function(e){PIXI.scaleModes.DEFAULT=e?PIXI.scaleModes.LINEAR:PIXI.scaleModes.NEAREST}}),U.Group=function(e,t,i,n,r,o){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o=U.Physics.ARCADE),this.game=e,void 0===t&&(t=e.world),this.name=i||"group",this.z=0,PIXI.DisplayObjectContainer.call(this),n?(this.game.stage.addChild(this),this.z=this.game.stage.children.length):t&&(t.addChild(this),this.z=t.children.length),this.type=U.GROUP,this.physicsType=U.GROUP,this.alive=!0,this.exists=!0,this.ignoreDestroy=!1,this.pendingDestroy=!1,this.classType=U.Sprite,this.cursor=null,this.inputEnableChildren=!1,this.onChildInputDown=new U.Signal,this.onChildInputUp=new U.Signal,this.onChildInputOver=new U.Signal,this.onChildInputOut=new U.Signal,this.enableBody=r,this.enableBodyDebug=!1,this.physicsBodyType=o,this.physicsSortDirection=null,this.onDestroy=new U.Signal,this.cursorIndex=0,this.fixedToCamera=!1,this.cameraOffset=new U.Point,this.hash=[],this._sortProperty="z"},U.Group.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),U.Group.prototype.constructor=U.Group,U.Group.RETURN_NONE=0,U.Group.RETURN_TOTAL=1,U.Group.RETURN_CHILD=2,U.Group.RETURN_ALL=3,U.Group.SORT_ASCENDING=-1,U.Group.SORT_DESCENDING=1,U.Group.prototype.add=function(e,t,i){return void 0===t&&(t=!1),e.parent===this||(e.body&&e.parent&&e.parent.hash&&e.parent.removeFromHash(e),void 0===i?(e.z=this.children.length,this.addChild(e)):(this.addChildAt(e,i),this.updateZ()),this.enableBody&&e.hasOwnProperty("body")&&null===e.body?this.game.physics.enable(e,this.physicsBodyType):e.body&&this.addToHash(e),!this.inputEnableChildren||e.input&&!e.inputEnabled||(e.inputEnabled=!0),!t&&e.events&&e.events.onAddedToGroup$dispatch(e,this),null===this.cursor&&(this.cursor=e)),e},U.Group.prototype.addAt=function(e,t,i){this.add(e,i,t)},U.Group.prototype.addToHash=function(e){if(e.parent===this&&-1===this.hash.indexOf(e))return this.hash.push(e),!0;return!1},U.Group.prototype.removeFromHash=function(e){if(e){var t=this.hash.indexOf(e);if(-1!==t)return this.hash.splice(t,1),!0}return!1},U.Group.prototype.addMultiple=function(e,t){if(e instanceof U.Group)e.moveAll(this,t);else if(Array.isArray(e))for(var i=0;i<e.length;i++)this.add(e[i],t);return e},U.Group.prototype.getAt=function(e){return e<0||e>=this.children.length?-1:this.getChildAt(e)},U.Group.prototype.create=function(e,t,i,n,r,o){void 0===r&&(r=!0);var a=new this.classType(this.game,e,t,i,n);return a.exists=r,a.visible=r,a.alive=r,this.add(a,!1,o)},U.Group.prototype.createMultiple=function(n,e,t,r){void 0===t&&(t=0),void 0===r&&(r=!1),Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]);var o=this,a=[];return e.forEach(function(i){t.forEach(function(e){for(var t=0;t<n;t++)a.push(o.create(0,0,i,e,r))})}),a},U.Group.prototype.updateZ=function(){for(var e=this.children.length;e--;)this.children[e].z=e},U.Group.prototype.align=function(e,t,i,n,r,o){if(void 0===r&&(r=U.TOP_LEFT),void 0===o&&(o=0),0===this.children.length||o>this.children.length||-1===e&&-1===t)return!1;for(var a=new U.Rectangle(0,0,i,n),s=e*i,p=t*n,l=o;l<this.children.length;l++){var h=this.children[l];if(h.alignIn)if(h.alignIn(a,r),-1===e)a.y+=n,a.y===p&&(a.x+=i,a.y=0);else if(-1===t)a.x+=i,a.x===s&&(a.x=0,a.y+=n);else if(a.x+=i,a.x===s&&(a.x=0,a.y+=n,a.y===p))return!0}return!0},U.Group.prototype.resetCursor=function(e){if(void 0===e&&(e=0),e>this.children.length-1&&(e=0),this.cursor)return this.cursorIndex=e,this.cursor=this.children[this.cursorIndex],this.cursor},U.Group.prototype.next=function(){if(this.cursor)return this.cursorIndex>=this.children.length-1?this.cursorIndex=0:this.cursorIndex++,this.cursor=this.children[this.cursorIndex],this.cursor},U.Group.prototype.previous=function(){if(this.cursor)return 0===this.cursorIndex?this.cursorIndex=this.children.length-1:this.cursorIndex--,this.cursor=this.children[this.cursorIndex],this.cursor},U.Group.prototype.swap=function(e,t){this.swapChildren(e,t),this.updateZ()},U.Group.prototype.bringToTop=function(e){return e.parent===this&&this.getIndex(e)<this.children.length&&(this.remove(e,!1,!0),this.add(e,!0)),e},U.Group.prototype.sendToBack=function(e){return e.parent===this&&0<this.getIndex(e)&&(this.remove(e,!1,!0),this.addAt(e,0,!0)),e},U.Group.prototype.moveUp=function(e){if(e.parent===this&&this.getIndex(e)<this.children.length-1){var t=this.getIndex(e),i=this.getAt(t+1);i&&this.swap(e,i)}return e},U.Group.prototype.moveDown=function(e){if(e.parent===this&&0<this.getIndex(e)){var t=this.getIndex(e),i=this.getAt(t-1);i&&this.swap(e,i)}return e},U.Group.prototype.xy=function(e,t,i){if(e<0||e>this.children.length)return-1;this.getChildAt(e).x=t,this.getChildAt(e).y=i},U.Group.prototype.reverse=function(){this.children.reverse(),this.updateZ()},U.Group.prototype.getIndex=function(e){return this.children.indexOf(e)},U.Group.prototype.getByName=function(e){for(var t=0;t<this.children.length;t++)if(this.children[t].name===e)return this.children[t];return null},U.Group.prototype.replace=function(e,t){var i=this.getIndex(e);if(-1!==i)return t.parent&&(t.parent instanceof U.Group?t.parent.remove(t):t.parent.removeChild(t)),this.remove(e),this.addAt(t,i),e},U.Group.prototype.hasProperty=function(e,t){var i=t.length;return 1===i&&t[0]in e||(2===i&&t[0]in e&&t[1]in e[t[0]]||(3===i&&t[0]in e&&t[1]in e[t[0]]&&t[2]in e[t[0]][t[1]]||4===i&&t[0]in e&&t[1]in e[t[0]]&&t[2]in e[t[0]][t[1]]&&t[3]in e[t[0]][t[1]][t[2]]))},U.Group.prototype.setProperty=function(e,t,i,n,r){if(void 0===r&&(r=!1),n=n||0,!this.hasProperty(e,t)&&(!r||0<n))return!1;var o=t.length;return 1===o?0===n?e[t[0]]=i:1===n?e[t[0]]+=i:2===n?e[t[0]]-=i:3===n?e[t[0]]*=i:4===n&&(e[t[0]]/=i):2===o?0===n?e[t[0]][t[1]]=i:1===n?e[t[0]][t[1]]+=i:2===n?e[t[0]][t[1]]-=i:3===n?e[t[0]][t[1]]*=i:4===n&&(e[t[0]][t[1]]/=i):3===o?0===n?e[t[0]][t[1]][t[2]]=i:1===n?e[t[0]][t[1]][t[2]]+=i:2===n?e[t[0]][t[1]][t[2]]-=i:3===n?e[t[0]][t[1]][t[2]]*=i:4===n&&(e[t[0]][t[1]][t[2]]/=i):4===o&&(0===n?e[t[0]][t[1]][t[2]][t[3]]=i:1===n?e[t[0]][t[1]][t[2]][t[3]]+=i:2===n?e[t[0]][t[1]][t[2]][t[3]]-=i:3===n?e[t[0]][t[1]][t[2]][t[3]]*=i:4===n&&(e[t[0]][t[1]][t[2]][t[3]]/=i)),!0},U.Group.prototype.checkProperty=function(e,t,i,n){return void 0===n&&(n=!1),!(!U.Utils.getProperty(e,t)&&n)&&U.Utils.getProperty(e,t)===i},U.Group.prototype.set=function(e,t,i,n,r,o,a){if(void 0===a&&(a=!1),t=t.split("."),void 0===n&&(n=!1),void 0===r&&(r=!1),(!1===n||n&&e.alive)&&(!1===r||r&&e.visible))return this.setProperty(e,t,i,o,a)},U.Group.prototype.setAll=function(e,t,i,n,r,o){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===o&&(o=!1),e=e.split("."),r=r||0;for(var a=0;a<this.children.length;a++)(!i||i&&this.children[a].alive)&&(!n||n&&this.children[a].visible)&&this.setProperty(this.children[a],e,t,r,o)},U.Group.prototype.setAllChildren=function(e,t,i,n,r,o){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===o&&(o=!1),r=r||0;for(var a=0;a<this.children.length;a++)(!i||i&&this.children[a].alive)&&(!n||n&&this.children[a].visible)&&(this.children[a]instanceof U.Group?this.children[a].setAllChildren(e,t,i,n,r,o):this.setProperty(this.children[a],e.split("."),t,r,o))},U.Group.prototype.checkAll=function(e,t,i,n,r){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=!1);for(var o=0;o<this.children.length;o++)if((!i||i&&this.children[o].alive)&&(!n||n&&this.children[o].visible)&&!this.checkProperty(this.children[o],e,t,r))return!1;return!0},U.Group.prototype.addAll=function(e,t,i,n){this.setAll(e,t,i,n,1)},U.Group.prototype.subAll=function(e,t,i,n){this.setAll(e,t,i,n,2)},U.Group.prototype.multiplyAll=function(e,t,i,n){this.setAll(e,t,i,n,3)},U.Group.prototype.divideAll=function(e,t,i,n){this.setAll(e,t,i,n,4)},U.Group.prototype.callAllExists=function(e,t){var i;if(2<arguments.length){i=[];for(var n=2;n<arguments.length;n++)i.push(arguments[n])}for(n=0;n<this.children.length;n++)this.children[n].exists===t&&this.children[n][e]&&this.children[n][e].apply(this.children[n],i)},U.Group.prototype.callbackFromArray=function(e,t,i){if(1===i){if(e[t[0]])return e[t[0]]}else if(2===i){if(e[t[0]][t[1]])return e[t[0]][t[1]]}else if(3===i){if(e[t[0]][t[1]][t[2]])return e[t[0]][t[1]][t[2]]}else if(4===i){if(e[t[0]][t[1]][t[2]][t[3]])return e[t[0]][t[1]][t[2]][t[3]]}else if(e[t])return e[t];return!1},U.Group.prototype.callAll=function(e,t){if(void 0!==e){var i,n=(e=e.split(".")).length;if(null==t||""===t)t=null;else if("string"==typeof t)var r=(t=t.split(".")).length;if(2<arguments.length){i=[];for(var o=2;o<arguments.length;o++)i.push(arguments[o])}var a=null,s=null;for(o=0;o<this.children.length;o++)a=this.callbackFromArray(this.children[o],e,n),t&&a?(s=this.callbackFromArray(this.children[o],t,r),a&&a.apply(s,i)):a&&a.apply(this.children[o],i)}},U.Group.prototype.preUpdate=function(){if(this.pendingDestroy)return this.destroy(),!1;if(!this.exists||!this.parent.exists)return!(this.renderOrderID=-1);for(var e=0;e<this.children.length;e++)this.children[e].preUpdate();return!0},U.Group.prototype.update=function(){for(var e=this.children.length;e--;)this.children[e].update()},U.Group.prototype.postUpdate=function(){this.fixedToCamera&&(this.x=this.game.camera.view.x+this.cameraOffset.x,this.y=this.game.camera.view.y+this.cameraOffset.y);for(var e=0;e<this.children.length;e++)this.children[e].postUpdate()},U.Group.prototype.filter=function(e,t){for(var i=-1,n=this.children.length,r=[];++i<n;){var o=this.children[i];(!t||t&&o.exists)&&e(o,i,this.children)&&r.push(o)}return new U.ArraySet(r)},U.Group.prototype.forEach=function(e,t,i){if(void 0===i&&(i=!1),arguments.length<=3)for(var n=0;n<this.children.length;n++)(!i||i&&this.children[n].exists)&&e.call(t,this.children[n]);else{var r=[null];for(n=3;n<arguments.length;n++)r.push(arguments[n]);for(n=0;n<this.children.length;n++)(!i||i&&this.children[n].exists)&&(r[0]=this.children[n],e.apply(t,r))}},U.Group.prototype.forEachExists=function(e,t){var i;if(2<arguments.length){i=[null];for(var n=2;n<arguments.length;n++)i.push(arguments[n])}this.iterate("exists",!0,U.Group.RETURN_TOTAL,e,t,i)},U.Group.prototype.forEachAlive=function(e,t){var i;if(2<arguments.length){i=[null];for(var n=2;n<arguments.length;n++)i.push(arguments[n])}this.iterate("alive",!0,U.Group.RETURN_TOTAL,e,t,i)},U.Group.prototype.forEachDead=function(e,t){var i;if(2<arguments.length){i=[null];for(var n=2;n<arguments.length;n++)i.push(arguments[n])}this.iterate("alive",!1,U.Group.RETURN_TOTAL,e,t,i)},U.Group.prototype.sort=function(e,t){this.children.length<2||(void 0===e&&(e="z"),void 0===t&&(t=U.Group.SORT_ASCENDING),this._sortProperty=e,t===U.Group.SORT_ASCENDING?this.children.sort(this.ascendingSortHandler.bind(this)):this.children.sort(this.descendingSortHandler.bind(this)),this.updateZ())},U.Group.prototype.customSort=function(e,t){this.children.length<2||(this.children.sort(e.bind(t)),this.updateZ())},U.Group.prototype.ascendingSortHandler=function(e,t){return e[this._sortProperty]<t[this._sortProperty]?-1:e[this._sortProperty]>t[this._sortProperty]?1:e.z<t.z?-1:1},U.Group.prototype.descendingSortHandler=function(e,t){return e[this._sortProperty]<t[this._sortProperty]?1:e[this._sortProperty]>t[this._sortProperty]?-1:0},U.Group.prototype.iterate=function(e,t,i,n,r,o){if(0===this.children.length){if(i===U.Group.RETURN_TOTAL)return 0;if(i===U.Group.RETURN_ALL)return[]}var a=0;if(i===U.Group.RETURN_ALL)var s=[];for(var p=0;p<this.children.length;p++)if(this.children[p][e]===t){if(a++,n&&(o?(o[0]=this.children[p],n.apply(r,o)):n.call(r,this.children[p])),i===U.Group.RETURN_CHILD)return this.children[p];i===U.Group.RETURN_ALL&&s.push(this.children[p])}return i===U.Group.RETURN_TOTAL?a:i===U.Group.RETURN_ALL?s:null},U.Group.prototype.getFirstExists=function(e,t,i,n,r,o){void 0===t&&(t=!1),"boolean"!=typeof e&&(e=!0);var a=this.iterate("exists",e,U.Group.RETURN_CHILD);return null===a&&t?this.create(i,n,r,o):this.resetChild(a,i,n,r,o)},U.Group.prototype.getFirstAlive=function(e,t,i,n,r){void 0===e&&(e=!1);var o=this.iterate("alive",!0,U.Group.RETURN_CHILD);return null===o&&e?this.create(t,i,n,r):this.resetChild(o,t,i,n,r)},U.Group.prototype.getFirstDead=function(e,t,i,n,r){void 0===e&&(e=!1);var o=this.iterate("alive",!1,U.Group.RETURN_CHILD);return null===o&&e?this.create(t,i,n,r):this.resetChild(o,t,i,n,r)},U.Group.prototype.resetChild=function(e,t,i,n,r){return null===e?null:(void 0===t&&(t=null),void 0===i&&(i=null),null!==t&&null!==i&&e.reset(t,i),void 0!==n&&e.loadTexture(n,r),e)},U.Group.prototype.getTop=function(){if(0<this.children.length)return this.children[this.children.length-1]},U.Group.prototype.getBottom=function(){if(0<this.children.length)return this.children[0]},U.Group.prototype.getClosestTo=function(e,t,i){for(var n=Number.MAX_VALUE,r=0,o=null,a=0;a<this.children.length;a++){var s=this.children[a];s.exists&&(r=Math.abs(U.Point.distance(e,s)))<n&&(!t||t.call(i,s,r))&&(n=r,o=s)}return o},U.Group.prototype.getFurthestFrom=function(e,t,i){for(var n=0,r=0,o=null,a=0;a<this.children.length;a++){var s=this.children[a];s.exists&&n<(r=Math.abs(U.Point.distance(e,s)))&&(!t||t.call(i,s,r))&&(n=r,o=s)}return o},U.Group.prototype.countLiving=function(){return this.iterate("alive",!0,U.Group.RETURN_TOTAL)},U.Group.prototype.countDead=function(){return this.iterate("alive",!1,U.Group.RETURN_TOTAL)},U.Group.prototype.getRandom=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.children.length),0===t?null:U.ArrayUtils.getRandomItem(this.children,e,t)},U.Group.prototype.getRandomExists=function(e,t){var i=this.getAll("exists",!0,e,t);return this.game.rnd.pick(i)},U.Group.prototype.getAll=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=this.children.length);for(var r=[],o=i;o<n;o++){var a=this.children[o];e&&a[e]===t&&r.push(a)}return r},U.Group.prototype.remove=function(e,t,i){if(void 0===t&&(t=!1),void 0===i&&(i=!1),0===this.children.length||-1===this.children.indexOf(e))return!1;i||!e.events||e.destroyPhase||e.events.onRemovedFromGroup$dispatch(e,this);var n=this.removeChild(e);return this.removeFromHash(e),this.updateZ(),this.cursor===e&&this.next(),t&&n&&n.destroy(!0),!0},U.Group.prototype.moveAll=function(e,t){if(void 0===t&&(t=!1),0<this.children.length&&e instanceof U.Group){for(;e.add(this.children[0],t),0<this.children.length;);this.hash=[],this.cursor=null}return e},U.Group.prototype.removeAll=function(e,t,i){if(void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===i&&(i=!1),0!==this.children.length){do{!t&&this.children[0].events&&this.children[0].events.onRemovedFromGroup$dispatch(this.children[0],this);var n=this.removeChild(this.children[0]);this.removeFromHash(n),e&&n&&n.destroy(!0,i)}while(0<this.children.length);this.hash=[],this.cursor=null}},U.Group.prototype.removeBetween=function(e,t,i,n){if(void 0===t&&(t=this.children.length-1),void 0===i&&(i=!1),void 0===n&&(n=!1),0!==this.children.length){if(t<e||e<0||t>this.children.length)return!1;for(var r=t;e<=r;){!n&&this.children[r].events&&this.children[r].events.onRemovedFromGroup$dispatch(this.children[r],this);var o=this.removeChild(this.children[r]);this.removeFromHash(o),i&&o&&o.destroy(!0),this.cursor===this.children[r]&&(this.cursor=null),r--}this.updateZ()}},U.Group.prototype.destroy=function(e,t){null===this.game||this.ignoreDestroy||(void 0===e&&(e=!0),void 0===t&&(t=!1),this.onDestroy.dispatch(this,e,t),this.removeAll(e),this.cursor=null,this.filters=null,this.pendingDestroy=!1,t||(this.parent&&this.parent.removeChild(this),this.game=null,this.exists=!1))},Object.defineProperty(U.Group.prototype,"total",{get:function(){return this.iterate("exists",!0,U.Group.RETURN_TOTAL)}}),Object.defineProperty(U.Group.prototype,"length",{get:function(){return this.children.length}}),Object.defineProperty(U.Group.prototype,"angle",{get:function(){return U.Math.radToDeg(this.rotation)},set:function(e){this.rotation=U.Math.degToRad(e)}}),Object.defineProperty(U.Group.prototype,"centerX",{get:function(){return this.getBounds(this.parent).centerX},set:function(e){var t=this.getBounds(this.parent),i=this.x-t.x;this.x=e+i-t.halfWidth}}),Object.defineProperty(U.Group.prototype,"centerY",{get:function(){return this.getBounds(this.parent).centerY},set:function(e){var t=this.getBounds(this.parent),i=this.y-t.y;this.y=e+i-t.halfHeight}}),Object.defineProperty(U.Group.prototype,"left",{get:function(){return this.getBounds(this.parent).left},set:function(e){var t=this.getBounds(this.parent),i=this.x-t.x;this.x=e+i}}),Object.defineProperty(U.Group.prototype,"right",{get:function(){return this.getBounds(this.parent).right},set:function(e){var t=this.getBounds(this.parent),i=this.x-t.x;this.x=e+i-t.width}}),Object.defineProperty(U.Group.prototype,"top",{get:function(){return this.getBounds(this.parent).top},set:function(e){var t=this.getBounds(this.parent),i=this.y-t.y;this.y=e+i}}),Object.defineProperty(U.Group.prototype,"bottom",{get:function(){return this.getBounds(this.parent).bottom},set:function(e){var t=this.getBounds(this.parent),i=this.y-t.y;this.y=e+i-t.height}}),U.World=function(e){U.Group.call(this,e,null,"__world",!1),this.bounds=new U.Rectangle(0,0,e.width,e.height),this.camera=null,this._definedSize=!1,this._width=e.width,this._height=e.height,this.game.state.onStateChange.add(this.stateChange,this)},U.World.prototype=Object.create(U.Group.prototype),U.World.prototype.constructor=U.World,U.World.prototype.boot=function(){this.camera=new U.Camera(this.game,0,0,0,this.game.width,this.game.height),this.game.stage.addChild(this),this.camera.boot()},U.World.prototype.stateChange=function(){this.x=0,this.y=0,this.camera.reset()},U.World.prototype.setBounds=function(e,t,i,n){this._definedSize=!0,this._width=i,this._height=n,this.bounds.setTo(e,t,i,n),this.x=e,this.y=t,this.camera.bounds&&this.camera.bounds.setTo(e,t,Math.max(i,this.game.width),Math.max(n,this.game.height)),this.game.physics.setBoundsToWorld()},U.World.prototype.resize=function(e,t){this._definedSize&&(e<this._width&&(e=this._width),t<this._height&&(t=this._height)),this.bounds.width=e,this.bounds.height=t,this.game.camera.setBoundsToWorld(),this.game.physics.setBoundsToWorld()},U.World.prototype.shutdown=function(){this.destroy(!0,!0)},U.World.prototype.wrap=function(e,t,i,n,r){void 0===t&&(t=0),void 0===i&&(i=!1),void 0===n&&(n=!0),void 0===r&&(r=!0),i?(e.getBounds(),n&&(e.x+e._currentBounds.width<this.bounds.x?e.x=this.bounds.right:e.x>this.bounds.right&&(e.x=this.bounds.left)),r&&(e.y+e._currentBounds.height<this.bounds.top?e.y=this.bounds.bottom:e.y>this.bounds.bottom&&(e.y=this.bounds.top))):(n&&e.x+t<this.bounds.x?e.x=this.bounds.right+t:n&&e.x-t>this.bounds.right&&(e.x=this.bounds.left-t),r&&e.y+t<this.bounds.top?e.y=this.bounds.bottom+t:r&&e.y-t>this.bounds.bottom&&(e.y=this.bounds.top-t))},Object.defineProperty(U.World.prototype,"width",{get:function(){return this.bounds.width},set:function(e){e<this.game.width&&(e=this.game.width),this.bounds.width=e,this._width=e,this._definedSize=!0}}),Object.defineProperty(U.World.prototype,"height",{get:function(){return this.bounds.height},set:function(e){e<this.game.height&&(e=this.game.height),this.bounds.height=e,this._height=e,this._definedSize=!0}}),Object.defineProperty(U.World.prototype,"centerX",{get:function(){return this.bounds.halfWidth+this.bounds.x}}),Object.defineProperty(U.World.prototype,"centerY",{get:function(){return this.bounds.halfHeight+this.bounds.y}}),Object.defineProperty(U.World.prototype,"randomX",{get:function(){return this.bounds.x<0?this.game.rnd.between(this.bounds.x,this.bounds.width-Math.abs(this.bounds.x)):this.game.rnd.between(this.bounds.x,this.bounds.width)}}),Object.defineProperty(U.World.prototype,"randomY",{get:function(){return this.bounds.y<0?this.game.rnd.between(this.bounds.y,this.bounds.height-Math.abs(this.bounds.y)):this.game.rnd.between(this.bounds.y,this.bounds.height)}}),U.Game=function(e,t,i,n,r,o,a,s){return this.id=U.GAMES.push(this)-1,this.config=null,this.physicsConfig=s,this.parent="",this.width=800,this.height=600,this.resolution=1,this._width=800,this._height=600,this.transparent=!1,this.antialias=!0,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!0,this.renderer=null,this.renderType=U.AUTO,this.state=null,this.isBooted=!1,this.isRunning=!1,this.raf=null,this.add=null,this.make=null,this.cache=null,this.input=null,this.load=null,this.math=null,this.net=null,this.scale=null,this.sound=null,this.stage=null,this.time=null,this.tweens=null,this.world=null,this.physics=null,this.plugins=null,this.rnd=null,this.device=U.Device,this.camera=null,this.canvas=null,this.context=null,this.debug=null,this.particles=null,this.create=null,this.lockRender=!1,this.stepping=!1,this.pendingStep=!1,this.stepCount=0,this.onPause=null,this.onResume=null,this.onBlur=null,this.onFocus=null,this._paused=!1,this._codePaused=!1,this.currentUpdateID=0,this.updatesThisFrame=1,this._deltaTime=0,this._lastCount=0,this._spiraling=0,this._kickstart=!0,this.fpsProblemNotifier=new U.Signal,this.forceSingleUpdate=!0,this._nextFpsNotification=0,1===arguments.length&&"object"==typeof e?this.parseConfig(e):(this.config={enableDebug:!0},void 0!==e&&(this._width=e),void 0!==t&&(this._height=t),void 0!==i&&(this.renderType=i),void 0!==n&&(this.parent=n),void 0!==o&&(this.transparent=o),void 0!==a&&(this.antialias=a),this.rnd=new U.RandomDataGenerator([(Date.now()*Math.random()).toString()]),this.state=new U.StateManager(this,r)),this.device.whenReady(this.boot,this),this},U.Game.prototype={parseConfig:function(e){void 0===(this.config=e).enableDebug&&(this.config.enableDebug=!0),e.width&&(this._width=e.width),e.height&&(this._height=e.height),e.renderer&&(this.renderType=e.renderer),e.parent&&(this.parent=e.parent),void 0!==e.transparent&&(this.transparent=e.transparent),void 0!==e.antialias&&(this.antialias=e.antialias),e.resolution&&(this.resolution=e.resolution),void 0!==e.preserveDrawingBuffer&&(this.preserveDrawingBuffer=e.preserveDrawingBuffer),e.physicsConfig&&(this.physicsConfig=e.physicsConfig);var t=[(Date.now()*Math.random()).toString()];e.seed&&(t=e.seed),this.rnd=new U.RandomDataGenerator(t);var i=null;e.state&&(i=e.state),this.state=new U.StateManager(this,i)},boot:function(){this.isBooted||(this.onPause=new U.Signal,this.onResume=new U.Signal,this.onBlur=new U.Signal,this.onFocus=new U.Signal,this.isBooted=!0,(PIXI.game=this).math=U.Math,this.scale=new U.ScaleManager(this,this._width,this._height),this.stage=new U.Stage(this),this.setUpRenderer(),this.world=new U.World(this),this.add=new U.GameObjectFactory(this),this.make=new U.GameObjectCreator(this),this.cache=new U.Cache(this),this.load=new U.Loader(this),this.time=new U.Time(this),this.tweens=new U.TweenManager(this),this.input=new U.Input(this),this.sound=new U.SoundManager(this),this.physics=new U.Physics(this,this.physicsConfig),this.particles=new U.Particles(this),this.create=new U.Create(this),this.plugins=new U.PluginManager(this),this.net=new U.Net(this),this.time.boot(),this.stage.boot(),this.world.boot(),this.scale.boot(),this.input.boot(),this.sound.boot(),this.state.boot(),this.config.enableDebug?(this.debug=new U.Utils.Debug(this),this.debug.boot()):this.debug={preUpdate:function(){},update:function(){},reset:function(){}},this.showDebugHeader(),this.isRunning=!0,this.config&&this.config.forceSetTimeOut?this.raf=new U.RequestAnimationFrame(this,this.config.forceSetTimeOut):this.raf=new U.RequestAnimationFrame(this,!1),this._kickstart=!0,window.focus&&(!window.PhaserGlobal||window.PhaserGlobal&&!window.PhaserGlobal.stopFocus)&&window.focus(),this.raf.start())},showDebugHeader:function(){if(!window.PhaserGlobal||!window.PhaserGlobal.hideBanner){var e=U.VERSION,t="Canvas",i="HTML Audio",n=1;if(this.renderType===U.WEBGL?(t="WebGL",n++):this.renderType===U.HEADLESS&&(t="Headless"),this.device.webAudio&&(i="WebAudio",n++),this.device.chrome)for(var r=["%c %c %c Phaser v"+e+" | Pixi.js | "+t+" | "+i+"  %c %c %c http://phaser.io %c%c%c","background: #fb8cb3","background: #d44a52","color: #ffffff; background: #871905;","background: #d44a52","background: #fb8cb3","background: #ffffff"],o=0;o<3;o++)o<n?r.push("color: #ff2424; background: #fff"):r.push("color: #959595; background: #fff");else window.console}},setUpRenderer:function(){if(this.config.canvas?this.canvas=this.config.canvas:this.canvas=U.Canvas.create(this,this.width,this.height,this.config.canvasID,!0),this.config.canvasStyle?this.canvas.style=this.config.canvasStyle:this.canvas.style["-webkit-full-screen"]="width: 100%; height: 100%",this.renderType===U.HEADLESS||this.renderType===U.CANVAS||this.renderType===U.AUTO&&!this.device.webGL){if(!this.device.canvas)throw new Error("Phaser.Game - Cannot create Canvas or WebGL context, aborting.");this.renderType=U.CANVAS,this.renderer=new PIXI.CanvasRenderer(this),this.context=this.renderer.context}else this.renderType=U.WEBGL,this.renderer=new PIXI.WebGLRenderer(this),this.context=null,this.canvas.addEventListener("webglcontextlost",this.contextLost.bind(this),!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestored.bind(this),!1);this.device.cocoonJS&&(this.canvas.screencanvas=this.renderType===U.CANVAS),this.renderType!==U.HEADLESS&&(this.stage.smoothed=this.antialias,U.Canvas.addToDOM(this.canvas,this.parent,!1),U.Canvas.setTouchAction(this.canvas))},contextLost:function(e){e.preventDefault(),this.renderer.contextLost=!0},contextRestored:function(){this.renderer.initContext(),this.cache.clearGLTextures(),this.renderer.contextLost=!1},update:function(e){if(this.time.update(e),this._kickstart)return this.updateLogic(this.time.desiredFpsMult),this.updateRender(this.time.slowMotion*this.time.desiredFps),void(this._kickstart=!1);if(1<this._spiraling&&!this.forceSingleUpdate)this.time.time>this._nextFpsNotification&&(this._nextFpsNotification=this.time.time+1e4,this.fpsProblemNotifier.dispatch()),this._deltaTime=0,this._spiraling=0,this.updateRender(this.time.slowMotion*this.time.desiredFps);else{var t=1e3*this.time.slowMotion/this.time.desiredFps;this._deltaTime+=Math.max(Math.min(3*t,this.time.elapsed),0);var i=0;for(this.updatesThisFrame=Math.floor(this._deltaTime/t),this.forceSingleUpdate&&(this.updatesThisFrame=Math.min(1,this.updatesThisFrame));this._deltaTime>=t&&(this._deltaTime-=t,this.currentUpdateID=i,this.updateLogic(this.time.desiredFpsMult),i++,!this.forceSingleUpdate||1!==i);)this.time.refresh();i>this._lastCount?this._spiraling++:i<this._lastCount&&(this._spiraling=0),this._lastCount=i,this.updateRender(this._deltaTime/t)}},updateLogic:function(e){this._paused||this.pendingStep?(this.scale.pauseUpdate(),this.state.pauseUpdate(),this.debug.preUpdate()):(this.stepping&&(this.pendingStep=!0),this.scale.preUpdate(),this.debug.preUpdate(),this.camera.preUpdate(),this.physics.preUpdate(),this.state.preUpdate(e),this.plugins.preUpdate(e),this.stage.preUpdate(),this.state.update(),this.stage.update(),this.tweens.update(),this.sound.update(),this.input.update(),this.physics.update(),this.particles.update(),this.plugins.update(),this.stage.postUpdate(),this.plugins.postUpdate()),this.stage.updateTransform()},updateRender:function(e){this.lockRender||(this.state.preRender(e),this.renderType!==U.HEADLESS&&(this.renderer.render(this.stage),this.plugins.render(e),this.state.render(e)),this.plugins.postRender(e))},enableStep:function(){this.stepping=!0,this.pendingStep=!1,this.stepCount=0},disableStep:function(){this.stepping=!1,this.pendingStep=!1},step:function(){this.pendingStep=!1,this.stepCount++},destroy:function(){this.raf.stop(),this.state.destroy(),this.sound.destroy(),this.scale.destroy(),this.stage.destroy(),this.input.destroy(),this.physics.destroy(),this.plugins.destroy(),this.state=null,this.sound=null,this.scale=null,this.stage=null,this.input=null,this.physics=null,this.plugins=null,this.cache=null,this.load=null,this.time=null,this.world=null,this.isBooted=!1,this.renderer.destroy(!1),U.Canvas.removeFromDOM(this.canvas),PIXI.defaultRenderer=null,U.GAMES[this.id]=null},gamePaused:function(e){this._paused||(this._paused=!0,this.time.gamePaused(),this.sound.muteOnPause&&this.sound.setMute(),this.onPause.dispatch(e),this.device.cordova&&this.device.iOS&&(this.lockRender=!0))},gameResumed:function(e){this._paused&&!this._codePaused&&(this._paused=!1,this.time.gameResumed(),this.input.reset(),this.sound.muteOnPause&&this.sound.unsetMute(),this.onResume.dispatch(e),this.device.cordova&&this.device.iOS&&(this.lockRender=!1))},focusLoss:function(e){this.onBlur.dispatch(e),this.stage.disableVisibilityChange||this.gamePaused(e)},focusGain:function(e){this.onFocus.dispatch(e),this.stage.disableVisibilityChange||this.gameResumed(e)}},U.Game.prototype.constructor=U.Game,Object.defineProperty(U.Game.prototype,"paused",{get:function(){return this._paused},set:function(e){!0===e?(!1===this._paused&&(this._paused=!0,this.sound.setMute(),this.time.gamePaused(),this.onPause.dispatch(this)),this._codePaused=!0):(this._paused&&(this._paused=!1,this.input.reset(),this.sound.unsetMute(),this.time.gameResumed(),this.onResume.dispatch(this)),this._codePaused=!1)}}),U.Input=function(e){this.game=e,this.hitCanvas=null,this.hitContext=null,this.moveCallbacks=[],this.customCandidateHandler=null,this.customCandidateHandlerContext=null,this.pollRate=0,this.enabled=!0,this.multiInputOverride=U.Input.MOUSE_TOUCH_COMBINE,this.position=null,this.speed=null,this.circle=null,this.scale=null,this.maxPointers=-1,this.tapRate=200,this.doubleTapRate=300,this.holdRate=2e3,this.justPressedRate=200,this.justReleasedRate=200,this.recordPointerHistory=!1,this.recordRate=100,this.recordLimit=100,this.pointer1=null,this.pointer2=null,this.pointer3=null,this.pointer4=null,this.pointer5=null,this.pointer6=null,this.pointer7=null,this.pointer8=null,this.pointer9=null,this.pointer10=null,this.pointers=[],this.activePointer=null,this.mousePointer=null,this.mouse=null,this.keyboard=null,this.touch=null,this.mspointer=null,this.gamepad=null,this.resetLocked=!1,this.onDown=null,this.onUp=null,this.onTap=null,this.onHold=null,this.minPriorityID=0,this.interactiveItems=new U.ArraySet,this._localPoint=new U.Point,this._pollCounter=0,this._oldPosition=null,this._x=0,this._y=0},U.Input.MOUSE_OVERRIDES_TOUCH=0,U.Input.TOUCH_OVERRIDES_MOUSE=1,U.Input.MOUSE_TOUCH_COMBINE=2,U.Input.MAX_POINTERS=10,U.Input.prototype={boot:function(){this.mousePointer=new U.Pointer(this.game,0,U.PointerMode.CURSOR),this.addPointer(),this.addPointer(),this.mouse=new U.Mouse(this.game),this.touch=new U.Touch(this.game),this.mspointer=new U.MSPointer(this.game),U.Keyboard&&(this.keyboard=new U.Keyboard(this.game)),U.Gamepad&&(this.gamepad=new U.Gamepad(this.game)),this.onDown=new U.Signal,this.onUp=new U.Signal,this.onTap=new U.Signal,this.onHold=new U.Signal,this.scale=new U.Point(1,1),this.speed=new U.Point,this.position=new U.Point,this._oldPosition=new U.Point,this.circle=new U.Circle(0,0,44),this.activePointer=this.mousePointer,this.hitCanvas=PIXI.CanvasPool.create(this,1,1),this.hitContext=this.hitCanvas.getContext("2d"),this.mouse.start(),this.touch.start(),this.mspointer.start(),this.mousePointer.active=!0,this.keyboard&&this.keyboard.start();var t=this;this._onClickTrampoline=function(e){t.onClickTrampoline(e)},this.game.canvas.addEventListener("click",this._onClickTrampoline,!1)},destroy:function(){this.mouse.stop(),this.touch.stop(),this.mspointer.stop(),this.keyboard&&this.keyboard.stop(),this.gamepad&&this.gamepad.stop(),this.moveCallbacks=[],PIXI.CanvasPool.remove(this),this.game.canvas.removeEventListener("click",this._onClickTrampoline)},setInteractiveCandidateHandler:function(e,t){this.customCandidateHandler=e,this.customCandidateHandlerContext=t},addMoveCallback:function(e,t){this.moveCallbacks.push({callback:e,context:t})},deleteMoveCallback:function(e,t){for(var i=this.moveCallbacks.length;i--;)if(this.moveCallbacks[i].callback===e&&this.moveCallbacks[i].context===t)return void this.moveCallbacks.splice(i,1)},addPointer:function(){if(this.pointers.length>=U.Input.MAX_POINTERS)return null;var e=this.pointers.length+1,t=new U.Pointer(this.game,e,U.PointerMode.TOUCH);return this.pointers.push(t),this["pointer"+e]=t},update:function(){if(this.keyboard&&this.keyboard.update(),0<this.pollRate&&this._pollCounter<this.pollRate)this._pollCounter++;else{this.speed.x=this.position.x-this._oldPosition.x,this.speed.y=this.position.y-this._oldPosition.y,this._oldPosition.copyFrom(this.position),this.mousePointer.update(),this.gamepad&&this.gamepad.active&&this.gamepad.update();for(var e=0;e<this.pointers.length;e++)this.pointers[e].update();this._pollCounter=0}},reset:function(e){if(this.game.isBooted&&!this.resetLocked){void 0===e&&(e=!1),this.mousePointer.reset(),this.keyboard&&this.keyboard.reset(e),this.gamepad&&this.gamepad.reset();for(var t=0;t<this.pointers.length;t++)this.pointers[t].reset();"none"!==this.game.canvas.style.cursor&&(this.game.canvas.style.cursor="inherit"),e&&(this.onDown.dispose(),this.onUp.dispose(),this.onTap.dispose(),this.onHold.dispose(),this.onDown=new U.Signal,this.onUp=new U.Signal,this.onTap=new U.Signal,this.onHold=new U.Signal,this.moveCallbacks=[]),this._pollCounter=0}},resetSpeed:function(e,t){this._oldPosition.setTo(e,t),this.speed.setTo(0,0)},startPointer:function(e){if(0<=this.maxPointers&&this.countActivePointers(this.maxPointers)>=this.maxPointers)return null;if(!this.pointer1.active)return this.pointer1.start(e);if(!this.pointer2.active)return this.pointer2.start(e);for(var t=2;t<this.pointers.length;t++){var i=this.pointers[t];if(!i.active)return i.start(e)}return null},updatePointer:function(e){if(this.pointer1.active&&this.pointer1.identifier===e.identifier)return this.pointer1.move(e);if(this.pointer2.active&&this.pointer2.identifier===e.identifier)return this.pointer2.move(e);for(var t=2;t<this.pointers.length;t++){var i=this.pointers[t];if(i.active&&i.identifier===e.identifier)return i.move(e)}return null},stopPointer:function(e){if(this.pointer1.active&&this.pointer1.identifier===e.identifier)return this.pointer1.stop(e);if(this.pointer2.active&&this.pointer2.identifier===e.identifier)return this.pointer2.stop(e);for(var t=2;t<this.pointers.length;t++){var i=this.pointers[t];if(i.active&&i.identifier===e.identifier)return i.stop(e)}return null},countActivePointers:function(e){void 0===e&&(e=this.pointers.length);for(var t=e,i=0;i<this.pointers.length&&0<t;i++){this.pointers[i].active&&t--}return e-t},getPointer:function(e){void 0===e&&(e=!1);for(var t=0;t<this.pointers.length;t++){var i=this.pointers[t];if(i.active===e)return i}return null},getPointerFromIdentifier:function(e){for(var t=0;t<this.pointers.length;t++){var i=this.pointers[t];if(i.identifier===e)return i}return null},getPointerFromId:function(e){for(var t=0;t<this.pointers.length;t++){var i=this.pointers[t];if(i.pointerId===e)return i}return null},getLocalPosition:function(e,t,i){void 0===i&&(i=new U.Point);var n=e.worldTransform,r=1/(n.a*n.d+n.c*-n.b);return i.setTo(n.d*r*t.x+-n.c*r*t.y+(n.ty*n.c-n.tx*n.d)*r,n.a*r*t.y+-n.b*r*t.x+(-n.ty*n.a+n.tx*n.b)*r)},hitTest:function(e,t,i){if(!e.worldVisible)return!1;if(this.getLocalPosition(e,t,this._localPoint),i.copyFrom(this._localPoint),e.hitArea&&e.hitArea.contains)return e.hitArea.contains(this._localPoint.x,this._localPoint.y);if(e instanceof U.TileSprite){var n=e.width,r=e.height,o=-n*e.anchor.x;if(this._localPoint.x>=o&&this._localPoint.x<o+n){var a=-r*e.anchor.y;if(this._localPoint.y>=a&&this._localPoint.y<a+r)return!0}}else if(e instanceof PIXI.Sprite){n=e.texture.frame.width,r=e.texture.frame.height,o=-n*e.anchor.x;if(this._localPoint.x>=o&&this._localPoint.x<o+n){a=-r*e.anchor.y;if(this._localPoint.y>=a&&this._localPoint.y<a+r)return!0}}else if(e instanceof U.Graphics)for(var s=0;s<e.graphicsData.length;s++){var p=e.graphicsData[s];if(p.fill&&(p.shape&&p.shape.contains(this._localPoint.x,this._localPoint.y)))return!0}for(s=0;s<e.children.length;s++)if(this.hitTest(e.children[s],t,i))return!0;return!1},onClickTrampoline:function(){this.activePointer.processClickTrampolines()}},U.Input.prototype.constructor=U.Input,Object.defineProperty(U.Input.prototype,"x",{get:function(){return this._x},set:function(e){this._x=Math.floor(e)}}),Object.defineProperty(U.Input.prototype,"y",{get:function(){return this._y},set:function(e){this._y=Math.floor(e)}}),Object.defineProperty(U.Input.prototype,"pollLocked",{get:function(){return 0<this.pollRate&&this._pollCounter<this.pollRate}}),Object.defineProperty(U.Input.prototype,"totalInactivePointers",{get:function(){return this.pointers.length-this.countActivePointers()}}),Object.defineProperty(U.Input.prototype,"totalActivePointers",{get:function(){return this.countActivePointers()}}),Object.defineProperty(U.Input.prototype,"worldX",{get:function(){return this.game.camera.view.x+this.x}}),Object.defineProperty(U.Input.prototype,"worldY",{get:function(){return this.game.camera.view.y+this.y}}),U.Mouse=function(e){this.game=e,this.input=e.input,this.callbackContext=this.game,this.mouseDownCallback=null,this.mouseUpCallback=null,this.mouseOutCallback=null,this.mouseOverCallback=null,this.mouseWheelCallback=null,this.capture=!1,this.button=-1,this.wheelDelta=0,this.enabled=!0,this.locked=!1,this.stopOnGameOut=!1,this.pointerLock=new U.Signal,this.event=null,this._onMouseDown=null,this._onMouseMove=null,this._onMouseUp=null,this._onMouseOut=null,this._onMouseOver=null,this._onMouseWheel=null,this._wheelEvent=null},U.Mouse.NO_BUTTON=-1,U.Mouse.LEFT_BUTTON=0,U.Mouse.MIDDLE_BUTTON=1,U.Mouse.RIGHT_BUTTON=2,U.Mouse.BACK_BUTTON=3,U.Mouse.FORWARD_BUTTON=4,U.Mouse.WHEEL_UP=1,U.Mouse.WHEEL_DOWN=-1,U.Mouse.prototype={start:function(){if((!this.game.device.android||!1!==this.game.device.chrome)&&null===this._onMouseDown){var t=this;this._onMouseDown=function(e){return t.onMouseDown(e)},this._onMouseMove=function(e){return t.onMouseMove(e)},this._onMouseUp=function(e){return t.onMouseUp(e)},this._onMouseUpGlobal=function(e){return t.onMouseUpGlobal(e)},this._onMouseOutGlobal=function(e){return t.onMouseOutGlobal(e)},this._onMouseOut=function(e){return t.onMouseOut(e)},this._onMouseOver=function(e){return t.onMouseOver(e)},this._onMouseWheel=function(e){return t.onMouseWheel(e)};var e=this.game.canvas;e.addEventListener("mousedown",this._onMouseDown,!0),e.addEventListener("mousemove",this._onMouseMove,!0),e.addEventListener("mouseup",this._onMouseUp,!0),this.game.device.cocoonJS||(window.addEventListener("mouseup",this._onMouseUpGlobal,!0),window.addEventListener("mouseout",this._onMouseOutGlobal,!0),e.addEventListener("mouseover",this._onMouseOver,!0),e.addEventListener("mouseout",this._onMouseOut,!0));var i=this.game.device.wheelEvent;i&&(e.addEventListener(i,this._onMouseWheel,!0),"mousewheel"===i?this._wheelEvent=new n(-.025,1):"DOMMouseScroll"===i&&(this._wheelEvent=new n(1,1)))}},onMouseDown:function(e){this.event=e,this.capture&&e.preventDefault(),this.mouseDownCallback&&this.mouseDownCallback.call(this.callbackContext,e),this.input.enabled&&this.enabled&&(e.identifier=0,this.input.mousePointer.start(e))},onMouseMove:function(e){this.event=e,this.capture&&e.preventDefault(),this.mouseMoveCallback&&this.mouseMoveCallback.call(this.callbackContext,e),this.input.enabled&&this.enabled&&(e.identifier=0,this.input.mousePointer.move(e))},onMouseUp:function(e){this.event=e,this.capture&&e.preventDefault(),this.mouseUpCallback&&this.mouseUpCallback.call(this.callbackContext,e),this.input.enabled&&this.enabled&&(e.identifier=0,this.input.mousePointer.stop(e))},onMouseUpGlobal:function(e){this.input.mousePointer.withinGame||(this.mouseUpCallback&&this.mouseUpCallback.call(this.callbackContext,e),e.identifier=0,this.input.mousePointer.stop(e))},onMouseOutGlobal:function(e){this.event=e,this.capture&&e.preventDefault(),this.input.mousePointer.withinGame=!1,this.input.enabled&&this.enabled&&(this.input.mousePointer.stop(e),this.input.mousePointer.leftButton.stop(e),this.input.mousePointer.rightButton.stop(e))},onMouseOut:function(e){this.event=e,this.capture&&e.preventDefault(),this.input.mousePointer.withinGame=!1,this.mouseOutCallback&&this.mouseOutCallback.call(this.callbackContext,e),this.input.enabled&&this.enabled&&this.stopOnGameOut&&(e.identifier=0,this.input.mousePointer.stop(e))},onMouseOver:function(e){this.event=e,this.capture&&e.preventDefault(),this.input.mousePointer.withinGame=!0,this.mouseOverCallback&&this.mouseOverCallback.call(this.callbackContext,e)},onMouseWheel:function(e){this._wheelEvent&&(e=this._wheelEvent.bindEvent(e)),this.event=e,this.capture&&e.preventDefault(),this.wheelDelta=U.Math.clamp(-e.deltaY,-1,1),this.mouseWheelCallback&&this.mouseWheelCallback.call(this.callbackContext,e)},requestPointerLock:function(){if(this.game.device.pointerLock){var e=this.game.canvas;e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock,e.requestPointerLock();var t=this;this._pointerLockChange=function(e){return t.pointerLockChange(e)},document.addEventListener("pointerlockchange",this._pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this._pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this._pointerLockChange,!0)}},pointerLockChange:function(e){var t=this.game.canvas;document.pointerLockElement===t||document.mozPointerLockElement===t||document.webkitPointerLockElement===t?(this.locked=!0,this.pointerLock.dispatch(!0,e)):(this.locked=!1,this.pointerLock.dispatch(!1,e))},releasePointerLock:function(){document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock(),document.removeEventListener("pointerlockchange",this._pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this._pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this._pointerLockChange,!0)},stop:function(){var e=this.game.canvas;e.removeEventListener("mousedown",this._onMouseDown,!0),e.removeEventListener("mousemove",this._onMouseMove,!0),e.removeEventListener("mouseup",this._onMouseUp,!0),e.removeEventListener("mouseover",this._onMouseOver,!0),e.removeEventListener("mouseout",this._onMouseOut,!0);var t=this.game.device.wheelEvent;t&&e.removeEventListener(t,this._onMouseWheel,!0),window.removeEventListener("mouseup",this._onMouseUpGlobal,!0),window.removeEventListener("mouseout",this._onMouseOutGlobal,!0),document.removeEventListener("pointerlockchange",this._pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this._pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this._pointerLockChange,!0)}},U.Mouse.prototype.constructor=U.Mouse,((n.prototype={}).constructor=n).prototype.bindEvent=function(e){if(!n._stubsGenerated&&e){var t=function(t){return function(){var e=this.originalEvent[t];return"function"!=typeof e?e:e.bind(this.originalEvent)}};for(var i in e)i in n.prototype||Object.defineProperty(n.prototype,i,{get:t(i)});n._stubsGenerated=!0}return this.originalEvent=e,this},Object.defineProperties(n.prototype,{type:{value:"wheel"},deltaMode:{get:function(){return this._deltaMode}},deltaY:{get:function(){return this._scaleFactor*(this.originalEvent.wheelDelta||this.originalEvent.detail)||0}},deltaX:{get:function(){return this._scaleFactor*this.originalEvent.wheelDeltaX||0}},deltaZ:{value:0}}),U.MSPointer=function(e){this.game=e,this.input=e.input,this.callbackContext=this.game,this.pointerDownCallback=null,this.pointerMoveCallback=null,this.pointerUpCallback=null,this.capture=!0,this.button=-1,this.event=null,this.enabled=!0,this._onMSPointerDown=null,this._onMSPointerMove=null,this._onMSPointerUp=null,this._onMSPointerUpGlobal=null,this._onMSPointerOut=null,this._onMSPointerOver=null},U.MSPointer.prototype={start:function(){if(null===this._onMSPointerDown){var t=this;if(this.game.device.mspointer){this._onMSPointerDown=function(e){return t.onPointerDown(e)},this._onMSPointerMove=function(e){return t.onPointerMove(e)},this._onMSPointerUp=function(e){return t.onPointerUp(e)},this._onMSPointerUpGlobal=function(e){return t.onPointerUpGlobal(e)},this._onMSPointerOut=function(e){return t.onPointerOut(e)},this._onMSPointerOver=function(e){return t.onPointerOver(e)};var e=this.game.canvas;e.addEventListener("MSPointerDown",this._onMSPointerDown,!1),e.addEventListener("MSPointerMove",this._onMSPointerMove,!1),e.addEventListener("MSPointerUp",this._onMSPointerUp,!1),e.addEventListener("pointerdown",this._onMSPointerDown,!1),e.addEventListener("pointermove",this._onMSPointerMove,!1),e.addEventListener("pointerup",this._onMSPointerUp,!1),e.style["-ms-content-zooming"]="none",e.style["-ms-touch-action"]="none",this.game.device.cocoonJS||(window.addEventListener("MSPointerUp",this._onMSPointerUpGlobal,!0),e.addEventListener("MSPointerOver",this._onMSPointerOver,!0),e.addEventListener("MSPointerOut",this._onMSPointerOut,!0),window.addEventListener("pointerup",this._onMSPointerUpGlobal,!0),e.addEventListener("pointerover",this._onMSPointerOver,!0),e.addEventListener("pointerout",this._onMSPointerOut,!0))}}},onPointerDown:function(e){this.event=e,this.capture&&e.preventDefault(),this.pointerDownCallback&&this.pointerDownCallback.call(this.callbackContext,e),this.input.enabled&&this.enabled&&(e.identifier=e.pointerId,"mouse"===e.pointerType||4===e.pointerType?this.input.mousePointer.start(e):this.input.startPointer(e))},onPointerMove:function(e){this.event=e,this.capture&&e.preventDefault(),this.pointerMoveCallback&&this.pointerMoveCallback.call(this.callbackContext,e),this.input.enabled&&this.enabled&&(e.identifier=e.pointerId,"mouse"===e.pointerType||4===e.pointerType?this.input.mousePointer.move(e):this.input.updatePointer(e))},onPointerUp:function(e){this.event=e,this.capture&&e.preventDefault(),this.pointerUpCallback&&this.pointerUpCallback.call(this.callbackContext,e),this.input.enabled&&this.enabled&&(e.identifier=e.pointerId,"mouse"===e.pointerType||4===e.pointerType?this.input.mousePointer.stop(e):this.input.stopPointer(e))},onPointerUpGlobal:function(e){if("mouse"!==e.pointerType&&4!==e.pointerType||this.input.mousePointer.withinGame){var t=this.input.getPointerFromIdentifier(e.identifier);t&&t.withinGame&&this.onPointerUp(e)}else this.onPointerUp(e)},onPointerOut:function(e){if(this.event=e,this.capture&&e.preventDefault(),"mouse"===e.pointerType||4===e.pointerType)this.input.mousePointer.withinGame=!1;else{var t=this.input.getPointerFromIdentifier(e.identifier);t&&(t.withinGame=!1)}this.input.mouse.mouseOutCallback&&this.input.mouse.mouseOutCallback.call(this.input.mouse.callbackContext,e),this.input.enabled&&this.enabled&&this.input.mouse.stopOnGameOut&&(e.identifier=0,t?t.stop(e):this.input.mousePointer.stop(e))},onPointerOver:function(e){if(this.event=e,this.capture&&e.preventDefault(),"mouse"===e.pointerType||4===e.pointerType)this.input.mousePointer.withinGame=!0;else{var t=this.input.getPointerFromIdentifier(e.identifier);t&&(t.withinGame=!0)}this.input.mouse.mouseOverCallback&&this.input.mouse.mouseOverCallback.call(this.input.mouse.callbackContext,e)},stop:function(){var e=this.game.canvas;e.removeEventListener("MSPointerDown",this._onMSPointerDown,!1),e.removeEventListener("MSPointerMove",this._onMSPointerMove,!1),e.removeEventListener("MSPointerUp",this._onMSPointerUp,!1),e.removeEventListener("pointerdown",this._onMSPointerDown,!1),e.removeEventListener("pointermove",this._onMSPointerMove,!1),e.removeEventListener("pointerup",this._onMSPointerUp,!1),window.removeEventListener("MSPointerUp",this._onMSPointerUpGlobal,!0),e.removeEventListener("MSPointerOver",this._onMSPointerOver,!0),e.removeEventListener("MSPointerOut",this._onMSPointerOut,!0),window.removeEventListener("pointerup",this._onMSPointerUpGlobal,!0),e.removeEventListener("pointerover",this._onMSPointerOver,!0),e.removeEventListener("pointerout",this._onMSPointerOut,!0)}},U.MSPointer.prototype.constructor=U.MSPointer,U.DeviceButton=function(e,t){this.parent=e,this.game=e.game,this.event=null,this.isDown=!1,this.isUp=!0,this.timeDown=0,this.timeUp=0,this.repeats=0,this.altKey=!1,this.shiftKey=!1,this.ctrlKey=!1,this.value=0,this.buttonCode=t,this.onDown=new U.Signal,this.onUp=new U.Signal,this.onFloat=new U.Signal},U.DeviceButton.prototype={start:function(e,t){this.isDown||(this.isDown=!0,this.isUp=!1,this.timeDown=this.game.time.time,this.repeats=0,this.event=e,this.value=t,e&&(this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.ctrlKey=e.ctrlKey),this.onDown.dispatch(this,t))},stop:function(e,t){this.isUp||(this.isDown=!1,this.isUp=!0,this.timeUp=this.game.time.time,this.event=e,this.value=t,e&&(this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.ctrlKey=e.ctrlKey),this.onUp.dispatch(this,t))},padFloat:function(e){this.value=e,this.onFloat.dispatch(this,e)},justPressed:function(e){return e=e||250,this.isDown&&this.timeDown+e>this.game.time.time},justReleased:function(e){return e=e||250,this.isUp&&this.timeUp+e>this.game.time.time},reset:function(){this.isDown=!1,this.isUp=!0,this.timeDown=this.game.time.time,this.repeats=0,this.altKey=!1,this.shiftKey=!1,this.ctrlKey=!1},destroy:function(){this.onDown.dispose(),this.onUp.dispose(),this.onFloat.dispose(),this.parent=null,this.game=null}},U.DeviceButton.prototype.constructor=U.DeviceButton,Object.defineProperty(U.DeviceButton.prototype,"duration",{get:function(){return this.isUp?-1:this.game.time.time-this.timeDown}}),U.Pointer=function(e,t,i){this.game=e,this.id=t,this.type=U.POINTER,this.exists=!0,this.identifier=0,this.pointerId=null,this.pointerMode=i||U.PointerMode.CURSOR|U.PointerMode.CONTACT,this.target=null,this.button=null,this.leftButton=new U.DeviceButton(this,U.Pointer.LEFT_BUTTON),this.middleButton=new U.DeviceButton(this,U.Pointer.MIDDLE_BUTTON),this.rightButton=new U.DeviceButton(this,U.Pointer.RIGHT_BUTTON),this.backButton=new U.DeviceButton(this,U.Pointer.BACK_BUTTON),this.forwardButton=new U.DeviceButton(this,U.Pointer.FORWARD_BUTTON),this.eraserButton=new U.DeviceButton(this,U.Pointer.ERASER_BUTTON),this._holdSent=!1,this._history=[],this._nextDrop=0,this._stateReset=!1,this.withinGame=!1,this.clientX=-1,this.clientY=-1,this.pageX=-1,this.pageY=-1,this.screenX=-1,this.screenY=-1,this.rawMovementX=0,this.rawMovementY=0,this.movementX=0,this.movementY=0,this.x=-1,this.y=-1,this.isMouse=0===t,this.isDown=!1,this.isUp=!0,this.timeDown=0,this.timeUp=0,this.previousTapTime=0,this.totalTouches=0,this.msSinceLastClick=Number.MAX_VALUE,this.targetObject=null,this.interactiveCandidates=[],this.active=!1,this.dirty=!1,this.position=new U.Point,this.positionDown=new U.Point,this.positionUp=new U.Point,this.circle=new U.Circle(0,0,44),this._clickTrampolines=null,this._trampolineTargetObject=null},U.Pointer.NO_BUTTON=0,U.Pointer.LEFT_BUTTON=1,U.Pointer.RIGHT_BUTTON=2,U.Pointer.MIDDLE_BUTTON=4,U.Pointer.BACK_BUTTON=8,U.Pointer.FORWARD_BUTTON=16,U.Pointer.ERASER_BUTTON=32,U.Pointer.prototype={resetButtons:function(){this.isDown=!1,this.isUp=!0,this.isMouse&&(this.leftButton.reset(),this.middleButton.reset(),this.rightButton.reset(),this.backButton.reset(),this.forwardButton.reset(),this.eraserButton.reset())},processButtonsDown:function(e,t){U.Pointer.LEFT_BUTTON&e&&this.leftButton.start(t),U.Pointer.RIGHT_BUTTON&e&&this.rightButton.start(t),U.Pointer.MIDDLE_BUTTON&e&&this.middleButton.start(t),U.Pointer.BACK_BUTTON&e&&this.backButton.start(t),U.Pointer.FORWARD_BUTTON&e&&this.forwardButton.start(t),U.Pointer.ERASER_BUTTON&e&&this.eraserButton.start(t)},processButtonsUp:function(e,t){e===U.Mouse.LEFT_BUTTON&&this.leftButton.stop(t),e===U.Mouse.RIGHT_BUTTON&&this.rightButton.stop(t),e===U.Mouse.MIDDLE_BUTTON&&this.middleButton.stop(t),e===U.Mouse.BACK_BUTTON&&this.backButton.stop(t),e===U.Mouse.FORWARD_BUTTON&&this.forwardButton.stop(t),5===e&&this.eraserButton.stop(t)},updateButtons:function(e){this.button=e.button;var t="down"===e.type.toLowerCase().substr(-4);void 0!==e.buttons?t?this.processButtonsDown(e.buttons,e):this.processButtonsUp(e.button,e):t?this.leftButton.start(e):(this.leftButton.stop(e),this.rightButton.stop(e)),1===e.buttons&&e.ctrlKey&&this.leftButton.isDown&&(this.leftButton.stop(e),this.rightButton.start(e)),this.isUp=!0,this.isDown=!1,(this.leftButton.isDown||this.rightButton.isDown||this.middleButton.isDown||this.backButton.isDown||this.forwardButton.isDown||this.eraserButton.isDown)&&(this.isUp=!1,this.isDown=!0)},start:function(e){var t=this.game.input;return e.pointerId&&(this.pointerId=e.pointerId),this.identifier=e.identifier,this.target=e.target,this.isMouse?this.updateButtons(e):(this.isDown=!0,this.isUp=!1),this.active=!0,this.withinGame=!0,this.dirty=!1,this._history=[],this._clickTrampolines=null,this._trampolineTargetObject=null,this.msSinceLastClick=this.game.time.time-this.timeDown,this.timeDown=this.game.time.time,this._holdSent=!1,this.move(e,!0),this.positionDown.setTo(this.x,this.y),(t.multiInputOverride===U.Input.MOUSE_OVERRIDES_TOUCH||t.multiInputOverride===U.Input.MOUSE_TOUCH_COMBINE||t.multiInputOverride===U.Input.TOUCH_OVERRIDES_MOUSE&&0===t.totalActivePointers)&&(t.x=this.x,t.y=this.y,t.position.setTo(this.x,this.y),t.onDown.dispatch(this,e),t.resetSpeed(this.x,this.y)),this._stateReset=!1,this.totalTouches++,null!==this.targetObject&&this.targetObject._touchedHandler(this),this},update:function(){var e=this.game.input;this.active&&(this.dirty&&(0<e.interactiveItems.total&&this.processInteractiveObjects(!1),this.dirty=!1),!1===this._holdSent&&this.duration>=e.holdRate&&((e.multiInputOverride===U.Input.MOUSE_OVERRIDES_TOUCH||e.multiInputOverride===U.Input.MOUSE_TOUCH_COMBINE||e.multiInputOverride===U.Input.TOUCH_OVERRIDES_MOUSE&&0===e.totalActivePointers)&&e.onHold.dispatch(this),this._holdSent=!0),e.recordPointerHistory&&this.game.time.time>=this._nextDrop&&(this._nextDrop=this.game.time.time+e.recordRate,this._history.push({x:this.position.x,y:this.position.y}),this._history.length>e.recordLimit&&this._history.shift()))},move:function(e,t){var i=this.game.input;if(!i.pollLocked){if(void 0===t&&(t=!1),void 0!==e.button&&(this.button=e.button),t&&this.isMouse&&this.updateButtons(e),this.clientX=e.clientX,this.clientY=e.clientY,this.pageX=e.pageX,this.pageY=e.pageY,this.screenX=e.screenX,this.screenY=e.screenY,this.isMouse&&i.mouse.locked&&!t&&(this.rawMovementX=e.movementX||e.mozMovementX||e.webkitMovementX||0,this.rawMovementY=e.movementY||e.mozMovementY||e.webkitMovementY||0,this.movementX+=this.rawMovementX,this.movementY+=this.rawMovementY),this.x=(this.pageX-this.game.scale.offset.x)*i.scale.x,this.y=(this.pageY-this.game.scale.offset.y)*i.scale.y,this.position.setTo(this.x,this.y),this.circle.x=this.x,this.circle.y=this.y,(i.multiInputOverride===U.Input.MOUSE_OVERRIDES_TOUCH||i.multiInputOverride===U.Input.MOUSE_TOUCH_COMBINE||i.multiInputOverride===U.Input.TOUCH_OVERRIDES_MOUSE&&0===i.totalActivePointers)&&(i.activePointer=this,i.x=this.x,i.y=this.y,i.position.setTo(i.x,i.y),i.circle.x=i.x,i.circle.y=i.y),this.withinGame=this.game.scale.bounds.contains(this.pageX,this.pageY),this.game.paused)return this;for(var n=i.moveCallbacks.length;n--;)i.moveCallbacks[n].callback.call(i.moveCallbacks[n].context,this,this.x,this.y,t);return null!==this.targetObject&&!0===this.targetObject.isDragged?!1===this.targetObject.update(this)&&(this.targetObject=null):0<i.interactiveItems.total&&this.processInteractiveObjects(t),this}},processInteractiveObjects:function(e){var t=0,i=-1,n=null,r=this.game.input.interactiveItems.first;for(this.interactiveCandidates=[];r;)r.checked=!1,r.validForInput(i,t,!1)&&(r.checked=!0,(e&&r.checkPointerDown(this,!0)||!e&&r.checkPointerOver(this,!0))&&(t=r.sprite.renderOrderID,i=r.priorityID,n=r,this.interactiveCandidates.push(r))),r=this.game.input.interactiveItems.next;for(r=this.game.input.interactiveItems.first;r;)!r.checked&&r.validForInput(i,t,!0)&&(e&&r.checkPointerDown(this,!1)||!e&&r.checkPointerOver(this,!1))&&(t=r.sprite.renderOrderID,i=r.priorityID,n=r,this.interactiveCandidates.push(r)),r=this.game.input.interactiveItems.next;return this.game.input.customCandidateHandler&&(n=this.game.input.customCandidateHandler.call(this.game.input.customCandidateHandlerContext,this,this.interactiveCandidates,n)),this.swapTarget(n,!1),null!==this.targetObject},swapTarget:function(e,t){void 0===t&&(t=!1),null===e?this.targetObject&&(this.targetObject._pointerOutHandler(this,t),this.targetObject=null):null===this.targetObject?(this.targetObject=e)._pointerOverHandler(this,t):this.targetObject===e?!1===e.update(this)&&(this.targetObject=null):(this.targetObject._pointerOutHandler(this,t),this.targetObject=e,this.targetObject._pointerOverHandler(this,t))},leave:function(e){this.withinGame=!1,this.move(e,!1)},stop:function(e){var t=this.game.input;if(!this._stateReset||!this.withinGame)return this.timeUp=this.game.time.time,(t.multiInputOverride===U.Input.MOUSE_OVERRIDES_TOUCH||t.multiInputOverride===U.Input.MOUSE_TOUCH_COMBINE||t.multiInputOverride===U.Input.TOUCH_OVERRIDES_MOUSE&&0===t.totalActivePointers)&&(t.onUp.dispatch(this,e),0<=this.duration&&this.duration<=t.tapRate&&(this.timeUp-this.previousTapTime<t.doubleTapRate?t.onTap.dispatch(this,!0):t.onTap.dispatch(this,!1),this.previousTapTime=this.timeUp)),this.isMouse?this.updateButtons(e):(this.isDown=!1,this.isUp=!0),0<this.id&&(this.active=!1),this.withinGame=this.game.scale.bounds.contains(e.pageX,e.pageY),this.pointerId=null,this.identifier=null,this.positionUp.setTo(this.x,this.y),!1===this.isMouse&&t.currentPointers--,t.interactiveItems.callAll("_releasedHandler",this),this._clickTrampolines&&(this._trampolineTargetObject=this.targetObject),this.targetObject=null,this;e.preventDefault()},justPressed:function(e){return e=e||this.game.input.justPressedRate,!0===this.isDown&&this.timeDown+e>this.game.time.time},justReleased:function(e){return e=e||this.game.input.justReleasedRate,this.isUp&&this.timeUp+e>this.game.time.time},addClickTrampoline:function(e,t,i,n){if(this.isDown){for(var r=this._clickTrampolines=this._clickTrampolines||[],o=0;o<r.length;o++)if(r[o].name===e){r.splice(o,1);break}r.push({name:e,targetObject:this.targetObject,callback:t,callbackContext:i,callbackArgs:n})}},processClickTrampolines:function(){var e=this._clickTrampolines;if(e){for(var t=0;t<e.length;t++){var i=e[t];i.targetObject===this._trampolineTargetObject&&i.callback.apply(i.callbackContext,i.callbackArgs)}this._clickTrampolines=null,this._trampolineTargetObject=null}},reset:function(){!1===this.isMouse&&(this.active=!1),this.pointerId=null,this.identifier=null,this.dirty=!1,this.totalTouches=0,this._holdSent=!1,this._history.length=0,this._stateReset=!0,this.resetButtons(),this.targetObject&&this.targetObject._releasedHandler(this),this.targetObject=null},resetMovement:function(){this.movementX=0,this.movementY=0}},U.Pointer.prototype.constructor=U.Pointer,Object.defineProperty(U.Pointer.prototype,"duration",{get:function(){return this.isUp?-1:this.game.time.time-this.timeDown}}),Object.defineProperty(U.Pointer.prototype,"worldX",{get:function(){return this.game.world.camera.x+this.x}}),Object.defineProperty(U.Pointer.prototype,"worldY",{get:function(){return this.game.world.camera.y+this.y}}),U.PointerMode={CURSOR:1,CONTACT:2},U.Touch=function(e){this.game=e,this.enabled=!0,this.touchLockCallbacks=[],this.callbackContext=this.game,this.touchStartCallback=null,this.touchMoveCallback=null,this.touchEndCallback=null,this.touchEnterCallback=null,this.touchLeaveCallback=null,this.touchCancelCallback=null,this.preventDefault=!0,this.event=null,this._onTouchStart=null,this._onTouchMove=null,this._onTouchEnd=null,this._onTouchEnter=null,this._onTouchLeave=null,this._onTouchCancel=null,this._onTouchMove=null},U.Touch.prototype={start:function(){if(null===this._onTouchStart){var t=this;this.game.device.touch&&(this._onTouchStart=function(e){return t.onTouchStart(e)},this._onTouchMove=function(e){return t.onTouchMove(e)},this._onTouchEnd=function(e){return t.onTouchEnd(e)},this._onTouchEnter=function(e){return t.onTouchEnter(e)},this._onTouchLeave=function(e){return t.onTouchLeave(e)},this._onTouchCancel=function(e){return t.onTouchCancel(e)},this.game.canvas.addEventListener("touchstart",this._onTouchStart,!1),this.game.canvas.addEventListener("touchmove",this._onTouchMove,!1),this.game.canvas.addEventListener("touchend",this._onTouchEnd,!1),this.game.canvas.addEventListener("touchcancel",this._onTouchCancel,!1),this.game.device.cocoonJS||(this.game.canvas.addEventListener("touchenter",this._onTouchEnter,!1),this.game.canvas.addEventListener("touchleave",this._onTouchLeave,!1)))}},consumeDocumentTouches:function(){this._documentTouchMove=function(e){e.preventDefault()},document.addEventListener("touchmove",this._documentTouchMove,!1)},addTouchLockCallback:function(e,t,i){void 0===i&&(i=!1),this.touchLockCallbacks.push({callback:e,context:t,onEnd:i})},removeTouchLockCallback:function(e,t){for(var i=this.touchLockCallbacks.length;i--;)if(this.touchLockCallbacks[i].callback===e&&this.touchLockCallbacks[i].context===t)return this.touchLockCallbacks.splice(i,1),!0;return!1},onTouchStart:function(e){for(var t=this.touchLockCallbacks.length;t--;){var i=this.touchLockCallbacks[t];!i.onEnd&&i.callback.call(i.context,this,e)&&this.touchLockCallbacks.splice(t,1)}if(this.event=e,this.game.input.enabled&&this.enabled){this.touchStartCallback&&this.touchStartCallback.call(this.callbackContext,e),this.preventDefault&&e.preventDefault();for(t=0;t<e.changedTouches.length;t++)this.game.input.startPointer(e.changedTouches[t])}},onTouchCancel:function(e){if(this.event=e,this.touchCancelCallback&&this.touchCancelCallback.call(this.callbackContext,e),this.game.input.enabled&&this.enabled){this.preventDefault&&e.preventDefault();for(var t=0;t<e.changedTouches.length;t++)this.game.input.stopPointer(e.changedTouches[t])}},onTouchEnter:function(e){this.event=e,this.touchEnterCallback&&this.touchEnterCallback.call(this.callbackContext,e),this.game.input.enabled&&this.enabled&&this.preventDefault&&e.preventDefault()},onTouchLeave:function(e){this.event=e,this.touchLeaveCallback&&this.touchLeaveCallback.call(this.callbackContext,e),this.preventDefault&&e.preventDefault()},onTouchMove:function(e){this.event=e,this.touchMoveCallback&&this.touchMoveCallback.call(this.callbackContext,e),this.preventDefault&&e.preventDefault();for(var t=0;t<e.changedTouches.length;t++)this.game.input.updatePointer(e.changedTouches[t])},onTouchEnd:function(e){for(var t=this.touchLockCallbacks.length;t--;){var i=this.touchLockCallbacks[t];i.onEnd&&i.callback.call(i.context,this,e)&&this.touchLockCallbacks.splice(t,1)}this.event=e,this.touchEndCallback&&this.touchEndCallback.call(this.callbackContext,e),this.preventDefault&&e.preventDefault();for(t=0;t<e.changedTouches.length;t++)this.game.input.stopPointer(e.changedTouches[t])},stop:function(){this.game.device.touch&&(this.game.canvas.removeEventListener("touchstart",this._onTouchStart),this.game.canvas.removeEventListener("touchmove",this._onTouchMove),this.game.canvas.removeEventListener("touchend",this._onTouchEnd),this.game.canvas.removeEventListener("touchenter",this._onTouchEnter),this.game.canvas.removeEventListener("touchleave",this._onTouchLeave),this.game.canvas.removeEventListener("touchcancel",this._onTouchCancel))}},U.Touch.prototype.constructor=U.Touch,U.InputHandler=function(e){this.sprite=e,this.game=e.game,this.enabled=!1,this.checked=!1,this.priorityID=0,this.useHandCursor=!1,this._setHandCursor=!1,this.isDragged=!1,this.allowHorizontalDrag=!0,this.allowVerticalDrag=!0,this.bringToTop=!1,this.snapOffset=null,this.snapOnDrag=!1,this.snapOnRelease=!1,this.snapX=0,this.snapY=0,this.snapOffsetX=0,this.snapOffsetY=0,this.pixelPerfectOver=!1,this.pixelPerfectClick=!1,this.pixelPerfectAlpha=255,this.draggable=!1,this.boundsRect=null,this.boundsSprite=null,this.scaleLayer=!1,this.dragOffset=new U.Point,this.dragFromCenter=!1,this.dragStopBlocksInputUp=!1,this.dragStartPoint=new U.Point,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this.downPoint=new U.Point,this.snapPoint=new U.Point,this._dragPoint=new U.Point,this._dragPhase=!1,this._pendingDrag=!1,this._dragTimePass=!1,this._dragDistancePass=!1,this._wasEnabled=!1,this._tempPoint=new U.Point,this._pointerData=[],this._pointerData.push({id:0,x:0,y:0,camX:0,camY:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1})},U.InputHandler.prototype={start:function(e,t){if(e=e||0,void 0===t&&(t=!1),!1===this.enabled){this.game.input.interactiveItems.add(this),this.useHandCursor=t,this.priorityID=e;for(var i=0;i<10;i++)this._pointerData[i]={id:i,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1};this.snapOffset=new U.Point,this.enabled=!0,this._wasEnabled=!0}return this.sprite.events.onAddedToGroup.add(this.addedToGroup,this),this.sprite.events.onRemovedFromGroup.add(this.removedFromGroup,this),this.sprite},addedToGroup:function(){this._dragPhase||this._wasEnabled&&!this.enabled&&this.start()},removedFromGroup:function(){this._dragPhase||(this.enabled?(this._wasEnabled=!0,this.stop()):this._wasEnabled=!1)},reset:function(){this.enabled=!1;for(var e=0;e<10;e++)this._pointerData[e]={id:e,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1}},stop:function(){!1!==this.enabled&&(this.enabled=!1,this.game.input.interactiveItems.remove(this))},destroy:function(){this.sprite&&(this._setHandCursor&&(this.game.canvas.style.cursor="default",this._setHandCursor=!1),this.enabled=!1,this.game.input.interactiveItems.remove(this),this._pointerData.length=0,this.boundsRect=null,this.boundsSprite=null,this.sprite=null)},validForInput:function(e,t,i){return void 0===i&&(i=!0),!(!this.enabled||0===this.sprite.scale.x||0===this.sprite.scale.y||this.priorityID<this.game.input.minPriorityID||this.sprite.parent&&this.sprite.parent.ignoreChildInput)&&(!(!i&&(this.pixelPerfectClick||this.pixelPerfectOver))&&(this.priorityID>e||this.priorityID===e&&this.sprite.renderOrderID>t))},isPixelPerfect:function(){return this.pixelPerfectClick||this.pixelPerfectOver},pointerX:function(e){return e=e||0,this._pointerData[e].x},pointerY:function(e){return e=e||0,this._pointerData[e].y},pointerDown:function(e){return e=e||0,this._pointerData[e].isDown},pointerUp:function(e){return e=e||0,this._pointerData[e].isUp},pointerTimeDown:function(e){return e=e||0,this._pointerData[e].timeDown},pointerTimeUp:function(e){return e=e||0,this._pointerData[e].timeUp},pointerOver:function(e){if(!this.enabled)return!1;if(void 0!==e)return this._pointerData[e].isOver;for(var t=0;t<10;t++)if(this._pointerData[t].isOver)return!0;return!1},pointerOut:function(e){if(!this.enabled)return!1;if(void 0!==e)return this._pointerData[e].isOut;for(var t=0;t<10;t++)if(this._pointerData[t].isOut)return!0},pointerTimeOver:function(e){return e=e||0,this._pointerData[e].timeOver},pointerTimeOut:function(e){return e=e||0,this._pointerData[e].timeOut},pointerDragged:function(e){return e=e||0,this._pointerData[e].isDragged},checkPointerDown:function(e,t){return!!(e.isDown&&this.enabled&&this.sprite&&this.sprite.parent&&this.sprite.visible&&this.sprite.parent.visible&&0!==this.sprite.worldScale.x&&0!==this.sprite.worldScale.y)&&(!!this.game.input.hitTest(this.sprite,e,this._tempPoint)&&(void 0===t&&(t=!1),!(!t&&this.pixelPerfectClick)||this.checkPixel(this._tempPoint.x,this._tempPoint.y)))},checkPointerOver:function(e,t){return!!(this.enabled&&this.sprite&&this.sprite.parent&&this.sprite.visible&&this.sprite.parent.visible&&0!==this.sprite.worldScale.x&&0!==this.sprite.worldScale.y)&&(!!this.game.input.hitTest(this.sprite,e,this._tempPoint)&&(void 0===t&&(t=!1),!(!t&&this.pixelPerfectOver)||this.checkPixel(this._tempPoint.x,this._tempPoint.y)))},checkPixel:function(e,t,i){if(this.sprite.texture.baseTexture.source){if(null===e&&null===t){this.game.input.getLocalPosition(this.sprite,i,this._tempPoint);e=this._tempPoint.x,t=this._tempPoint.y}if(0!==this.sprite.anchor.x&&(e-=-this.sprite.texture.frame.width*this.sprite.anchor.x),0!==this.sprite.anchor.y&&(t-=-this.sprite.texture.frame.height*this.sprite.anchor.y),e+=this.sprite.texture.frame.x,t+=this.sprite.texture.frame.y,this.sprite.texture.trim&&(e-=this.sprite.texture.trim.x,t-=this.sprite.texture.trim.y,e<this.sprite.texture.crop.x||e>this.sprite.texture.crop.right||t<this.sprite.texture.crop.y||t>this.sprite.texture.crop.bottom))return this._dx=e,this._dy=t,!1;if(this._dx=e,this._dy=t,this.game.input.hitContext.clearRect(0,0,1,1),this.game.input.hitContext.drawImage(this.sprite.texture.baseTexture.source,e,t,1,1,0,0,1,1),this.game.input.hitContext.getImageData(0,0,1,1).data[3]>=this.pixelPerfectAlpha)return!0}return!1},update:function(e){if(null!==this.sprite&&void 0!==this.sprite.parent)return this.enabled&&this.sprite.visible&&this.sprite.parent.visible?this._pendingDrag?(this._dragDistancePass||(this._dragDistancePass=U.Math.distance(e.x,e.y,this.downPoint.x,this.downPoint.y)>=this.dragDistanceThreshold),this._dragDistancePass&&this._dragTimePass&&this.startDrag(e),!0):this.draggable&&this._draggedPointerID===e.id?this.updateDrag(e,!1):this._pointerData[e.id].isOver?this.checkPointerOver(e)?(this._pointerData[e.id].x=e.x-this.sprite.x,this._pointerData[e.id].y=e.y-this.sprite.y,!0):(this._pointerOutHandler(e),!1):void 0:(this._pointerOutHandler(e),!1)},_pointerOverHandler:function(e,t){if(null!==this.sprite){var i=this._pointerData[e.id];if(!1===i.isOver||e.dirty){var n=!1===i.isOver;i.isOver=!0,i.isOut=!1,i.timeOver=this.game.time.time,i.x=e.x-this.sprite.x,i.y=e.y-this.sprite.y,this.useHandCursor&&!1===i.isDragged&&(this.game.canvas.style.cursor="pointer",this._setHandCursor=!0),!t&&n&&this.sprite&&this.sprite.events&&this.sprite.events.onInputOver$dispatch(this.sprite,e),this.sprite.parent&&this.sprite.parent.type===U.GROUP&&this.sprite.parent.onChildInputOver.dispatch(this.sprite,e)}}},_pointerOutHandler:function(e,t){if(null!==this.sprite){var i=this._pointerData[e.id];i.isOver=!1,i.isOut=!0,i.timeOut=this.game.time.time,this.useHandCursor&&!1===i.isDragged&&(this.game.canvas.style.cursor="default",this._setHandCursor=!1),!t&&this.sprite&&this.sprite.events&&(this.sprite.events.onInputOut$dispatch(this.sprite,e),this.sprite&&this.sprite.parent&&this.sprite.parent.type===U.GROUP&&this.sprite.parent.onChildInputOut.dispatch(this.sprite,e))}},_touchedHandler:function(e){if(null!==this.sprite){var t=this._pointerData[e.id];if(!t.isDown&&t.isOver){if(this.pixelPerfectClick&&!this.checkPixel(null,null,e))return;if(t.isDown=!0,t.isUp=!1,t.timeDown=this.game.time.time,this.downPoint.set(e.x,e.y),e.dirty=!0,this.sprite&&this.sprite.events&&(this.sprite.events.onInputDown$dispatch(this.sprite,e),this.sprite&&this.sprite.parent&&this.sprite.parent.type===U.GROUP&&this.sprite.parent.onChildInputDown.dispatch(this.sprite,e),null===this.sprite))return;this.draggable&&!1===this.isDragged&&(0===this.dragTimeThreshold&&0===this.dragDistanceThreshold?this.startDrag(e):(this._pendingDrag=!0,this._dragDistancePass=0===this.dragDistanceThreshold,0<this.dragTimeThreshold?(this._dragTimePass=!1,this.game.time.events.add(this.dragTimeThreshold,this.dragTimeElapsed,this,e)):this._dragTimePass=!0)),this.bringToTop&&this.sprite.bringToTop()}}},dragTimeElapsed:function(e){this._dragTimePass=!0,this._pendingDrag&&this.sprite&&this._dragDistancePass&&this.startDrag(e)},_releasedHandler:function(e){if(null!==this.sprite){var t=this._pointerData[e.id];if(t.isDown&&e.isUp){t.isDown=!1,t.isUp=!0,t.timeUp=this.game.time.time,t.downDuration=t.timeUp-t.timeDown;var i=this.checkPointerOver(e);this.sprite&&this.sprite.events&&(this.dragStopBlocksInputUp&&(!this.dragStopBlocksInputUp||this.draggable&&this.isDragged&&this._draggedPointerID===e.id)||this.sprite.events.onInputUp$dispatch(this.sprite,e,i),this.sprite&&this.sprite.parent&&this.sprite.parent.type===U.GROUP&&this.sprite.parent.onChildInputUp.dispatch(this.sprite,e,i),i&&(i=this.checkPointerOver(e))),!(t.isOver=i)&&this.useHandCursor&&(this.game.canvas.style.cursor="default",this._setHandCursor=!1),e.dirty=!0,this._pendingDrag=!1,this.draggable&&this.isDragged&&this._draggedPointerID===e.id&&this.stopDrag(e)}}},updateDrag:function(e,t){if(void 0===t&&(t=!1),e.isUp)return this.stopDrag(e),!1;var i=this.globalToLocalX(e.x)+this._dragPoint.x+this.dragOffset.x,n=this.globalToLocalY(e.y)+this._dragPoint.y+this.dragOffset.y;if(this.sprite.fixedToCamera)this.allowHorizontalDrag&&(this.sprite.cameraOffset.x=i),this.allowVerticalDrag&&(this.sprite.cameraOffset.y=n),this.boundsRect&&this.checkBoundsRect(),this.boundsSprite&&this.checkBoundsSprite(),this.snapOnDrag&&(this.sprite.cameraOffset.x=Math.round((this.sprite.cameraOffset.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.cameraOffset.y=Math.round((this.sprite.cameraOffset.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY,this.snapPoint.set(this.sprite.cameraOffset.x,this.sprite.cameraOffset.y));else{var r=this.game.camera.x-this._pointerData[e.id].camX,o=this.game.camera.y-this._pointerData[e.id].camY;this.allowHorizontalDrag&&(this.sprite.x=i+r),this.allowVerticalDrag&&(this.sprite.y=n+o),this.boundsRect&&this.checkBoundsRect(),this.boundsSprite&&this.checkBoundsSprite(),this.snapOnDrag&&(this.sprite.x=Math.round((this.sprite.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.y=Math.round((this.sprite.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY,this.snapPoint.set(this.sprite.x,this.sprite.y))}return this.sprite.events.onDragUpdate.dispatch(this.sprite,e,i,n,this.snapPoint,t),!0},justOver:function(e,t){return e=e||0,t=t||500,this._pointerData[e].isOver&&this.overDuration(e)<t},justOut:function(e,t){return e=e||0,t=t||500,this._pointerData[e].isOut&&this.game.time.time-this._pointerData[e].timeOut<t},justPressed:function(e,t){return e=e||0,t=t||500,this._pointerData[e].isDown&&this.downDuration(e)<t},justReleased:function(e,t){return e=e||0,t=t||500,this._pointerData[e].isUp&&this.game.time.time-this._pointerData[e].timeUp<t},overDuration:function(e){return e=e||0,this._pointerData[e].isOver?this.game.time.time-this._pointerData[e].timeOver:-1},downDuration:function(e){return e=e||0,this._pointerData[e].isDown?this.game.time.time-this._pointerData[e].timeDown:-1},enableDrag:function(e,t,i,n,r,o){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===n&&(n=255),void 0===r&&(r=null),void 0===o&&(o=null),this._dragPoint=new U.Point,this.draggable=!0,this.bringToTop=t,this.dragOffset=new U.Point,this.dragFromCenter=e,this.pixelPerfectClick=i,this.pixelPerfectAlpha=n,r&&(this.boundsRect=r),o&&(this.boundsSprite=o)},disableDrag:function(){if(this._pointerData)for(var e=0;e<10;e++)this._pointerData[e].isDragged=!1;this.draggable=!1,this.isDragged=!1,this._draggedPointerID=-1,this._pendingDrag=!1},startDrag:function(e){var t=this.sprite.x,i=this.sprite.y;if(this.isDragged=!0,this._draggedPointerID=e.id,this._pointerData[e.id].camX=this.game.camera.x,this._pointerData[e.id].camY=this.game.camera.y,this._pointerData[e.id].isDragged=!0,this.sprite.fixedToCamera){if(this.dragFromCenter){var n=this.sprite.getBounds();this.sprite.cameraOffset.x=this.globalToLocalX(e.x)+(this.sprite.cameraOffset.x-n.centerX),this.sprite.cameraOffset.y=this.globalToLocalY(e.y)+(this.sprite.cameraOffset.y-n.centerY)}this._dragPoint.setTo(this.sprite.cameraOffset.x-e.x,this.sprite.cameraOffset.y-e.y)}else{if(this.dragFromCenter){n=this.sprite.getBounds();this.sprite.x=this.globalToLocalX(e.x)+(this.sprite.x-n.centerX),this.sprite.y=this.globalToLocalY(e.y)+(this.sprite.y-n.centerY)}this._dragPoint.setTo(this.sprite.x-this.globalToLocalX(e.x),this.sprite.y-this.globalToLocalY(e.y))}this.updateDrag(e,!0),this.bringToTop&&(this._dragPhase=!0,this.sprite.bringToTop()),this.dragStartPoint.set(t,i),this.sprite.events.onDragStart$dispatch(this.sprite,e,t,i),this._pendingDrag=!1},globalToLocalX:function(e){return this.scaleLayer&&(e-=this.game.scale.grid.boundsFluid.x,e*=this.game.scale.grid.scaleFluidInversed.x),e},globalToLocalY:function(e){return this.scaleLayer&&(e-=this.game.scale.grid.boundsFluid.y,e*=this.game.scale.grid.scaleFluidInversed.y),e},stopDrag:function(e){this.isDragged=!1,this._draggedPointerID=-1,this._pointerData[e.id].isDragged=!1,this._dragPhase=!1,this._pendingDrag=!1,this.snapOnRelease&&(this.sprite.fixedToCamera?(this.sprite.cameraOffset.x=Math.round((this.sprite.cameraOffset.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.cameraOffset.y=Math.round((this.sprite.cameraOffset.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY):(this.sprite.x=Math.round((this.sprite.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.y=Math.round((this.sprite.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY)),this.sprite.events.onDragStop$dispatch(this.sprite,e),!1===this.checkPointerOver(e)&&this._pointerOutHandler(e)},setDragLock:function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this.allowHorizontalDrag=e,this.allowVerticalDrag=t},enableSnap:function(e,t,i,n,r,o){void 0===i&&(i=!0),void 0===n&&(n=!1),void 0===r&&(r=0),void 0===o&&(o=0),this.snapX=e,this.snapY=t,this.snapOffsetX=r,this.snapOffsetY=o,this.snapOnDrag=i,this.snapOnRelease=n},disableSnap:function(){this.snapOnDrag=!1,this.snapOnRelease=!1},checkBoundsRect:function(){this.sprite.fixedToCamera?(this.sprite.cameraOffset.x<this.boundsRect.left?this.sprite.cameraOffset.x=this.boundsRect.left:this.sprite.cameraOffset.x+this.sprite.width>this.boundsRect.right&&(this.sprite.cameraOffset.x=this.boundsRect.right-this.sprite.width),this.sprite.cameraOffset.y<this.boundsRect.top?this.sprite.cameraOffset.y=this.boundsRect.top:this.sprite.cameraOffset.y+this.sprite.height>this.boundsRect.bottom&&(this.sprite.cameraOffset.y=this.boundsRect.bottom-this.sprite.height)):(this.sprite.left<this.boundsRect.left?this.sprite.x=this.boundsRect.x+this.sprite.offsetX:this.sprite.right>this.boundsRect.right&&(this.sprite.x=this.boundsRect.right-(this.sprite.width-this.sprite.offsetX)),this.sprite.top<this.boundsRect.top?this.sprite.y=this.boundsRect.top+this.sprite.offsetY:this.sprite.bottom>this.boundsRect.bottom&&(this.sprite.y=this.boundsRect.bottom-(this.sprite.height-this.sprite.offsetY)))},checkBoundsSprite:function(){this.sprite.fixedToCamera&&this.boundsSprite.fixedToCamera?(this.sprite.cameraOffset.x<this.boundsSprite.cameraOffset.x?this.sprite.cameraOffset.x=this.boundsSprite.cameraOffset.x:this.sprite.cameraOffset.x+this.sprite.width>this.boundsSprite.cameraOffset.x+this.boundsSprite.width&&(this.sprite.cameraOffset.x=this.boundsSprite.cameraOffset.x+this.boundsSprite.width-this.sprite.width),this.sprite.cameraOffset.y<this.boundsSprite.cameraOffset.y?this.sprite.cameraOffset.y=this.boundsSprite.cameraOffset.y:this.sprite.cameraOffset.y+this.sprite.height>this.boundsSprite.cameraOffset.y+this.boundsSprite.height&&(this.sprite.cameraOffset.y=this.boundsSprite.cameraOffset.y+this.boundsSprite.height-this.sprite.height)):(this.sprite.left<this.boundsSprite.left?this.sprite.x=this.boundsSprite.left+this.sprite.offsetX:this.sprite.right>this.boundsSprite.right&&(this.sprite.x=this.boundsSprite.right-(this.sprite.width-this.sprite.offsetX)),this.sprite.top<this.boundsSprite.top?this.sprite.y=this.boundsSprite.top+this.sprite.offsetY:this.sprite.bottom>this.boundsSprite.bottom&&(this.sprite.y=this.boundsSprite.bottom-(this.sprite.height-this.sprite.offsetY)))}},U.InputHandler.prototype.constructor=U.InputHandler,U.Gamepad=function(e){this.game=e,this._gamepadIndexMap={},this._rawPads=[],this._active=!1,this.enabled=!0,this._gamepadSupportAvailable=!!navigator.webkitGetGamepads||!!navigator.webkitGamepads||-1!==navigator.userAgent.indexOf("Firefox/")||!!navigator.getGamepads,this._prevRawGamepadTypes=[],this._prevTimestamps=[],(this.callbackContext=this).onConnectCallback=null,this.onDisconnectCallback=null,this.onDownCallback=null,this.onUpCallback=null,this.onAxisCallback=null,this.onFloatCallback=null,this._ongamepadconnected=null,this._gamepaddisconnected=null,this._gamepads=[new U.SinglePad(e,this),new U.SinglePad(e,this),new U.SinglePad(e,this),new U.SinglePad(e,this)]},U.Gamepad.prototype={addCallbacks:function(e,t){void 0!==t&&(this.onConnectCallback="function"==typeof t.onConnect?t.onConnect:this.onConnectCallback,this.onDisconnectCallback="function"==typeof t.onDisconnect?t.onDisconnect:this.onDisconnectCallback,this.onDownCallback="function"==typeof t.onDown?t.onDown:this.onDownCallback,this.onUpCallback="function"==typeof t.onUp?t.onUp:this.onUpCallback,this.onAxisCallback="function"==typeof t.onAxis?t.onAxis:this.onAxisCallback,this.onFloatCallback="function"==typeof t.onFloat?t.onFloat:this.onFloatCallback,this.callbackContext=e)},start:function(){if(!this._active){this._active=!0;var t=this;this._onGamepadConnected=function(e){return t.onGamepadConnected(e)},this._onGamepadDisconnected=function(e){return t.onGamepadDisconnected(e)},window.addEventListener("gamepadconnected",this._onGamepadConnected,!1),window.addEventListener("gamepaddisconnected",this._onGamepadDisconnected,!1)}},onGamepadConnected:function(e){var t=e.gamepad;this._rawPads.push(t),this._gamepads[t.index].connect(t)},onGamepadDisconnected:function(e){var t=e.gamepad;for(var i in this._rawPads)this._rawPads[i].index===t.index&&this._rawPads.splice(i,1);this._gamepads[t.index].disconnect()},update:function(){this._pollGamepads(),this.pad1.pollStatus(),this.pad2.pollStatus(),this.pad3.pollStatus(),this.pad4.pollStatus()},_pollGamepads:function(){if(this._active){if(navigator.getGamepads)var e=navigator.getGamepads();else if(navigator.webkitGetGamepads)e=navigator.webkitGetGamepads();else if(navigator.webkitGamepads)e=navigator.webkitGamepads();if(e){for(var t=!(this._rawPads=[]),i=0;i<e.length&&(typeof e[i]!==this._prevRawGamepadTypes[i]&&(t=!0,this._prevRawGamepadTypes[i]=typeof e[i]),e[i]&&this._rawPads.push(e[i]),3!==i);i++);for(var n=0;n<this._gamepads.length;n++)this._gamepads[n]._rawPad=this._rawPads[n];if(t){for(var r,o={rawIndices:{},padIndices:{}},a=0;a<this._gamepads.length;a++)if((r=this._gamepads[a]).connected)for(var s=0;s<this._rawPads.length;s++)this._rawPads[s].index===r.index&&(o.rawIndices[r.index]=!0,o.padIndices[a]=!0);for(var p=0;p<this._gamepads.length;p++)if(r=this._gamepads[p],!o.padIndices[p]){this._rawPads.length<1&&r.disconnect();for(var l=0;l<this._rawPads.length&&!o.padIndices[p];l++){var h=this._rawPads[l];if(h){if(o.rawIndices[h.index]){r.disconnect();continue}r.connect(h),o.rawIndices[h.index]=!0,o.padIndices[p]=!0}else r.disconnect()}}}}}},setDeadZones:function(e){for(var t=0;t<this._gamepads.length;t++)this._gamepads[t].deadZone=e},stop:function(){this._active=!1,window.removeEventListener("gamepadconnected",this._onGamepadConnected),window.removeEventListener("gamepaddisconnected",this._onGamepadDisconnected)},reset:function(){this.update();for(var e=0;e<this._gamepads.length;e++)this._gamepads[e].reset()},justPressed:function(e,t){for(var i=0;i<this._gamepads.length;i++)if(!0===this._gamepads[i].justPressed(e,t))return!0;return!1},justReleased:function(e,t){for(var i=0;i<this._gamepads.length;i++)if(!0===this._gamepads[i].justReleased(e,t))return!0;return!1},isDown:function(e){for(var t=0;t<this._gamepads.length;t++)if(!0===this._gamepads[t].isDown(e))return!0;return!1},destroy:function(){this.stop();for(var e=0;e<this._gamepads.length;e++)this._gamepads[e].destroy()}},U.Gamepad.prototype.constructor=U.Gamepad,Object.defineProperty(U.Gamepad.prototype,"active",{get:function(){return this._active}}),Object.defineProperty(U.Gamepad.prototype,"supported",{get:function(){return this._gamepadSupportAvailable}}),Object.defineProperty(U.Gamepad.prototype,"padsConnected",{get:function(){return this._rawPads.length}}),Object.defineProperty(U.Gamepad.prototype,"pad1",{get:function(){return this._gamepads[0]}}),Object.defineProperty(U.Gamepad.prototype,"pad2",{get:function(){return this._gamepads[1]}}),Object.defineProperty(U.Gamepad.prototype,"pad3",{get:function(){return this._gamepads[2]}}),Object.defineProperty(U.Gamepad.prototype,"pad4",{get:function(){return this._gamepads[3]}}),U.Gamepad.BUTTON_0=0,U.Gamepad.BUTTON_1=1,U.Gamepad.BUTTON_2=2,U.Gamepad.BUTTON_3=3,U.Gamepad.BUTTON_4=4,U.Gamepad.BUTTON_5=5,U.Gamepad.BUTTON_6=6,U.Gamepad.BUTTON_7=7,U.Gamepad.BUTTON_8=8,U.Gamepad.BUTTON_9=9,U.Gamepad.BUTTON_10=10,U.Gamepad.BUTTON_11=11,U.Gamepad.BUTTON_12=12,U.Gamepad.BUTTON_13=13,U.Gamepad.BUTTON_14=14,U.Gamepad.BUTTON_15=15,U.Gamepad.AXIS_0=0,U.Gamepad.AXIS_1=1,U.Gamepad.AXIS_2=2,U.Gamepad.AXIS_3=3,U.Gamepad.AXIS_4=4,U.Gamepad.AXIS_5=5,U.Gamepad.AXIS_6=6,U.Gamepad.AXIS_7=7,U.Gamepad.AXIS_8=8,U.Gamepad.AXIS_9=9,U.Gamepad.XBOX360_A=0,U.Gamepad.XBOX360_B=1,U.Gamepad.XBOX360_X=2,U.Gamepad.XBOX360_Y=3,U.Gamepad.XBOX360_LEFT_BUMPER=4,U.Gamepad.XBOX360_RIGHT_BUMPER=5,U.Gamepad.XBOX360_LEFT_TRIGGER=6,U.Gamepad.XBOX360_RIGHT_TRIGGER=7,U.Gamepad.XBOX360_BACK=8,U.Gamepad.XBOX360_START=9,U.Gamepad.XBOX360_STICK_LEFT_BUTTON=10,U.Gamepad.XBOX360_STICK_RIGHT_BUTTON=11,U.Gamepad.XBOX360_DPAD_LEFT=14,U.Gamepad.XBOX360_DPAD_RIGHT=15,U.Gamepad.XBOX360_DPAD_UP=12,U.Gamepad.XBOX360_DPAD_DOWN=13,U.Gamepad.XBOX360_STICK_LEFT_X=0,U.Gamepad.XBOX360_STICK_LEFT_Y=1,U.Gamepad.XBOX360_STICK_RIGHT_X=2,U.Gamepad.XBOX360_STICK_RIGHT_Y=3,U.Gamepad.PS3XC_X=0,U.Gamepad.PS3XC_CIRCLE=1,U.Gamepad.PS3XC_SQUARE=2,U.Gamepad.PS3XC_TRIANGLE=3,U.Gamepad.PS3XC_L1=4,U.Gamepad.PS3XC_R1=5,U.Gamepad.PS3XC_L2=6,U.Gamepad.PS3XC_R2=7,U.Gamepad.PS3XC_SELECT=8,U.Gamepad.PS3XC_START=9,U.Gamepad.PS3XC_STICK_LEFT_BUTTON=10,U.Gamepad.PS3XC_STICK_RIGHT_BUTTON=11,U.Gamepad.PS3XC_DPAD_UP=12,U.Gamepad.PS3XC_DPAD_DOWN=13,U.Gamepad.PS3XC_DPAD_LEFT=14,U.Gamepad.PS3XC_DPAD_RIGHT=15,U.Gamepad.PS3XC_STICK_LEFT_X=0,U.Gamepad.PS3XC_STICK_LEFT_Y=1,U.Gamepad.PS3XC_STICK_RIGHT_X=2,U.Gamepad.PS3XC_STICK_RIGHT_Y=3,U.SinglePad=function(e,t){this.game=e,this.index=null,this.connected=!1,(this.callbackContext=this).onConnectCallback=null,this.onDisconnectCallback=null,this.onDownCallback=null,this.onUpCallback=null,this.onAxisCallback=null,this.onFloatCallback=null,this.deadZone=.26,this._padParent=t,this._rawPad=null,this._prevTimestamp=null,this._buttons=[],this._buttonsLen=0,this._axes=[],this._axesLen=0},U.SinglePad.prototype={addCallbacks:function(e,t){void 0!==t&&(this.onConnectCallback="function"==typeof t.onConnect?t.onConnect:this.onConnectCallback,this.onDisconnectCallback="function"==typeof t.onDisconnect?t.onDisconnect:this.onDisconnectCallback,this.onDownCallback="function"==typeof t.onDown?t.onDown:this.onDownCallback,this.onUpCallback="function"==typeof t.onUp?t.onUp:this.onUpCallback,this.onAxisCallback="function"==typeof t.onAxis?t.onAxis:this.onAxisCallback,this.onFloatCallback="function"==typeof t.onFloat?t.onFloat:this.onFloatCallback,this.callbackContext=e)},getButton:function(e){return this._buttons[e]?this._buttons[e]:null},pollStatus:function(){if(this.connected&&this.game.input.enabled&&this.game.input.gamepad.enabled&&(!this._rawPad.timestamp||this._rawPad.timestamp!==this._prevTimestamp)){for(var e=0;e<this._buttonsLen;e++){var t=isNaN(this._rawPad.buttons[e])?this._rawPad.buttons[e].value:this._rawPad.buttons[e];t!==this._buttons[e].value&&(1===t?this.processButtonDown(e,t):0===t?this.processButtonUp(e,t):this.processButtonFloat(e,t))}for(var i=0;i<this._axesLen;i++){var n=this._rawPad.axes[i];0<n&&n>this.deadZone||n<0&&n<-this.deadZone?this.processAxisChange(i,n):this.processAxisChange(i,0)}this._prevTimestamp=this._rawPad.timestamp}},connect:function(e){var t=!this.connected;this.connected=!0,this.index=e.index,this._rawPad=e,this._buttons=[],this._buttonsLen=e.buttons.length,this._axes=[],this._axesLen=e.axes.length;for(var i=0;i<this._axesLen;i++)this._axes[i]=e.axes[i];for(var n in e.buttons)n=parseInt(n,10),this._buttons[n]=new U.DeviceButton(this,n);t&&this._padParent.onConnectCallback&&this._padParent.onConnectCallback.call(this._padParent.callbackContext,this.index),t&&this.onConnectCallback&&this.onConnectCallback.call(this.callbackContext)},disconnect:function(){var e=this.connected,t=this.index;this.connected=!1,this.index=null,this._rawPad=void 0;for(var i=0;i<this._buttonsLen;i++)this._buttons[i].destroy();this._buttons=[],this._buttonsLen=0,this._axes=[],this._axesLen=0,e&&this._padParent.onDisconnectCallback&&this._padParent.onDisconnectCallback.call(this._padParent.callbackContext,t),e&&this.onDisconnectCallback&&this.onDisconnectCallback.call(this.callbackContext)},destroy:function(){this._rawPad=void 0;for(var e=0;e<this._buttonsLen;e++)this._buttons[e].destroy();this._buttons=[],this._buttonsLen=0,this._axes=[],this._axesLen=0,this.onConnectCallback=null,this.onDisconnectCallback=null,this.onDownCallback=null,this.onUpCallback=null,this.onAxisCallback=null,this.onFloatCallback=null},processAxisChange:function(e,t){this._axes[e]!==t&&(this._axes[e]=t,this._padParent.onAxisCallback&&this._padParent.onAxisCallback.call(this._padParent.callbackContext,this,e,t),this.onAxisCallback&&this.onAxisCallback.call(this.callbackContext,this,e,t))},processButtonDown:function(e,t){this._buttons[e]&&this._buttons[e].start(null,t),this._padParent.onDownCallback&&this._padParent.onDownCallback.call(this._padParent.callbackContext,e,t,this.index),this.onDownCallback&&this.onDownCallback.call(this.callbackContext,e,t)},processButtonUp:function(e,t){this._padParent.onUpCallback&&this._padParent.onUpCallback.call(this._padParent.callbackContext,e,t,this.index),this.onUpCallback&&this.onUpCallback.call(this.callbackContext,e,t),this._buttons[e]&&this._buttons[e].stop(null,t)},processButtonFloat:function(e,t){this._padParent.onFloatCallback&&this._padParent.onFloatCallback.call(this._padParent.callbackContext,e,t,this.index),this.onFloatCallback&&this.onFloatCallback.call(this.callbackContext,e,t),this._buttons[e]&&this._buttons[e].padFloat(t)},axis:function(e){return!!this._axes[e]&&this._axes[e]},isDown:function(e){return!!this._buttons[e]&&this._buttons[e].isDown},isUp:function(e){return!!this._buttons[e]&&this._buttons[e].isUp},justReleased:function(e,t){if(this._buttons[e])return this._buttons[e].justReleased(t)},justPressed:function(e,t){if(this._buttons[e])return this._buttons[e].justPressed(t)},buttonValue:function(e){return this._buttons[e]?this._buttons[e].value:null},reset:function(){for(var e=0;e<this._axes.length;e++)this._axes[e]=0}},U.SinglePad.prototype.constructor=U.SinglePad,U.Key=function(e,t){this.game=e,this._enabled=!0,this.event=null,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.timeDown=0,this.duration=0,this.timeUp=-2500,this.repeats=0,this.keyCode=t,this.onDown=new U.Signal,this.onHoldCallback=null,this.onHoldContext=null,this.onUp=new U.Signal,this._justDown=!1,this._justUp=!1},U.Key.prototype={update:function(){this._enabled&&this.isDown&&(this.duration=this.game.time.time-this.timeDown,this.repeats++,this.onHoldCallback&&this.onHoldCallback.call(this.onHoldContext,this))},processKeyDown:function(e){this._enabled&&(this.event=e,this.isDown||(this.altKey=e.altKey,this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.isDown=!0,this.isUp=!1,this.timeDown=this.game.time.time,this.duration=0,this.repeats=0,this._justDown=!0,this.onDown.dispatch(this)))},processKeyUp:function(e){this._enabled&&(this.event=e,this.isUp||(this.isDown=!1,this.isUp=!0,this.timeUp=this.game.time.time,this.duration=this.game.time.time-this.timeDown,this._justUp=!0,this.onUp.dispatch(this)))},reset:function(e){void 0===e&&(e=!0),this.isDown=!1,this.isUp=!0,this.timeUp=this.game.time.time,this.duration=0,this._enabled=!0,this._justDown=!1,this._justUp=!1,e&&(this.onDown.removeAll(),this.onUp.removeAll(),this.onHoldCallback=null,this.onHoldContext=null)},downDuration:function(e){return void 0===e&&(e=50),this.isDown&&this.duration<e},upDuration:function(e){return void 0===e&&(e=50),!this.isDown&&this.game.time.time-this.timeUp<e}},Object.defineProperty(U.Key.prototype,"justDown",{get:function(){var e=this._justDown;return this._justDown=!1,e}}),Object.defineProperty(U.Key.prototype,"justUp",{get:function(){var e=this._justUp;return this._justUp=!1,e}}),Object.defineProperty(U.Key.prototype,"enabled",{get:function(){return this._enabled},set:function(e){(e=!!e)!==this._enabled&&(e||this.reset(!1),this._enabled=e)}}),U.Key.prototype.constructor=U.Key,U.Keyboard=function(e){this.game=e,this.enabled=!0,this.event=null,this.pressEvent=null,(this.callbackContext=this).onDownCallback=null,this.onPressCallback=null,this.onUpCallback=null,this._keys=[],this._capture=[],this._onKeyDown=null,this._onKeyPress=null,this._onKeyUp=null,this._i=0,this._k=0},U.Keyboard.prototype={addCallbacks:function(e,t,i,n){this.callbackContext=e,null!=t&&(this.onDownCallback=t),null!=i&&(this.onUpCallback=i),null!=n&&(this.onPressCallback=n)},addKey:function(e){return this._keys[e]||(this._keys[e]=new U.Key(this.game,e),this.addKeyCapture(e)),this._keys[e]},addKeys:function(e){var t={};for(var i in e)t[i]=this.addKey(e[i]);return t},removeKey:function(e){this._keys[e]&&(this._keys[e]=null,this.removeKeyCapture(e))},createCursorKeys:function(){return this.addKeys({up:U.KeyCode.UP,down:U.KeyCode.DOWN,left:U.KeyCode.LEFT,right:U.KeyCode.RIGHT})},start:function(){if(!this.game.device.cocoonJS&&null===this._onKeyDown){var t=this;this._onKeyDown=function(e){return t.processKeyDown(e)},this._onKeyUp=function(e){return t.processKeyUp(e)},this._onKeyPress=function(e){return t.processKeyPress(e)},window.addEventListener("keydown",this._onKeyDown,!1),window.addEventListener("keyup",this._onKeyUp,!1),window.addEventListener("keypress",this._onKeyPress,!1)}},stop:function(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),window.removeEventListener("keypress",this._onKeyPress),this._onKeyDown=null,this._onKeyUp=null,this._onKeyPress=null},destroy:function(){this.stop(),this.clearCaptures(),this._keys.length=0,this._i=0},addKeyCapture:function(e){if("object"==typeof e)for(var t in e)this._capture[e[t]]=!0;else this._capture[e]=!0},removeKeyCapture:function(e){delete this._capture[e]},clearCaptures:function(){this._capture={}},update:function(){for(this._i=this._keys.length;this._i--;)this._keys[this._i]&&this._keys[this._i].update()},processKeyDown:function(e){if(this.event=e,this.game.input.enabled&&this.enabled){var t=e.keyCode;this._capture[t]&&e.preventDefault(),this._keys[t]||(this._keys[t]=new U.Key(this.game,t)),this._keys[t].processKeyDown(e),this._k=t,this.onDownCallback&&this.onDownCallback.call(this.callbackContext,e)}},processKeyPress:function(e){this.pressEvent=e,this.game.input.enabled&&this.enabled&&this.onPressCallback&&this.onPressCallback.call(this.callbackContext,String.fromCharCode(e.charCode),e)},processKeyUp:function(e){if(this.event=e,this.game.input.enabled&&this.enabled){var t=e.keyCode;this._capture[t]&&e.preventDefault(),this._keys[t]||(this._keys[t]=new U.Key(this.game,t)),this._keys[t].processKeyUp(e),this.onUpCallback&&this.onUpCallback.call(this.callbackContext,e)}},reset:function(e){void 0===e&&(e=!0),this.event=null;for(var t=this._keys.length;t--;)this._keys[t]&&this._keys[t].reset(e)},downDuration:function(e,t){return this._keys[e]?this._keys[e].downDuration(t):null},upDuration:function(e,t){return this._keys[e]?this._keys[e].upDuration(t):null},isDown:function(e){return this._keys[e]?this._keys[e].isDown:null}},Object.defineProperty(U.Keyboard.prototype,"lastChar",{get:function(){return 32===this.event.charCode?"":String.fromCharCode(this.pressEvent.charCode)}}),Object.defineProperty(U.Keyboard.prototype,"lastKey",{get:function(){return this._keys[this._k]}}),U.Keyboard.prototype.constructor=U.Keyboard,U.KeyCode={A:"A".charCodeAt(0),B:"B".charCodeAt(0),C:"C".charCodeAt(0),D:"D".charCodeAt(0),E:"E".charCodeAt(0),F:"F".charCodeAt(0),G:"G".charCodeAt(0),H:"H".charCodeAt(0),I:"I".charCodeAt(0),J:"J".charCodeAt(0),K:"K".charCodeAt(0),L:"L".charCodeAt(0),M:"M".charCodeAt(0),N:"N".charCodeAt(0),O:"O".charCodeAt(0),P:"P".charCodeAt(0),Q:"Q".charCodeAt(0),R:"R".charCodeAt(0),S:"S".charCodeAt(0),T:"T".charCodeAt(0),U:"U".charCodeAt(0),V:"V".charCodeAt(0),W:"W".charCodeAt(0),X:"X".charCodeAt(0),Y:"Y".charCodeAt(0),Z:"Z".charCodeAt(0),ZERO:"0".charCodeAt(0),ONE:"1".charCodeAt(0),TWO:"2".charCodeAt(0),THREE:"3".charCodeAt(0),FOUR:"4".charCodeAt(0),FIVE:"5".charCodeAt(0),SIX:"6".charCodeAt(0),SEVEN:"7".charCodeAt(0),EIGHT:"8".charCodeAt(0),NINE:"9".charCodeAt(0),NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_ADD:107,NUMPAD_ENTER:108,NUMPAD_SUBTRACT:109,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,COLON:186,EQUALS:187,COMMA:188,UNDERSCORE:189,PERIOD:190,QUESTION_MARK:191,TILDE:192,OPEN_BRACKET:219,BACKWARD_SLASH:220,CLOSED_BRACKET:221,QUOTES:222,BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,CAPS_LOCK:20,ESC:27,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS:43,MINUS:44,INSERT:45,DELETE:46,HELP:47,NUM_LOCK:144},U.KeyCode)U.KeyCode.hasOwnProperty(i)&&!i.match(/[a-z]/)&&(U.Keyboard[i]=U.KeyCode[i]);for(var r in U.Component=function(){},U.Component.Angle=function(){},U.Component.Angle.prototype={angle:{get:function(){return U.Math.wrapAngle(U.Math.radToDeg(this.rotation))},set:function(e){this.rotation=U.Math.degToRad(U.Math.wrapAngle(e))}}},U.Component.Animation=function(){},U.Component.Animation.prototype={play:function(e,t,i,n){if(this.animations)return this.animations.play(e,t,i,n)}},U.Component.AutoCull=function(){},U.Component.AutoCull.prototype={autoCull:!1,inCamera:{get:function(){return this.autoCull||this.checkWorldBounds||(this._bounds.copyFrom(this.getBounds()),this._bounds.x+=this.game.camera.view.x,this._bounds.y+=this.game.camera.view.y),this.game.world.camera.view.intersects(this._bounds)}}},U.Component.Bounds=function(){},U.Component.Bounds.prototype={offsetX:{get:function(){return this.anchor.x*this.width}},offsetY:{get:function(){return this.anchor.y*this.height}},centerX:{get:function(){return this.x-this.offsetX+.5*this.width},set:function(e){this.x=e+this.offsetX-.5*this.width}},centerY:{get:function(){return this.y-this.offsetY+.5*this.height},set:function(e){this.y=e+this.offsetY-.5*this.height}},left:{get:function(){return this.x-this.offsetX},set:function(e){this.x=e+this.offsetX}},right:{get:function(){return this.x+this.width-this.offsetX},set:function(e){this.x=e-this.width+this.offsetX}},top:{get:function(){return this.y-this.offsetY},set:function(e){this.y=e+this.offsetY}},bottom:{get:function(){return this.y+this.height-this.offsetY},set:function(e){this.y=e-this.height+this.offsetY}},alignIn:function(e,t,i,n){switch(void 0===i&&(i=0),void 0===n&&(n=0),t){default:case U.TOP_LEFT:this.left=e.left-i,this.top=e.top-n;break;case U.TOP_CENTER:this.centerX=e.centerX+i,this.top=e.top-n;break;case U.TOP_RIGHT:this.right=e.right+i,this.top=e.top-n;break;case U.LEFT_CENTER:this.left=e.left-i,this.centerY=e.centerY+n;break;case U.CENTER:this.centerX=e.centerX+i,this.centerY=e.centerY+n;break;case U.RIGHT_CENTER:this.right=e.right+i,this.centerY=e.centerY+n;break;case U.BOTTOM_LEFT:this.left=e.left-i,this.bottom=e.bottom+n;break;case U.BOTTOM_CENTER:this.centerX=e.centerX+i,this.bottom=e.bottom+n;break;case U.BOTTOM_RIGHT:this.right=e.right+i,this.bottom=e.bottom+n}return this},alignTo:function(e,t,i,n){switch(void 0===i&&(i=0),void 0===n&&(n=0),t){default:case U.TOP_LEFT:this.left=e.left-i,this.bottom=e.top-n;break;case U.TOP_CENTER:this.centerX=e.centerX+i,this.bottom=e.top-n;break;case U.TOP_RIGHT:this.right=e.right+i,this.bottom=e.top-n;break;case U.LEFT_TOP:this.right=e.left-i,this.top=e.top-n;break;case U.LEFT_CENTER:this.right=e.left-i,this.centerY=e.centerY+n;break;case U.LEFT_BOTTOM:this.right=e.left-i,this.bottom=e.bottom+n;break;case U.RIGHT_TOP:this.left=e.right+i,this.top=e.top-n;break;case U.RIGHT_CENTER:this.left=e.right+i,this.centerY=e.centerY+n;break;case U.RIGHT_BOTTOM:this.left=e.right+i,this.bottom=e.bottom+n;break;case U.BOTTOM_LEFT:this.left=e.left-i,this.top=e.bottom+n;break;case U.BOTTOM_CENTER:this.centerX=e.centerX+i,this.top=e.bottom+n;break;case U.BOTTOM_RIGHT:this.right=e.right+i,this.top=e.bottom+n}return this}},U.Group.prototype.alignIn=U.Component.Bounds.prototype.alignIn,U.Group.prototype.alignTo=U.Component.Bounds.prototype.alignTo,U.Component.BringToTop=function(){},U.Component.BringToTop.prototype.bringToTop=function(){return this.parent&&this.parent.bringToTop(this),this},U.Component.BringToTop.prototype.sendToBack=function(){return this.parent&&this.parent.sendToBack(this),this},U.Component.BringToTop.prototype.moveUp=function(){return this.parent&&this.parent.moveUp(this),this},U.Component.BringToTop.prototype.moveDown=function(){return this.parent&&this.parent.moveDown(this),this},U.Component.Core=function(){},U.Component.Core.install=function(e){U.Utils.mixinPrototype(this,U.Component.Core.prototype),this.components={};for(var t=0;t<e.length;t++){var i=e[t],n=!1;"Destroy"===i&&(n=!0),U.Utils.mixinPrototype(this,U.Component[i].prototype,n),this.components[i]=!0}},U.Component.Core.init=function(e,t,i,n,r){this.game=e,this.key=n,this.data={},this.position.set(t,i),this.world=new U.Point(t,i),this.previousPosition=new U.Point(t,i),this.events=new U.Events(this),this._bounds=new U.Rectangle,this.components.PhysicsBody&&(this.body=this.body),this.components.Animation&&(this.animations=new U.AnimationManager(this)),this.components.LoadTexture&&null!==n&&this.loadTexture(n,r),this.components.FixedToCamera&&(this.cameraOffset=new U.Point(t,i))},U.Component.Core.preUpdate=function(){if(!this.pendingDestroy){if(this.previousPosition.set(this.world.x,this.world.y),this.previousRotation=this.rotation,!this.exists||!this.parent.exists)return!(this.renderOrderID=-1);this.world.setTo(this.game.camera.x+this.worldTransform.tx,this.game.camera.y+this.worldTransform.ty),this.visible&&(this.renderOrderID=this.game.stage.currentRenderOrderID++),this.animations&&this.animations.update(),this.body&&this.body.preUpdate();for(var e=0;e<this.children.length;e++)this.children[e].preUpdate();return!0}this.destroy()},U.Component.Core.prototype={game:null,name:"",data:{},components:{},z:0,events:void 0,animations:void 0,key:"",world:null,debug:!1,previousPosition:null,previousRotation:0,renderOrderID:0,fresh:!0,pendingDestroy:!1,_bounds:null,_exists:!0,exists:{get:function(){return this._exists},set:function(e){e?(this._exists=!0,this.body&&this.body.type===U.Physics.P2JS&&this.body.addToWorld(),this.visible=!0):(this._exists=!1,this.body&&this.body.type===U.Physics.P2JS&&this.body.removeFromWorld(),this.visible=!1)}},update:function(){},postUpdate:function(){this.customRender&&this.key.render(),this.components.PhysicsBody&&U.Component.PhysicsBody.postUpdate.call(this),this.components.FixedToCamera&&U.Component.FixedToCamera.postUpdate.call(this);for(var e=0;e<this.children.length;e++)this.children[e].postUpdate()}},U.Component.Crop=function(){},U.Component.Crop.prototype={cropRect:null,_crop:null,crop:function(e,t){void 0===t&&(t=!1),e?(t&&null!==this.cropRect?this.cropRect.setTo(e.x,e.y,e.width,e.height):t&&null===this.cropRect?this.cropRect=new U.Rectangle(e.x,e.y,e.width,e.height):this.cropRect=e,this.updateCrop()):(this._crop=null,this.cropRect=null,this.resetFrame())},updateCrop:function(){if(this.cropRect){var e=this.texture.crop.x,t=this.texture.crop.y,i=this.texture.crop.width,n=this.texture.crop.height;this._crop=U.Rectangle.clone(this.cropRect,this._crop),this._crop.x+=this._frame.x,this._crop.y+=this._frame.y;var r=Math.max(this._frame.x,this._crop.x),o=Math.max(this._frame.y,this._crop.y),a=Math.min(this._frame.right,this._crop.right)-r,s=Math.min(this._frame.bottom,this._crop.bottom)-o;this.texture.crop.x=r,this.texture.crop.y=o,this.texture.crop.width=a,this.texture.crop.height=s,this.texture.frame.width=Math.min(a,this.cropRect.width),this.texture.frame.height=Math.min(s,this.cropRect.height),this.texture.width=this.texture.frame.width,this.texture.height=this.texture.frame.height,this.texture._updateUvs(),16777215===this.tint||e===r&&t===o&&i===a&&n===s||(this.texture.requiresReTint=!0)}}},U.Component.Delta=function(){},U.Component.Delta.prototype={deltaX:{get:function(){return this.world.x-this.previousPosition.x}},deltaY:{get:function(){return this.world.y-this.previousPosition.y}},deltaZ:{get:function(){return this.rotation-this.previousRotation}}},U.Component.Destroy=function(){},U.Component.Destroy.prototype={destroyPhase:!1,destroy:function(e,t){if(null!==this.game&&!this.destroyPhase){void 0===e&&(e=!0),void 0===t&&(t=!1),this.destroyPhase=!0,this.events&&this.events.onDestroy$dispatch(this),this.parent&&(this.parent instanceof U.Group?this.parent.remove(this):this.parent.removeChild(this)),this.input&&this.input.destroy(),this.animations&&this.animations.destroy(),this.body&&this.body.destroy(),this.events&&this.events.destroy(),this.game.tweens.removeFrom(this);var i=this.children.length;if(e)for(;i--;)this.children[i].destroy(e);else for(;i--;)this.removeChild(this.children[i]);this._crop&&(this._crop=null,this.cropRect=null),this._frame&&(this._frame=null),U.Video&&this.key instanceof U.Video&&this.key.onChangeSource.remove(this.resizeFrame,this),U.BitmapText&&this._glyphs&&(this._glyphs=[]),this.alive=!1,this.exists=!1,this.visible=!1,this.filters=null,this.mask=null,this.game=null,this.data={},this.renderable=!1,this.transformCallback&&(this.transformCallback=null,this.transformCallbackContext=null),this.hitArea=null,this.parent=null,this.stage=null,this.worldTransform=null,this.filterArea=null,this._bounds=null,this._currentBounds=null,this._mask=null,this._destroyCachedSprite(),t&&this.texture.destroy(!0),this.destroyPhase=!1,this.pendingDestroy=!1}}},U.Events=function(e){this.parent=e},U.Events.prototype={destroy:function(){this._parent=null,this._onDestroy&&this._onDestroy.dispose(),this._onAddedToGroup&&this._onAddedToGroup.dispose(),this._onRemovedFromGroup&&this._onRemovedFromGroup.dispose(),this._onRemovedFromWorld&&this._onRemovedFromWorld.dispose(),this._onKilled&&this._onKilled.dispose(),this._onRevived&&this._onRevived.dispose(),this._onEnterBounds&&this._onEnterBounds.dispose(),this._onOutOfBounds&&this._onOutOfBounds.dispose(),this._onInputOver&&this._onInputOver.dispose(),this._onInputOut&&this._onInputOut.dispose(),this._onInputDown&&this._onInputDown.dispose(),this._onInputUp&&this._onInputUp.dispose(),this._onDragStart&&this._onDragStart.dispose(),this._onDragUpdate&&this._onDragUpdate.dispose(),this._onDragStop&&this._onDragStop.dispose(),this._onAnimationStart&&this._onAnimationStart.dispose(),this._onAnimationComplete&&this._onAnimationComplete.dispose(),this._onAnimationLoop&&this._onAnimationLoop.dispose()},onAddedToGroup:null,onRemovedFromGroup:null,onRemovedFromWorld:null,onDestroy:null,onKilled:null,onRevived:null,onOutOfBounds:null,onEnterBounds:null,onInputOver:null,onInputOut:null,onInputDown:null,onInputUp:null,onDragStart:null,onDragUpdate:null,onDragStop:null,onAnimationStart:null,onAnimationComplete:null,onAnimationLoop:null},U.Events.prototype.constructor=U.Events,U.Events.prototype)U.Events.prototype.hasOwnProperty(r)&&0===r.indexOf("on")&&null===U.Events.prototype[r]&&function(e,t){"use strict";Object.defineProperty(U.Events.prototype,e,{get:function(){return this[t]||(this[t]=new U.Signal)}}),U.Events.prototype[e+"$dispatch"]=function(){return this[t]?this[t].dispatch.apply(this[t],arguments):null}}(r,"_"+r);U.Component.FixedToCamera=function(){},U.Component.FixedToCamera.postUpdate=function(){this.fixedToCamera&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y)},U.Component.FixedToCamera.prototype={_fixedToCamera:!1,fixedToCamera:{get:function(){return this._fixedToCamera},set:function(e){e?(this._fixedToCamera=!0,this.cameraOffset.set(this.x,this.y)):this._fixedToCamera=!1}},cameraOffset:new U.Point},U.Component.Health=function(){},U.Component.Health.prototype={health:1,maxHealth:100,damage:function(e){return this.alive&&(this.health-=e,this.health<=0&&this.kill()),this},setHealth:function(e){return this.health=e,this.health>this.maxHealth&&(this.health=this.maxHealth),this},heal:function(e){return this.alive&&(this.health+=e,this.health>this.maxHealth&&(this.health=this.maxHealth)),this}},U.Component.InCamera=function(){},U.Component.InCamera.prototype={inCamera:{get:function(){return this.game.world.camera.view.intersects(this._bounds)}}},U.Component.InputEnabled=function(){},U.Component.InputEnabled.prototype={input:null,inputEnabled:{get:function(){return this.input&&this.input.enabled},set:function(e){e?null===this.input?(this.input=new U.InputHandler(this),this.input.start()):this.input&&!this.input.enabled&&this.input.start():this.input&&this.input.enabled&&this.input.stop()}}},U.Component.InWorld=function(){},U.Component.InWorld.preUpdate=function(){if(this.autoCull||this.checkWorldBounds){if(this._bounds.copyFrom(this.getBounds()),this._bounds.x+=this.game.camera.view.x,this._bounds.y+=this.game.camera.view.y,this.autoCull)if(this.game.world.camera.view.intersects(this._bounds))this.renderable=!0,this.game.world.camera.totalInView++;else if(this.renderable=!1,this.outOfCameraBoundsKill)return this.kill(),!1;if(this.checkWorldBounds)if(this._outOfBoundsFired&&this.game.world.bounds.intersects(this._bounds))this._outOfBoundsFired=!1,this.events.onEnterBounds$dispatch(this);else if(!this._outOfBoundsFired&&!this.game.world.bounds.intersects(this._bounds)&&(this._outOfBoundsFired=!0,this.events.onOutOfBounds$dispatch(this),this.outOfBoundsKill))return this.kill(),!1}return!0},U.Component.InWorld.prototype={checkWorldBounds:!1,outOfBoundsKill:!1,outOfCameraBoundsKill:!1,_outOfBoundsFired:!1,inWorld:{get:function(){return this.game.world.bounds.intersects(this.getBounds())}}},U.Component.LifeSpan=function(){},U.Component.LifeSpan.preUpdate=function(){return!(0<this.lifespan&&(this.lifespan-=this.game.time.physicsElapsedMS,this.lifespan<=0))||(this.kill(),!1)},U.Component.LifeSpan.prototype={alive:!0,lifespan:0,revive:function(e){return void 0===e&&(e=100),this.alive=!0,this.exists=!0,this.visible=!0,"function"==typeof this.setHealth&&this.setHealth(e),this.events&&this.events.onRevived$dispatch(this),this},kill:function(){return this.alive=!1,this.exists=!1,this.visible=!1,this.events&&this.events.onKilled$dispatch(this),this}},U.Component.LoadTexture=function(){},U.Component.LoadTexture.prototype={customRender:!1,_frame:null,loadTexture:function(e,t,i){t=e===U.PENDING_ATLAS?(e=t,0):t||0,(i||void 0===i)&&this.animations&&this.animations.stop(),this.key=e,this.customRender=!1;var n=this.game.cache,r=!0,o=!this.texture.baseTexture.scaleMode;if(U.RenderTexture&&e instanceof U.RenderTexture)this.key=e.key,this.setTexture(e);else if(U.BitmapData&&e instanceof U.BitmapData)this.customRender=!0,this.setTexture(e.texture),r=n.hasFrameData(e.key,U.Cache.BITMAPDATA)?!this.animations.loadFrameData(n.getFrameData(e.key,U.Cache.BITMAPDATA),t):!this.animations.loadFrameData(e.frameData,0);else if(U.Video&&e instanceof U.Video){this.customRender=!0;var a=e.texture.valid;this.setTexture(e.texture),this.setFrame(e.texture.frame.clone()),e.onChangeSource.add(this.resizeFrame,this),this.texture.valid=a}else if(U.Tilemap&&e instanceof U.TilemapLayer)this.setTexture(PIXI.Texture.fromCanvas(e.canvas));else if(e instanceof PIXI.Texture)this.setTexture(e);else{var s=n.getImage(e,!0);this.key=s.key,this.setTexture(new PIXI.Texture(s.base)),this.texture.baseTexture.skipRender="__default"===e,r=!this.animations.loadFrameData(s.frameData,t)}r&&(this._frame=U.Rectangle.clone(this.texture.frame)),o||(this.texture.baseTexture.scaleMode=1)},setFrame:function(e){this._frame=e,this.texture.frame.x=e.x,this.texture.frame.y=e.y,this.texture.frame.width=e.width,this.texture.frame.height=e.height,this.texture.crop.x=e.x,this.texture.crop.y=e.y,this.texture.crop.width=e.width,this.texture.crop.height=e.height,e.trimmed?(this.texture.trim?(this.texture.trim.x=e.spriteSourceSizeX,this.texture.trim.y=e.spriteSourceSizeY,this.texture.trim.width=e.sourceSizeW,this.texture.trim.height=e.sourceSizeH):this.texture.trim={x:e.spriteSourceSizeX,y:e.spriteSourceSizeY,width:e.sourceSizeW,height:e.sourceSizeH},this.texture.width=e.sourceSizeW,this.texture.height=e.sourceSizeH,this.texture.frame.width=e.sourceSizeW,this.texture.frame.height=e.sourceSizeH):!e.trimmed&&this.texture.trim&&(this.texture.trim=null),this.cropRect&&this.updateCrop(),this.texture.requiresReTint=!0,this.texture._updateUvs(),this.tilingTexture&&(this.refreshTexture=!0)},resizeFrame:function(e,t,i){this.texture.frame.resize(t,i),this.texture.setFrame(this.texture.frame)},resetFrame:function(){this._frame&&this.setFrame(this._frame)},frame:{get:function(){return this.animations.frame},set:function(e){this.animations.frame=e}},frameName:{get:function(){return this.animations.frameName},set:function(e){this.animations.frameName=e}}},U.Component.Overlap=function(){},U.Component.Overlap.prototype={overlap:function(e){return U.Rectangle.intersects(this.getBounds(),e.getBounds())}},U.Component.PhysicsBody=function(){},U.Component.PhysicsBody.preUpdate=function(){return this.fresh&&this.exists?(this.world.setTo(this.parent.position.x+this.position.x,this.parent.position.y+this.position.y),this.worldTransform.tx=this.world.x,this.worldTransform.ty=this.world.y,this.previousPosition.set(this.world.x,this.world.y),this.previousRotation=this.rotation,this.body&&this.body.preUpdate(),this.fresh=!1):(this.previousPosition.set(this.world.x,this.world.y),this.previousRotation=this.rotation,!(!this._exists||!this.parent.exists)||!(this.renderOrderID=-1))},U.Component.PhysicsBody.postUpdate=function(){this.exists&&this.body&&this.body.postUpdate()},U.Component.PhysicsBody.prototype={body:null,x:{get:function(){return this.position.x},set:function(e){this.position.x=e,this.body&&!this.body.dirty&&(this.body._reset=!0)}},y:{get:function(){return this.position.y},set:function(e){this.position.y=e,this.body&&!this.body.dirty&&(this.body._reset=!0)}}},U.Component.Reset=function(){},U.Component.Reset.prototype.reset=function(e,t,i){return void 0===i&&(i=1),this.world.set(e,t),this.position.set(e,t),this.fresh=!0,this.exists=!0,this.visible=!0,this.renderable=!0,this.components.InWorld&&(this._outOfBoundsFired=!1),this.components.LifeSpan&&(this.alive=!0,this.health=i),this.components.PhysicsBody&&this.body&&this.body.reset(e,t,!1,!1),this},U.Component.ScaleMinMax=function(){},U.Component.ScaleMinMax.prototype={transformCallback:null,transformCallbackContext:this,scaleMin:null,scaleMax:null,checkTransform:function(e){this.scaleMin&&(e.a<this.scaleMin.x&&(e.a=this.scaleMin.x),e.d<this.scaleMin.y&&(e.d=this.scaleMin.y)),this.scaleMax&&(e.a>this.scaleMax.x&&(e.a=this.scaleMax.x),e.d>this.scaleMax.y&&(e.d=this.scaleMax.y))},setScaleMinMax:function(e,t,i,n){void 0===t?t=i=n=e:void 0===i&&(i=n=t,t=e),null===e?this.scaleMin=null:this.scaleMin?this.scaleMin.set(e,t):this.scaleMin=new U.Point(e,t),null===i?this.scaleMax=null:this.scaleMax?this.scaleMax.set(i,n):this.scaleMax=new U.Point(i,n),null===this.scaleMin?this.transformCallback=null:(this.transformCallback=this.checkTransform,this.transformCallbackContext=this)}},U.Component.Smoothed=function(){},U.Component.Smoothed.prototype={smoothed:{get:function(){return!this.texture.baseTexture.scaleMode},set:function(e){e?this.texture&&(this.texture.baseTexture.scaleMode=0):this.texture&&(this.texture.baseTexture.scaleMode=1)}}},U.GameObjectFactory=function(e){this.game=e,this.world=this.game.world},U.GameObjectFactory.prototype={existing:function(e){return this.world.add(e)},weapon:function(e,t,i,n){var r=this.game.plugins.add(U.Weapon);return r.createBullets(e,t,i,n),r},image:function(e,t,i,n,r){return void 0===r&&(r=this.world),r.add(new U.Image(this.game,e,t,i,n))},sprite:function(e,t,i,n,r){return void 0===r&&(r=this.world),r.create(e,t,i,n)},creature:function(e,t,i,n,r){void 0===r&&(r=this.world);var o=new U.Creature(this.game,e,t,i,n);return r.add(o),o},tween:function(e){return this.game.tweens.create(e)},group:function(e,t,i,n,r){return new U.Group(this.game,e,t,i,n,r)},physicsGroup:function(e,t,i,n){return new U.Group(this.game,t,i,n,!0,e)},spriteBatch:function(e,t,i){return void 0===e&&(e=null),void 0===t&&(t="group"),void 0===i&&(i=!1),new U.SpriteBatch(this.game,e,t,i)},audio:function(e,t,i,n){return this.game.sound.add(e,t,i,n)},sound:function(e,t,i,n){return this.game.sound.add(e,t,i,n)},audioSprite:function(e){return this.game.sound.addSprite(e)},tileSprite:function(e,t,i,n,r,o,a){return void 0===a&&(a=this.world),a.add(new U.TileSprite(this.game,e,t,i,n,r,o))},rope:function(e,t,i,n,r,o){return void 0===o&&(o=this.world),o.add(new U.Rope(this.game,e,t,i,n,r))},text:function(e,t,i,n,r){return void 0===r&&(r=this.world),r.add(new U.Text(this.game,e,t,i,n))},button:function(e,t,i,n,r,o,a,s,p,l){return void 0===l&&(l=this.world),l.add(new U.Button(this.game,e,t,i,n,r,o,a,s,p))},graphics:function(e,t,i){return void 0===i&&(i=this.world),i.add(new U.Graphics(this.game,e,t))},emitter:function(e,t,i){return this.game.particles.add(new U.Particles.Arcade.Emitter(this.game,e,t,i))},retroFont:function(e,t,i,n,r,o,a,s,p){return new U.RetroFont(this.game,e,t,i,n,r,o,a,s,p)},bitmapText:function(e,t,i,n,r,o){return void 0===o&&(o=this.world),o.add(new U.BitmapText(this.game,e,t,i,n,r))},tilemap:function(e,t,i,n,r){return new U.Tilemap(this.game,e,t,i,n,r)},renderTexture:function(e,t,i,n){void 0!==i&&""!==i||(i=this.game.rnd.uuid()),void 0===n&&(n=!1);var r=new U.RenderTexture(this.game,e,t,i);return n&&this.game.cache.addRenderTexture(i,r),r},video:function(e,t){return new U.Video(this.game,e,t)},bitmapData:function(e,t,i,n){void 0===n&&(n=!1),void 0!==i&&""!==i||(i=this.game.rnd.uuid());var r=new U.BitmapData(this.game,i,e,t);return n&&this.game.cache.addBitmapData(i,r),r},filter:function(e){var t=Array.prototype.slice.call(arguments,1);return(e=new U.Filter[e](this.game)).init.apply(e,t),e},plugin:function(e){return this.game.plugins.add(e)}},U.GameObjectFactory.prototype.constructor=U.GameObjectFactory,U.GameObjectCreator=function(e){this.game=e,this.world=this.game.world},U.GameObjectCreator.prototype={image:function(e,t,i,n){return new U.Image(this.game,e,t,i,n)},sprite:function(e,t,i,n){return new U.Sprite(this.game,e,t,i,n)},tween:function(e){return new U.Tween(e,this.game,this.game.tweens)},group:function(e,t,i,n,r){return new U.Group(this.game,e,t,i,n,r)},spriteBatch:function(e,t,i){return void 0===t&&(t="group"),void 0===i&&(i=!1),new U.SpriteBatch(this.game,e,t,i)},audio:function(e,t,i,n){return this.game.sound.add(e,t,i,n)},audioSprite:function(e){return this.game.sound.addSprite(e)},sound:function(e,t,i,n){return this.game.sound.add(e,t,i,n)},tileSprite:function(e,t,i,n,r,o){return new U.TileSprite(this.game,e,t,i,n,r,o)},rope:function(e,t,i,n,r){return new U.Rope(this.game,e,t,i,n,r)},text:function(e,t,i,n){return new U.Text(this.game,e,t,i,n)},button:function(e,t,i,n,r,o,a,s,p){return new U.Button(this.game,e,t,i,n,r,o,a,s,p)},graphics:function(e,t){return new U.Graphics(this.game,e,t)},emitter:function(e,t,i){return new U.Particles.Arcade.Emitter(this.game,e,t,i)},retroFont:function(e,t,i,n,r,o,a,s,p){return new U.RetroFont(this.game,e,t,i,n,r,o,a,s,p)},bitmapText:function(e,t,i,n,r,o){return new U.BitmapText(this.game,e,t,i,n,r,o)},tilemap:function(e,t,i,n,r){return new U.Tilemap(this.game,e,t,i,n,r)},renderTexture:function(e,t,i,n){void 0!==i&&""!==i||(i=this.game.rnd.uuid()),void 0===n&&(n=!1);var r=new U.RenderTexture(this.game,e,t,i);return n&&this.game.cache.addRenderTexture(i,r),r},bitmapData:function(e,t,i,n){void 0===n&&(n=!1),void 0!==i&&""!==i||(i=this.game.rnd.uuid());var r=new U.BitmapData(this.game,i,e,t);return n&&this.game.cache.addBitmapData(i,r),r},filter:function(e){var t=Array.prototype.slice.call(arguments,1);return(e=new U.Filter[e](this.game)).init.apply(e,t),e}},U.GameObjectCreator.prototype.constructor=U.GameObjectCreator,U.Sprite=function(e,t,i,n,r){t=t||0,i=i||0,n=n||null,r=r||null,this.type=U.SPRITE,this.physicsType=U.SPRITE,PIXI.Sprite.call(this,U.Cache.DEFAULT),U.Component.Core.init.call(this,e,t,i,n,r)},U.Sprite.prototype=Object.create(PIXI.Sprite.prototype),U.Sprite.prototype.constructor=U.Sprite,U.Component.Core.install.call(U.Sprite.prototype,["Angle","Animation","AutoCull","Bounds","BringToTop","Crop","Delta","Destroy","FixedToCamera","Health","InCamera","InputEnabled","InWorld","LifeSpan","LoadTexture","Overlap","PhysicsBody","Reset","ScaleMinMax","Smoothed"]),U.Sprite.prototype.preUpdatePhysics=U.Component.PhysicsBody.preUpdate,U.Sprite.prototype.preUpdateLifeSpan=U.Component.LifeSpan.preUpdate,U.Sprite.prototype.preUpdateInWorld=U.Component.InWorld.preUpdate,U.Sprite.prototype.preUpdateCore=U.Component.Core.preUpdate,U.Sprite.prototype.preUpdate=function(){return!!(this.preUpdatePhysics()&&this.preUpdateLifeSpan()&&this.preUpdateInWorld())&&this.preUpdateCore()},U.Image=function(e,t,i,n,r){t=t||0,i=i||0,n=n||null,r=r||null,this.type=U.IMAGE,PIXI.Sprite.call(this,U.Cache.DEFAULT),U.Component.Core.init.call(this,e,t,i,n,r)},U.Image.prototype=Object.create(PIXI.Sprite.prototype),U.Image.prototype.constructor=U.Image,U.Component.Core.install.call(U.Image.prototype,["Angle","Animation","AutoCull","Bounds","BringToTop","Crop","Destroy","FixedToCamera","InputEnabled","LifeSpan","LoadTexture","Overlap","Reset","ScaleMinMax","Smoothed"]),U.Image.prototype.preUpdateInWorld=U.Component.InWorld.preUpdate,U.Image.prototype.preUpdateCore=U.Component.Core.preUpdate,U.Image.prototype.preUpdate=function(){return!!this.preUpdateInWorld()&&this.preUpdateCore()},U.Button=function(e,t,i,n,r,o,a,s,p,l){t=t||0,i=i||0,n=n||null,r=r||null,o=o||this,U.Image.call(this,e,t,i,n,s),this.type=U.BUTTON,this.physicsType=U.SPRITE,this._onOverFrame=null,this._onOutFrame=null,this._onDownFrame=null,this._onUpFrame=null,this.onOverSound=null,this.onOutSound=null,this.onDownSound=null,this.onUpSound=null,this.onOverSoundMarker="",this.onOutSoundMarker="",this.onDownSoundMarker="",this.onUpSoundMarker="",this.onInputOver=new U.Signal,this.onInputOut=new U.Signal,this.onInputDown=new U.Signal,this.onInputUp=new U.Signal,this.onOverMouseOnly=!0,this.justReleasedPreventsOver=U.PointerMode.TOUCH,this.freezeFrames=!1,this.forceOut=!1,this.inputEnabled=!0,this.input.start(0,!0),this.input.useHandCursor=!0,this.setFrames(a,s,p,l),null!==r&&this.onInputUp.add(r,o),this.events.onInputOver.add(this.onInputOverHandler,this),this.events.onInputOut.add(this.onInputOutHandler,this),this.events.onInputDown.add(this.onInputDownHandler,this),this.events.onInputUp.add(this.onInputUpHandler,this),this.events.onRemovedFromWorld.add(this.removedFromWorld,this)},U.Button.prototype=Object.create(U.Image.prototype),U.Button.prototype.constructor=U.Button;var p="Over",l="Out",h="Down";U.Button.prototype.clearFrames=function(){this.setFrames(null,null,null,null)},U.Button.prototype.removedFromWorld=function(){this.inputEnabled=!1},U.Button.prototype.setStateFrame=function(e,t,i){var n="_on"+e+"Frame";null!==t?(this[n]=t,i&&this.changeStateFrame(e)):this[n]=null},U.Button.prototype.changeStateFrame=function(e){if(this.freezeFrames)return!1;var t=this["_on"+e+"Frame"];return"string"==typeof t?(this.frameName=t,!0):"number"==typeof t&&(this.frame=t,!0)},U.Button.prototype.setFrames=function(e,t,i,n){this.setStateFrame(p,e,this.input.pointerOver()),this.setStateFrame(l,t,!this.input.pointerOver()),this.setStateFrame(h,i,this.input.pointerDown()),this.setStateFrame("Up",n,this.input.pointerUp())},U.Button.prototype.setStateSound=function(e,t,i){var n="on"+e+"Sound",r="on"+e+"SoundMarker";t instanceof U.Sound||t instanceof U.AudioSprite?(this[n]=t,this[r]="string"==typeof i?i:""):(this[n]=null,this[r]="")},U.Button.prototype.playStateSound=function(e){var t=this["on"+e+"Sound"];if(t){var i=this["on"+e+"SoundMarker"];return t.play(i),!0}return!1},U.Button.prototype.setSounds=function(e,t,i,n,r,o,a,s){this.setStateSound(p,e,t),this.setStateSound(l,r,o),this.setStateSound(h,i,n),this.setStateSound("Up",a,s)},U.Button.prototype.setOverSound=function(e,t){this.setStateSound(p,e,t)},U.Button.prototype.setOutSound=function(e,t){this.setStateSound(l,e,t)},U.Button.prototype.setDownSound=function(e,t){this.setStateSound(h,e,t)},U.Button.prototype.setUpSound=function(e,t){this.setStateSound("Up",e,t)},U.Button.prototype.onInputOverHandler=function(e,t){t.justReleased()&&(this.justReleasedPreventsOver&t.pointerMode)===t.pointerMode||(this.changeStateFrame(p),this.onOverMouseOnly&&!t.isMouse||(this.playStateSound(p),this.onInputOver&&this.onInputOver.dispatch(this,t)))},U.Button.prototype.onInputOutHandler=function(e,t){this.changeStateFrame(l),this.playStateSound(l),this.onInputOut&&this.onInputOut.dispatch(this,t)},U.Button.prototype.onInputDownHandler=function(e,t){this.changeStateFrame(h),this.playStateSound(h),this.onInputDown&&this.onInputDown.dispatch(this,t)},U.Button.prototype.onInputUpHandler=function(e,t,i){(this.playStateSound("Up"),this.onInputUp&&this.onInputUp.dispatch(this,t,i),this.freezeFrames)||(!0===this.forceOut||(this.forceOut&t.pointerMode)===t.pointerMode?this.changeStateFrame(l):this.changeStateFrame("Up")||(i?this.changeStateFrame(p):this.changeStateFrame(l)))},U.SpriteBatch=function(e,t,i,n){null==t&&(t=e.world),PIXI.SpriteBatch.call(this),U.Group.call(this,e,t,i,n),this.type=U.SPRITEBATCH},U.SpriteBatch.prototype=U.Utils.extend(!0,U.SpriteBatch.prototype,PIXI.SpriteBatch.prototype,U.Group.prototype),U.SpriteBatch.prototype.constructor=U.SpriteBatch,U.BitmapData=function(e,t,i,n,r){void 0!==i&&0!==i||(i=256),void 0!==n&&0!==n||(n=256),void 0===r&&(r=!1),this.game=e,this.key=t,this.width=i,this.height=n,this.canvas=U.Canvas.create(this,i,n,null,r),this.context=this.canvas.getContext("2d",{alpha:!0}),this.ctx=this.context,this.smoothProperty=e.renderType===U.CANVAS?e.renderer.renderSession.smoothProperty:U.Canvas.getSmoothingPrefix(this.context),this.imageData=this.context.getImageData(0,0,i,n),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data),this.baseTexture=new PIXI.BaseTexture(this.canvas),this.texture=new PIXI.Texture(this.baseTexture),this.frameData=new U.FrameData,this.textureFrame=this.frameData.addFrame(new U.Frame(0,0,0,i,n,"bitmapData")),this.texture.frame=this.textureFrame,this.type=U.BITMAPDATA,this.disableTextureUpload=!1,this.dirty=!1,this.cls=this.clear,this._image=null,this._pos=new U.Point,this._size=new U.Point,this._scale=new U.Point,this._rotate=0,this._alpha={prev:1,current:1},this._anchor=new U.Point,this._tempR=0,this._tempG=0,this._tempB=0,this._circle=new U.Circle,this._swapCanvas=void 0},U.BitmapData.prototype={move:function(e,t,i){return 0!==e&&this.moveH(e,i),0!==t&&this.moveV(t,i),this},moveH:function(e,t){void 0===t&&(t=!0),void 0===this._swapCanvas&&(this._swapCanvas=PIXI.CanvasPool.create(this,this.width,this.height));var i=this._swapCanvas.getContext("2d"),n=this.height,r=this.canvas;if(i.clearRect(0,0,this.width,this.height),e<0){e=Math.abs(e);var o=this.width-e;t&&i.drawImage(r,0,0,e,n,o,0,e,n),i.drawImage(r,e,0,o,n,0,0,o,n)}else{o=this.width-e;t&&i.drawImage(r,o,0,e,n,0,0,e,n),i.drawImage(r,0,0,o,n,e,0,o,n)}return this.clear(),this.copy(this._swapCanvas)},moveV:function(e,t){void 0===t&&(t=!0),void 0===this._swapCanvas&&(this._swapCanvas=PIXI.CanvasPool.create(this,this.width,this.height));var i=this._swapCanvas.getContext("2d"),n=this.width,r=this.canvas;if(i.clearRect(0,0,this.width,this.height),e<0){e=Math.abs(e);var o=this.height-e;t&&i.drawImage(r,0,0,n,e,0,o,n,e),i.drawImage(r,0,e,n,o,0,0,n,o)}else{o=this.height-e;t&&i.drawImage(r,0,o,n,e,0,0,n,e),i.drawImage(r,0,0,n,o,0,e,n,o)}return this.clear(),this.copy(this._swapCanvas)},add:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)e[t].loadTexture&&e[t].loadTexture(this);else e.loadTexture(this);return this},load:function(e){if("string"==typeof e&&(e=this.game.cache.getImage(e)),e)return this.resize(e.width,e.height),this.cls(),this.draw(e),this.update(),this},clear:function(e,t,i,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=this.width),void 0===n&&(n=this.height),this.context.clearRect(e,t,i,n),this.dirty=!0,this},fill:function(e,t,i,n){return void 0===n&&(n=1),this.context.fillStyle="rgba("+e+","+t+","+i+","+n+")",this.context.fillRect(0,0,this.width,this.height),this.dirty=!0,this},generateTexture:function(e){var t=new Image;t.src=this.canvas.toDataURL("image/png");var i=this.game.cache.addImage(e,"",t);return new PIXI.Texture(i.base)},resize:function(e,t){return e===this.width&&t===this.height||(this.width=e,this.height=t,this.canvas.width=e,this.canvas.height=t,void 0!==this._swapCanvas&&(this._swapCanvas.width=e,this._swapCanvas.height=t),this.baseTexture.width=e,this.baseTexture.height=t,this.textureFrame.width=e,this.textureFrame.height=t,this.texture.width=e,this.texture.height=t,this.texture.crop.width=e,this.texture.crop.height=t,this.update(),this.dirty=!0),this},update:function(e,t,i,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=Math.max(1,this.width)),void 0===n&&(n=Math.max(1,this.height)),this.imageData=this.context.getImageData(e,t,i,n),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this},processPixelRGB:function(e,t,i,n,r,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=this.width),void 0===o&&(o=this.height);for(var a=i+r,s=n+o,p=U.Color.createColor(),l={r:0,g:0,b:0,a:0},h=!1,u=n;u<s;u++)for(var d=i;d<a;d++)U.Color.unpackPixel(this.getPixel32(d,u),p),!1!==(l=e.call(t,p,d,u))&&null!=l&&(this.setPixel32(d,u,l.r,l.g,l.b,l.a,!1),h=!0);return h&&(this.context.putImageData(this.imageData,0,0),this.dirty=!0),this},processPixel:function(e,t,i,n,r,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=this.width),void 0===o&&(o=this.height);for(var a=i+r,s=n+o,p=0,l=0,h=!1,u=n;u<s;u++)for(var d=i;d<a;d++)p=this.getPixel32(d,u),(l=e.call(t,p,d,u))!==p&&(this.pixels[u*this.width+d]=l,h=!0);return h&&(this.context.putImageData(this.imageData,0,0),this.dirty=!0),this},replaceRGB:function(e,t,i,n,r,o,a,s,p){var l=0,h=0,u=this.width,d=this.height,c=U.Color.packPixel(e,t,i,n);void 0!==p&&p instanceof U.Rectangle&&(l=p.x,h=p.y,u=p.width,d=p.height);for(var _=0;_<d;_++)for(var y=0;y<u;y++)this.getPixel32(l+y,h+_)===c&&this.setPixel32(l+y,h+_,r,o,a,s,!1);return this.context.putImageData(this.imageData,0,0),this.dirty=!0,this},setHSL:function(e,t,i,n){var r=e||0===e,o=t||0===t,a=i||0===i;if(r||o||a){void 0===n&&(n=new U.Rectangle(0,0,this.width,this.height));for(var s=U.Color.createColor(),p=n.y;p<n.bottom;p++)for(var l=n.x;l<n.right;l++)U.Color.unpackPixel(this.getPixel32(l,p),s,!0),r&&(s.h=e),o&&(s.s=t),a&&(s.l=i),U.Color.HSLtoRGB(s.h,s.s,s.l,s),this.setPixel32(l,p,s.r,s.g,s.b,s.a,!1);return this.context.putImageData(this.imageData,0,0),this.dirty=!0,this}},shiftHSL:function(e,t,i,n){if(null==e&&(e=!1),null==t&&(t=!1),null==i&&(i=!1),e||t||i){void 0===n&&(n=new U.Rectangle(0,0,this.width,this.height));for(var r=U.Color.createColor(),o=n.y;o<n.bottom;o++)for(var a=n.x;a<n.right;a++)U.Color.unpackPixel(this.getPixel32(a,o),r,!0),e&&(r.h=this.game.math.wrap(r.h+e,0,1)),t&&(r.s=this.game.math.clamp(r.s+t,0,1)),i&&(r.l=this.game.math.clamp(r.l+i,0,1)),U.Color.HSLtoRGB(r.h,r.s,r.l,r),this.setPixel32(a,o,r.r,r.g,r.b,r.a,!1);return this.context.putImageData(this.imageData,0,0),this.dirty=!0,this}},setPixel32:function(e,t,i,n,r,o,a){return void 0===a&&(a=!0),0<=e&&e<=this.width&&0<=t&&t<=this.height&&(U.Device.LITTLE_ENDIAN?this.pixels[t*this.width+e]=o<<24|r<<16|n<<8|i:this.pixels[t*this.width+e]=i<<24|n<<16|r<<8|o,a&&(this.context.putImageData(this.imageData,0,0),this.dirty=!0)),this},setPixel:function(e,t,i,n,r,o){return this.setPixel32(e,t,i,n,r,255,o)},getPixel:function(e,t,i){i||(i=U.Color.createColor());var n=~~(e+t*this.width);return n*=4,i.r=this.data[n],i.g=this.data[++n],i.b=this.data[++n],i.a=this.data[++n],i},getPixel32:function(e,t){if(0<=e&&e<=this.width&&0<=t&&t<=this.height)return this.pixels[t*this.width+e]},getPixelRGB:function(e,t,i,n,r){return U.Color.unpackPixel(this.getPixel32(e,t),i,n,r)},getPixels:function(e){return this.context.getImageData(e.x,e.y,e.width,e.height)},getFirstPixel:function(e){void 0===e&&(e=0);var t=U.Color.createColor(),i=0,n=0,r=1,o=!1;for(1===e?(r=-1,n=this.height):3===e&&(r=-1,i=this.width);U.Color.unpackPixel(this.getPixel32(i,n),t),0===e||1===e?++i===this.width&&(i=0,((n+=r)>=this.height||n<=0)&&(o=!0)):2!==e&&3!==e||++n===this.height&&(n=0,((i+=r)>=this.width||i<=0)&&(o=!0)),0===t.a&&!o;);return t.x=i,t.y=n,t},getBounds:function(e){return void 0===e&&(e=new U.Rectangle),e.x=this.getFirstPixel(2).x,e.x===this.width?e.setTo(0,0,0,0):(e.y=this.getFirstPixel(0).y,e.width=this.getFirstPixel(3).x-e.x+1,e.height=this.getFirstPixel(1).y-e.y+1,e)},addToWorld:function(e,t,i,n,r,o){r=r||1,o=o||1;var a=this.game.add.image(e,t,this);return a.anchor.set(i,n),a.scale.set(r,o),a},copy:function(e,t,i,n,r,o,a,s,p,l,h,u,d,c,_,y,x){if(null==e&&(e=this),(e instanceof U.RenderTexture||e instanceof PIXI.RenderTexture)&&(e=e.getCanvas()),(this._image=e)instanceof U.Sprite||e instanceof U.Image||e instanceof U.Text||e instanceof PIXI.Sprite)this._pos.set(e.texture.crop.x,e.texture.crop.y),this._size.set(e.texture.crop.width,e.texture.crop.height),this._scale.set(e.scale.x,e.scale.y),this._anchor.set(e.anchor.x,e.anchor.y),this._rotate=e.rotation,this._alpha.current=e.alpha,e.texture instanceof U.RenderTexture||e.texture instanceof PIXI.RenderTexture?this._image=e.texture.getCanvas():this._image=e.texture.baseTexture.source,null==o&&(o=e.x),null==a&&(a=e.y),e.texture.trim&&(o+=e.texture.trim.x-e.anchor.x*e.texture.trim.width,a+=e.texture.trim.y-e.anchor.y*e.texture.trim.height),16777215!==e.tint&&(e.cachedTint!==e.tint&&(e.cachedTint=e.tint,e.tintedTexture=PIXI.CanvasTinter.getTintedTexture(e,e.tint)),this._image=e.tintedTexture,this._pos.set(0));else{if(this._pos.set(0),this._scale.set(1),this._anchor.set(0),this._rotate=0,this._alpha.current=1,e instanceof U.BitmapData)this._image=e.canvas;else if("string"==typeof e){if(null===(e=this.game.cache.getImage(e)))return;this._image=e}this._size.set(this._image.width,this._image.height)}if(null==t&&(t=0),null==i&&(i=0),n&&(this._size.x=n),r&&(this._size.y=r),null==o&&(o=t),null==a&&(a=i),null==s&&(s=this._size.x),null==p&&(p=this._size.y),"number"==typeof l&&(this._rotate=l),"number"==typeof h&&(this._anchor.x=h),"number"==typeof u&&(this._anchor.y=u),"number"==typeof d&&(this._scale.x=d),"number"==typeof c&&(this._scale.y=c),"number"==typeof _&&(this._alpha.current=_),void 0===y&&(y=null),void 0===x&&(x=!1),!(this._alpha.current<=0||0===this._scale.x||0===this._scale.y||0===this._size.x||0===this._size.y)){var m=this.context;return this._alpha.prev=m.globalAlpha,m.save(),m.globalAlpha=this._alpha.current,y&&(this.op=y),x&&(o|=0,a|=0),m.translate(o,a),m.scale(this._scale.x,this._scale.y),m.rotate(this._rotate),m.drawImage(this._image,this._pos.x+t,this._pos.y+i,this._size.x,this._size.y,-s*this._anchor.x,-p*this._anchor.y,s,p),m.restore(),m.globalAlpha=this._alpha.prev,this.dirty=!0,this}},copyTransform:function(e,t,i){if(void 0===t&&(t=null),void 0===i&&(i=!1),!e.hasOwnProperty("worldTransform")||!e.worldVisible||0===e.worldAlpha)return this;var n=e.worldTransform;if(this._pos.set(e.texture.crop.x,e.texture.crop.y),this._size.set(e.texture.crop.width,e.texture.crop.height),0===n.a||0===n.d||0===this._size.x||0===this._size.y)return this;e.texture instanceof U.RenderTexture||e.texture instanceof PIXI.RenderTexture?this._image=e.texture.getCanvas():this._image=e.texture.baseTexture.source;var r=n.tx,o=n.ty;e.texture.trim&&(r+=e.texture.trim.x-e.anchor.x*e.texture.trim.width,o+=e.texture.trim.y-e.anchor.y*e.texture.trim.height),16777215!==e.tint&&(e.cachedTint!==e.tint&&(e.cachedTint=e.tint,e.tintedTexture=PIXI.CanvasTinter.getTintedTexture(e,e.tint)),this._image=e.tintedTexture,this._pos.set(0)),i&&(r|=0,o|=0);var a=this.context;return this._alpha.prev=a.globalAlpha,a.save(),a.globalAlpha=this._alpha.current,t&&(this.op=t),a[this.smoothProperty]=e.texture.baseTexture.scaleMode===PIXI.scaleModes.LINEAR,a.setTransform(n.a,n.b,n.c,n.d,r,o),a.drawImage(this._image,this._pos.x,this._pos.y,this._size.x,this._size.y,-this._size.x*e.anchor.x,-this._size.y*e.anchor.y,this._size.x,this._size.y),a.restore(),a.globalAlpha=this._alpha.prev,this.dirty=!0,this},copyRect:function(e,t,i,n,r,o,a){return this.copy(e,t.x,t.y,t.width,t.height,i,n,t.width,t.height,0,0,0,1,1,r,o,a)},draw:function(e,t,i,n,r,o,a){return this.copy(e,null,null,null,null,t,i,n,r,null,null,null,null,null,null,o,a)},drawGroup:function(e,t,i){return 0<e.total&&e.forEachExists(this.drawGroupProxy,this,t,i),this},drawGroupProxy:function(e,t,i){if(e.hasOwnProperty("texture")&&this.copyTransform(e,t,i),e.type===U.GROUP&&e.exists)this.drawGroup(e,t,i);else if(e.hasOwnProperty("children")&&0<e.children.length)for(var n=0;n<e.children.length;n++)e.children[n].exists&&this.copyTransform(e.children[n],t,i)},drawFull:function(e,t,i){if(!1===e.worldVisible||0===e.worldAlpha||e.hasOwnProperty("exists")&&!1===e.exists)return this;if(e.type!==U.GROUP&&e.type!==U.EMITTER&&e.type!==U.BITMAPTEXT)if(e.type===U.GRAPHICS){var n=e.getBounds();this.ctx.save(),this.ctx.translate(n.x,n.y),PIXI.CanvasGraphics.renderGraphics(e,this.ctx),this.ctx.restore()}else this.copy(e,null,null,null,null,e.worldPosition.x,e.worldPosition.y,null,null,e.worldRotation,null,null,e.worldScale.x,e.worldScale.y,e.worldAlpha,t,i);if(e.children)for(var r=0;r<e.children.length;r++)this.drawFull(e.children[r],t,i);return this},shadow:function(e,t,i,n){var r=this.context;return null==e?r.shadowColor="rgba(0,0,0,0)":(r.shadowColor=e,r.shadowBlur=t||5,r.shadowOffsetX=i||10,r.shadowOffsetY=n||10),this},alphaMask:function(e,t,i,n){return null==n?this.draw(t).blendSourceAtop():this.draw(t,n.x,n.y,n.width,n.height).blendSourceAtop(),null==i?this.draw(e).blendReset():this.draw(e,i.x,i.y,i.width,i.height).blendReset(),this},extract:function(n,r,o,a,s,e,p,l,h){return void 0===s&&(s=255),void 0===e&&(e=!1),void 0===p&&(p=r),void 0===l&&(l=o),void 0===h&&(h=a),e&&n.resize(this.width,this.height),this.processPixelRGB(function(e,t,i){return e.r===r&&e.g===o&&e.b===a&&n.setPixel32(t,i,p,l,h,s,!1),!1},this),n.context.putImageData(n.imageData,0,0),n.dirty=!0,n},rect:function(e,t,i,n,r){return void 0!==r&&(this.context.fillStyle=r),this.context.fillRect(e,t,i,n),this},text:function(e,t,i,n,r,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n="14px Courier"),void 0===r&&(r="rgb(255,255,255)"),void 0===o&&(o=!0);var a=this.context,s=a.font;return a.font=n,o&&(a.fillStyle="rgb(0,0,0)",a.fillText(e,t+1,i+1)),a.fillStyle=r,a.fillText(e,t,i),a.font=s,this},circle:function(e,t,i,n){var r=this.context;return void 0!==n&&(r.fillStyle=n),r.beginPath(),r.arc(e,t,i,0,2*Math.PI,!1),r.closePath(),r.fill(),this},line:function(e,t,i,n,r,o){void 0===r&&(r="#fff"),void 0===o&&(o=1);var a=this.context;return a.beginPath(),a.moveTo(e,t),a.lineTo(i,n),a.lineWidth=o,a.strokeStyle=r,a.stroke(),a.closePath(),this},textureLine:function(e,t,i){if(void 0===i&&(i="repeat-x"),"string"!=typeof t||(t=this.game.cache.getImage(t))){var n=e.length;"no-repeat"===i&&n>t.width&&(n=t.width);var r=this.context;return r.fillStyle=r.createPattern(t,i),this._circle=new U.Circle(e.start.x,e.start.y,t.height),this._circle.circumferencePoint(e.angle-1.5707963267948966,!1,this._pos),r.save(),r.translate(this._pos.x,this._pos.y),r.rotate(e.angle),r.fillRect(0,0,n,t.height),r.restore(),this.dirty=!0,this}},render:function(){return!this.disableTextureUpload&&this.dirty&&(this.baseTexture.dirty(),this.dirty=!1),this},destroy:function(){this.frameData.destroy(),this.texture.destroy(!0),PIXI.CanvasPool.remove(this)},blendReset:function(){return this.op="source-over",this},blendSourceOver:function(){return this.op="source-over",this},blendSourceIn:function(){return this.op="source-in",this},blendSourceOut:function(){return this.op="source-out",this},blendSourceAtop:function(){return this.op="source-atop",this},blendDestinationOver:function(){return this.op="destination-over",this},blendDestinationIn:function(){return this.op="destination-in",this},blendDestinationOut:function(){return this.op="destination-out",this},blendDestinationAtop:function(){return this.op="destination-atop",this},blendXor:function(){return this.op="xor",this},blendAdd:function(){return this.op="lighter",this},blendMultiply:function(){return this.op="multiply",this},blendScreen:function(){return this.op="screen",this},blendOverlay:function(){return this.op="overlay",this},blendDarken:function(){return this.op="darken",this},blendLighten:function(){return this.op="lighten",this},blendColorDodge:function(){return this.op="color-dodge",this},blendColorBurn:function(){return this.op="color-burn",this},blendHardLight:function(){return this.op="hard-light",this},blendSoftLight:function(){return this.op="soft-light",this},blendDifference:function(){return this.op="difference",this},blendExclusion:function(){return this.op="exclusion",this},blendHue:function(){return this.op="hue",this},blendSaturation:function(){return this.op="saturation",this},blendColor:function(){return this.op="color",this},blendLuminosity:function(){return this.op="luminosity",this}},Object.defineProperty(U.BitmapData.prototype,"smoothed",{get:function(){U.Canvas.getSmoothingEnabled(this.context)},set:function(e){U.Canvas.setSmoothingEnabled(this.context,e)}}),Object.defineProperty(U.BitmapData.prototype,"op",{get:function(){return this.context.globalCompositeOperation},set:function(e){this.context.globalCompositeOperation=e}}),U.BitmapData.getTransform=function(e,t,i,n,r,o){return"number"!=typeof e&&(e=0),"number"!=typeof t&&(t=0),"number"!=typeof i&&(i=1),"number"!=typeof n&&(n=1),"number"!=typeof r&&(r=0),"number"!=typeof o&&(o=0),{sx:i,sy:n,scaleX:i,scaleY:n,skewX:r,skewY:o,translateX:e,translateY:t,tx:e,ty:t}},U.BitmapData.prototype.constructor=U.BitmapData,PIXI.Graphics=function(){PIXI.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this.blendMode=PIXI.blendModes.NORMAL,this.currentPath=null,this._webGL=[],this.isMask=!1,this.boundsPadding=0,this._localBounds=new PIXI.Rectangle(0,0,1,1),this.dirty=!0,this._boundsDirty=!1,this.webGLDirty=!1,this.cachedSpriteDirty=!1},PIXI.Graphics.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),PIXI.Graphics.prototype.constructor=PIXI.Graphics,PIXI.Graphics.prototype.lineStyle=function(e,t,i){return this.lineWidth=e||0,this.lineColor=t||0,this.lineAlpha=void 0===i?1:i,this.currentPath&&(this.currentPath.shape.points.length?this.drawShape(new PIXI.Polygon(this.currentPath.shape.points.slice(-2))):(this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha)),this},PIXI.Graphics.prototype.moveTo=function(e,t){return this.drawShape(new PIXI.Polygon([e,t])),this},PIXI.Graphics.prototype.lineTo=function(e,t){return this.currentPath||this.moveTo(0,0),this.currentPath.shape.points.push(e,t),this.dirty=!0,this._boundsDirty=!0,this},PIXI.Graphics.prototype.quadraticCurveTo=function(e,t,i,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var r,o,a=this.currentPath.shape.points;0===a.length&&this.moveTo(0,0);for(var s=a[a.length-2],p=a[a.length-1],l=0,h=1;h<=20;++h)r=s+(e-s)*(l=h/20),o=p+(t-p)*l,a.push(r+(e+(i-e)*l-r)*l,o+(t+(n-t)*l-o)*l);return this.dirty=!0,this._boundsDirty=!0,this},PIXI.Graphics.prototype.bezierCurveTo=function(e,t,i,n,r,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var a,s,p,l,h,u=this.currentPath.shape.points,d=u[u.length-2],c=u[u.length-1],_=0,y=1;y<=20;++y)p=(s=(a=1-(_=y/20))*a)*a,h=(l=_*_)*_,u.push(p*d+3*s*_*e+3*a*l*i+h*r,p*c+3*s*_*t+3*a*l*n+h*o);return this.dirty=!0,this._boundsDirty=!0,this},PIXI.Graphics.prototype.arcTo=function(e,t,i,n,r){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(e,t):this.moveTo(e,t);var o=this.currentPath.shape.points,a=o[o.length-2],s=o[o.length-1]-t,p=a-e,l=n-t,h=i-e,u=Math.abs(s*h-p*l);if(u<1e-8||0===r)o[o.length-2]===e&&o[o.length-1]===t||o.push(e,t);else{var d=s*s+p*p,c=l*l+h*h,_=s*l+p*h,y=r*Math.sqrt(d)/u,x=r*Math.sqrt(c)/u,m=y*_/d,g=x*_/c,f=y*h+x*p,v=y*l+x*s,z=p*(x+m),w=s*(x+m),b=h*(y+g),S=l*(y+g),C=Math.atan2(w-v,z-f),M=Math.atan2(S-v,b-f);this.arc(f+e,v+t,r,C,M,h*s<p*l)}return this.dirty=!0,this._boundsDirty=!0,this},PIXI.Graphics.prototype.arc=function(e,t,i,n,r,o,a){if(n===r)return this;void 0===o&&(o=!1),void 0===a&&(a=40),!o&&r<=n?r+=2*Math.PI:o&&n<=r&&(n+=2*Math.PI);var s=o?-1*(n-r):r-n,p=Math.ceil(Math.abs(s)/(2*Math.PI))*a;if(0===s)return this;var l=e+Math.cos(n)*i,h=t+Math.sin(n)*i;o&&this.filling?this.moveTo(e,t):this.moveTo(l,h);for(var u=this.currentPath.shape.points,d=s/(2*p),c=2*d,_=Math.cos(d),y=Math.sin(d),x=p-1,m=x%1/x,g=0;g<=x;g++){var f=d+n+c*(g+m*g),v=Math.cos(f),z=-Math.sin(f);u.push((_*v+y*z)*i+e,(_*-z+y*v)*i+t)}return this.dirty=!0,this._boundsDirty=!0,this},PIXI.Graphics.prototype.beginFill=function(e,t){return this.filling=!0,this.fillColor=e||0,this.fillAlpha=void 0===t?1:t,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},PIXI.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},PIXI.Graphics.prototype.drawRect=function(e,t,i,n){return this.drawShape(new PIXI.Rectangle(e,t,i,n)),this},PIXI.Graphics.prototype.drawRoundedRect=function(e,t,i,n,r){return this.drawShape(new PIXI.RoundedRectangle(e,t,i,n,r)),this},PIXI.Graphics.prototype.drawCircle=function(e,t,i){return this.drawShape(new PIXI.Circle(e,t,i)),this},PIXI.Graphics.prototype.drawEllipse=function(e,t,i,n){return this.drawShape(new PIXI.Ellipse(e,t,i,n)),this},PIXI.Graphics.prototype.drawPolygon=function(e){(e instanceof U.Polygon||e instanceof PIXI.Polygon)&&(e=e.points);var t=e;if(!Array.isArray(t)){t=new Array(arguments.length);for(var i=0;i<t.length;++i)t[i]=arguments[i]}return this.drawShape(new U.Polygon(t)),this},PIXI.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this._boundsDirty=!0,this.clearDirty=!0,this.graphicsData=[],this.updateLocalBounds(),this},PIXI.Graphics.prototype.generateTexture=function(e,t,i){void 0===e&&(e=1),void 0===t&&(t=PIXI.scaleModes.DEFAULT),void 0===i&&(i=0);var n=this.getBounds();n.width+=i,n.height+=i;var r=new PIXI.CanvasBuffer(n.width*e,n.height*e),o=PIXI.Texture.fromCanvas(r.canvas,t);return o.baseTexture.resolution=e,r.context.scale(e,e),r.context.translate(-n.x,-n.y),PIXI.CanvasGraphics.renderGraphics(this,r.context),o},PIXI.Graphics.prototype._renderWebGL=function(e){if(!1!==this.visible&&0!==this.alpha&&!0!==this.isMask){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.worldAlpha=this.worldAlpha,void PIXI.Sprite.prototype._renderWebGL.call(this._cachedSprite,e);if(e.spriteBatch.stop(),e.blendModeManager.setBlendMode(this.blendMode),this._mask&&e.maskManager.pushMask(this._mask,e),this._filters&&e.filterManager.pushFilter(this._filterBlock),this.blendMode!==e.spriteBatch.currentBlendMode){e.spriteBatch.currentBlendMode=this.blendMode;var t=PIXI.blendModesWebGL[e.spriteBatch.currentBlendMode];e.spriteBatch.gl.blendFunc(t[0],t[1])}if(this.webGLDirty&&(this.dirty=!0,this.webGLDirty=!1),PIXI.WebGLGraphics.renderGraphics(this,e),this.children.length){e.spriteBatch.start();for(var i=0;i<this.children.length;i++)this.children[i]._renderWebGL(e);e.spriteBatch.stop()}this._filters&&e.filterManager.popFilter(),this._mask&&e.maskManager.popMask(this.mask,e),e.drawCount++,e.spriteBatch.start()}},PIXI.Graphics.prototype._renderCanvas=function(e){if(!1!==this.visible&&0!==this.alpha&&!0!==this.isMask){if(this._prevTint!==this.tint&&(this.dirty=!0,this._prevTint=this.tint),this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.alpha=this.alpha,void PIXI.Sprite.prototype._renderCanvas.call(this._cachedSprite,e);var t=e.context,i=this.worldTransform;this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,t.globalCompositeOperation=PIXI.blendModesCanvas[e.currentBlendMode]),this._mask&&e.maskManager.pushMask(this._mask,e);var n=e.resolution,r=i.tx*e.resolution+e.shakeX,o=i.ty*e.resolution+e.shakeY;t.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,r,o),PIXI.CanvasGraphics.renderGraphics(this,t);for(var a=0;a<this.children.length;a++)this.children[a]._renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},PIXI.Graphics.prototype.getBounds=function(e){if(!this._currentBounds){if(!this.renderable)return PIXI.EmptyRectangle;this.dirty&&(this.updateLocalBounds(),this.webGLDirty=!0,this.cachedSpriteDirty=!0,this.dirty=!1);var t=this._localBounds,i=t.x,n=t.width+t.x,r=t.y,o=t.height+t.y,a=e||this.worldTransform,s=a.a,p=a.b,l=a.c,h=a.d,u=a.tx,d=a.ty,c=s*n+l*o+u,_=h*o+p*n+d,y=s*i+l*o+u,x=h*o+p*i+d,m=s*i+l*r+u,g=h*r+p*i+d,f=s*n+l*r+u,v=h*r+p*n+d,z=c,w=_,b=c,S=_;b=f<(b=m<(b=y<b?y:b)?m:b)?f:b,S=v<(S=g<(S=x<S?x:S)?g:S)?v:S,z=(z=(z=z<y?y:z)<m?m:z)<f?f:z,w=(w=(w=w<x?x:w)<g?g:w)<v?v:w,this._bounds.x=b,this._bounds.width=z-b,this._bounds.y=S,this._bounds.height=w-S,this._currentBounds=this._bounds}return this._currentBounds},PIXI.Graphics.prototype.getLocalBounds=function(){var e=this.worldTransform;this.worldTransform=PIXI.identityMatrix;for(var t=0;t<this.children.length;t++)this.children[t].updateTransform();var i=this.getBounds();for(this.worldTransform=e,t=0;t<this.children.length;t++)this.children[t].updateTransform();return i},PIXI.Graphics.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,tempPoint);for(var t=this.graphicsData,i=0;i<t.length;i++){var n=t[i];if(n.fill&&(n.shape&&n.shape.contains(tempPoint.x,tempPoint.y)))return!0}return!1},PIXI.Graphics.prototype.updateLocalBounds=function(){var e=1/0,t=-1/0,i=1/0,n=-1/0;if(this.graphicsData.length)for(var r,o,a,s,p,l,h=0;h<this.graphicsData.length;h++){var u=this.graphicsData[h],d=u.type,c=u.lineWidth;if(r=u.shape,d===PIXI.Graphics.RECT||d===PIXI.Graphics.RREC)a=r.x-c/2,s=r.y-c/2,e=a<e?a:e,t=t<a+(p=r.width+c)?a+p:t,i=s<i?s:i,n=n<s+(l=r.height+c)?s+l:n;else if(d===PIXI.Graphics.CIRC)a=r.x,s=r.y,e=a-(p=r.radius+c/2)<e?a-p:e,t=t<a+p?a+p:t,i=s-(l=r.radius+c/2)<i?s-l:i,n=n<s+l?s+l:n;else if(d===PIXI.Graphics.ELIP)a=r.x,s=r.y,e=a-(p=r.width+c/2)<e?a-p:e,t=t<a+p?a+p:t,i=s-(l=r.height+c/2)<i?s-l:i,n=n<s+l?s+l:n;else{o=r.points;for(var _=0;_<o.length;_++)o[_]instanceof U.Point?(a=o[_].x,s=o[_].y):(a=o[_],s=o[_+1],_<o.length-1&&_++),e=a-c<e?a-c:e,t=t<a+c?a+c:t,i=s-c<i?s-c:i,n=n<s+c?s+c:n}}else n=i=t=e=0;var y=this.boundsPadding;this._localBounds.x=e-y,this._localBounds.width=t-e+2*y,this._localBounds.y=i-y,this._localBounds.height=n-i+2*y},PIXI.Graphics.prototype._generateCachedSprite=function(){var e=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(e.width,e.height);else{var t=new PIXI.CanvasBuffer(e.width,e.height),i=PIXI.Texture.fromCanvas(t.canvas);this._cachedSprite=new PIXI.Sprite(i),this._cachedSprite.buffer=t,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-e.x/e.width,this._cachedSprite.anchor.y=-e.y/e.height,this._cachedSprite.buffer.context.translate(-e.x,-e.y),this.worldAlpha=1,PIXI.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},PIXI.Graphics.prototype.updateCachedSpriteTexture=function(){var e=this._cachedSprite,t=e.texture,i=e.buffer.canvas;t.baseTexture.width=i.width,t.baseTexture.height=i.height,t.crop.width=t.frame.width=i.width,t.crop.height=t.frame.height=i.height,e._width=i.width,e._height=i.height,t.baseTexture.dirty()},PIXI.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},PIXI.Graphics.prototype.drawShape=function(e){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null,e instanceof U.Polygon&&(e=e.clone()).flatten();var t=new PIXI.GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,e);return this.graphicsData.push(t),t.type===PIXI.Graphics.POLY&&(t.shape.closed=this.filling,this.currentPath=t),this.dirty=!0,this._boundsDirty=!0,t},Object.defineProperty(PIXI.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(e){this._cacheAsBitmap=e,this._cacheAsBitmap?this._generateCachedSprite():this.destroyCachedSprite(),this.dirty=!0,this.webGLDirty=!0}}),PIXI.GraphicsData=function(e,t,i,n,r,o,a){this.lineWidth=e,this.lineColor=t,this.lineAlpha=i,this._lineTint=t,this.fillColor=n,this.fillAlpha=r,this._fillTint=n,this.fill=o,this.shape=a,this.type=a.type},PIXI.GraphicsData.prototype.constructor=PIXI.GraphicsData,PIXI.GraphicsData.prototype.clone=function(){return new GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},PIXI.EarCut={},PIXI.EarCut.Triangulate=function(e,t,i){i=i||2;var n,r,o,a,s,p,l,h=t&&t.length,u=h?t[0]*i:e.length,d=PIXI.EarCut.linkedList(e,0,u,i,!0),c=[];if(!d)return c;if(h&&(d=PIXI.EarCut.eliminateHoles(e,t,d,i)),e.length>80*i){n=o=e[0],r=a=e[1];for(var _=i;_<u;_+=i)(s=e[_])<n&&(n=s),(p=e[_+1])<r&&(r=p),o<s&&(o=s),a<p&&(a=p);l=Math.max(o-n,a-r)}return PIXI.EarCut.earcutLinked(d,c,i,n,r,l),c},PIXI.EarCut.linkedList=function(e,t,i,n,r){var o,a,s,p=0;for(o=t,a=i-n;o<i;o+=n)p+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;if(r===0<p)for(o=t;o<i;o+=n)s=PIXI.EarCut.insertNode(o,e[o],e[o+1],s);else for(o=i-n;t<=o;o-=n)s=PIXI.EarCut.insertNode(o,e[o],e[o+1],s);return s},PIXI.EarCut.filterPoints=function(e,t){if(!e)return e;t||(t=e);var i,n=e;do{if(i=!1,n.steiner||!PIXI.EarCut.equals(n,n.next)&&0!==PIXI.EarCut.area(n.prev,n,n.next))n=n.next;else{if(PIXI.EarCut.removeNode(n),(n=t=n.prev)===n.next)return null;i=!0}}while(i||n!==t);return t},PIXI.EarCut.earcutLinked=function(e,t,i,n,r,o,a){if(e){!a&&o&&PIXI.EarCut.indexCurve(e,n,r,o);for(var s,p,l=e;e.prev!==e.next;)if(s=e.prev,p=e.next,o?PIXI.EarCut.isEarHashed(e,n,r,o):PIXI.EarCut.isEar(e))t.push(s.i/i),t.push(e.i/i),t.push(p.i/i),PIXI.EarCut.removeNode(e),e=p.next,l=p.next;else if((e=p)===l){a?1===a?(e=PIXI.EarCut.cureLocalIntersections(e,t,i),PIXI.EarCut.earcutLinked(e,t,i,n,r,o,2)):2===a&&PIXI.EarCut.splitEarcut(e,t,i,n,r,o):PIXI.EarCut.earcutLinked(PIXI.EarCut.filterPoints(e),t,i,n,r,o,1);break}}},PIXI.EarCut.isEar=function(e){var t=e.prev,i=e,n=e.next;if(0<=PIXI.EarCut.area(t,i,n))return!1;for(var r=e.next.next;r!==e.prev;){if(PIXI.EarCut.pointInTriangle(t.x,t.y,i.x,i.y,n.x,n.y,r.x,r.y)&&0<=PIXI.EarCut.area(r.prev,r,r.next))return!1;r=r.next}return!0},PIXI.EarCut.isEarHashed=function(e,t,i,n){var r=e.prev,o=e,a=e.next;if(0<=PIXI.EarCut.area(r,o,a))return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,p=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,l=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,h=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,u=PIXI.EarCut.zOrder(s,p,t,i,n),d=PIXI.EarCut.zOrder(l,h,t,i,n),c=e.nextZ;c&&c.z<=d;){if(c!==e.prev&&c!==e.next&&PIXI.EarCut.pointInTriangle(r.x,r.y,o.x,o.y,a.x,a.y,c.x,c.y)&&0<=PIXI.EarCut.area(c.prev,c,c.next))return!1;c=c.nextZ}for(c=e.prevZ;c&&c.z>=u;){if(c!==e.prev&&c!==e.next&&PIXI.EarCut.pointInTriangle(r.x,r.y,o.x,o.y,a.x,a.y,c.x,c.y)&&0<=PIXI.EarCut.area(c.prev,c,c.next))return!1;c=c.prevZ}return!0},PIXI.EarCut.cureLocalIntersections=function(e,t,i){var n=e;do{var r=n.prev,o=n.next.next;PIXI.EarCut.intersects(r,n,n.next,o)&&PIXI.EarCut.locallyInside(r,o)&&PIXI.EarCut.locallyInside(o,r)&&(t.push(r.i/i),t.push(n.i/i),t.push(o.i/i),PIXI.EarCut.removeNode(n),PIXI.EarCut.removeNode(n.next),n=e=o),n=n.next}while(n!==e);return n},PIXI.EarCut.splitEarcut=function(e,t,i,n,r,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&PIXI.EarCut.isValidDiagonal(a,s)){var p=PIXI.EarCut.splitPolygon(a,s);return a=PIXI.EarCut.filterPoints(a,a.next),p=PIXI.EarCut.filterPoints(p,p.next),PIXI.EarCut.earcutLinked(a,t,i,n,r,o),void PIXI.EarCut.earcutLinked(p,t,i,n,r,o)}s=s.next}a=a.next}while(a!==e)},PIXI.EarCut.eliminateHoles=function(e,t,i,n){var r,o,a,s,p,l=[];for(r=0,o=t.length;r<o;r++)a=t[r]*n,s=r<o-1?t[r+1]*n:e.length,(p=PIXI.EarCut.linkedList(e,a,s,n,!1))===p.next&&(p.steiner=!0),l.push(PIXI.EarCut.getLeftmost(p));for(l.sort(compareX),r=0;r<l.length;r++)PIXI.EarCut.eliminateHole(l[r],i),i=PIXI.EarCut.filterPoints(i,i.next);return i},PIXI.EarCut.compareX=function(e,t){return e.x-t.x},PIXI.EarCut.eliminateHole=function(e,t){if(t=PIXI.EarCut.findHoleBridge(e,t)){var i=PIXI.EarCut.splitPolygon(t,e);PIXI.EarCut.filterPoints(i,i.next)}},PIXI.EarCut.findHoleBridge=function(e,t){var i,n=t,r=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);s<=r&&a<s&&(a=s,i=n.x<n.next.x?n:n.next)}n=n.next}while(n!==t);if(!i)return null;if(e.x===i.x)return i.prev;var p,l=i,h=1/0;for(n=i.next;n!==l;)r>=n.x&&n.x>=i.x&&PIXI.EarCut.pointInTriangle(o<i.y?r:a,o,i.x,i.y,o<i.y?a:r,o,n.x,n.y)&&((p=Math.abs(o-n.y)/(r-n.x))<h||p===h&&n.x>i.x)&&PIXI.EarCut.locallyInside(n,e)&&(i=n,h=p),n=n.next;return i},PIXI.EarCut.indexCurve=function(e,t,i,n){for(var r=e;null===r.z&&(r.z=PIXI.EarCut.zOrder(r.x,r.y,t,i,n)),r.prevZ=r.prev,r.nextZ=r.next,(r=r.next)!==e;);r.prevZ.nextZ=null,r.prevZ=null,PIXI.EarCut.sortLinked(r)},PIXI.EarCut.sortLinked=function(e){var t,i,n,r,o,a,s,p,l=1;do{for(i=e,o=e=null,a=0;i;){for(a++,n=i,t=s=0;t<l&&(s++,n=n.nextZ);t++);for(p=l;0<s||0<p&&n;)0===s?(n=(r=n).nextZ,p--):0!==p&&n?i.z<=n.z?(i=(r=i).nextZ,s--):(n=(r=n).nextZ,p--):(i=(r=i).nextZ,s--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;i=n}o.nextZ=null,l*=2}while(1<a);return e},PIXI.EarCut.zOrder=function(e,t,i,n,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)/r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)/r)|t<<8))|t<<4))|t<<2))|t<<1))<<1},PIXI.EarCut.getLeftmost=function(e){for(var t=e,i=e;t.x<i.x&&(i=t),(t=t.next)!==e;);return i},PIXI.EarCut.pointInTriangle=function(e,t,i,n,r,o,a,s){return 0<=(r-a)*(t-s)-(e-a)*(o-s)&&0<=(e-a)*(n-s)-(i-a)*(t-s)&&0<=(i-a)*(o-s)-(r-a)*(n-s)},PIXI.EarCut.isValidDiagonal=function(e,t){return PIXI.EarCut.equals(e,t)||e.next.i!==t.i&&e.prev.i!==t.i&&!PIXI.EarCut.intersectsPolygon(e,t)&&PIXI.EarCut.locallyInside(e,t)&&PIXI.EarCut.locallyInside(t,e)&&PIXI.EarCut.middleInside(e,t)},PIXI.EarCut.area=function(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)},PIXI.EarCut.equals=function(e,t){return e.x===t.x&&e.y===t.y},PIXI.EarCut.intersects=function(e,t,i,n){return 0<PIXI.EarCut.area(e,t,i)!=0<PIXI.EarCut.area(e,t,n)&&0<PIXI.EarCut.area(i,n,e)!=0<PIXI.EarCut.area(i,n,t)},PIXI.EarCut.intersectsPolygon=function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&PIXI.EarCut.intersects(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1},PIXI.EarCut.locallyInside=function(e,t){return PIXI.EarCut.area(e.prev,e,e.next)<0?0<=PIXI.EarCut.area(e,t,e.next)&&0<=PIXI.EarCut.area(e,e.prev,t):PIXI.EarCut.area(e,t,e.prev)<0||PIXI.EarCut.area(e,e.next,t)<0},PIXI.EarCut.middleInside=function(e,t){for(var i=e,n=!1,r=(e.x+t.x)/2,o=(e.y+t.y)/2;i.y>o!=i.next.y>o&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),(i=i.next)!==e;);return n},PIXI.EarCut.splitPolygon=function(e,t){var i=new PIXI.EarCut.Node(e.i,e.x,e.y),n=new PIXI.EarCut.Node(t.i,t.x,t.y),r=e.next,o=t.prev;return(e.next=t).prev=e,(i.next=r).prev=i,(n.next=i).prev=n,(o.next=n).prev=o,n},PIXI.EarCut.insertNode=function(e,t,i,n){var r=new PIXI.EarCut.Node(e,t,i);return n?(r.next=n.next,(r.prev=n).next.prev=r,n.next=r):(r.prev=r).next=r,r},PIXI.EarCut.removeNode=function(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)},PIXI.EarCut.Node=function(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1},PIXI.WebGLGraphics=function(){},PIXI.WebGLGraphics.stencilBufferLimit=6,PIXI.WebGLGraphics.renderGraphics=function(e,t){var i,n=t.gl,r=t.projection,o=t.offset,a=t.shaderManager.primitiveShader;e.dirty&&PIXI.WebGLGraphics.updateGraphics(e,n);for(var s=e._webGL[n.id],p=0;p<s.data.length;p++)1===s.data[p].mode?(i=s.data[p],t.stencilManager.pushStencil(e,i,t),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(i.indices.length-4)),t.stencilManager.popStencil(e,i,t)):(i=s.data[p],t.shaderManager.setShader(a),a=t.shaderManager.primitiveShader,n.uniformMatrix3fv(a.translationMatrix,!1,e.worldTransform.toArray(!0)),n.uniform1f(a.flipY,1),n.uniform2f(a.projectionVector,r.x,-r.y),n.uniform2f(a.offsetVector,-o.x,-o.y),n.uniform3fv(a.tintColor,PIXI.hex2rgb(e.tint)),n.uniform1f(a.alpha,e.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,i.buffer),n.vertexAttribPointer(a.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(a.colorAttribute,4,n.FLOAT,!1,24,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,i.indexBuffer),n.drawElements(n.TRIANGLE_STRIP,i.indices.length,n.UNSIGNED_SHORT,0))},PIXI.WebGLGraphics.updateGraphics=function(e,t){var i,n,r=e._webGL[t.id];if(r||(r=e._webGL[t.id]={lastIndex:0,data:[],gl:t}),e.dirty=!1,e.clearDirty){for(e.clearDirty=!1,i=0;i<r.data.length;i++){var o=r.data[i];o.reset(),PIXI.WebGLGraphics.graphicsDataPool.push(o)}r.data=[],r.lastIndex=0}for(i=r.lastIndex;i<e.graphicsData.length;i++){var a=e.graphicsData[i];if(a.type===PIXI.Graphics.POLY){if(a.points=a.shape.points.slice(),a.shape.closed&&(a.points[0]===a.points[a.points.length-2]&&a.points[1]===a.points[a.points.length-1]||a.points.push(a.points[0],a.points[1])),a.fill)if(a.points.length>=PIXI.WebGLGraphics.stencilBufferLimit)if(a.points.length<2*PIXI.WebGLGraphics.stencilBufferLimit)n=PIXI.WebGLGraphics.switchMode(r,0),PIXI.WebGLGraphics.buildPoly(a,n)||(n=PIXI.WebGLGraphics.switchMode(r,1),PIXI.WebGLGraphics.buildComplexPoly(a,n));else n=PIXI.WebGLGraphics.switchMode(r,1),PIXI.WebGLGraphics.buildComplexPoly(a,n);0<a.lineWidth&&(n=PIXI.WebGLGraphics.switchMode(r,0),PIXI.WebGLGraphics.buildLine(a,n))}else n=PIXI.WebGLGraphics.switchMode(r,0),a.type===PIXI.Graphics.RECT?PIXI.WebGLGraphics.buildRectangle(a,n):a.type===PIXI.Graphics.CIRC||a.type===PIXI.Graphics.ELIP?PIXI.WebGLGraphics.buildCircle(a,n):a.type===PIXI.Graphics.RREC&&PIXI.WebGLGraphics.buildRoundedRectangle(a,n);r.lastIndex++}for(i=0;i<r.data.length;i++)(n=r.data[i]).dirty&&n.upload()},PIXI.WebGLGraphics.switchMode=function(e,t){var i;return e.data.length&&(i=e.data[e.data.length-1]).mode===t&&1!==t||((i=PIXI.WebGLGraphics.graphicsDataPool.pop()||new PIXI.WebGLGraphicsData(e.gl)).mode=t,e.data.push(i)),i.dirty=!0,i},PIXI.WebGLGraphics.buildRectangle=function(e,t){var i=e.shape,n=i.x,r=i.y,o=i.width,a=i.height;if(e.fill){var s=PIXI.hex2rgb(e.fillColor),p=e.fillAlpha,l=s[0]*p,h=s[1]*p,u=s[2]*p,d=t.points,c=t.indices,_=d.length/6;d.push(n,r),d.push(l,h,u,p),d.push(n+o,r),d.push(l,h,u,p),d.push(n,r+a),d.push(l,h,u,p),d.push(n+o,r+a),d.push(l,h,u,p),c.push(_,_,_+1,_+2,_+3,_+3)}if(e.lineWidth){var y=e.points;e.points=[n,r,n+o,r,n+o,r+a,n,r+a,n,r],PIXI.WebGLGraphics.buildLine(e,t),e.points=y}},PIXI.WebGLGraphics.buildRoundedRectangle=function(e,t){var i=e.shape,n=i.x,r=i.y,o=i.width,a=i.height,s=i.radius,p=[];if(p.push(n,r+s),p=(p=(p=(p=p.concat(PIXI.WebGLGraphics.quadraticBezierCurve(n,r+a-s,n,r+a,n+s,r+a))).concat(PIXI.WebGLGraphics.quadraticBezierCurve(n+o-s,r+a,n+o,r+a,n+o,r+a-s))).concat(PIXI.WebGLGraphics.quadraticBezierCurve(n+o,r+s,n+o,r,n+o-s,r))).concat(PIXI.WebGLGraphics.quadraticBezierCurve(n+s,r,n,r,n,r+s)),e.fill){var l=PIXI.hex2rgb(e.fillColor),h=e.fillAlpha,u=l[0]*h,d=l[1]*h,c=l[2]*h,_=t.points,y=t.indices,x=_.length/6,m=PIXI.EarCut.Triangulate(p,null,2),g=0;for(g=0;g<m.length;g+=3)y.push(m[g]+x),y.push(m[g]+x),y.push(m[g+1]+x),y.push(m[g+2]+x),y.push(m[g+2]+x);for(g=0;g<p.length;g++)_.push(p[g],p[++g],u,d,c,h)}if(e.lineWidth){var f=e.points;e.points=p,PIXI.WebGLGraphics.buildLine(e,t),e.points=f}},PIXI.WebGLGraphics.quadraticBezierCurve=function(e,t,i,n,r,o){var a,s,p,l,h,u,d=[];function c(e,t,i){return e+(t-e)*i}for(var _=0,y=0;y<=20;y++)a=c(e,i,_=y/20),s=c(t,n,_),p=c(i,r,_),l=c(n,o,_),h=c(a,p,_),u=c(s,l,_),d.push(h,u);return d},PIXI.WebGLGraphics.buildCircle=function(e,t){var i,n,r=e.shape,o=r.x,a=r.y;n=e.type===PIXI.Graphics.CIRC?(i=r.radius,r.radius):(i=r.width,r.height);var s=2*Math.PI/40,p=0;if(e.fill){var l=PIXI.hex2rgb(e.fillColor),h=e.fillAlpha,u=l[0]*h,d=l[1]*h,c=l[2]*h,_=t.points,y=t.indices,x=_.length/6;for(y.push(x),p=0;p<41;p++)_.push(o,a,u,d,c,h),_.push(o+Math.sin(s*p)*i,a+Math.cos(s*p)*n,u,d,c,h),y.push(x++,x++);y.push(x-1)}if(e.lineWidth){var m=e.points;for(e.points=[],p=0;p<41;p++)e.points.push(o+Math.sin(s*p)*i,a+Math.cos(s*p)*n);PIXI.WebGLGraphics.buildLine(e,t),e.points=m}},PIXI.WebGLGraphics.buildLine=function(e,t){var i=0,n=e.points;if(0!==n.length){if(e.lineWidth%2)for(i=0;i<n.length;i++)n[i]+=.5;var r=new PIXI.Point(n[0],n[1]),o=new PIXI.Point(n[n.length-2],n[n.length-1]);if(r.x===o.x&&r.y===o.y){(n=n.slice()).pop(),n.pop();var a=(o=new PIXI.Point(n[n.length-2],n[n.length-1])).x+.5*(r.x-o.x),s=o.y+.5*(r.y-o.y);n.unshift(a,s),n.push(a,s)}var p,l,h,u,d,c,_,y,x,m,g,f,v,z,w,b,S,C,M,P,k,T,A=t.points,O=t.indices,E=n.length/2,G=n.length,D=A.length/6,I=e.lineWidth/2,L=PIXI.hex2rgb(e.lineColor),B=e.lineAlpha,R=L[0]*B,F=L[1]*B,j=L[2]*B;for(h=n[0],u=n[1],d=n[2],x=-(u-(c=n[3])),m=h-d,x/=T=Math.sqrt(x*x+m*m),m/=T,x*=I,m*=I,A.push(h-x,u-m,R,F,j,B),A.push(h+x,u+m,R,F,j,B),i=1;i<E-1;i++)h=n[2*(i-1)],u=n[2*(i-1)+1],d=n[2*i],c=n[2*i+1],_=n[2*(i+1)],y=n[2*(i+1)+1],x=-(u-c),m=h-d,x/=T=Math.sqrt(x*x+m*m),m/=T,x*=I,m*=I,g=-(c-y),f=d-_,g/=T=Math.sqrt(g*g+f*f),f/=T,S=(-x+h)*(-m+c)-(-x+d)*(-m+u),P=(-(g*=I)+_)*(-(f*=I)+c)-(-g+d)*(-f+y),k=(w=-m+u-(-m+c))*(M=-g+d-(-g+_))-(C=-f+y-(-f+c))*(b=-x+d-(-x+h)),Math.abs(k)<.1?(k+=10.1,A.push(d-x,c-m,R,F,j,B),A.push(d+x,c+m,R,F,j,B)):19600<((p=(b*P-M*S)/k)-d)*(p-d)+((l=(C*S-w*P)/k)-c)+(l-c)?(v=x-g,z=m-f,v/=T=Math.sqrt(v*v+z*z),z/=T,v*=I,z*=I,A.push(d-v,c-z),A.push(R,F,j,B),A.push(d+v,c+z),A.push(R,F,j,B),A.push(d-v,c-z),A.push(R,F,j,B),G++):(A.push(p,l),A.push(R,F,j,B),A.push(d-(p-d),c-(l-c)),A.push(R,F,j,B));for(h=n[2*(E-2)],u=n[2*(E-2)+1],d=n[2*(E-1)],x=-(u-(c=n[2*(E-1)+1])),m=h-d,x/=T=Math.sqrt(x*x+m*m),m/=T,x*=I,m*=I,A.push(d-x,c-m),A.push(R,F,j,B),A.push(d+x,c+m),A.push(R,F,j,B),O.push(D),i=0;i<G;i++)O.push(D++);O.push(D-1)}},PIXI.WebGLGraphics.buildComplexPoly=function(e,t){var i=e.points.slice();if(!(i.length<6)){var n=t.indices;t.points=i,t.alpha=e.fillAlpha,t.color=PIXI.hex2rgb(e.fillColor);for(var r,o,a=1/0,s=-1/0,p=1/0,l=-1/0,h=0;h<i.length;h+=2)a=(r=i[h])<a?r:a,s=s<r?r:s,p=(o=i[h+1])<p?o:p,l=l<o?o:l;i.push(a,p,s,p,s,l,a,l);var u=i.length/2;for(h=0;h<u;h++)n.push(h)}},PIXI.WebGLGraphics.buildPoly=function(e,t){var i=e.points;if(!(i.length<6)){var n=t.points,r=t.indices,o=i.length/2,a=PIXI.hex2rgb(e.fillColor),s=e.fillAlpha,p=a[0]*s,l=a[1]*s,h=a[2]*s,u=PIXI.EarCut.Triangulate(i,null,2);if(!u)return!1;var d=n.length/6,c=0;for(c=0;c<u.length;c+=3)r.push(u[c]+d),r.push(u[c]+d),r.push(u[c+1]+d),r.push(u[c+2]+d),r.push(u[c+2]+d);for(c=0;c<o;c++)n.push(i[2*c],i[2*c+1],p,l,h,s);return!0}},PIXI.WebGLGraphics.graphicsDataPool=[],PIXI.WebGLGraphicsData=function(e){this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0},PIXI.WebGLGraphicsData.prototype.reset=function(){this.points=[],this.indices=[]},PIXI.WebGLGraphicsData.prototype.upload=function(){var e=this.gl;this.glPoints=new PIXI.Float32Array(this.points),e.bindBuffer(e.ARRAY_BUFFER,this.buffer),e.bufferData(e.ARRAY_BUFFER,this.glPoints,e.STATIC_DRAW),this.glIndicies=new PIXI.Uint16Array(this.indices),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.glIndicies,e.STATIC_DRAW),this.dirty=!1},PIXI.CanvasGraphics=function(){},PIXI.CanvasGraphics.renderGraphics=function(e,t){var i=e.worldAlpha;e.dirty&&(this.updateGraphicsTint(e),e.dirty=!1);for(var n=0;n<e.graphicsData.length;n++){var r=e.graphicsData[n],o=r.shape,a=r._fillTint,s=r._lineTint;if(t.lineWidth=r.lineWidth,r.type===PIXI.Graphics.POLY){t.beginPath();var p=o.points;t.moveTo(p[0],p[1]);for(var l=1;l<p.length/2;l++)t.lineTo(p[2*l],p[2*l+1]);o.closed&&t.lineTo(p[0],p[1]),p[0]===p[p.length-2]&&p[1]===p[p.length-1]&&t.closePath(),r.fill&&(t.globalAlpha=r.fillAlpha*i,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fill()),r.lineWidth&&(t.globalAlpha=r.lineAlpha*i,t.strokeStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.stroke())}else if(r.type===PIXI.Graphics.RECT)(r.fillColor||0===r.fillColor)&&(t.globalAlpha=r.fillAlpha*i,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fillRect(o.x,o.y,o.width,o.height)),r.lineWidth&&(t.globalAlpha=r.lineAlpha*i,t.strokeStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.strokeRect(o.x,o.y,o.width,o.height));else if(r.type===PIXI.Graphics.CIRC)t.beginPath(),t.arc(o.x,o.y,o.radius,0,2*Math.PI),t.closePath(),r.fill&&(t.globalAlpha=r.fillAlpha*i,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fill()),r.lineWidth&&(t.globalAlpha=r.lineAlpha*i,t.strokeStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.stroke());else if(r.type===PIXI.Graphics.ELIP){var h=2*o.width,u=2*o.height,d=o.x-h/2,c=o.y-u/2;t.beginPath();var _=h/2*.5522848,y=u/2*.5522848,x=d+h,m=c+u,g=d+h/2,f=c+u/2;t.moveTo(d,f),t.bezierCurveTo(d,f-y,g-_,c,g,c),t.bezierCurveTo(g+_,c,x,f-y,x,f),t.bezierCurveTo(x,f+y,g+_,m,g,m),t.bezierCurveTo(g-_,m,d,f+y,d,f),t.closePath(),r.fill&&(t.globalAlpha=r.fillAlpha*i,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fill()),r.lineWidth&&(t.globalAlpha=r.lineAlpha*i,t.strokeStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.stroke())}else if(r.type===PIXI.Graphics.RREC){var v=o.x,z=o.y,w=o.width,b=o.height,S=o.radius,C=Math.min(w,b)/2|0;S=C<S?C:S,t.beginPath(),t.moveTo(v,z+S),t.lineTo(v,z+b-S),t.quadraticCurveTo(v,z+b,v+S,z+b),t.lineTo(v+w-S,z+b),t.quadraticCurveTo(v+w,z+b,v+w,z+b-S),t.lineTo(v+w,z+S),t.quadraticCurveTo(v+w,z,v+w-S,z),t.lineTo(v+S,z),t.quadraticCurveTo(v,z,v,z+S),t.closePath(),(r.fillColor||0===r.fillColor)&&(t.globalAlpha=r.fillAlpha*i,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fill()),r.lineWidth&&(t.globalAlpha=r.lineAlpha*i,t.strokeStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.stroke())}}},PIXI.CanvasGraphics.renderGraphicsMask=function(e,t){var i=e.graphicsData.length;if(0!==i){t.beginPath();for(var n=0;n<i;n++){var r=e.graphicsData[n],o=r.shape;if(r.type===PIXI.Graphics.POLY){var a=o.points;t.moveTo(a[0],a[1]);for(var s=1;s<a.length/2;s++)t.lineTo(a[2*s],a[2*s+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&t.closePath()}else if(r.type===PIXI.Graphics.RECT)t.rect(o.x,o.y,o.width,o.height),t.closePath();else if(r.type===PIXI.Graphics.CIRC)t.arc(o.x,o.y,o.radius,0,2*Math.PI),t.closePath();else if(r.type===PIXI.Graphics.ELIP){var p=2*o.width,l=2*o.height,h=o.x-p/2,u=o.y-l/2,d=p/2*.5522848,c=l/2*.5522848,_=h+p,y=u+l,x=h+p/2,m=u+l/2;t.moveTo(h,m),t.bezierCurveTo(h,m-c,x-d,u,x,u),t.bezierCurveTo(x+d,u,_,m-c,_,m),t.bezierCurveTo(_,m+c,x+d,y,x,y),t.bezierCurveTo(x-d,y,h,m+c,h,m),t.closePath()}else if(r.type===PIXI.Graphics.RREC){var g=o.x,f=o.y,v=o.width,z=o.height,w=o.radius,b=Math.min(v,z)/2|0;w=b<w?b:w,t.moveTo(g,f+w),t.lineTo(g,f+z-w),t.quadraticCurveTo(g,f+z,g+w,f+z),t.lineTo(g+v-w,f+z),t.quadraticCurveTo(g+v,f+z,g+v,f+z-w),t.lineTo(g+v,f+w),t.quadraticCurveTo(g+v,f,g+v-w,f),t.lineTo(g+w,f),t.quadraticCurveTo(g,f,g,f+w),t.closePath()}}}},PIXI.CanvasGraphics.updateGraphicsTint=function(e){if(16777215!==e.tint)for(var t=(e.tint>>16&255)/255,i=(e.tint>>8&255)/255,n=(255&e.tint)/255,r=0;r<e.graphicsData.length;r++){var o=e.graphicsData[r],a=0|o.fillColor,s=0|o.lineColor;o._fillTint=((a>>16&255)/255*t*255<<16)+((a>>8&255)/255*i*255<<8)+(255&a)/255*n*255,o._lineTint=((s>>16&255)/255*t*255<<16)+((s>>8&255)/255*i*255<<8)+(255&s)/255*n*255}},U.Graphics=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.type=U.GRAPHICS,this.physicsType=U.SPRITE,this.anchor=new U.Point,PIXI.Graphics.call(this),U.Component.Core.init.call(this,e,t,i,"",null)},U.Graphics.prototype=Object.create(PIXI.Graphics.prototype),U.Graphics.prototype.constructor=U.Graphics,U.Component.Core.install.call(U.Graphics.prototype,["Angle","AutoCull","Bounds","Destroy","FixedToCamera","InputEnabled","InWorld","LifeSpan","PhysicsBody","Reset"]),U.Graphics.prototype.preUpdatePhysics=U.Component.PhysicsBody.preUpdate,U.Graphics.prototype.preUpdateLifeSpan=U.Component.LifeSpan.preUpdate,U.Graphics.prototype.preUpdateInWorld=U.Component.InWorld.preUpdate,U.Graphics.prototype.preUpdateCore=U.Component.Core.preUpdate,U.Graphics.prototype.preUpdate=function(){return!!(this.preUpdatePhysics()&&this.preUpdateLifeSpan()&&this.preUpdateInWorld())&&this.preUpdateCore()},U.Graphics.prototype.postUpdate=function(){U.Component.PhysicsBody.postUpdate.call(this),U.Component.FixedToCamera.postUpdate.call(this),this._boundsDirty&&(this.updateLocalBounds(),this._boundsDirty=!1);for(var e=0;e<this.children.length;e++)this.children[e].postUpdate()},U.Graphics.prototype.destroy=function(e){this.clear(),U.Component.Destroy.prototype.destroy.call(this,e)},U.Graphics.prototype.drawTriangle=function(e,t){void 0===t&&(t=!1);var i=new U.Polygon(e);if(t){var n=new U.Point(this.game.camera.x-e[0].x,this.game.camera.y-e[0].y),r=new U.Point(e[1].x-e[0].x,e[1].y-e[0].y),o=new U.Point(e[1].x-e[2].x,e[1].y-e[2].y).cross(r);0<n.dot(o)&&this.drawPolygon(i)}else this.drawPolygon(i)},U.Graphics.prototype.drawTriangles=function(e,t,i){void 0===i&&(i=!1);var n,r=new U.Point,o=new U.Point,a=new U.Point,s=[];if(t)if(e[0]instanceof U.Point)for(n=0;n<t.length/3;n++)s.push(e[t[3*n]]),s.push(e[t[3*n+1]]),s.push(e[t[3*n+2]]),3===s.length&&(this.drawTriangle(s,i),s=[]);else for(n=0;n<t.length;n++)r.x=e[2*t[n]],r.y=e[2*t[n]+1],s.push(r.copyTo({})),3===s.length&&(this.drawTriangle(s,i),s=[]);else if(e[0]instanceof U.Point)for(n=0;n<e.length/3;n++)this.drawTriangle([e[3*n],e[3*n+1],e[3*n+2]],i);else for(n=0;n<e.length/6;n++)r.x=e[6*n+0],r.y=e[6*n+1],o.x=e[6*n+2],o.y=e[6*n+3],a.x=e[6*n+4],a.y=e[6*n+5],this.drawTriangle([r,o,a],i)},U.RenderTexture=function(e,t,i,n,r,o){void 0===n&&(n=""),void 0===r&&(r=U.scaleModes.DEFAULT),void 0===o&&(o=1),this.game=e,this.key=n,this.type=U.RENDERTEXTURE,this._tempMatrix=new PIXI.Matrix,PIXI.RenderTexture.call(this,t,i,this.game.renderer,r,o),this.render=U.RenderTexture.prototype.render},U.RenderTexture.prototype=Object.create(PIXI.RenderTexture.prototype),U.RenderTexture.prototype.constructor=U.RenderTexture,U.RenderTexture.prototype.renderXY=function(e,t,i,n){e.updateTransform(),this._tempMatrix.copyFrom(e.worldTransform),this._tempMatrix.tx=t,this._tempMatrix.ty=i,this.renderer.type===PIXI.WEBGL_RENDERER?this.renderWebGL(e,this._tempMatrix,n):this.renderCanvas(e,this._tempMatrix,n)},U.RenderTexture.prototype.renderRawXY=function(e,t,i,n){this._tempMatrix.identity().translate(t,i),this.renderer.type===PIXI.WEBGL_RENDERER?this.renderWebGL(e,this._tempMatrix,n):this.renderCanvas(e,this._tempMatrix,n)},U.RenderTexture.prototype.render=function(e,t,i){null==t?this._tempMatrix.copyFrom(e.worldTransform):this._tempMatrix.copyFrom(t),this.renderer.type===PIXI.WEBGL_RENDERER?this.renderWebGL(e,this._tempMatrix,i):this.renderCanvas(e,this._tempMatrix,i)},U.Text=function(e,t,i,n,r){t=t||0,i=i||0,n=null==n?"":n.toString(),r=U.Utils.extend({},r),this.type=U.TEXT,this.physicsType=U.SPRITE,this.padding=new U.Point,this.textBounds=null,this.canvas=PIXI.CanvasPool.create(this),this.context=this.canvas.getContext("2d"),this.colors=[],this.strokeColors=[],this.fontStyles=[],this.fontWeights=[],this.autoRound=!1,this.useAdvancedWrap=!1,this._res=e.renderer.resolution,this._text=n,this._fontComponents=null,this._lineSpacing=0,this._charCount=0,this._width=0,this._height=0,U.Sprite.call(this,e,t,i,PIXI.Texture.fromCanvas(this.canvas)),this.setStyle(r),""!==n&&this.updateText()},U.Text.prototype=Object.create(U.Sprite.prototype),U.Text.prototype.constructor=U.Text,U.Text.prototype.preUpdate=function(){return!!(this.preUpdatePhysics()&&this.preUpdateLifeSpan()&&this.preUpdateInWorld())&&this.preUpdateCore()},U.Text.prototype.update=function(){},U.Text.prototype.destroy=function(e){this.texture.destroy(!0),U.Component.Destroy.prototype.destroy.call(this,e)},U.Text.prototype.setShadow=function(e,t,i,n,r,o){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i="rgba(0, 0, 0, 1)"),void 0===n&&(n=0),void 0===r&&(r=!0),void 0===o&&(o=!0),this.style.shadowOffsetX=e,this.style.shadowOffsetY=t,this.style.shadowColor=i,this.style.shadowBlur=n,this.style.shadowStroke=r,this.style.shadowFill=o,this.dirty=!0,this},U.Text.prototype.setStyle=function(e,t){void 0===t&&(t=!1),(e=e||{}).font=e.font||"bold 20pt Arial",e.backgroundColor=e.backgroundColor||null,e.fill=e.fill||"black",e.align=e.align||"left",e.boundsAlignH=e.boundsAlignH||"left",e.boundsAlignV=e.boundsAlignV||"top",e.stroke=e.stroke||"black",e.strokeThickness=e.strokeThickness||0,e.wordWrap=e.wordWrap||!1,e.wordWrapWidth=e.wordWrapWidth||100,e.maxLines=e.maxLines||0,e.shadowOffsetX=e.shadowOffsetX||0,e.shadowOffsetY=e.shadowOffsetY||0,e.shadowColor=e.shadowColor||"rgba(0,0,0,0)",e.shadowBlur=e.shadowBlur||0,e.tabs=e.tabs||0;var i=this.fontToComponents(e.font);return e.fontStyle&&(i.fontStyle=e.fontStyle),e.fontVariant&&(i.fontVariant=e.fontVariant),e.fontWeight&&(i.fontWeight=e.fontWeight),e.fontSize&&("number"==typeof e.fontSize&&(e.fontSize=e.fontSize+"px"),i.fontSize=e.fontSize),this._fontComponents=i,e.font=this.componentsToFont(this._fontComponents),this.style=e,this.dirty=!0,t&&this.updateText(),this},U.Text.prototype.updateText=function(){this.texture.baseTexture.resolution=this._res,this.context.font=this.style.font;var e=this.text;this.style.wordWrap&&(e=this.runWordWrap(this.text));var t=e.split(/(?:\r\n|\r|\n)/),i=this.style.tabs,n=[],r=0,o=this.determineFontProperties(this.style.font),a=t.length;0<this.style.maxLines&&this.style.maxLines<t.length&&(a=this.style.maxLines);for(var s=this._charCount=0;s<a;s++){if(0===i){var p=this.style.strokeThickness+this.padding.x;0<this.colors.length||0<this.strokeColors.length||0<this.fontWeights.length||0<this.fontStyles.length?p+=this.measureLine(t[s]):p+=this.context.measureText(t[s]).width,this.style.wordWrap&&(p-=this.context.measureText(" ").width)}else{var l=t[s].split(/(?:\t)/);p=this.padding.x+this.style.strokeThickness;if(Array.isArray(i))for(var h=0,u=0;u<l.length;u++){var d=0;d=0<this.colors.length||0<this.strokeColors.length||0<this.fontWeights.length||0<this.fontStyles.length?this.measureLine(l[u]):Math.ceil(this.context.measureText(l[u]).width),0<u&&(h+=i[u-1]),p=h+d}else for(u=0;u<l.length;u++){0<this.colors.length||0<this.strokeColors.length||0<this.fontWeights.length||0<this.fontStyles.length?p+=this.measureLine(l[u]):p+=Math.ceil(this.context.measureText(l[u]).width),p+=this.game.math.snapToCeil(p,i)-p}}n[s]=Math.ceil(p),r=Math.max(r,n[s])}this.canvas.width=r*this._res;var c,_,y=o.fontSize+this.style.strokeThickness+this.padding.y,x=y*a,m=this._lineSpacing;for(m<0&&Math.abs(m)>y&&(m=-y),0!==m&&(x+=0<m?m*t.length:m*(t.length-1)),this.canvas.height=x*this._res,this.context.scale(this._res,this._res),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.style.backgroundColor&&(this.context.fillStyle=this.style.backgroundColor,this.context.fillRect(0,0,this.canvas.width,this.canvas.height)),this.context.fillStyle=this.style.fill,this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.textBaseline="alphabetic",this.context.lineWidth=this.style.strokeThickness,this.context.lineCap="round",this.context.lineJoin="round",s=this._charCount=0;s<a;s++)c=this.style.strokeThickness/2,_=this.style.strokeThickness/2+s*y+o.ascent,0<s&&(_+=m*s),"right"===this.style.align?c+=r-n[s]:"center"===this.style.align&&(c+=(r-n[s])/2),this.autoRound&&(c=Math.round(c),_=Math.round(_)),0<this.colors.length||0<this.strokeColors.length||0<this.fontWeights.length||0<this.fontStyles.length?this.updateLine(t[s],c,_):(this.style.stroke&&this.style.strokeThickness&&(this.updateShadow(this.style.shadowStroke),0===i?this.context.strokeText(t[s],c,_):this.renderTabLine(t[s],c,_,!1)),this.style.fill&&(this.updateShadow(this.style.shadowFill),0===i?this.context.fillText(t[s],c,_):this.renderTabLine(t[s],c,_,!0)));this.updateTexture(),this.dirty=!1},U.Text.prototype.renderTabLine=function(e,t,i,n){var r=e.split(/(?:\t)/),o=this.style.tabs,a=0;if(Array.isArray(o))for(var s=0,p=0;p<r.length;p++)0<p&&(s+=o[p-1]),a=t+s,n?this.context.fillText(r[p],a,i):this.context.strokeText(r[p],a,i);else for(p=0;p<r.length;p++){var l=Math.ceil(this.context.measureText(r[p]).width);a=this.game.math.snapToCeil(t,o),n?this.context.fillText(r[p],a,i):this.context.strokeText(r[p],a,i),t=a+l}},U.Text.prototype.updateShadow=function(e){e?(this.context.shadowOffsetX=this.style.shadowOffsetX,this.context.shadowOffsetY=this.style.shadowOffsetY,this.context.shadowColor=this.style.shadowColor,this.context.shadowBlur=this.style.shadowBlur):(this.context.shadowOffsetX=0,this.context.shadowOffsetY=0,this.context.shadowColor=0,this.context.shadowBlur=0)},U.Text.prototype.measureLine=function(e){for(var t=0,i=0;i<e.length;i++){var n=e[i];if(0<this.fontWeights.length||0<this.fontStyles.length){var r=this.fontToComponents(this.context.font);this.fontStyles[this._charCount]&&(r.fontStyle=this.fontStyles[this._charCount]),this.fontWeights[this._charCount]&&(r.fontWeight=this.fontWeights[this._charCount]),this.context.font=this.componentsToFont(r)}this.style.stroke&&this.style.strokeThickness&&(this.strokeColors[this._charCount]&&(this.context.strokeStyle=this.strokeColors[this._charCount]),this.updateShadow(this.style.shadowStroke)),this.style.fill&&(this.colors[this._charCount]&&(this.context.fillStyle=this.colors[this._charCount]),this.updateShadow(this.style.shadowFill)),t+=this.context.measureText(n).width,this._charCount++}return Math.ceil(t)},U.Text.prototype.updateLine=function(e,t,i){for(var n=0;n<e.length;n++){var r=e[n];if(0<this.fontWeights.length||0<this.fontStyles.length){var o=this.fontToComponents(this.context.font);this.fontStyles[this._charCount]&&(o.fontStyle=this.fontStyles[this._charCount]),this.fontWeights[this._charCount]&&(o.fontWeight=this.fontWeights[this._charCount]),this.context.font=this.componentsToFont(o)}this.style.stroke&&this.style.strokeThickness&&(this.strokeColors[this._charCount]&&(this.context.strokeStyle=this.strokeColors[this._charCount]),this.updateShadow(this.style.shadowStroke),this.context.strokeText(r,t,i)),this.style.fill&&(this.colors[this._charCount]&&(this.context.fillStyle=this.colors[this._charCount]),this.updateShadow(this.style.shadowFill),this.context.fillText(r,t,i)),t+=this.context.measureText(r).width,this._charCount++}},U.Text.prototype.clearColors=function(){return this.colors=[],this.strokeColors=[],this.dirty=!0,this},U.Text.prototype.clearFontValues=function(){return this.fontStyles=[],this.fontWeights=[],this.dirty=!0,this},U.Text.prototype.addColor=function(e,t){return this.colors[t]=e,this.dirty=!0,this},U.Text.prototype.addStrokeColor=function(e,t){return this.strokeColors[t]=e,this.dirty=!0,this},U.Text.prototype.addFontStyle=function(e,t){return this.fontStyles[t]=e,this.dirty=!0,this},U.Text.prototype.addFontWeight=function(e,t){return this.fontWeights[t]=e,this.dirty=!0,this},U.Text.prototype.precalculateWordWrap=function(e){return this.texture.baseTexture.resolution=this._res,this.context.font=this.style.font,this.runWordWrap(e).split(/(?:\r\n|\r|\n)/)},U.Text.prototype.runWordWrap=function(e){return this.useAdvancedWrap?this.advancedWordWrap(e):this.basicWordWrap(e)},U.Text.prototype.advancedWordWrap=function(e){for(var t=this.context,i=this.style.wordWrapWidth,n="",r=e.replace(/ +/gi," ").split(/\r?\n/gi),o=r.length,a=0;a<o;a++){var s=r[a],p="";if(s=s.replace(/^ *|\s*$/gi,""),t.measureText(s).width<i)n+=s+"\n";else{for(var l=i,h=s.split(" "),u=0;u<h.length;u++){var d=h[u],c=d+" ",_=t.measureText(c).width;if(l<_){if(0===u){for(var y=c;y.length&&(y=y.slice(0,-1),!((_=t.measureText(y).width)<=l)););if(!y.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var x=d.substr(y.length);h[u]=x,p+=y}var m=h[u].length?u:u+1,g=h.slice(m).join(" ").replace(/[ \n]*$/gi,"");r[a+1]=g+" "+(r[a+1]||""),o=r.length;break}p+=c,l-=_}n+=p.replace(/[ \n]*$/gi,"")+"\n"}}return n=n.replace(/[\s|\n]*$/gi,"")},U.Text.prototype.basicWordWrap=function(e){for(var t="",i=e.split("\n"),n=0;n<i.length;n++){for(var r=this.style.wordWrapWidth,o=i[n].split(" "),a=0;a<o.length;a++){var s=this.context.measureText(o[a]).width,p=s+this.context.measureText(" ").width;r<p?(0<a&&(t+="\n"),t+=o[a]+" ",r=this.style.wordWrapWidth-s):(r-=p,t+=o[a]+" ")}n<i.length-1&&(t+="\n")}return t},U.Text.prototype.updateFont=function(e){var t=this.componentsToFont(e);this.style.font!==t&&(this.style.font=t,this.dirty=!0,this.parent&&this.updateTransform())},U.Text.prototype.fontToComponents=function(e){var t=e.match(/^\s*(?:\b(normal|italic|oblique|inherit)?\b)\s*(?:\b(normal|small-caps|inherit)?\b)\s*(?:\b(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit)?\b)\s*(?:\b(xx-small|x-small|small|medium|large|x-large|xx-large|larger|smaller|0|\d*(?:[.]\d*)?(?:%|[a-z]{2,5}))?\b)\s*(.*)\s*$/);if(t){var i=t[5].trim();return/^(?:inherit|serif|sans-serif|cursive|fantasy|monospace)$/.exec(i)||/['",]/.exec(i)||(i="'"+i+"'"),{font:e,fontStyle:t[1]||"normal",fontVariant:t[2]||"normal",fontWeight:t[3]||"normal",fontSize:t[4]||"medium",fontFamily:i}}return{font:e}},U.Text.prototype.componentsToFont=function(e){var t,i=[];return(t=e.fontStyle)&&"normal"!==t&&i.push(t),(t=e.fontVariant)&&"normal"!==t&&i.push(t),(t=e.fontWeight)&&"normal"!==t&&i.push(t),(t=e.fontSize)&&"medium"!==t&&i.push(t),(t=e.fontFamily)&&i.push(t),i.length||i.push(e.font),i.join(" ")},U.Text.prototype.setText=function(e,t){return void 0===t&&(t=!1),this.text=e.toString()||"",t?this.updateText():this.dirty=!0,this},U.Text.prototype.parseList=function(e){if(!Array.isArray(e))return this;for(var t="",i=0;i<e.length;i++)Array.isArray(e[i])?(t+=e[i].join("\t"),i<e.length-1&&(t+="\n")):(t+=e[i],i<e.length-1&&(t+="\t"));return this.text=t,this.dirty=!0,this},U.Text.prototype.setTextBounds=function(e,t,i,n){return void 0===e?this.textBounds=null:(this.textBounds?this.textBounds.setTo(e,t,i,n):this.textBounds=new U.Rectangle(e,t,i,n),this.style.wordWrapWidth>i&&(this.style.wordWrapWidth=i)),this.updateTexture(),this},U.Text.prototype.updateTexture=function(){var e=this.texture.baseTexture,t=this.texture.crop,i=this.texture.frame,n=this.canvas.width,r=this.canvas.height;if(e.width=n,e.height=r,t.width=n,t.height=r,i.width=n,i.height=r,this.texture.width=n,this.texture.height=r,this._width=n,this._height=r,this.textBounds){var o=this.textBounds.x,a=this.textBounds.y;"right"===this.style.boundsAlignH?o+=this.textBounds.width-this.canvas.width/this.resolution:"center"===this.style.boundsAlignH&&(o+=this.textBounds.halfWidth-this.canvas.width/this.resolution/2),"bottom"===this.style.boundsAlignV?a+=this.textBounds.height-this.canvas.height/this.resolution:"middle"===this.style.boundsAlignV&&(a+=this.textBounds.halfHeight-this.canvas.height/this.resolution/2),this.pivot.x=-o,this.pivot.y=-a}this.renderable=0!==n&&0!==r,this.texture.requiresReTint=!0,this.texture.baseTexture.dirty()},U.Text.prototype._renderWebGL=function(e){this.dirty&&(this.updateText(),this.dirty=!1),PIXI.Sprite.prototype._renderWebGL.call(this,e)},U.Text.prototype._renderCanvas=function(e){this.dirty&&(this.updateText(),this.dirty=!1),PIXI.Sprite.prototype._renderCanvas.call(this,e)},U.Text.prototype.determineFontProperties=function(e){var t=U.Text.fontPropertiesCache[e];if(!t){t={};var i=U.Text.fontPropertiesCanvas,n=U.Text.fontPropertiesContext;n.font=e;var r=Math.ceil(n.measureText("|Mq").width),o=Math.ceil(n.measureText("|Mq").width),a=2*o;if(o=1.4*o|0,i.width=r,i.height=a,n.fillStyle="#f00",n.fillRect(0,0,r,a),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText("|Mq",0,o),!n.getImageData(0,0,r,a))return t.ascent=o,t.descent=o+6,t.fontSize=t.ascent+t.descent,U.Text.fontPropertiesCache[e]=t;var s,p,l=n.getImageData(0,0,r,a).data,h=l.length,u=4*r,d=0,c=!1;for(s=0;s<o;s++){for(p=0;p<u;p+=4)if(255!==l[d+p]){c=!0;break}if(c)break;d+=u}for(t.ascent=o-s,d=h-u,c=!1,s=a;o<s;s--){for(p=0;p<u;p+=4)if(255!==l[d+p]){c=!0;break}if(c)break;d-=u}t.descent=s-o,t.descent+=6,t.fontSize=t.ascent+t.descent,U.Text.fontPropertiesCache[e]=t}return t},U.Text.prototype.getBounds=function(e){return this.dirty&&(this.updateText(),this.dirty=!1),PIXI.Sprite.prototype.getBounds.call(this,e)},Object.defineProperty(U.Text.prototype,"text",{get:function(){return this._text},set:function(e){e!==this._text&&(this._text=e.toString()||"",this.dirty=!0,this.parent&&this.updateTransform())}}),Object.defineProperty(U.Text.prototype,"cssFont",{get:function(){return this.componentsToFont(this._fontComponents)},set:function(e){e=e||"bold 20pt Arial",this._fontComponents=this.fontToComponents(e),this.updateFont(this._fontComponents)}}),Object.defineProperty(U.Text.prototype,"font",{get:function(){return this._fontComponents.fontFamily},set:function(e){e=(e=e||"Arial").trim(),/^(?:inherit|serif|sans-serif|cursive|fantasy|monospace)$/.exec(e)||/['",]/.exec(e)||(e="'"+e+"'"),this._fontComponents.fontFamily=e,this.updateFont(this._fontComponents)}}),Object.defineProperty(U.Text.prototype,"fontSize",{get:function(){var e=this._fontComponents.fontSize;return e&&/(?:^0$|px$)/.exec(e)?parseInt(e,10):e},set:function(e){"number"==typeof(e=e||"0")&&(e+="px"),this._fontComponents.fontSize=e,this.updateFont(this._fontComponents)}}),Object.defineProperty(U.Text.prototype,"fontWeight",{get:function(){return this._fontComponents.fontWeight||"normal"},set:function(e){e=e||"normal",this._fontComponents.fontWeight=e,this.updateFont(this._fontComponents)}}),Object.defineProperty(U.Text.prototype,"fontStyle",{get:function(){return this._fontComponents.fontStyle||"normal"},set:function(e){e=e||"normal",this._fontComponents.fontStyle=e,this.updateFont(this._fontComponents)}}),Object.defineProperty(U.Text.prototype,"fontVariant",{get:function(){return this._fontComponents.fontVariant||"normal"},set:function(e){e=e||"normal",this._fontComponents.fontVariant=e,this.updateFont(this._fontComponents)}}),Object.defineProperty(U.Text.prototype,"fill",{get:function(){return this.style.fill},set:function(e){e!==this.style.fill&&(this.style.fill=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"align",{get:function(){return this.style.align},set:function(e){e!==this.style.align&&(this.style.align=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"resolution",{get:function(){return this._res},set:function(e){e!==this._res&&(this._res=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"tabs",{get:function(){return this.style.tabs},set:function(e){e!==this.style.tabs&&(this.style.tabs=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"boundsAlignH",{get:function(){return this.style.boundsAlignH},set:function(e){e!==this.style.boundsAlignH&&(this.style.boundsAlignH=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"boundsAlignV",{get:function(){return this.style.boundsAlignV},set:function(e){e!==this.style.boundsAlignV&&(this.style.boundsAlignV=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"stroke",{get:function(){return this.style.stroke},set:function(e){e!==this.style.stroke&&(this.style.stroke=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"strokeThickness",{get:function(){return this.style.strokeThickness},set:function(e){e!==this.style.strokeThickness&&(this.style.strokeThickness=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"wordWrap",{get:function(){return this.style.wordWrap},set:function(e){e!==this.style.wordWrap&&(this.style.wordWrap=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"wordWrapWidth",{get:function(){return this.style.wordWrapWidth},set:function(e){e!==this.style.wordWrapWidth&&(this.style.wordWrapWidth=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"lineSpacing",{get:function(){return this._lineSpacing},set:function(e){e!==this._lineSpacing&&(this._lineSpacing=parseFloat(e),this.dirty=!0,this.parent&&this.updateTransform())}}),Object.defineProperty(U.Text.prototype,"shadowOffsetX",{get:function(){return this.style.shadowOffsetX},set:function(e){e!==this.style.shadowOffsetX&&(this.style.shadowOffsetX=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"shadowOffsetY",{get:function(){return this.style.shadowOffsetY},set:function(e){e!==this.style.shadowOffsetY&&(this.style.shadowOffsetY=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"shadowColor",{get:function(){return this.style.shadowColor},set:function(e){e!==this.style.shadowColor&&(this.style.shadowColor=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"shadowBlur",{get:function(){return this.style.shadowBlur},set:function(e){e!==this.style.shadowBlur&&(this.style.shadowBlur=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"shadowStroke",{get:function(){return this.style.shadowStroke},set:function(e){e!==this.style.shadowStroke&&(this.style.shadowStroke=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"shadowFill",{get:function(){return this.style.shadowFill},set:function(e){e!==this.style.shadowFill&&(this.style.shadowFill=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(e){this.scale.x=e/this.texture.frame.width,this._width=e}}),Object.defineProperty(U.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(e){this.scale.y=e/this.texture.frame.height,this._height=e}}),U.Text.fontPropertiesCache={},U.Text.fontPropertiesCanvas=document.createElement("canvas"),U.Text.fontPropertiesContext=U.Text.fontPropertiesCanvas.getContext("2d"),U.BitmapText=function(e,t,i,n,r,o,a){t=t||0,i=i||0,n=n||"",r=r||"",o=o||32,a=a||"left",PIXI.DisplayObjectContainer.call(this),this.type=U.BITMAPTEXT,this.physicsType=U.SPRITE,this.textWidth=0,this.textHeight=0,this.anchor=new U.Point,this._prevAnchor=new U.Point,this._glyphs=[],this._maxWidth=0,this._text=r.toString()||"",this._data=e.cache.getBitmapFont(n),this._font=n,this._fontSize=o,this._align=a,this._tint=16777215,this.updateText(),this.dirty=!1,U.Component.Core.init.call(this,e,t,i,"",null)},U.BitmapText.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),U.BitmapText.prototype.constructor=U.BitmapText,U.Component.Core.install.call(U.BitmapText.prototype,["Angle","AutoCull","Bounds","Destroy","FixedToCamera","InputEnabled","InWorld","LifeSpan","PhysicsBody","Reset"]),U.BitmapText.prototype.preUpdatePhysics=U.Component.PhysicsBody.preUpdate,U.BitmapText.prototype.preUpdateLifeSpan=U.Component.LifeSpan.preUpdate,U.BitmapText.prototype.preUpdateInWorld=U.Component.InWorld.preUpdate,U.BitmapText.prototype.preUpdateCore=U.Component.Core.preUpdate,U.BitmapText.prototype.preUpdate=function(){return!!(this.preUpdatePhysics()&&this.preUpdateLifeSpan()&&this.preUpdateInWorld())&&this.preUpdateCore()},U.BitmapText.prototype.postUpdate=function(){U.Component.PhysicsBody.postUpdate.call(this),U.Component.FixedToCamera.postUpdate.call(this),this.body&&this.body.type===U.Physics.ARCADE&&(this.textWidth===this.body.sourceWidth&&this.textHeight===this.body.sourceHeight||this.body.setSize(this.textWidth,this.textHeight))},U.BitmapText.prototype.setText=function(e){this.text=e},U.BitmapText.prototype.scanLine=function(e,t,i){for(var n=0,r=0,o=-1,a=0,s=null,p=0<this._maxWidth?this._maxWidth:null,l=[],h=0;h<i.length;h++){var u=h===i.length-1;if(/(?:\r\n|\r|\n)/.test(i.charAt(h)))return{width:r,text:i.substr(0,h),end:u,chars:l};var d,c=i.charCodeAt(h),_=e.chars[c];void 0===_&&(c=32,_=e.chars[c]);var y=s&&_.kerning[s]?_.kerning[s]:0;if(/(\s)/.test(i.charAt(h))&&(o=h,a=r),d=(y+_.texture.width+_.xOffset)*t,p&&p<=r+d&&-1<o)return{width:a||r,text:i.substr(0,h-(h-o)),end:u,chars:l};r+=(_.xAdvance+y)*t,l.push(n+(_.xOffset+y)*t),n+=(_.xAdvance+y)*t,s=c}return{width:r,text:i,end:u,chars:l}},U.BitmapText.prototype.cleanText=function(e,t){void 0===t&&(t="");var i=this._data.font;if(!i)return"";for(var n=e.replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),r=0;r<n.length;r++){for(var o="",a=n[r],s=0;s<a.length;s++)o=i.chars[a.charCodeAt(s)]?o.concat(a[s]):o.concat(t);n[r]=o}return n.join("\n")},U.BitmapText.prototype.updateText=function(){var e=this._data.font;if(e){var t=this.text,i=this._fontSize/e.size,n=[],r=0;this.textWidth=0;do{(h=this.scanLine(e,i,t)).y=r,n.push(h),h.width>this.textWidth&&(this.textWidth=h.width),r+=e.lineHeight*i,t=t.substr(h.text.length+1)}while(!1===h.end);this.textHeight=r;for(var o=0,a=0,s=this.textWidth*this.anchor.x,p=this.textHeight*this.anchor.y,l=0;l<n.length;l++){var h=n[l];"right"===this._align?a=this.textWidth-h.width:"center"===this._align&&(a=(this.textWidth-h.width)/2);for(var u=0;u<h.text.length;u++){var d=h.text.charCodeAt(u),c=e.chars[d];void 0===c&&(d=32,c=e.chars[d]);var _=this._glyphs[o];_?_.texture=c.texture:((_=new PIXI.Sprite(c.texture)).name=h.text[u],this._glyphs.push(_)),_.position.x=h.chars[u]+a-s,_.position.y=h.y+c.yOffset*i-p,_.scale.set(i),_.tint=this.tint,_.texture.requiresReTint=!0,_.parent||this.addChild(_),o++}}for(l=o;l<this._glyphs.length;l++)this.removeChild(this._glyphs[l])}},U.BitmapText.prototype.purgeGlyphs=function(){for(var e=this._glyphs.length,t=[],i=0;i<this._glyphs.length;i++)this._glyphs[i].parent!==this?this._glyphs[i].destroy():t.push(this._glyphs[i]);return this._glyphs=[],this._glyphs=t,this.updateText(),e-t.length},U.BitmapText.prototype.updateTransform=function(){!this.dirty&&this.anchor.equals(this._prevAnchor)||(this.updateText(),this.dirty=!1,this._prevAnchor.copyFrom(this.anchor)),PIXI.DisplayObjectContainer.prototype.updateTransform.call(this)},Object.defineProperty(U.BitmapText.prototype,"align",{get:function(){return this._align},set:function(e){e===this._align||"left"!==e&&"center"!==e&&"right"!==e||(this._align=e,this.updateText())}}),Object.defineProperty(U.BitmapText.prototype,"tint",{get:function(){return this._tint},set:function(e){e!==this._tint&&(this._tint=e,this.updateText())}}),Object.defineProperty(U.BitmapText.prototype,"font",{get:function(){return this._font},set:function(e){e!==this._font&&(this._font=e.trim(),this._data=this.game.cache.getBitmapFont(this._font),this.updateText())}}),Object.defineProperty(U.BitmapText.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){(e=parseInt(e,10))!==this._fontSize&&0<e&&(this._fontSize=e,this.updateText())}}),Object.defineProperty(U.BitmapText.prototype,"text",{get:function(){return this._text},set:function(e){e!==this._text&&(this._text=e.toString()||"",this.updateText())}}),Object.defineProperty(U.BitmapText.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){e!==this._maxWidth&&(this._maxWidth=e,this.updateText())}}),Object.defineProperty(U.BitmapText.prototype,"smoothed",{get:function(){return!this._data.base.scaleMode},set:function(e){this._data.base.scaleMode=e?0:1}}),U.RetroFont=function(e,t,i,n,r,o,a,s,p,l){if(!e.cache.checkImageKey(t))return!1;null==o&&(o=e.cache.getImage(t).width/i),this.characterWidth=i,this.characterHeight=n,this.characterSpacingX=a||0,this.characterSpacingY=s||0,this.characterPerRow=o,this.offsetX=p||0,this.offsetY=l||0,this.align="left",this.multiLine=!1,this.autoUpperCase=!0,this.customSpacingX=0,this.customSpacingY=0,this.fixedWidth=0,this.fontSet=e.cache.getImage(t),this._text="",this.grabData=[],this.frameData=new U.FrameData;for(var h=this.offsetX,u=this.offsetY,d=0,c=0;c<r.length;c++){var _=this.frameData.addFrame(new U.Frame(c,h,u,this.characterWidth,this.characterHeight));this.grabData[r.charCodeAt(c)]=_.index,++d===this.characterPerRow?(d=0,h=this.offsetX,u+=this.characterHeight+this.characterSpacingY):h+=this.characterWidth+this.characterSpacingX}e.cache.updateFrameData(t,this.frameData),this.stamp=new U.Image(e,0,0,t,0),U.RenderTexture.call(this,e,100,100,"",U.scaleModes.NEAREST),this.type=U.RETROFONT},U.RetroFont.prototype=Object.create(U.RenderTexture.prototype),U.RetroFont.prototype.constructor=U.RetroFont,U.RetroFont.ALIGN_LEFT="left",U.RetroFont.ALIGN_RIGHT="right",U.RetroFont.ALIGN_CENTER="center",U.RetroFont.TEXT_SET1=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",U.RetroFont.TEXT_SET2=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",U.RetroFont.TEXT_SET3="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",U.RetroFont.TEXT_SET4="ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",U.RetroFont.TEXT_SET5="ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",U.RetroFont.TEXT_SET6="ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",U.RetroFont.TEXT_SET7="AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",U.RetroFont.TEXT_SET8="0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",U.RetroFont.TEXT_SET9="ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",U.RetroFont.TEXT_SET10="ABCDEFGHIJKLMNOPQRSTUVWXYZ",U.RetroFont.TEXT_SET11="ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789",U.RetroFont.prototype.setFixedWidth=function(e,t){void 0===t&&(t="left"),this.fixedWidth=e,this.align=t},U.RetroFont.prototype.setText=function(e,t,i,n,r,o){this.multiLine=t||!1,this.customSpacingX=i||0,this.customSpacingY=n||0,this.align=r||"left",this.autoUpperCase=!o,0<e.length&&(this.text=e)},U.RetroFont.prototype.buildRetroFontText=function(){var e=0,t=0;if(this.clear(),this.multiLine){var i=this._text.split("\n");0<this.fixedWidth?this.resize(this.fixedWidth,i.length*(this.characterHeight+this.customSpacingY)-this.customSpacingY,!0):this.resize(this.getLongestLine()*(this.characterWidth+this.customSpacingX),i.length*(this.characterHeight+this.customSpacingY)-this.customSpacingY,!0);for(var n=0;n<i.length;n++)e=0,this.align===U.RetroFont.ALIGN_RIGHT?e=this.width-i[n].length*(this.characterWidth+this.customSpacingX):this.align===U.RetroFont.ALIGN_CENTER&&(e=this.width/2-i[n].length*(this.characterWidth+this.customSpacingX)/2,e+=this.customSpacingX/2),e<0&&(e=0),this.pasteLine(i[n],e,t,this.customSpacingX),t+=this.characterHeight+this.customSpacingY}else 0<this.fixedWidth?this.resize(this.fixedWidth,this.characterHeight,!0):this.resize(this._text.length*(this.characterWidth+this.customSpacingX),this.characterHeight,!0),e=0,this.align===U.RetroFont.ALIGN_RIGHT?e=this.width-this._text.length*(this.characterWidth+this.customSpacingX):this.align===U.RetroFont.ALIGN_CENTER&&(e=this.width/2-this._text.length*(this.characterWidth+this.customSpacingX)/2,e+=this.customSpacingX/2),e<0&&(e=0),this.pasteLine(this._text,e,0,this.customSpacingX);this.requiresReTint=!0},U.RetroFont.prototype.pasteLine=function(e,t,i,n){for(var r=0;r<e.length;r++)if(" "===e.charAt(r))t+=this.characterWidth+n;else if(0<=this.grabData[e.charCodeAt(r)]&&(this.stamp.frame=this.grabData[e.charCodeAt(r)],this.renderXY(this.stamp,t,i,!1),(t+=this.characterWidth+n)>this.width))break},U.RetroFont.prototype.getLongestLine=function(){var e=0;if(0<this._text.length)for(var t=this._text.split("\n"),i=0;i<t.length;i++)t[i].length>e&&(e=t[i].length);return e},U.RetroFont.prototype.removeUnsupportedCharacters=function(e){for(var t="",i=0;i<this._text.length;i++){var n=this._text[i],r=n.charCodeAt(0);(0<=this.grabData[r]||!e&&"\n"===n)&&(t=t.concat(n))}return t},U.RetroFont.prototype.updateOffset=function(e,t){if(this.offsetX!==e||this.offsetY!==t){for(var i=e-this.offsetX,n=t-this.offsetY,r=this.game.cache.getFrameData(this.stamp.key).getFrames(),o=r.length;o--;)r[o].x+=i,r[o].y+=n;this.buildRetroFontText()}},Object.defineProperty(U.RetroFont.prototype,"text",{get:function(){return this._text},set:function(e){var t;(t=this.autoUpperCase?e.toUpperCase():e)!==this._text&&(this._text=t,this.removeUnsupportedCharacters(this.multiLine),this.buildRetroFontText())}}),Object.defineProperty(U.RetroFont.prototype,"smoothed",{get:function(){return this.stamp.smoothed},set:function(e){this.stamp.smoothed=e,this.buildRetroFontText()}}),U.Rope=function(e,t,i,n,r,o){this.points=[],this.points=o,this._hasUpdateAnimation=!1,this._updateAnimationCallback=null,t=t||0,i=i||0,n=n||null,r=r||null,this.type=U.ROPE,PIXI.Rope.call(this,U.Cache.DEFAULT,this.points),U.Component.Core.init.call(this,e,t,i,n,r)},U.Rope.prototype=Object.create(PIXI.Rope.prototype),U.Rope.prototype.constructor=U.Rope,U.Component.Core.install.call(U.Rope.prototype,["Angle","Animation","AutoCull","Bounds","BringToTop","Crop","Delta","Destroy","FixedToCamera","InWorld","LifeSpan","LoadTexture","Overlap","PhysicsBody","Reset","ScaleMinMax","Smoothed"]),U.Rope.prototype.preUpdatePhysics=U.Component.PhysicsBody.preUpdate,U.Rope.prototype.preUpdateLifeSpan=U.Component.LifeSpan.preUpdate,U.Rope.prototype.preUpdateInWorld=U.Component.InWorld.preUpdate,U.Rope.prototype.preUpdateCore=U.Component.Core.preUpdate,U.Rope.prototype.preUpdate=function(){return!!(this.preUpdatePhysics()&&this.preUpdateLifeSpan()&&this.preUpdateInWorld())&&this.preUpdateCore()},U.Rope.prototype.update=function(){this._hasUpdateAnimation&&this.updateAnimation.call(this)},U.Rope.prototype.reset=function(e,t){return U.Component.Reset.prototype.reset.call(this,e,t),this},Object.defineProperty(U.Rope.prototype,"updateAnimation",{get:function(){return this._updateAnimation},set:function(e){e&&"function"==typeof e?(this._hasUpdateAnimation=!0,this._updateAnimation=e):(this._hasUpdateAnimation=!1,this._updateAnimation=null)}}),Object.defineProperty(U.Rope.prototype,"segments",{get:function(){for(var e,t,i,n,r,o,a,s,p=[],l=0;l<this.points.length;l++)e=4*l,t=this.vertices[e]*this.scale.x,i=this.vertices[e+1]*this.scale.y,n=this.vertices[e+4]*this.scale.x,r=this.vertices[e+3]*this.scale.y,o=U.Math.difference(t,n),a=U.Math.difference(i,r),t+=this.world.x,i+=this.world.y,s=new U.Rectangle(t,i,o,a),p.push(s);return p}}),U.TileSprite=function(e,t,i,n,r,o,a){t=t||0,i=i||0,n=n||256,r=r||256,o=o||null,a=a||null,this.type=U.TILESPRITE,this.physicsType=U.SPRITE,this._scroll=new U.Point;var s=e.cache.getImage("__default",!0);PIXI.TilingSprite.call(this,new PIXI.Texture(s.base),n,r),U.Component.Core.init.call(this,e,t,i,o,a)},U.TileSprite.prototype=Object.create(PIXI.TilingSprite.prototype),U.TileSprite.prototype.constructor=U.TileSprite,U.Component.Core.install.call(U.TileSprite.prototype,["Angle","Animation","AutoCull","Bounds","BringToTop","Destroy","FixedToCamera","Health","InCamera","InputEnabled","InWorld","LifeSpan","LoadTexture","Overlap","PhysicsBody","Reset","Smoothed"]),U.TileSprite.prototype.preUpdatePhysics=U.Component.PhysicsBody.preUpdate,U.TileSprite.prototype.preUpdateLifeSpan=U.Component.LifeSpan.preUpdate,U.TileSprite.prototype.preUpdateInWorld=U.Component.InWorld.preUpdate,U.TileSprite.prototype.preUpdateCore=U.Component.Core.preUpdate,U.TileSprite.prototype.preUpdate=function(){return 0!==this._scroll.x&&(this.tilePosition.x+=this._scroll.x*this.game.time.physicsElapsed),0!==this._scroll.y&&(this.tilePosition.y+=this._scroll.y*this.game.time.physicsElapsed),!!(this.preUpdatePhysics()&&this.preUpdateLifeSpan()&&this.preUpdateInWorld())&&this.preUpdateCore()},U.TileSprite.prototype.autoScroll=function(e,t){this._scroll.set(e,t)},U.TileSprite.prototype.stopScroll=function(){this._scroll.set(0,0)},U.TileSprite.prototype.destroy=function(e){U.Component.Destroy.prototype.destroy.call(this,e),PIXI.TilingSprite.prototype.destroy.call(this)},U.TileSprite.prototype.reset=function(e,t){return U.Component.Reset.prototype.reset.call(this,e,t),this.tilePosition.x=0,this.tilePosition.y=0,this},U.Device=function(){this.deviceReadyAt=0,this.initialized=!1,this.desktop=!1,this.iOS=!1,this.iOSVersion=0,this.cocoonJS=!1,this.cocoonJSApp=!1,this.cordova=!1,this.node=!1,this.nodeWebkit=!1,this.electron=!1,this.ejecta=!1,this.crosswalk=!1,this.android=!1,this.chromeOS=!1,this.linux=!1,this.macOS=!1,this.windows=!1,this.windowsPhone=!1,this.canvas=!1,this.canvasBitBltShift=null,this.webGL=!1,this.file=!1,this.fileSystem=!1,this.localStorage=!1,this.worker=!1,this.css3D=!1,this.pointerLock=!1,this.typedArray=!1,this.vibration=!1,this.getUserMedia=!0,this.quirksMode=!1,this.touch=!1,this.mspointer=!1,this.wheelEvent=null,this.arora=!1,this.chrome=!1,this.chromeVersion=0,this.epiphany=!1,this.firefox=!1,this.firefoxVersion=0,this.ie=!1,this.ieVersion=0,this.trident=!1,this.tridentVersion=0,this.edge=!1,this.mobileSafari=!1,this.midori=!1,this.opera=!1,this.safari=!1,this.safariVersion=0,this.webApp=!1,this.silk=!1,this.audioData=!1,this.webAudio=!1,this.ogg=!1,this.opus=!1,this.mp3=!1,this.wav=!1,this.m4a=!1,this.webm=!1,this.dolby=!1,this.oggVideo=!1,this.h264Video=!1,this.mp4Video=!1,this.webmVideo=!1,this.vp9Video=!1,this.hlsVideo=!1,this.iPhone=!1,this.iPhone4=!1,this.iPad=!1,this.pixelRatio=0,this.littleEndian=!1,this.LITTLE_ENDIAN=!1,this.support32bit=!1,this.fullscreen=!1,this.requestFullscreen="",this.cancelFullscreen="",this.fullscreenKeyboard=!1},U.Device=new U.Device,U.Device.onInitialized=new U.Signal,U.Device.whenReady=function(e,t,i){var n=this._readyCheck;if(this.deviceReadyAt||!n)e.call(t,this);else if(n._monitor||i)n._queue=n._queue||[],n._queue.push([e,t]);else{n._monitor=n.bind(this),n._queue=n._queue||[],n._queue.push([e,t]);var r=void 0!==window.cordova,o=navigator.isCocoonJS;"complete"===document.readyState||"interactive"===document.readyState?window.setTimeout(n._monitor,0):r&&!o?document.addEventListener("deviceready",n._monitor,!1):(document.addEventListener("DOMContentLoaded",n._monitor,!1),window.addEventListener("load",n._monitor,!1))}},U.Device._readyCheck=function(){var e=this._readyCheck;if(document.body){if(!this.deviceReadyAt){var t;for(this.deviceReadyAt=Date.now(),document.removeEventListener("deviceready",e._monitor),document.removeEventListener("DOMContentLoaded",e._monitor),window.removeEventListener("load",e._monitor),this._initialize(),this.initialized=!0,this.onInitialized.dispatch(this);t=e._queue.shift();){var i=t[0],n=t[1];i.call(n,this)}this._readyCheck=null,this._initialize=null,this.onInitialized=null}}else window.setTimeout(e._monitor,20)},U.Device._initialize=function(){var e,t,i,r=this;!function(){var e=navigator.userAgent;/Playstation Vita/.test(e)?r.vita=!0:/Kindle/.test(e)||/\bKF[A-Z][A-Z]+/.test(e)||/Silk.*Mobile Safari/.test(e)?r.kindle=!0:/Android/.test(e)?r.android=!0:/CrOS/.test(e)?r.chromeOS=!0:/iP[ao]d|iPhone/i.test(e)?(r.iOS=!0,navigator.appVersion.match(/OS (\d+)/),r.iOSVersion=parseInt(RegExp.$1,10)):/Linux/.test(e)?r.linux=!0:/Mac OS/.test(e)?r.macOS=!0:/Windows/.test(e)&&(r.windows=!0),(/Windows Phone/i.test(e)||/IEMobile/i.test(e))&&(r.android=!1,r.iOS=!1,r.macOS=!1,r.windows=!0,r.windowsPhone=!0);var t=/Silk/.test(e);(r.windows||r.macOS||r.linux&&!t||r.chromeOS)&&(r.desktop=!0),(r.windowsPhone||/Windows NT/i.test(e)&&/Touch/i.test(e))&&(r.desktop=!1)}(),function(){var e=navigator.userAgent;if(/Arora/.test(e)?r.arora=!0:/Edge\/\d+/.test(e)?r.edge=!0:/Chrome\/(\d+)/.test(e)&&!r.windowsPhone?(r.chrome=!0,r.chromeVersion=parseInt(RegExp.$1,10)):/Epiphany/.test(e)?r.epiphany=!0:/Firefox\D+(\d+)/.test(e)?(r.firefox=!0,r.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(e)&&r.iOS?r.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(e)?(r.ie=!0,r.ieVersion=parseInt(RegExp.$1,10)):/Midori/.test(e)?r.midori=!0:/Opera/.test(e)?r.opera=!0:/Safari\/(\d+)/.test(e)&&!r.windowsPhone?(r.safari=!0,/Version\/(\d+)\./.test(e)&&(r.safariVersion=parseInt(RegExp.$1,10))):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(e)&&(r.ie=!0,r.trident=!0,r.tridentVersion=parseInt(RegExp.$1,10),r.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(e)&&(r.silk=!0),navigator.standalone&&(r.webApp=!0),void 0!==window.cordova&&(r.cordova=!0),"undefined"!=typeof process&&"undefined"!=typeof require&&(r.node=!0),r.node&&"object"==typeof process.versions&&(r.nodeWebkit=!!process.versions["node-webkit"],r.electron=!!process.versions.electron),navigator.isCocoonJS&&(r.cocoonJS=!0),r.cocoonJS)try{r.cocoonJSApp="undefined"!=typeof CocoonJS}catch(e){r.cocoonJSApp=!1}void 0!==window.ejecta&&(r.ejecta=!0),/Crosswalk/.test(e)&&(r.crosswalk=!0)}(),function(){r.audioData=!!window.Audio,r.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var e=document.createElement("audio");try{if(e.canPlayType&&(e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(r.ogg=!0),(e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||e.canPlayType("audio/opus;").replace(/^no$/,""))&&(r.opus=!0),e.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(r.mp3=!0),e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(r.wav=!0),(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;").replace(/^no$/,""))&&(r.m4a=!0),e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(r.webm=!0),""!==e.canPlayType('audio/mp4;codecs="ec-3"')))if(r.edge)r.dolby=!0;else if(r.safari&&9<=r.safariVersion&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var t=parseInt(RegExp.$1,10),i=parseInt(RegExp.$2,10);(10===t&&11<=i||10<t)&&(r.dolby=!0)}}catch(e){}}(),function(){var e=document.createElement("video");try{e.canPlayType&&(e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(r.oggVideo=!0),e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(r.h264Video=!0,r.mp4Video=!0),e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(r.webmVideo=!0),e.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(r.vp9Video=!0),e.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(r.hlsVideo=!0))}catch(e){}}(),function(){var e,t=document.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var n in document.body.insertBefore(t,null),i)void 0!==t.style[n]&&(t.style[n]="translate3d(1px,1px,1px)",e=window.getComputedStyle(t).getPropertyValue(i[n]));document.body.removeChild(t),r.css3D=void 0!==e&&0<e.length&&"none"!==e}(),r.pixelRatio=window.devicePixelRatio||1,r.iPhone=-1!==navigator.userAgent.toLowerCase().indexOf("iphone"),r.iPhone4=2===r.pixelRatio&&r.iPhone,r.iPad=-1!==navigator.userAgent.toLowerCase().indexOf("ipad"),"undefined"!=typeof Int8Array?r.typedArray=!0:r.typedArray=!1,"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(r.littleEndian=(e=new ArrayBuffer(4),t=new Uint8Array(e),i=new Uint32Array(e),t[0]=161,t[1]=178,t[2]=195,t[3]=212,3569595041===i[0]||2712847316!==i[0]&&null),r.LITTLE_ENDIAN=r.littleEndian),r.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==r.littleEndian&&function(){if(void 0===Uint8ClampedArray)return!1;var e=PIXI.CanvasPool.create(this,1,1).getContext("2d");if(!e)return!1;var t=e.createImageData(1,1);return PIXI.CanvasPool.remove(this),t.data instanceof Uint8ClampedArray}(),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(r.vibration=!0),function(){r.canvas=!!window.CanvasRenderingContext2D||r.cocoonJS;try{r.localStorage=!!localStorage.getItem}catch(e){r.localStorage=!1}r.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),r.fileSystem=!!window.requestFileSystem,r.webGL=function(){try{var e=document.createElement("canvas");return e.screencanvas=!1,!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){return!1}}(),r.webGL=!!r.webGL,r.worker=!!window.Worker,r.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,r.quirksMode="CSS1Compat"!==document.compatMode,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,r.getUserMedia=r.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,r.firefox&&r.firefoxVersion<21&&(r.getUserMedia=!1),!r.iOS&&(r.ie||r.firefox||r.chrome)&&(r.canvasBitBltShift=!0),(r.safari||r.mobileSafari)&&(r.canvasBitBltShift=!1)}(),function(){for(var e=["requestFullscreen","requestFullScreen","webkitRequestFullscreen","webkitRequestFullScreen","msRequestFullscreen","msRequestFullScreen","mozRequestFullScreen","mozRequestFullscreen"],t=document.createElement("div"),i=0;i<e.length;i++)if(t[e[i]]){r.fullscreen=!0,r.requestFullscreen=e[i];break}var n=["cancelFullScreen","exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","msCancelFullScreen","msExitFullscreen","mozCancelFullScreen","mozExitFullscreen"];if(r.fullscreen)for(i=0;i<n.length;i++)if(document[n[i]]){r.cancelFullscreen=n[i];break}window.Element&&Element.ALLOW_KEYBOARD_INPUT&&(r.fullscreenKeyboard=!0)}(),("ontouchstart"in document.documentElement||window.navigator.maxTouchPoints&&1<=window.navigator.maxTouchPoints)&&(r.touch=!0),(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&(r.mspointer=!0),r.cocoonJS||("onwheel"in window||r.ie&&"WheelEvent"in window?r.wheelEvent="wheel":"onmousewheel"in window?r.wheelEvent="mousewheel":r.firefox&&"MouseScrollEvent"in window&&(r.wheelEvent="DOMMouseScroll"))},U.Device.canPlayAudio=function(e){return!("mp3"!==e||!this.mp3)||(!("ogg"!==e||!this.ogg&&!this.opus)||(!("m4a"!==e||!this.m4a)||(!("opus"!==e||!this.opus)||(!("wav"!==e||!this.wav)||(!("webm"!==e||!this.webm)||!("mp4"!==e||!this.dolby))))))},U.Device.canPlayVideo=function(e){return!("webm"!==e||!this.webmVideo&&!this.vp9Video)||(!("mp4"!==e||!this.mp4Video&&!this.h264Video)||(!("ogg"!==e&&"ogv"!==e||!this.oggVideo)||!("mpeg"!==e||!this.hlsVideo)))},U.Device.isConsoleOpen=function(){return!(!window.console||!window.console.firebug)||!(!window.console||(console.clear,!console.profiles))&&0<console.profiles.length},U.Device.isAndroidStockBrowser=function(){var e=window.navigator.userAgent.match(/Android.*AppleWebKit\/([\d.]+)/);return e&&e[1]<537},U.Canvas={create:function(e,t,i,n,r){t=t||256,i=i||256;var o=r?document.createElement("canvas"):PIXI.CanvasPool.create(e,t,i);return"string"==typeof n&&""!==n&&(o.id=n),o.width=t,o.height=i,o.style.display="block",o},setBackgroundColor:function(e,t){return t=t||"rgb(0,0,0)",e.style.backgroundColor=t,e},setTouchAction:function(e,t){return t=t||"none",e.style.msTouchAction=t,e.style["ms-touch-action"]=t,e.style["touch-action"]=t,e},setUserSelect:function(e,t){return t=t||"none",e.style["-webkit-touch-callout"]=t,e.style["-webkit-user-select"]=t,e.style["-khtml-user-select"]=t,e.style["-moz-user-select"]=t,e.style["-ms-user-select"]=t,e.style["user-select"]=t,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e},addToDOM:function(e,t,i){var n;return void 0===i&&(i=!0),t&&("string"==typeof t?n=document.getElementById(t):"object"==typeof t&&1===t.nodeType&&(n=t)),n||(n=document.body),i&&n.style&&(n.style.overflow="hidden"),n.appendChild(e),e},removeFromDOM:function(e){e.parentNode&&e.parentNode.removeChild(e)},setTransform:function(e,t,i,n,r,o,a){return e.setTransform(n,o,a,r,t,i),e},setSmoothingEnabled:function(e,t){var i=U.Canvas.getSmoothingPrefix(e);return i&&(e[i]=t),e},getSmoothingPrefix:function(e){var t=["i","webkitI","msI","mozI","oI"];for(var i in t){var n=t[i]+"mageSmoothingEnabled";if(n in e)return n}return null},getSmoothingEnabled:function(e){var t=U.Canvas.getSmoothingPrefix(e);if(t)return e[t]},setImageRenderingCrisp:function(e){for(var t=["optimizeSpeed","crisp-edges","-moz-crisp-edges","-webkit-optimize-contrast","optimize-contrast","pixelated"],i=0;i<t.length;i++)e.style["image-rendering"]=t[i];return e.style.msInterpolationMode="nearest-neighbor",e},setImageRenderingBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}},U.RequestAnimationFrame=function(e,t){void 0===t&&(t=!1),this.game=e,this.isRunning=!1,this.forceSetTimeOut=t;for(var i=["ms","moz","webkit","o"],n=0;n<i.length&&!window.requestAnimationFrame;n++)window.requestAnimationFrame=window[i[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[n]+"CancelAnimationFrame"];this._isSetTimeOut=!1,this._onLoop=null,this._timeOutID=null},U.RequestAnimationFrame.prototype={start:function(){this.isRunning=!0;var t=this;!window.requestAnimationFrame||this.forceSetTimeOut?(this._isSetTimeOut=!0,this._onLoop=function(){return t.updateSetTimeout()},this._timeOutID=window.setTimeout(this._onLoop,0)):(this._isSetTimeOut=!1,this._onLoop=function(e){return t.updateRAF(e)},this._timeOutID=window.requestAnimationFrame(this._onLoop))},updateRAF:function(e){this.isRunning&&(this.game.update(Math.floor(e)),this._timeOutID=window.requestAnimationFrame(this._onLoop))},updateSetTimeout:function(){this.isRunning&&(this.game.update(Date.now()),this._timeOutID=window.setTimeout(this._onLoop,this.game.time.timeToCall))},stop:function(){this._isSetTimeOut?clearTimeout(this._timeOutID):window.cancelAnimationFrame(this._timeOutID),this.isRunning=!1},isSetTimeOut:function(){return this._isSetTimeOut},isRAF:function(){return!1===this._isSetTimeOut}},U.RequestAnimationFrame.prototype.constructor=U.RequestAnimationFrame,U.Math={PI2:2*Math.PI,between:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},fuzzyEqual:function(e,t,i){return void 0===i&&(i=1e-4),Math.abs(e-t)<i},fuzzyLessThan:function(e,t,i){return void 0===i&&(i=1e-4),e<t+i},fuzzyGreaterThan:function(e,t,i){return void 0===i&&(i=1e-4),t-i<e},fuzzyCeil:function(e,t){return void 0===t&&(t=1e-4),Math.ceil(e-t)},fuzzyFloor:function(e,t){return void 0===t&&(t=1e-4),Math.floor(e+t)},average:function(){for(var e=0,t=arguments.length,i=0;i<t;i++)e+=+arguments[i];return e/t},shear:function(e){return e%1},snapTo:function(e,t,i){return void 0===i&&(i=0),0===t?e:(e-=i,i+(e=t*Math.round(e/t)))},snapToFloor:function(e,t,i){return void 0===i&&(i=0),0===t?e:(e-=i,i+(e=t*Math.floor(e/t)))},snapToCeil:function(e,t,i){return void 0===i&&(i=0),0===t?e:(e-=i,i+(e=t*Math.ceil(e/t)))},roundTo:function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=10);var n=Math.pow(i,-t);return Math.round(e*n)/n},floorTo:function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=10);var n=Math.pow(i,-t);return Math.floor(e*n)/n},ceilTo:function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=10);var n=Math.pow(i,-t);return Math.ceil(e*n)/n},rotateToAngle:function(e,t,i){return void 0===i&&(i=.05),e===t||(Math.abs(t-e)<=i||Math.abs(t-e)>=U.Math.PI2-i?e=t:(Math.abs(t-e)>Math.PI&&(t<e?t+=U.Math.PI2:t-=U.Math.PI2),e<t?e+=i:t<e&&(e-=i))),e},getShortestAngle:function(e,t){var i=t-e;return 0===i?0:i-360*Math.floor((i- -180)/360)},angleBetween:function(e,t,i,n){return Math.atan2(n-t,i-e)},angleBetweenY:function(e,t,i,n){return Math.atan2(i-e,n-t)},angleBetweenPoints:function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},angleBetweenPointsY:function(e,t){return Math.atan2(t.x-e.x,t.y-e.y)},reverseAngle:function(e){return this.normalizeAngle(e+Math.PI,!0)},normalizeAngle:function(e){return 0<=(e%=2*Math.PI)?e:e+2*Math.PI},maxAdd:function(e,t,i){return Math.min(e+t,i)},minSub:function(e,t,i){return Math.max(e-t,i)},wrap:function(e,t,i){var n=i-t;if(n<=0)return 0;var r=(e-t)%n;return r<0&&(r+=n),r+t},wrapValue:function(e,t,i){return((e=Math.abs(e))+(t=Math.abs(t)))%(i=Math.abs(i))},isOdd:function(e){return!!(1&e)},isEven:function(e){return!(1&e)},min:function(){if(1===arguments.length&&"object"==typeof arguments[0])var e=arguments[0];else e=arguments;for(var t=1,i=0,n=e.length;t<n;t++)e[t]<e[i]&&(i=t);return e[i]},max:function(){if(1===arguments.length&&"object"==typeof arguments[0])var e=arguments[0];else e=arguments;for(var t=1,i=0,n=e.length;t<n;t++)e[t]>e[i]&&(i=t);return e[i]},minProperty:function(e){if(2===arguments.length&&"object"==typeof arguments[1])var t=arguments[1];else t=arguments.slice(1);for(var i=1,n=0,r=t.length;i<r;i++)t[i][e]<t[n][e]&&(n=i);return t[n][e]},maxProperty:function(e){if(2===arguments.length&&"object"==typeof arguments[1])var t=arguments[1];else t=arguments.slice(1);for(var i=1,n=0,r=t.length;i<r;i++)t[i][e]>t[n][e]&&(n=i);return t[n][e]},wrapAngle:function(e,t){return t?this.wrap(e,-Math.PI,Math.PI):this.wrap(e,-180,180)},linearInterpolation:function(e,t){var i=e.length-1,n=i*t,r=Math.floor(n);return t<0?this.linear(e[0],e[1],n):1<t?this.linear(e[i],e[i-1],i-n):this.linear(e[r],e[i<r+1?i:r+1],n-r)},bezierInterpolation:function(e,t){for(var i=0,n=e.length-1,r=0;r<=n;r++)i+=Math.pow(1-t,n-r)*Math.pow(t,r)*e[r]*this.bernstein(n,r);return i},catmullRomInterpolation:function(e,t){var i=e.length-1,n=i*t,r=Math.floor(n);return e[0]===e[i]?(t<0&&(r=Math.floor(n=i*(1+t))),this.catmullRom(e[(r-1+i)%i],e[r],e[(r+1)%i],e[(r+2)%i],n-r)):t<0?e[0]-(this.catmullRom(e[0],e[0],e[1],e[1],-n)-e[0]):1<t?e[i]-(this.catmullRom(e[i],e[i],e[i-1],e[i-1],n-i)-e[i]):this.catmullRom(e[r?r-1:0],e[r],e[i<r+1?i:r+1],e[i<r+2?i:r+2],n-r)},linear:function(e,t,i){return(t-e)*i+e},bernstein:function(e,t){return this.factorial(e)/this.factorial(t)/this.factorial(e-t)},factorial:function(e){if(0===e)return 1;for(var t=e;--e;)t*=e;return t},catmullRom:function(e,t,i,n,r){var o=.5*(i-e),a=.5*(n-t),s=r*r;return(2*t-2*i+o+a)*(r*s)+(-3*t+3*i-2*o-a)*s+o*r+t},difference:function(e,t){return Math.abs(e-t)},roundAwayFromZero:function(e){return 0<e?Math.ceil(e):Math.floor(e)},sinCosGenerator:function(e,t,i,n){void 0===t&&(t=1),void 0===i&&(i=1),void 0===n&&(n=1);for(var r=t,o=i,a=n*Math.PI/e,s=[],p=[],l=0;l<e;l++)r+=(o-=r*a)*a,s[l]=o,p[l]=r;return{sin:p,cos:s,length:e}},distance:function(e,t,i,n){var r=e-i,o=t-n;return Math.sqrt(r*r+o*o)},distanceSq:function(e,t,i,n){var r=e-i,o=t-n;return r*r+o*o},distancePow:function(e,t,i,n,r){return void 0===r&&(r=2),Math.sqrt(Math.pow(i-e,r)+Math.pow(n-t,r))},clamp:function(e,t,i){return e<t?t:i<e?i:e},clampBottom:function(e,t){return e<t?t:e},within:function(e,t,i){return Math.abs(e-t)<=i},mapLinear:function(e,t,i,n,r){return n+(e-t)*(r-n)/(i-t)},smoothstep:function(e,t,i){return(e=Math.max(0,Math.min(1,(e-t)/(i-t))))*e*(3-2*e)},smootherstep:function(e,t,i){return(e=Math.max(0,Math.min(1,(e-t)/(i-t))))*e*e*(e*(6*e-15)+10)},sign:function(e){return e<0?-1:0<e?1:0},percent:function(e,t,i){return void 0===i&&(i=0),t<e||t<i?1:e<i||e<i?0:(e-i)/t}};var a=Math.PI/180,s=180/Math.PI;return U.Math.degToRad=function(e){return e*a},U.Math.radToDeg=function(e){return e*s},U.RandomDataGenerator=function(e){void 0===e&&(e=[]),this.c=1,this.s0=0,this.s1=0,this.s2=0,"string"==typeof e?this.state(e):this.sow(e)},U.RandomDataGenerator.prototype={rnd:function(){var e=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|e,this.s0=this.s1,this.s1=this.s2,this.s2=e-this.c,this.s2},sow:function(e){if(this.s0=this.hash(" "),this.s1=this.hash(this.s0),this.s2=this.hash(this.s1),this.c=1,e)for(var t=0;t<e.length&&null!=e[t];t++){var i=e[t];this.s0-=this.hash(i),this.s0+=~~(this.s0<0),this.s1-=this.hash(i),this.s1+=~~(this.s1<0),this.s2-=this.hash(i),this.s2+=~~(this.s2<0)}},hash:function(e){var t,i,n;for(n=4022871197,e=e.toString(),i=0;i<e.length;i++)t=.02519603282416938*(n+=e.charCodeAt(i)),t-=n=t>>>0,n=(t*=n)>>>0,n+=4294967296*(t-=n);return 2.3283064365386963e-10*(n>>>0)},integer:function(){return 4294967296*this.rnd.apply(this)},frac:function(){return this.rnd.apply(this)+11102230246251565e-32*(2097152*this.rnd.apply(this)|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(e,t){return Math.floor(this.realInRange(0,t-e+1)+e)},between:function(e,t){return this.integerInRange(e,t)},realInRange:function(e,t){return this.frac()*(t-e)+e},normal:function(){return 1-2*this.frac()},uuid:function(){var e="",t="";for(t=e="";e++<36;t+=~e%5|3*e&4?(15^e?8^this.frac()*(20^e?16:4):4).toString(16):"-");return t},pick:function(e){return e[this.integerInRange(0,e.length-1)]},sign:function(){return this.pick([-1,1])},weightedPick:function(e){return e[~~(Math.pow(this.frac(),2)*(e.length-1)+.5)]},timestamp:function(e,t){return this.realInRange(e||9466848e5,t||1577862e6)},angle:function(){return this.integerInRange(-180,180)},state:function(e){return"string"==typeof e&&e.match(/^!rnd/)&&(e=e.split(","),this.c=parseFloat(e[1]),this.s0=parseFloat(e[2]),this.s1=parseFloat(e[3]),this.s2=parseFloat(e[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")}},U.RandomDataGenerator.prototype.constructor=U.RandomDataGenerator,U.QuadTree=function(e,t,i,n,r,o,a){this.maxObjects=10,this.maxLevels=4,this.level=0,this.bounds={},this.objects=[],this.nodes=[],this._empty=[],this.reset(e,t,i,n,r,o,a)},U.QuadTree.prototype={reset:function(e,t,i,n,r,o,a){this.maxObjects=r||10,this.maxLevels=o||4,this.level=a||0,this.bounds={x:Math.round(e),y:Math.round(t),width:i,height:n,subWidth:Math.floor(i/2),subHeight:Math.floor(n/2),right:Math.round(e)+Math.floor(i/2),bottom:Math.round(t)+Math.floor(n/2)},this.objects.length=0,this.nodes.length=0},populate:function(e){e.forEach(this.populateHandler,this,!0)},populateHandler:function(e){e.body&&e.exists&&this.insert(e.body)},split:function(){this.nodes[0]=new U.QuadTree(this.bounds.right,this.bounds.y,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level+1),this.nodes[1]=new U.QuadTree(this.bounds.x,this.bounds.y,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level+1),this.nodes[2]=new U.QuadTree(this.bounds.x,this.bounds.bottom,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level+1),this.nodes[3]=new U.QuadTree(this.bounds.right,this.bounds.bottom,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level+1)},insert:function(e){var t,i=0;if(null==this.nodes[0]||-1===(t=this.getIndex(e))){if(this.objects.push(e),this.objects.length>this.maxObjects&&this.level<this.maxLevels)for(null==this.nodes[0]&&this.split();i<this.objects.length;)-1!==(t=this.getIndex(this.objects[i]))?this.nodes[t].insert(this.objects.splice(i,1)[0]):i++}else this.nodes[t].insert(e)},getIndex:function(e){var t=-1;return e.x<this.bounds.right&&e.right<this.bounds.right?e.y<this.bounds.bottom&&e.bottom<this.bounds.bottom?t=1:e.y>this.bounds.bottom&&(t=2):e.x>this.bounds.right&&(e.y<this.bounds.bottom&&e.bottom<this.bounds.bottom?t=0:e.y>this.bounds.bottom&&(t=3)),t},retrieve:function(e){if(e instanceof U.Rectangle)var t=this.objects,i=this.getIndex(e);else{if(!e.body)return this._empty;t=this.objects,i=this.getIndex(e.body)}return this.nodes[0]&&(t=-1!==i?t.concat(this.nodes[i].retrieve(e)):(t=(t=(t=t.concat(this.nodes[0].retrieve(e))).concat(this.nodes[1].retrieve(e))).concat(this.nodes[2].retrieve(e))).concat(this.nodes[3].retrieve(e))),t},clear:function(){this.objects.length=0;for(var e=this.nodes.length;e--;)this.nodes[e].clear(),this.nodes.splice(e,1);this.nodes.length=0}},U.QuadTree.prototype.constructor=U.QuadTree,U.Net=function(e){this.game=e},U.Net.prototype={getHostName:function(){return window.location&&window.location.hostname?window.location.hostname:null},checkDomainName:function(e){return-1!==window.location.hostname.indexOf(e)},updateQueryString:function(e,t,i,n){void 0===i&&(i=!1),void 0!==n&&""!==n||(n=window.location.href);var r="",o=new RegExp("([?|&])"+e+"=.*?(&|#|$)(.*)","gi");if(o.test(n))r=null!=t?n.replace(o,"$1"+e+"="+t+"$2$3"):n.replace(o,"$1$3").replace(/(&|\?)$/,"");else if(null!=t){var a=-1!==n.indexOf("?")?"&":"?",s=n.split("#");n=s[0]+a+e+"="+t,s[1]&&(n+="#"+s[1]),r=n}else r=n;if(!i)return r;window.location.href=r},getQueryString:function(e){void 0===e&&(e="");var t={},i=location.search.substring(1).split("&");for(var n in i){var r=i[n].split("=");if(1<r.length){if(e&&e===this.decodeURI(r[0]))return this.decodeURI(r[1]);t[this.decodeURI(r[0])]=this.decodeURI(r[1])}}return t},decodeURI:function(e){return decodeURIComponent(e.replace(/\+/g," "))}},U.Net.prototype.constructor=U.Net,U.TweenManager=function(e){this.game=e,this.frameBased=!1,this._tweens=[],this._add=[],this.easeMap={Power0:U.Easing.Power0,Power1:U.Easing.Power1,Power2:U.Easing.Power2,Power3:U.Easing.Power3,Power4:U.Easing.Power4,Linear:U.Easing.Linear.None,Quad:U.Easing.Quadratic.Out,Cubic:U.Easing.Cubic.Out,Quart:U.Easing.Quartic.Out,Quint:U.Easing.Quintic.Out,Sine:U.Easing.Sinusoidal.Out,Expo:U.Easing.Exponential.Out,Circ:U.Easing.Circular.Out,Elastic:U.Easing.Elastic.Out,Back:U.Easing.Back.Out,Bounce:U.Easing.Bounce.Out,"Quad.easeIn":U.Easing.Quadratic.In,"Cubic.easeIn":U.Easing.Cubic.In,"Quart.easeIn":U.Easing.Quartic.In,"Quint.easeIn":U.Easing.Quintic.In,"Sine.easeIn":U.Easing.Sinusoidal.In,"Expo.easeIn":U.Easing.Exponential.In,"Circ.easeIn":U.Easing.Circular.In,"Elastic.easeIn":U.Easing.Elastic.In,"Back.easeIn":U.Easing.Back.In,"Bounce.easeIn":U.Easing.Bounce.In,"Quad.easeOut":U.Easing.Quadratic.Out,"Cubic.easeOut":U.Easing.Cubic.Out,"Quart.easeOut":U.Easing.Quartic.Out,"Quint.easeOut":U.Easing.Quintic.Out,"Sine.easeOut":U.Easing.Sinusoidal.Out,"Expo.easeOut":U.Easing.Exponential.Out,"Circ.easeOut":U.Easing.Circular.Out,"Elastic.easeOut":U.Easing.Elastic.Out,"Back.easeOut":U.Easing.Back.Out,"Bounce.easeOut":U.Easing.Bounce.Out,"Quad.easeInOut":U.Easing.Quadratic.InOut,"Cubic.easeInOut":U.Easing.Cubic.InOut,"Quart.easeInOut":U.Easing.Quartic.InOut,"Quint.easeInOut":U.Easing.Quintic.InOut,"Sine.easeInOut":U.Easing.Sinusoidal.InOut,"Expo.easeInOut":U.Easing.Exponential.InOut,"Circ.easeInOut":U.Easing.Circular.InOut,"Elastic.easeInOut":U.Easing.Elastic.InOut,"Back.easeInOut":U.Easing.Back.InOut,"Bounce.easeInOut":U.Easing.Bounce.InOut},this.game.onPause.add(this._pauseAll,this),this.game.onResume.add(this._resumeAll,this)},U.TweenManager.prototype={getAll:function(){return this._tweens},removeAll:function(){for(var e=0;e<this._tweens.length;e++)this._tweens[e].pendingDelete=!0;this._add=[]},removeFrom:function(e,t){if(void 0===t&&(t=!0),Array.isArray(e))for(i=0,n=e.length;i<n;i++)this.removeFrom(e[i]);else if(e.type===U.GROUP&&t)for(var i=0,n=e.children.length;i<n;i++)this.removeFrom(e.children[i]);else{for(i=0,n=this._tweens.length;i<n;i++)e===this._tweens[i].target&&this.remove(this._tweens[i]);for(i=0,n=this._add.length;i<n;i++)e===this._add[i].target&&this.remove(this._add[i])}},add:function(e){(e._manager=this)._add.push(e)},create:function(e){return new U.Tween(e,this.game,this)},remove:function(e){var t=this._tweens.indexOf(e);-1!==t?this._tweens[t].pendingDelete=!0:-1!==(t=this._add.indexOf(e))&&(this._add[t].pendingDelete=!0)},update:function(){var e=this._add.length,t=this._tweens.length;if(0===t&&0===e)return!1;for(var i=0;i<t;)this._tweens[i].update(this.game.time.time)?i++:(this._tweens.splice(i,1),t--);return 0<e&&(this._tweens=this._tweens.concat(this._add),this._add.length=0),!0},isTweening:function(t){return this._tweens.some(function(e){return e.target===t})},_pauseAll:function(){for(var e=this._tweens.length-1;0<=e;e--)this._tweens[e]._pause()},_resumeAll:function(){for(var e=this._tweens.length-1;0<=e;e--)this._tweens[e]._resume()},pauseAll:function(){for(var e=this._tweens.length-1;0<=e;e--)this._tweens[e].pause()},resumeAll:function(){for(var e=this._tweens.length-1;0<=e;e--)this._tweens[e].resume(!0)}},U.TweenManager.prototype.constructor=U.TweenManager,U.Tween=function(e,t,i){this.game=t,this.target=e,this.manager=i,this.timeline=[],this.reverse=!1,this.timeScale=1,this.repeatCounter=0,this.pendingDelete=!1,this.onStart=new U.Signal,this.onLoop=new U.Signal,this.onRepeat=new U.Signal,this.onChildComplete=new U.Signal,this.onComplete=new U.Signal,this.isRunning=!1,this.current=0,this.properties={},this.chainedTween=null,this.isPaused=!1,this.frameBased=i.frameBased,this._onUpdateCallback=null,this._onUpdateCallbackContext=null,this._pausedTime=0,this._codePaused=!1,this._hasStarted=!1},U.Tween.prototype={to:function(e,t,i,n,r,o,a){return(void 0===t||t<=0)&&(t=1e3),null==i&&(i=U.Easing.Default),void 0===n&&(n=!1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=!1),"string"==typeof i&&this.manager.easeMap[i]&&(i=this.manager.easeMap[i]),this.isRunning||(this.timeline.push(new U.TweenData(this).to(e,t,i,r,o,a)),n&&this.start()),this},from:function(e,t,i,n,r,o,a){return void 0===t&&(t=1e3),null==i&&(i=U.Easing.Default),void 0===n&&(n=!1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=!1),"string"==typeof i&&this.manager.easeMap[i]&&(i=this.manager.easeMap[i]),this.isRunning||(this.timeline.push(new U.TweenData(this).from(e,t,i,r,o,a)),n&&this.start()),this},start:function(e){if(void 0===e&&(e=0),null===this.game||null===this.target||0===this.timeline.length||this.isRunning)return this;for(var t=0;t<this.timeline.length;t++)for(var i in this.timeline[t].vEnd)this.properties[i]=this.target[i]||0,Array.isArray(this.properties[i])||(this.properties[i]*=1);for(t=0;t<this.timeline.length;t++)this.timeline[t].loadValues();return this.manager.add(this),this.isRunning=!0,(e<0||e>this.timeline.length-1)&&(e=0),this.current=e,this.timeline[this.current].start(),this},stop:function(e){return void 0===e&&(e=!1),this.isRunning=!1,this._onUpdateCallback=null,this._onUpdateCallbackContext=null,e&&(this.onComplete.dispatch(this.target,this),this._hasStarted=!1,this.chainedTween&&this.chainedTween.start()),this.manager.remove(this),this},updateTweenData:function(e,t,i){if(0===this.timeline.length)return this;if(void 0===i&&(i=0),-1===i)for(var n=0;n<this.timeline.length;n++)this.timeline[n][e]=t;else this.timeline[i][e]=t;return this},delay:function(e,t){return this.updateTweenData("delay",e,t)},repeat:function(e,t,i){return void 0===t&&(t=0),this.updateTweenData("repeatCounter",e,i),this.updateTweenData("repeatDelay",t,i)},repeatDelay:function(e,t){return this.updateTweenData("repeatDelay",e,t)},yoyo:function(e,t,i){return void 0===t&&(t=0),this.updateTweenData("yoyo",e,i),this.updateTweenData("yoyoDelay",t,i)},yoyoDelay:function(e,t){return this.updateTweenData("yoyoDelay",e,t)},easing:function(e,t){return"string"==typeof e&&this.manager.easeMap[e]&&(e=this.manager.easeMap[e]),this.updateTweenData("easingFunction",e,t)},interpolation:function(e,t,i){return void 0===t&&(t=U.Math),this.updateTweenData("interpolationFunction",e,i),this.updateTweenData("interpolationContext",t,i)},repeatAll:function(e){return void 0===e&&(e=0),this.repeatCounter=e,this},chain:function(){for(var e=arguments.length;e--;)0<e?arguments[e-1].chainedTween=arguments[e]:this.chainedTween=arguments[e];return this},loop:function(e){return void 0===e&&(e=!0),this.repeatCounter=e?-1:0,this},onUpdateCallback:function(e,t){return this._onUpdateCallback=e,this._onUpdateCallbackContext=t,this},pause:function(){this.isPaused=!0,this._codePaused=!0,this._pausedTime=this.game.time.time},_pause:function(){this._codePaused||(this.isPaused=!0,this._pausedTime=this.game.time.time)},resume:function(){if(this.isPaused){this.isPaused=!1,this._codePaused=!1;for(var e=0;e<this.timeline.length;e++)this.timeline[e].isRunning||(this.timeline[e].startTime+=this.game.time.time-this._pausedTime)}},_resume:function(){this._codePaused||this.resume()},update:function(e){if(this.pendingDelete||!this.target)return!1;if(this.isPaused)return!0;var t=this.timeline[this.current].update(e);if(t===U.TweenData.PENDING)return!0;if(t===U.TweenData.RUNNING)return this._hasStarted||(this.onStart.dispatch(this.target,this),this._hasStarted=!0),null!==this._onUpdateCallback&&this._onUpdateCallback.call(this._onUpdateCallbackContext,this,this.timeline[this.current].value,this.timeline[this.current]),this.isRunning;if(t===U.TweenData.LOOPED)return-1===this.timeline[this.current].repeatCounter?this.onLoop.dispatch(this.target,this):this.onRepeat.dispatch(this.target,this),!0;if(t===U.TweenData.COMPLETE){var i=!1;return this.reverse?(this.current--,this.current<0&&(this.current=this.timeline.length-1,i=!0)):(this.current++,this.current===this.timeline.length&&(i=!(this.current=0))),i?-1===this.repeatCounter?(this.timeline[this.current].start(),this.onLoop.dispatch(this.target,this),!0):0<this.repeatCounter?(this.repeatCounter--,this.timeline[this.current].start(),this.onRepeat.dispatch(this.target,this),!0):(this.isRunning=!1,this.onComplete.dispatch(this.target,this),this._hasStarted=!1,this.chainedTween&&this.chainedTween.start(),!1):(this.onChildComplete.dispatch(this.target,this),this.timeline[this.current].start(),!0)}},generateData:function(e,t){if(null===this.game||null===this.target)return null;void 0===e&&(e=60),void 0===t&&(t=[]);for(var i=0;i<this.timeline.length;i++)for(var n in this.timeline[i].vEnd)this.properties[n]=this.target[n]||0,Array.isArray(this.properties[n])||(this.properties[n]*=1);for(i=0;i<this.timeline.length;i++)this.timeline[i].loadValues();for(i=0;i<this.timeline.length;i++)t=t.concat(this.timeline[i].generateData(e));return t}},Object.defineProperty(U.Tween.prototype,"totalDuration",{get:function(){for(var e=0,t=0;t<this.timeline.length;t++)e+=this.timeline[t].duration;return e}}),U.Tween.prototype.constructor=U.Tween,U.TweenData=function(e){this.parent=e,this.game=e.game,this.vStart={},this.vStartCache={},this.vEnd={},this.vEndCache={},this.duration=1e3,this.percent=0,this.value=0,this.repeatCounter=0,this.repeatDelay=0,this.repeatTotal=0,this.interpolate=!1,this.yoyo=!1,this.yoyoDelay=0,this.inReverse=!1,this.delay=0,this.dt=0,this.startTime=null,this.easingFunction=U.Easing.Default,this.interpolationFunction=U.Math.linearInterpolation,this.interpolationContext=U.Math,this.isRunning=!1,this.isFrom=!1},U.TweenData.PENDING=0,U.TweenData.RUNNING=1,U.TweenData.LOOPED=2,U.TweenData.COMPLETE=3,U.TweenData.prototype={to:function(e,t,i,n,r,o){return this.vEnd=e,this.duration=t,this.easingFunction=i,this.delay=n,this.repeatTotal=r,this.yoyo=o,this.isFrom=!1,this},from:function(e,t,i,n,r,o){return this.vEnd=e,this.duration=t,this.easingFunction=i,this.delay=n,this.repeatTotal=r,this.yoyo=o,this.isFrom=!0,this},start:function(){if(this.startTime=this.game.time.time+this.delay,this.parent.reverse?this.dt=this.duration:this.dt=0,0<this.delay?this.isRunning=!1:this.isRunning=!0,this.isFrom)for(var e in this.vStartCache)this.vStart[e]=this.vEndCache[e],this.vEnd[e]=this.vStartCache[e],this.parent.target[e]=this.vStart[e];return this.value=0,this.yoyoCounter=0,this.repeatCounter=this.repeatTotal,this},loadValues:function(){for(var e in this.parent.properties){if(this.vStart[e]=this.parent.properties[e],Array.isArray(this.vEnd[e])){if(0===this.vEnd[e].length)continue;0===this.percent&&(this.vEnd[e]=[this.vStart[e]].concat(this.vEnd[e]))}void 0!==this.vEnd[e]?("string"==typeof this.vEnd[e]&&(this.vEnd[e]=this.vStart[e]+parseFloat(this.vEnd[e],10)),this.parent.properties[e]=this.vEnd[e]):this.vEnd[e]=this.vStart[e],this.vStartCache[e]=this.vStart[e],this.vEndCache[e]=this.vEnd[e]}return this},update:function(e){if(this.isRunning){if(e<this.startTime)return U.TweenData.RUNNING}else{if(!(e>=this.startTime))return U.TweenData.PENDING;this.isRunning=!0}var t=this.parent.frameBased?this.game.time.physicsElapsedMS:this.game.time.elapsedMS;for(var i in this.parent.reverse?(this.dt-=t*this.parent.timeScale,this.dt=Math.max(this.dt,0)):(this.dt+=t*this.parent.timeScale,this.dt=Math.min(this.dt,this.duration)),this.percent=this.dt/this.duration,this.value=this.easingFunction(this.percent),this.vEnd){var n=this.vStart[i],r=this.vEnd[i];Array.isArray(r)?this.parent.target[i]=this.interpolationFunction.call(this.interpolationContext,r,this.value):this.parent.target[i]=n+(r-n)*this.value}return!this.parent.reverse&&1===this.percent||this.parent.reverse&&0===this.percent?this.repeat():U.TweenData.RUNNING},generateData:function(e){this.parent.reverse?this.dt=this.duration:this.dt=0;var t=[],i=!1,n=1/e*1e3;do{this.parent.reverse?(this.dt-=n,this.dt=Math.max(this.dt,0)):(this.dt+=n,this.dt=Math.min(this.dt,this.duration)),this.percent=this.dt/this.duration,this.value=this.easingFunction(this.percent);var r={};for(var o in this.vEnd){var a=this.vStart[o],s=this.vEnd[o];Array.isArray(s)?r[o]=this.interpolationFunction(s,this.value):r[o]=a+(s-a)*this.value}t.push(r),(!this.parent.reverse&&1===this.percent||this.parent.reverse&&0===this.percent)&&(i=!0)}while(!i);if(this.yoyo){var p=t.slice();p.reverse(),t=t.concat(p)}return t},repeat:function(){if(this.yoyo){if(this.inReverse&&0===this.repeatCounter){for(var e in this.vStartCache)this.vStart[e]=this.vStartCache[e],this.vEnd[e]=this.vEndCache[e];return this.inReverse=!1,U.TweenData.COMPLETE}this.inReverse=!this.inReverse}else if(0===this.repeatCounter)return U.TweenData.COMPLETE;if(this.inReverse)for(var e in this.vStartCache)this.vStart[e]=this.vEndCache[e],this.vEnd[e]=this.vStartCache[e];else{for(var e in this.vStartCache)this.vStart[e]=this.vStartCache[e],this.vEnd[e]=this.vEndCache[e];0<this.repeatCounter&&this.repeatCounter--}return this.startTime=this.game.time.time,this.yoyo&&this.inReverse?this.startTime+=this.yoyoDelay:this.inReverse||(this.startTime+=this.repeatDelay),this.parent.reverse?this.dt=this.duration:this.dt=0,U.TweenData.LOOPED}},U.TweenData.prototype.constructor=U.TweenData,U.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 0===e?0:1===e?1:1-Math.cos(e*Math.PI/2)},Out:function(e){return 0===e?0:1===e?1:Math.sin(e*Math.PI/2)},InOut:function(e){return 0===e?0:1===e?1:.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){var t,i=.1;return 0===e?0:1===e?1:(t=!i||i<1?(i=1,.1):.4*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},Out:function(e){var t,i=.1;return 0===e?0:1===e?1:(t=!i||i<1?(i=1,.1):.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},InOut:function(e){var t,i=.1;return 0===e?0:1===e?1:(t=!i||i<1?(i=1,.1):.4*Math.asin(1/i)/(2*Math.PI),(e*=2)<1?i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:i*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-U.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*U.Easing.Bounce.In(2*e):.5*U.Easing.Bounce.Out(2*e-1)+.5}}},U.Easing.Default=U.Easing.Linear.None,U.Easing.Power0=U.Easing.Linear.None,U.Easing.Power1=U.Easing.Quadratic.Out,U.Easing.Power2=U.Easing.Cubic.Out,U.Easing.Power3=U.Easing.Quartic.Out,U.Easing.Power4=U.Easing.Quintic.Out,U.Time=function(e){this.game=e,this.time=0,this.prevTime=0,this.now=0,this.elapsed=0,this.elapsedMS=0,this.physicsElapsed=1/60,this.physicsElapsedMS=1/60*1e3,this.desiredFpsMult=1/60,this._desiredFps=60,this.suggestedFps=this.desiredFps,this.slowMotion=1,this.advancedTiming=!1,this.frames=0,this.fps=0,this.fpsMin=1e3,this.fpsMax=0,this.msMin=1e3,this.msMax=0,this.pauseDuration=0,this.timeToCall=0,this.timeExpected=0,this.events=new U.Timer(this.game,!1),this._frameCount=0,this._elapsedAccumulator=0,this._started=0,this._timeLastSecond=0,this._pauseStarted=0,this._justResumed=!1,this._timers=[]},U.Time.prototype={boot:function(){this._started=Date.now(),this.time=Date.now(),this.events.start(),this.timeExpected=this.time},add:function(e){return this._timers.push(e),e},create:function(e){void 0===e&&(e=!0);var t=new U.Timer(this.game,e);return this._timers.push(t),t},removeAll:function(){for(var e=0;e<this._timers.length;e++)this._timers[e].destroy();this._timers=[],this.events.removeAll()},refresh:function(){var e=this.time;this.time=Date.now(),this.elapsedMS=this.time-e},update:function(e){var t=this.time;this.time=Date.now(),this.elapsedMS=this.time-t,this.prevTime=this.now,this.now=e,this.elapsed=this.now-this.prevTime,this.game.raf._isSetTimeOut&&(this.timeToCall=Math.floor(Math.max(0,1e3/this._desiredFps-(this.timeExpected-e))),this.timeExpected=e+this.timeToCall),this.advancedTiming&&this.updateAdvancedTiming(),this.game.paused||(this.events.update(this.time),this._timers.length&&this.updateTimers())},updateTimers:function(){for(var e=0,t=this._timers.length;e<t;)this._timers[e].update(this.time)?e++:(this._timers.splice(e,1),t--)},updateAdvancedTiming:function(){this._frameCount++,this._elapsedAccumulator+=this.elapsed,this._frameCount>=2*this._desiredFps&&(this.suggestedFps=5*Math.floor(200/(this._elapsedAccumulator/this._frameCount)),this._frameCount=0,this._elapsedAccumulator=0),this.msMin=Math.min(this.msMin,this.elapsed),this.msMax=Math.max(this.msMax,this.elapsed),this.frames++,this.now>this._timeLastSecond+1e3&&(this.fps=Math.round(1e3*this.frames/(this.now-this._timeLastSecond)),this.fpsMin=Math.min(this.fpsMin,this.fps),this.fpsMax=Math.max(this.fpsMax,this.fps),this._timeLastSecond=this.now,this.frames=0)},gamePaused:function(){this._pauseStarted=Date.now(),this.events.pause();for(var e=this._timers.length;e--;)this._timers[e]._pause()},gameResumed:function(){this.time=Date.now(),this.pauseDuration=this.time-this._pauseStarted,this.events.resume();for(var e=this._timers.length;e--;)this._timers[e]._resume()},totalElapsedSeconds:function(){return.001*(this.time-this._started)},elapsedSince:function(e){return this.time-e},elapsedSecondsSince:function(e){return.001*(this.time-e)},reset:function(){this._started=this.time,this.removeAll()}},Object.defineProperty(U.Time.prototype,"desiredFps",{get:function(){return this._desiredFps},set:function(e){this._desiredFps=e,this.physicsElapsed=1/e,this.physicsElapsedMS=1e3*this.physicsElapsed,this.desiredFpsMult=1/e}}),U.Time.prototype.constructor=U.Time,U.Timer=function(e,t){void 0===t&&(t=!0),this.game=e,this.running=!1,this.autoDestroy=t,this.expired=!1,this.elapsed=0,this.events=[],this.onComplete=new U.Signal,this.nextTick=0,this.timeCap=1e3,this.paused=!1,this._codePaused=!1,this._started=0,this._pauseStarted=0,this._pauseTotal=0,this._now=Date.now(),this._len=0,this._marked=0,this._i=0,this._diff=0,this._newTick=0},U.Timer.MINUTE=6e4,U.Timer.SECOND=1e3,U.Timer.HALF=500,U.Timer.QUARTER=250,U.Timer.prototype={create:function(e,t,i,n,r,o){var a=e=Math.round(e);0===this._now?a+=this.game.time.time:a+=this._now;var s=new U.TimerEvent(this,e,a,i,t,n,r,o);return this.events.push(s),this.order(),this.expired=!1,s},add:function(e,t,i){return this.create(e,!1,0,t,i,Array.prototype.slice.call(arguments,3))},repeat:function(e,t,i,n){return this.create(e,!1,t,i,n,Array.prototype.slice.call(arguments,4))},loop:function(e,t,i){return this.create(e,!0,0,t,i,Array.prototype.slice.call(arguments,3))},start:function(e){if(!this.running){this._started=this.game.time.time+(e||0),this.running=!0;for(var t=0;t<this.events.length;t++)this.events[t].tick=this.events[t].delay+this._started}},stop:function(e){this.running=!1,void 0===e&&(e=!0),e&&(this.events.length=0)},remove:function(e){for(var t=0;t<this.events.length;t++)if(this.events[t]===e)return this.events[t].pendingDelete=!0;return!1},order:function(){0<this.events.length&&(this.events.sort(this.sortHandler),this.nextTick=this.events[0].tick)},sortHandler:function(e,t){return e.tick<t.tick?-1:e.tick>t.tick?1:0},clearPendingEvents:function(){for(this._i=this.events.length;this._i--;)this.events[this._i].pendingDelete&&this.events.splice(this._i,1);this._len=this.events.length,this._i=0},update:function(e){if(this.paused)return!0;if(this.elapsed=e-this._now,this._now=e,this.elapsed>this.timeCap&&this.adjustEvents(e-this.elapsed),this._marked=0,this.clearPendingEvents(),this.running&&this._now>=this.nextTick&&0<this._len){for(;this._i<this._len&&this.running&&this._now>=this.events[this._i].tick&&!this.events[this._i].pendingDelete;)this._newTick=this._now+this.events[this._i].delay-(this._now-this.events[this._i].tick),this._newTick<0&&(this._newTick=this._now+this.events[this._i].delay),!0===this.events[this._i].loop?this.events[this._i].tick=this._newTick:0<this.events[this._i].repeatCount?(this.events[this._i].repeatCount--,this.events[this._i].tick=this._newTick):(this._marked++,this.events[this._i].pendingDelete=!0),this.events[this._i].callback.apply(this.events[this._i].callbackContext,this.events[this._i].args),this._i++;this.events.length>this._marked?this.order():(this.expired=!0,this.onComplete.dispatch(this))}return!this.expired||!this.autoDestroy},pause:function(){this.running&&(this._codePaused=!0,this.paused||(this._pauseStarted=this.game.time.time,this.paused=!0))},_pause:function(){!this.paused&&this.running&&(this._pauseStarted=this.game.time.time,this.paused=!0)},adjustEvents:function(e){for(var t=0;t<this.events.length;t++)if(!this.events[t].pendingDelete){var i=this.events[t].tick-e;i<0&&(i=0),this.events[t].tick=this._now+i}var n=this.nextTick-e;this.nextTick=n<0?this._now:this._now+n},resume:function(){if(this.paused){var e=this.game.time.time;this._pauseTotal+=e-this._now,this._now=e,this.adjustEvents(this._pauseStarted),this.paused=!1,this._codePaused=!1}},_resume:function(){this._codePaused||this.resume()},removeAll:function(){this.onComplete.removeAll(),this.events.length=0,this._len=0,this._i=0},destroy:function(){this.onComplete.removeAll(),this.running=!1,this.events=[],this._len=0,this._i=0}},Object.defineProperty(U.Timer.prototype,"next",{get:function(){return this.nextTick}}),Object.defineProperty(U.Timer.prototype,"duration",{get:function(){return this.running&&this.nextTick>this._now?this.nextTick-this._now:0}}),Object.defineProperty(U.Timer.prototype,"length",{get:function(){return this.events.length}}),Object.defineProperty(U.Timer.prototype,"ms",{get:function(){return this.running?this._now-this._started-this._pauseTotal:0}}),Object.defineProperty(U.Timer.prototype,"seconds",{get:function(){return this.running?.001*this.ms:0}}),U.Timer.prototype.constructor=U.Timer,U.TimerEvent=function(e,t,i,n,r,o,a,s){this.timer=e,this.delay=t,this.tick=i,this.repeatCount=n-1,this.loop=r,this.callback=o,this.callbackContext=a,this.args=s,this.pendingDelete=!1},U.TimerEvent.prototype.constructor=U.TimerEvent,U.AnimationManager=function(e){this.sprite=e,this.game=e.game,this.currentFrame=null,this.currentAnim=null,this.updateIfVisible=!0,this.isLoaded=!1,this._frameData=null,this._anims={},this._outputFrames=[]},U.AnimationManager.prototype={loadFrameData:function(e,t){if(void 0===e)return!1;if(this.isLoaded)for(var i in this._anims)this._anims[i].updateFrameData(e);return this._frameData=e,null==t?this.frame=0:"string"==typeof t?this.frameName=t:this.frame=t,this.isLoaded=!0},copyFrameData:function(e,t){if(this._frameData=e.clone(),this.isLoaded)for(var i in this._anims)this._anims[i].updateFrameData(this._frameData);return null==t?this.frame=0:"string"==typeof t?this.frameName=t:this.frame=t,this.isLoaded=!0},add:function(e,t,i,n,r){return t=t||[],i=i||60,void 0===n&&(n=!1),void 0===r&&(r=!(!t||"number"!=typeof t[0])),this._outputFrames=[],this._frameData.getFrameIndexes(t,r,this._outputFrames),this._anims[e]=new U.Animation(this.game,this.sprite,e,this._frameData,this._outputFrames,i,n),this.currentAnim=this._anims[e],this.sprite.tilingTexture&&(this.sprite.refreshTexture=!0),this._anims[e]},validateFrames:function(e,t){void 0===t&&(t=!0);for(var i=0;i<e.length;i++)if(!0===t){if(e[i]>this._frameData.total)return!1}else if(!1===this._frameData.checkFrameName(e[i]))return!1;return!0},play:function(e,t,i,n){if(this._anims[e])return this.currentAnim===this._anims[e]?!1===this.currentAnim.isPlaying?(this.currentAnim.paused=!1,this.currentAnim.play(t,i,n)):this.currentAnim:(this.currentAnim&&this.currentAnim.isPlaying&&this.currentAnim.stop(),this.currentAnim=this._anims[e],this.currentAnim.paused=!1,this.currentFrame=this.currentAnim.currentFrame,this.currentAnim.play(t,i,n))},stop:function(e,t){void 0===t&&(t=!1),!this.currentAnim||"string"==typeof e&&e!==this.currentAnim.name||this.currentAnim.stop(t)},update:function(){return!(this.updateIfVisible&&!this.sprite.visible)&&(!(!this.currentAnim||!this.currentAnim.update())&&(this.currentFrame=this.currentAnim.currentFrame,!0))},next:function(e){this.currentAnim&&(this.currentAnim.next(e),this.currentFrame=this.currentAnim.currentFrame)},previous:function(e){this.currentAnim&&(this.currentAnim.previous(e),this.currentFrame=this.currentAnim.currentFrame)},getAnimation:function(e){return"string"==typeof e&&this._anims[e]?this._anims[e]:null},refreshFrame:function(){},destroy:function(){var e=null;for(var e in this._anims)this._anims.hasOwnProperty(e)&&this._anims[e].destroy();this._anims={},this._outputFrames=[],this._frameData=null,this.currentAnim=null,this.currentFrame=null,this.sprite=null,this.game=null}},U.AnimationManager.prototype.constructor=U.AnimationManager,Object.defineProperty(U.AnimationManager.prototype,"frameData",{get:function(){return this._frameData}}),Object.defineProperty(U.AnimationManager.prototype,"frameTotal",{get:function(){return this._frameData.total}}),Object.defineProperty(U.AnimationManager.prototype,"paused",{get:function(){return this.currentAnim.isPaused},set:function(e){this.currentAnim.paused=e}}),Object.defineProperty(U.AnimationManager.prototype,"name",{get:function(){if(this.currentAnim)return this.currentAnim.name}}),Object.defineProperty(U.AnimationManager.prototype,"frame",{get:function(){if(this.currentFrame)return this.currentFrame.index},set:function(e){"number"==typeof e&&this._frameData&&null!==this._frameData.getFrame(e)&&(this.currentFrame=this._frameData.getFrame(e),this.currentFrame&&this.sprite.setFrame(this.currentFrame))}}),Object.defineProperty(U.AnimationManager.prototype,"frameName",{get:function(){if(this.currentFrame)return this.currentFrame.name},set:function(e){"string"==typeof e&&this._frameData&&null!==this._frameData.getFrameByName(e)&&(this.currentFrame=this._frameData.getFrameByName(e),this.currentFrame&&(this._frameIndex=this.currentFrame.index,this.sprite.setFrame(this.currentFrame)))}}),U.Animation=function(e,t,i,n,r,o,a){void 0===a&&(a=!1),this.game=e,this._parent=t,this._frameData=n,this.name=i,this._frames=[],this._frames=this._frames.concat(r),this.delay=1e3/o,this.loop=a,this.loopCount=0,this.killOnComplete=!1,this.isFinished=!1,this.isPlaying=!1,this.isPaused=!1,this._pauseStartTime=0,this._frameIndex=0,this._frameDiff=0,this._frameSkip=1,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.onStart=new U.Signal,this.onUpdate=null,this.onComplete=new U.Signal,this.onLoop=new U.Signal,this.isReversed=!1,this.game.onPause.add(this.onPause,this),this.game.onResume.add(this.onResume,this)},U.Animation.prototype={play:function(e,t,i){return"number"==typeof e&&(this.delay=1e3/e),"boolean"==typeof t&&(this.loop=t),void 0!==i&&(this.killOnComplete=i),this.isPlaying=!0,this.isFinished=!1,this.paused=!1,this.loopCount=0,this._timeLastFrame=this.game.time.time,this._timeNextFrame=this.game.time.time+this.delay,this._frameIndex=this.isReversed?this._frames.length-1:0,this.updateCurrentFrame(!1,!0),this._parent.events.onAnimationStart$dispatch(this._parent,this),this.onStart.dispatch(this._parent,this),(this._parent.animations.currentAnim=this)._parent.animations.currentFrame=this.currentFrame,this},restart:function(){this.isPlaying=!0,this.isFinished=!1,this.paused=!1,this.loopCount=0,this._timeLastFrame=this.game.time.time,this._timeNextFrame=this.game.time.time+this.delay,this._frameIndex=0,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this._parent.setFrame(this.currentFrame),(this._parent.animations.currentAnim=this)._parent.animations.currentFrame=this.currentFrame,this.onStart.dispatch(this._parent,this)},reverse:function(){return this.reversed=!this.reversed,this},reverseOnce:function(){return this.onComplete.addOnce(this.reverse,this),this.reverse()},setFrame:function(e,t){var i;if(void 0===t&&(t=!1),"string"==typeof e)for(var n=0;n<this._frames.length;n++)this._frameData.getFrame(this._frames[n]).name===e&&(i=n);else if("number"==typeof e)if(t)i=e;else for(n=0;n<this._frames.length;n++)this._frames[n]===e&&(i=n);i&&(this._frameIndex=i-1,this._timeNextFrame=this.game.time.time,this.update())},stop:function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1),this.isPlaying=!1,this.isFinished=!0,this.paused=!1,e&&(this.currentFrame=this._frameData.getFrame(this._frames[0]),this._parent.setFrame(this.currentFrame)),t&&(this._parent.events.onAnimationComplete$dispatch(this._parent,this),this.onComplete.dispatch(this._parent,this))},onPause:function(){this.isPlaying&&(this._frameDiff=this._timeNextFrame-this.game.time.time)},onResume:function(){this.isPlaying&&(this._timeNextFrame=this.game.time.time+this._frameDiff)},update:function(){return!this.isPaused&&(!!(this.isPlaying&&this.game.time.time>=this._timeNextFrame)&&(this._frameSkip=1,this._frameDiff=this.game.time.time-this._timeNextFrame,this._timeLastFrame=this.game.time.time,this._frameDiff>this.delay&&(this._frameSkip=Math.floor(this._frameDiff/this.delay),this._frameDiff-=this._frameSkip*this.delay),this._timeNextFrame=this.game.time.time+(this.delay-this._frameDiff),this.isReversed?this._frameIndex-=this._frameSkip:this._frameIndex+=this._frameSkip,!this.isReversed&&this._frameIndex>=this._frames.length||this.isReversed&&this._frameIndex<=-1?this.loop?(this._frameIndex=Math.abs(this._frameIndex)%this._frames.length,this.isReversed&&(this._frameIndex=this._frames.length-1-this._frameIndex),this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.currentFrame&&this._parent.setFrame(this.currentFrame),this.loopCount++,this._parent.events.onAnimationLoop$dispatch(this._parent,this),this.onLoop.dispatch(this._parent,this),!this.onUpdate||(this.onUpdate.dispatch(this,this.currentFrame),!!this._frameData)):(this.complete(),!1):this.updateCurrentFrame(!0)))},updateCurrentFrame:function(e,t){if(void 0===t&&(t=!1),!this._frameData)return!1;var i=this.currentFrame.index;return this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.currentFrame&&(t||!t&&i!==this.currentFrame.index)&&this._parent.setFrame(this.currentFrame),!this.onUpdate||!e||(this.onUpdate.dispatch(this,this.currentFrame),!!this._frameData)},next:function(e){void 0===e&&(e=1);var t=this._frameIndex+e;t>=this._frames.length&&(this.loop?t%=this._frames.length:t=this._frames.length-1),t!==this._frameIndex&&(this._frameIndex=t,this.updateCurrentFrame(!0))},previous:function(e){void 0===e&&(e=1);var t=this._frameIndex-e;t<0&&(this.loop?t=this._frames.length+t:t++),t!==this._frameIndex&&(this._frameIndex=t,this.updateCurrentFrame(!0))},updateFrameData:function(e){this._frameData=e,this.currentFrame=this._frameData?this._frameData.getFrame(this._frames[this._frameIndex%this._frames.length]):null},destroy:function(){this._frameData&&(this.game.onPause.remove(this.onPause,this),this.game.onResume.remove(this.onResume,this),this.game=null,this._parent=null,this._frames=null,this._frameData=null,this.currentFrame=null,this.isPlaying=!1,this.onStart.dispose(),this.onLoop.dispose(),this.onComplete.dispose(),this.onUpdate&&this.onUpdate.dispose())},complete:function(){this._frameIndex=this._frames.length-1,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.isPlaying=!1,this.isFinished=!0,this.paused=!1,this._parent.events.onAnimationComplete$dispatch(this._parent,this),this.onComplete.dispatch(this._parent,this),this.killOnComplete&&this._parent.kill()}},U.Animation.prototype.constructor=U.Animation,Object.defineProperty(U.Animation.prototype,"paused",{get:function(){return this.isPaused},set:function(e){(this.isPaused=e)?this._pauseStartTime=this.game.time.time:this.isPlaying&&(this._timeNextFrame=this.game.time.time+this.delay)}}),Object.defineProperty(U.Animation.prototype,"reversed",{get:function(){return this.isReversed},set:function(e){this.isReversed=e}}),Object.defineProperty(U.Animation.prototype,"frameTotal",{get:function(){return this._frames.length}}),Object.defineProperty(U.Animation.prototype,"frame",{get:function(){return null!==this.currentFrame?this.currentFrame.index:this._frameIndex},set:function(e){this.currentFrame=this._frameData.getFrame(this._frames[e]),null!==this.currentFrame&&(this._frameIndex=e,this._parent.setFrame(this.currentFrame),this.onUpdate&&this.onUpdate.dispatch(this,this.currentFrame))}}),Object.defineProperty(U.Animation.prototype,"speed",{get:function(){return 1e3/this.delay},set:function(e){0<e&&(this.delay=1e3/e)}}),Object.defineProperty(U.Animation.prototype,"enableUpdate",{get:function(){return null!==this.onUpdate},set:function(e){e&&null===this.onUpdate?this.onUpdate=new U.Signal:e||null===this.onUpdate||(this.onUpdate.dispose(),this.onUpdate=null)}}),U.Animation.generateFrameNames=function(e,t,i,n,r){void 0===n&&(n="");var o=[],a="";if(t<i)for(var s=t;s<=i;s++)a=e+(a="number"==typeof r?U.Utils.pad(s.toString(),r,"0",1):s.toString())+n,o.push(a);else for(s=t;i<=s;s--)a=e+(a="number"==typeof r?U.Utils.pad(s.toString(),r,"0",1):s.toString())+n,o.push(a);return o},U.Frame=function(e,t,i,n,r,o){this.index=e,this.x=t,this.y=i,this.width=n,this.height=r,this.name=o,this.centerX=Math.floor(n/2),this.centerY=Math.floor(r/2),this.distance=U.Math.distance(0,0,n,r),this.rotated=!1,this.rotationDirection="cw",this.trimmed=!1,this.sourceSizeW=n,this.sourceSizeH=r,this.spriteSourceSizeX=0,this.spriteSourceSizeY=0,this.spriteSourceSizeW=0,this.spriteSourceSizeH=0,this.right=this.x+this.width,this.bottom=this.y+this.height},U.Frame.prototype={resize:function(e,t){this.width=e,this.height=t,this.centerX=Math.floor(e/2),this.centerY=Math.floor(t/2),this.distance=U.Math.distance(0,0,e,t),this.sourceSizeW=e,this.sourceSizeH=t,this.right=this.x+e,this.bottom=this.y+t},setTrim:function(e,t,i,n,r,o,a){(this.trimmed=e)&&(this.sourceSizeW=t,this.sourceSizeH=i,this.centerX=Math.floor(t/2),this.centerY=Math.floor(i/2),this.spriteSourceSizeX=n,this.spriteSourceSizeY=r,this.spriteSourceSizeW=o,this.spriteSourceSizeH=a)},clone:function(){var e=new U.Frame(this.index,this.x,this.y,this.width,this.height,this.name);for(var t in this)this.hasOwnProperty(t)&&(e[t]=this[t]);return e},getRect:function(e){return void 0===e?e=new U.Rectangle(this.x,this.y,this.width,this.height):e.setTo(this.x,this.y,this.width,this.height),e}},U.Frame.prototype.constructor=U.Frame,U.FrameData=function(){this._frames=[],this._frameNames=[]},U.FrameData.prototype={addFrame:function(e){return e.index=this._frames.length,this._frames.push(e),""!==e.name&&(this._frameNames[e.name]=e.index),e},getFrame:function(e){return e>=this._frames.length&&(e=0),this._frames[e]},getFrameByName:function(e){return"number"==typeof this._frameNames[e]?this._frames[this._frameNames[e]]:null},checkFrameName:function(e){return null!=this._frameNames[e]},clone:function(){for(var e=new U.FrameData,t=0;t<this._frames.length;t++)e._frames.push(this._frames[t].clone());for(var i in this._frameNames)this._frameNames.hasOwnProperty(i)&&e._frameNames.push(this._frameNames[i]);return e},getFrameRange:function(e,t,i){void 0===i&&(i=[]);for(var n=e;n<=t;n++)i.push(this._frames[n]);return i},getFrames:function(e,t,i){if(void 0===t&&(t=!0),void 0===i&&(i=[]),void 0===e||0===e.length)for(var n=0;n<this._frames.length;n++)i.push(this._frames[n]);else for(n=0;n<e.length;n++)t?i.push(this.getFrame(e[n])):i.push(this.getFrameByName(e[n]));return i},getFrameIndexes:function(e,t,i){if(void 0===t&&(t=!0),void 0===i&&(i=[]),void 0===e||0===e.length)for(var n=0;n<this._frames.length;n++)i.push(this._frames[n].index);else for(n=0;n<e.length;n++)t&&this._frames[e[n]]?i.push(this._frames[e[n]].index):this.getFrameByName(e[n])&&i.push(this.getFrameByName(e[n]).index);return i},destroy:function(){this._frames=null,this._frameNames=null}},U.FrameData.prototype.constructor=U.FrameData,Object.defineProperty(U.FrameData.prototype,"total",{get:function(){return this._frames.length}}),U.AnimationParser={spriteSheet:function(e,t,i,n,r,o,a){var s=t;if("string"==typeof t&&(s=e.cache.getImage(t)),null===s)return null;var p=s.width,l=s.height;i<=0&&(i=Math.floor(-p/Math.min(-1,i))),n<=0&&(n=Math.floor(-l/Math.min(-1,n)));var h=Math.floor((p-o)/(i+a))*Math.floor((l-o)/(n+a));if(-1!==r&&(h=r),0===p||0===l||p<i||l<n||0===h)return null;for(var u=new U.FrameData,d=o,c=o,_=0;_<h;_++)u.addFrame(new U.Frame(_,d,c,i,n,"")),p<(d+=i+a)+i&&(d=o,c+=n+a);return u},JSONData:function(e,t){if(t.frames){for(var i,n=new U.FrameData,r=t.frames,o=0;o<r.length;o++)i=n.addFrame(new U.Frame(o,r[o].frame.x,r[o].frame.y,r[o].frame.w,r[o].frame.h,r[o].filename)),r[o].trimmed&&i.setTrim(r[o].trimmed,r[o].sourceSize.w,r[o].sourceSize.h,r[o].spriteSourceSize.x,r[o].spriteSourceSize.y,r[o].spriteSourceSize.w,r[o].spriteSourceSize.h);return n}},JSONDataPyxel:function(e,t){if(["layers","tilewidth","tileheight","tileswide","tileshigh"].forEach(function(e){t[e]}),1===t.layers.length){for(var i=new U.FrameData,n=t.tileheight,r=t.tilewidth,o=t.layers[0].tiles,a=0;a<o.length;a++)i.addFrame(new U.Frame(a,o[a].x,o[a].y,r,n,"frame_"+a)).setTrim(!1);return i}},JSONDataHash:function(e,t){if(t.frames){var i,n=new U.FrameData,r=t.frames,o=0;for(var a in r)i=n.addFrame(new U.Frame(o,r[a].frame.x,r[a].frame.y,r[a].frame.w,r[a].frame.h,a)),r[a].trimmed&&i.setTrim(r[a].trimmed,r[a].sourceSize.w,r[a].sourceSize.h,r[a].spriteSourceSize.x,r[a].spriteSourceSize.y,r[a].spriteSourceSize.w,r[a].spriteSourceSize.h),o++;return n}},XMLData:function(e,t){if(t.getElementsByTagName("TextureAtlas")){for(var i,n,r,o,a,s,p,l,h,u,d,c=new U.FrameData,_=t.getElementsByTagName("SubTexture"),y=0;y<_.length;y++)n=(r=_[y].attributes).name.value,o=parseInt(r.x.value,10),a=parseInt(r.y.value,10),s=parseInt(r.width.value,10),p=parseInt(r.height.value,10),h=l=null,r.frameX&&(l=Math.abs(parseInt(r.frameX.value,10)),h=Math.abs(parseInt(r.frameY.value,10)),u=parseInt(r.frameWidth.value,10),d=parseInt(r.frameHeight.value,10)),i=c.addFrame(new U.Frame(y,o,a,s,p,n)),null===l&&null===h||i.setTrim(!0,s,p,l,h,u,d);return c}}},U.Cache=function(e){this.game=e,this.autoResolveURL=!1,this._cache={canvas:{},image:{},texture:{},sound:{},video:{},text:{},json:{},xml:{},physics:{},tilemap:{},binary:{},bitmapData:{},bitmapFont:{},shader:{},renderTexture:{}},this._urlMap={},this._urlResolver=new Image,this._urlTemp=null,this.onSoundUnlock=new U.Signal,this._cacheMap=[],this._cacheMap[U.Cache.CANVAS]=this._cache.canvas,this._cacheMap[U.Cache.IMAGE]=this._cache.image,this._cacheMap[U.Cache.TEXTURE]=this._cache.texture,this._cacheMap[U.Cache.SOUND]=this._cache.sound,this._cacheMap[U.Cache.TEXT]=this._cache.text,this._cacheMap[U.Cache.PHYSICS]=this._cache.physics,this._cacheMap[U.Cache.TILEMAP]=this._cache.tilemap,this._cacheMap[U.Cache.BINARY]=this._cache.binary,this._cacheMap[U.Cache.BITMAPDATA]=this._cache.bitmapData,this._cacheMap[U.Cache.BITMAPFONT]=this._cache.bitmapFont,this._cacheMap[U.Cache.JSON]=this._cache.json,this._cacheMap[U.Cache.XML]=this._cache.xml,this._cacheMap[U.Cache.VIDEO]=this._cache.video,this._cacheMap[U.Cache.SHADER]=this._cache.shader,this._cacheMap[U.Cache.RENDER_TEXTURE]=this._cache.renderTexture,this.addDefaultImage(),this.addMissingImage()},U.Cache.CANVAS=1,U.Cache.IMAGE=2,U.Cache.TEXTURE=3,U.Cache.SOUND=4,U.Cache.TEXT=5,U.Cache.PHYSICS=6,U.Cache.TILEMAP=7,U.Cache.BINARY=8,U.Cache.BITMAPDATA=9,U.Cache.BITMAPFONT=10,U.Cache.JSON=11,U.Cache.XML=12,U.Cache.VIDEO=13,U.Cache.SHADER=14,U.Cache.RENDER_TEXTURE=15,U.Cache.DEFAULT=null,U.Cache.MISSING=null,U.Cache.prototype={addCanvas:function(e,t,i){void 0===i&&(i=t.getContext("2d")),this._cache.canvas[e]={canvas:t,context:i}},addImage:function(e,t,i){this.checkImageKey(e)&&this.removeImage(e);var n={key:e,url:t,data:i,base:new PIXI.BaseTexture(i),frame:new U.Frame(0,0,0,i.width,i.height,e),frameData:new U.FrameData};return n.frameData.addFrame(new U.Frame(0,0,0,i.width,i.height,t)),this._cache.image[e]=n,this._resolveURL(t,n),"__default"===e?U.Cache.DEFAULT=new PIXI.Texture(n.base):"__missing"===e&&(U.Cache.MISSING=new PIXI.Texture(n.base)),n},addDefaultImage:function(){var e=new Image;e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg==";var t=this.addImage("__default",null,e);t.base.skipRender=!0,U.Cache.DEFAULT=new PIXI.Texture(t.base)},addMissingImage:function(){var e=new Image;e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg==";var t=this.addImage("__missing",null,e);U.Cache.MISSING=new PIXI.Texture(t.base)},addSound:function(e,t,i,n,r){void 0===n&&(r=!(n=!0)),void 0===r&&(r=!(n=!1));var o=!1;r&&(o=!0),this._cache.sound[e]={url:t,data:i,isDecoding:!1,decoded:o,webAudio:n,audioTag:r,locked:this.game.sound.touchLocked},this._resolveURL(t,this._cache.sound[e])},addText:function(e,t,i){this._cache.text[e]={url:t,data:i},this._resolveURL(t,this._cache.text[e])},addPhysicsData:function(e,t,i,n){this._cache.physics[e]={url:t,data:i,format:n},this._resolveURL(t,this._cache.physics[e])},addTilemap:function(e,t,i,n){this._cache.tilemap[e]={url:t,data:i,format:n},this._resolveURL(t,this._cache.tilemap[e])},addBinary:function(e,t){this._cache.binary[e]=t},addBitmapData:function(e,t,i){return t.key=e,void 0===i&&(i=new U.FrameData).addFrame(t.textureFrame),this._cache.bitmapData[e]={data:t,frameData:i},t},addBitmapFont:function(e,t,i,n,r,o,a){var s={url:t,data:i,font:null,base:new PIXI.BaseTexture(i)};void 0===o&&(o=0),void 0===a&&(a=0),s.font="json"===r?U.LoaderParser.jsonBitmapFont(n,s.base,o,a):U.LoaderParser.xmlBitmapFont(n,s.base,o,a),this._cache.bitmapFont[e]=s,this._resolveURL(t,s)},addJSON:function(e,t,i){this._cache.json[e]={url:t,data:i},this._resolveURL(t,this._cache.json[e])},addXML:function(e,t,i){this._cache.xml[e]={url:t,data:i},this._resolveURL(t,this._cache.xml[e])},addVideo:function(e,t,i,n){this._cache.video[e]={url:t,data:i,isBlob:n,locked:!0},this._resolveURL(t,this._cache.video[e])},addShader:function(e,t,i){this._cache.shader[e]={url:t,data:i},this._resolveURL(t,this._cache.shader[e])},addRenderTexture:function(e,t){this._cache.renderTexture[e]={texture:t,frame:new U.Frame(0,0,0,t.width,t.height,"","")}},addSpriteSheet:function(e,t,i,n,r,o,a,s){void 0===o&&(o=-1),void 0===a&&(a=0),void 0===s&&(s=0);var p={key:e,url:t,data:i,frameWidth:n,frameHeight:r,margin:a,spacing:s,base:new PIXI.BaseTexture(i),frameData:U.AnimationParser.spriteSheet(this.game,i,n,r,o,a,s)};this._cache.image[e]=p,this._resolveURL(t,p)},addTextureAtlas:function(e,t,i,n,r){var o={key:e,url:t,data:i,base:new PIXI.BaseTexture(i)};r===U.Loader.TEXTURE_ATLAS_XML_STARLING?o.frameData=U.AnimationParser.XMLData(this.game,n,e):r===U.Loader.TEXTURE_ATLAS_JSON_PYXEL?o.frameData=U.AnimationParser.JSONDataPyxel(this.game,n,e):Array.isArray(n.frames)?o.frameData=U.AnimationParser.JSONData(this.game,n,e):o.frameData=U.AnimationParser.JSONDataHash(this.game,n,e),this._cache.image[e]=o,this._resolveURL(t,o)},reloadSound:function(e){var t=this,i=this.getSound(e);i&&(i.data.src=i.url,i.data.addEventListener("canplaythrough",function(){return t.reloadSoundComplete(e)},!1),i.data.load())},reloadSoundComplete:function(e){var t=this.getSound(e);t&&(t.locked=!1,this.onSoundUnlock.dispatch(e))},updateSound:function(e,t,i){var n=this.getSound(e);n&&(n[t]=i)},decodedSound:function(e,t){var i=this.getSound(e);i.data=t,i.decoded=!0,i.isDecoding=!1},isSoundDecoded:function(e){var t=this.getItem(e,U.Cache.SOUND,"isSoundDecoded");if(t)return t.decoded},isSoundReady:function(e){var t=this.getItem(e,U.Cache.SOUND,"isSoundDecoded");if(t)return t.decoded&&!this.game.sound.touchLocked},checkKey:function(e,t){return!!this._cacheMap[e][t]},checkURL:function(e){return!!this._urlMap[this._resolveURL(e)]},checkCanvasKey:function(e){return this.checkKey(U.Cache.CANVAS,e)},checkImageKey:function(e){return this.checkKey(U.Cache.IMAGE,e)},checkTextureKey:function(e){return this.checkKey(U.Cache.TEXTURE,e)},checkSoundKey:function(e){return this.checkKey(U.Cache.SOUND,e)},checkTextKey:function(e){return this.checkKey(U.Cache.TEXT,e)},checkPhysicsKey:function(e){return this.checkKey(U.Cache.PHYSICS,e)},checkTilemapKey:function(e){return this.checkKey(U.Cache.TILEMAP,e)},checkBinaryKey:function(e){return this.checkKey(U.Cache.BINARY,e)},checkBitmapDataKey:function(e){return this.checkKey(U.Cache.BITMAPDATA,e)},checkBitmapFontKey:function(e){return this.checkKey(U.Cache.BITMAPFONT,e)},checkJSONKey:function(e){return this.checkKey(U.Cache.JSON,e)},checkXMLKey:function(e){return this.checkKey(U.Cache.XML,e)},checkVideoKey:function(e){return this.checkKey(U.Cache.VIDEO,e)},checkShaderKey:function(e){return this.checkKey(U.Cache.SHADER,e)},checkRenderTextureKey:function(e){return this.checkKey(U.Cache.RENDER_TEXTURE,e)},getItem:function(e,t,i,n){return this.checkKey(t,e)?void 0===n?this._cacheMap[t][e]:this._cacheMap[t][e][n]:null},getCanvas:function(e){return this.getItem(e,U.Cache.CANVAS,"getCanvas","canvas")},getImage:function(e,t){null==e&&(e="__default"),void 0===t&&(t=!1);var i=this.getItem(e,U.Cache.IMAGE,"getImage");return null===i&&(i=this.getItem("__missing",U.Cache.IMAGE,"getImage")),t?i:i.data},getTextureFrame:function(e){return this.getItem(e,U.Cache.TEXTURE,"getTextureFrame","frame")},getSound:function(e){return this.getItem(e,U.Cache.SOUND,"getSound")},getSoundData:function(e){return this.getItem(e,U.Cache.SOUND,"getSoundData","data")},getText:function(e){return this.getItem(e,U.Cache.TEXT,"getText","data")},getPhysicsData:function(e,t,i){var n=this.getItem(e,U.Cache.PHYSICS,"getPhysicsData","data");if(null===n||null==t)return n;if(n[t]){var r=n[t];if(!r||!i)return r;for(var o in r)if((o=r[o]).fixtureKey===i)return o}return null},getTilemapData:function(e){return this.getItem(e,U.Cache.TILEMAP,"getTilemapData")},getBinary:function(e){return this.getItem(e,U.Cache.BINARY,"getBinary")},getBitmapData:function(e){return this.getItem(e,U.Cache.BITMAPDATA,"getBitmapData","data")},getBitmapFont:function(e){return this.getItem(e,U.Cache.BITMAPFONT,"getBitmapFont")},getJSON:function(e,t){var i=this.getItem(e,U.Cache.JSON,"getJSON","data");return i?t?U.Utils.extend(!0,Array.isArray(i)?[]:{},i):i:null},getXML:function(e){return this.getItem(e,U.Cache.XML,"getXML","data")},getVideo:function(e){return this.getItem(e,U.Cache.VIDEO,"getVideo")},getShader:function(e){return this.getItem(e,U.Cache.SHADER,"getShader","data")},getRenderTexture:function(e){return this.getItem(e,U.Cache.RENDER_TEXTURE,"getRenderTexture")},getBaseTexture:function(e,t){return void 0===t&&(t=U.Cache.IMAGE),this.getItem(e,t,"getBaseTexture","base")},getFrame:function(e,t){return void 0===t&&(t=U.Cache.IMAGE),this.getItem(e,t,"getFrame","frame")},getFrameCount:function(e,t){var i=this.getFrameData(e,t);return i?i.total:0},getFrameData:function(e,t){return void 0===t&&(t=U.Cache.IMAGE),this.getItem(e,t,"getFrameData","frameData")},hasFrameData:function(e,t){return void 0===t&&(t=U.Cache.IMAGE),null!==this.getItem(e,t,"","frameData")},updateFrameData:function(e,t,i){void 0===i&&(i=U.Cache.IMAGE),this._cacheMap[i][e]&&(this._cacheMap[i][e].frameData=t)},getFrameByIndex:function(e,t,i){var n=this.getFrameData(e,i);return n?n.getFrame(t):null},getFrameByName:function(e,t,i){var n=this.getFrameData(e,i);return n?n.getFrameByName(t):null},getURL:function(e){return(e=this._resolveURL(e))?this._urlMap[e]:null},getKeys:function(e){void 0===e&&(e=U.Cache.IMAGE);var t=[];if(this._cacheMap[e])for(var i in this._cacheMap[e])"__default"!==i&&"__missing"!==i&&t.push(i);return t},removeCanvas:function(e){delete this._cache.canvas[e]},removeImage:function(e,t){void 0===t&&(t=!0);var i=this.getImage(e,!0);t&&i.base&&i.base.destroy(),delete this._cache.image[e]},removeSound:function(e){delete this._cache.sound[e]},removeText:function(e){delete this._cache.text[e]},removePhysics:function(e){delete this._cache.physics[e]},removeTilemap:function(e){delete this._cache.tilemap[e]},removeBinary:function(e){delete this._cache.binary[e]},removeBitmapData:function(e){delete this._cache.bitmapData[e]},removeBitmapFont:function(e){delete this._cache.bitmapFont[e]},removeJSON:function(e){delete this._cache.json[e]},removeXML:function(e){delete this._cache.xml[e]},removeVideo:function(e){delete this._cache.video[e]},removeShader:function(e){delete this._cache.shader[e]},removeRenderTexture:function(e){delete this._cache.renderTexture[e]},removeSpriteSheet:function(e){delete this._cache.spriteSheet[e]},removeTextureAtlas:function(e){delete this._cache.atlas[e]},clearGLTextures:function(){for(var e in this._cache.image)this._cache.image[e].base._glTextures=[]},_resolveURL:function(e,t){return this.autoResolveURL?(this._urlResolver.src=this.game.load.baseURL+e,this._urlTemp=this._urlResolver.src,this._urlResolver.src="",t&&(this._urlMap[this._urlTemp]=t),this._urlTemp):null},destroy:function(){for(var e=0;e<this._cacheMap.length;e++){var t=this._cacheMap[e];for(var i in t)"__default"!==i&&"__missing"!==i&&(t[i].destroy&&t[i].destroy(),delete t[i])}this._urlMap=null,this._urlResolver=null,this._urlTemp=null}},U.Cache.prototype.constructor=U.Cache,U.Loader=function(e){this.game=e,this.cache=e.cache,this.resetLocked=!1,this.isLoading=!1,this.hasLoaded=!1,this.preloadSprite=null,this.crossOrigin=!1,this.baseURL="",this.path="",this.headers={requestedWith:!1,json:"application/json",xml:"application/xml"},this.onLoadStart=new U.Signal,this.onLoadComplete=new U.Signal,this.onPackComplete=new U.Signal,this.onFileStart=new U.Signal,this.onFileComplete=new U.Signal,this.onFileError=new U.Signal,this.useXDomainRequest=!1,this._warnedAboutXDomainRequest=!1,this.enableParallel=!0,this.maxParallelDownloads=4,this._withSyncPointDepth=0,this._fileList=[],this._flightQueue=[],this._processingHead=0,this._fileLoadStarted=!1,this._totalPackCount=0,this._totalFileCount=0,this._loadedPackCount=0,this._loadedFileCount=0},U.Loader.TEXTURE_ATLAS_JSON_ARRAY=0,U.Loader.TEXTURE_ATLAS_JSON_HASH=1,U.Loader.TEXTURE_ATLAS_XML_STARLING=2,U.Loader.PHYSICS_LIME_CORONA_JSON=3,U.Loader.PHYSICS_PHASER_JSON=4,U.Loader.TEXTURE_ATLAS_JSON_PYXEL=5,U.Loader.prototype={setPreloadSprite:function(e,t){t=t||0,this.preloadSprite={sprite:e,direction:t,width:e.width,height:e.height,rect:null},this.preloadSprite.rect=0===t?new U.Rectangle(0,0,1,e.height):new U.Rectangle(0,0,e.width,1),e.crop(this.preloadSprite.rect),e.visible=!0},resize:function(){this.preloadSprite&&this.preloadSprite.height!==this.preloadSprite.sprite.height&&(this.preloadSprite.rect.height=this.preloadSprite.sprite.height)},checkKeyExists:function(e,t){return-1<this.getAssetIndex(e,t)},getAssetIndex:function(e,t){for(var i=-1,n=0;n<this._fileList.length;n++){var r=this._fileList[n];if(r.type===e&&r.key===t&&(i=n,!r.loaded&&!r.loading))break}return i},getAsset:function(e,t){var i=this.getAssetIndex(e,t);return-1<i&&{index:i,file:this._fileList[i]}},reset:function(e,t){void 0===t&&(t=!1),this.resetLocked||(e&&(this.preloadSprite=null),this.isLoading=!1,this._processingHead=0,this._fileList.length=0,this._flightQueue.length=0,this._fileLoadStarted=!1,this._totalFileCount=0,this._totalPackCount=0,this._loadedPackCount=0,this._loadedFileCount=0,t&&(this.onLoadStart.removeAll(),this.onLoadComplete.removeAll(),this.onPackComplete.removeAll(),this.onFileStart.removeAll(),this.onFileComplete.removeAll(),this.onFileError.removeAll()))},addToFileList:function(e,t,i,n,r,o){if(void 0===r&&(r=!1),void 0===t||""===t)return this;if(null==i){if(!o)return this;i=t+o}var a={type:e,key:t,path:this.path,url:i,syncPoint:0<this._withSyncPointDepth,data:null,loading:!1,loaded:!1,error:!1};if(n)for(var s in n)a[s]=n[s];var p=this.getAssetIndex(e,t);if(r&&-1<p){var l=this._fileList[p];l.loading||l.loaded?(this._fileList.push(a),this._totalFileCount++):this._fileList[p]=a}else-1===p&&(this._fileList.push(a),this._totalFileCount++);return this},replaceInFileList:function(e,t,i,n){return this.addToFileList(e,t,i,n,!0)},pack:function(e,t,i,n){if(void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=null),!t&&!i)return this;var r={type:"packfile",key:e,url:t,path:this.path,syncPoint:!0,data:null,loading:!1,loaded:!1,error:!1,callbackContext:n};i&&("string"==typeof i&&(i=JSON.parse(i)),r.data=i||{},r.loaded=!0);for(var o=0;o<this._fileList.length+1;o++){var a=this._fileList[o];if(!a||!a.loaded&&!a.loading&&"packfile"!==a.type){this._fileList.splice(o,0,r),this._totalPackCount++;break}}return this},image:function(e,t,i){return this.addToFileList("image",e,t,void 0,i,".png")},images:function(e,t){if(Array.isArray(t))for(var i=0;i<e.length;i++)this.image(e[i],t[i]);else for(i=0;i<e.length;i++)this.image(e[i]);return this},text:function(e,t,i){return this.addToFileList("text",e,t,void 0,i,".txt")},json:function(e,t,i){return this.addToFileList("json",e,t,void 0,i,".json")},shader:function(e,t,i){return this.addToFileList("shader",e,t,void 0,i,".frag")},xml:function(e,t,i){return this.addToFileList("xml",e,t,void 0,i,".xml")},script:function(e,t,i,n){return void 0===i&&(i=!1),!1!==i&&void 0===n&&(n=this),this.addToFileList("script",e,t,{syncPoint:!0,callback:i,callbackContext:n},!1,".js")},binary:function(e,t,i,n){return void 0===i&&(i=!1),!1!==i&&void 0===n&&(n=i),this.addToFileList("binary",e,t,{callback:i,callbackContext:n},!1,".bin")},spritesheet:function(e,t,i,n,r,o,a){return void 0===r&&(r=-1),void 0===o&&(o=0),void 0===a&&(a=0),this.addToFileList("spritesheet",e,t,{frameWidth:i,frameHeight:n,frameMax:r,margin:o,spacing:a},!1,".png")},audio:function(e,t,i){return this.game.sound.noAudio?this:(void 0===i&&(i=!0),"string"==typeof t&&(t=[t]),this.addToFileList("audio",e,t,{buffer:null,autoDecode:i}))},audioSprite:function(e,t,i,n,r){return this.game.sound.noAudio||(void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r=!0),this.audio(e,t,r),i?this.json(e+"-audioatlas",i):n&&("string"==typeof n&&(n=JSON.parse(n)),this.cache.addJSON(e+"-audioatlas","",n))),this},audiosprite:function(e,t,i,n,r){return this.audioSprite(e,t,i,n,r)},video:function(e,t,i,n){return void 0===i&&(i=this.game.device.firefox?"loadeddata":"canplaythrough"),void 0===n&&(n=!1),"string"==typeof t&&(t=[t]),this.addToFileList("video",e,t,{buffer:null,asBlob:n,loadEvent:i})},tilemap:function(e,t,i,n){if(void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=U.Tilemap.CSV),t||i||(t=n===U.Tilemap.CSV?e+".csv":e+".json"),i){switch(n){case U.Tilemap.CSV:break;case U.Tilemap.TILED_JSON:"string"==typeof i&&(i=JSON.parse(i))}this.cache.addTilemap(e,null,i,n)}else this.addToFileList("tilemap",e,t,{format:n});return this},physics:function(e,t,i,n){return void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=U.Physics.LIME_CORONA_JSON),t||i||(t=e+".json"),i?("string"==typeof i&&(i=JSON.parse(i)),this.cache.addPhysicsData(e,null,i,n)):this.addToFileList("physics",e,t,{format:n}),this},bitmapFont:function(e,t,i,n,r,o){if(null==t&&(t=e+".png"),void 0===i&&(i=null),void 0===n&&(n=null),null===i&&null===n&&(i=e+".xml"),void 0===r&&(r=0),void 0===o&&(o=0),i)this.addToFileList("bitmapfont",e,t,{atlasURL:i,xSpacing:r,ySpacing:o});else if("string"==typeof n){var a,s;try{a=JSON.parse(n)}catch(e){s=this.parseXml(n)}if(!s&&!a)throw new Error("Phaser.Loader. Invalid Bitmap Font atlas given");this.addToFileList("bitmapfont",e,t,{atlasURL:null,atlasData:a||s,atlasType:a?"json":"xml",xSpacing:r,ySpacing:o})}return this},atlasJSONArray:function(e,t,i,n){return this.atlas(e,t,i,n,U.Loader.TEXTURE_ATLAS_JSON_ARRAY)},atlasJSONHash:function(e,t,i,n){return this.atlas(e,t,i,n,U.Loader.TEXTURE_ATLAS_JSON_HASH)},atlasXML:function(e,t,i,n){return void 0===i&&(i=null),void 0===n&&(n=null),i||n||(i=e+".xml"),this.atlas(e,t,i,n,U.Loader.TEXTURE_ATLAS_XML_STARLING)},atlas:function(e,t,i,n,r){if(null==t&&(t=e+".png"),void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r=U.Loader.TEXTURE_ATLAS_JSON_ARRAY),i||n||(i=r===U.Loader.TEXTURE_ATLAS_XML_STARLING?e+".xml":e+".json"),i)this.addToFileList("textureatlas",e,t,{atlasURL:i,format:r});else{switch(r){case U.Loader.TEXTURE_ATLAS_JSON_ARRAY:"string"==typeof n&&(n=JSON.parse(n));break;case U.Loader.TEXTURE_ATLAS_XML_STARLING:if("string"==typeof n){var o=this.parseXml(n);if(!o)throw new Error("Phaser.Loader. Invalid Texture Atlas XML given");n=o}}this.addToFileList("textureatlas",e,t,{atlasURL:null,atlasData:n,format:r})}return this},withSyncPoint:function(e,t){this._withSyncPointDepth++;try{e.call(t||this,this)}finally{this._withSyncPointDepth--}return this},addSyncPoint:function(e,t){var i=this.getAsset(e,t);return i&&(i.file.syncPoint=!0),this},removeFile:function(e,t){var i=this.getAsset(e,t);i&&(i.loaded||i.loading||this._fileList.splice(i.index,1))},removeAll:function(){this._fileList.length=0,this._flightQueue.length=0},start:function(){this.isLoading||(this.hasLoaded=!1,this.isLoading=!0,this.updateProgress(),this.processLoadQueue())},processLoadQueue:function(){if(this.isLoading){for(var e=0;e<this._flightQueue.length;e++){((n=this._flightQueue[e]).loaded||n.error)&&(this._flightQueue.splice(e,1),e--,n.loading=!1,n.requestUrl=null,n.requestObject=null,n.error&&this.onFileError.dispatch(n.key,n),"packfile"!==n.type?(this._loadedFileCount++,this.onFileComplete.dispatch(this.progress,n.key,!n.error,this._loadedFileCount,this._totalFileCount)):"packfile"===n.type&&n.error&&(this._loadedPackCount++,this.onPackComplete.dispatch(n.key,!n.error,this._loadedPackCount,this._totalPackCount)))}var t=!1,i=this.enableParallel?U.Math.clamp(this.maxParallelDownloads,1,12):1;for(e=this._processingHead;e<this._fileList.length;e++){var n;if("packfile"===(n=this._fileList[e]).type&&!n.error&&n.loaded&&e===this._processingHead&&(this.processPack(n),this._loadedPackCount++,this.onPackComplete.dispatch(n.key,!n.error,this._loadedPackCount,this._totalPackCount)),n.loaded||n.error?e===this._processingHead&&(this._processingHead=e+1):!n.loading&&this._flightQueue.length<i&&("packfile"!==n.type||n.data?t||(this._fileLoadStarted||(this._fileLoadStarted=!0,this.onLoadStart.dispatch()),this._flightQueue.push(n),n.loading=!0,this.onFileStart.dispatch(this.progress,n.key,n.url),this.loadFile(n)):(this._flightQueue.push(n),n.loading=!0,this.loadFile(n))),!n.loaded&&n.syncPoint&&(t=!0),this._flightQueue.length>=i||t&&this._loadedPackCount===this._totalPackCount)break}if(this.updateProgress(),this._processingHead>=this._fileList.length)this.finishedLoading();else if(!this._flightQueue.length){var r=this;setTimeout(function(){r.finishedLoading(!0)},2e3)}}else this.finishedLoading(!0)},finishedLoading:function(e){this.hasLoaded||(this.hasLoaded=!0,this.isLoading=!1,e||this._fileLoadStarted||(this._fileLoadStarted=!0,this.onLoadStart.dispatch()),this.onLoadComplete.dispatch(),this.game.state.loadComplete(),this.reset())},asyncComplete:function(e,t){void 0===t&&(t=""),e.loaded=!0,e.error=!!t,t&&(e.errorMessage=t),this.processLoadQueue()},processPack:function(e){var t=e.data[e.key];if(t)for(var i=0;i<t.length;i++){var n=t[i];switch(n.type){case"image":this.image(n.key,n.url,n.overwrite);break;case"text":this.text(n.key,n.url,n.overwrite);break;case"json":this.json(n.key,n.url,n.overwrite);break;case"xml":this.xml(n.key,n.url,n.overwrite);break;case"script":this.script(n.key,n.url,n.callback,e.callbackContext||this);break;case"binary":this.binary(n.key,n.url,n.callback,e.callbackContext||this);break;case"spritesheet":this.spritesheet(n.key,n.url,n.frameWidth,n.frameHeight,n.frameMax,n.margin,n.spacing);break;case"video":this.video(n.key,n.urls);break;case"audio":this.audio(n.key,n.urls,n.autoDecode);break;case"audiosprite":this.audiosprite(n.key,n.urls,n.jsonURL,n.jsonData,n.autoDecode);break;case"tilemap":this.tilemap(n.key,n.url,n.data,U.Tilemap[n.format]);break;case"physics":this.physics(n.key,n.url,n.data,U.Loader[n.format]);break;case"bitmapFont":this.bitmapFont(n.key,n.textureURL,n.atlasURL,n.atlasData,n.xSpacing,n.ySpacing);break;case"atlasJSONArray":this.atlasJSONArray(n.key,n.textureURL,n.atlasURL,n.atlasData);break;case"atlasJSONHash":this.atlasJSONHash(n.key,n.textureURL,n.atlasURL,n.atlasData);break;case"atlasXML":this.atlasXML(n.key,n.textureURL,n.atlasURL,n.atlasData);break;case"atlas":this.atlas(n.key,n.textureURL,n.atlasURL,n.atlasData,U.Loader[n.format]);break;case"shader":this.shader(n.key,n.url,n.overwrite)}}},transformUrl:function(e,t){return!!e&&(e.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?e:this.baseURL+t.path+e)},loadFile:function(e){switch(e.type){case"packfile":this.xhrLoad(e,this.transformUrl(e.url,e),"text",this.fileComplete);break;case"image":case"spritesheet":case"textureatlas":case"bitmapfont":this.loadImageTag(e);break;case"audio":e.url=this.getAudioURL(e.url),e.url?this.game.sound.usingWebAudio?this.xhrLoad(e,this.transformUrl(e.url,e),"arraybuffer",this.fileComplete):this.game.sound.usingAudioTag&&this.loadAudioTag(e):this.fileError(e,null,"No supported audio URL specified or device does not have audio playback support");break;case"video":e.url=this.getVideoURL(e.url),e.url?e.asBlob?this.xhrLoad(e,this.transformUrl(e.url,e),"blob",this.fileComplete):this.loadVideoTag(e):this.fileError(e,null,"No supported video URL specified or device does not have video playback support");break;case"json":this.xhrLoad(e,this.transformUrl(e.url,e),"text",this.jsonLoadComplete);break;case"xml":this.xhrLoad(e,this.transformUrl(e.url,e),"text",this.xmlLoadComplete);break;case"tilemap":e.format===U.Tilemap.TILED_JSON?this.xhrLoad(e,this.transformUrl(e.url,e),"text",this.jsonLoadComplete):e.format===U.Tilemap.CSV?this.xhrLoad(e,this.transformUrl(e.url,e),"text",this.csvLoadComplete):this.asyncComplete(e,"invalid Tilemap format: "+e.format);break;case"text":case"script":case"shader":case"physics":this.xhrLoad(e,this.transformUrl(e.url,e),"text",this.fileComplete);break;case"binary":this.xhrLoad(e,this.transformUrl(e.url,e),"arraybuffer",this.fileComplete)}},loadImageTag:function(e){var t=this;e.data=new Image,e.data.name=e.key,this.crossOrigin&&(e.data.crossOrigin=this.crossOrigin),e.data.onload=function(){e.data.onload&&(e.data.onload=null,e.data.onerror=null,t.fileComplete(e))},e.data.onerror=function(){e.data.onload&&(e.data.onload=null,e.data.onerror=null,t.fileError(e))},e.data.src=this.transformUrl(e.url,e),e.data.complete&&e.data.width&&e.data.height&&(e.data.onload=null,e.data.onerror=null,this.fileComplete(e))},loadVideoTag:function(e){var t=this;e.data=document.createElement("video"),e.data.name=e.key,e.data.controls=!1,e.data.autoplay=!1;var i=function(){e.data.removeEventListener(e.loadEvent,i,!1),e.data.onerror=null,e.data.canplay=!0,U.GAMES[t.game.id].load.fileComplete(e)};e.data.onerror=function(){e.data.removeEventListener(e.loadEvent,i,!1),e.data.onerror=null,e.data.canplay=!1,t.fileError(e)},e.data.addEventListener(e.loadEvent,i,!1),e.data.src=this.transformUrl(e.url,e),e.data.load()},loadAudioTag:function(e){var t=this;if(this.game.sound.touchLocked)e.data=new Audio,e.data.name=e.key,e.data.preload="auto",e.data.src=this.transformUrl(e.url,e),this.fileComplete(e);else{e.data=new Audio,e.data.name=e.key;var i=function(){e.data.removeEventListener("canplaythrough",i,!1),e.data.onerror=null,t.fileComplete(e)};e.data.onerror=function(){e.data.removeEventListener("canplaythrough",i,!1),e.data.onerror=null,t.fileError(e)},e.data.preload="auto",e.data.src=this.transformUrl(e.url,e),e.data.addEventListener("canplaythrough",i,!1),e.data.load()}},xhrLoad:function(t,e,i,n,r){if(this.useXDomainRequest&&window.XDomainRequest)this.xhrLoadWithXDR(t,e,i,n,r);else{var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType=i,!1!==this.headers.requestedWith&&o.setRequestHeader("X-Requested-With",this.headers.requestedWith),this.headers[t.type]&&o.setRequestHeader("Accept",this.headers[t.type]),r=r||this.fileError;var a=this;o.onload=function(){try{return 4===o.readyState&&400<=o.status&&o.status<=599?r.call(a,t,o):n.call(a,t,o)}catch(e){a.hasLoaded?window.console:a.asyncComplete(t,e.message||"Exception")}},o.onerror=function(){try{return r.call(a,t,o)}catch(e){a.hasLoaded?window.console:a.asyncComplete(t,e.message||"Exception")}},t.requestObject=o,t.requestUrl=e,o.send()}},xhrLoadWithXDR:function(t,e,i,n,r){this._warnedAboutXDomainRequest||this.game.device.ie&&!(10<=this.game.device.ieVersion)||(this._warnedAboutXDomainRequest=!0);var o=new window.XDomainRequest;o.open("GET",e,!0),o.responseType=i,o.timeout=3e3,r=r||this.fileError;var a=this;o.onerror=function(){try{return r.call(a,t,o)}catch(e){a.asyncComplete(t,e.message||"Exception")}},o.ontimeout=function(){try{return r.call(a,t,o)}catch(e){a.asyncComplete(t,e.message||"Exception")}},o.onprogress=function(){},o.onload=function(){try{return 4===o.readyState&&400<=o.status&&o.status<=599?r.call(a,t,o):n.call(a,t,o)}catch(e){a.asyncComplete(t,e.message||"Exception")}},t.requestObject=o,t.requestUrl=e,setTimeout(function(){o.send()},0)},getVideoURL:function(e){for(var t=0;t<e.length;t++){var i,n=e[t];if(n.uri){if(i=n.type,n=n.uri,this.game.device.canPlayVideo(i))return n}else{if(0===n.indexOf("blob:")||0===n.indexOf("data:"))return n;if(0<=n.indexOf("?")&&(n=n.substr(0,n.indexOf("?"))),i=n.substr((Math.max(0,n.lastIndexOf("."))||1/0)+1).toLowerCase(),this.game.device.canPlayVideo(i))return e[t]}}return null},getAudioURL:function(e){if(this.game.sound.noAudio)return null;for(var t=0;t<e.length;t++){var i,n=e[t];if(n.uri){if(i=n.type,n=n.uri,this.game.device.canPlayAudio(i))return n}else{if(0===n.indexOf("blob:")||0===n.indexOf("data:"))return n;if(0<=n.indexOf("?")&&(n=n.substr(0,n.indexOf("?"))),i=n.substr((Math.max(0,n.lastIndexOf("."))||1/0)+1).toLowerCase(),this.game.device.canPlayAudio(i))return e[t]}}return null},fileError:function(e,t,i){var n="error loading asset from URL "+(e.requestUrl||this.transformUrl(e.url,e));!i&&t&&(i=t.status),i&&(n=n+" ("+i+")"),this.asyncComplete(e,n)},fileComplete:function(t,e){var i=!0;switch(t.type){case"packfile":var n=JSON.parse(e.responseText);t.data=n||{};break;case"image":this.cache.addImage(t.key,t.url,t.data);break;case"spritesheet":this.cache.addSpriteSheet(t.key,t.url,t.data,t.frameWidth,t.frameHeight,t.frameMax,t.margin,t.spacing);break;case"textureatlas":if(null==t.atlasURL)this.cache.addTextureAtlas(t.key,t.url,t.data,t.atlasData,t.format);else if(i=!1,t.format===U.Loader.TEXTURE_ATLAS_JSON_ARRAY||t.format===U.Loader.TEXTURE_ATLAS_JSON_HASH||t.format===U.Loader.TEXTURE_ATLAS_JSON_PYXEL)this.xhrLoad(t,this.transformUrl(t.atlasURL,t),"text",this.jsonLoadComplete);else{if(t.format!==U.Loader.TEXTURE_ATLAS_XML_STARLING)throw new Error("Phaser.Loader. Invalid Texture Atlas format: "+t.format);this.xhrLoad(t,this.transformUrl(t.atlasURL,t),"text",this.xmlLoadComplete)}break;case"bitmapfont":t.atlasURL?(i=!1,this.xhrLoad(t,this.transformUrl(t.atlasURL,t),"text",function(e,t){var i;try{i=JSON.parse(t.responseText)}catch(e){}i?(e.atlasType="json",this.jsonLoadComplete(e,t)):(e.atlasType="xml",this.xmlLoadComplete(e,t))})):this.cache.addBitmapFont(t.key,t.url,t.data,t.atlasData,t.atlasType,t.xSpacing,t.ySpacing);break;case"video":if(t.asBlob)try{t.data=e.response}catch(e){throw new Error("Phaser.Loader. Unable to parse video file as Blob: "+t.key)}this.cache.addVideo(t.key,t.url,t.data,t.asBlob);break;case"audio":this.game.sound.usingWebAudio?(t.data=e.response,this.cache.addSound(t.key,t.url,t.data,!0,!1),t.autoDecode&&this.game.sound.decode(t.key)):this.cache.addSound(t.key,t.url,t.data,!1,!0);break;case"text":t.data=e.responseText,this.cache.addText(t.key,t.url,t.data);break;case"shader":t.data=e.responseText,this.cache.addShader(t.key,t.url,t.data);break;case"physics":n=JSON.parse(e.responseText);this.cache.addPhysicsData(t.key,t.url,n,t.format);break;case"script":t.data=document.createElement("script"),t.data.language="javascript",t.data.type="text/javascript",t.data.defer=!1,t.data.text=e.responseText,document.head.appendChild(t.data),t.callback&&(t.data=t.callback.call(t.callbackContext,t.key,e.responseText));break;case"binary":t.callback?t.data=t.callback.call(t.callbackContext,t.key,e.response):t.data=e.response,this.cache.addBinary(t.key,t.data)}i&&this.asyncComplete(t)},jsonLoadComplete:function(e,t){var i=JSON.parse(t.responseText);"tilemap"===e.type?this.cache.addTilemap(e.key,e.url,i,e.format):"bitmapfont"===e.type?this.cache.addBitmapFont(e.key,e.url,e.data,i,e.atlasType,e.xSpacing,e.ySpacing):"json"===e.type?this.cache.addJSON(e.key,e.url,i):this.cache.addTextureAtlas(e.key,e.url,e.data,i,e.format),this.asyncComplete(e)},csvLoadComplete:function(e,t){var i=t.responseText;this.cache.addTilemap(e.key,e.url,i,e.format),this.asyncComplete(e)},xmlLoadComplete:function(e,t){var i=t.responseText,n=this.parseXml(i);if(n)"bitmapfont"===e.type?this.cache.addBitmapFont(e.key,e.url,e.data,n,e.atlasType,e.xSpacing,e.ySpacing):"textureatlas"===e.type?this.cache.addTextureAtlas(e.key,e.url,e.data,n,e.format):"xml"===e.type&&this.cache.addXML(e.key,e.url,n),this.asyncComplete(e);else{t.responseType||t.contentType;this.asyncComplete(e,"invalid XML")}},parseXml:function(e){var t;try{if(window.DOMParser)t=(new DOMParser).parseFromString(e,"text/xml");else(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)}catch(e){t=null}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length?t:null},updateProgress:function(){this.preloadSprite&&(0===this.preloadSprite.direction?this.preloadSprite.rect.width=Math.floor(this.preloadSprite.width/100*this.progress):this.preloadSprite.rect.height=Math.floor(this.preloadSprite.height/100*this.progress),this.preloadSprite.sprite?this.preloadSprite.sprite.updateCrop():this.preloadSprite=null)},totalLoadedFiles:function(){return this._loadedFileCount},totalQueuedFiles:function(){return this._totalFileCount-this._loadedFileCount},totalLoadedPacks:function(){return this._totalPackCount},totalQueuedPacks:function(){return this._totalPackCount-this._loadedPackCount}},Object.defineProperty(U.Loader.prototype,"progressFloat",{get:function(){var e=this._loadedFileCount/this._totalFileCount*100;return U.Math.clamp(e||0,0,100)}}),Object.defineProperty(U.Loader.prototype,"progress",{get:function(){return Math.round(this.progressFloat)}}),U.Loader.prototype.constructor=U.Loader,U.LoaderParser={bitmapFont:function(e,t,i,n){return this.xmlBitmapFont(e,t,i,n)},xmlBitmapFont:function(e,t,i,n){var r={},o=e.getElementsByTagName("info")[0],a=e.getElementsByTagName("common")[0];r.font=o.getAttribute("face"),r.size=parseInt(o.getAttribute("size"),10),r.lineHeight=parseInt(a.getAttribute("lineHeight"),10)+n,r.chars={};for(var s=e.getElementsByTagName("char"),p=0;p<s.length;p++){var l=parseInt(s[p].getAttribute("id"),10);r.chars[l]={x:parseInt(s[p].getAttribute("x"),10),y:parseInt(s[p].getAttribute("y"),10),width:parseInt(s[p].getAttribute("width"),10),height:parseInt(s[p].getAttribute("height"),10),xOffset:parseInt(s[p].getAttribute("xoffset"),10),yOffset:parseInt(s[p].getAttribute("yoffset"),10),xAdvance:parseInt(s[p].getAttribute("xadvance"),10)+i,kerning:{}}}var h=e.getElementsByTagName("kerning");for(p=0;p<h.length;p++){var u=parseInt(h[p].getAttribute("first"),10),d=parseInt(h[p].getAttribute("second"),10),c=parseInt(h[p].getAttribute("amount"),10);r.chars[d].kerning[u]=c}return this.finalizeBitmapFont(t,r)},jsonBitmapFont:function(e,t,i,n){var r={font:e.font.info._face,size:parseInt(e.font.info._size,10),lineHeight:parseInt(e.font.common._lineHeight,10)+n,chars:{}};return e.font.chars.char.forEach(function(e){var t=parseInt(e._id,10);r.chars[t]={x:parseInt(e._x,10),y:parseInt(e._y,10),width:parseInt(e._width,10),height:parseInt(e._height,10),xOffset:parseInt(e._xoffset,10),yOffset:parseInt(e._yoffset,10),xAdvance:parseInt(e._xadvance,10)+i,kerning:{}}}),e.font.kernings&&e.font.kernings.kerning&&e.font.kernings.kerning.forEach(function(e){r.chars[e._second].kerning[e._first]=parseInt(e._amount,10)}),this.finalizeBitmapFont(t,r)},finalizeBitmapFont:function(i,n){return Object.keys(n.chars).forEach(function(e){var t=n.chars[e];t.texture=new PIXI.Texture(i,new U.Rectangle(t.x,t.y,t.width,t.height))}),n}},U.AudioSprite=function(e,t){for(var i in this.game=e,this.key=t,this.config=this.game.cache.getJSON(t+"-audioatlas"),this.autoplayKey=null,this.autoplay=!1,this.sounds={},this.config.spritemap){var n=this.config.spritemap[i],r=this.game.add.sound(this.key);r.addMarker(i,n.start,n.end-n.start,null,n.loop),this.sounds[i]=r}this.config.autoplay&&(this.autoplayKey=this.config.autoplay,this.play(this.autoplayKey),this.autoplay=this.sounds[this.autoplayKey])},U.AudioSprite.prototype={play:function(e,t){return void 0===t&&(t=1),this.sounds[e].play(e,null,t)},stop:function(e){if(e)this.sounds[e].stop();else for(var t in this.sounds)this.sounds[t].stop()},get:function(e){return this.sounds[e]}},U.AudioSprite.prototype.constructor=U.AudioSprite,U.Sound=function(e,t,i,n,r){void 0===i&&(i=1),void 0===n&&(n=!1),void 0===r&&(r=e.sound.connectToMaster),this.game=e,this.name=t,this.key=t,this.loop=n,this.markers={},this.context=null,this.autoplay=!1,this.totalDuration=0,this.startTime=0,this.currentTime=0,this.duration=0,this.durationMS=0,this.position=0,this.stopTime=0,this.paused=!1,this.pausedPosition=0,this.pausedTime=0,this.isPlaying=!1,this.currentMarker="",this.fadeTween=null,this.pendingPlayback=!1,this.override=!1,this.allowMultiple=!1,this.usingWebAudio=this.game.sound.usingWebAudio,this.usingAudioTag=this.game.sound.usingAudioTag,this.externalNode=null,this.masterGainNode=null,this.gainNode=null,this._sound=null,this.usingWebAudio?(this.context=this.game.sound.context,this.masterGainNode=this.game.sound.masterGain,void 0===this.context.createGain?this.gainNode=this.context.createGainNode():this.gainNode=this.context.createGain(),this.gainNode.gain.value=i*this.game.sound.volume,r&&this.gainNode.connect(this.masterGainNode)):this.usingAudioTag&&(this.game.cache.getSound(t)&&this.game.cache.isSoundReady(t)?(this._sound=this.game.cache.getSoundData(t),this.totalDuration=0,this._sound.duration&&(this.totalDuration=this._sound.duration)):this.game.cache.onSoundUnlock.add(this.soundHasUnlocked,this)),this.onDecoded=new U.Signal,this.onPlay=new U.Signal,this.onPause=new U.Signal,this.onResume=new U.Signal,this.onLoop=new U.Signal,this.onStop=new U.Signal,this.onMute=new U.Signal,this.onMarkerComplete=new U.Signal,this.onFadeComplete=new U.Signal,this._volume=i,this._buffer=null,this._muted=!1,this._tempMarker=0,this._tempPosition=0,this._tempVolume=0,this._tempPause=0,this._muteVolume=0,this._tempLoop=0,this._paused=!1,this._onDecodedEventDispatched=!1},U.Sound.prototype={soundHasUnlocked:function(e){e===this.key&&(this._sound=this.game.cache.getSoundData(this.key),this.totalDuration=this._sound.duration)},addMarker:function(e,t,i,n,r){null==i&&(i=1),null==n&&(n=1),void 0===r&&(r=!1),this.markers[e]={name:e,start:t,stop:t+i,volume:n,duration:i,durationMS:1e3*i,loop:r}},removeMarker:function(e){delete this.markers[e]},onEndedHandler:function(){this._sound.onended=null,this.isPlaying=!1,this.currentTime=this.durationMS,this.stop()},update:function(){this.game.cache.checkSoundKey(this.key)?(this.isDecoded&&!this._onDecodedEventDispatched&&(this.onDecoded.dispatch(this),this._onDecodedEventDispatched=!0),this.pendingPlayback&&this.game.cache.isSoundReady(this.key)&&(this.pendingPlayback=!1,this.play(this._tempMarker,this._tempPosition,this._tempVolume,this._tempLoop)),this.isPlaying&&(this.currentTime=this.game.time.time-this.startTime,this.currentTime>=this.durationMS&&(this.usingWebAudio?this.loop?(this.onLoop.dispatch(this),this.isPlaying=!1,""===this.currentMarker?(this.currentTime=0,this.startTime=this.game.time.time,this.isPlaying=!0):(this.onMarkerComplete.dispatch(this.currentMarker,this),this.play(this.currentMarker,0,this.volume,!0,!0))):""!==this.currentMarker&&this.stop():this.loop?(this.onLoop.dispatch(this),""===this.currentMarker&&(this.currentTime=0,this.startTime=this.game.time.time),this.isPlaying=!1,this.play(this.currentMarker,0,this.volume,!0,!0)):this.stop()))):this.destroy()},loopFull:function(e){return this.play(null,0,e,!0)},play:function(e,t,i,n,r){if(void 0!==e&&!1!==e&&null!==e||(e=""),void 0===r&&(r=!0),this.isPlaying&&!this.allowMultiple&&!r&&!this.override)return this;if(this._sound&&this.isPlaying&&!this.allowMultiple&&(this.override||r)){if(this.usingWebAudio){if(void 0===this._sound.stop)this._sound.noteOff(0);else try{this._sound.stop(0)}catch(e){}this.externalNode?this._sound.disconnect(this.externalNode):this.gainNode&&this._sound.disconnect(this.gainNode)}else this.usingAudioTag&&(this._sound.pause(),this._sound.currentTime=0);this.isPlaying=!1}if(""===e&&0<Object.keys(this.markers).length)return this;if(""!==e){if(!this.markers[e])return this;this.currentMarker=e,this.position=this.markers[e].start,this.volume=this.markers[e].volume,this.loop=this.markers[e].loop,this.duration=this.markers[e].duration,this.durationMS=this.markers[e].durationMS,void 0!==i&&(this.volume=i),void 0!==n&&(this.loop=n),this._tempMarker=e,this._tempPosition=this.position,this._tempVolume=this.volume,this._tempLoop=this.loop}else t=t||0,void 0===i&&(i=this._volume),void 0===n&&(n=this.loop),this.position=Math.max(0,t),this.volume=i,this.loop=n,this.duration=0,this.durationMS=0,this._tempMarker=e,this._tempPosition=t,this._tempVolume=i,this._tempLoop=n;return this.usingWebAudio?this.game.cache.isSoundDecoded(this.key)?(this._sound=this.context.createBufferSource(),this.externalNode?this._sound.connect(this.externalNode):this._sound.connect(this.gainNode),this._buffer=this.game.cache.getSoundData(this.key),this._sound.buffer=this._buffer,this.loop&&""===e&&(this._sound.loop=!0),this.loop||""!==e||(this._sound.onended=this.onEndedHandler.bind(this)),this.totalDuration=this._sound.buffer.duration,0===this.duration&&(this.duration=this.totalDuration,this.durationMS=Math.ceil(1e3*this.totalDuration)),void 0===this._sound.start?this._sound.noteGrainOn(0,this.position,this.duration):this.loop&&""===e?this._sound.start(0,0):this._sound.start(0,this.position,this.duration),this.isPlaying=!0,this.startTime=this.game.time.time,this.currentTime=0,this.stopTime=this.startTime+this.durationMS,this.onPlay.dispatch(this)):(this.pendingPlayback=!0,this.game.cache.getSound(this.key)&&!1===this.game.cache.getSound(this.key).isDecoding&&this.game.sound.decode(this.key,this)):this.game.cache.getSound(this.key)&&this.game.cache.getSound(this.key).locked?(this.game.cache.reloadSound(this.key),this.pendingPlayback=!0):this._sound&&(this.game.device.cocoonJS||4===this._sound.readyState)?(this._sound.play(),this.totalDuration=this._sound.duration,0===this.duration&&(this.duration=this.totalDuration,this.durationMS=1e3*this.totalDuration),this._sound.currentTime=this.position,this._sound.muted=this._muted,this._muted||this.game.sound.mute?this._sound.volume=0:this._sound.volume=this._volume,this.isPlaying=!0,this.startTime=this.game.time.time,this.currentTime=0,this.stopTime=this.startTime+this.durationMS,this.onPlay.dispatch(this)):this.pendingPlayback=!0,this},restart:function(e,t,i,n){e=e||"",t=t||0,i=i||1,void 0===n&&(n=!1),this.play(e,t,i,n,!0)},pause:function(){this.isPlaying&&this._sound&&(this.paused=!0,this.pausedPosition=this.currentTime,this.pausedTime=this.game.time.time,this._tempPause=this._sound.currentTime,this.onPause.dispatch(this),this.stop())},resume:function(){if(this.paused&&this._sound){if(this.usingWebAudio){var e=Math.max(0,this.position+this.pausedPosition/1e3);this._sound=this.context.createBufferSource(),this._sound.buffer=this._buffer,this.externalNode?this._sound.connect(this.externalNode):this._sound.connect(this.gainNode),this.loop&&(this._sound.loop=!0),this.loop||""!==this.currentMarker||(this._sound.onended=this.onEndedHandler.bind(this));var t=this.duration-this.pausedPosition/1e3;void 0===this._sound.start?this._sound.noteGrainOn(0,e,t):this.loop&&this.game.device.chrome?42===this.game.device.chromeVersion?this._sound.start(0):this._sound.start(0,e):this._sound.start(0,e,t)}else this._sound.currentTime=this._tempPause,this._sound.play();this.isPlaying=!0,this.paused=!1,this.startTime+=this.game.time.time-this.pausedTime,this.onResume.dispatch(this)}},stop:function(){if(this.isPlaying&&this._sound)if(this.usingWebAudio){if(void 0===this._sound.stop)this._sound.noteOff(0);else try{this._sound.stop(0)}catch(e){}this.externalNode?this._sound.disconnect(this.externalNode):this.gainNode&&this._sound.disconnect(this.gainNode)}else this.usingAudioTag&&(this._sound.pause(),this._sound.currentTime=0);if(this.pendingPlayback=!1,this.isPlaying=!1,!this.paused){var e=this.currentMarker;""!==this.currentMarker&&this.onMarkerComplete.dispatch(this.currentMarker,this),this.currentMarker="",null!==this.fadeTween&&this.fadeTween.stop(),this.onStop.dispatch(this,e)}},fadeIn:function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=this.currentMarker),this.paused||(this.play(i,0,0,t),this.fadeTo(e,1))},fadeOut:function(e){this.fadeTo(e,0)},fadeTo:function(e,t){this.isPlaying&&!this.paused&&t!==this.volume&&(void 0===e&&(e=1e3),void 0!==t&&(this.fadeTween=this.game.add.tween(this).to({volume:t},e,U.Easing.Linear.None,!0),this.fadeTween.onComplete.add(this.fadeComplete,this)))},fadeComplete:function(){this.onFadeComplete.dispatch(this,this.volume),0===this.volume&&this.stop()},updateGlobalVolume:function(e){this.usingAudioTag&&this._sound&&(this._sound.volume=e*this._volume)},destroy:function(e){void 0===e&&(e=!0),this.stop(),e?this.game.sound.remove(this):(this.markers={},this.context=null,this._buffer=null,this.externalNode=null,this.onDecoded.dispose(),this.onPlay.dispose(),this.onPause.dispose(),this.onResume.dispose(),this.onLoop.dispose(),this.onStop.dispose(),this.onMute.dispose(),this.onMarkerComplete.dispose())}},U.Sound.prototype.constructor=U.Sound,Object.defineProperty(U.Sound.prototype,"isDecoding",{get:function(){return this.game.cache.getSound(this.key).isDecoding}}),Object.defineProperty(U.Sound.prototype,"isDecoded",{get:function(){return this.game.cache.isSoundDecoded(this.key)}}),Object.defineProperty(U.Sound.prototype,"mute",{get:function(){return this._muted||this.game.sound.mute},set:function(e){(e=e||!1)!==this._muted&&(e?(this._muted=!0,this._muteVolume=this._tempVolume,this.usingWebAudio?this.gainNode.gain.value=0:this.usingAudioTag&&this._sound&&(this._sound.volume=0)):(this._muted=!1,this.usingWebAudio?this.gainNode.gain.value=this._muteVolume:this.usingAudioTag&&this._sound&&(this._sound.volume=this._muteVolume)),this.onMute.dispatch(this))}}),Object.defineProperty(U.Sound.prototype,"volume",{get:function(){return this._volume},set:function(e){this.game.device.firefox&&this.usingAudioTag&&(e=this.game.math.clamp(e,0,1)),this._muted?this._muteVolume=e:(this._tempVolume=e,this._volume=e,this.usingWebAudio?this.gainNode.gain.value=e:this.usingAudioTag&&this._sound&&(this._sound.volume=e))}}),U.SoundManager=function(e){this.game=e,this.onSoundDecode=new U.Signal,this.onVolumeChange=new U.Signal,this.onMute=new U.Signal,this.onUnMute=new U.Signal,this.context=null,this.usingWebAudio=!1,this.usingAudioTag=!1,this.noAudio=!1,this.connectToMaster=!0,this.touchLocked=!1,this.channels=32,this.muteOnPause=!0,this._codeMuted=!1,this._muted=!1,this._unlockSource=null,this._volume=1,this._sounds=[],this._watchList=new U.ArraySet,this._watching=!1,this._watchCallback=null,this._watchContext=null},U.SoundManager.prototype={boot:function(){if(this.game.device.iOS&&!1===this.game.device.webAudio&&(this.channels=1),window.PhaserGlobal){if(!0===window.PhaserGlobal.disableAudio)return this.noAudio=!0,void(this.touchLocked=!1);if(!0===window.PhaserGlobal.disableWebAudio)return this.usingAudioTag=!0,void(this.touchLocked=!1)}if(window.PhaserGlobal&&window.PhaserGlobal.audioContext)this.context=window.PhaserGlobal.audioContext;else if(window.AudioContext)try{this.context=new window.AudioContext}catch(e){this.context=null,this.usingWebAudio=!1,this.touchLocked=!1}else if(window.webkitAudioContext)try{this.context=new window.webkitAudioContext}catch(e){this.context=null,this.usingWebAudio=!1,this.touchLocked=!1}if(null===this.context){if(void 0===window.Audio)return void(this.noAudio=!0);this.usingAudioTag=!0}else this.usingWebAudio=!0,void 0===this.context.createGain?this.masterGain=this.context.createGainNode():this.masterGain=this.context.createGain(),this.masterGain.gain.value=1,this.masterGain.connect(this.context.destination);this.noAudio||(!this.game.device.cocoonJS&&this.game.device.iOS||window.PhaserGlobal&&window.PhaserGlobal.fakeiOSTouchLock)&&this.setTouchLock()},setTouchLock:function(){this.noAudio||window.PhaserGlobal&&!0===window.PhaserGlobal.disableAudio||(8<this.game.device.iOSVersion?this.game.input.touch.addTouchLockCallback(this.unlock,this,!0):this.game.input.touch.addTouchLockCallback(this.unlock,this),this.touchLocked=!0)},unlock:function(){if(this.noAudio||!this.touchLocked||null!==this._unlockSource)return!0;if(this.usingAudioTag)this.touchLocked=!1,this._unlockSource=null;else if(this.usingWebAudio){var e=this.context.createBuffer(1,1,22050);this._unlockSource=this.context.createBufferSource(),this._unlockSource.buffer=e,this._unlockSource.connect(this.context.destination),void 0===this._unlockSource.start?this._unlockSource.noteOn(0):this._unlockSource.start(0)}return!0},stopAll:function(){if(!this.noAudio)for(var e=0;e<this._sounds.length;e++)this._sounds[e]&&this._sounds[e].stop()},pauseAll:function(){if(!this.noAudio)for(var e=0;e<this._sounds.length;e++)this._sounds[e]&&this._sounds[e].pause()},resumeAll:function(){if(!this.noAudio)for(var e=0;e<this._sounds.length;e++)this._sounds[e]&&this._sounds[e].resume()},decode:function(t,i){i=i||null;var e=this.game.cache.getSoundData(t);if(e&&!1===this.game.cache.isSoundDecoded(t)){this.game.cache.updateSound(t,"isDecoding",!0);var n=this;try{this.context.decodeAudioData(e,function(e){e&&(n.game.cache.decodedSound(t,e),n.onSoundDecode.dispatch(t,i))})}catch(e){}}},setDecodedCallback:function(e,t,i){"string"==typeof e&&(e=[e]),this._watchList.reset();for(var n=0;n<e.length;n++)e[n]instanceof U.Sound?this.game.cache.isSoundDecoded(e[n].key)||this._watchList.add(e[n].key):this.game.cache.isSoundDecoded(e[n])||this._watchList.add(e[n]);0===this._watchList.total?(this._watching=!1,t.call(i)):(this._watching=!0,this._watchCallback=t,this._watchContext=i)},update:function(){if(!this.noAudio){!this.touchLocked||null===this._unlockSource||this._unlockSource.playbackState!==this._unlockSource.PLAYING_STATE&&this._unlockSource.playbackState!==this._unlockSource.FINISHED_STATE||(this.touchLocked=!1,this._unlockSource=null);for(var e=0;e<this._sounds.length;e++)this._sounds[e].update();if(this._watching){for(var t=this._watchList.first;t;)this.game.cache.isSoundDecoded(t)&&this._watchList.remove(t),t=this._watchList.next;0===this._watchList.total&&(this._watching=!1,this._watchCallback.call(this._watchContext))}}},add:function(e,t,i,n){void 0===t&&(t=1),void 0===i&&(i=!1),void 0===n&&(n=this.connectToMaster);var r=new U.Sound(this.game,e,t,i,n);return this._sounds.push(r),r},addSprite:function(e){return new U.AudioSprite(this.game,e)},remove:function(e){for(var t=this._sounds.length;t--;)if(this._sounds[t]===e)return this._sounds[t].destroy(!1),this._sounds.splice(t,1),!0;return!1},removeByKey:function(e){for(var t=this._sounds.length,i=0;t--;)this._sounds[t].key===e&&(this._sounds[t].destroy(!1),this._sounds.splice(t,1),i++);return i},play:function(e,t,i){if(!this.noAudio){var n=this.add(e,t,i);return n.play(),n}},setMute:function(){if(!this._muted){this._muted=!0,this.usingWebAudio&&(this._muteVolume=this.masterGain.gain.value,this.masterGain.gain.value=0);for(var e=0;e<this._sounds.length;e++)this._sounds[e].usingAudioTag&&(this._sounds[e].mute=!0);this.onMute.dispatch()}},unsetMute:function(){if(this._muted&&!this._codeMuted){this._muted=!1,this.usingWebAudio&&(this.masterGain.gain.value=this._muteVolume);for(var e=0;e<this._sounds.length;e++)this._sounds[e].usingAudioTag&&(this._sounds[e].mute=!1);this.onUnMute.dispatch()}},destroy:function(){this.stopAll();for(var e=0;e<this._sounds.length;e++)this._sounds[e]&&this._sounds[e].destroy();this._sounds=[],this.onSoundDecode.dispose(),this.context&&(window.PhaserGlobal?window.PhaserGlobal.audioContext=this.context:this.context.close&&this.context.close())}},U.SoundManager.prototype.constructor=U.SoundManager,Object.defineProperty(U.SoundManager.prototype,"mute",{get:function(){return this._muted},set:function(e){if(e=e||!1){if(this._muted)return;this._codeMuted=!0,this.setMute()}else{if(!this._muted)return;this._codeMuted=!1,this.unsetMute()}}}),Object.defineProperty(U.SoundManager.prototype,"volume",{get:function(){return this._volume},set:function(e){if(e<0?e=0:1<e&&(e=1),this._volume!==e){if(this._volume=e,this.usingWebAudio)this.masterGain.gain.value=e;else for(var t=0;t<this._sounds.length;t++)this._sounds[t].usingAudioTag&&this._sounds[t].updateGlobalVolume(e);this.onVolumeChange.dispatch(e)}}}),U.ScaleManager=function(e,t,i){this.game=e,this.dom=U.DOM,this.grid=null,this.width=0,this.height=0,this.minWidth=null,this.maxWidth=null,this.minHeight=null,this.maxHeight=null,this.offset=new U.Point,this.forceLandscape=!1,this.forcePortrait=!1,this.incorrectOrientation=!1,this._pageAlignHorizontally=!1,this._pageAlignVertically=!1,this.onOrientationChange=new U.Signal,this.enterIncorrectOrientation=new U.Signal,this.leaveIncorrectOrientation=new U.Signal,this.hasPhaserSetFullScreen=!1,this.fullScreenTarget=null,this._createdFullScreenTarget=null,this.onFullScreenInit=new U.Signal,this.onFullScreenChange=new U.Signal,this.onFullScreenError=new U.Signal,this.screenOrientation=this.dom.getScreenOrientation(),this.scaleFactor=new U.Point(1,1),this.scaleFactorInversed=new U.Point(1,1),this.margin={left:0,top:0,right:0,bottom:0,x:0,y:0},this.bounds=new U.Rectangle,this.aspectRatio=0,this.sourceAspectRatio=0,this.event=null,this.windowConstraints={right:"layout",bottom:""},this.compatibility={supportsFullScreen:!1,orientationFallback:null,noMargins:!1,scrollTo:null,forceMinimumDocumentHeight:!1,canExpandParent:!0,clickTrampoline:""},this._scaleMode=U.ScaleManager.NO_SCALE,this._fullScreenScaleMode=U.ScaleManager.NO_SCALE,this.parentIsWindow=!1,this.parentNode=null,this.parentScaleFactor=new U.Point(1,1),this.trackParentInterval=2e3,this.onSizeChange=new U.Signal,this.onResize=null,this.onResizeContext=null,this._pendingScaleMode=null,this._fullScreenRestore=null,this._gameSize=new U.Rectangle,this._userScaleFactor=new U.Point(1,1),this._userScaleTrim=new U.Point(0,0),this._lastUpdate=0,this._updateThrottle=0,this._updateThrottleReset=100,this._parentBounds=new U.Rectangle,this._tempBounds=new U.Rectangle,this._lastReportedCanvasSize=new U.Rectangle,this._lastReportedGameSize=new U.Rectangle,this._booted=!1,e.config&&this.parseConfig(e.config),this.setupScale(t,i)},U.ScaleManager.EXACT_FIT=0,U.ScaleManager.NO_SCALE=1,U.ScaleManager.SHOW_ALL=2,U.ScaleManager.RESIZE=3,U.ScaleManager.USER_SCALE=4,U.ScaleManager.prototype={boot:function(){var e=this.compatibility;e.supportsFullScreen=this.game.device.fullscreen&&!this.game.device.cocoonJS,this.game.device.iPad||this.game.device.webApp||this.game.device.desktop||(this.game.device.android&&!this.game.device.chrome?e.scrollTo=new U.Point(0,1):e.scrollTo=new U.Point(0,0)),this.game.device.desktop?(e.orientationFallback="screen",e.clickTrampoline="when-not-mouse"):(e.orientationFallback="",e.clickTrampoline="");var t=this;this._orientationChange=function(e){return t.orientationChange(e)},this._windowResize=function(e){return t.windowResize(e)},window.addEventListener("orientationchange",this._orientationChange,!1),window.addEventListener("resize",this._windowResize,!1),this.compatibility.supportsFullScreen&&(this._fullScreenChange=function(e){return t.fullScreenChange(e)},this._fullScreenError=function(e){return t.fullScreenError(e)},document.addEventListener("webkitfullscreenchange",this._fullScreenChange,!1),document.addEventListener("mozfullscreenchange",this._fullScreenChange,!1),document.addEventListener("MSFullscreenChange",this._fullScreenChange,!1),document.addEventListener("fullscreenchange",this._fullScreenChange,!1),document.addEventListener("webkitfullscreenerror",this._fullScreenError,!1),document.addEventListener("mozfullscreenerror",this._fullScreenError,!1),document.addEventListener("MSFullscreenError",this._fullScreenError,!1),document.addEventListener("fullscreenerror",this._fullScreenError,!1)),this.game.onResume.add(this._gameResumed,this),this.dom.getOffset(this.game.canvas,this.offset),this.bounds.setTo(this.offset.x,this.offset.y,this.width,this.height),this.setGameSize(this.game.width,this.game.height),this.screenOrientation=this.dom.getScreenOrientation(this.compatibility.orientationFallback),U.FlexGrid&&(this.grid=new U.FlexGrid(this,this.width,this.height)),this._booted=!0,null!==this._pendingScaleMode&&(this.scaleMode=this._pendingScaleMode,this._pendingScaleMode=null)},parseConfig:function(e){void 0!==e.scaleMode&&(this._booted?this.scaleMode=e.scaleMode:this._pendingScaleMode=e.scaleMode),void 0!==e.fullScreenScaleMode&&(this.fullScreenScaleMode=e.fullScreenScaleMode),e.fullScreenTarget&&(this.fullScreenTarget=e.fullScreenTarget)},setupScale:function(e,t){var i,n=new U.Rectangle;""!==this.game.parent&&("string"==typeof this.game.parent?i=document.getElementById(this.game.parent):this.game.parent&&1===this.game.parent.nodeType&&(i=this.game.parent)),i?(this.parentNode=i,this.parentIsWindow=!1,this.getParentBounds(this._parentBounds),n.width=this._parentBounds.width,n.height=this._parentBounds.height,this.offset.set(this._parentBounds.x,this._parentBounds.y)):(this.parentNode=null,this.parentIsWindow=!0,n.width=this.dom.visualBounds.width,n.height=this.dom.visualBounds.height,this.offset.set(0,0));var r=0,o=0;r="number"==typeof e?e:(this.parentScaleFactor.x=parseInt(e,10)/100,n.width*this.parentScaleFactor.x),o="number"==typeof t?t:(this.parentScaleFactor.y=parseInt(t,10)/100,n.height*this.parentScaleFactor.y),r=Math.floor(r),o=Math.floor(o),this._gameSize.setTo(0,0,r,o),this.updateDimensions(r,o,!1)},_gameResumed:function(){this.queueUpdate(!0)},setGameSize:function(e,t){this._gameSize.setTo(0,0,e,t),this.currentScaleMode!==U.ScaleManager.RESIZE&&this.updateDimensions(e,t,!0),this.queueUpdate(!0)},setUserScale:function(e,t,i,n){this._userScaleFactor.setTo(e,t),this._userScaleTrim.setTo(0|i,0|n),this.queueUpdate(!0)},setResizeCallback:function(e,t){this.onResize=e,this.onResizeContext=t},signalSizeChange:function(){if(!U.Rectangle.sameDimensions(this,this._lastReportedCanvasSize)||!U.Rectangle.sameDimensions(this.game,this._lastReportedGameSize)){var e=this.width,t=this.height;this._lastReportedCanvasSize.setTo(0,0,e,t),this._lastReportedGameSize.setTo(0,0,this.game.width,this.game.height),this.grid&&this.grid.onResize(e,t),this.onSizeChange.dispatch(this,e,t),this.currentScaleMode===U.ScaleManager.RESIZE&&(this.game.state.resize(e,t),this.game.load.resize(e,t))}},setMinMax:function(e,t,i,n){this.minWidth=e,this.minHeight=t,void 0!==i&&(this.maxWidth=i),void 0!==n&&(this.maxHeight=n)},preUpdate:function(){if(!(this.game.time.time<this._lastUpdate+this._updateThrottle)){var e=this._updateThrottle;this._updateThrottleReset=400<=e?0:100,this.dom.getOffset(this.game.canvas,this.offset);var t=this._parentBounds.width,i=this._parentBounds.height,n=this.getParentBounds(this._parentBounds),r=n.width!==t||n.height!==i,o=this.updateOrientationState();(r||o)&&(this.onResize&&this.onResize.call(this.onResizeContext,this,n),this.updateLayout(),this.signalSizeChange());var a=2*this._updateThrottle;this._updateThrottle<e&&(a=Math.min(e,this._updateThrottleReset)),this._updateThrottle=U.Math.clamp(a,25,this.trackParentInterval),this._lastUpdate=this.game.time.time}},pauseUpdate:function(){this.preUpdate(),this._updateThrottle=this.trackParentInterval},updateDimensions:function(e,t,i){this.width=e*this.parentScaleFactor.x,this.height=t*this.parentScaleFactor.y,this.game.width=this.width,this.game.height=this.height,this.sourceAspectRatio=this.width/this.height,this.updateScalingAndBounds(),i&&(this.game.renderer.resize(this.width,this.height),this.game.camera.setSize(this.width,this.height),this.game.world.resize(this.width,this.height))},updateScalingAndBounds:function(){this.scaleFactor.x=this.game.width/this.width,this.scaleFactor.y=this.game.height/this.height,this.scaleFactorInversed.x=this.width/this.game.width,this.scaleFactorInversed.y=this.height/this.game.height,this.aspectRatio=this.width/this.height,this.game.canvas&&this.dom.getOffset(this.game.canvas,this.offset),this.bounds.setTo(this.offset.x,this.offset.y,this.width,this.height),this.game.input&&this.game.input.scale&&this.game.input.scale.setTo(this.scaleFactor.x,this.scaleFactor.y)},forceOrientation:function(e,t){void 0===t&&(t=!1),this.forceLandscape=e,this.forcePortrait=t,this.queueUpdate(!0)},classifyOrientation:function(e){return"portrait-primary"===e||"portrait-secondary"===e?"portrait":"landscape-primary"===e||"landscape-secondary"===e?"landscape":null},updateOrientationState:function(){var e=this.screenOrientation,t=this.incorrectOrientation;this.screenOrientation=this.dom.getScreenOrientation(this.compatibility.orientationFallback),this.incorrectOrientation=this.forceLandscape&&!this.isLandscape||this.forcePortrait&&!this.isPortrait;var i=e!==this.screenOrientation,n=t!==this.incorrectOrientation;return n&&(this.incorrectOrientation?this.enterIncorrectOrientation.dispatch():this.leaveIncorrectOrientation.dispatch()),(i||n)&&this.onOrientationChange.dispatch(this,e,t),i||n},orientationChange:function(e){this.event=e,this.queueUpdate(!0)},windowResize:function(e){this.event=e,this.queueUpdate(!0)},scrollTop:function(){var e=this.compatibility.scrollTo;e&&window.scrollTo(e.x,e.y)},refresh:function(){this.scrollTop(),this.queueUpdate(!0)},updateLayout:function(){var e=this.currentScaleMode;if(e!==U.ScaleManager.RESIZE){if(this.scrollTop(),this.compatibility.forceMinimumDocumentHeight&&(document.documentElement.style.minHeight=window.innerHeight+"px"),this.incorrectOrientation?this.setMaximum():e===U.ScaleManager.EXACT_FIT?this.setExactFit():e===U.ScaleManager.SHOW_ALL?(!this.isFullScreen&&this.boundingParent&&this.compatibility.canExpandParent&&(this.setShowAll(!0),this.resetCanvas()),this.setShowAll()):e===U.ScaleManager.NO_SCALE?(this.width=this.game.width,this.height=this.game.height):e===U.ScaleManager.USER_SCALE&&(this.width=this.game.width*this._userScaleFactor.x-this._userScaleTrim.x,this.height=this.game.height*this._userScaleFactor.y-this._userScaleTrim.y),!this.compatibility.canExpandParent&&(e===U.ScaleManager.SHOW_ALL||e===U.ScaleManager.USER_SCALE)){var t=this.getParentBounds(this._tempBounds);this.width=Math.min(this.width,t.width),this.height=Math.min(this.height,t.height)}this.width=0|this.width,this.height=0|this.height,this.reflowCanvas()}else this.reflowGame()},getParentBounds:function(e){var t=e||new U.Rectangle,i=this.boundingParent,n=this.dom.visualBounds,r=this.dom.layoutBounds;if(i){var o=i.getBoundingClientRect(),a=i.offsetParent?i.offsetParent.getBoundingClientRect():i.getBoundingClientRect();t.setTo(o.left-a.left,o.top-a.top,o.width,o.height);var s=this.windowConstraints;if(s.right){var p="layout"===s.right?r:n;t.right=Math.min(t.right,p.width)}if(s.bottom){p="layout"===s.bottom?r:n;t.bottom=Math.min(t.bottom,p.height)}}else t.setTo(0,0,n.width,n.height);return t.setTo(Math.round(t.x),Math.round(t.y),Math.round(t.width),Math.round(t.height)),t},alignCanvas:function(e,t){var i=this.getParentBounds(this._tempBounds),n=this.game.canvas,r=this.margin;if(e){r.left=r.right=0;var o=n.getBoundingClientRect();if(this.width<i.width&&!this.incorrectOrientation){var a=o.left-i.x,s=i.width/2-this.width/2,p=(s=Math.max(s,0))-a;r.left=Math.round(p)}n.style.marginLeft=r.left+"px",0!==r.left&&(r.right=-(i.width-o.width-r.left),n.style.marginRight=r.right+"px")}if(t){r.top=r.bottom=0;o=n.getBoundingClientRect();if(this.height<i.height&&!this.incorrectOrientation){a=o.top-i.y,s=i.height/2-this.height/2,p=(s=Math.max(s,0))-a;r.top=Math.round(p)}n.style.marginTop=r.top+"px",0!==r.top&&(r.bottom=-(i.height-o.height-r.top),n.style.marginBottom=r.bottom+"px")}r.x=r.left,r.y=r.top},reflowGame:function(){this.resetCanvas("","");var e=this.getParentBounds(this._tempBounds);this.updateDimensions(e.width,e.height,!0)},reflowCanvas:function(){this.incorrectOrientation||(this.width=U.Math.clamp(this.width,this.minWidth||0,this.maxWidth||this.width),this.height=U.Math.clamp(this.height,this.minHeight||0,this.maxHeight||this.height)),this.resetCanvas(),this.compatibility.noMargins||(this.isFullScreen&&this._createdFullScreenTarget?this.alignCanvas(!0,!0):this.alignCanvas(this.pageAlignHorizontally,this.pageAlignVertically)),this.updateScalingAndBounds()},resetCanvas:function(e,t){void 0===e&&(e=this.width+"px"),void 0===t&&(t=this.height+"px");var i=this.game.canvas;this.compatibility.noMargins||(i.style.marginLeft="",i.style.marginTop="",i.style.marginRight="",i.style.marginBottom=""),i.style.width=e,i.style.height=t},queueUpdate:function(e){e&&(this._parentBounds.width=0,this._parentBounds.height=0),this._updateThrottle=this._updateThrottleReset},reset:function(e){e&&this.grid&&this.grid.reset()},setMaximum:function(){this.width=this.dom.visualBounds.width,this.height=this.dom.visualBounds.height},setShowAll:function(e){var t,i=this.getParentBounds(this._tempBounds),n=i.width,r=i.height;t=e?Math.max(r/this.game.height,n/this.game.width):Math.min(r/this.game.height,n/this.game.width),this.width=Math.round(this.game.width*t),this.height=Math.round(this.game.height*t)},setExactFit:function(){var e=this.getParentBounds(this._tempBounds);this.width=e.width,this.height=e.height,this.isFullScreen||(this.maxWidth&&(this.width=Math.min(this.width,this.maxWidth)),this.maxHeight&&(this.height=Math.min(this.height,this.maxHeight)))},createFullScreenTarget:function(){var e=document.createElement("div");return e.style.margin="0",e.style.padding="0",e.style.background="#000",e},startFullScreen:function(e,t){if(this.isFullScreen)return!1;if(this.compatibility.supportsFullScreen){if("when-not-mouse"===this.compatibility.clickTrampoline){var i=this.game.input;if(i.activePointer&&i.activePointer!==i.mousePointer&&(t||!1!==t))return void i.activePointer.addClickTrampoline("startFullScreen",this.startFullScreen,this,[e,!1])}void 0!==e&&this.game.renderType===U.CANVAS&&(this.game.stage.smoothed=e);var n=this.fullScreenTarget;n||(this.cleanupCreatedTarget(),this._createdFullScreenTarget=this.createFullScreenTarget(),n=this._createdFullScreenTarget);var r={targetElement:n};if(this.hasPhaserSetFullScreen=!0,this.onFullScreenInit.dispatch(this,r),this._createdFullScreenTarget){var o=this.game.canvas;o.parentNode.insertBefore(n,o),n.appendChild(o)}return this.game.device.fullscreenKeyboard?n[this.game.device.requestFullscreen](Element.ALLOW_KEYBOARD_INPUT):n[this.game.device.requestFullscreen](),!0}var a=this;setTimeout(function(){a.fullScreenError()},10)},stopFullScreen:function(){return!(!this.isFullScreen||!this.compatibility.supportsFullScreen)&&(this.hasPhaserSetFullScreen=!1,document[this.game.device.cancelFullscreen](),!0)},cleanupCreatedTarget:function(){var e=this._createdFullScreenTarget;if(e&&e.parentNode){var t=e.parentNode;t.insertBefore(this.game.canvas,e),t.removeChild(e)}this._createdFullScreenTarget=null},prepScreenMode:function(e){var t=!!this._createdFullScreenTarget,i=this._createdFullScreenTarget||this.fullScreenTarget;e?(t||this.fullScreenScaleMode===U.ScaleManager.EXACT_FIT)&&i!==this.game.canvas&&(this._fullScreenRestore={targetWidth:i.style.width,targetHeight:i.style.height},i.style.width="100%",i.style.height="100%"):(this._fullScreenRestore&&(i.style.width=this._fullScreenRestore.targetWidth,i.style.height=this._fullScreenRestore.targetHeight,this._fullScreenRestore=null),this.updateDimensions(this._gameSize.width,this._gameSize.height,!0),this.resetCanvas())},fullScreenChange:function(e){this.event=e,this.isFullScreen?this.prepScreenMode(!0):(this.prepScreenMode(!1),this.cleanupCreatedTarget()),this.updateLayout(),this.queueUpdate(!0),this.onFullScreenChange.dispatch(this,this.width,this.height)},fullScreenError:function(e){this.event=e,this.cleanupCreatedTarget(),this.onFullScreenError.dispatch(this)},scaleSprite:function(e,t,i,n){if(void 0===t&&(t=this.width),void 0===i&&(i=this.height),void 0===n&&(n=!1),!e||!e.scale)return e;if(e.scale.x=1,e.scale.y=1,e.width<=0||e.height<=0||t<=0||i<=0)return e;var r=t,o=e.height*t/e.width,a=e.width*i/e.height,s=i,p=t<a;return(p=p?n:!n)?(e.width=Math.floor(r),e.height=Math.floor(o)):(e.width=Math.floor(a),e.height=Math.floor(s)),e},destroy:function(){this.game.onResume.remove(this._gameResumed,this),window.removeEventListener("orientationchange",this._orientationChange,!1),window.removeEventListener("resize",this._windowResize,!1),this.compatibility.supportsFullScreen&&(document.removeEventListener("webkitfullscreenchange",this._fullScreenChange,!1),document.removeEventListener("mozfullscreenchange",this._fullScreenChange,!1),document.removeEventListener("MSFullscreenChange",this._fullScreenChange,!1),document.removeEventListener("fullscreenchange",this._fullScreenChange,!1),document.removeEventListener("webkitfullscreenerror",this._fullScreenError,!1),document.removeEventListener("mozfullscreenerror",this._fullScreenError,!1),document.removeEventListener("MSFullscreenError",this._fullScreenError,!1),document.removeEventListener("fullscreenerror",this._fullScreenError,!1))}},U.ScaleManager.prototype.constructor=U.ScaleManager,Object.defineProperty(U.ScaleManager.prototype,"boundingParent",{get:function(){return this.parentIsWindow||this.isFullScreen&&this.hasPhaserSetFullScreen&&!this._createdFullScreenTarget?null:this.game.canvas&&this.game.canvas.parentNode||null}}),Object.defineProperty(U.ScaleManager.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){return e!==this._scaleMode&&(this.isFullScreen||(this.updateDimensions(this._gameSize.width,this._gameSize.height,!0),this.queueUpdate(!0)),this._scaleMode=e),this._scaleMode}}),Object.defineProperty(U.ScaleManager.prototype,"fullScreenScaleMode",{get:function(){return this._fullScreenScaleMode},set:function(e){return e!==this._fullScreenScaleMode&&(this.isFullScreen?(this.prepScreenMode(!1),this._fullScreenScaleMode=e,this.prepScreenMode(!0),this.queueUpdate(!0)):this._fullScreenScaleMode=e),this._fullScreenScaleMode}}),Object.defineProperty(U.ScaleManager.prototype,"currentScaleMode",{get:function(){return this.isFullScreen?this._fullScreenScaleMode:this._scaleMode}}),Object.defineProperty(U.ScaleManager.prototype,"pageAlignHorizontally",{get:function(){return this._pageAlignHorizontally},set:function(e){e!==this._pageAlignHorizontally&&(this._pageAlignHorizontally=e,this.queueUpdate(!0))}}),Object.defineProperty(U.ScaleManager.prototype,"pageAlignVertically",{get:function(){return this._pageAlignVertically},set:function(e){e!==this._pageAlignVertically&&(this._pageAlignVertically=e,this.queueUpdate(!0))}}),Object.defineProperty(U.ScaleManager.prototype,"isFullScreen",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),Object.defineProperty(U.ScaleManager.prototype,"isPortrait",{get:function(){return"portrait"===this.classifyOrientation(this.screenOrientation)}}),Object.defineProperty(U.ScaleManager.prototype,"isLandscape",{get:function(){return"landscape"===this.classifyOrientation(this.screenOrientation)}}),Object.defineProperty(U.ScaleManager.prototype,"isGamePortrait",{get:function(){return this.height>this.width}}),Object.defineProperty(U.ScaleManager.prototype,"isGameLandscape",{get:function(){return this.width>this.height}}),U.Utils.Debug=function(e){this.game=e,this.sprite=null,this.bmd=null,this.canvas=null,this.context=null,this.font="14px Courier",this.columnWidth=100,this.lineHeight=16,this.renderShadow=!0,this.currentX=0,this.currentY=0,this.currentAlpha=1,this.dirty=!1},U.Utils.Debug.prototype={boot:function(){this.game.renderType===U.CANVAS?this.context=this.game.context:(this.bmd=new U.BitmapData(this.game,"__DEBUG",this.game.width,this.game.height,!0),this.sprite=this.game.make.image(0,0,this.bmd),this.game.stage.addChild(this.sprite),this.game.scale.onSizeChange.add(this.resize,this),this.canvas=PIXI.CanvasPool.create(this,this.game.width,this.game.height),this.context=this.canvas.getContext("2d"))},resize:function(e,t,i){this.bmd.resize(t,i),this.canvas.width=t,this.canvas.height=i},preUpdate:function(){this.dirty&&this.sprite&&(this.bmd.clear(),this.bmd.draw(this.canvas,0,0),this.context.clearRect(0,0,this.game.width,this.game.height),this.dirty=!1)},reset:function(){this.context&&this.context.clearRect(0,0,this.game.width,this.game.height),this.sprite&&this.bmd.clear()},start:function(e,t,i,n){"number"!=typeof e&&(e=0),"number"!=typeof t&&(t=0),i=i||"rgb(255,255,255)",void 0===n&&(n=0),this.currentX=e,this.currentY=t,this.currentColor=i,this.columnWidth=n,this.dirty=!0,this.context.save(),this.context.setTransform(1,0,0,1,0,0),this.context.strokeStyle=i,this.context.fillStyle=i,this.context.font=this.font,this.context.globalAlpha=this.currentAlpha},stop:function(){this.context.restore()},line:function(){for(var e=this.currentX,t=0;t<arguments.length;t++)this.renderShadow&&(this.context.fillStyle="rgb(0,0,0)",this.context.fillText(arguments[t],e+1,this.currentY+1),this.context.fillStyle=this.currentColor),this.context.fillText(arguments[t],e,this.currentY),e+=this.columnWidth;this.currentY+=this.lineHeight},soundInfo:function(e,t,i,n){this.start(t,i,n),this.line("Sound: "+e.key+" Locked: "+e.game.sound.touchLocked),this.line("Is Ready?: "+this.game.cache.isSoundReady(e.key)+" Pending Playback: "+e.pendingPlayback),this.line("Decoded: "+e.isDecoded+" Decoding: "+e.isDecoding),this.line("Total Duration: "+e.totalDuration+" Playing: "+e.isPlaying),this.line("Time: "+e.currentTime),this.line("Volume: "+e.volume+" Muted: "+e.mute),this.line("WebAudio: "+e.usingWebAudio+" Audio: "+e.usingAudioTag),""!==e.currentMarker&&(this.line("Marker: "+e.currentMarker+" Duration: "+e.duration+" (ms: "+e.durationMS+")"),this.line("Start: "+e.markers[e.currentMarker].start+" Stop: "+e.markers[e.currentMarker].stop),this.line("Position: "+e.position)),this.stop()},cameraInfo:function(e,t,i,n){this.start(t,i,n),this.line("Camera ("+e.width+" x "+e.height+")"),this.line("X: "+e.x+" Y: "+e.y),e.bounds&&this.line("Bounds x: "+e.bounds.x+" Y: "+e.bounds.y+" w: "+e.bounds.width+" h: "+e.bounds.height),this.line("View x: "+e.view.x+" Y: "+e.view.y+" w: "+e.view.width+" h: "+e.view.height),this.line("Total in view: "+e.totalInView),this.stop()},timer:function(e,t,i,n){this.start(t,i,n),this.line("Timer (running: "+e.running+" expired: "+e.expired+")"),this.line("Next Tick: "+e.next+" Duration: "+e.duration),this.line("Paused: "+e.paused+" Length: "+e.length),this.stop()},pointer:function(e,t,i,n,r){null!=e&&(void 0===t&&(t=!1),i=i||"rgba(0,255,0,0.5)",n=n||"rgba(255,0,0,0.5)",!0===t&&!0===e.isUp||(this.start(e.x,e.y-100,r),this.context.beginPath(),this.context.arc(e.x,e.y,e.circle.radius,0,2*Math.PI),e.active?this.context.fillStyle=i:this.context.fillStyle=n,this.context.fill(),this.context.closePath(),this.context.beginPath(),this.context.moveTo(e.positionDown.x,e.positionDown.y),this.context.lineTo(e.position.x,e.position.y),this.context.lineWidth=2,this.context.stroke(),this.context.closePath(),this.line("ID: "+e.id+" Active: "+e.active),this.line("World X: "+e.worldX+" World Y: "+e.worldY),this.line("Screen X: "+e.x+" Screen Y: "+e.y+" In: "+e.withinGame),this.line("Duration: "+e.duration+" ms"),this.line("is Down: "+e.isDown+" is Up: "+e.isUp),this.stop()))},spriteInputInfo:function(e,t,i,n){this.start(t,i,n),this.line("Sprite Input: ("+e.width+" x "+e.height+")"),this.line("x: "+e.input.pointerX().toFixed(1)+" y: "+e.input.pointerY().toFixed(1)),this.line("over: "+e.input.pointerOver()+" duration: "+e.input.overDuration().toFixed(0)),this.line("down: "+e.input.pointerDown()+" duration: "+e.input.downDuration().toFixed(0)),this.line("just over: "+e.input.justOver()+" just out: "+e.input.justOut()),this.stop()},key:function(e,t,i,n){this.start(t,i,n,150),this.line("Key:",e.keyCode,"isDown:",e.isDown),this.line("justDown:",e.justDown,"justUp:",e.justUp),this.line("Time Down:",e.timeDown.toFixed(0),"duration:",e.duration.toFixed(0)),this.stop()},inputInfo:function(e,t,i){this.start(e,t,i),this.line("Input"),this.line("X: "+this.game.input.x+" Y: "+this.game.input.y),this.line("World X: "+this.game.input.worldX+" World Y: "+this.game.input.worldY),this.line("Scale X: "+this.game.input.scale.x.toFixed(1)+" Scale Y: "+this.game.input.scale.x.toFixed(1)),this.line("Screen X: "+this.game.input.activePointer.screenX+" Screen Y: "+this.game.input.activePointer.screenY),this.stop()},spriteBounds:function(e,t,i){var n=e.getBounds();n.x+=this.game.camera.x,n.y+=this.game.camera.y,this.rectangle(n,t,i)},ropeSegments:function(e,t,i){var n=e.segments,r=this;n.forEach(function(e){r.rectangle(e,t,i)},this)},spriteInfo:function(e,t,i,n){this.start(t,i,n),this.line("Sprite:  ("+e.width+" x "+e.height+") anchor: "+e.anchor.x+" x "+e.anchor.y),this.line("x: "+e.x.toFixed(1)+" y: "+e.y.toFixed(1)),this.line("angle: "+e.angle.toFixed(1)+" rotation: "+e.rotation.toFixed(1)),this.line("visible: "+e.visible+" in camera: "+e.inCamera),this.line("bounds x: "+e._bounds.x.toFixed(1)+" y: "+e._bounds.y.toFixed(1)+" w: "+e._bounds.width.toFixed(1)+" h: "+e._bounds.height.toFixed(1)),this.stop()},spriteCoords:function(e,t,i,n){this.start(t,i,n,100),e.name&&this.line(e.name),this.line("x:",e.x.toFixed(2),"y:",e.y.toFixed(2)),this.line("pos x:",e.position.x.toFixed(2),"pos y:",e.position.y.toFixed(2)),this.line("world x:",e.world.x.toFixed(2),"world y:",e.world.y.toFixed(2)),this.stop()},lineInfo:function(e,t,i,n){this.start(t,i,n,80),this.line("start.x:",e.start.x.toFixed(2),"start.y:",e.start.y.toFixed(2)),this.line("end.x:",e.end.x.toFixed(2),"end.y:",e.end.y.toFixed(2)),this.line("length:",e.length.toFixed(2),"angle:",e.angle),this.stop()},pixel:function(e,t,i,n){n=n||2,this.start(),this.context.fillStyle=i,this.context.fillRect(e,t,n,n),this.stop()},geom:function(e,t,i,n){void 0===i&&(i=!0),void 0===n&&(n=0),t=t||"rgba(0,255,0,0.4)",this.start(),this.context.fillStyle=t,this.context.strokeStyle=t,e instanceof U.Rectangle||1===n?i?this.context.fillRect(e.x-this.game.camera.x,e.y-this.game.camera.y,e.width,e.height):this.context.strokeRect(e.x-this.game.camera.x,e.y-this.game.camera.y,e.width,e.height):e instanceof U.Circle||2===n?(this.context.beginPath(),this.context.arc(e.x-this.game.camera.x,e.y-this.game.camera.y,e.radius,0,2*Math.PI,!1),this.context.closePath(),i?this.context.fill():this.context.stroke()):e instanceof U.Point||3===n?this.context.fillRect(e.x-this.game.camera.x,e.y-this.game.camera.y,4,4):(e instanceof U.Line||4===n)&&(this.context.lineWidth=1,this.context.beginPath(),this.context.moveTo(e.start.x+.5-this.game.camera.x,e.start.y+.5-this.game.camera.y),this.context.lineTo(e.end.x+.5-this.game.camera.x,e.end.y+.5-this.game.camera.y),this.context.closePath(),this.context.stroke()),this.stop()},rectangle:function(e,t,i){void 0===i&&(i=!0),t=t||"rgba(0, 255, 0, 0.4)",this.start(),i?(this.context.fillStyle=t,this.context.fillRect(e.x-this.game.camera.x,e.y-this.game.camera.y,e.width,e.height)):(this.context.strokeStyle=t,this.context.strokeRect(e.x-this.game.camera.x,e.y-this.game.camera.y,e.width,e.height)),this.stop()},text:function(e,t,i,n,r){n=n||"rgb(255,255,255)",r=r||"16px Courier",this.start(),this.context.font=r,this.renderShadow&&(this.context.fillStyle="rgb(0,0,0)",this.context.fillText(e,t+1,i+1)),this.context.fillStyle=n,this.context.fillText(e,t,i),this.stop()},quadTree:function(e,t){t=t||"rgba(255,0,0,0.3)",this.start();var i=e.bounds;if(0===e.nodes.length){this.context.strokeStyle=t,this.context.strokeRect(i.x,i.y,i.width,i.height),this.text("size: "+e.objects.length,i.x+4,i.y+16,"rgb(0,200,0)","12px Courier"),this.context.strokeStyle="rgb(0,255,0)";for(var n=0;n<e.objects.length;n++)this.context.strokeRect(e.objects[n].x,e.objects[n].y,e.objects[n].width,e.objects[n].height)}else for(n=0;n<e.nodes.length;n++)this.quadTree(e.nodes[n]);this.stop()},body:function(e,t,i){e.body&&(this.start(),e.body.type===U.Physics.ARCADE?U.Physics.Arcade.Body.render(this.context,e.body,t,i):e.body.type===U.Physics.NINJA?U.Physics.Ninja.Body.render(this.context,e.body,t,i):e.body.type===U.Physics.BOX2D&&U.Physics.Box2D.renderBody(this.context,e.body,t),this.stop())},bodyInfo:function(e,t,i,n){e.body&&(this.start(t,i,n,210),e.body.type===U.Physics.ARCADE?U.Physics.Arcade.Body.renderBodyInfo(this,e.body):e.body.type===U.Physics.BOX2D&&this.game.physics.box2d.renderBodyInfo(this,e.body),this.stop())},box2dWorld:function(){this.start(),this.context.translate(-this.game.camera.view.x,-this.game.camera.view.y,0),this.game.physics.box2d.renderDebugDraw(this.context),this.stop()},box2dBody:function(e,t){this.start(),U.Physics.Box2D.renderBody(this.context,e,t),this.stop()},displayList:function(e){if(void 0===e&&(e=this.game.world),e.hasOwnProperty("renderOrderID"),e.children&&0<e.children.length)for(var t=0;t<e.children.length;t++)this.game.debug.displayList(e.children[t])},destroy:function(){PIXI.CanvasPool.remove(this)}},U.Utils.Debug.prototype.constructor=U.Utils.Debug,U.DOM={getOffset:function(e,t){t=t||new U.Point;var i=e.getBoundingClientRect(),n=U.DOM.scrollY,r=U.DOM.scrollX,o=document.documentElement.clientTop,a=document.documentElement.clientLeft;return t.x=i.left+r-a,t.y=i.top+n-o,t},getBounds:function(e,t){return void 0===t&&(t=0),!(!(e=e&&!e.nodeType?e[0]:e)||1!==e.nodeType)&&this.calibrate(e.getBoundingClientRect(),t)},calibrate:function(e,t){t=+t||0;var i={width:0,height:0,left:0,right:0,top:0,bottom:0};return i.width=(i.right=e.right+t)-(i.left=e.left-t),i.height=(i.bottom=e.bottom+t)-(i.top=e.top-t),i},getAspectRatio:function(e){var t=(e=null==e?this.visualBounds:1===e.nodeType?this.getBounds(e):e).width,i=e.height;return"function"==typeof t&&(t=t.call(e)),"function"==typeof i&&(i=i.call(e)),t/i},inLayoutViewport:function(e,t){var i=this.getBounds(e,t);return!!i&&0<=i.bottom&&0<=i.right&&i.top<=this.layoutBounds.width&&i.left<=this.layoutBounds.height},getScreenOrientation:function(e){var t=window.screen,i=t.orientation||t.mozOrientation||t.msOrientation;if(i&&"string"==typeof i.type)return i.type;if("string"==typeof i)return i;var n="portrait-primary",r="landscape-primary";if("screen"===e)return t.height>t.width?n:r;if("viewport"===e)return this.visualBounds.height>this.visualBounds.width?n:r;if("window.orientation"===e&&"number"==typeof window.orientation)return 0===window.orientation||180===window.orientation?n:r;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return n;if(window.matchMedia("(orientation: landscape)").matches)return r}return this.visualBounds.height>this.visualBounds.width?n:r},visualBounds:new U.Rectangle,layoutBounds:new U.Rectangle,documentBounds:new U.Rectangle},U.Device.whenReady(function(e){var t=window&&"pageXOffset"in window?function(){return window.pageXOffset}:function(){return document.documentElement.scrollLeft},i=window&&"pageYOffset"in window?function(){return window.pageYOffset}:function(){return document.documentElement.scrollTop};if(Object.defineProperty(U.DOM,"scrollX",{get:t}),Object.defineProperty(U.DOM,"scrollY",{get:i}),Object.defineProperty(U.DOM.visualBounds,"x",{get:t}),Object.defineProperty(U.DOM.visualBounds,"y",{get:i}),Object.defineProperty(U.DOM.layoutBounds,"x",{value:0}),Object.defineProperty(U.DOM.layoutBounds,"y",{value:0}),e.desktop&&document.documentElement.clientWidth<=window.innerWidth&&document.documentElement.clientHeight<=window.innerHeight){var n=function(){return Math.max(window.innerWidth,document.documentElement.clientWidth)},r=function(){return Math.max(window.innerHeight,document.documentElement.clientHeight)};Object.defineProperty(U.DOM.visualBounds,"width",{get:n}),Object.defineProperty(U.DOM.visualBounds,"height",{get:r}),Object.defineProperty(U.DOM.layoutBounds,"width",{get:n}),Object.defineProperty(U.DOM.layoutBounds,"height",{get:r})}else Object.defineProperty(U.DOM.visualBounds,"width",{get:function(){return window.innerWidth}}),Object.defineProperty(U.DOM.visualBounds,"height",{get:function(){return window.innerHeight}}),Object.defineProperty(U.DOM.layoutBounds,"width",{get:function(){var e=document.documentElement.clientWidth,t=window.innerWidth;return e<t?t:e}}),Object.defineProperty(U.DOM.layoutBounds,"height",{get:function(){var e=document.documentElement.clientHeight,t=window.innerHeight;return e<t?t:e}});Object.defineProperty(U.DOM.documentBounds,"x",{value:0}),Object.defineProperty(U.DOM.documentBounds,"y",{value:0}),Object.defineProperty(U.DOM.documentBounds,"width",{get:function(){var e=document.documentElement;return Math.max(e.clientWidth,e.offsetWidth,e.scrollWidth)}}),Object.defineProperty(U.DOM.documentBounds,"height",{get:function(){var e=document.documentElement;return Math.max(e.clientHeight,e.offsetHeight,e.scrollHeight)}})},null,!0),U.ArraySet=function(e){this.position=0,this.list=e||[]},U.ArraySet.prototype={add:function(e){return this.exists(e)||this.list.push(e),e},getIndex:function(e){return this.list.indexOf(e)},getByKey:function(e,t){for(var i=this.list.length;i--;)if(this.list[i][e]===t)return this.list[i];return null},exists:function(e){return-1<this.list.indexOf(e)},reset:function(){this.list.length=0},remove:function(e){var t=this.list.indexOf(e);if(-1<t)return this.list.splice(t,1),e},setAll:function(e,t){for(var i=this.list.length;i--;)this.list[i]&&(this.list[i][e]=t)},callAll:function(e){for(var t=Array.prototype.slice.call(arguments,1),i=this.list.length;i--;)this.list[i]&&this.list[i][e]&&this.list[i][e].apply(this.list[i],t)},removeAll:function(e){void 0===e&&(e=!1);for(var t=this.list.length;t--;)if(this.list[t]){var i=this.remove(this.list[t]);e&&i.destroy()}this.position=0,this.list=[]}},Object.defineProperty(U.ArraySet.prototype,"total",{get:function(){return this.list.length}}),Object.defineProperty(U.ArraySet.prototype,"first",{get:function(){return(this.position=0)<this.list.length?this.list[0]:null}}),Object.defineProperty(U.ArraySet.prototype,"next",{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}}),U.ArraySet.prototype.constructor=U.ArraySet,U.ArrayUtils={getRandomItem:function(e,t,i){if(null===e)return null;void 0===t&&(t=0),void 0===i&&(i=e.length);var n=t+Math.floor(Math.random()*i);return void 0===e[n]?null:e[n]},removeRandomItem:function(e,t,i){if(null==e)return null;void 0===t&&(t=0),void 0===i&&(i=e.length);var n=t+Math.floor(Math.random()*i);if(n<e.length){var r=e.splice(n,1);return void 0===r[0]?null:r[0]}return null},shuffle:function(e){for(var t=e.length-1;0<t;t--){var i=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[i],e[i]=n}return e},transposeMatrix:function(e){for(var t=e.length,i=e[0].length,n=new Array(i),r=0;r<i;r++){n[r]=new Array(t);for(var o=t-1;-1<o;o--)n[r][o]=e[o][r]}return n},rotateMatrix:function(e,t){if("string"!=typeof t&&(t=(t%360+360)%360),90===t||-270===t||"rotateLeft"===t)e=(e=U.ArrayUtils.transposeMatrix(e)).reverse();else if(-90===t||270===t||"rotateRight"===t)e=e.reverse(),e=U.ArrayUtils.transposeMatrix(e);else if(180===Math.abs(t)||"rotate180"===t){for(var i=0;i<e.length;i++)e[i].reverse();e=e.reverse()}return e},findClosest:function(e,t){if(!t.length)return NaN;if(1===t.length||e<t[0])return t[0];for(var i=1;t[i]<e;)i++;var n=t[i-1],r=i<t.length?t[i]:Number.POSITIVE_INFINITY;return r-e<=e-n?r:n},rotateRight:function(e){var t=e.pop();return e.unshift(t),t},rotateLeft:function(e){var t=e.shift();return e.push(t),t},rotate:function(e){var t=e.shift();return e.push(t),t},numberArray:function(e,t){for(var i=[],n=e;n<=t;n++)i.push(n);return i},numberArrayStep:function(e,t,i){null==e&&(e=0),null==t&&(t=e,e=0),void 0===i&&(i=1);for(var n=[],r=Math.max(U.Math.roundAwayFromZero((t-e)/(i||1)),0),o=0;o<r;o++)n.push(e),e+=i;return n}},U.LinkedList=function(){this.next=null,this.prev=null,this.first=null,this.last=null,this.total=0},U.LinkedList.prototype={add:function(e){return 0===this.total&&null===this.first&&null===this.last?(this.first=e,this.last=e,((this.next=e).prev=this).total++):((this.last.next=e).prev=this.last,this.last=e,this.total++),e},reset:function(){this.first=null,this.last=null,this.next=null,this.prev=null,this.total=0},remove:function(e){if(1===this.total)return this.reset(),void(e.next=e.prev=null);e===this.first?this.first=this.first.next:e===this.last&&(this.last=this.last.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.next=e.prev=null,null===this.first&&(this.last=null),this.total--},callAll:function(e){if(this.first&&this.last)for(var t=this.first;t&&t[e]&&t[e].call(t),(t=t.next)!==this.last.next;);}},U.LinkedList.prototype.constructor=U.LinkedList,U.Create=function(e){this.game=e,this.bmd=null,this.canvas=null,this.ctx=null,this.palettes=[{0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"},{0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"},{0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"},{0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"},{0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}]},U.Create.PALETTE_ARNE=0,U.Create.PALETTE_JMP=1,U.Create.PALETTE_CGA=2,U.Create.PALETTE_C64=3,U.Create.PALETTE_JAPANESE_MACHINE=4,U.Create.prototype={texture:function(e,t,i,n,r){void 0===i&&(i=8),void 0===n&&(n=i),void 0===r&&(r=0);var o=t[0].length*i,a=t.length*n;null===this.bmd&&(this.bmd=this.game.make.bitmapData(),this.canvas=this.bmd.canvas,this.ctx=this.bmd.context),this.bmd.resize(o,a),this.bmd.clear();for(var s=0;s<t.length;s++)for(var p=t[s],l=0;l<p.length;l++){var h=p[l];"."!==h&&" "!==h&&(this.ctx.fillStyle=this.palettes[r][h],this.ctx.fillRect(l*i,s*n,i,n))}return this.bmd.generateTexture(e)},grid:function(e,t,i,n,r,o){null===this.bmd&&(this.bmd=this.game.make.bitmapData(),this.canvas=this.bmd.canvas,this.ctx=this.bmd.context),this.bmd.resize(t,i),this.ctx.fillStyle=o;for(var a=0;a<i;a+=r)this.ctx.fillRect(0,a,t,1);for(var s=0;s<t;s+=n)this.ctx.fillRect(s,0,1,i);return this.bmd.generateTexture(e)}},U.Create.prototype.constructor=U.Create,U.FlexGrid=function(e,t,i){this.game=e.game,this.manager=e,this.width=t,this.height=i,this.boundsCustom=new U.Rectangle(0,0,t,i),this.boundsFluid=new U.Rectangle(0,0,t,i),this.boundsFull=new U.Rectangle(0,0,t,i),this.boundsNone=new U.Rectangle(0,0,t,i),this.positionCustom=new U.Point(0,0),this.positionFluid=new U.Point(0,0),this.positionFull=new U.Point(0,0),this.positionNone=new U.Point(0,0),this.scaleCustom=new U.Point(1,1),this.scaleFluid=new U.Point(1,1),this.scaleFluidInversed=new U.Point(1,1),this.scaleFull=new U.Point(1,1),this.scaleNone=new U.Point(1,1),this.customWidth=0,this.customHeight=0,this.customOffsetX=0,this.customOffsetY=0,this.ratioH=t/i,this.ratioV=i/t,this.multiplier=0,this.layers=[]},U.FlexGrid.prototype={setSize:function(e,t){this.width=e,this.height=t,this.ratioH=e/t,this.ratioV=t/e,this.scaleNone=new U.Point(1,1),this.boundsNone.width=this.width,this.boundsNone.height=this.height,this.refresh()},createCustomLayer:function(e,t,i,n){void 0===n&&(n=!0),this.customWidth=e,this.customHeight=t,this.boundsCustom.width=e,this.boundsCustom.height=t;var r=new U.FlexLayer(this,this.positionCustom,this.boundsCustom,this.scaleCustom);return n&&this.game.world.add(r),this.layers.push(r),void 0!==i&&null!==typeof i&&r.addMultiple(i),r},createFluidLayer:function(e,t){void 0===t&&(t=!0);var i=new U.FlexLayer(this,this.positionFluid,this.boundsFluid,this.scaleFluid);return t&&this.game.world.add(i),this.layers.push(i),void 0!==e&&null!==typeof e&&i.addMultiple(e),i},createFullLayer:function(e){var t=new U.FlexLayer(this,this.positionFull,this.boundsFull,this.scaleFluid);return this.game.world.add(t),this.layers.push(t),void 0!==e&&t.addMultiple(e),t},createFixedLayer:function(e){var t=new U.FlexLayer(this,this.positionNone,this.boundsNone,this.scaleNone);return this.game.world.add(t),this.layers.push(t),void 0!==e&&t.addMultiple(e),t},reset:function(){for(var e=this.layers.length;e--;)this.layers[e].persist||(this.layers[e].position=null,this.layers[e].scale=null,this.layers.slice(e,1))},onResize:function(e,t){this.ratioH=e/t,this.ratioV=t/e,this.refresh(e,t)},refresh:function(){this.multiplier=Math.min(this.manager.height/this.height,this.manager.width/this.width),this.boundsFluid.width=Math.round(this.width*this.multiplier),this.boundsFluid.height=Math.round(this.height*this.multiplier),this.scaleFluid.set(this.boundsFluid.width/this.width,this.boundsFluid.height/this.height),this.scaleFluidInversed.set(this.width/this.boundsFluid.width,this.height/this.boundsFluid.height),this.scaleFull.set(this.boundsFull.width/this.width,this.boundsFull.height/this.height),this.boundsFull.width=Math.round(this.manager.width*this.scaleFluidInversed.x),this.boundsFull.height=Math.round(this.manager.height*this.scaleFluidInversed.y),this.boundsFluid.centerOn(this.manager.bounds.centerX,this.manager.bounds.centerY),this.boundsNone.centerOn(this.manager.bounds.centerX,this.manager.bounds.centerY),this.positionFluid.set(this.boundsFluid.x,this.boundsFluid.y),this.positionNone.set(this.boundsNone.x,this.boundsNone.y)},fitSprite:function(e){this.manager.scaleSprite(e),e.x=this.manager.bounds.centerX,e.y=this.manager.bounds.centerY},debug:function(){this.game.debug.text(this.boundsFluid.width+" x "+this.boundsFluid.height,this.boundsFluid.x+4,this.boundsFluid.y+16),this.game.debug.geom(this.boundsFluid,"rgba(255,0,0,0.9",!1)}},U.FlexGrid.prototype.constructor=U.FlexGrid,U.FlexLayer=function(e,t,i,n){U.Group.call(this,e.game,null,"__flexLayer"+e.game.rnd.uuid(),!1),this.manager=e.manager,this.grid=e,this.persist=!1,this.position=t,this.bounds=i,this.scale=n,this.topLeft=i.topLeft,this.topMiddle=new U.Point(i.halfWidth,0),this.topRight=i.topRight,this.bottomLeft=i.bottomLeft,this.bottomMiddle=new U.Point(i.halfWidth,i.bottom),this.bottomRight=i.bottomRight},U.FlexLayer.prototype=Object.create(U.Group.prototype),U.FlexLayer.prototype.constructor=U.FlexLayer,U.FlexLayer.prototype.resize=function(){},U.FlexLayer.prototype.debug=function(){this.game.debug.text(this.bounds.width+" x "+this.bounds.height,this.bounds.x+4,this.bounds.y+16),this.game.debug.geom(this.bounds,"rgba(0,0,255,0.9",!1),this.game.debug.geom(this.topLeft,"rgba(255,255,255,0.9"),this.game.debug.geom(this.topMiddle,"rgba(255,255,255,0.9"),this.game.debug.geom(this.topRight,"rgba(255,255,255,0.9")},U.Color={packPixel:function(e,t,i,n){return U.Device.LITTLE_ENDIAN?(n<<24|i<<16|t<<8|e)>>>0:(e<<24|t<<16|i<<8|n)>>>0},unpackPixel:function(e,t,i,n){return null==t&&(t=U.Color.createColor()),null==i&&(i=!1),null==n&&(n=!1),U.Device.LITTLE_ENDIAN?(t.a=(4278190080&e)>>>24,t.b=(16711680&e)>>>16,t.g=(65280&e)>>>8,t.r=255&e):(t.r=(4278190080&e)>>>24,t.g=(16711680&e)>>>16,t.b=(65280&e)>>>8,t.a=255&e),t.color=e,t.rgba="rgba("+t.r+","+t.g+","+t.b+","+t.a/255+")",i&&U.Color.RGBtoHSL(t.r,t.g,t.b,t),n&&U.Color.RGBtoHSV(t.r,t.g,t.b,t),t},fromRGBA:function(e,t){return t||(t=U.Color.createColor()),t.r=(4278190080&e)>>>24,t.g=(16711680&e)>>>16,t.b=(65280&e)>>>8,t.a=255&e,t.rgba="rgba("+t.r+","+t.g+","+t.b+","+t.a+")",t},toRGBA:function(e,t,i,n){return e<<24|t<<16|i<<8|n},toABGR:function(e,t,i,n){return(n<<24|i<<16|t<<8|e)>>>0},RGBtoHSL:function(e,t,i,n){n||(n=U.Color.createColor(e,t,i,1)),e/=255,t/=255,i/=255;var r=Math.min(e,t,i),o=Math.max(e,t,i);if(n.h=0,n.s=0,n.l=(o+r)/2,o!==r){var a=o-r;n.s=.5<n.l?a/(2-o-r):a/(o+r),o===e?n.h=(t-i)/a+(t<i?6:0):o===t?n.h=(i-e)/a+2:o===i&&(n.h=(e-t)/a+4),n.h/=6}return n},HSLtoRGB:function(e,t,i,n){if(n?(n.r=i,n.g=i,n.b=i):n=U.Color.createColor(i,i,i),0!==t){var r=i<.5?i*(1+t):i+t-i*t,o=2*i-r;n.r=U.Color.hueToColor(o,r,e+1/3),n.g=U.Color.hueToColor(o,r,e),n.b=U.Color.hueToColor(o,r,e-1/3)}return n.r=Math.floor(255*n.r|0),n.g=Math.floor(255*n.g|0),n.b=Math.floor(255*n.b|0),U.Color.updateColor(n),n},RGBtoHSV:function(e,t,i,n){n||(n=U.Color.createColor(e,t,i,255)),e/=255,t/=255,i/=255;var r=Math.min(e,t,i),o=Math.max(e,t,i),a=o-r;return n.h=0,n.s=0===o?0:a/o,(n.v=o)!==r&&(o===e?n.h=(t-i)/a+(t<i?6:0):o===t?n.h=(i-e)/a+2:o===i&&(n.h=(e-t)/a+4),n.h/=6),n},HSVtoRGB:function(e,t,i,n){var r,o,a;void 0===n&&(n=U.Color.createColor(0,0,0,1,e,t,0,i));var s=Math.floor(6*e),p=6*e-s,l=i*(1-t),h=i*(1-p*t),u=i*(1-(1-p)*t);switch(s%6){case 0:r=i,o=u,a=l;break;case 1:r=h,o=i,a=l;break;case 2:r=l,o=i,a=u;break;case 3:r=l,o=h,a=i;break;case 4:r=u,o=l,a=i;break;case 5:r=i,o=l,a=h}return n.r=Math.floor(255*r),n.g=Math.floor(255*o),n.b=Math.floor(255*a),U.Color.updateColor(n),n},hueToColor:function(e,t,i){return i<0&&(i+=1),1<i&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e},createColor:function(e,t,i,n,r,o,a,s){var p={r:e||0,g:t||0,b:i||0,a:n||1,h:r||0,s:o||0,l:a||0,v:s||0,color:0,color32:0,rgba:""};return U.Color.updateColor(p)},updateColor:function(e){return e.rgba="rgba("+e.r.toString()+","+e.g.toString()+","+e.b.toString()+","+e.a.toString()+")",e.color=U.Color.getColor(e.r,e.g,e.b),e.color32=U.Color.getColor32(255*e.a,e.r,e.g,e.b),e},getColor32:function(e,t,i,n){return e<<24|t<<16|i<<8|n},getColor:function(e,t,i){return e<<16|t<<8|i},RGBtoString:function(e,t,i,n,r){return void 0===n&&(n=255),void 0===r&&(r="#"),"#"===r?"#"+((1<<24)+(e<<16)+(t<<8)+i).toString(16).slice(1):"0x"+U.Color.componentToHex(n)+U.Color.componentToHex(e)+U.Color.componentToHex(t)+U.Color.componentToHex(i)},hexToRGB:function(e){var t=U.Color.hexToColor(e);if(t)return U.Color.getColor32(t.a,t.r,t.g,t.b)},hexToColor:function(e,t){e=e.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,i,n){return t+t+i+i+n+n});var i=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(i){var n=parseInt(i[1],16),r=parseInt(i[2],16),o=parseInt(i[3],16);t?(t.r=n,t.g=r,t.b=o):t=U.Color.createColor(n,r,o)}return t},webToColor:function(e,t){t||(t=U.Color.createColor());var i=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(e);return i&&(t.r=parseInt(i[1],10),t.g=parseInt(i[2],10),t.b=parseInt(i[3],10),t.a=void 0!==i[4]?parseFloat(i[4]):1,U.Color.updateColor(t)),t},valueToColor:function(e,t){if(t||(t=U.Color.createColor()),"string"==typeof e)return 0===e.indexOf("rgb")?U.Color.webToColor(e,t):(t.a=1,U.Color.hexToColor(e,t));if("number"!=typeof e)return t;var i=U.Color.getRGB(e);return t.r=i.r,t.g=i.g,t.b=i.b,t.a=i.a/255,t},componentToHex:function(e){var t=e.toString(16);return 1===t.length?"0"+t:t},HSVColorWheel:function(e,t){void 0===e&&(e=1),void 0===t&&(t=1);for(var i=[],n=0;n<=359;n++)i.push(U.Color.HSVtoRGB(n/359,e,t));return i},HSLColorWheel:function(e,t){void 0===e&&(e=.5),void 0===t&&(t=.5);for(var i=[],n=0;n<=359;n++)i.push(U.Color.HSLtoRGB(n/359,e,t));return i},interpolateColor:function(e,t,i,n,r){void 0===r&&(r=255);var o=U.Color.getRGB(e),a=U.Color.getRGB(t),s=(a.red-o.red)*n/i+o.red,p=(a.green-o.green)*n/i+o.green,l=(a.blue-o.blue)*n/i+o.blue;return U.Color.getColor32(r,s,p,l)},interpolateColorWithRGB:function(e,t,i,n,r,o){var a=U.Color.getRGB(e),s=(t-a.red)*o/r+a.red,p=(i-a.green)*o/r+a.green,l=(n-a.blue)*o/r+a.blue;return U.Color.getColor(s,p,l)},interpolateRGB:function(e,t,i,n,r,o,a,s){var p=(n-e)*s/a+e,l=(r-t)*s/a+t,h=(o-i)*s/a+i;return U.Color.getColor(p,l,h)},getRandomColor:function(e,t,i){if(void 0===e&&(e=0),void 0===t&&(t=255),void 0===i&&(i=255),255<t||t<e)return U.Color.getColor(255,255,255);var n=e+Math.round(Math.random()*(t-e)),r=e+Math.round(Math.random()*(t-e)),o=e+Math.round(Math.random()*(t-e));return U.Color.getColor32(i,n,r,o)},getRGB:function(e){return 16777215<e?{alpha:e>>>24,red:e>>16&255,green:e>>8&255,blue:255&e,a:e>>>24,r:e>>16&255,g:e>>8&255,b:255&e}:{alpha:255,red:e>>16&255,green:e>>8&255,blue:255&e,a:255,r:e>>16&255,g:e>>8&255,b:255&e}},getWebRGB:function(e){if("object"==typeof e)return"rgba("+e.r.toString()+","+e.g.toString()+","+e.b.toString()+","+(e.a/255).toString()+")";var t=U.Color.getRGB(e);return"rgba("+t.r.toString()+","+t.g.toString()+","+t.b.toString()+","+(t.a/255).toString()+")"},getAlpha:function(e){return e>>>24},getAlphaFloat:function(e){return(e>>>24)/255},getRed:function(e){return e>>16&255},getGreen:function(e){return e>>8&255},getBlue:function(e){return 255&e},blendNormal:function(e){return e},blendLighten:function(e,t){return e<t?t:e},blendDarken:function(e,t){return e<t?e:t},blendMultiply:function(e,t){return e*t/255},blendAverage:function(e,t){return(e+t)/2},blendAdd:function(e,t){return Math.min(255,e+t)},blendSubtract:function(e,t){return Math.max(0,e+t-255)},blendDifference:function(e,t){return Math.abs(e-t)},blendNegation:function(e,t){return 255-Math.abs(255-e-t)},blendScreen:function(e,t){return 255-((255-e)*(255-t)>>8)},blendExclusion:function(e,t){return e+t-2*e*t/255},blendOverlay:function(e,t){return t<128?2*e*t/255:255-2*(255-e)*(255-t)/255},blendSoftLight:function(e,t){return t<128?2*(64+(e>>1))*(t/255):255-2*(255-(64+(e>>1)))*(255-t)/255},blendHardLight:function(e,t){return U.Color.blendOverlay(t,e)},blendColorDodge:function(e,t){return 255===t?t:Math.min(255,(e<<8)/(255-t))},blendColorBurn:function(e,t){return 0===t?t:Math.max(0,255-(255-e<<8)/t)},blendLinearDodge:function(e,t){return U.Color.blendAdd(e,t)},blendLinearBurn:function(e,t){return U.Color.blendSubtract(e,t)},blendLinearLight:function(e,t){return t<128?U.Color.blendLinearBurn(e,2*t):U.Color.blendLinearDodge(e,2*(t-128))},blendVividLight:function(e,t){return t<128?U.Color.blendColorBurn(e,2*t):U.Color.blendColorDodge(e,2*(t-128))},blendPinLight:function(e,t){return t<128?U.Color.blendDarken(e,2*t):U.Color.blendLighten(e,2*(t-128))},blendHardMix:function(e,t){return U.Color.blendVividLight(e,t)<128?0:255},blendReflect:function(e,t){return 255===t?t:Math.min(255,e*e/(255-t))},blendGlow:function(e,t){return U.Color.blendReflect(t,e)},blendPhoenix:function(e,t){return Math.min(e,t)-Math.max(e,t)+255}},U.Physics=function(e,t){t=t||{},this.game=e,this.config=t,this.arcade=null,this.p2=null,this.ninja=null,this.box2d=null,this.chipmunk=null,this.matter=null,this.parseConfig()},U.Physics.ARCADE=0,U.Physics.P2JS=1,U.Physics.NINJA=2,U.Physics.BOX2D=3,U.Physics.CHIPMUNK=4,U.Physics.MATTERJS=5,U.Physics.prototype={parseConfig:function(){this.config.hasOwnProperty("arcade")&&!0!==this.config.arcade||!U.Physics.hasOwnProperty("Arcade")||(this.arcade=new U.Physics.Arcade(this.game)),this.config.hasOwnProperty("ninja")&&!0===this.config.ninja&&U.Physics.hasOwnProperty("Ninja")&&(this.ninja=new U.Physics.Ninja(this.game)),this.config.hasOwnProperty("p2")&&!0===this.config.p2&&U.Physics.hasOwnProperty("P2")&&(this.p2=new U.Physics.P2(this.game,this.config)),this.config.hasOwnProperty("box2d")&&!0===this.config.box2d&&U.Physics.hasOwnProperty("BOX2D")&&(this.box2d=new U.Physics.BOX2D(this.game,this.config)),this.config.hasOwnProperty("matter")&&!0===this.config.matter&&U.Physics.hasOwnProperty("Matter")&&(this.matter=new U.Physics.Matter(this.game,this.config))},startSystem:function(e){e===U.Physics.ARCADE?this.arcade=new U.Physics.Arcade(this.game):e===U.Physics.P2JS?null===this.p2?this.p2=new U.Physics.P2(this.game,this.config):this.p2.reset():e===U.Physics.NINJA?this.ninja=new U.Physics.Ninja(this.game):e===U.Physics.BOX2D?null===this.box2d?this.box2d=new U.Physics.Box2D(this.game,this.config):this.box2d.reset():e===U.Physics.MATTERJS&&(null===this.matter?this.matter=new U.Physics.Matter(this.game,this.config):this.matter.reset())},enable:function(e,t,i){void 0===t&&(t=U.Physics.ARCADE),void 0===i&&(i=!1),t===U.Physics.ARCADE?this.arcade.enable(e):t===U.Physics.P2JS&&this.p2?this.p2.enable(e,i):t===U.Physics.NINJA&&this.ninja?this.ninja.enableAABB(e):t===U.Physics.BOX2D&&this.box2d?this.box2d.enable(e):t===U.Physics.MATTERJS&&this.matter&&this.matter.enable(e)},preUpdate:function(){this.p2&&this.p2.preUpdate(),this.box2d&&this.box2d.preUpdate(),this.matter&&this.matter.preUpdate()},update:function(){this.p2&&this.p2.update(),this.box2d&&this.box2d.update(),this.matter&&this.matter.update()},setBoundsToWorld:function(){this.arcade&&this.arcade.setBoundsToWorld(),this.ninja&&this.ninja.setBoundsToWorld(),this.p2&&this.p2.setBoundsToWorld(),this.box2d&&this.box2d.setBoundsToWorld(),this.matter&&this.matter.setBoundsToWorld()},clear:function(){this.p2&&this.p2.clear(),this.box2d&&this.box2d.clear(),this.matter&&this.matter.clear()},reset:function(){this.p2&&this.p2.reset(),this.box2d&&this.box2d.reset(),this.matter&&this.matter.reset()},destroy:function(){this.p2&&this.p2.destroy(),this.box2d&&this.box2d.destroy(),this.matter&&this.matter.destroy(),this.arcade=null,this.ninja=null,this.p2=null,this.box2d=null,this.matter=null}},U.Physics.prototype.constructor=U.Physics,U.Physics.Arcade=function(e){this.game=e,this.gravity=new U.Point,this.bounds=new U.Rectangle(0,0,e.world.width,e.world.height),this.checkCollision={up:!0,down:!0,left:!0,right:!0},this.maxObjects=10,this.maxLevels=4,this.OVERLAP_BIAS=4,this.forceX=!1,this.sortDirection=U.Physics.Arcade.LEFT_RIGHT,this.skipQuadTree=!0,this.isPaused=!1,this.quadTree=new U.QuadTree(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,this.maxObjects,this.maxLevels),this._total=0,this.setBoundsToWorld()},U.Physics.Arcade.prototype.constructor=U.Physics.Arcade,U.Physics.Arcade.SORT_NONE=0,U.Physics.Arcade.LEFT_RIGHT=1,U.Physics.Arcade.RIGHT_LEFT=2,U.Physics.Arcade.TOP_BOTTOM=3,U.Physics.Arcade.BOTTOM_TOP=4,U.Physics.Arcade.prototype={setBounds:function(e,t,i,n){this.bounds.setTo(e,t,i,n)},setBoundsToWorld:function(){this.bounds.copyFrom(this.game.world.bounds)},enable:function(e,t){void 0===t&&(t=!0);var i=1;if(Array.isArray(e))for(i=e.length;i--;)e[i]instanceof U.Group?this.enable(e[i].children,t):(this.enableBody(e[i]),t&&e[i].hasOwnProperty("children")&&0<e[i].children.length&&this.enable(e[i],!0));else e instanceof U.Group?this.enable(e.children,t):(this.enableBody(e),t&&e.hasOwnProperty("children")&&0<e.children.length&&this.enable(e.children,!0))},enableBody:function(e){e.hasOwnProperty("body")&&null===e.body&&(e.body=new U.Physics.Arcade.Body(e),e.parent&&e.parent instanceof U.Group&&e.parent.addToHash(e))},updateMotion:function(e){var t=this.computeVelocity(0,e,e.angularVelocity,e.angularAcceleration,e.angularDrag,e.maxAngular)-e.angularVelocity;e.angularVelocity+=t,e.rotation+=e.angularVelocity*this.game.time.physicsElapsed,e.velocity.x=this.computeVelocity(1,e,e.velocity.x,e.acceleration.x,e.drag.x,e.maxVelocity.x),e.velocity.y=this.computeVelocity(2,e,e.velocity.y,e.acceleration.y,e.drag.y,e.maxVelocity.y)},computeVelocity:function(e,t,i,n,r,o){return void 0===o&&(o=1e4),1===e&&t.allowGravity?i+=(this.gravity.x+t.gravity.x)*this.game.time.physicsElapsed:2===e&&t.allowGravity&&(i+=(this.gravity.y+t.gravity.y)*this.game.time.physicsElapsed),n?i+=n*this.game.time.physicsElapsed:r&&(0<i-(r*=this.game.time.physicsElapsed)?i-=r:i+r<0?i+=r:i=0),o<i?i=o:i<-o&&(i=-o),i},overlap:function(e,t,i,n,r){if(i=i||null,n=n||null,r=r||i,this._total=0,!Array.isArray(e)&&Array.isArray(t))for(var o=0;o<t.length;o++)this.collideHandler(e,t[o],i,n,r,!0);else if(Array.isArray(e)&&!Array.isArray(t))for(o=0;o<e.length;o++)this.collideHandler(e[o],t,i,n,r,!0);else if(Array.isArray(e)&&Array.isArray(t))for(o=0;o<e.length;o++)for(var a=0;a<t.length;a++)this.collideHandler(e[o],t[a],i,n,r,!0);else this.collideHandler(e,t,i,n,r,!0);return 0<this._total},collide:function(e,t,i,n,r){if(i=i||null,n=n||null,r=r||i,this._total=0,!Array.isArray(e)&&Array.isArray(t))for(var o=0;o<t.length;o++)this.collideHandler(e,t[o],i,n,r,!1);else if(Array.isArray(e)&&!Array.isArray(t))for(o=0;o<e.length;o++)this.collideHandler(e[o],t,i,n,r,!1);else if(Array.isArray(e)&&Array.isArray(t))for(o=0;o<e.length;o++)for(var a=0;a<t.length;a++)this.collideHandler(e[o],t[a],i,n,r,!1);else this.collideHandler(e,t,i,n,r,!1);return 0<this._total},sortLeftRight:function(e,t){return e.body&&t.body?e.body.x-t.body.x:0},sortRightLeft:function(e,t){return e.body&&t.body?t.body.x-e.body.x:0},sortTopBottom:function(e,t){return e.body&&t.body?e.body.y-t.body.y:0},sortBottomTop:function(e,t){return e.body&&t.body?t.body.y-e.body.y:0},sort:function(e,t){null!==e.physicsSortDirection?t=e.physicsSortDirection:void 0===t&&(t=this.sortDirection),t===U.Physics.Arcade.LEFT_RIGHT?e.hash.sort(this.sortLeftRight):t===U.Physics.Arcade.RIGHT_LEFT?e.hash.sort(this.sortRightLeft):t===U.Physics.Arcade.TOP_BOTTOM?e.hash.sort(this.sortTopBottom):t===U.Physics.Arcade.BOTTOM_TOP&&e.hash.sort(this.sortBottomTop)},collideHandler:function(e,t,i,n,r,o){if(void 0===t&&e.physicsType===U.GROUP)return this.sort(e),void this.collideGroupVsSelf(e,i,n,r,o);e&&t&&e.exists&&t.exists&&(this.sortDirection!==U.Physics.Arcade.SORT_NONE&&(e.physicsType===U.GROUP&&this.sort(e),t.physicsType===U.GROUP&&this.sort(t)),e.physicsType===U.SPRITE?t.physicsType===U.SPRITE?this.collideSpriteVsSprite(e,t,i,n,r,o):t.physicsType===U.GROUP?this.collideSpriteVsGroup(e,t,i,n,r,o):t.physicsType===U.TILEMAPLAYER&&this.collideSpriteVsTilemapLayer(e,t,i,n,r,o):e.physicsType===U.GROUP?t.physicsType===U.SPRITE?this.collideSpriteVsGroup(t,e,i,n,r,o):t.physicsType===U.GROUP?this.collideGroupVsGroup(e,t,i,n,r,o):t.physicsType===U.TILEMAPLAYER&&this.collideGroupVsTilemapLayer(e,t,i,n,r,o):e.physicsType===U.TILEMAPLAYER&&(t.physicsType===U.SPRITE?this.collideSpriteVsTilemapLayer(t,e,i,n,r,o):t.physicsType===U.GROUP&&this.collideGroupVsTilemapLayer(t,e,i,n,r,o)))},collideSpriteVsSprite:function(e,t,i,n,r,o){return!(!e.body||!t.body)&&(this.separate(e.body,t.body,n,r,o)&&(i&&i.call(r,e,t),this._total++),!0)},collideSpriteVsGroup:function(e,t,i,n,r,o){if(0!==t.length&&e.body)if(this.skipQuadTree||e.body.skipQuadTree)for(var a={},s=0;s<t.hash.length;s++){var p=t.hash[s];if(p&&p.exists&&p.body){if(a=p.body.getBounds(a),this.sortDirection===U.Physics.Arcade.LEFT_RIGHT){if(e.body.right<a.x)break;if(a.right<e.body.x)continue}else if(this.sortDirection===U.Physics.Arcade.RIGHT_LEFT){if(e.body.x>a.right)break;if(a.x>e.body.right)continue}else if(this.sortDirection===U.Physics.Arcade.TOP_BOTTOM){if(e.body.bottom<a.y)break;if(a.bottom<e.body.y)continue}else if(this.sortDirection===U.Physics.Arcade.BOTTOM_TOP){if(e.body.y>a.bottom)break;if(a.y>e.body.bottom)continue}this.collideSpriteVsSprite(e,p,i,n,r,o)}}else{this.quadTree.clear(),this.quadTree.reset(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,this.maxObjects,this.maxLevels),this.quadTree.populate(t);var l=this.quadTree.retrieve(e);for(s=0;s<l.length;s++)this.separate(e.body,l[s],n,r,o)&&(i&&i.call(r,e,l[s].sprite),this._total++)}},collideGroupVsSelf:function(e,t,i,n,r){if(0!==e.length)for(var o=0;o<e.hash.length;o++){var a={},s=e.hash[o];if(s&&s.exists&&s.body){a=s.body.getBounds(a);for(var p=o+1;p<e.hash.length;p++){var l={},h=e.hash[p];if(h&&h.exists&&h.body){if(l=h.body.getBounds(l),this.sortDirection===U.Physics.Arcade.LEFT_RIGHT){if(a.right<l.x)break;if(l.right<a.x)continue}else if(this.sortDirection===U.Physics.Arcade.RIGHT_LEFT){if(a.x>l.right)continue;if(l.x>a.right)break}else if(this.sortDirection===U.Physics.Arcade.TOP_BOTTOM){if(a.bottom<l.y)continue;if(l.bottom<a.y)break}else if(this.sortDirection===U.Physics.Arcade.BOTTOM_TOP){if(a.y>l.bottom)continue;if(l.y>s.body.bottom)break}this.collideSpriteVsSprite(s,h,t,i,n,r)}}}}},collideGroupVsGroup:function(e,t,i,n,r,o){if(0!==e.length&&0!==t.length)for(var a=0;a<e.children.length;a++)e.children[a].exists&&(e.children[a].physicsType===U.GROUP?this.collideGroupVsGroup(e.children[a],t,i,n,r,o):this.collideSpriteVsGroup(e.children[a],t,i,n,r,o))},separate:function(e,t,i,n,r){if(!e.enable||!t.enable||e.checkCollision.none||t.checkCollision.none||!this.intersects(e,t))return!1;if(i&&!1===i.call(n,e.sprite,t.sprite))return!1;if(e.isCircle&&t.isCircle)return this.separateCircle(e,t,r);if(e.isCircle!==t.isCircle){var o=e.isCircle?t:e,a=e.isCircle?e:t,s=o.x,p=o.y,l=o.right,h=o.bottom,u=a.x+a.radius,d=a.y+a.radius;if((d<p||h<d)&&(u<s||l<u))return this.separateCircle(e,t,r)}var c=!1,_=!1;this.forceX||Math.abs(this.gravity.y+e.gravity.y)<Math.abs(this.gravity.x+e.gravity.x)?(c=this.separateX(e,t,r),this.intersects(e,t)&&(_=this.separateY(e,t,r))):(_=this.separateY(e,t,r),this.intersects(e,t)&&(c=this.separateX(e,t,r)));var y=c||_;return y&&(r?(e.onOverlap&&e.onOverlap.dispatch(e.sprite,t.sprite),t.onOverlap&&t.onOverlap.dispatch(t.sprite,e.sprite)):(e.onCollide&&e.onCollide.dispatch(e.sprite,t.sprite),t.onCollide&&t.onCollide.dispatch(t.sprite,e.sprite))),y},intersects:function(e,t){return e!==t&&(e.isCircle?t.isCircle?U.Math.distance(e.center.x,e.center.y,t.center.x,t.center.y)<=e.radius+t.radius:this.circleBodyIntersects(e,t):t.isCircle?this.circleBodyIntersects(t,e):!(e.right<=t.position.x)&&(!(e.bottom<=t.position.y)&&(!(e.position.x>=t.right)&&!(e.position.y>=t.bottom))))},circleBodyIntersects:function(e,t){var i=U.Math.clamp(e.center.x,t.left,t.right),n=U.Math.clamp(e.center.y,t.top,t.bottom);return(e.center.x-i)*(e.center.x-i)+(e.center.y-n)*(e.center.y-n)<=e.radius*e.radius},separateCircle:function(e,t,i){this.getOverlapX(e,t),this.getOverlapY(e,t);var n=t.center.x-e.center.x,r=t.center.y-e.center.y,o=Math.atan2(r,n),a=0;if(e.isCircle!==t.isCircle){var s={x:t.isCircle?e.position.x:t.position.x,y:t.isCircle?e.position.y:t.position.y,right:t.isCircle?e.right:t.right,bottom:t.isCircle?e.bottom:t.bottom},p={x:e.isCircle?e.position.x+e.radius:t.position.x+t.radius,y:e.isCircle?e.position.y+e.radius:t.position.y+t.radius,radius:e.isCircle?e.radius:t.radius};p.y<s.y?p.x<s.x?a=U.Math.distance(p.x,p.y,s.x,s.y)-p.radius:s.right<p.x&&(a=U.Math.distance(p.x,p.y,s.right,s.y)-p.radius):s.bottom<p.y&&(p.x<s.x?a=U.Math.distance(p.x,p.y,s.x,s.bottom)-p.radius:s.right<p.x&&(a=U.Math.distance(p.x,p.y,s.right,s.bottom)-p.radius)),a*=-1}else a=e.radius+t.radius-U.Math.distance(e.center.x,e.center.y,t.center.x,t.center.y);if(i||0===a||e.immovable&&t.immovable||e.customSeparateX||t.customSeparateX)return 0!==a&&(e.onOverlap&&e.onOverlap.dispatch(e.sprite,t.sprite),t.onOverlap&&t.onOverlap.dispatch(t.sprite,e.sprite)),0!==a;var l=e.velocity.x*Math.cos(o)+e.velocity.y*Math.sin(o),h=e.velocity.x*Math.sin(o)-e.velocity.y*Math.cos(o),u=t.velocity.x*Math.cos(o)+t.velocity.y*Math.sin(o),d=t.velocity.x*Math.sin(o)-t.velocity.y*Math.cos(o),c=((e.mass-t.mass)*l+2*t.mass*u)/(e.mass+t.mass),_=(2*e.mass*l+(t.mass-e.mass)*u)/(e.mass+t.mass);return e.immovable||(e.velocity.x=(c*Math.cos(o)-h*Math.sin(o))*e.bounce.x,e.velocity.y=(h*Math.cos(o)+c*Math.sin(o))*e.bounce.y),t.immovable||(t.velocity.x=(_*Math.cos(o)-d*Math.sin(o))*t.bounce.x,t.velocity.y=(d*Math.cos(o)+_*Math.sin(o))*t.bounce.y),Math.abs(o)<Math.PI/2?0<e.velocity.x&&!e.immovable&&t.velocity.x>e.velocity.x?e.velocity.x*=-1:t.velocity.x<0&&!t.immovable&&e.velocity.x<t.velocity.x?t.velocity.x*=-1:0<e.velocity.y&&!e.immovable&&t.velocity.y>e.velocity.y?e.velocity.y*=-1:t.velocity.y<0&&!t.immovable&&e.velocity.y<t.velocity.y&&(t.velocity.y*=-1):Math.abs(o)>Math.PI/2&&(e.velocity.x<0&&!e.immovable&&t.velocity.x<e.velocity.x?e.velocity.x*=-1:0<t.velocity.x&&!t.immovable&&e.velocity.x>t.velocity.x?t.velocity.x*=-1:e.velocity.y<0&&!e.immovable&&t.velocity.y<e.velocity.y?e.velocity.y*=-1:0<t.velocity.y&&!t.immovable&&e.velocity.x>t.velocity.y&&(t.velocity.y*=-1)),e.immovable||(e.x+=e.velocity.x*this.game.time.physicsElapsed-a*Math.cos(o),e.y+=e.velocity.y*this.game.time.physicsElapsed-a*Math.sin(o)),t.immovable||(t.x+=t.velocity.x*this.game.time.physicsElapsed+a*Math.cos(o),t.y+=t.velocity.y*this.game.time.physicsElapsed+a*Math.sin(o)),e.onCollide&&e.onCollide.dispatch(e.sprite,t.sprite),t.onCollide&&t.onCollide.dispatch(t.sprite,e.sprite),!0},getOverlapX:function(e,t,i){var n=0,r=e.deltaAbsX()+t.deltaAbsX()+this.OVERLAP_BIAS;return 0===e.deltaX()&&0===t.deltaX()?(e.embedded=!0,t.embedded=!0):e.deltaX()>t.deltaX()?r<(n=e.right-t.x)&&!i||!1===e.checkCollision.right||!1===t.checkCollision.left?n=0:(e.touching.none=!1,e.touching.right=!0,t.touching.none=!1,t.touching.left=!0):e.deltaX()<t.deltaX()&&(r<-(n=e.x-t.width-t.x)&&!i||!1===e.checkCollision.left||!1===t.checkCollision.right?n=0:(e.touching.none=!1,e.touching.left=!0,t.touching.none=!1,t.touching.right=!0)),e.overlapX=n,t.overlapX=n},getOverlapY:function(e,t,i){var n=0,r=e.deltaAbsY()+t.deltaAbsY()+this.OVERLAP_BIAS;return 0===e.deltaY()&&0===t.deltaY()?(e.embedded=!0,t.embedded=!0):e.deltaY()>t.deltaY()?r<(n=e.bottom-t.y)&&!i||!1===e.checkCollision.down||!1===t.checkCollision.up?n=0:(e.touching.none=!1,e.touching.down=!0,t.touching.none=!1,t.touching.up=!0):e.deltaY()<t.deltaY()&&(r<-(n=e.y-t.bottom)&&!i||!1===e.checkCollision.up||!1===t.checkCollision.down?n=0:(e.touching.none=!1,e.touching.up=!0,t.touching.none=!1,t.touching.down=!0)),e.overlapY=n,t.overlapY=n},separateX:function(e,t,i){var n=this.getOverlapX(e,t,i);if(i||0===n||e.immovable&&t.immovable||e.customSeparateX||t.customSeparateX)return 0!==n||e.embedded&&t.embedded;var r=e.velocity.x,o=t.velocity.x;if(e.immovable||t.immovable)e.immovable?(t.x+=n,t.velocity.x=r-o*t.bounce.x,e.moves&&(t.y+=(e.y-e.prev.y)*e.friction.y)):(e.x-=n,e.velocity.x=o-r*e.bounce.x,t.moves&&(e.y+=(t.y-t.prev.y)*t.friction.y));else{n*=.5,e.x-=n,t.x+=n;var a=Math.sqrt(o*o*t.mass/e.mass)*(0<o?1:-1),s=Math.sqrt(r*r*e.mass/t.mass)*(0<r?1:-1),p=.5*(a+s);a-=p,s-=p,e.velocity.x=p+a*e.bounce.x,t.velocity.x=p+s*t.bounce.x}return!0},separateY:function(e,t,i){var n=this.getOverlapY(e,t,i);if(i||0===n||e.immovable&&t.immovable||e.customSeparateY||t.customSeparateY)return 0!==n||e.embedded&&t.embedded;var r=e.velocity.y,o=t.velocity.y;if(e.immovable||t.immovable)e.immovable?(t.y+=n,t.velocity.y=r-o*t.bounce.y,e.moves&&(t.x+=(e.x-e.prev.x)*e.friction.x)):(e.y-=n,e.velocity.y=o-r*e.bounce.y,t.moves&&(e.x+=(t.x-t.prev.x)*t.friction.x));else{n*=.5,e.y-=n,t.y+=n;var a=Math.sqrt(o*o*t.mass/e.mass)*(0<o?1:-1),s=Math.sqrt(r*r*e.mass/t.mass)*(0<r?1:-1),p=.5*(a+s);a-=p,s-=p,e.velocity.y=p+a*e.bounce.y,t.velocity.y=p+s*t.bounce.y}return!0},getObjectsUnderPointer:function(e,t,i,n){if(0!==t.length&&e.exists)return this.getObjectsAtLocation(e.x,e.y,t,i,n,e)},getObjectsAtLocation:function(e,t,i,n,r,o){this.quadTree.clear(),this.quadTree.reset(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,this.maxObjects,this.maxLevels),this.quadTree.populate(i);for(var a=new U.Rectangle(e,t,1,1),s=[],p=this.quadTree.retrieve(a),l=0;l<p.length;l++)p[l].hitTest(e,t)&&(n&&n.call(r,o,p[l].sprite),s.push(p[l].sprite));return s},moveToObject:function(e,t,i,n){void 0===i&&(i=60),void 0===n&&(n=0);var r=Math.atan2(t.y-e.y,t.x-e.x);return 0<n&&(i=this.distanceBetween(e,t)/(n/1e3)),e.body.velocity.x=Math.cos(r)*i,e.body.velocity.y=Math.sin(r)*i,r},moveToPointer:function(e,t,i,n){void 0===t&&(t=60),i=i||this.game.input.activePointer,void 0===n&&(n=0);var r=this.angleToPointer(e,i);return 0<n&&(t=this.distanceToPointer(e,i)/(n/1e3)),e.body.velocity.x=Math.cos(r)*t,e.body.velocity.y=Math.sin(r)*t,r},moveToXY:function(e,t,i,n,r){void 0===n&&(n=60),void 0===r&&(r=0);var o=Math.atan2(i-e.y,t-e.x);return 0<r&&(n=this.distanceToXY(e,t,i)/(r/1e3)),e.body.velocity.x=Math.cos(o)*n,e.body.velocity.y=Math.sin(o)*n,o},velocityFromAngle:function(e,t,i){return void 0===t&&(t=60),(i=i||new U.Point).setTo(Math.cos(this.game.math.degToRad(e))*t,Math.sin(this.game.math.degToRad(e))*t)},velocityFromRotation:function(e,t,i){return void 0===t&&(t=60),(i=i||new U.Point).setTo(Math.cos(e)*t,Math.sin(e)*t)},accelerationFromRotation:function(e,t,i){return void 0===t&&(t=60),(i=i||new U.Point).setTo(Math.cos(e)*t,Math.sin(e)*t)},accelerateToObject:function(e,t,i,n,r){void 0===i&&(i=60),void 0===n&&(n=1e3),void 0===r&&(r=1e3);var o=this.angleBetween(e,t);return e.body.acceleration.setTo(Math.cos(o)*i,Math.sin(o)*i),e.body.maxVelocity.setTo(n,r),o},accelerateToPointer:function(e,t,i,n,r){void 0===i&&(i=60),void 0===t&&(t=this.game.input.activePointer),void 0===n&&(n=1e3),void 0===r&&(r=1e3);var o=this.angleToPointer(e,t);return e.body.acceleration.setTo(Math.cos(o)*i,Math.sin(o)*i),e.body.maxVelocity.setTo(n,r),o},accelerateToXY:function(e,t,i,n,r,o){void 0===n&&(n=60),void 0===r&&(r=1e3),void 0===o&&(o=1e3);var a=this.angleToXY(e,t,i);return e.body.acceleration.setTo(Math.cos(a)*n,Math.sin(a)*n),e.body.maxVelocity.setTo(r,o),a},distanceBetween:function(e,t,i){void 0===i&&(i=!1);var n=i?e.world.x-t.world.x:e.x-t.x,r=i?e.world.y-t.world.y:e.y-t.y;return Math.sqrt(n*n+r*r)},distanceToXY:function(e,t,i,n){void 0===n&&(n=!1);var r=n?e.world.x-t:e.x-t,o=n?e.world.y-i:e.y-i;return Math.sqrt(r*r+o*o)},distanceToPointer:function(e,t,i){void 0===t&&(t=this.game.input.activePointer),void 0===i&&(i=!1);var n=i?e.world.x-t.worldX:e.x-t.worldX,r=i?e.world.y-t.worldY:e.y-t.worldY;return Math.sqrt(n*n+r*r)},angleBetween:function(e,t,i){return void 0===i&&(i=!1),i?Math.atan2(t.world.y-e.world.y,t.world.x-e.world.x):Math.atan2(t.y-e.y,t.x-e.x)},angleBetweenCenters:function(e,t){var i=t.centerX-e.centerX,n=t.centerY-e.centerY;return Math.atan2(n,i)},angleToXY:function(e,t,i,n){return void 0===n&&(n=!1),n?Math.atan2(i-e.world.y,t-e.world.x):Math.atan2(i-e.y,t-e.x)},angleToPointer:function(e,t,i){return void 0===t&&(t=this.game.input.activePointer),void 0===i&&(i=!1),i?Math.atan2(t.worldY-e.world.y,t.worldX-e.world.x):Math.atan2(t.worldY-e.y,t.worldX-e.x)},worldAngleToPointer:function(e,t){return this.angleToPointer(e,t,!0)}},U.Physics.Arcade.Body=function(e){this.sprite=e,this.game=e.game,this.type=U.Physics.ARCADE,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new U.Point,this.position=new U.Point(e.x,e.y),this.prev=new U.Point(this.position.x,this.position.y),this.allowRotation=!0,this.rotation=e.angle,this.preRotation=e.angle,this.width=e.width,this.height=e.height,this.sourceWidth=e.width,this.sourceHeight=e.height,e.texture&&(this.sourceWidth=e.texture.frame.width,this.sourceHeight=e.texture.frame.height),this.halfWidth=Math.abs(e.width/2),this.halfHeight=Math.abs(e.height/2),this.center=new U.Point(e.x+this.halfWidth,e.y+this.halfHeight),this.velocity=new U.Point,this.newVelocity=new U.Point,this.deltaMax=new U.Point,this.acceleration=new U.Point,this.drag=new U.Point,this.allowGravity=!0,this.gravity=new U.Point,this.bounce=new U.Point,this.worldBounce=null,this.onWorldBounds=null,this.onCollide=null,this.onOverlap=null,this.maxVelocity=new U.Point(1e4,1e4),this.friction=new U.Point(1,0),this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=U.NONE,this.immovable=!1,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,any:!0,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={up:!1,down:!1,left:!1,right:!1},this.tilePadding=new U.Point,this.dirty=!1,this.skipQuadTree=!1,this.syncBounds=!1,this.isMoving=!1,this.stopVelocityOnCollide=!0,this.moveTimer=0,this.moveDistance=0,this.moveDuration=0,this.moveTarget=null,this.moveEnd=null,this.onMoveComplete=new U.Signal,this.movementCallback=null,this.movementCallbackContext=null,this._reset=!0,this._sx=e.scale.x,this._sy=e.scale.y,this._dx=0,this._dy=0},U.Physics.Arcade.Body.prototype={updateBounds:function(){if(this.syncBounds){var e=this.sprite.getBounds();e.ceilAll(),e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._reset=!0)}else{var t=Math.abs(this.sprite.scale.x),i=Math.abs(this.sprite.scale.y);t===this._sx&&i===this._sy||(this.width=this.sourceWidth*t,this.height=this.sourceHeight*i,this._sx=t,this._sy=i,this._reset=!0)}this._reset&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight))},preUpdate:function(){this.enable&&!this.game.physics.arcade.isPaused&&(this.dirty=!0,this.wasTouching.none=this.touching.none,this.wasTouching.up=this.touching.up,this.wasTouching.down=this.touching.down,this.wasTouching.left=this.touching.left,this.wasTouching.right=this.touching.right,this.touching.none=!0,this.touching.up=!1,this.touching.down=!1,this.touching.left=!1,this.touching.right=!1,this.blocked.up=!1,this.blocked.down=!1,this.blocked.left=!1,this.blocked.right=!1,this.embedded=!1,this.updateBounds(),this.position.x=this.sprite.world.x-this.sprite.anchor.x*this.sprite.width+this.sprite.scale.x*this.offset.x,this.position.x-=this.sprite.scale.x<0?this.width:0,this.position.y=this.sprite.world.y-this.sprite.anchor.y*this.sprite.height+this.sprite.scale.y*this.offset.y,this.position.y-=this.sprite.scale.y<0?this.height:0,this.rotation=this.sprite.angle,this.preRotation=this.rotation,(this._reset||this.sprite.fresh)&&(this.prev.x=this.position.x,this.prev.y=this.position.y),this.moves&&(this.game.physics.arcade.updateMotion(this),this.newVelocity.set(this.velocity.x*this.game.time.physicsElapsed,this.velocity.y*this.game.time.physicsElapsed),this.position.x+=this.newVelocity.x,this.position.y+=this.newVelocity.y,this.position.x===this.prev.x&&this.position.y===this.prev.y||(this.angle=Math.atan2(this.velocity.y,this.velocity.x)),this.speed=Math.sqrt(this.velocity.x*this.velocity.x+this.velocity.y*this.velocity.y),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.onWorldBounds.dispatch(this.sprite,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)),this._dx=this.deltaX(),this._dy=this.deltaY(),this._reset=!1)},updateMovement:function(){var e=0,t=0!==this.overlapX||0!==this.overlapY;if(e=0<this.moveDuration?(this.moveTimer+=this.game.time.elapsedMS,this.moveTimer/this.moveDuration):(this.moveTarget.end.set(this.position.x,this.position.y),this.moveTarget.length/this.moveDistance),this.movementCallback)var i=this.movementCallback.call(this.movementCallbackContext,this,this.velocity,e);return!(t||1<=e||void 0!==i&&!0!==i)||(this.stopMovement(1<=e||this.stopVelocityOnCollide&&t),!1)},stopMovement:function(e){this.isMoving&&(this.isMoving=!1,e&&this.velocity.set(0),this.onMoveComplete.dispatch(this.sprite,0!==this.overlapX||0!==this.overlapY))},postUpdate:function(){this.enable&&this.dirty&&(this.isMoving&&this.updateMovement(),this.dirty=!1,this.deltaX()<0?this.facing=U.LEFT:0<this.deltaX()&&(this.facing=U.RIGHT),this.deltaY()<0?this.facing=U.UP:0<this.deltaY()&&(this.facing=U.DOWN),this.moves&&(this._dx=this.deltaX(),this._dy=this.deltaY(),0!==this.deltaMax.x&&0!==this._dx&&(this._dx<0&&this._dx<-this.deltaMax.x?this._dx=-this.deltaMax.x:0<this._dx&&this._dx>this.deltaMax.x&&(this._dx=this.deltaMax.x)),0!==this.deltaMax.y&&0!==this._dy&&(this._dy<0&&this._dy<-this.deltaMax.y?this._dy=-this.deltaMax.y:0<this._dy&&this._dy>this.deltaMax.y&&(this._dy=this.deltaMax.y)),this.sprite.position.x+=this._dx,this.sprite.position.y+=this._dy,this._reset=!0),this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.allowRotation&&(this.sprite.angle+=this.deltaZ()),this.prev.x=this.position.x,this.prev.y=this.position.y)},checkWorldBounds:function(){var e=this.position,t=this.game.physics.arcade.bounds,i=this.game.physics.arcade.checkCollision,n=this.worldBounce?-this.worldBounce.x:-this.bounce.x,r=this.worldBounce?-this.worldBounce.y:-this.bounce.y;if(this.isCircle){var o=this.center.x-this.radius,a=this.center.y-this.radius,s=this.center.x+this.radius,p=this.center.y+this.radius;o<t.x&&i.left?(e.x=t.x-this.halfWidth+this.radius,this.velocity.x*=n,this.blocked.left=!0):s>t.right&&i.right&&(e.x=t.right-this.halfWidth-this.radius,this.velocity.x*=n,this.blocked.right=!0),a<t.y&&i.up?(e.y=t.y-this.halfHeight+this.radius,this.velocity.y*=r,this.blocked.up=!0):p>t.bottom&&i.down&&(e.y=t.bottom-this.halfHeight-this.radius,this.velocity.y*=r,this.blocked.down=!0)}else e.x<t.x&&i.left?(e.x=t.x,this.velocity.x*=n,this.blocked.left=!0):this.right>t.right&&i.right&&(e.x=t.right-this.width,this.velocity.x*=n,this.blocked.right=!0),e.y<t.y&&i.up?(e.y=t.y,this.velocity.y*=r,this.blocked.up=!0):this.bottom>t.bottom&&i.down&&(e.y=t.bottom-this.height,this.velocity.y*=r,this.blocked.down=!0);return this.blocked.up||this.blocked.down||this.blocked.left||this.blocked.right},moveFrom:function(e,t,i){return void 0===t&&(t=this.speed),0!==t&&(void 0===i?(n=this.angle,i=this.game.math.radToDeg(n)):n=this.game.math.degToRad(i),this.moveTimer=0,this.moveDuration=e,0===i||180===i?this.velocity.set(Math.cos(n)*t,0):90===i||270===i?this.velocity.set(0,Math.sin(n)*t):this.velocity.set(Math.cos(n)*t,Math.sin(n)*t),this.isMoving=!0);var n},moveTo:function(e,t,i){var n,r=t/(e/1e3);return 0!==r&&(void 0===i?(n=this.angle,i=this.game.math.radToDeg(n)):n=this.game.math.degToRad(i),t=Math.abs(t),this.moveDuration=0,this.moveDistance=t,null===this.moveTarget&&(this.moveTarget=new U.Line,this.moveEnd=new U.Point),this.moveTarget.fromAngle(this.x,this.y,n,t),this.moveEnd.set(this.moveTarget.end.x,this.moveTarget.end.y),this.moveTarget.setTo(this.x,this.y,this.x,this.y),0===i||180===i?this.velocity.set(Math.cos(n)*r,0):90===i||270===i?this.velocity.set(0,Math.sin(n)*r):this.velocity.set(Math.cos(n)*r,Math.sin(n)*r),this.isMoving=!0)},setSize:function(e,t,i,n){void 0===i&&(i=this.offset.x),void 0===n&&(n=this.offset.y),this.sourceWidth=e,this.sourceHeight=t,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.setTo(i,n),this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.isCircle=!1,this.radius=0},setCircle:function(e,t,i){void 0===t&&(t=this.offset.x),void 0===i&&(i=this.offset.y),0<e?(this.isCircle=!0,this.radius=e,this.sourceWidth=2*e,this.sourceHeight=2*e,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.setTo(t,i),this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight)):this.isCircle=!1},reset:function(e,t){this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this.position.x=e-this.sprite.anchor.x*this.sprite.width+this.sprite.scale.x*this.offset.x,this.position.x-=this.sprite.scale.x<0?this.width:0,this.position.y=t-this.sprite.anchor.y*this.sprite.height+this.sprite.scale.y*this.offset.y,this.position.y-=this.sprite.scale.y<0?this.height:0,this.prev.x=this.position.x,this.prev.y=this.position.y,this.rotation=this.sprite.angle,this.preRotation=this.rotation,this._sx=this.sprite.scale.x,this._sy=this.sprite.scale.y,this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},getBounds:function(e){return this.isCircle?(e.x=this.center.x-this.radius,e.y=this.center.y-this.radius,e.right=this.center.x+this.radius,e.bottom=this.center.y+this.radius):(e.x=this.x,e.y=this.y,e.right=this.right,e.bottom=this.bottom),e},hitTest:function(e,t){return this.isCircle?U.Circle.contains(this,e,t):U.Rectangle.contains(this,e,t)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return 0<this.deltaX()?this.deltaX():-this.deltaX()},deltaAbsY:function(){return 0<this.deltaY()?this.deltaY():-this.deltaY()},deltaX:function(){return this.position.x-this.prev.x},deltaY:function(){return this.position.y-this.prev.y},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.sprite.parent&&this.sprite.parent instanceof U.Group&&this.sprite.parent.removeFromHash(this.sprite),this.sprite.body=null,this.sprite=null}},Object.defineProperty(U.Physics.Arcade.Body.prototype,"left",{get:function(){return this.position.x}}),Object.defineProperty(U.Physics.Arcade.Body.prototype,"right",{get:function(){return this.position.x+this.width}}),Object.defineProperty(U.Physics.Arcade.Body.prototype,"top",{get:function(){return this.position.y}}),Object.defineProperty(U.Physics.Arcade.Body.prototype,"bottom",{get:function(){return this.position.y+this.height}}),Object.defineProperty(U.Physics.Arcade.Body.prototype,"x",{get:function(){return this.position.x},set:function(e){this.position.x=e}}),Object.defineProperty(U.Physics.Arcade.Body.prototype,"y",{get:function(){return this.position.y},set:function(e){this.position.y=e}}),U.Physics.Arcade.Body.render=function(e,t,i,n){void 0===n&&(n=!0),i=i||"rgba(0,255,0,0.4)",e.fillStyle=i,e.strokeStyle=i,t.isCircle?(e.beginPath(),e.arc(t.center.x-t.game.camera.x,t.center.y-t.game.camera.y,t.radius,0,2*Math.PI),n?e.fill():e.stroke()):n?e.fillRect(t.position.x-t.game.camera.x,t.position.y-t.game.camera.y,t.width,t.height):e.strokeRect(t.position.x-t.game.camera.x,t.position.y-t.game.camera.y,t.width,t.height)},U.Physics.Arcade.Body.renderBodyInfo=function(e,t){e.line("x: "+t.x.toFixed(2),"y: "+t.y.toFixed(2),"width: "+t.width,"height: "+t.height),e.line("velocity x: "+t.velocity.x.toFixed(2),"y: "+t.velocity.y.toFixed(2),"deltaX: "+t._dx.toFixed(2),"deltaY: "+t._dy.toFixed(2)),e.line("acceleration x: "+t.acceleration.x.toFixed(2),"y: "+t.acceleration.y.toFixed(2),"speed: "+t.speed.toFixed(2),"angle: "+t.angle.toFixed(2)),e.line("gravity x: "+t.gravity.x,"y: "+t.gravity.y,"bounce x: "+t.bounce.x.toFixed(2),"y: "+t.bounce.y.toFixed(2)),e.line("touching left: "+t.touching.left,"right: "+t.touching.right,"up: "+t.touching.up,"down: "+t.touching.down),e.line("blocked left: "+t.blocked.left,"right: "+t.blocked.right,"up: "+t.blocked.up,"down: "+t.blocked.down)},U.Physics.Arcade.Body.prototype.constructor=U.Physics.Arcade.Body,U.Physics.Arcade.TilemapCollision=function(){},U.Physics.Arcade.TilemapCollision.prototype={TILE_BIAS:16,collideSpriteVsTilemapLayer:function(e,t,i,n,r,o){if(e.body){var a=t.getTiles(e.body.position.x-e.body.tilePadding.x,e.body.position.y-e.body.tilePadding.y,e.body.width+e.body.tilePadding.x,e.body.height+e.body.tilePadding.y,!1,!1);if(0!==a.length)for(var s=0;s<a.length;s++)n?n.call(r,e,a[s])&&this.separateTile(s,e.body,a[s],t,o)&&(this._total++,i&&i.call(r,e,a[s])):this.separateTile(s,e.body,a[s],t,o)&&(this._total++,i&&i.call(r,e,a[s]))}},collideGroupVsTilemapLayer:function(e,t,i,n,r,o){if(0!==e.length)for(var a=0;a<e.children.length;a++)e.children[a].exists&&this.collideSpriteVsTilemapLayer(e.children[a],t,i,n,r,o)},separateTile:function(e,t,i,n,r){if(!t.enable)return!1;var o=n.fixedToCamera?0:n.position.x,a=n.fixedToCamera?0:n.position.y;if(!i.intersects(t.position.x-o,t.position.y-a,t.right-o,t.bottom-a))return!1;if(r)return!0;if(i.collisionCallback&&!i.collisionCallback.call(i.collisionCallbackContext,t.sprite,i))return!1;if(void 0!==i.layer.callbacks&&i.layer.callbacks[i.index]&&!i.layer.callbacks[i.index].callback.call(i.layer.callbacks[i.index].callbackContext,t.sprite,i))return!1;if(!(i.faceLeft||i.faceRight||i.faceTop||i.faceBottom))return!1;var s=0,p=0,l=0,h=1;if(t.deltaAbsX()>t.deltaAbsY()?l=-1:t.deltaAbsX()<t.deltaAbsY()&&(h=-1),0!==t.deltaX()&&0!==t.deltaY()&&(i.faceLeft||i.faceRight)&&(i.faceTop||i.faceBottom)&&(l=Math.min(Math.abs(t.position.x-o-i.right),Math.abs(t.right-o-i.left)),h=Math.min(Math.abs(t.position.y-a-i.bottom),Math.abs(t.bottom-a-i.top))),l<h){if((i.faceLeft||i.faceRight)&&0!==(s=this.tileCheckX(t,i,n))&&!i.intersects(t.position.x-o,t.position.y-a,t.right-o,t.bottom-a))return!0;(i.faceTop||i.faceBottom)&&(p=this.tileCheckY(t,i,n))}else{if((i.faceTop||i.faceBottom)&&0!==(p=this.tileCheckY(t,i,n))&&!i.intersects(t.position.x-o,t.position.y-a,t.right-o,t.bottom-a))return!0;(i.faceLeft||i.faceRight)&&(s=this.tileCheckX(t,i,n))}return 0!==s||0!==p},tileCheckX:function(e,t,i){var n=0,r=i.fixedToCamera?0:i.position.x;return e.deltaX()<0&&!e.blocked.left&&t.collideRight&&e.checkCollision.left?t.faceRight&&e.x-r<t.right&&(n=e.x-r-t.right)<-this.TILE_BIAS&&(n=0):0<e.deltaX()&&!e.blocked.right&&t.collideLeft&&e.checkCollision.right&&t.faceLeft&&e.right-r>t.left&&(n=e.right-r-t.left)>this.TILE_BIAS&&(n=0),0!==n&&(e.customSeparateX?e.overlapX=n:this.processTileSeparationX(e,n)),n},tileCheckY:function(e,t,i){var n=0,r=i.fixedToCamera?0:i.position.y;return e.deltaY()<0&&!e.blocked.up&&t.collideDown&&e.checkCollision.up?t.faceBottom&&e.y-r<t.bottom&&(n=e.y-r-t.bottom)<-this.TILE_BIAS&&(n=0):0<e.deltaY()&&!e.blocked.down&&t.collideUp&&e.checkCollision.down&&t.faceTop&&e.bottom-r>t.top&&(n=e.bottom-r-t.top)>this.TILE_BIAS&&(n=0),0!==n&&(e.customSeparateY?e.overlapY=n:this.processTileSeparationY(e,n)),n},processTileSeparationX:function(e,t){t<0?e.blocked.left=!0:0<t&&(e.blocked.right=!0),e.position.x-=t,0===e.bounce.x?e.velocity.x=0:e.velocity.x=-e.velocity.x*e.bounce.x},processTileSeparationY:function(e,t){t<0?e.blocked.up=!0:0<t&&(e.blocked.down=!0),e.position.y-=t,0===e.bounce.y?e.velocity.y=0:e.velocity.y=-e.velocity.y*e.bounce.y}},U.Utils.mixinPrototype(U.Physics.Arcade.prototype,U.Physics.Arcade.TilemapCollision.prototype),p2.Body.prototype.parent=null,p2.Spring.prototype.parent=null,U.Physics.P2=function(e,t){this.game=e,void 0===t?t={gravity:[0,0],broadphase:new p2.SAPBroadphase}:(t.hasOwnProperty("gravity")||(t.gravity=[0,0]),t.hasOwnProperty("broadphase")||(t.broadphase=new p2.SAPBroadphase)),this.config=t,this.world=new p2.World(this.config),this.frameRate=1/60,this.useElapsedTime=!1,this.paused=!1,this.materials=[],this.gravity=new U.Physics.P2.InversePointProxy(this,this.world.gravity),this.walls={left:null,right:null,top:null,bottom:null},this.onBodyAdded=new U.Signal,this.onBodyRemoved=new U.Signal,this.onSpringAdded=new U.Signal,this.onSpringRemoved=new U.Signal,this.onConstraintAdded=new U.Signal,this.onConstraintRemoved=new U.Signal,this.onContactMaterialAdded=new U.Signal,this.onContactMaterialRemoved=new U.Signal,this.postBroadphaseCallback=null,this.callbackContext=null,this.onBeginContact=new U.Signal,this.onEndContact=new U.Signal,t.hasOwnProperty("mpx")&&t.hasOwnProperty("pxm")&&t.hasOwnProperty("mpxi")&&t.hasOwnProperty("pxmi")&&(this.mpx=t.mpx,this.mpxi=t.mpxi,this.pxm=t.pxm,this.pxmi=t.pxmi),this.world.on("beginContact",this.beginContactHandler,this),this.world.on("endContact",this.endContactHandler,this),this.collisionGroups=[],this.nothingCollisionGroup=new U.Physics.P2.CollisionGroup(1),this.boundsCollisionGroup=new U.Physics.P2.CollisionGroup(2),this.everythingCollisionGroup=new U.Physics.P2.CollisionGroup(2147483648),this.boundsCollidesWith=[],this._toRemove=[],this._collisionGroupID=2,this._boundsLeft=!0,this._boundsRight=!0,this._boundsTop=!0,this._boundsBottom=!0,this._boundsOwnGroup=!1,this.setBoundsToWorld(!0,!0,!0,!0,!1)},U.Physics.P2.prototype={removeBodyNextStep:function(e){this._toRemove.push(e)},preUpdate:function(){for(var e=this._toRemove.length;e--;)this.removeBody(this._toRemove[e]);this._toRemove.length=0},enable:function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!0);var n=1;if(Array.isArray(e))for(n=e.length;n--;)e[n]instanceof U.Group?this.enable(e[n].children,t,i):(this.enableBody(e[n],t),i&&e[n].hasOwnProperty("children")&&0<e[n].children.length&&this.enable(e[n],t,!0));else e instanceof U.Group?this.enable(e.children,t,i):(this.enableBody(e,t),i&&e.hasOwnProperty("children")&&0<e.children.length&&this.enable(e.children,t,!0))},enableBody:function(e,t){e.hasOwnProperty("body")&&null===e.body&&(e.body=new U.Physics.P2.Body(this.game,e,e.x,e.y,1),e.body.debug=t,void 0!==e.anchor&&e.anchor.set(.5))},setImpactEvents:function(e){e?this.world.on("impact",this.impactHandler,this):this.world.off("impact",this.impactHandler,this)},setPostBroadphaseCallback:function(e,t){this.postBroadphaseCallback=e,this.callbackContext=t,null!==e?this.world.on("postBroadphase",this.postBroadphaseHandler,this):this.world.off("postBroadphase",this.postBroadphaseHandler,this)},postBroadphaseHandler:function(e){if(this.postBroadphaseCallback&&0!==e.pairs.length)for(var t=e.pairs.length-2;0<=t;t-=2)e.pairs[t].parent&&e.pairs[t+1].parent&&!this.postBroadphaseCallback.call(this.callbackContext,e.pairs[t].parent,e.pairs[t+1].parent)&&e.pairs.splice(t,2)},impactHandler:function(e){if(e.bodyA.parent&&e.bodyB.parent){var t=e.bodyA.parent,i=e.bodyB.parent;t._bodyCallbacks[e.bodyB.id]&&t._bodyCallbacks[e.bodyB.id].call(t._bodyCallbackContext[e.bodyB.id],t,i,e.shapeA,e.shapeB),i._bodyCallbacks[e.bodyA.id]&&i._bodyCallbacks[e.bodyA.id].call(i._bodyCallbackContext[e.bodyA.id],i,t,e.shapeB,e.shapeA),t._groupCallbacks[e.shapeB.collisionGroup]&&t._groupCallbacks[e.shapeB.collisionGroup].call(t._groupCallbackContext[e.shapeB.collisionGroup],t,i,e.shapeA,e.shapeB),i._groupCallbacks[e.shapeA.collisionGroup]&&i._groupCallbacks[e.shapeA.collisionGroup].call(i._groupCallbackContext[e.shapeA.collisionGroup],i,t,e.shapeB,e.shapeA)}},beginContactHandler:function(e){e.bodyA&&e.bodyB&&(this.onBeginContact.dispatch(e.bodyA,e.bodyB,e.shapeA,e.shapeB,e.contactEquations),e.bodyA.parent&&e.bodyA.parent.onBeginContact.dispatch(e.bodyB.parent,e.bodyB,e.shapeA,e.shapeB,e.contactEquations),e.bodyB.parent&&e.bodyB.parent.onBeginContact.dispatch(e.bodyA.parent,e.bodyA,e.shapeB,e.shapeA,e.contactEquations))},endContactHandler:function(e){e.bodyA&&e.bodyB&&(this.onEndContact.dispatch(e.bodyA,e.bodyB,e.shapeA,e.shapeB),e.bodyA.parent&&e.bodyA.parent.onEndContact.dispatch(e.bodyB.parent,e.bodyB,e.shapeA,e.shapeB),e.bodyB.parent&&e.bodyB.parent.onEndContact.dispatch(e.bodyA.parent,e.bodyA,e.shapeB,e.shapeA))},setBoundsToWorld:function(e,t,i,n,r){this.setBounds(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,e,t,i,n,r)},setWorldMaterial:function(e,t,i,n,r){void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===r&&(r=!0),t&&this.walls.left&&(this.walls.left.shapes[0].material=e),i&&this.walls.right&&(this.walls.right.shapes[0].material=e),n&&this.walls.top&&(this.walls.top.shapes[0].material=e),r&&this.walls.bottom&&(this.walls.bottom.shapes[0].material=e)},updateBoundsCollisionGroup:function(e){void 0===e&&(e=!0);var t=e?this.boundsCollisionGroup.mask:this.everythingCollisionGroup.mask;this.walls.left&&(this.walls.left.shapes[0].collisionGroup=t),this.walls.right&&(this.walls.right.shapes[0].collisionGroup=t),this.walls.top&&(this.walls.top.shapes[0].collisionGroup=t),this.walls.bottom&&(this.walls.bottom.shapes[0].collisionGroup=t),this._boundsOwnGroup=e},setBounds:function(e,t,i,n,r,o,a,s,p){void 0===r&&(r=this._boundsLeft),void 0===o&&(o=this._boundsRight),void 0===a&&(a=this._boundsTop),void 0===s&&(s=this._boundsBottom),void 0===p&&(p=this._boundsOwnGroup),this.setupWall(r,"left",e,t,1.5707963267948966,p),this.setupWall(o,"right",e+i,t,-1.5707963267948966,p),this.setupWall(a,"top",e,t,-3.141592653589793,p),this.setupWall(s,"bottom",e,t+n,0,p),this._boundsLeft=r,this._boundsRight=o,this._boundsTop=a,this._boundsBottom=s,this._boundsOwnGroup=p},setupWall:function(e,t,i,n,r,o){e?(this.walls[t]?this.walls[t].position=[this.pxmi(i),this.pxmi(n)]:(this.walls[t]=new p2.Body({mass:0,position:[this.pxmi(i),this.pxmi(n)],angle:r}),this.walls[t].addShape(new p2.Plane),this.world.addBody(this.walls[t])),o&&(this.walls[t].shapes[0].collisionGroup=this.boundsCollisionGroup.mask)):this.walls[t]&&(this.world.removeBody(this.walls[t]),this.walls[t]=null)},pause:function(){this.paused=!0},resume:function(){this.paused=!1},update:function(){this.paused||(this.useElapsedTime?this.world.step(this.game.time.physicsElapsed):this.world.step(this.frameRate))},reset:function(){this.world.on("beginContact",this.beginContactHandler,this),this.world.on("endContact",this.endContactHandler,this),this.nothingCollisionGroup=new U.Physics.P2.CollisionGroup(1),this.boundsCollisionGroup=new U.Physics.P2.CollisionGroup(2),this.everythingCollisionGroup=new U.Physics.P2.CollisionGroup(2147483648),this._collisionGroupID=2,this.setBoundsToWorld(!0,!0,!0,!0,!1)},clear:function(){this.world.time=0,this.world.fixedStepTime=0,this.world.solver&&this.world.solver.equations.length&&this.world.solver.removeAllEquations();for(var e=this.world.constraints,t=e.length-1;0<=t;t--)this.world.removeConstraint(e[t]);var i=this.world.bodies;for(t=i.length-1;0<=t;t--)this.world.removeBody(i[t]);var n=this.world.springs;for(t=n.length-1;0<=t;t--)this.world.removeSpring(n[t]);var r=this.world.contactMaterials;for(t=r.length-1;0<=t;t--)this.world.removeContactMaterial(r[t]);this.world.off("beginContact",this.beginContactHandler,this),this.world.off("endContact",this.endContactHandler,this),this.postBroadphaseCallback=null,this.callbackContext=null,this.impactCallback=null,this.collisionGroups=[],this._toRemove=[],this.boundsCollidesWith=[],this.walls={left:null,right:null,top:null,bottom:null}},destroy:function(){this.clear(),this.game=null},addBody:function(e){return!e.data.world&&(this.world.addBody(e.data),this.onBodyAdded.dispatch(e),!0)},removeBody:function(e){return e.data.world===this.world&&(this.world.removeBody(e.data),this.onBodyRemoved.dispatch(e)),e},addSpring:function(e){return e instanceof U.Physics.P2.Spring||e instanceof U.Physics.P2.RotationalSpring?this.world.addSpring(e.data):this.world.addSpring(e),this.onSpringAdded.dispatch(e),e},removeSpring:function(e){return e instanceof U.Physics.P2.Spring||e instanceof U.Physics.P2.RotationalSpring?this.world.removeSpring(e.data):this.world.removeSpring(e),this.onSpringRemoved.dispatch(e),e},createDistanceConstraint:function(e,t,i,n,r,o){if(e=this.getBody(e),t=this.getBody(t),e&&t)return this.addConstraint(new U.Physics.P2.DistanceConstraint(this,e,t,i,n,r,o))},createGearConstraint:function(e,t,i,n){if(e=this.getBody(e),t=this.getBody(t),e&&t)return this.addConstraint(new U.Physics.P2.GearConstraint(this,e,t,i,n))},createRevoluteConstraint:function(e,t,i,n,r,o){if(e=this.getBody(e),i=this.getBody(i),e&&i)return this.addConstraint(new U.Physics.P2.RevoluteConstraint(this,e,t,i,n,r,o))},createLockConstraint:function(e,t,i,n,r){if(e=this.getBody(e),t=this.getBody(t),e&&t)return this.addConstraint(new U.Physics.P2.LockConstraint(this,e,t,i,n,r))},createPrismaticConstraint:function(e,t,i,n,r,o,a){if(e=this.getBody(e),t=this.getBody(t),e&&t)return this.addConstraint(new U.Physics.P2.PrismaticConstraint(this,e,t,i,n,r,o,a))},addConstraint:function(e){return this.world.addConstraint(e),this.onConstraintAdded.dispatch(e),e},removeConstraint:function(e){return this.world.removeConstraint(e),this.onConstraintRemoved.dispatch(e),e},addContactMaterial:function(e){return this.world.addContactMaterial(e),this.onContactMaterialAdded.dispatch(e),e},removeContactMaterial:function(e){return this.world.removeContactMaterial(e),this.onContactMaterialRemoved.dispatch(e),e},getContactMaterial:function(e,t){return this.world.getContactMaterial(e,t)},setMaterial:function(e,t){for(var i=t.length;i--;)t[i].setMaterial(e)},createMaterial:function(e,t){e=e||"";var i=new U.Physics.P2.Material(e);return this.materials.push(i),void 0!==t&&t.setMaterial(i),i},createContactMaterial:function(e,t,i){void 0===e&&(e=this.createMaterial()),void 0===t&&(t=this.createMaterial());var n=new U.Physics.P2.ContactMaterial(e,t,i);return this.addContactMaterial(n)},getBodies:function(){for(var e=[],t=this.world.bodies.length;t--;)e.push(this.world.bodies[t].parent);return e},getBody:function(e){return e instanceof p2.Body?e:e instanceof U.Physics.P2.Body?e.data:e.body&&e.body.type===U.Physics.P2JS?e.body.data:null},getSprings:function(){for(var e=[],t=this.world.springs.length;t--;)e.push(this.world.springs[t].parent);return e},getConstraints:function(){for(var e=[],t=this.world.constraints.length;t--;)e.push(this.world.constraints[t]);return e},hitTest:function(e,t,i,n){void 0===t&&(t=this.world.bodies),void 0===i&&(i=5),void 0===n&&(n=!1);for(var r=[this.pxmi(e.x),this.pxmi(e.y)],o=[],a=t.length;a--;)t[a]instanceof U.Physics.P2.Body&&(!n||t[a].data.type!==p2.Body.STATIC)?o.push(t[a].data):t[a]instanceof p2.Body&&t[a].parent&&(!n||t[a].type!==p2.Body.STATIC)?o.push(t[a]):t[a]instanceof U.Sprite&&t[a].hasOwnProperty("body")&&(!n||t[a].body.data.type!==p2.Body.STATIC)&&o.push(t[a].body.data);return this.world.hitTest(r,o,i)},toJSON:function(){return this.world.toJSON()},createCollisionGroup:function(e){var t=Math.pow(2,this._collisionGroupID);this.walls.left&&(this.walls.left.shapes[0].collisionMask=this.walls.left.shapes[0].collisionMask|t),this.walls.right&&(this.walls.right.shapes[0].collisionMask=this.walls.right.shapes[0].collisionMask|t),this.walls.top&&(this.walls.top.shapes[0].collisionMask=this.walls.top.shapes[0].collisionMask|t),this.walls.bottom&&(this.walls.bottom.shapes[0].collisionMask=this.walls.bottom.shapes[0].collisionMask|t),this._collisionGroupID++;var i=new U.Physics.P2.CollisionGroup(t);return this.collisionGroups.push(i),e&&this.setCollisionGroup(e,i),i},setCollisionGroup:function(e,t){if(e instanceof U.Group)for(var i=0;i<e.total;i++)e.children[i].body&&e.children[i].body.type===U.Physics.P2JS&&e.children[i].body.setCollisionGroup(t);else e.body.setCollisionGroup(t)},createSpring:function(e,t,i,n,r,o,a,s,p){if(e=this.getBody(e),t=this.getBody(t),e&&t)return this.addSpring(new U.Physics.P2.Spring(this,e,t,i,n,r,o,a,s,p))},createRotationalSpring:function(e,t,i,n,r){if(e=this.getBody(e),t=this.getBody(t),e&&t)return this.addSpring(new U.Physics.P2.RotationalSpring(this,e,t,i,n,r))},createBody:function(e,t,i,n,r,o){void 0===n&&(n=!1);var a=new U.Physics.P2.Body(this.game,null,e,t,i);if(o&&!a.addPolygon(r,o))return!1;return n&&this.world.addBody(a.data),a},createParticle:function(e,t,i,n,r,o){void 0===n&&(n=!1);var a=new U.Physics.P2.Body(this.game,null,e,t,i);if(o&&!a.addPolygon(r,o))return!1;return n&&this.world.addBody(a.data),a},convertCollisionObjects:function(e,t,i){void 0===i&&(i=!0);for(var n=[],r=0,o=e.collision[t].length;r<o;r++){var a=e.collision[t][r],s=this.createBody(a.x,a.y,0,i,{},a.polyline);s&&n.push(s)}return n},clearTilemapLayerBodies:function(e,t){t=e.getLayer(t);for(var i=e.layers[t].bodies.length;i--;)e.layers[t].bodies[i].destroy();e.layers[t].bodies.length=0},convertTilemap:function(e,t,i,n){t=e.getLayer(t),void 0===i&&(i=!0),void 0===n&&(n=!0),this.clearTilemapLayerBodies(e,t);for(var r=0,o=0,a=0,s=0,p=e.layers[t].height;s<p;s++)for(var l=r=0,h=e.layers[t].width;l<h;l++){var u=e.layers[t].data[s][l];if(u&&-1<u.index&&u.collides)if(n){var d=e.getTileRight(t,l,s);if(0===r&&(o=u.x*u.width,a=u.y*u.height,r=u.width),d&&d.collides)r+=u.width;else(c=this.createBody(o,a,0,!1)).addRectangle(r,u.height,r/2,u.height/2,0),i&&this.addBody(c),e.layers[t].bodies.push(c),r=0}else{var c;(c=this.createBody(u.x*u.width,u.y*u.height,0,!1)).addRectangle(u.width,u.height,u.width/2,u.height/2,0),i&&this.addBody(c),e.layers[t].bodies.push(c)}}return e.layers[t].bodies},mpx:function(e){return 20*e},pxm:function(e){return.05*e},mpxi:function(e){return-20*e},pxmi:function(e){return-.05*e}},Object.defineProperty(U.Physics.P2.prototype,"friction",{get:function(){return this.world.defaultContactMaterial.friction},set:function(e){this.world.defaultContactMaterial.friction=e}}),Object.defineProperty(U.Physics.P2.prototype,"restitution",{get:function(){return this.world.defaultContactMaterial.restitution},set:function(e){this.world.defaultContactMaterial.restitution=e}}),Object.defineProperty(U.Physics.P2.prototype,"contactMaterial",{get:function(){return this.world.defaultContactMaterial},set:function(e){this.world.defaultContactMaterial=e}}),Object.defineProperty(U.Physics.P2.prototype,"applySpringForces",{get:function(){return this.world.applySpringForces},set:function(e){this.world.applySpringForces=e}}),Object.defineProperty(U.Physics.P2.prototype,"applyDamping",{get:function(){return this.world.applyDamping},set:function(e){this.world.applyDamping=e}}),Object.defineProperty(U.Physics.P2.prototype,"applyGravity",{get:function(){return this.world.applyGravity},set:function(e){this.world.applyGravity=e}}),Object.defineProperty(U.Physics.P2.prototype,"solveConstraints",{get:function(){return this.world.solveConstraints},set:function(e){this.world.solveConstraints=e}}),Object.defineProperty(U.Physics.P2.prototype,"time",{get:function(){return this.world.time}}),Object.defineProperty(U.Physics.P2.prototype,"emitImpactEvent",{get:function(){return this.world.emitImpactEvent},set:function(e){this.world.emitImpactEvent=e}}),Object.defineProperty(U.Physics.P2.prototype,"sleepMode",{get:function(){return this.world.sleepMode},set:function(e){this.world.sleepMode=e}}),Object.defineProperty(U.Physics.P2.prototype,"total",{get:function(){return this.world.bodies.length}}),U.Physics.P2.FixtureList=function(e){Array.isArray(e)||(e=[e]),this.rawList=e,this.init(),this.parse(this.rawList)},U.Physics.P2.FixtureList.prototype={init:function(){this.namedFixtures={},this.groupedFixtures=[],this.allFixtures=[]},setCategory:function(t,e){this.getFixtures(e).forEach(function(e){e.collisionGroup=t})},setMask:function(t,e){this.getFixtures(e).forEach(function(e){e.collisionMask=t})},setSensor:function(t,e){this.getFixtures(e).forEach(function(e){e.sensor=t})},setMaterial:function(t,e){this.getFixtures(e).forEach(function(e){e.material=t})},getFixtures:function(e){var t=[];if(e){e instanceof Array||(e=[e]);var i=this;return e.forEach(function(e){i.namedFixtures[e]&&t.push(i.namedFixtures[e])}),this.flatten(t)}return this.allFixtures},getFixtureByKey:function(e){return this.namedFixtures[e]},getGroup:function(e){return this.groupedFixtures[e]},parse:function(){var e,t,i,n;for(e in n=[],i=this.rawList)t=i[e],isNaN(e-0)?this.namedFixtures[e]=this.flatten(t):(this.groupedFixtures[e]=this.groupedFixtures[e]||[],this.groupedFixtures[e]=this.groupedFixtures[e].concat(t)),n.push(this.allFixtures=this.flatten(this.groupedFixtures))},flatten:function(e){var t,i;return t=[],i=arguments.callee,e.forEach(function(e){return Array.prototype.push.apply(t,Array.isArray(e)?i(e):[e])}),t}},U.Physics.P2.PointProxy=function(e,t){this.world=e,this.destination=t},U.Physics.P2.PointProxy.prototype.constructor=U.Physics.P2.PointProxy,Object.defineProperty(U.Physics.P2.PointProxy.prototype,"x",{get:function(){return this.world.mpx(this.destination[0])},set:function(e){this.destination[0]=this.world.pxm(e)}}),Object.defineProperty(U.Physics.P2.PointProxy.prototype,"y",{get:function(){return this.world.mpx(this.destination[1])},set:function(e){this.destination[1]=this.world.pxm(e)}}),Object.defineProperty(U.Physics.P2.PointProxy.prototype,"mx",{get:function(){return this.destination[0]},set:function(e){this.destination[0]=e}}),Object.defineProperty(U.Physics.P2.PointProxy.prototype,"my",{get:function(){return this.destination[1]},set:function(e){this.destination[1]=e}}),U.Physics.P2.InversePointProxy=function(e,t){this.world=e,this.destination=t},U.Physics.P2.InversePointProxy.prototype.constructor=U.Physics.P2.InversePointProxy,Object.defineProperty(U.Physics.P2.InversePointProxy.prototype,"x",{get:function(){return this.world.mpxi(this.destination[0])},set:function(e){this.destination[0]=this.world.pxmi(e)}}),Object.defineProperty(U.Physics.P2.InversePointProxy.prototype,"y",{get:function(){return this.world.mpxi(this.destination[1])},set:function(e){this.destination[1]=this.world.pxmi(e)}}),Object.defineProperty(U.Physics.P2.InversePointProxy.prototype,"mx",{get:function(){return this.destination[0]},set:function(e){this.destination[0]=-e}}),Object.defineProperty(U.Physics.P2.InversePointProxy.prototype,"my",{get:function(){return this.destination[1]},set:function(e){this.destination[1]=-e}}),U.Physics.P2.Body=function(e,t,i,n,r){t=t||null,i=i||0,n=n||0,void 0===r&&(r=1),this.game=e,this.world=e.physics.p2,this.sprite=t,this.type=U.Physics.P2JS,this.offset=new U.Point,this.data=new p2.Body({position:[this.world.pxmi(i),this.world.pxmi(n)],mass:r}),(this.data.parent=this).velocity=new U.Physics.P2.InversePointProxy(this.world,this.data.velocity),this.force=new U.Physics.P2.InversePointProxy(this.world,this.data.force),this.gravity=new U.Point,this.onBeginContact=new U.Signal,this.onEndContact=new U.Signal,this.collidesWith=[],this.removeNextStep=!1,this.debugBody=null,this.dirty=!1,this._collideWorldBounds=!0,this._bodyCallbacks={},this._bodyCallbackContext={},this._groupCallbacks={},this._groupCallbackContext={},this._reset=!1,t&&(this.setRectangleFromSprite(t),t.exists&&this.game.physics.p2.addBody(this))},U.Physics.P2.Body.prototype={createBodyCallback:function(e,t,i){var n=-1;e.id?n=e.id:e.body&&(n=e.body.id),-1<n&&(null===t?(delete this._bodyCallbacks[n],delete this._bodyCallbackContext[n]):(this._bodyCallbacks[n]=t,this._bodyCallbackContext[n]=i))},createGroupCallback:function(e,t,i){null===t?(delete this._groupCallbacks[e.mask],delete this._groupCallbackContext[e.mask]):(this._groupCallbacks[e.mask]=t,this._groupCallbackContext[e.mask]=i)},getCollisionMask:function(){var e=0;this._collideWorldBounds&&(e=this.game.physics.p2.boundsCollisionGroup.mask);for(var t=0;t<this.collidesWith.length;t++)e|=this.collidesWith[t].mask;return e},updateCollisionMask:function(e){var t=this.getCollisionMask();if(void 0===e)for(var i=this.data.shapes.length-1;0<=i;i--)this.data.shapes[i].collisionMask=t;else e.collisionMask=t},setCollisionGroup:function(e,t){var i=this.getCollisionMask();if(void 0===t)for(var n=this.data.shapes.length-1;0<=n;n--)this.data.shapes[n].collisionGroup=e.mask,this.data.shapes[n].collisionMask=i;else t.collisionGroup=e.mask,t.collisionMask=i},clearCollision:function(e,t,i){if(void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===i)for(var n=this.data.shapes.length-1;0<=n;n--)e&&(this.data.shapes[n].collisionGroup=null),t&&(this.data.shapes[n].collisionMask=null);else e&&(i.collisionGroup=null),t&&(i.collisionMask=null);e&&(this.collidesWith.length=0)},removeCollisionGroup:function(e,t,i){var n;if(void 0===t&&(t=!0),Array.isArray(e))for(var r=0;r<e.length;r++)-1<(n=this.collidesWith.indexOf(e[r]))&&(this.collidesWith.splice(n,1),t&&(delete this._groupCallbacks[e.mask],delete this._groupCallbackContext[e.mask]));else-1<(n=this.collidesWith.indexOf(e))&&(this.collidesWith.splice(n,1),t&&(delete this._groupCallbacks[e.mask],delete this._groupCallbackContext[e.mask]));var o=this.getCollisionMask();if(void 0===i)for(r=this.data.shapes.length-1;0<=r;r--)this.data.shapes[r].collisionMask=o;else i.collisionMask=o},collides:function(e,t,i,n){if(Array.isArray(e))for(var r=0;r<e.length;r++)-1===this.collidesWith.indexOf(e[r])&&(this.collidesWith.push(e[r]),t&&this.createGroupCallback(e[r],t,i));else-1===this.collidesWith.indexOf(e)&&(this.collidesWith.push(e),t&&this.createGroupCallback(e,t,i));var o=this.getCollisionMask();if(void 0===n)for(r=this.data.shapes.length-1;0<=r;r--)this.data.shapes[r].collisionMask=o;else n.collisionMask=o},adjustCenterOfMass:function(){this.data.adjustCenterOfMass(),this.shapeChanged()},getVelocityAtPoint:function(e,t){return this.data.getVelocityAtPoint(e,t)},applyDamping:function(e){this.data.applyDamping(e)},applyImpulse:function(e,t,i){this.data.applyImpulse(e,[this.world.pxmi(t),this.world.pxmi(i)])},applyImpulseLocal:function(e,t,i){this.data.applyImpulseLocal(e,[this.world.pxmi(t),this.world.pxmi(i)])},applyForce:function(e,t,i){this.data.applyForce(e,[this.world.pxmi(t),this.world.pxmi(i)])},setZeroForce:function(){this.data.setZeroForce()},setZeroRotation:function(){this.data.angularVelocity=0},setZeroVelocity:function(){this.data.velocity[0]=0,this.data.velocity[1]=0},setZeroDamping:function(){this.data.damping=0,this.data.angularDamping=0},toLocalFrame:function(e,t){return this.data.toLocalFrame(e,t)},toWorldFrame:function(e,t){return this.data.toWorldFrame(e,t)},rotateLeft:function(e){this.data.angularVelocity=this.world.pxm(-e)},rotateRight:function(e){this.data.angularVelocity=this.world.pxm(e)},moveForward:function(e){var t=this.world.pxmi(-e),i=this.data.angle+Math.PI/2;this.data.velocity[0]=t*Math.cos(i),this.data.velocity[1]=t*Math.sin(i)},moveBackward:function(e){var t=this.world.pxmi(-e),i=this.data.angle+Math.PI/2;this.data.velocity[0]=-t*Math.cos(i),this.data.velocity[1]=-t*Math.sin(i)},thrust:function(e){var t=this.world.pxmi(-e),i=this.data.angle+Math.PI/2;this.data.force[0]+=t*Math.cos(i),this.data.force[1]+=t*Math.sin(i)},thrustLeft:function(e){var t=this.world.pxmi(-e),i=this.data.angle;this.data.force[0]+=t*Math.cos(i),this.data.force[1]+=t*Math.sin(i)},thrustRight:function(e){var t=this.world.pxmi(-e),i=this.data.angle;this.data.force[0]-=t*Math.cos(i),this.data.force[1]-=t*Math.sin(i)},reverse:function(e){var t=this.world.pxmi(-e),i=this.data.angle+Math.PI/2;this.data.force[0]-=t*Math.cos(i),this.data.force[1]-=t*Math.sin(i)},moveLeft:function(e){this.data.velocity[0]=this.world.pxmi(-e)},moveRight:function(e){this.data.velocity[0]=this.world.pxmi(e)},moveUp:function(e){this.data.velocity[1]=this.world.pxmi(-e)},moveDown:function(e){this.data.velocity[1]=this.world.pxmi(e)},preUpdate:function(){this.dirty=!0,this.removeNextStep&&(this.removeFromWorld(),this.removeNextStep=!1)},postUpdate:function(){this.sprite.x=this.world.mpxi(this.data.position[0])+this.offset.x,this.sprite.y=this.world.mpxi(this.data.position[1])+this.offset.y,this.fixedRotation||(this.sprite.rotation=this.data.angle),this.debugBody&&this.debugBody.updateSpriteTransform(),this.dirty=!1},reset:function(e,t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),this.setZeroForce(),this.setZeroVelocity(),this.setZeroRotation(),i&&this.setZeroDamping(),n&&(this.mass=1),this.x=e,this.y=t},addToWorld:function(){if(this.game.physics.p2._toRemove)for(var e=0;e<this.game.physics.p2._toRemove.length;e++)this.game.physics.p2._toRemove[e]===this&&this.game.physics.p2._toRemove.splice(e,1);this.data.world!==this.game.physics.p2.world&&this.game.physics.p2.addBody(this)},removeFromWorld:function(){this.data.world===this.game.physics.p2.world&&this.game.physics.p2.removeBodyNextStep(this)},destroy:function(){this.removeFromWorld(),this.clearShapes(),this._bodyCallbacks={},this._bodyCallbackContext={},this._groupCallbacks={},this._groupCallbackContext={},this.debugBody&&this.debugBody.destroy(!0,!0),this.debugBody=null,this.sprite&&(this.sprite.body=null,this.sprite=null)},clearShapes:function(){for(var e=this.data.shapes.length;e--;)this.data.removeShape(this.data.shapes[e]);this.shapeChanged()},addShape:function(e,t,i,n){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),this.data.addShape(e,[this.world.pxmi(t),this.world.pxmi(i)],n),this.shapeChanged(),e},addCircle:function(e,t,i,n){var r=new p2.Circle({radius:this.world.pxm(e)});return this.addShape(r,t,i,n)},addRectangle:function(e,t,i,n,r){var o=new p2.Box({width:this.world.pxm(e),height:this.world.pxm(t)});return this.addShape(o,i,n,r)},addPlane:function(e,t,i){var n=new p2.Plane;return this.addShape(n,e,t,i)},addParticle:function(e,t,i){var n=new p2.Particle;return this.addShape(n,e,t,i)},addLine:function(e,t,i,n){var r=new p2.Line({length:this.world.pxm(e)});return this.addShape(r,t,i,n)},addCapsule:function(e,t,i,n,r){var o=new p2.Capsule({length:this.world.pxm(e),radius:this.world.pxm(t)});return this.addShape(o,i,n,r)},addPolygon:function(e,t){e=e||{},Array.isArray(t)||(t=Array.prototype.slice.call(arguments,1));var i=[];if(1===t.length&&Array.isArray(t[0]))i=t[0].slice(0);else if(Array.isArray(t[0]))i=t.slice();else if("number"==typeof t[0])for(var n=0,r=t.length;n<r;n+=2)i.push([t[n],t[n+1]]);var o=i.length-1;i[o][0]===i[0][0]&&i[o][1]===i[0][1]&&i.pop();for(var a=0;a<i.length;a++)i[a][0]=this.world.pxmi(i[a][0]),i[a][1]=this.world.pxmi(i[a][1]);var s=this.data.fromPolygon(i,e);return this.shapeChanged(),s},removeShape:function(e){var t=this.data.removeShape(e);return this.shapeChanged(),t},setCircle:function(e,t,i,n){return this.clearShapes(),this.addCircle(e,t,i,n)},setRectangle:function(e,t,i,n,r){return void 0===e&&(e=16),void 0===t&&(t=16),this.clearShapes(),this.addRectangle(e,t,i,n,r)},setRectangleFromSprite:function(e){return void 0===e&&(e=this.sprite),this.clearShapes(),this.addRectangle(e.width,e.height,0,0,e.rotation)},setMaterial:function(e,t){if(void 0===t)for(var i=this.data.shapes.length-1;0<=i;i--)this.data.shapes[i].material=e;else t.material=e},shapeChanged:function(){this.debugBody&&this.debugBody.draw()},addPhaserPolygon:function(e,t){for(var i=this.game.cache.getPhysicsData(e,t),n=[],r=0;r<i.length;r++){var o=i[r],a=this.addFixture(o);n[o.filter.group]=n[o.filter.group]||[],n[o.filter.group]=n[o.filter.group].concat(a),o.fixtureKey&&(n[o.fixtureKey]=a)}return this.data.aabbNeedsUpdate=!0,this.shapeChanged(),n},addFixture:function(e){var t=[];if(e.circle){(l=new p2.Circle({radius:this.world.pxm(e.circle.radius)})).collisionGroup=e.filter.categoryBits,l.collisionMask=e.filter.maskBits,l.sensor=e.isSensor;var i=p2.vec2.create();i[0]=this.world.pxmi(e.circle.position[0]-this.sprite.width/2),i[1]=this.world.pxmi(e.circle.position[1]-this.sprite.height/2),this.data.addShape(l,i),t.push(l)}else for(var n=e.polygons,r=p2.vec2.create(),o=0;o<n.length;o++){for(var a=n[o],s=[],p=0;p<a.length;p+=2)s.push([this.world.pxmi(a[p]),this.world.pxmi(a[p+1])]);for(var l=new p2.Convex({vertices:s}),h=0;h!==l.vertices.length;h++){var u=l.vertices[h];p2.vec2.sub(u,u,l.centerOfMass)}p2.vec2.scale(r,l.centerOfMass,1),r[0]-=this.world.pxmi(this.sprite.width/2),r[1]-=this.world.pxmi(this.sprite.height/2),l.updateTriangles(),l.updateCenterOfMass(),l.updateBoundingRadius(),l.collisionGroup=e.filter.categoryBits,l.collisionMask=e.filter.maskBits,l.sensor=e.isSensor,this.data.addShape(l,r),t.push(l)}return t},loadPolygon:function(e,t){if(null===e)var i=t;else i=this.game.cache.getPhysicsData(e,t);for(var n=p2.vec2.create(),r=0;r<i.length;r++){for(var o=[],a=0;a<i[r].shape.length;a+=2)o.push([this.world.pxmi(i[r].shape[a]),this.world.pxmi(i[r].shape[a+1])]);for(var s=new p2.Convex({vertices:o}),p=0;p!==s.vertices.length;p++){var l=s.vertices[p];p2.vec2.sub(l,l,s.centerOfMass)}p2.vec2.scale(n,s.centerOfMass,1),n[0]-=this.world.pxmi(this.sprite.width/2),n[1]-=this.world.pxmi(this.sprite.height/2),s.updateTriangles(),s.updateCenterOfMass(),s.updateBoundingRadius(),this.data.addShape(s,n)}return this.data.aabbNeedsUpdate=!0,this.shapeChanged(),!0}},U.Physics.P2.Body.prototype.constructor=U.Physics.P2.Body,U.Physics.P2.Body.DYNAMIC=1,U.Physics.P2.Body.STATIC=2,U.Physics.P2.Body.KINEMATIC=4,Object.defineProperty(U.Physics.P2.Body.prototype,"static",{get:function(){return this.data.type===U.Physics.P2.Body.STATIC},set:function(e){e&&this.data.type!==U.Physics.P2.Body.STATIC?(this.data.type=U.Physics.P2.Body.STATIC,this.mass=0):e||this.data.type!==U.Physics.P2.Body.STATIC||(this.data.type=U.Physics.P2.Body.DYNAMIC,this.mass=1)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"dynamic",{get:function(){return this.data.type===U.Physics.P2.Body.DYNAMIC},set:function(e){e&&this.data.type!==U.Physics.P2.Body.DYNAMIC?(this.data.type=U.Physics.P2.Body.DYNAMIC,this.mass=1):e||this.data.type!==U.Physics.P2.Body.DYNAMIC||(this.data.type=U.Physics.P2.Body.STATIC,this.mass=0)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"kinematic",{get:function(){return this.data.type===U.Physics.P2.Body.KINEMATIC},set:function(e){e&&this.data.type!==U.Physics.P2.Body.KINEMATIC?(this.data.type=U.Physics.P2.Body.KINEMATIC,this.mass=4):e||this.data.type!==U.Physics.P2.Body.KINEMATIC||(this.data.type=U.Physics.P2.Body.STATIC,this.mass=0)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"allowSleep",{get:function(){return this.data.allowSleep},set:function(e){e!==this.data.allowSleep&&(this.data.allowSleep=e)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"angle",{get:function(){return U.Math.wrapAngle(U.Math.radToDeg(this.data.angle))},set:function(e){this.data.angle=U.Math.degToRad(U.Math.wrapAngle(e))}}),Object.defineProperty(U.Physics.P2.Body.prototype,"angularDamping",{get:function(){return this.data.angularDamping},set:function(e){this.data.angularDamping=e}}),Object.defineProperty(U.Physics.P2.Body.prototype,"angularForce",{get:function(){return this.data.angularForce},set:function(e){this.data.angularForce=e}}),Object.defineProperty(U.Physics.P2.Body.prototype,"angularVelocity",{get:function(){return this.data.angularVelocity},set:function(e){this.data.angularVelocity=e}}),Object.defineProperty(U.Physics.P2.Body.prototype,"damping",{get:function(){return this.data.damping},set:function(e){this.data.damping=e}}),Object.defineProperty(U.Physics.P2.Body.prototype,"fixedRotation",{get:function(){return this.data.fixedRotation},set:function(e){e!==this.data.fixedRotation&&(this.data.fixedRotation=e)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"inertia",{get:function(){return this.data.inertia},set:function(e){this.data.inertia=e}}),Object.defineProperty(U.Physics.P2.Body.prototype,"mass",{get:function(){return this.data.mass},set:function(e){e!==this.data.mass&&(this.data.mass=e,this.data.updateMassProperties())}}),Object.defineProperty(U.Physics.P2.Body.prototype,"motionState",{get:function(){return this.data.type},set:function(e){e!==this.data.type&&(this.data.type=e)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"rotation",{get:function(){return this.data.angle},set:function(e){this.data.angle=e}}),Object.defineProperty(U.Physics.P2.Body.prototype,"sleepSpeedLimit",{get:function(){return this.data.sleepSpeedLimit},set:function(e){this.data.sleepSpeedLimit=e}}),Object.defineProperty(U.Physics.P2.Body.prototype,"x",{get:function(){return this.world.mpxi(this.data.position[0])},set:function(e){this.data.position[0]=this.world.pxmi(e)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"y",{get:function(){return this.world.mpxi(this.data.position[1])},set:function(e){this.data.position[1]=this.world.pxmi(e)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"id",{get:function(){return this.data.id}}),Object.defineProperty(U.Physics.P2.Body.prototype,"debug",{get:function(){return null!==this.debugBody},set:function(e){e&&!this.debugBody?this.debugBody=new U.Physics.P2.BodyDebug(this.game,this.data):!e&&this.debugBody&&(this.debugBody.destroy(),this.debugBody=null)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"collideWorldBounds",{get:function(){return this._collideWorldBounds},set:function(e){e&&!this._collideWorldBounds?(this._collideWorldBounds=!0,this.updateCollisionMask()):!e&&this._collideWorldBounds&&(this._collideWorldBounds=!1,this.updateCollisionMask())}}),U.Physics.P2.BodyDebug=function(e,t,i){U.Group.call(this,e);var n={pixelsPerLengthUnit:e.physics.p2.mpx(1),debugPolygons:!1,lineWidth:1,alpha:.5};this.settings=U.Utils.extend(n,i),this.ppu=this.settings.pixelsPerLengthUnit,this.ppu=-1*this.ppu,this.body=t,this.canvas=new U.Graphics(e),this.canvas.alpha=this.settings.alpha,this.add(this.canvas),this.draw(),this.updateSpriteTransform()},U.Physics.P2.BodyDebug.prototype=Object.create(U.Group.prototype),U.Physics.P2.BodyDebug.prototype.constructor=U.Physics.P2.BodyDebug,U.Utils.extend(U.Physics.P2.BodyDebug.prototype,{updateSpriteTransform:function(){this.position.x=this.body.position[0]*this.ppu,this.position.y=this.body.position[1]*this.ppu,this.rotation=this.body.angle},draw:function(){var e,t,i,n,r,o,a,s,p,l,h,u,d,c,_;if(s=this.body,(l=this.canvas).clear(),i=parseInt(this.randomPastelHex(),16),o=16711680,a=this.lineWidth,s instanceof p2.Body&&s.shapes.length){var y=s.shapes.length;for(n=0;n!==y;){if(p=(t=s.shapes[n]).position||0,e=t.angle||0,t instanceof p2.Circle)this.drawCircle(l,p[0]*this.ppu,p[1]*this.ppu,e,t.radius*this.ppu,i,a);else if(t instanceof p2.Capsule)this.drawCapsule(l,p[0]*this.ppu,p[1]*this.ppu,e,t.length*this.ppu,t.radius*this.ppu,o,i,a);else if(t instanceof p2.Plane)this.drawPlane(l,p[0]*this.ppu,-p[1]*this.ppu,i,o,5*a,10*a,10*a,100*this.ppu,e);else if(t instanceof p2.Line)this.drawLine(l,t.length*this.ppu,o,a);else if(t instanceof p2.Box)this.drawRectangle(l,p[0]*this.ppu,p[1]*this.ppu,e,t.width*this.ppu,t.height*this.ppu,o,i,a);else if(t instanceof p2.Convex){for(u=[],d=p2.vec2.create(),r=c=0,_=t.vertices.length;0<=_?c<_:_<c;r=0<=_?++c:--c)h=t.vertices[r],p2.vec2.rotate(d,h,e),u.push([(d[0]+p[0])*this.ppu,-(d[1]+p[1])*this.ppu]);this.drawConvex(l,u,t.triangles,o,i,a,this.settings.debugPolygons,[p[0]*this.ppu,-p[1]*this.ppu])}n++}}},drawRectangle:function(e,t,i,n,r,o,a,s,p){void 0===p&&(p=1),void 0===a&&(a=0),e.lineStyle(p,a,1),e.beginFill(s),e.drawRect(t-r/2,i-o/2,r,o)},drawCircle:function(e,t,i,n,r,o,a){void 0===a&&(a=1),void 0===o&&(o=16777215),e.lineStyle(a,0,1),e.beginFill(o,1),e.drawCircle(t,i,2*-r),e.endFill(),e.moveTo(t,i),e.lineTo(t+r*Math.cos(-n),i+r*Math.sin(-n))},drawLine:function(e,t,i,n){void 0===n&&(n=1),void 0===i&&(i=0),e.lineStyle(5*n,i,1),e.moveTo(-t/2,0),e.lineTo(t/2,0)},drawConvex:function(e,t,i,n,r,o,a,s){var p,l,h,u,d,c,_,y,x,m,g;if(void 0===o&&(o=1),void 0===n&&(n=0),a){for(p=[16711680,65280,255],l=0;l!==t.length+1;)u=t[l%t.length],d=t[(l+1)%t.length],_=u[0],m=u[1],y=d[0],g=d[1],e.lineStyle(o,p[l%p.length],1),e.moveTo(_,-m),e.lineTo(y,-g),e.drawCircle(_,-m,2*o),l++;return e.lineStyle(o,0,1),e.drawCircle(s[0],s[1],2*o)}for(e.lineStyle(o,n,1),e.beginFill(r),l=0;l!==t.length;)c=(h=t[l])[0],x=h[1],0===l?e.moveTo(c,-x):e.lineTo(c,-x),l++;if(e.endFill(),2<t.length)return e.moveTo(t[t.length-1][0],-t[t.length-1][1]),e.lineTo(t[0][0],-t[0][1])},drawPath:function(e,t,i,n,r){var o,a,s,p,l,h,u,d,c,_,y;for(void 0===r&&(r=1),void 0===i&&(i=0),e.lineStyle(r,i,1),"number"==typeof n&&e.beginFill(n),s=a=null,o=0;o<t.length;)_=(c=t[o])[0],y=c[1],_===a&&y===s||(0===o?e.moveTo(_,y):(p=a,l=s,h=_,u=y,d=t[(o+1)%t.length][0],0!==(h-p)*(t[(o+1)%t.length][1]-l)-(d-p)*(u-l)&&e.lineTo(_,y)),a=_,s=y),o++;"number"==typeof n&&e.endFill(),2<t.length&&"number"==typeof n&&(e.moveTo(t[t.length-1][0],t[t.length-1][1]),e.lineTo(t[0][0],t[0][1]))},drawPlane:function(e,t,i,n,r,o,a,s,p,l){var h,u;void 0===o&&(o=1),void 0===n&&(n=16777215),e.lineStyle(o,r,11),e.beginFill(n),e.moveTo(t,-i),h=t+Math.cos(l)*this.game.width,u=i+Math.sin(l)*this.game.height,e.lineTo(h,-u),e.moveTo(t,-i),h=t+Math.cos(l)*-this.game.width,u=i+Math.sin(l)*-this.game.height,e.lineTo(h,-u)},drawCapsule:function(e,t,i,n,r,o,a,s,p){void 0===p&&(p=1),void 0===a&&(a=0),e.lineStyle(p,a,1);var l=Math.cos(n),h=Math.sin(n);e.beginFill(s,1),e.drawCircle(-r/2*l+t,-r/2*h+i,2*-o),e.drawCircle(r/2*l+t,r/2*h+i,2*-o),e.endFill(),e.lineStyle(p,a,0),e.beginFill(s,1),e.moveTo(-r/2*l+o*h+t,-r/2*h+o*l+i),e.lineTo(r/2*l+o*h+t,r/2*h+o*l+i),e.lineTo(r/2*l-o*h+t,r/2*h-o*l+i),e.lineTo(-r/2*l-o*h+t,-r/2*h-o*l+i),e.endFill(),e.lineStyle(p,a,1),e.moveTo(-r/2*l+o*h+t,-r/2*h+o*l+i),e.lineTo(r/2*l+o*h+t,r/2*h+o*l+i),e.moveTo(-r/2*l-o*h+t,-r/2*h-o*l+i),e.lineTo(r/2*l-o*h+t,r/2*h-o*l+i)},randomPastelHex:function(){var e,t,i,n;return i=[255,255,255],n=Math.floor(256*Math.random()),t=Math.floor(256*Math.random()),e=Math.floor(256*Math.random()),n=Math.floor((n+3*i[0])/4),t=Math.floor((t+3*i[1])/4),e=Math.floor((e+3*i[2])/4),this.rgbToHex(n,t,e)},rgbToHex:function(e,t,i){return this.componentToHex(e)+this.componentToHex(t)+this.componentToHex(i)},componentToHex:function(e){var t;return 2===(t=e.toString(16)).length?t:t+"0"}}),U.Physics.P2.Spring=function(e,t,i,n,r,o,a,s,p,l){this.game=e.game,void 0===n&&(n=1),void 0===r&&(r=100),void 0===o&&(o=1);var h={restLength:n=(this.world=e).pxm(n),stiffness:r,damping:o};null!=a&&(h.worldAnchorA=[e.pxm(a[0]),e.pxm(a[1])]),null!=s&&(h.worldAnchorB=[e.pxm(s[0]),e.pxm(s[1])]),null!=p&&(h.localAnchorA=[e.pxm(p[0]),e.pxm(p[1])]),null!=l&&(h.localAnchorB=[e.pxm(l[0]),e.pxm(l[1])]),this.data=new p2.LinearSpring(t,i,h),this.data.parent=this},U.Physics.P2.Spring.prototype.constructor=U.Physics.P2.Spring,U.Physics.P2.RotationalSpring=function(e,t,i,n,r,o){this.game=e.game,this.world=e,void 0===n&&(n=null),void 0===r&&(r=100),void 0===o&&(o=1),n&&(n=e.pxm(n));var a={restAngle:n,stiffness:r,damping:o};this.data=new p2.RotationalSpring(t,i,a),this.data.parent=this},U.Physics.P2.Spring.prototype.constructor=U.Physics.P2.Spring,U.Physics.P2.Material=function(e){this.name=e,p2.Material.call(this)},U.Physics.P2.Material.prototype=Object.create(p2.Material.prototype),U.Physics.P2.Material.prototype.constructor=U.Physics.P2.Material,U.Physics.P2.ContactMaterial=function(e,t,i){p2.ContactMaterial.call(this,e,t,i)},U.Physics.P2.ContactMaterial.prototype=Object.create(p2.ContactMaterial.prototype),U.Physics.P2.ContactMaterial.prototype.constructor=U.Physics.P2.ContactMaterial,U.Physics.P2.CollisionGroup=function(e){this.mask=e},U.Physics.P2.DistanceConstraint=function(e,t,i,n,r,o,a){void 0===n&&(n=100),void 0===r&&(r=[0,0]),void 0===o&&(o=[0,0]),void 0===a&&(a=Number.MAX_VALUE),this.game=e.game;var s={distance:n=(this.world=e).pxm(n),localAnchorA:r=[e.pxmi(r[0]),e.pxmi(r[1])],localAnchorB:o=[e.pxmi(o[0]),e.pxmi(o[1])],maxForce:a};p2.DistanceConstraint.call(this,t,i,s)},U.Physics.P2.DistanceConstraint.prototype=Object.create(p2.DistanceConstraint.prototype),U.Physics.P2.DistanceConstraint.prototype.constructor=U.Physics.P2.DistanceConstraint,U.Physics.P2.GearConstraint=function(e,t,i,n,r){void 0===n&&(n=0),void 0===r&&(r=1),this.game=e.game,this.world=e;var o={angle:n,ratio:r};p2.GearConstraint.call(this,t,i,o)},U.Physics.P2.GearConstraint.prototype=Object.create(p2.GearConstraint.prototype),U.Physics.P2.GearConstraint.prototype.constructor=U.Physics.P2.GearConstraint,U.Physics.P2.LockConstraint=function(e,t,i,n,r,o){void 0===n&&(n=[0,0]),void 0===r&&(r=0),void 0===o&&(o=Number.MAX_VALUE),this.game=e.game;var a={localOffsetB:n=[(this.world=e).pxm(n[0]),e.pxm(n[1])],localAngleB:r,maxForce:o};p2.LockConstraint.call(this,t,i,a)},U.Physics.P2.LockConstraint.prototype=Object.create(p2.LockConstraint.prototype),U.Physics.P2.LockConstraint.prototype.constructor=U.Physics.P2.LockConstraint,U.Physics.P2.PrismaticConstraint=function(e,t,i,n,r,o,a,s){void 0===n&&(n=!0),void 0===r&&(r=[0,0]),void 0===o&&(o=[0,0]),void 0===a&&(a=[0,0]),void 0===s&&(s=Number.MAX_VALUE),this.game=e.game;var p={localAnchorA:r=[(this.world=e).pxmi(r[0]),e.pxmi(r[1])],localAnchorB:o=[e.pxmi(o[0]),e.pxmi(o[1])],localAxisA:a,maxForce:s,disableRotationalLock:!n};p2.PrismaticConstraint.call(this,t,i,p)},U.Physics.P2.PrismaticConstraint.prototype=Object.create(p2.PrismaticConstraint.prototype),U.Physics.P2.PrismaticConstraint.prototype.constructor=U.Physics.P2.PrismaticConstraint,U.Physics.P2.RevoluteConstraint=function(e,t,i,n,r,o,a){void 0===o&&(o=Number.MAX_VALUE),void 0===a&&(a=null),this.game=e.game,i=[(this.world=e).pxmi(i[0]),e.pxmi(i[1])],r=[e.pxmi(r[0]),e.pxmi(r[1])],a&&(a=[e.pxmi(a[0]),e.pxmi(a[1])]);var s={worldPivot:a,localPivotA:i,localPivotB:r,maxForce:o};p2.RevoluteConstraint.call(this,t,n,s)},U.Physics.P2.RevoluteConstraint.prototype=Object.create(p2.RevoluteConstraint.prototype),U.Physics.P2.RevoluteConstraint.prototype.constructor=U.Physics.P2.RevoluteConstraint,U.ImageCollection=function(e,t,i,n,r,o,a){(void 0===i||i<=0)&&(i=32),(void 0===n||n<=0)&&(n=32),void 0===r&&(r=0),void 0===o&&(o=0),this.name=e,this.firstgid=0|t,this.imageWidth=0|i,this.imageHeight=0|n,this.imageMargin=0|r,this.imageSpacing=0|o,this.properties=a||{},this.images=[],this.total=0},U.ImageCollection.prototype={containsImageIndex:function(e){return e>=this.firstgid&&e<this.firstgid+this.total},addImage:function(e,t){this.images.push({gid:e,image:t}),this.total++}},U.ImageCollection.prototype.constructor=U.ImageCollection,U.Tile=function(e,t,i,n,r,o){this.layer=e,this.index=t,this.x=i,this.y=n,this.rotation=0,this.flipped=!1,this.worldX=i*r,this.worldY=n*o,this.width=r,this.height=o,this.centerX=Math.abs(r/2),this.centerY=Math.abs(o/2),this.alpha=1,this.properties={},this.scanned=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.collisionCallback=null,this.collisionCallbackContext=this},U.Tile.prototype={containsPoint:function(e,t){return!(e<this.worldX||t<this.worldY||e>this.right||t>this.bottom)},intersects:function(e,t,i,n){return!(i<=this.worldX)&&(!(n<=this.worldY)&&(!(e>=this.worldX+this.width)&&!(t>=this.worldY+this.height)))},setCollisionCallback:function(e,t){this.collisionCallback=e,this.collisionCallbackContext=t},destroy:function(){this.collisionCallback=null,this.collisionCallbackContext=null,this.properties=null},setCollision:function(e,t,i,n){this.collideLeft=e,this.collideRight=t,this.collideUp=i,this.collideDown=n,this.faceLeft=e,this.faceRight=t,this.faceTop=i,this.faceBottom=n},resetCollision:function(){this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1},isInteresting:function(e,t){return e&&t?this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.faceTop||this.faceBottom||this.faceLeft||this.faceRight||this.collisionCallback:e?this.collideLeft||this.collideRight||this.collideUp||this.collideDown:!!t&&(this.faceTop||this.faceBottom||this.faceLeft||this.faceRight)},copy:function(e){this.index=e.index,this.alpha=e.alpha,this.properties=e.properties,this.collideUp=e.collideUp,this.collideDown=e.collideDown,this.collideLeft=e.collideLeft,this.collideRight=e.collideRight,this.collisionCallback=e.collisionCallback,this.collisionCallbackContext=e.collisionCallbackContext}},U.Tile.prototype.constructor=U.Tile,Object.defineProperty(U.Tile.prototype,"collides",{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}}),Object.defineProperty(U.Tile.prototype,"canCollide",{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback}}),Object.defineProperty(U.Tile.prototype,"left",{get:function(){return this.worldX}}),Object.defineProperty(U.Tile.prototype,"right",{get:function(){return this.worldX+this.width}}),Object.defineProperty(U.Tile.prototype,"top",{get:function(){return this.worldY}}),Object.defineProperty(U.Tile.prototype,"bottom",{get:function(){return this.worldY+this.height}}),U.Tilemap=function(e,t,i,n,r,o){this.game=e,this.key=t;var a=U.TilemapParser.parse(this.game,t,i,n,r,o);null!==a&&(this.width=a.width,this.height=a.height,this.tileWidth=a.tileWidth,this.tileHeight=a.tileHeight,this.orientation=a.orientation,this.format=a.format,this.version=a.version,this.properties=a.properties,this.widthInPixels=a.widthInPixels,this.heightInPixels=a.heightInPixels,this.layers=a.layers,this.tilesets=a.tilesets,this.imagecollections=a.imagecollections,this.tiles=a.tiles,this.objects=a.objects,this.collideIndexes=[],this.collision=a.collision,this.images=a.images,this.enableDebug=!1,this.currentLayer=0,this.debugMap=[],this._results=[],this._tempA=0,this._tempB=0)},U.Tilemap.CSV=0,U.Tilemap.TILED_JSON=1,U.Tilemap.NORTH=0,U.Tilemap.EAST=1,U.Tilemap.SOUTH=2,U.Tilemap.WEST=3,U.Tilemap.prototype={create:function(e,t,i,n,r,o){return void 0===o&&(o=this.game.world),this.width=t,this.height=i,this.setTileSize(n,r),this.layers.length=0,this.createBlankLayer(e,t,i,n,r,o)},setTileSize:function(e,t){this.tileWidth=e,this.tileHeight=t,this.widthInPixels=this.width*e,this.heightInPixels=this.height*t},addTilesetImage:function(e,t,i,n,r,o,a){if(void 0===e)return null;void 0===i&&(i=this.tileWidth),void 0===n&&(n=this.tileHeight),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),0===i&&(i=32),0===n&&(n=32);var s=null;if(null==t&&(t=e),t instanceof U.BitmapData)s=t.canvas;else{if(!this.game.cache.checkImageKey(t))return null;s=this.game.cache.getImage(t)}var p=this.getTilesetIndex(e);if(null===p&&this.format===U.Tilemap.TILED_JSON)return null;if(this.tilesets[p])return this.tilesets[p].setImage(s),this.tilesets[p];var l=new U.Tileset(e,a,i,n,r,o,{});l.setImage(s),this.tilesets.push(l);for(var h=this.tilesets.length-1,u=r,d=r,c=0,_=0,y=0,x=a;x<a+l.total&&(this.tiles[x]=[u,d,h],u+=i+o,++c!==l.total)&&(++_!==l.columns||(u=r,d+=n+o,_=0,++y!==l.rows));x++);return l},createFromObjects:function(e,t,i,n,r,o,a,s,p){if(void 0===r&&(r=!0),void 0===o&&(o=!1),void 0===a&&(a=this.game.world),void 0===s&&(s=U.Sprite),void 0===p&&(p=!0),this.objects[e])for(var l=0;l<this.objects[e].length;l++){var h=!1,u=this.objects[e][l];if(void 0!==u.gid&&"number"==typeof t&&u.gid===t?h=!0:void 0!==u.id&&"number"==typeof t&&u.id===t?h=!0:void 0!==u.name&&"string"==typeof t&&u.name===t&&(h=!0),h){var d=new s(this.game,parseFloat(u.x,10),parseFloat(u.y,10),i,n);for(var c in d.name=u.name,d.visible=u.visible,d.autoCull=o,d.exists=r,u.width&&(d.width=u.width),u.height&&(d.height=u.height),u.rotation&&(d.angle=u.rotation),p&&(d.y-=d.height),a.add(d),u.properties)a.set(d,c,u.properties[c],!1,!1,0,!0)}}},createFromTiles:function(e,t,i,n,r,o){"number"==typeof e&&(e=[e]),null==t?t=[]:"number"==typeof t&&(t=[t]),n=this.getLayer(n),void 0===r&&(r=this.game.world),void 0===o&&(o={}),void 0===o.customClass&&(o.customClass=U.Sprite),void 0===o.adjustY&&(o.adjustY=!0);var a=this.layers[n].width,s=this.layers[n].height;if(this.copy(0,0,a,s,n),this._results.length<2)return 0;for(var p,l=0,h=1,u=this._results.length;h<u;h++)if(-1!==e.indexOf(this._results[h].index)){for(var d in p=new o.customClass(this.game,this._results[h].worldX,this._results[h].worldY,i),o)p[d]=o[d];r.add(p),l++}if(1===t.length)for(h=0;h<e.length;h++)this.replace(e[h],t[0],0,0,a,s,n);else if(1<t.length)for(h=0;h<e.length;h++)this.replace(e[h],t[h],0,0,a,s,n);return l},createLayer:function(e,t,i,n){void 0===t&&(t=this.game.width),void 0===i&&(i=this.game.height),void 0===n&&(n=this.game.world);var r=e;if("string"==typeof e&&(r=this.getLayerIndex(e)),!(null===r||r>this.layers.length)){void 0===t||t<=0?t=Math.min(this.game.width,this.layers[r].widthInPixels):t>this.game.width&&(t=this.game.width),void 0===i||i<=0?i=Math.min(this.game.height,this.layers[r].heightInPixels):i>this.game.height&&(i=this.game.height),this.enableDebug;var o=n.add(new U.TilemapLayer(this.game,this,r,t,i));return this.enableDebug,o}},createBlankLayer:function(e,t,i,n,r,o){if(void 0===o&&(o=this.game.world),null===this.getLayerIndex(e)){for(var a,s={name:e,x:0,y:0,width:t,height:i,widthInPixels:t*n,heightInPixels:i*r,alpha:1,visible:!0,properties:{},indexes:[],callbacks:[],bodies:[],data:null},p=[],l=0;l<i;l++){a=[];for(var h=0;h<t;h++)a.push(new U.Tile(s,-1,h,l,n,r));p.push(a)}s.data=p,this.layers.push(s),this.currentLayer=this.layers.length-1;var u=s.widthInPixels,d=s.heightInPixels;return u>this.game.width&&(u=this.game.width),d>this.game.height&&(d=this.game.height),(p=new U.TilemapLayer(this.game,this,this.layers.length-1,u,d)).name=e,o.add(p)}},getIndex:function(e,t){for(var i=0;i<e.length;i++)if(e[i].name===t)return i;return null},getLayerIndex:function(e){return this.getIndex(this.layers,e)},getTilesetIndex:function(e){return this.getIndex(this.tilesets,e)},getImageIndex:function(e){return this.getIndex(this.images,e)},setTileIndexCallback:function(e,t,i,n){if(n=this.getLayer(n),"number"==typeof e)this.layers[n].callbacks[e]={callback:t,callbackContext:i};else for(var r=0,o=e.length;r<o;r++)this.layers[n].callbacks[e[r]]={callback:t,callbackContext:i}},setTileLocationCallback:function(e,t,i,n,r,o,a){if(a=this.getLayer(a),this.copy(e,t,i,n,a),!(this._results.length<2))for(var s=1;s<this._results.length;s++)this._results[s].setCollisionCallback(r,o)},setCollision:function(e,t,i,n){if(void 0===t&&(t=!0),void 0===n&&(n=!0),i=this.getLayer(i),"number"==typeof e)return this.setCollisionByIndex(e,t,i,!0);if(Array.isArray(e)){for(var r=0;r<e.length;r++)this.setCollisionByIndex(e[r],t,i,!1);n&&this.calculateFaces(i)}},setCollisionBetween:function(e,t,i,n,r){if(void 0===i&&(i=!0),void 0===r&&(r=!0),n=this.getLayer(n),!(t<e)){for(var o=e;o<=t;o++)this.setCollisionByIndex(o,i,n,!1);r&&this.calculateFaces(n)}},setCollisionByExclusion:function(e,t,i,n){void 0===t&&(t=!0),void 0===n&&(n=!0),i=this.getLayer(i);for(var r=0,o=this.tiles.length;r<o;r++)-1===e.indexOf(r)&&this.setCollisionByIndex(r,t,i,!1);n&&this.calculateFaces(i)},setCollisionByIndex:function(e,t,i,n){if(void 0===t&&(t=!0),void 0===i&&(i=this.currentLayer),void 0===n&&(n=!0),t)this.collideIndexes.push(e);else{var r=this.collideIndexes.indexOf(e);-1<r&&this.collideIndexes.splice(r,1)}for(var o=0;o<this.layers[i].height;o++)for(var a=0;a<this.layers[i].width;a++){var s=this.layers[i].data[o][a];s&&s.index===e&&(t?s.setCollision(!0,!0,!0,!0):s.resetCollision(),s.faceTop=t,s.faceBottom=t,s.faceLeft=t,s.faceRight=t)}return n&&this.calculateFaces(i),i},getLayer:function(e){return void 0===e?e=this.currentLayer:"string"==typeof e?e=this.getLayerIndex(e):e instanceof U.TilemapLayer&&(e=e.index),e},setPreventRecalculate:function(e){if(!0===e&&!0!==this.preventingRecalculate&&(this.preventingRecalculate=!0,this.needToRecalculate={}),!1===e&&!0===this.preventingRecalculate){for(var t in this.preventingRecalculate=!1,this.needToRecalculate)this.calculateFaces(t);this.needToRecalculate=!1}},calculateFaces:function(e){if(this.preventingRecalculate)this.needToRecalculate[e]=!0;else for(var t=null,i=null,n=null,r=null,o=0,a=this.layers[e].height;o<a;o++)for(var s=0,p=this.layers[e].width;s<p;s++){var l=this.layers[e].data[o][s];l&&(t=this.getTileAbove(e,s,o),i=this.getTileBelow(e,s,o),n=this.getTileLeft(e,s,o),r=this.getTileRight(e,s,o),l.collides&&(l.faceTop=!0,l.faceBottom=!0,l.faceLeft=!0,l.faceRight=!0),t&&t.collides&&(l.faceTop=!1),i&&i.collides&&(l.faceBottom=!1),n&&n.collides&&(l.faceLeft=!1),r&&r.collides&&(l.faceRight=!1))}},getTileAbove:function(e,t,i){return 0<i?this.layers[e].data[i-1][t]:null},getTileBelow:function(e,t,i){return i<this.layers[e].height-1?this.layers[e].data[i+1][t]:null},getTileLeft:function(e,t,i){return 0<t?this.layers[e].data[i][t-1]:null},getTileRight:function(e,t,i){return t<this.layers[e].width-1?this.layers[e].data[i][t+1]:null},setLayer:function(e){e=this.getLayer(e),this.layers[e]&&(this.currentLayer=e)},hasTile:function(e,t,i){return i=this.getLayer(i),void 0!==this.layers[i].data[t]&&void 0!==this.layers[i].data[t][e]&&-1<this.layers[i].data[t][e].index},removeTile:function(e,t,i){if(i=this.getLayer(i),0<=e&&e<this.layers[i].width&&0<=t&&t<this.layers[i].height&&this.hasTile(e,t,i)){var n=this.layers[i].data[t][e];return this.layers[i].data[t][e]=new U.Tile(this.layers[i],-1,e,t,this.tileWidth,this.tileHeight),this.layers[i].dirty=!0,this.calculateFaces(i),n}},removeTileWorldXY:function(e,t,i,n,r){return r=this.getLayer(r),e=this.game.math.snapToFloor(e,i)/i,t=this.game.math.snapToFloor(t,n)/n,this.removeTile(e,t,r)},putTile:function(e,t,i,n){return null===e?this.removeTile(t,i,n):(n=this.getLayer(n),0<=t&&t<this.layers[n].width&&0<=i&&i<this.layers[n].height?(e instanceof U.Tile?(r=e.index,this.hasTile(t,i,n)?this.layers[n].data[i][t].copy(e):this.layers[n].data[i][t]=new U.Tile(n,r,t,i,e.width,e.height)):(r=e,this.hasTile(t,i,n)?this.layers[n].data[i][t].index=r:this.layers[n].data[i][t]=new U.Tile(this.layers[n],r,t,i,this.tileWidth,this.tileHeight)),-1<this.collideIndexes.indexOf(r)?this.layers[n].data[i][t].setCollision(!0,!0,!0,!0):this.layers[n].data[i][t].resetCollision(),this.layers[n].dirty=!0,this.calculateFaces(n),this.layers[n].data[i][t]):null);var r},putTileWorldXY:function(e,t,i,n,r,o){return o=this.getLayer(o),t=this.game.math.snapToFloor(t,n)/n,i=this.game.math.snapToFloor(i,r)/r,this.putTile(e,t,i,o)},searchTileIndex:function(e,t,i,n){void 0===t&&(t=0),void 0===i&&(i=!1),n=this.getLayer(n);var r=0;if(i){for(var o=this.layers[n].height-1;0<=o;o--)for(var a=this.layers[n].width-1;0<=a;a--)if(this.layers[n].data[o][a].index===e){if(r===t)return this.layers[n].data[o][a];r++}}else for(o=0;o<this.layers[n].height;o++)for(a=0;a<this.layers[n].width;a++)if(this.layers[n].data[o][a].index===e){if(r===t)return this.layers[n].data[o][a];r++}return null},getTile:function(e,t,i,n){return void 0===n&&(n=!1),i=this.getLayer(i),0<=e&&e<this.layers[i].width&&0<=t&&t<this.layers[i].height?-1===this.layers[i].data[t][e].index?n?this.layers[i].data[t][e]:null:this.layers[i].data[t][e]:null},getTileWorldXY:function(e,t,i,n,r,o){return void 0===i&&(i=this.tileWidth),void 0===n&&(n=this.tileHeight),r=this.getLayer(r),e=this.game.math.snapToFloor(e,i)/i,t=this.game.math.snapToFloor(t,n)/n,this.getTile(e,t,r,o)},copy:function(e,t,i,n,r){if(r=this.getLayer(r),this.layers[r]){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=this.layers[r].width),void 0===n&&(n=this.layers[r].height),e<0&&(e=0),t<0&&(t=0),i>this.layers[r].width&&(i=this.layers[r].width),n>this.layers[r].height&&(n=this.layers[r].height),this._results.length=0,this._results.push({x:e,y:t,width:i,height:n,layer:r});for(var o=t;o<t+n;o++)for(var a=e;a<e+i;a++)this._results.push(this.layers[r].data[o][a]);return this._results}this._results.length=0},paste:function(e,t,i,n){if(void 0===e&&(e=0),void 0===t&&(t=0),n=this.getLayer(n),i&&!(i.length<2)){for(var r=e-i[1].x,o=t-i[1].y,a=1;a<i.length;a++)this.layers[n].data[o+i[a].y][r+i[a].x].copy(i[a]);this.layers[n].dirty=!0,this.calculateFaces(n)}},swap:function(e,t,i,n,r,o,a){a=this.getLayer(a),this.copy(i,n,r,o,a),this._results.length<2||(this._tempA=e,this._tempB=t,this._results.forEach(this.swapHandler,this),this.paste(i,n,this._results,a))},swapHandler:function(e){e.index===this._tempA?e.index=this._tempB:e.index===this._tempB&&(e.index=this._tempA)},forEach:function(e,t,i,n,r,o,a){a=this.getLayer(a),this.copy(i,n,r,o,a),this._results.length<2||(this._results.forEach(e,t),this.paste(i,n,this._results,a))},replace:function(e,t,i,n,r,o,a){if(a=this.getLayer(a),this.copy(i,n,r,o,a),!(this._results.length<2)){for(var s=1;s<this._results.length;s++)this._results[s].index===e&&(this._results[s].index=t);this.paste(i,n,this._results,a)}},random:function(e,t,i,n,r){if(r=this.getLayer(r),this.copy(e,t,i,n,r),!(this._results.length<2)){for(var o=[],a=1;a<this._results.length;a++)if(this._results[a].index){var s=this._results[a].index;-1===o.indexOf(s)&&o.push(s)}for(var p=1;p<this._results.length;p++)this._results[p].index=this.game.rnd.pick(o);this.paste(e,t,this._results,r)}},shuffle:function(e,t,i,n,r){if(r=this.getLayer(r),this.copy(e,t,i,n,r),!(this._results.length<2)){for(var o=[],a=1;a<this._results.length;a++)this._results[a].index&&o.push(this._results[a].index);U.ArrayUtils.shuffle(o);for(var s=1;s<this._results.length;s++)this._results[s].index=o[s-1];this.paste(e,t,this._results,r)}},fill:function(e,t,i,n,r,o){if(o=this.getLayer(o),this.copy(t,i,n,r,o),!(this._results.length<2)){for(var a=1;a<this._results.length;a++)this._results[a].index=e;this.paste(t,i,this._results,o)}},removeAllLayers:function(){this.layers.length=0,this.currentLayer=0},dump:function(){for(var e="",t=[""],i=0;i<this.layers[this.currentLayer].height;i++){for(var n=0;n<this.layers[this.currentLayer].width;n++)e+="%c  ",1<this.layers[this.currentLayer].data[i][n]?this.debugMap[this.layers[this.currentLayer].data[i][n]]?t.push("background: "+this.debugMap[this.layers[this.currentLayer].data[i][n]]):t.push("background: #ffffff"):t.push("background: rgb(0, 0, 0)");e+="\n"}t[0]=e},destroy:function(){this.removeAllLayers(),this.data=[],this.game=null}},U.Tilemap.prototype.constructor=U.Tilemap,Object.defineProperty(U.Tilemap.prototype,"layer",{get:function(){return this.layers[this.currentLayer]},set:function(e){e!==this.currentLayer&&this.setLayer(e)}}),U.TilemapLayer=function(e,t,i,n,r){n|=0,r|=0,U.Sprite.call(this,e,0,0),this.map=t,this.index=i,this.layer=t.layers[i],this.canvas=PIXI.CanvasPool.create(this,n,r),this.context=this.canvas.getContext("2d"),this.setTexture(new PIXI.Texture(new PIXI.BaseTexture(this.canvas))),this.type=U.TILEMAPLAYER,this.physicsType=U.TILEMAPLAYER,this.renderSettings={enableScrollDelta:!1,overdrawRatio:.2,copyCanvas:null},this.debug=!1,this.exists=!0,this.debugSettings={missingImageFill:"rgb(255,255,255)",debuggedTileOverfill:"rgba(0,255,0,0.4)",forceFullRedraw:!0,debugAlpha:.5,facingEdgeStroke:"rgba(0,255,0,1)",collidingTileOverfill:"rgba(0,255,0,0.2)"},this.scrollFactorX=1,this.scrollFactorY=1,this.dirty=!0,this.rayStepRate=4,this._wrap=!1,this._mc={scrollX:0,scrollY:0,renderWidth:0,renderHeight:0,tileWidth:t.tileWidth,tileHeight:t.tileHeight,cw:t.tileWidth,ch:t.tileHeight,tilesets:[]},this._scrollX=0,this._scrollY=0,this._results=[],e.device.canvasBitBltShift||(this.renderSettings.copyCanvas=U.TilemapLayer.ensureSharedCopyCanvas()),this.fixedToCamera=!0},U.TilemapLayer.prototype=Object.create(U.Sprite.prototype),U.TilemapLayer.prototype.constructor=U.TilemapLayer,U.TilemapLayer.prototype.preUpdateCore=U.Component.Core.preUpdate,U.TilemapLayer.sharedCopyCanvas=null,U.TilemapLayer.ensureSharedCopyCanvas=function(){return this.sharedCopyCanvas||(this.sharedCopyCanvas=PIXI.CanvasPool.create(this,2,2)),this.sharedCopyCanvas},U.TilemapLayer.prototype.preUpdate=function(){return this.preUpdateCore()},U.TilemapLayer.prototype.postUpdate=function(){this.fixedToCamera&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y),this._scrollX=this.game.camera.view.x*this.scrollFactorX/this.scale.x,this._scrollY=this.game.camera.view.y*this.scrollFactorY/this.scale.y},U.TilemapLayer.prototype._renderCanvas=function(e){this.fixedToCamera&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y),this._scrollX=this.game.camera.view.x*this.scrollFactorX/this.scale.x,this._scrollY=this.game.camera.view.y*this.scrollFactorY/this.scale.y,this.render(),PIXI.Sprite.prototype._renderCanvas.call(this,e)},U.TilemapLayer.prototype._renderWebGL=function(e){this.fixedToCamera&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y),this._scrollX=this.game.camera.view.x*this.scrollFactorX/this.scale.x,this._scrollY=this.game.camera.view.y*this.scrollFactorY/this.scale.y,this.render(),PIXI.Sprite.prototype._renderWebGL.call(this,e)},U.TilemapLayer.prototype.destroy=function(){PIXI.CanvasPool.remove(this),U.Component.Destroy.prototype.destroy.call(this)},U.TilemapLayer.prototype.resize=function(e,t){this.canvas.width=e,this.canvas.height=t,this.texture.frame.resize(e,t),this.texture.width=e,this.texture.height=t,this.texture.crop.width=e,this.texture.crop.height=t,this.texture.baseTexture.width=e,this.texture.baseTexture.height=t,this.texture.baseTexture.dirty(),this.texture.requiresUpdate=!0,this.texture._updateUvs(),this.dirty=!0},U.TilemapLayer.prototype.resizeWorld=function(){this.game.world.setBounds(0,0,this.layer.widthInPixels*this.scale.x,this.layer.heightInPixels*this.scale.y)},U.TilemapLayer.prototype._fixX=function(e){return 1===this.scrollFactorX||0===this.scrollFactorX&&0===this.position.x?e:0===this.scrollFactorX&&0!==this.position.x?e-this.position.x:this._scrollX+(e-this._scrollX/this.scrollFactorX)},U.TilemapLayer.prototype._unfixX=function(e){return 1===this.scrollFactorX?e:this._scrollX/this.scrollFactorX+(e-this._scrollX)},U.TilemapLayer.prototype._fixY=function(e){return 1===this.scrollFactorY||0===this.scrollFactorY&&0===this.position.y?e:0===this.scrollFactorY&&0!==this.position.y?e-this.position.y:this._scrollY+(e-this._scrollY/this.scrollFactorY)},U.TilemapLayer.prototype._unfixY=function(e){return 1===this.scrollFactorY?e:this._scrollY/this.scrollFactorY+(e-this._scrollY)},U.TilemapLayer.prototype.getTileX=function(e){return Math.floor(this._fixX(e)/this._mc.tileWidth)},U.TilemapLayer.prototype.getTileY=function(e){return Math.floor(this._fixY(e)/this._mc.tileHeight)},U.TilemapLayer.prototype.getTileXY=function(e,t,i){return i.x=this.getTileX(e),i.y=this.getTileY(t),i},U.TilemapLayer.prototype.getRayCastTiles=function(e,t,i,n){t||(t=this.rayStepRate),void 0===i&&(i=!1),void 0===n&&(n=!1);var r=this.getTiles(e.x,e.y,e.width,e.height,i,n);if(0===r.length)return[];for(var o=e.coordinatesOnLine(t),a=[],s=0;s<r.length;s++)for(var p=0;p<o.length;p++){var l=r[s],h=o[p];if(l.containsPoint(h[0],h[1])){a.push(l);break}}return a},U.TilemapLayer.prototype.getTiles=function(e,t,i,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=!1);var a=!(r||o);e=this._fixX(e),t=this._fixY(t);for(var s=Math.floor(e/(this._mc.cw*this.scale.x)),p=Math.floor(t/(this._mc.ch*this.scale.y)),l=Math.ceil((e+i)/(this._mc.cw*this.scale.x))-s,h=Math.ceil((t+n)/(this._mc.ch*this.scale.y))-p;this._results.length;)this._results.pop();for(var u=p;u<p+h;u++)for(var d=s;d<s+l;d++){var c=this.layer.data[u];c&&c[d]&&(a||c[d].isInteresting(r,o))&&this._results.push(c[d])}return this._results.slice()},U.TilemapLayer.prototype.resolveTileset=function(e){var t=this._mc.tilesets;if(e<2e3)for(;t.length<e;)t.push(void 0);var i=this.map.tiles[e]&&this.map.tiles[e][2];if(null!==i){var n=this.map.tilesets[i];if(n&&n.containsTileIndex(e))return t[e]=n}return t[e]=null},U.TilemapLayer.prototype.resetTilesetCache=function(){for(var e=this._mc.tilesets;e.length;)e.pop()},U.TilemapLayer.prototype.setScale=function(e,t){e=e||1,t=t||e;for(var i=0;i<this.layer.data.length;i++)for(var n=this.layer.data[i],r=0;r<n.length;r++){var o=n[r];o.width=this.map.tileWidth*e,o.height=this.map.tileHeight*t,o.worldX=o.x*o.width,o.worldY=o.y*o.height}this.scale.setTo(e,t)},U.TilemapLayer.prototype.shiftCanvas=function(e,t,i){var n=e.canvas,r=n.width-Math.abs(t),o=n.height-Math.abs(i),a=0,s=0,p=t,l=i;t<0&&(a=-t,p=0),i<0&&(s=-i,l=0);var h=this.renderSettings.copyCanvas;if(h){(h.width<r||h.height<o)&&(h.width=r,h.height=o);var u=h.getContext("2d");u.clearRect(0,0,r,o),u.drawImage(n,a,s,r,o,0,0,r,o),e.clearRect(p,l,r,o),e.drawImage(h,0,0,r,o,p,l,r,o)}else e.save(),e.globalCompositeOperation="copy",e.drawImage(n,a,s,r,o,p,l,r,o),e.restore()},U.TilemapLayer.prototype.renderRegion=function(e,t,i,n,r,o){var a=this.context,s=this.layer.width,p=this.layer.height,l=this._mc.tileWidth,h=this._mc.tileHeight,u=this._mc.tilesets,d=NaN;this._wrap||(i<=r&&(i=Math.max(0,i),r=Math.min(s-1,r)),n<=o&&(n=Math.max(0,n),o=Math.min(p-1,o)));var c,_,y,x,m,g,f=i*l-e,v=(i+(1<<20)*s)%s;for(x=(n+(1<<20)*p)%p,g=o-n,_=n*h-t;0<=g;x++,g--,_+=h){p<=x&&(x-=p);var z=this.layer.data[x];for(y=v,m=r-i,c=f;0<=m;y++,m--,c+=l){s<=y&&(y-=s);var w=z[y];if(w&&!(w.index<0)){var b=w.index,S=u[b];void 0===S&&(S=this.resolveTileset(b)),w.alpha===d||this.debug||(a.globalAlpha=w.alpha,d=w.alpha),S?w.rotation||w.flipped?(a.save(),a.translate(c+w.centerX,_+w.centerY),a.rotate(w.rotation),w.flipped&&a.scale(-1,1),S.draw(a,-w.centerX,-w.centerY,b),a.restore()):S.draw(a,c,_,b):this.debugSettings.missingImageFill&&(a.fillStyle=this.debugSettings.missingImageFill,a.fillRect(c,_,l,h)),w.debug&&this.debugSettings.debuggedTileOverfill&&(a.fillStyle=this.debugSettings.debuggedTileOverfill,a.fillRect(c,_,l,h))}}}},U.TilemapLayer.prototype.renderDeltaScroll=function(e,t){var i=this._mc.scrollX,n=this._mc.scrollY,r=this.canvas.width,o=this.canvas.height,a=this._mc.tileWidth,s=this._mc.tileHeight,p=0,l=-a,h=0,u=-s;if(e<0?(p=r+e,l=r-1):0<e&&(l=e),t<0?(h=o+t,u=o-1):0<t&&(u=t),this.shiftCanvas(this.context,e,t),p=Math.floor((p+i)/a),l=Math.floor((l+i)/a),h=Math.floor((h+n)/s),u=Math.floor((u+n)/s),p<=l){this.context.clearRect(p*a-i,0,(l-p+1)*a,o);var d=Math.floor((0+n)/s),c=Math.floor((o-1+n)/s);this.renderRegion(i,n,p,d,l,c)}if(h<=u){this.context.clearRect(0,h*s-n,r,(u-h+1)*s);var _=Math.floor((0+i)/a),y=Math.floor((r-1+i)/a);this.renderRegion(i,n,_,h,y,u)}},U.TilemapLayer.prototype.renderFull=function(){var e=this._mc.scrollX,t=this._mc.scrollY,i=this.canvas.width,n=this.canvas.height,r=this._mc.tileWidth,o=this._mc.tileHeight,a=Math.floor(e/r),s=Math.floor((i-1+e)/r),p=Math.floor(t/o),l=Math.floor((n-1+t)/o);this.context.clearRect(0,0,i,n),this.renderRegion(e,t,a,p,s,l)},U.TilemapLayer.prototype.render=function(){var e=!1;if(this.visible){(this.dirty||this.layer.dirty)&&(e=!(this.layer.dirty=!1));var t=this.canvas.width,i=this.canvas.height,n=0|this._scrollX,r=0|this._scrollY,o=this._mc,a=o.scrollX-n,s=o.scrollY-r;if(e||0!==a||0!==s||o.renderWidth!==t||o.renderHeight!==i)return this.context.save(),o.scrollX=n,o.scrollY=r,o.renderWidth===t&&o.renderHeight===i||(o.renderWidth=t,o.renderHeight=i),this.debug&&(this.context.globalAlpha=this.debugSettings.debugAlpha,this.debugSettings.forceFullRedraw&&(e=!0)),!e&&this.renderSettings.enableScrollDelta&&Math.abs(a)+Math.abs(s)<Math.min(t,i)?this.renderDeltaScroll(a,s):this.renderFull(),this.debug&&(this.context.globalAlpha=1,this.renderDebug()),this.texture.baseTexture.dirty(),this.dirty=!1,this.context.restore(),!0}},U.TilemapLayer.prototype.renderDebug=function(){var e,t,i,n,r,o,a=this._mc.scrollX,s=this._mc.scrollY,p=this.context,l=this.canvas.width,h=this.canvas.height,u=this.layer.width,d=this.layer.height,c=this._mc.tileWidth,_=this._mc.tileHeight,y=Math.floor(a/c),x=Math.floor((l-1+a)/c),m=Math.floor(s/_),g=Math.floor((h-1+s)/_),f=y*c-a,v=m*_-s,z=(y+(1<<20)*u)%u,w=(m+(1<<20)*d)%d;for(p.strokeStyle=this.debugSettings.facingEdgeStroke,n=w,o=g-m,t=v;0<=o;n++,o--,t+=_){d<=n&&(n-=d);var b=this.layer.data[n];for(i=z,r=x-y,e=f;0<=r;i++,r--,e+=c){u<=i&&(i-=u);var S=b[i];!S||S.index<0||!S.collides||(this.debugSettings.collidingTileOverfill&&(p.fillStyle=this.debugSettings.collidingTileOverfill,p.fillRect(e,t,this._mc.cw,this._mc.ch)),this.debugSettings.facingEdgeStroke&&(p.beginPath(),S.faceTop&&(p.moveTo(e,t),p.lineTo(e+this._mc.cw,t)),S.faceBottom&&(p.moveTo(e,t+this._mc.ch),p.lineTo(e+this._mc.cw,t+this._mc.ch)),S.faceLeft&&(p.moveTo(e,t),p.lineTo(e,t+this._mc.ch)),S.faceRight&&(p.moveTo(e+this._mc.cw,t),p.lineTo(e+this._mc.cw,t+this._mc.ch)),p.closePath(),p.stroke()))}}},Object.defineProperty(U.TilemapLayer.prototype,"wrap",{get:function(){return this._wrap},set:function(e){this._wrap=e,this.dirty=!0}}),Object.defineProperty(U.TilemapLayer.prototype,"scrollX",{get:function(){return this._scrollX},set:function(e){this._scrollX=e}}),Object.defineProperty(U.TilemapLayer.prototype,"scrollY",{get:function(){return this._scrollY},set:function(e){this._scrollY=e}}),Object.defineProperty(U.TilemapLayer.prototype,"collisionWidth",{get:function(){return this._mc.cw},set:function(e){this._mc.cw=0|e,this.dirty=!0}}),Object.defineProperty(U.TilemapLayer.prototype,"collisionHeight",{get:function(){return this._mc.ch},set:function(e){this._mc.ch=0|e,this.dirty=!0}}),U.TilemapParser={INSERT_NULL:!1,parse:function(e,t,i,n,r,o){if(void 0===i&&(i=32),void 0===n&&(n=32),void 0===r&&(r=10),void 0===o&&(o=10),void 0===t)return this.getEmptyData();if(null===t)return this.getEmptyData(i,n,r,o);var a=e.cache.getTilemapData(t);if(a){if(a.format===U.Tilemap.CSV)return this.parseCSV(t,a.data,i,n);if(!a.format||a.format===U.Tilemap.TILED_JSON)return this.parseTiledJSON(a.data)}},parseCSV:function(e,t,i,n){for(var r=this.getEmptyData(),o=[],a=(t=t.trim()).split("\n"),s=a.length,p=0,l=0;l<a.length;l++){o[l]=[];for(var h=a[l].split(","),u=0;u<h.length;u++)o[l][u]=new U.Tile(r.layers[0],parseInt(h[u],10),u,l,i,n);0===p&&(p=h.length)}return r.format=U.Tilemap.CSV,r.name=e,r.width=p,r.height=s,r.tileWidth=i,r.tileHeight=n,r.widthInPixels=p*i,r.heightInPixels=s*n,r.layers[0].width=p,r.layers[0].height=s,r.layers[0].widthInPixels=r.widthInPixels,r.layers[0].heightInPixels=r.heightInPixels,r.layers[0].data=o,r},getEmptyData:function(e,t,i,n){return{width:null!=i?i:0,height:null!=n?n:0,tileWidth:null!=e?e:0,tileHeight:null!=t?t:0,orientation:"orthogonal",version:"1",properties:{},widthInPixels:0,heightInPixels:0,layers:[{name:"layer",x:0,y:0,width:0,height:0,widthInPixels:0,heightInPixels:0,alpha:1,visible:!0,properties:{},indexes:[],callbacks:[],bodies:[],data:[]}],images:[],objects:{},collision:{},tilesets:[],tiles:[]}},parseTiledJSON:function(e){if("orthogonal"!==e.orientation)return null;for(var t={width:e.width,height:e.height,tileWidth:e.tilewidth,tileHeight:e.tileheight,orientation:e.orientation,format:U.Tilemap.TILED_JSON,version:e.version,properties:e.properties,widthInPixels:e.width*e.tilewidth,heightInPixels:e.height*e.tileheight},i=[],n=0;n<e.layers.length;n++)if("tilelayer"===e.layers[n].type){var r=e.layers[n];if(!r.compression&&r.encoding&&"base64"===r.encoding){for(var o=window.atob(r.data),a=o.length,s=new Array(a),p=0;p<a;p+=4)s[p/4]=(o.charCodeAt(p)|o.charCodeAt(p+1)<<8|o.charCodeAt(p+2)<<16|o.charCodeAt(p+3)<<24)>>>0;r.data=s,delete r.encoding}else if(r.compression)continue;var l={name:r.name,x:r.x,y:r.y,width:r.width,height:r.height,widthInPixels:r.width*e.tilewidth,heightInPixels:r.height*e.tileheight,alpha:r.opacity,visible:r.visible,properties:{},indexes:[],callbacks:[],bodies:[]};r.properties&&(l.properties=r.properties);var h,u,d,c=0,_=[],y=[],x=0;for(a=r.data.length;x<a;x++){if(u=!1,d=h=0,536870912<(M=r.data[x]))switch(2147483648<M&&(M-=2147483648,d+=4),1073741824<M&&(M-=1073741824,d+=2),536870912<M&&(M-=536870912,d+=1),d){case 5:h=Math.PI/2;break;case 6:h=Math.PI;break;case 3:h=3*Math.PI/2;break;case 4:u=!(h=0);break;case 7:h=Math.PI/2,u=!0;break;case 2:h=Math.PI,u=!0;break;case 1:h=3*Math.PI/2,u=!0}if(0<M)(P=new U.Tile(l,M,c,y.length,e.tilewidth,e.tileheight)).rotation=h,P.flipped=u,0!==d&&(P.flippedVal=d),_.push(P);else U.TilemapParser.INSERT_NULL?_.push(null):_.push(new U.Tile(l,-1,c,y.length,e.tilewidth,e.tileheight));++c===r.width&&(y.push(_),c=0,_=[])}l.data=y,i.push(l)}t.layers=i;var m=[];for(n=0;n<e.layers.length;n++)if("imagelayer"===e.layers[n].type){var g=e.layers[n],f={name:g.name,image:g.image,x:g.x,y:g.y,alpha:g.opacity,visible:g.visible,properties:{}};g.properties&&(f.properties=g.properties),m.push(f)}t.images=m;var v=[],z=[],w=null;for(n=0;n<e.tilesets.length;n++){if((L=e.tilesets[n]).image){var b=new U.Tileset(L.name,L.firstgid,L.tilewidth,L.tileheight,L.margin,L.spacing,L.properties);L.tileproperties&&(b.tileProperties=L.tileproperties),b.updateTileData(L.imagewidth,L.imageheight),v.push(b)}else{var S=new U.ImageCollection(L.name,L.firstgid,L.tilewidth,L.tileheight,L.margin,L.spacing,L.properties);for(var C in L.tiles){f=L.tiles[C].image;var M=L.firstgid+parseInt(C,10);S.addImage(M,f)}z.push(S)}w&&(w.lastgid=L.firstgid-1),w=L}t.tilesets=v,t.imagecollections=z;var P,k,T={},A={};function O(e,t){var i={};for(var n in t){var r=t[n];void 0!==e[r]&&(i[r]=e[r])}return i}for(n=0;n<e.layers.length;n++)if("objectgroup"===e.layers[n].type){var E=e.layers[n];T[E.name]=[],A[E.name]=[];var G=0;for(a=E.objects.length;G<a;G++)if(E.objects[G].gid){var D={gid:E.objects[G].gid,name:E.objects[G].name,type:E.objects[G].hasOwnProperty("type")?E.objects[G].type:"",x:E.objects[G].x,y:E.objects[G].y,visible:E.objects[G].visible,properties:E.objects[G].properties};E.objects[G].rotation&&(D.rotation=E.objects[G].rotation),T[E.name].push(D)}else if(E.objects[G].polyline){D={name:E.objects[G].name,type:E.objects[G].type,x:E.objects[G].x,y:E.objects[G].y,width:E.objects[G].width,height:E.objects[G].height,visible:E.objects[G].visible,properties:E.objects[G].properties};E.objects[G].rotation&&(D.rotation=E.objects[G].rotation),D.polyline=[];for(var I=0;I<E.objects[G].polyline.length;I++)D.polyline.push([E.objects[G].polyline[I].x,E.objects[G].polyline[I].y]);A[E.name].push(D),T[E.name].push(D)}else if(E.objects[G].polygon){(D=O(E.objects[G],["name","type","x","y","visible","rotation","properties"])).polygon=[];for(I=0;I<E.objects[G].polygon.length;I++)D.polygon.push([E.objects[G].polygon[I].x,E.objects[G].polygon[I].y]);T[E.name].push(D)}else if(E.objects[G].ellipse){D=O(E.objects[G],["name","type","ellipse","x","y","width","height","visible","rotation","properties"]);T[E.name].push(D)}else{(D=O(E.objects[G],["name","type","x","y","width","height","visible","rotation","properties"])).rectangle=!0,T[E.name].push(D)}}t.objects=T,t.collision=A,t.tiles=[];for(n=0;n<t.tilesets.length;n++){c=(L=t.tilesets[n]).tileMargin;var L,B=L.tileMargin,R=0,F=0,j=0;for(x=L.firstgid;x<L.firstgid+L.total&&(t.tiles[x]=[c,B,n],c+=L.tileWidth+L.tileSpacing,++R!==L.total)&&(++F!==L.columns||(c=L.tileMargin,B+=L.tileHeight+L.tileSpacing,F=0,++j!==L.rows));x++);}for(n=0;n<t.layers.length;n++){l=t.layers[n],L=null;for(p=0;p<l.data.length;p++){_=l.data[p];for(var N=0;N<_.length;N++)null===(P=_[N])||P.index<0||(k=t.tiles[P.index][2],(L=t.tilesets[k]).tileProperties&&L.tileProperties[P.index-L.firstgid]&&(P.properties=U.Utils.mixin(L.tileProperties[P.index-L.firstgid],P.properties)))}}return t}},U.Tileset=function(e,t,i,n,r,o,a){(void 0===i||i<=0)&&(i=32),(void 0===n||n<=0)&&(n=32),void 0===r&&(r=0),void 0===o&&(o=0),this.name=e,this.firstgid=0|t,this.tileWidth=0|i,this.tileHeight=0|n,this.tileMargin=0|r,this.tileSpacing=0|o,this.properties=a||{},this.image=null,this.rows=0,this.columns=0,this.total=0,this.drawCoords=[]},U.Tileset.prototype={draw:function(e,t,i,n){var r=n-this.firstgid<<1;0<=r&&r+1<this.drawCoords.length&&e.drawImage(this.image,this.drawCoords[r],this.drawCoords[r+1],this.tileWidth,this.tileHeight,t,i,this.tileWidth,this.tileHeight)},containsTileIndex:function(e){return e>=this.firstgid&&e<this.firstgid+this.total},setImage:function(e){this.image=e,this.updateTileData(e.width,e.height)},setSpacing:function(e,t){this.tileMargin=0|e,this.tileSpacing=0|t,this.image&&this.updateTileData(this.image.width,this.image.height)},updateTileData:function(e,t){var i=(t-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),n=(e-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);i=Math.floor(i),n=Math.floor(n),this.rows&&this.rows!==i||this.columns&&this.columns,this.rows=i,this.columns=n,this.total=i*n,this.drawCoords.length=0;for(var r=this.tileMargin,o=this.tileMargin,a=0;a<this.rows;a++){for(var s=0;s<this.columns;s++)this.drawCoords.push(r),this.drawCoords.push(o),r+=this.tileWidth+this.tileSpacing;r=this.tileMargin,o+=this.tileHeight+this.tileSpacing}}},U.Tileset.prototype.constructor=U.Tileset,U.Particle=function(e,t,i,n,r){U.Sprite.call(this,e,t,i,n,r),this.autoScale=!1,this.scaleData=null,this._s=0,this.autoAlpha=!1,this.alphaData=null,this._a=0},U.Particle.prototype=Object.create(U.Sprite.prototype),U.Particle.prototype.constructor=U.Particle,U.Particle.prototype.update=function(){this.autoScale&&(this._s--,this._s?this.scale.set(this.scaleData[this._s].x,this.scaleData[this._s].y):this.autoScale=!1),this.autoAlpha&&(this._a--,this._a?this.alpha=this.alphaData[this._a].v:this.autoAlpha=!1)},U.Particle.prototype.onEmit=function(){},U.Particle.prototype.setAlphaData=function(e){this.alphaData=e,this._a=e.length-1,this.alpha=this.alphaData[this._a].v,this.autoAlpha=!0},U.Particle.prototype.setScaleData=function(e){this.scaleData=e,this._s=e.length-1,this.scale.set(this.scaleData[this._s].x,this.scaleData[this._s].y),this.autoScale=!0},U.Particle.prototype.reset=function(e,t,i){return U.Component.Reset.prototype.reset.call(this,e,t,i),this.alpha=1,this.scale.set(1),this.autoScale=!1,this.autoAlpha=!1,this},U.Particles=function(e){this.game=e,this.emitters={},this.ID=0},U.Particles.prototype={add:function(e){return this.emitters[e.name]=e},remove:function(e){delete this.emitters[e.name]},update:function(){for(var e in this.emitters)this.emitters[e].exists&&this.emitters[e].update()}},U.Particles.prototype.constructor=U.Particles,U.Particles.Arcade={},U.Particles.Arcade.Emitter=function(e,t,i,n){this.maxParticles=n||50,U.Group.call(this,e),this.name="emitter"+this.game.particles.ID++,this.type=U.EMITTER,this.physicsType=U.GROUP,this.area=new U.Rectangle(t,i,1,1),this.minParticleSpeed=new U.Point(-100,-100),this.maxParticleSpeed=new U.Point(100,100),this.minParticleScale=1,this.maxParticleScale=1,this.scaleData=null,this.minRotation=-360,this.maxRotation=360,this.minParticleAlpha=1,this.maxParticleAlpha=1,this.alphaData=null,this.gravity=100,this.particleClass=U.Particle,this.particleDrag=new U.Point,this.angularDrag=0,this.frequency=100,this.lifespan=2e3,this.bounce=new U.Point,this.on=!1,this.particleAnchor=new U.Point(.5,.5),this.blendMode=U.blendModes.NORMAL,this.emitX=t,this.emitY=i,this.autoScale=!1,this.autoAlpha=!1,this.particleBringToTop=!1,this.particleSendToBack=!1,this._minParticleScale=new U.Point(1,1),this._maxParticleScale=new U.Point(1,1),this._quantity=0,this._timer=0,this._counter=0,this._flowQuantity=0,this._flowTotal=0,this._explode=!0,this._frames=null},U.Particles.Arcade.Emitter.prototype=Object.create(U.Group.prototype),U.Particles.Arcade.Emitter.prototype.constructor=U.Particles.Arcade.Emitter,U.Particles.Arcade.Emitter.prototype.update=function(){if(this.on&&this.game.time.time>=this._timer)if(this._timer=this.game.time.time+this.frequency*this.game.time.slowMotion,0!==this._flowTotal)if(0<this._flowQuantity){for(var e=0;e<this._flowQuantity;e++)if(this.emitParticle()&&(this._counter++,-1!==this._flowTotal&&this._counter>=this._flowTotal)){this.on=!1;break}}else this.emitParticle()&&(this._counter++,-1!==this._flowTotal&&this._counter>=this._flowTotal&&(this.on=!1));else this.emitParticle()&&(this._counter++,0<this._quantity&&this._counter>=this._quantity&&(this.on=!1));for(e=this.children.length;e--;)this.children[e].exists&&this.children[e].update()},U.Particles.Arcade.Emitter.prototype.makeParticles=function(e,t,i,n,r){var o;void 0===t&&(t=0),void 0===i&&(i=this.maxParticles),void 0===n&&(n=!1),void 0===r&&(r=!1);var a=0,s=e,p=t;for(this._frames=t,i>this.maxParticles&&(this.maxParticles=i);a<i;)Array.isArray(e)&&(s=this.game.rnd.pick(e)),Array.isArray(t)&&(p=this.game.rnd.pick(t)),o=new this.particleClass(this.game,0,0,s,p),this.game.physics.arcade.enable(o,!1),n?(o.body.checkCollision.any=!0,o.body.checkCollision.none=!1):o.body.checkCollision.none=!0,o.body.collideWorldBounds=r,o.body.skipQuadTree=!0,o.exists=!1,o.visible=!1,o.anchor.copyFrom(this.particleAnchor),this.add(o),a++;return this},U.Particles.Arcade.Emitter.prototype.kill=function(){return this.on=!1,this.alive=!1,this.exists=!1,this},U.Particles.Arcade.Emitter.prototype.revive=function(){return this.alive=!0,this.exists=!0,this},U.Particles.Arcade.Emitter.prototype.explode=function(e,t){return this._flowTotal=0,this.start(!0,e,0,t,!1),this},U.Particles.Arcade.Emitter.prototype.flow=function(e,t,i,n,r){return void 0!==i&&0!==i||(i=1),void 0===n&&(n=-1),void 0===r&&(r=!0),i>this.maxParticles&&(i=this.maxParticles),this._counter=0,this._flowQuantity=i,this._flowTotal=n,r?(this.start(!0,e,t,i),this._counter+=i,this.on=!0,this._timer=this.game.time.time+t*this.game.time.slowMotion):this.start(!1,e,t,i),this},U.Particles.Arcade.Emitter.prototype.start=function(e,t,i,n,r){if(void 0===e&&(e=!0),void 0===t&&(t=0),null==i&&(i=250),void 0===n&&(n=0),void 0===r&&(r=!1),n>this.maxParticles&&(n=this.maxParticles),this.revive(),this.visible=!0,this.lifespan=t,this.frequency=i,e||r)for(var o=0;o<n;o++)this.emitParticle();else this.on=!0,this._quantity=n,this._counter=0,this._timer=this.game.time.time+i*this.game.time.slowMotion;return this},U.Particles.Arcade.Emitter.prototype.emitParticle=function(e,t,i,n){void 0===e&&(e=null),void 0===t&&(t=null);var r=this.getFirstExists(!1);if(null===r)return!1;var o=this.game.rnd;void 0!==i&&void 0!==n?r.loadTexture(i,n):void 0!==i&&r.loadTexture(i);var a=this.emitX,s=this.emitY;null!==e?a=e:1<this.width&&(a=o.between(this.left,this.right)),null!==t?s=t:1<this.height&&(s=o.between(this.top,this.bottom)),r.reset(a,s),r.angle=0,r.lifespan=this.lifespan,this.particleBringToTop?this.bringToTop(r):this.particleSendToBack&&this.sendToBack(r),this.autoScale?r.setScaleData(this.scaleData):1!==this.minParticleScale||1!==this.maxParticleScale?r.scale.set(o.realInRange(this.minParticleScale,this.maxParticleScale)):this._minParticleScale.x===this._maxParticleScale.x&&this._minParticleScale.y===this._maxParticleScale.y||r.scale.set(o.realInRange(this._minParticleScale.x,this._maxParticleScale.x),o.realInRange(this._minParticleScale.y,this._maxParticleScale.y)),void 0===n&&(Array.isArray(this._frames)?r.frame=this.game.rnd.pick(this._frames):r.frame=this._frames),this.autoAlpha?r.setAlphaData(this.alphaData):r.alpha=o.realInRange(this.minParticleAlpha,this.maxParticleAlpha),r.blendMode=this.blendMode;var p=r.body;return p.updateBounds(),p.bounce.copyFrom(this.bounce),p.drag.copyFrom(this.particleDrag),p.velocity.x=o.between(this.minParticleSpeed.x,this.maxParticleSpeed.x),p.velocity.y=o.between(this.minParticleSpeed.y,this.maxParticleSpeed.y),p.angularVelocity=o.between(this.minRotation,this.maxRotation),p.gravity.y=this.gravity,p.angularDrag=this.angularDrag,r.onEmit(),!0},U.Particles.Arcade.Emitter.prototype.destroy=function(){this.game.particles.remove(this),U.Group.prototype.destroy.call(this,!0,!1)},U.Particles.Arcade.Emitter.prototype.setSize=function(e,t){return this.area.width=e,this.area.height=t,this},U.Particles.Arcade.Emitter.prototype.setXSpeed=function(e,t){return e=e||0,t=t||0,this.minParticleSpeed.x=e,this.maxParticleSpeed.x=t,this},U.Particles.Arcade.Emitter.prototype.setYSpeed=function(e,t){return e=e||0,t=t||0,this.minParticleSpeed.y=e,this.maxParticleSpeed.y=t,this},U.Particles.Arcade.Emitter.prototype.setRotation=function(e,t){return e=e||0,t=t||0,this.minRotation=e,this.maxRotation=t,this},U.Particles.Arcade.Emitter.prototype.setAlpha=function(e,t,i,n,r){if(void 0===e&&(e=1),void 0===t&&(t=1),void 0===i&&(i=0),void 0===n&&(n=U.Easing.Linear.None),void 0===r&&(r=!1),this.minParticleAlpha=e,this.maxParticleAlpha=t,this.autoAlpha=!1,0<i&&e!==t){var o={v:e},a=this.game.make.tween(o).to({v:t},i,n);a.yoyo(r),this.alphaData=a.generateData(60),this.alphaData.reverse(),this.autoAlpha=!0}return this},U.Particles.Arcade.Emitter.prototype.setScale=function(e,t,i,n,r,o,a){if(void 0===e&&(e=1),void 0===t&&(t=1),void 0===i&&(i=1),void 0===n&&(n=1),void 0===r&&(r=0),void 0===o&&(o=U.Easing.Linear.None),void 0===a&&(a=!1),this.minParticleScale=1,this.maxParticleScale=1,this._minParticleScale.set(e,i),this._maxParticleScale.set(t,n),this.autoScale=!1,0<r&&(e!==t||i!==n)){var s={x:e,y:i},p=this.game.make.tween(s).to({x:t,y:n},r,o);p.yoyo(a),this.scaleData=p.generateData(60),this.scaleData.reverse(),this.autoScale=!0}return this},U.Particles.Arcade.Emitter.prototype.at=function(e){return e.center?(this.emitX=e.center.x,this.emitY=e.center.y):(this.emitX=e.world.x+e.anchor.x*e.width,this.emitY=e.world.y+e.anchor.y*e.height),this},Object.defineProperty(U.Particles.Arcade.Emitter.prototype,"width",{get:function(){return this.area.width},set:function(e){this.area.width=e}}),Object.defineProperty(U.Particles.Arcade.Emitter.prototype,"height",{get:function(){return this.area.height},set:function(e){this.area.height=e}}),Object.defineProperty(U.Particles.Arcade.Emitter.prototype,"x",{get:function(){return this.emitX},set:function(e){this.emitX=e}}),Object.defineProperty(U.Particles.Arcade.Emitter.prototype,"y",{get:function(){return this.emitY},set:function(e){this.emitY=e}}),Object.defineProperty(U.Particles.Arcade.Emitter.prototype,"left",{get:function(){return Math.floor(this.x-this.area.width/2)}}),Object.defineProperty(U.Particles.Arcade.Emitter.prototype,"right",{get:function(){return Math.floor(this.x+this.area.width/2)}}),Object.defineProperty(U.Particles.Arcade.Emitter.prototype,"top",{get:function(){return Math.floor(this.y-this.area.height/2)}}),Object.defineProperty(U.Particles.Arcade.Emitter.prototype,"bottom",{get:function(){return Math.floor(this.y+this.area.height/2)}}),U.Weapon=function(e,t){U.Plugin.call(this,e,t),this.bullets=null,this.autoExpandBulletsGroup=!1,this.autofire=!1,this.shots=0,this.fireLimit=0,this.fireRate=100,this.fireRateVariance=0,this.fireFrom=new U.Rectangle(0,0,1,1),this.fireAngle=U.ANGLE_UP,this.bulletInheritSpriteSpeed=!1,this.bulletAnimation="",this.bulletFrameRandom=!1,this.bulletFrameCycle=!1,this.bulletWorldWrap=!1,this.bulletWorldWrapPadding=0,this.bulletAngleOffset=0,this.bulletAngleVariance=0,this.bulletSpeed=200,this.bulletSpeedVariance=0,this.bulletLifespan=0,this.bulletKillDistance=0,this.bulletGravity=new U.Point(0,0),this.bulletRotateToVelocity=!1,this.bulletKey="",this.bulletFrame="",this._bulletClass=U.Bullet,this._bulletCollideWorldBounds=!1,this._bulletKillType=U.Weapon.KILL_WORLD_BOUNDS,this._data={customBody:!1,width:0,height:0,offsetX:0,offsetY:0},this.bounds=new U.Rectangle,this.bulletBounds=e.world.bounds,this.bulletFrames=[],this.bulletFrameIndex=0,this.anims={},this.onFire=new U.Signal,this.onKill=new U.Signal,this.onFireLimit=new U.Signal,this.trackedSprite=null,this.trackedPointer=null,this.trackRotation=!1,this.trackOffset=new U.Point,this._nextFire=0,this._rotatedPoint=new U.Point},U.Weapon.prototype=Object.create(U.Plugin.prototype),U.Weapon.prototype.constructor=U.Weapon,U.Weapon.KILL_NEVER=0,U.Weapon.KILL_LIFESPAN=1,U.Weapon.KILL_DISTANCE=2,U.Weapon.KILL_WEAPON_BOUNDS=3,U.Weapon.KILL_CAMERA_BOUNDS=4,U.Weapon.KILL_WORLD_BOUNDS=5,U.Weapon.KILL_STATIC_BOUNDS=6,U.Weapon.prototype.createBullets=function(e,t,i,n){return void 0===e&&(e=1),void 0===n&&(n=this.game.world),this.bullets||(this.bullets=this.game.add.physicsGroup(U.Physics.ARCADE,n),this.bullets.classType=this._bulletClass),0!==e&&(-1===e&&(this.autoExpandBulletsGroup=!0,e=1),this.bullets.createMultiple(e,t,i),this.bullets.setAll("data.bulletManager",this),this.bulletKey=t,this.bulletFrame=i),this},U.Weapon.prototype.forEach=function(e,t){return this.bullets.forEachExists(e,t,arguments),this},U.Weapon.prototype.pauseAll=function(){return this.bullets.setAll("body.enable",!1),this},U.Weapon.prototype.resumeAll=function(){return this.bullets.setAll("body.enable",!0),this},U.Weapon.prototype.killAll=function(){return this.bullets.callAllExists("kill",!0),this.bullets.setAll("body.enable",!0),this},U.Weapon.prototype.resetShots=function(e){return void(this.shots=0)!==e&&(this.fireLimit=e),this},U.Weapon.prototype.destroy=function(){this.parent.remove(this,!1),this.bullets.destroy(),this.game=null,this.parent=null,this.active=!1,this.visible=!1},U.Weapon.prototype.update=function(){this._bulletKillType===U.Weapon.KILL_WEAPON_BOUNDS&&(this.trackedSprite?(this.trackedSprite.updateTransform(),this.bounds.centerOn(this.trackedSprite.worldPosition.x,this.trackedSprite.worldPosition.y)):this.trackedPointer&&this.bounds.centerOn(this.trackedPointer.worldX,this.trackedPointer.worldY)),this.autofire&&this.fire()},U.Weapon.prototype.trackSprite=function(e,t,i,n){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=!1),this.trackedPointer=null,this.trackedSprite=e,this.trackRotation=n,this.trackOffset.set(t,i),this},U.Weapon.prototype.trackPointer=function(e,t,i){return void 0===e&&(e=this.game.input.activePointer),void 0===t&&(t=0),void 0===i&&(i=0),this.trackedPointer=e,this.trackedSprite=null,this.trackRotation=!1,this.trackOffset.set(t,i),this},U.Weapon.prototype.fire=function(e,t,i){if(this.game.time.now<this._nextFire||0<this.fireLimit&&this.shots===this.fireLimit)return!1;var n=this.bulletSpeed;0!==this.bulletSpeedVariance&&(n+=U.Math.between(-this.bulletSpeedVariance,this.bulletSpeedVariance)),e?1<this.fireFrom.width?this.fireFrom.centerOn(e.x,e.y):(this.fireFrom.x=e.x,this.fireFrom.y=e.y):this.trackedSprite?(this.trackRotation?(this._rotatedPoint.set(this.trackedSprite.world.x+this.trackOffset.x,this.trackedSprite.world.y+this.trackOffset.y),this._rotatedPoint.rotate(this.trackedSprite.world.x,this.trackedSprite.world.y,this.trackedSprite.rotation),1<this.fireFrom.width?this.fireFrom.centerOn(this._rotatedPoint.x,this._rotatedPoint.y):(this.fireFrom.x=this._rotatedPoint.x,this.fireFrom.y=this._rotatedPoint.y)):1<this.fireFrom.width?this.fireFrom.centerOn(this.trackedSprite.world.x+this.trackOffset.x,this.trackedSprite.world.y+this.trackOffset.y):(this.fireFrom.x=this.trackedSprite.world.x+this.trackOffset.x,this.fireFrom.y=this.trackedSprite.world.y+this.trackOffset.y),this.bulletInheritSpriteSpeed&&(n+=this.trackedSprite.body.speed)):this.trackedPointer&&(1<this.fireFrom.width?this.fireFrom.centerOn(this.trackedPointer.world.x+this.trackOffset.x,this.trackedPointer.world.y+this.trackOffset.y):(this.fireFrom.x=this.trackedPointer.world.x+this.trackOffset.x,this.fireFrom.y=this.trackedPointer.world.y+this.trackOffset.y));var r=1<this.fireFrom.width?this.fireFrom.randomX:this.fireFrom.x,o=1<this.fireFrom.height?this.fireFrom.randomY:this.fireFrom.y,a=this.trackRotation?this.trackedSprite.angle:this.fireAngle;void 0!==t&&void 0!==i&&(a=this.game.math.radToDeg(Math.atan2(i-o,t-r))),0!==this.bulletAngleVariance&&(a+=U.Math.between(-this.bulletAngleVariance,this.bulletAngleVariance));var s=0,p=0;0===a||180===a?s=Math.cos(this.game.math.degToRad(a))*n:p=(90===a||270===a||(s=Math.cos(this.game.math.degToRad(a))*n),Math.sin(this.game.math.degToRad(a))*n);var l=null;if(this.autoExpandBulletsGroup?(l=this.bullets.getFirstExists(!1,!0,r,o,this.bulletKey,this.bulletFrame)).data.bulletManager=this:l=this.bullets.getFirstExists(!1),l){if(l.reset(r,o),l.data.fromX=r,l.data.fromY=o,l.data.killType=this.bulletKillType,l.data.killDistance=this.bulletKillDistance,l.data.rotateToVelocity=this.bulletRotateToVelocity,this.bulletKillType===U.Weapon.KILL_LIFESPAN&&(l.lifespan=this.bulletLifespan),l.angle=a+this.bulletAngleOffset,""!==this.bulletAnimation){if(null===l.animations.getAnimation(this.bulletAnimation)){var h=this.anims[this.bulletAnimation];l.animations.add(h.name,h.frames,h.frameRate,h.loop,h.useNumericIndex)}l.animations.play(this.bulletAnimation)}else this.bulletFrameCycle?(l.frame=this.bulletFrames[this.bulletFrameIndex],this.bulletFrameIndex++,this.bulletFrameIndex>=this.bulletFrames.length&&(this.bulletFrameIndex=0)):this.bulletFrameRandom&&(l.frame=this.bulletFrames[Math.floor(Math.random()*this.bulletFrames.length)]);if(l.data.bodyDirty&&(this._data.customBody&&l.body.setSize(this._data.width,this._data.height,this._data.offsetX,this._data.offsetY),l.body.collideWorldBounds=this.bulletCollideWorldBounds,l.data.bodyDirty=!1),l.body.velocity.set(s,p),l.body.gravity.set(this.bulletGravity.x,this.bulletGravity.y),0!==this.bulletSpeedVariance){var u=this.fireRate;(u+=U.Math.between(-this.fireRateVariance,this.fireRateVariance))<0&&(u=0),this._nextFire=this.game.time.now+u}else this._nextFire=this.game.time.now+this.fireRate;this.shots++,this.onFire.dispatch(l,this,n),0<this.fireLimit&&this.shots===this.fireLimit&&this.onFireLimit.dispatch(this,this.fireLimit)}return l},U.Weapon.prototype.fireAtPointer=function(e){return void 0===e&&(e=this.game.input.activePointer),this.fire(null,e.worldX,e.worldY)},U.Weapon.prototype.fireAtSprite=function(e){return this.fire(null,e.world.x,e.world.y)},U.Weapon.prototype.fireAtXY=function(e,t){return this.fire(null,e,t)},U.Weapon.prototype.setBulletBodyOffset=function(e,t,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),this._data.customBody=!0,this._data.width=e,this._data.height=t,this._data.offsetX=i,this._data.offsetY=n,this.bullets.callAll("body.setSize","body",e,t,i,n),this.bullets.setAll("data.bodyDirty",!1),this},U.Weapon.prototype.setBulletFrames=function(e,t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=!1),this.bulletFrames=U.ArrayUtils.numberArray(e,t),this.bulletFrameIndex=0,this.bulletFrameCycle=i,this.bulletFrameRandom=n,this},U.Weapon.prototype.addBulletAnimation=function(e,t,i,n,r){return this.anims[e]={name:e,frames:t,frameRate:i,loop:n,useNumericIndex:r},this.bullets.callAll("animations.add","animations",e,t,i,n,r),this.bulletAnimation=e,this},U.Weapon.prototype.debug=function(e,t,i){void 0===e&&(e=16),void 0===t&&(t=32),void 0===i&&(i=!1),this.game.debug.text("Weapon Plugin",e,t),this.game.debug.text("Bullets Alive: "+this.bullets.total+" - Total: "+this.bullets.length,e,t+24),i&&this.bullets.forEachExists(this.game.debug.body,this.game.debug,"rgba(255, 0, 255, 0.8)")},Object.defineProperty(U.Weapon.prototype,"bulletClass",{get:function(){return this._bulletClass},set:function(e){this._bulletClass=e,this.bullets.classType=this._bulletClass}}),Object.defineProperty(U.Weapon.prototype,"bulletKillType",{get:function(){return this._bulletKillType},set:function(e){switch(e){case U.Weapon.KILL_STATIC_BOUNDS:case U.Weapon.KILL_WEAPON_BOUNDS:this.bulletBounds=this.bounds;break;case U.Weapon.KILL_CAMERA_BOUNDS:this.bulletBounds=this.game.camera.view;break;case U.Weapon.KILL_WORLD_BOUNDS:this.bulletBounds=this.game.world.bounds}this._bulletKillType=e}}),Object.defineProperty(U.Weapon.prototype,"bulletCollideWorldBounds",{get:function(){return this._bulletCollideWorldBounds},set:function(e){this._bulletCollideWorldBounds=e,this.bullets.setAll("body.collideWorldBounds",e),this.bullets.setAll("data.bodyDirty",!1)}}),Object.defineProperty(U.Weapon.prototype,"x",{get:function(){return this.fireFrom.x},set:function(e){this.fireFrom.x=e}}),Object.defineProperty(U.Weapon.prototype,"y",{get:function(){return this.fireFrom.y},set:function(e){this.fireFrom.y=e}}),U.Bullet=function(e,t,i,n,r){U.Sprite.call(this,e,t,i,n,r),this.anchor.set(.5),this.data={bulletManager:null,fromX:0,fromY:0,bodyDirty:!0,rotateToVelocity:!1,killType:0,killDistance:0}},U.Bullet.prototype=Object.create(U.Sprite.prototype),U.Bullet.prototype.constructor=U.Bullet,U.Bullet.prototype.kill=function(){return this.alive=!1,this.exists=!1,this.visible=!1,this.data.bulletManager.onKill.dispatch(this),this},U.Bullet.prototype.update=function(){this.exists&&(this.data.killType>U.Weapon.KILL_LIFESPAN&&(this.data.killType===U.Weapon.KILL_DISTANCE?this.game.physics.arcade.distanceToXY(this,this.data.fromX,this.data.fromY,!0)>this.data.killDistance&&this.kill():this.data.bulletManager.bulletBounds.intersects(this)||this.kill()),this.data.rotateToVelocity&&(this.rotation=Math.atan2(this.body.velocity.y,this.body.velocity.x)),this.data.bulletManager.bulletWorldWrap&&this.game.world.wrap(this,this.data.bulletManager.bulletWorldWrapPadding))},U.Video=function(e,t,i){if(void 0===t&&(t=null),void 0===i&&(i=null),this.game=e,this.key=t,this.width=0,this.height=0,this.type=U.VIDEO,this.disableTextureUpload=!1,this.touchLocked=!1,this.onPlay=new U.Signal,this.onChangeSource=new U.Signal,this.onComplete=new U.Signal,this.onAccess=new U.Signal,this.onError=new U.Signal,this.onTimeout=new U.Signal,this.timeout=15e3,this._timeOutID=null,this.video=null,this.videoStream=null,this.isStreaming=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._codeMuted=!1,this._muted=!1,this._codePaused=!1,this._paused=!1,this._pending=!1,this._autoplay=!1,this._endCallback=null,this._playCallback=null,t&&this.game.cache.checkVideoKey(t)){var n=this.game.cache.getVideo(t);n.isBlob?this.createVideoFromBlob(n.data):this.video=n.data,this.width=this.video.videoWidth,this.height=this.video.videoHeight}else i&&this.createVideoFromURL(i,!1);this.video&&!i?this.baseTexture=new PIXI.BaseTexture(this.video):this.baseTexture=new PIXI.BaseTexture(U.Cache.DEFAULT.baseTexture.source),this.baseTexture.forceLoaded(this.width,this.height),this.texture=new PIXI.Texture(this.baseTexture),this.textureFrame=new U.Frame(0,0,0,this.width,this.height,"video"),this.texture.setFrame(this.textureFrame),this.texture.valid=!1,null!==t&&this.video&&(this.texture.valid=this.video.canplay),this.snapshot=null,U.BitmapData&&(this.snapshot=new U.BitmapData(this.game,"",this.width,this.height)),!this.game.device.cocoonJS&&(this.game.device.iOS||this.game.device.android)||window.PhaserGlobal&&window.PhaserGlobal.fakeiOSTouchLock?this.setTouchLock():n&&(n.locked=!1)},U.Video.prototype={connectToMediaStream:function(e,t){return e&&t&&(this.video=e,this.videoStream=t,this.isStreaming=!0,this.baseTexture.source=this.video,this.updateTexture(null,this.video.videoWidth,this.video.videoHeight),this.onAccess.dispatch(this)),this},startMediaStream:function(e,t,i){if(void 0===e&&(e=!1),void 0===t&&(t=null),void 0===i&&(i=null),!this.game.device.getUserMedia)return this.onError.dispatch(this,"No getUserMedia"),!1;null!==this.videoStream&&(this.videoStream.active?this.videoStream.active=!1:this.videoStream.stop()),this.removeVideoElement(),this.video=document.createElement("video"),this.video.setAttribute("autoplay","autoplay"),null!==t&&(this.video.width=t),null!==i&&(this.video.height=i),this._timeOutID=window.setTimeout(this.getUserMediaTimeout.bind(this),this.timeout);try{navigator.getUserMedia({audio:e,video:!0},this.getUserMediaSuccess.bind(this),this.getUserMediaError.bind(this))}catch(e){this.getUserMediaError(e)}return this},getUserMediaTimeout:function(){clearTimeout(this._timeOutID),this.onTimeout.dispatch(this)},getUserMediaError:function(e){clearTimeout(this._timeOutID),this.onError.dispatch(this,e)},getUserMediaSuccess:function(e){clearTimeout(this._timeOutID),this.videoStream=e,void 0!==this.video.mozSrcObject?this.video.mozSrcObject=e:this.video.src=window.URL&&window.URL.createObjectURL(e)||e;var r=this;this.video.onloadeddata=function(){var n=10;!function e(){if(0<n)if(0<r.video.videoWidth){var t=r.video.videoWidth,i=r.video.videoHeight;isNaN(r.video.videoHeight)&&(i=t/(4/3)),r.video.play(),r.isStreaming=!0,r.baseTexture.source=r.video,r.updateTexture(null,t,i),r.onAccess.dispatch(r)}else window.setTimeout(e,500);n--}()}},createVideoFromBlob:function(e){var t=this;return this.video=document.createElement("video"),this.video.controls=!1,this.video.setAttribute("autoplay","autoplay"),this.video.addEventListener("loadeddata",function(e){t.updateTexture(e)},!0),this.video.src=window.URL.createObjectURL(e),this.video.canplay=!0,this},createVideoFromURL:function(e,t){return void 0===t&&(t=!1),this.texture&&(this.texture.valid=!1),this.video=document.createElement("video"),this.video.controls=!1,t&&this.video.setAttribute("autoplay","autoplay"),this.video.src=e,this.video.canplay=!0,this.video.load(),this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval),this.key=e,this},updateTexture:function(e,t,i){var n=!1;null==t&&(t=this.video.videoWidth,n=!0),null==i&&(i=this.video.videoHeight),this.width=t,this.height=i,this.baseTexture.source!==this.video&&(this.baseTexture.source=this.video),this.baseTexture.forceLoaded(t,i),this.texture.frame.resize(t,i),this.texture.width=t,this.texture.height=i,this.texture.valid=!0,this.snapshot&&this.snapshot.resize(t,i),n&&null!==this.key&&(this.onChangeSource.dispatch(this,t,i),this._autoplay&&(this.video.play(),this.onPlay.dispatch(this,this.loop,this.playbackRate)))},complete:function(){this.onComplete.dispatch(this)},play:function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=1),this.game.sound.onMute&&(this.game.sound.onMute.add(this.setMute,this),this.game.sound.onUnMute.add(this.unsetMute,this),this.game.sound.mute&&this.setMute()),this.game.onPause.add(this.setPause,this),this.game.onResume.add(this.setResume,this),this._endCallback=this.complete.bind(this),this.video.addEventListener("ended",this._endCallback,!0),this.video.addEventListener("webkitendfullscreen",this._endCallback,!0),this.video.loop=e?"loop":"",this.video.playbackRate=t,this.touchLocked?this._pending=!0:(this._pending=!1,null!==this.key&&(4!==this.video.readyState?(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval)):(this._playCallback=this.playHandler.bind(this),this.video.addEventListener("playing",this._playCallback,!0))),this.video.play(),this.onPlay.dispatch(this,e,t)),this},playHandler:function(){this.video.removeEventListener("playing",this._playCallback,!0),this.updateTexture()},stop:function(){return this.game.sound.onMute&&(this.game.sound.onMute.remove(this.setMute,this),this.game.sound.onUnMute.remove(this.unsetMute,this)),this.game.onPause.remove(this.setPause,this),this.game.onResume.remove(this.setResume,this),this.isStreaming?(this.video.mozSrcObject?(this.video.mozSrcObject.stop(),this.video.src=null):(this.video.src="",this.videoStream.active?this.videoStream.active=!1:this.videoStream.getTracks?this.videoStream.getTracks().forEach(function(e){e.stop()}):this.videoStream.stop()),this.videoStream=null,this.isStreaming=!1):(this.video.removeEventListener("ended",this._endCallback,!0),this.video.removeEventListener("webkitendfullscreen",this._endCallback,!0),this.video.removeEventListener("playing",this._playCallback,!0),this.touchLocked?this._pending=!1:this.video.pause()),this},add:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)e[t].loadTexture&&e[t].loadTexture(this);else e.loadTexture(this);return this},addToWorld:function(e,t,i,n,r,o){r=r||1,o=o||1;var a=this.game.add.image(e,t,this);return a.anchor.set(i,n),a.scale.set(r,o),a},render:function(){!this.disableTextureUpload&&this.playing&&this.baseTexture.dirty()},setMute:function(){this._muted||(this._muted=!0,this.video.muted=!0)},unsetMute:function(){this._muted&&!this._codeMuted&&(this._muted=!1,this.video.muted=!1)},setPause:function(){this._paused||this.touchLocked||(this._paused=!0,this.video.pause())},setResume:function(){!this._paused||this._codePaused||this.touchLocked||(this._paused=!1,this.video.ended||this.video.play())},changeSource:function(e,t){return void 0===t&&(t=!0),this.texture.valid=!1,this.video.pause(),this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval),this.video.src=e,this.video.load(),(this._autoplay=t)||(this.paused=!0),this},checkVideoProgress:function(){4===this.video.readyState?this.updateTexture():(this.retry--,0<this.retry&&(this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval)))},setTouchLock:function(){this.game.input.touch.addTouchLockCallback(this.unlock,this),this.touchLocked=!0},unlock:function(){if(this.touchLocked=!1,this.video.play(),this.onPlay.dispatch(this,this.loop,this.playbackRate),this.key){var e=this.game.cache.getVideo(this.key);e&&!e.isBlob&&(e.locked=!1)}return!0},grab:function(e,t,i){if(void 0===e&&(e=!1),void 0===t&&(t=1),void 0===i&&(i=null),null!==this.snapshot)return e&&this.snapshot.cls(),this.snapshot.copy(this.video,0,0,this.width,this.height,0,0,this.width,this.height,0,0,0,1,1,t,i),this.snapshot},removeVideoElement:function(){if(this.video){for(this.video.parentNode&&this.video.parentNode.removeChild(this.video);this.video.hasChildNodes();)this.video.removeChild(this.video.firstChild);this.video.removeAttribute("autoplay"),this.video.removeAttribute("src"),this.video=null}},destroy:function(){this.stop(),this.removeVideoElement(),this.touchLocked&&this.game.input.touch.removeTouchLockCallback(this.unlock,this),this._retryID&&window.clearTimeout(this._retryID)}},Object.defineProperty(U.Video.prototype,"currentTime",{get:function(){return this.video?this.video.currentTime:0},set:function(e){this.video.currentTime=e}}),Object.defineProperty(U.Video.prototype,"duration",{get:function(){return this.video?this.video.duration:0}}),Object.defineProperty(U.Video.prototype,"progress",{get:function(){return this.video?this.video.currentTime/this.video.duration:0}}),Object.defineProperty(U.Video.prototype,"mute",{get:function(){return this._muted},set:function(e){if(e=e||null){if(this._muted)return;this._codeMuted=!0,this.setMute()}else{if(!this._muted)return;this._codeMuted=!1,this.unsetMute()}}}),Object.defineProperty(U.Video.prototype,"paused",{get:function(){return this._paused},set:function(e){if(e=e||null,!this.touchLocked)if(e){if(this._paused)return;this._codePaused=!0,this.setPause()}else{if(!this._paused)return;this._codePaused=!1,this.setResume()}}}),Object.defineProperty(U.Video.prototype,"volume",{get:function(){return this.video?this.video.volume:1},set:function(e){e<0?e=0:1<e&&(e=1),this.video&&(this.video.volume=e)}}),Object.defineProperty(U.Video.prototype,"playbackRate",{get:function(){return this.video?this.video.playbackRate:1},set:function(e){this.video&&(this.video.playbackRate=e)}}),Object.defineProperty(U.Video.prototype,"loop",{get:function(){return!!this.video&&this.video.loop},set:function(e){e&&this.video?this.video.loop="loop":this.video&&(this.video.loop="")}}),Object.defineProperty(U.Video.prototype,"playing",{get:function(){return!(this.video.paused&&this.video.ended)}}),U.Video.prototype.constructor=U.Video,void 0===PIXI.blendModes&&(PIXI.blendModes=U.blendModes),void 0===PIXI.scaleModes&&(PIXI.scaleModes=U.scaleModes),void 0===PIXI.Texture.emptyTexture&&(PIXI.Texture.emptyTexture=new PIXI.Texture(new PIXI.BaseTexture)),void 0===PIXI.DisplayObject._tempMatrix&&(PIXI.DisplayObject._tempMatrix=new PIXI.Matrix),void 0===PIXI.RenderTexture.tempMatrix&&(PIXI.RenderTexture.tempMatrix=new PIXI.Matrix),PIXI.Graphics&&void 0===PIXI.Graphics.POLY&&(PIXI.Graphics.POLY=U.POLYGON,PIXI.Graphics.RECT=U.RECTANGLE,PIXI.Graphics.CIRC=U.CIRCLE,PIXI.Graphics.ELIP=U.ELLIPSE,PIXI.Graphics.RREC=U.ROUNDEDRECTANGLE),PIXI.TextureSilentFail=!0,"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=U),exports.Phaser=U):"undefined"!=typeof define&&define.amd?define("Phaser",e.Phaser=U):e.Phaser=U,U}.call(this),function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(b,e){"use strict";var t=[],S=b.document,n=Object.getPrototypeOf,s=t.slice,y=t.concat,p=t.push,r=t.indexOf,i={},o=i.toString,_=i.hasOwnProperty,a=_.toString,l=a.call(Object),x={};function m(e,t){var i=(t=t||S).createElement("script");i.text=e,t.head.appendChild(i).parentNode.removeChild(i)}var C=function(e,t){return new C.fn.init(e,t)},h=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,u=/^-ms-/,d=/-([a-z])/g,c=function(e,t){return t.toUpperCase()};function g(e){var t=!!e&&"length"in e&&e.length,i=C.type(e);return"function"!==i&&!C.isWindow(e)&&("array"===i||0===t||"number"==typeof t&&0<t&&t-1 in e)}C.fn=C.prototype={jquery:"3.1.1",constructor:C,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=C.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return C.each(this,e)},map:function(i){return this.pushStack(C.map(this,function(e,t){return i.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(0<=i&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:p,sort:t.sort,splice:t.splice},C.extend=C.fn.extend=function(){var e,t,i,n,r,o,a=arguments[0]||{},s=1,p=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||C.isFunction(a)||(a={}),s===p&&(a=this,s--);s<p;s++)if(null!=(e=arguments[s]))for(t in e)i=a[t],a!==(n=e[t])&&(l&&n&&(C.isPlainObject(n)||(r=C.isArray(n)))?(o=r?(r=!1,i&&C.isArray(i)?i:[]):i&&C.isPlainObject(i)?i:{},a[t]=C.extend(l,o,n)):void 0!==n&&(a[t]=n));return a},C.extend({expando:"jQuery"+("3.1.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===C.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=C.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==o.call(e)||(t=n(e))&&("function"!=typeof(i=_.call(t,"constructor")&&t.constructor)||a.call(i)!==l))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?i[o.call(e)]||"object":typeof e},globalEval:function(e){m(e)},camelCase:function(e){return e.replace(u,"ms-").replace(d,c)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,n=0;if(g(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(h,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(g(Object(e))?C.merge(i,"string"==typeof e?[e]:e):p.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:r.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;n<i;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n=[],r=0,o=e.length,a=!i;r<o;r++)!t(e[r],r)!==a&&n.push(e[r]);return n},map:function(e,t,i){var n,r,o=0,a=[];if(g(e))for(n=e.length;o<n;o++)null!=(r=t(e[o],o,i))&&a.push(r);else for(o in e)null!=(r=t(e[o],o,i))&&a.push(r);return y.apply([],a)},guid:1,proxy:function(e,t){var i,n,r;if("string"==typeof t&&(i=e[t],t=e,e=i),C.isFunction(e))return n=s.call(arguments,2),(r=function(){return e.apply(t||this,n.concat(s.call(arguments)))}).guid=e.guid=e.guid||C.guid++,r},now:Date.now,support:x}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=t[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){i["[object "+t+"]"]=t.toLowerCase()});var f=function(i){var e,c,v,o,r,_,u,y,z,p,l,w,b,a,S,x,s,h,m,C="sizzle"+1*new Date,g=i.document,M=0,n=0,d=ae(),f=ae(),P=ae(),k=function(e,t){return e===t&&(l=!0),0},T={}.hasOwnProperty,t=[],A=t.pop,O=t.push,E=t.push,G=t.slice,D=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},I="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",R="\\["+L+"*("+B+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+L+"*\\]",F=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+R+")*)|.*)\\)|)",j=new RegExp(L+"+","g"),N=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),U=new RegExp("^"+L+"*,"+L+"*"),V=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),H=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),W=new RegExp(F),q=new RegExp("^"+B+"$"),X={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+R),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+I+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,$=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ee=function(e,t,i){var n="0x"+t-65536;return n!=n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ne=function(){w()},re=ge(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{E.apply(t=G.call(g.childNodes),g.childNodes),t[g.childNodes.length].nodeType}catch(e){E={apply:t.length?function(e,t){O.apply(e,G.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function oe(e,t,i,n){var r,o,a,s,p,l,h,u=t&&t.ownerDocument,d=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==d&&9!==d&&11!==d)return i;if(!n&&((t?t.ownerDocument||t:g)!==b&&w(t),t=t||b,S)){if(11!==d&&(p=J.exec(e)))if(r=p[1]){if(9===d){if(!(a=t.getElementById(r)))return i;if(a.id===r)return i.push(a),i}else if(u&&(a=u.getElementById(r))&&m(t,a)&&a.id===r)return i.push(a),i}else{if(p[2])return E.apply(i,t.getElementsByTagName(e)),i;if((r=p[3])&&c.getElementsByClassName&&t.getElementsByClassName)return E.apply(i,t.getElementsByClassName(r)),i}if(c.qsa&&!P[e+" "]&&(!x||!x.test(e))){if(1!==d)u=t,h=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(te,ie):t.setAttribute("id",s=C),o=(l=_(e)).length;o--;)l[o]="#"+s+" "+me(l[o]);h=l.join(","),u=Q.test(e)&&ye(t.parentNode)||t}if(h)try{return E.apply(i,u.querySelectorAll(h)),i}catch(e){}finally{s===C&&t.removeAttribute("id")}}}return y(e.replace(N,"$1"),t,i,n)}function ae(){var n=[];return function e(t,i){return n.push(t+" ")>v.cacheLength&&delete e[n.shift()],e[t+" "]=i}}function se(e){return e[C]=!0,e}function pe(e){var t=b.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){for(var i=e.split("|"),n=i.length;n--;)v.attrHandle[i[n]]=t}function he(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function ue(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function de(i){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===i}}function ce(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&re(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function _e(a){return se(function(o){return o=+o,se(function(e,t){for(var i,n=a([],e.length,o),r=n.length;r--;)e[i=n[r]]&&(e[i]=!(t[i]=e[i]))})})}function ye(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in c=oe.support={},r=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},w=oe.setDocument=function(e){var t,i,n=e?e.ownerDocument||e:g;return n!==b&&9===n.nodeType&&n.documentElement&&(a=(b=n).documentElement,S=!r(b),g!==b&&(i=b.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ne,!1):i.attachEvent&&i.attachEvent("onunload",ne)),c.attributes=pe(function(e){return e.className="i",!e.getAttribute("className")}),c.getElementsByTagName=pe(function(e){return e.appendChild(b.createComment("")),!e.getElementsByTagName("*").length}),c.getElementsByClassName=Z.test(b.getElementsByClassName),c.getById=pe(function(e){return a.appendChild(e).id=C,!b.getElementsByName||!b.getElementsByName(C).length}),c.getById?(v.filter.ID=function(e){var t=e.replace($,ee);return function(e){return e.getAttribute("id")===t}},v.find.ID=function(e,t){if(void 0!==t.getElementById&&S){var i=t.getElementById(e);return i?[i]:[]}}):(v.filter.ID=function(e){var i=e.replace($,ee);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===i}},v.find.ID=function(e,t){if(void 0!==t.getElementById&&S){var i,n,r,o=t.getElementById(e);if(o){if((i=o.getAttributeNode("id"))&&i.value===e)return[o];for(r=t.getElementsByName(e),n=0;o=r[n++];)if((i=o.getAttributeNode("id"))&&i.value===e)return[o]}return[]}}),v.find.TAG=c.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):c.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],r=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;i=o[r++];)1===i.nodeType&&n.push(i);return n},v.find.CLASS=c.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&S)return t.getElementsByClassName(e)},s=[],x=[],(c.qsa=Z.test(b.querySelectorAll))&&(pe(function(e){a.appendChild(e).innerHTML="<a id='"+C+"'></a><select id='"+C+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&x.push("[*^$]="+L+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||x.push("\\["+L+"*(?:value|"+I+")"),e.querySelectorAll("[id~="+C+"-]").length||x.push("~="),e.querySelectorAll(":checked").length||x.push(":checked"),e.querySelectorAll("a#"+C+"+*").length||x.push(".#.+[+~]")}),pe(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=b.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&x.push("name"+L+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&x.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&x.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),x.push(",.*:")})),(c.matchesSelector=Z.test(h=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&pe(function(e){c.disconnectedMatch=h.call(e,"*"),h.call(e,"[s!='']:x"),s.push("!=",F)}),x=x.length&&new RegExp(x.join("|")),s=s.length&&new RegExp(s.join("|")),t=Z.test(a.compareDocumentPosition),m=t||Z.test(a.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return l=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!c.sortDetached&&t.compareDocumentPosition(e)===i?e===b||e.ownerDocument===g&&m(g,e)?-1:t===b||t.ownerDocument===g&&m(g,t)?1:p?D(p,e)-D(p,t):0:4&i?-1:1)}:function(e,t){if(e===t)return l=!0,0;var i,n=0,r=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!r||!o)return e===b?-1:t===b?1:r?-1:o?1:p?D(p,e)-D(p,t):0;if(r===o)return he(e,t);for(i=e;i=i.parentNode;)a.unshift(i);for(i=t;i=i.parentNode;)s.unshift(i);for(;a[n]===s[n];)n++;return n?he(a[n],s[n]):a[n]===g?-1:s[n]===g?1:0}),b},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==b&&w(e),t=t.replace(H,"='$1']"),c.matchesSelector&&S&&!P[t+" "]&&(!s||!s.test(t))&&(!x||!x.test(t)))try{var i=h.call(e,t);if(i||c.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return 0<oe(t,b,null,[e]).length},oe.contains=function(e,t){return(e.ownerDocument||e)!==b&&w(e),m(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==b&&w(e);var i=v.attrHandle[t.toLowerCase()],n=i&&T.call(v.attrHandle,t.toLowerCase())?i(e,t,!S):void 0;return void 0!==n?n:c.attributes||!S?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},oe.escape=function(e){return(e+"").replace(te,ie)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,i=[],n=0,r=0;if(l=!c.detectDuplicates,p=!c.sortStable&&e.slice(0),e.sort(k),l){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return p=null,e},o=oe.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=o(t);return i},(v=oe.selectors={cacheLength:50,createPseudo:se,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace($,ee),e[3]=(e[3]||e[4]||e[5]||"").replace($,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return X.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&W.test(i)&&(t=_(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace($,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=d[e+" "];return t||(t=new RegExp("(^|"+L+")"+e+"("+L+"|$)"))&&d(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(i,n,r){return function(e){var t=oe.attr(e,i);return null==t?"!="===n:!n||(t+="","="===n?t===r:"!="===n?t!==r:"^="===n?r&&0===t.indexOf(r):"*="===n?r&&-1<t.indexOf(r):"$="===n?r&&t.slice(-r.length)===r:"~="===n?-1<(" "+t.replace(j," ")+" ").indexOf(r):"|="===n&&(t===r||t.slice(0,r.length+1)===r+"-"))}},CHILD:function(_,e,t,y,x){var m="nth"!==_.slice(0,3),g="last"!==_.slice(-4),f="of-type"===e;return 1===y&&0===x?function(e){return!!e.parentNode}:function(e,t,i){var n,r,o,a,s,p,l=m!==g?"nextSibling":"previousSibling",h=e.parentNode,u=f&&e.nodeName.toLowerCase(),d=!i&&!f,c=!1;if(h){if(m){for(;l;){for(a=e;a=a[l];)if(f?a.nodeName.toLowerCase()===u:1===a.nodeType)return!1;p=l="only"===_&&!p&&"nextSibling"}return!0}if(p=[g?h.firstChild:h.lastChild],g&&d){for(c=(s=(n=(r=(o=(a=h)[C]||(a[C]={}))[a.uniqueID]||(o[a.uniqueID]={}))[_]||[])[0]===M&&n[1])&&n[2],a=s&&h.childNodes[s];a=++s&&a&&a[l]||(c=s=0)||p.pop();)if(1===a.nodeType&&++c&&a===e){r[_]=[M,s,c];break}}else if(d&&(c=s=(n=(r=(o=(a=e)[C]||(a[C]={}))[a.uniqueID]||(o[a.uniqueID]={}))[_]||[])[0]===M&&n[1]),!1===c)for(;(a=++s&&a&&a[l]||(c=s=0)||p.pop())&&((f?a.nodeName.toLowerCase()!==u:1!==a.nodeType)||!++c||(d&&((r=(o=a[C]||(a[C]={}))[a.uniqueID]||(o[a.uniqueID]={}))[_]=[M,c]),a!==e)););return(c-=x)===y||c%y==0&&0<=c/y}}},PSEUDO:function(e,o){var t,a=v.pseudos[e]||v.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return a[C]?a(o):1<a.length?(t=[e,e,"",o],v.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,t){for(var i,n=a(e,o),r=n.length;r--;)e[i=D(e,n[r])]=!(t[i]=n[r])}):function(e){return a(e,0,t)}):a}},pseudos:{not:se(function(e){var n=[],r=[],s=u(e.replace(N,"$1"));return s[C]?se(function(e,t,i,n){for(var r,o=s(e,null,n,[]),a=e.length;a--;)(r=o[a])&&(e[a]=!(t[a]=r))}):function(e,t,i){return n[0]=e,s(n,null,i,r),n[0]=null,!r.pop()}}),has:se(function(t){return function(e){return 0<oe(t,e).length}}),contains:se(function(t){return t=t.replace($,ee),function(e){return-1<(e.textContent||e.innerText||o(e)).indexOf(t)}}),lang:se(function(i){return q.test(i||"")||oe.error("unsupported lang: "+i),i=i.replace($,ee).toLowerCase(),function(e){var t;do{if(t=S?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===i||0===t.indexOf(i+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=i.location&&i.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===b.activeElement&&(!b.hasFocus||b.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ce(!1),disabled:ce(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!v.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:_e(function(){return[0]}),last:_e(function(e,t){return[t-1]}),eq:_e(function(e,t,i){return[i<0?i+t:i]}),even:_e(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:_e(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:_e(function(e,t,i){for(var n=i<0?i+t:i;0<=--n;)e.push(n);return e}),gt:_e(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}}).pseudos.nth=v.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})v.pseudos[e]=ue(e);for(e in{submit:!0,reset:!0})v.pseudos[e]=de(e);function xe(){}function me(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function ge(s,e,t){var p=e.dir,l=e.next,h=l||p,u=t&&"parentNode"===h,d=n++;return e.first?function(e,t,i){for(;e=e[p];)if(1===e.nodeType||u)return s(e,t,i);return!1}:function(e,t,i){var n,r,o,a=[M,d];if(i){for(;e=e[p];)if((1===e.nodeType||u)&&s(e,t,i))return!0}else for(;e=e[p];)if(1===e.nodeType||u)if(r=(o=e[C]||(e[C]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[p]||e;else{if((n=r[h])&&n[0]===M&&n[1]===d)return a[2]=n[2];if((r[h]=a)[2]=s(e,t,i))return!0}return!1}}function fe(r){return 1<r.length?function(e,t,i){for(var n=r.length;n--;)if(!r[n](e,t,i))return!1;return!0}:r[0]}function ve(e,t,i,n,r){for(var o,a=[],s=0,p=e.length,l=null!=t;s<p;s++)(o=e[s])&&(i&&!i(o,n,r)||(a.push(o),l&&t.push(s)));return a}function ze(c,_,y,x,m,e){return x&&!x[C]&&(x=ze(x)),m&&!m[C]&&(m=ze(m,e)),se(function(e,t,i,n){var r,o,a,s=[],p=[],l=t.length,h=e||function(e,t,i){for(var n=0,r=t.length;n<r;n++)oe(e,t[n],i);return i}(_||"*",i.nodeType?[i]:i,[]),u=!c||!e&&_?h:ve(h,s,c,i,n),d=y?m||(e?c:l||x)?[]:t:u;if(y&&y(u,d,i,n),x)for(r=ve(d,p),x(r,[],i,n),o=r.length;o--;)(a=r[o])&&(d[p[o]]=!(u[p[o]]=a));if(e){if(m||c){if(m){for(r=[],o=d.length;o--;)(a=d[o])&&r.push(u[o]=a);m(null,d=[],r,n)}for(o=d.length;o--;)(a=d[o])&&-1<(r=m?D(e,a):s[o])&&(e[r]=!(t[r]=a))}}else d=ve(d===t?d.splice(l,d.length):d),m?m(null,t,d,n):E.apply(t,d)})}function we(e){for(var r,t,i,n=e.length,o=v.relative[e[0].type],a=o||v.relative[" "],s=o?1:0,p=ge(function(e){return e===r},a,!0),l=ge(function(e){return-1<D(r,e)},a,!0),h=[function(e,t,i){var n=!o&&(i||t!==z)||((r=t).nodeType?p(e,t,i):l(e,t,i));return r=null,n}];s<n;s++)if(t=v.relative[e[s].type])h=[ge(fe(h),t)];else{if((t=v.filter[e[s].type].apply(null,e[s].matches))[C]){for(i=++s;i<n&&!v.relative[e[i].type];i++);return ze(1<s&&fe(h),1<s&&me(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(N,"$1"),t,s<i&&we(e.slice(s,i)),i<n&&we(e=e.slice(i)),i<n&&me(e))}h.push(t)}return fe(h)}return xe.prototype=v.filters=v.pseudos,v.setFilters=new xe,_=oe.tokenize=function(e,t){var i,n,r,o,a,s,p,l=f[e+" "];if(l)return t?0:l.slice(0);for(a=e,s=[],p=v.preFilter;a;){for(o in i&&!(n=U.exec(a))||(n&&(a=a.slice(n[0].length)||a),s.push(r=[])),i=!1,(n=V.exec(a))&&(i=n.shift(),r.push({value:i,type:n[0].replace(N," ")}),a=a.slice(i.length)),v.filter)!(n=X[o].exec(a))||p[o]&&!(n=p[o](n))||(i=n.shift(),r.push({value:i,type:o,matches:n}),a=a.slice(i.length));if(!i)break}return t?a.length:a?oe.error(e):f(e,s).slice(0)},u=oe.compile=function(e,t){var i,x,m,g,f,n,r=[],o=[],a=P[e+" "];if(!a){for(t||(t=_(e)),i=t.length;i--;)(a=we(t[i]))[C]?r.push(a):o.push(a);(a=P(e,(x=o,g=0<(m=r).length,f=0<x.length,n=function(e,t,i,n,r){var o,a,s,p=0,l="0",h=e&&[],u=[],d=z,c=e||f&&v.find.TAG("*",r),_=M+=null==d?1:Math.random()||.1,y=c.length;for(r&&(z=t===b||t||r);l!==y&&null!=(o=c[l]);l++){if(f&&o){for(a=0,t||o.ownerDocument===b||(w(o),i=!S);s=x[a++];)if(s(o,t||b,i)){n.push(o);break}r&&(M=_)}g&&((o=!s&&o)&&p--,e&&h.push(o))}if(p+=l,g&&l!==p){for(a=0;s=m[a++];)s(h,u,t,i);if(e){if(0<p)for(;l--;)h[l]||u[l]||(u[l]=A.call(n));u=ve(u)}E.apply(n,u),r&&!e&&0<u.length&&1<p+m.length&&oe.uniqueSort(n)}return r&&(M=_,z=d),h},g?se(n):n))).selector=e}return a},y=oe.select=function(e,t,i,n){var r,o,a,s,p,l="function"==typeof e&&e,h=!n&&_(e=l.selector||e);if(i=i||[],1===h.length){if(2<(o=h[0]=h[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&S&&v.relative[o[1].type]){if(!(t=(v.find.ID(a.matches[0].replace($,ee),t)||[])[0]))return i;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=X.needsContext.test(e)?0:o.length;r--&&(a=o[r],!v.relative[s=a.type]);)if((p=v.find[s])&&(n=p(a.matches[0].replace($,ee),Q.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(r,1),!(e=n.length&&me(o)))return E.apply(i,n),i;break}}return(l||u(e,h))(n,t,!S,i,!t||Q.test(e)&&ye(t.parentNode)||t),i},c.sortStable=C.split("").sort(k).join("")===C,c.detectDuplicates=!!l,w(),c.sortDetached=pe(function(e){return 1&e.compareDocumentPosition(b.createElement("fieldset"))}),pe(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||le("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),c.attributes&&pe(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||le("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),pe(function(e){return null==e.getAttribute("disabled")})||le(I,function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),oe}(b);C.find=f,C.expr=f.selectors,C.expr[":"]=C.expr.pseudos,C.uniqueSort=C.unique=f.uniqueSort,C.text=f.getText,C.isXMLDoc=f.isXML,C.contains=f.contains,C.escapeSelector=f.escape;var v=function(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&C(e).is(i))break;n.push(e)}return n},z=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},w=C.expr.match.needsContext,M=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,P=/^.[^:#\[\.,]*$/;function k(e,i,n){return C.isFunction(i)?C.grep(e,function(e,t){return!!i.call(e,t,e)!==n}):i.nodeType?C.grep(e,function(e){return e===i!==n}):"string"!=typeof i?C.grep(e,function(e){return-1<r.call(i,e)!==n}):P.test(i)?C.filter(i,e,n):(i=C.filter(i,e),C.grep(e,function(e){return-1<r.call(i,e)!==n&&1===e.nodeType}))}C.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?C.find.matchesSelector(n,e)?[n]:[]:C.find.matches(e,C.grep(t,function(e){return 1===e.nodeType}))},C.fn.extend({find:function(e){var t,i,n=this.length,r=this;if("string"!=typeof e)return this.pushStack(C(e).filter(function(){for(t=0;t<n;t++)if(C.contains(r[t],this))return!0}));for(i=this.pushStack([]),t=0;t<n;t++)C.find(e,r[t],i);return 1<n?C.uniqueSort(i):i},filter:function(e){return this.pushStack(k(this,e||[],!1))},not:function(e){return this.pushStack(k(this,e||[],!0))},is:function(e){return!!k(this,"string"==typeof e&&w.test(e)?C(e):e||[],!1).length}});var T,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(C.fn.init=function(e,t,i){var n,r;if(!e)return this;if(i=i||T,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):C.isFunction(e)?void 0!==i.ready?i.ready(e):e(C):C.makeArray(e,this);if(!(n="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:A.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof C?t[0]:t,C.merge(this,C.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:S,!0)),M.test(n[1])&&C.isPlainObject(t))for(n in t)C.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(r=S.getElementById(n[2]))&&(this[0]=r,this.length=1),this}).prototype=C.fn,T=C(S);var O=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};function G(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}C.fn.extend({has:function(e){var t=C(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(C.contains(this,t[e]))return!0})},closest:function(e,t){var i,n=0,r=this.length,o=[],a="string"!=typeof e&&C(e);if(!w.test(e))for(;n<r;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(a?-1<a.index(i):1===i.nodeType&&C.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(1<o.length?C.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?r.call(C(e),this[0]):r.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),C.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return v(e,"parentNode")},parentsUntil:function(e,t,i){return v(e,"parentNode",i)},next:function(e){return G(e,"nextSibling")},prev:function(e){return G(e,"previousSibling")},nextAll:function(e){return v(e,"nextSibling")},prevAll:function(e){return v(e,"previousSibling")},nextUntil:function(e,t,i){return v(e,"nextSibling",i)},prevUntil:function(e,t,i){return v(e,"previousSibling",i)},siblings:function(e){return z((e.parentNode||{}).firstChild,e)},children:function(e){return z(e.firstChild)},contents:function(e){return e.contentDocument||C.merge([],e.childNodes)}},function(n,r){C.fn[n]=function(e,t){var i=C.map(this,r,e);return"Until"!==n.slice(-5)&&(t=e),t&&"string"==typeof t&&(i=C.filter(t,i)),1<this.length&&(E[n]||C.uniqueSort(i),O.test(n)&&i.reverse()),this.pushStack(i)}});var D=/[^\x20\t\r\n\f]+/g;function I(e){return e}function L(e){throw e}function B(e,t,i){var n;try{e&&C.isFunction(n=e.promise)?n.call(e).done(t).fail(i):e&&C.isFunction(n=e.then)?n.call(e,t,i):t.call(void 0,e)}catch(e){i.call(void 0,e)}}C.Callbacks=function(n){var e,i;n="string"==typeof n?(e=n,i={},C.each(e.match(D)||[],function(e,t){i[t]=!0}),i):C.extend({},n);var r,t,o,a,s=[],p=[],l=-1,h=function(){for(a=n.once,o=r=!0;p.length;l=-1)for(t=p.shift();++l<s.length;)!1===s[l].apply(t[0],t[1])&&n.stopOnFalse&&(l=s.length,t=!1);n.memory||(t=!1),r=!1,a&&(s=t?[]:"")},u={add:function(){return s&&(t&&!r&&(l=s.length-1,p.push(t)),function i(e){C.each(e,function(e,t){C.isFunction(t)?n.unique&&u.has(t)||s.push(t):t&&t.length&&"string"!==C.type(t)&&i(t)})}(arguments),t&&!r&&h()),this},remove:function(){return C.each(arguments,function(e,t){for(var i;-1<(i=C.inArray(t,s,i));)s.splice(i,1),i<=l&&l--}),this},has:function(e){return e?-1<C.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=p=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=p=[],t||r||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],p.push(t),r||h()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!o}};return u},C.extend({Deferred:function(e){var o=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var r=arguments;return C.Deferred(function(n){C.each(o,function(e,t){var i=C.isFunction(r[t[4]])&&r[t[4]];s[t[1]](function(){var e=i&&i.apply(this,arguments);e&&C.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[t[0]+"With"](this,i?[e]:arguments)})}),r=null}).promise()},then:function(t,i,n){var p=0;function l(r,o,a,s){return function(){var i=this,n=arguments,e=function(){var e,t;if(!(r<p)){if((e=a.apply(i,n))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,C.isFunction(t)?s?t.call(e,l(p,o,I,s),l(p,o,L,s)):(p++,t.call(e,l(p,o,I,s),l(p,o,L,s),l(p,o,I,o.notifyWith))):(a!==I&&(i=void 0,n=[e]),(s||o.resolveWith)(i,n))}},t=s?e:function(){try{e()}catch(e){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(e,t.stackTrace),p<=r+1&&(a!==L&&(i=void 0,n=[e]),o.rejectWith(i,n))}};r?t():(C.Deferred.getStackHook&&(t.stackTrace=C.Deferred.getStackHook()),b.setTimeout(t))}}return C.Deferred(function(e){o[0][3].add(l(0,e,C.isFunction(n)?n:I,e.notifyWith)),o[1][3].add(l(0,e,C.isFunction(t)?t:I)),o[2][3].add(l(0,e,C.isFunction(i)?i:L))}).promise()},promise:function(e){return null!=e?C.extend(e,a):a}},s={};return C.each(o,function(e,t){var i=t[2],n=t[5];a[t[1]]=i.add,n&&i.add(function(){r=n},o[3-e][2].disable,o[0][2].lock),i.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=i.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var i=arguments.length,t=i,n=Array(t),r=s.call(arguments),o=C.Deferred(),a=function(t){return function(e){n[t]=this,r[t]=1<arguments.length?s.call(arguments):e,--i||o.resolveWith(n,r)}};if(i<=1&&(B(e,o.done(a(t)).resolve,o.reject),"pending"===o.state()||C.isFunction(r[t]&&r[t].then)))return o.then();for(;t--;)B(r[t],a(t),o.reject);return o.promise()}});var R=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(e,t){b.console&&b.console.warn&&e&&R.test(e.name)&&b.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},C.readyException=function(e){b.setTimeout(function(){throw e})};var F=C.Deferred();function j(){S.removeEventListener("DOMContentLoaded",j),b.removeEventListener("load",j),C.ready()}C.fn.ready=function(e){return F.then(e).catch(function(e){C.readyException(e)}),this},C.extend({isReady:!1,readyWait:1,holdReady:function(e){e?C.readyWait++:C.ready(!0)},ready:function(e){(!0===e?--C.readyWait:C.isReady)||((C.isReady=!0)!==e&&0<--C.readyWait||F.resolveWith(S,[C]))}}),C.ready.then=F.then,"complete"===S.readyState||"loading"!==S.readyState&&!S.documentElement.doScroll?b.setTimeout(C.ready):(S.addEventListener("DOMContentLoaded",j),b.addEventListener("load",j));var N=function(e,t,i,n,r,o,a){var s=0,p=e.length,l=null==i;if("object"===C.type(i))for(s in r=!0,i)N(e,t,s,i[s],!0,o,a);else if(void 0!==n&&(r=!0,C.isFunction(n)||(a=!0),l&&(t=a?(t.call(e,n),null):(l=t,function(e,t,i){return l.call(C(e),i)})),t))for(;s<p;s++)t(e[s],i,a?n:n.call(e[s],s,t(e[s],i)));return r?e:l?t.call(e):p?t(e[0],i):o},U=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function V(){this.expando=C.expando+V.uid++}V.uid=1,V.prototype={cache:function(e){var t=e[this.expando];return t||(t={},U(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,r=this.cache(e);if("string"==typeof t)r[C.camelCase(t)]=i;else for(n in t)r[C.camelCase(n)]=t[n];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][C.camelCase(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=C.isArray(t)?t.map(C.camelCase):(t=C.camelCase(t))in n?[t]:t.match(D)||[]).length;for(;i--;)delete n[t[i]]}(void 0===t||C.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!C.isEmptyObject(t)}};var H=new V,W=new V,q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,X=/[A-Z]/g;function Y(e,t,i){var n,r;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(X,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i="true"===(r=i)||"false"!==r&&("null"===r?null:r===+r+""?+r:q.test(r)?JSON.parse(r):r)}catch(e){}W.set(e,t,i)}else i=void 0;return i}C.extend({hasData:function(e){return W.hasData(e)||H.hasData(e)},data:function(e,t,i){return W.access(e,t,i)},removeData:function(e,t){W.remove(e,t)},_data:function(e,t,i){return H.access(e,t,i)},_removeData:function(e,t){H.remove(e,t)}}),C.fn.extend({data:function(i,e){var t,n,r,o=this[0],a=o&&o.attributes;if(void 0!==i)return"object"==typeof i?this.each(function(){W.set(this,i)}):N(this,function(e){var t;if(o&&void 0===e){if(void 0!==(t=W.get(o,i)))return t;if(void 0!==(t=Y(o,i)))return t}else this.each(function(){W.set(this,i,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(r=W.get(o),1===o.nodeType&&!H.get(o,"hasDataAttrs"))){for(t=a.length;t--;)a[t]&&(0===(n=a[t].name).indexOf("data-")&&(n=C.camelCase(n.slice(5)),Y(o,n,r[n])));H.set(o,"hasDataAttrs",!0)}return r},removeData:function(e){return this.each(function(){W.remove(this,e)})}}),C.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=H.get(e,t),i&&(!n||C.isArray(i)?n=H.access(e,t,C.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=C.queue(e,t),n=i.length,r=i.shift(),o=C._queueHooks(e,t);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete o.stop,r.call(e,function(){C.dequeue(e,t)},o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return H.get(e,i)||H.access(e,i,{empty:C.Callbacks("once memory").add(function(){H.remove(e,[t+"queue",i])})})}}),C.fn.extend({queue:function(t,i){var e=2;return"string"!=typeof t&&(i=t,t="fx",e--),arguments.length<e?C.queue(this[0],t):void 0===i?this:this.each(function(){var e=C.queue(this,t,i);C._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&C.dequeue(this,t)})},dequeue:function(e){return this.each(function(){C.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=C.Deferred(),o=this,a=this.length,s=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(i=H.get(o[a],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(s));return s(),r.promise(t)}});var K=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Z=new RegExp("^(?:([+-])=|)("+K+")([a-z%]*)$","i"),J=["Top","Right","Bottom","Left"],Q=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&C.contains(e.ownerDocument,e)&&"none"===C.css(e,"display")},$=function(e,t,i,n){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in r=i.apply(e,n||[]),t)e.style[o]=a[o];return r};function ee(e,t,i,n){var r,o=1,a=20,s=n?function(){return n.cur()}:function(){return C.css(e,t,"")},p=s(),l=i&&i[3]||(C.cssNumber[t]?"":"px"),h=(C.cssNumber[t]||"px"!==l&&+p)&&Z.exec(C.css(e,t));if(h&&h[3]!==l)for(l=l||h[3],i=i||[],h=+p||1;h/=o=o||".5",C.style(e,t,h+l),o!==(o=s()/p)&&1!==o&&--a;);return i&&(h=+h||+p||0,r=i[1]?h+(i[1]+1)*i[2]:+i[2],n&&(n.unit=l,n.start=h,n.end=r)),r}var te={};function ie(e,t){for(var i,n,r=[],o=0,a=e.length;o<a;o++)(n=e[o]).style&&(i=n.style.display,t?("none"===i&&(r[o]=H.get(n,"display")||null,r[o]||(n.style.display="")),""===n.style.display&&Q(n)&&(r[o]=(u=l=p=void 0,l=(s=n).ownerDocument,h=s.nodeName,(u=te[h])||(p=l.body.appendChild(l.createElement(h)),u=C.css(p,"display"),p.parentNode.removeChild(p),"none"===u&&(u="block"),te[h]=u)))):"none"!==i&&(r[o]="none",H.set(n,"display",i)));var s,p,l,h,u;for(o=0;o<a;o++)null!=r[o]&&(e[o].style.display=r[o]);return e}C.fn.extend({show:function(){return ie(this,!0)},hide:function(){return ie(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Q(this)?C(this).show():C(this).hide()})}});var ne=/^(?:checkbox|radio)$/i,re=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,oe=/^$|\/(?:java|ecma)script/i,ae={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function se(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&C.nodeName(e,t)?C.merge([e],i):i}function pe(e,t){for(var i=0,n=e.length;i<n;i++)H.set(e[i],"globalEval",!t||H.get(t[i],"globalEval"))}ae.optgroup=ae.option,ae.tbody=ae.tfoot=ae.colgroup=ae.caption=ae.thead,ae.th=ae.td;var le,he,ue=/<|&#?\w+;/;function de(e,t,i,n,r){for(var o,a,s,p,l,h,u=t.createDocumentFragment(),d=[],c=0,_=e.length;c<_;c++)if((o=e[c])||0===o)if("object"===C.type(o))C.merge(d,o.nodeType?[o]:o);else if(ue.test(o)){for(a=a||u.appendChild(t.createElement("div")),s=(re.exec(o)||["",""])[1].toLowerCase(),p=ae[s]||ae._default,a.innerHTML=p[1]+C.htmlPrefilter(o)+p[2],h=p[0];h--;)a=a.lastChild;C.merge(d,a.childNodes),(a=u.firstChild).textContent=""}else d.push(t.createTextNode(o));for(u.textContent="",c=0;o=d[c++];)if(n&&-1<C.inArray(o,n))r&&r.push(o);else if(l=C.contains(o.ownerDocument,o),a=se(u.appendChild(o),"script"),l&&pe(a),i)for(h=0;o=a[h++];)oe.test(o.type||"")&&i.push(o);return u}le=S.createDocumentFragment().appendChild(S.createElement("div")),(he=S.createElement("input")).setAttribute("type","radio"),he.setAttribute("checked","checked"),he.setAttribute("name","t"),le.appendChild(he),x.checkClone=le.cloneNode(!0).cloneNode(!0).lastChild.checked,le.innerHTML="<textarea>x</textarea>",x.noCloneChecked=!!le.cloneNode(!0).lastChild.defaultValue;var ce=S.documentElement,_e=/^key/,ye=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,xe=/^([^.]*)(?:\.(.+)|)/;function me(){return!0}function ge(){return!1}function fe(){try{return S.activeElement}catch(e){}}function ve(e,t,i,n,r,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof i&&(n=n||i,i=void 0),t)ve(e,s,i,n,t[s],o);return e}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=ge;else if(!r)return e;return 1===o&&(a=r,(r=function(e){return C().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=C.guid++)),e.each(function(){C.event.add(this,t,r,n,i)})}C.event={global:{},add:function(t,e,i,n,r){var o,a,s,p,l,h,u,d,c,_,y,x=H.get(t);if(x)for(i.handler&&(i=(o=i).handler,r=o.selector),r&&C.find.matchesSelector(ce,r),i.guid||(i.guid=C.guid++),(p=x.events)||(p=x.events={}),(a=x.handle)||(a=x.handle=function(e){return void 0!==C&&C.event.triggered!==e.type?C.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(D)||[""]).length;l--;)c=y=(s=xe.exec(e[l])||[])[1],_=(s[2]||"").split(".").sort(),c&&(u=C.event.special[c]||{},c=(r?u.delegateType:u.bindType)||c,u=C.event.special[c]||{},h=C.extend({type:c,origType:y,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&C.expr.match.needsContext.test(r),namespace:_.join(".")},o),(d=p[c])||((d=p[c]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,n,_,a)||t.addEventListener&&t.addEventListener(c,a)),u.add&&(u.add.call(t,h),h.handler.guid||(h.handler.guid=i.guid)),r?d.splice(d.delegateCount++,0,h):d.push(h),C.event.global[c]=!0)},remove:function(e,t,i,n,r){var o,a,s,p,l,h,u,d,c,_,y,x=H.hasData(e)&&H.get(e);if(x&&(p=x.events)){for(l=(t=(t||"").match(D)||[""]).length;l--;)if(c=y=(s=xe.exec(t[l])||[])[1],_=(s[2]||"").split(".").sort(),c){for(u=C.event.special[c]||{},d=p[c=(n?u.delegateType:u.bindType)||c]||[],s=s[2]&&new RegExp("(^|\\.)"+_.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)h=d[o],!r&&y!==h.origType||i&&i.guid!==h.guid||s&&!s.test(h.namespace)||n&&n!==h.selector&&("**"!==n||!h.selector)||(d.splice(o,1),h.selector&&d.delegateCount--,u.remove&&u.remove.call(e,h));a&&!d.length&&(u.teardown&&!1!==u.teardown.call(e,_,x.handle)||C.removeEvent(e,c,x.handle),delete p[c])}else for(c in p)C.event.remove(e,c+t[l],i,n,!0);C.isEmptyObject(p)&&H.remove(e,"handle events")}},dispatch:function(e){var t,i,n,r,o,a,s=C.event.fix(e),p=new Array(arguments.length),l=(H.get(this,"events")||{})[s.type]||[],h=C.event.special[s.type]||{};for(p[0]=s,t=1;t<arguments.length;t++)p[t]=arguments[t];if(s.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,s)){for(a=C.event.handlers.call(this,s,l),t=0;(r=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(n=((C.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,p))&&!1===(s.result=n)&&(s.preventDefault(),s.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,s),s.result}},handlers:function(e,t){var i,n,r,o,a,s=[],p=t.delegateCount,l=e.target;if(p&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},i=0;i<p;i++)void 0===a[r=(n=t[i]).selector+" "]&&(a[r]=n.needsContext?-1<C(r,this).index(l):C.find(r,this,null,[l]).length),a[r]&&o.push(n);o.length&&s.push({elem:l,handlers:o})}return l=this,p<t.length&&s.push({elem:l,handlers:t.slice(p)}),s},addProp:function(t,e){Object.defineProperty(C.Event.prototype,t,{enumerable:!0,configurable:!0,get:C.isFunction(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[C.expando]?e:new C.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==fe()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===fe()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&C.nodeName(this,"input"))return this.click(),!1},_default:function(e){return C.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},C.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},C.Event=function(e,t){return this instanceof C.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?me:ge,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&C.extend(this,t),this.timeStamp=e&&e.timeStamp||C.now(),void(this[C.expando]=!0)):new C.Event(e,t)},C.Event.prototype={constructor:C.Event,isDefaultPrevented:ge,isPropagationStopped:ge,isImmediatePropagationStopped:ge,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=me,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=me,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=me,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&_e.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&ye.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},C.event.addProp),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,r){C.event.special[e]={delegateType:r,bindType:r,handle:function(e){var t,i=e.relatedTarget,n=e.handleObj;return i&&(i===this||C.contains(this,i))||(e.type=n.origType,t=n.handler.apply(this,arguments),e.type=r),t}}}),C.fn.extend({on:function(e,t,i,n){return ve(this,e,t,i,n)},one:function(e,t,i,n){return ve(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,C(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=ge),this.each(function(){C.event.remove(this,e,i,t)});for(r in e)this.off(r,t,e[r]);return this}});var ze=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,we=/<script|<style|<link/i,be=/checked\s*(?:[^=]|=\s*.checked.)/i,Se=/^true\/(.*)/,Ce=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Me(e,t){return C.nodeName(e,"table")&&C.nodeName(11!==t.nodeType?t:t.firstChild,"tr")&&e.getElementsByTagName("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ke(e){var t=Se.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Te(e,t){var i,n,r,o,a,s,p,l;if(1===t.nodeType){if(H.hasData(e)&&(o=H.access(e),a=H.set(t,o),l=o.events))for(r in delete a.handle,a.events={},l)for(i=0,n=l[r].length;i<n;i++)C.event.add(t,r,l[r][i]);W.hasData(e)&&(s=W.access(e),p=C.extend({},s),W.set(t,p))}}function Ae(i,n,r,o){n=y.apply([],n);var e,t,a,s,p,l,h=0,u=i.length,d=u-1,c=n[0],_=C.isFunction(c);if(_||1<u&&"string"==typeof c&&!x.checkClone&&be.test(c))return i.each(function(e){var t=i.eq(e);_&&(n[0]=c.call(this,e,t.html())),Ae(t,n,r,o)});if(u&&(t=(e=de(n,i[0].ownerDocument,!1,i,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=C.map(se(e,"script"),Pe)).length;h<u;h++)p=e,h!==d&&(p=C.clone(p,!0,!0),s&&C.merge(a,se(p,"script"))),r.call(i[h],p,h);if(s)for(l=a[a.length-1].ownerDocument,C.map(a,ke),h=0;h<s;h++)p=a[h],oe.test(p.type||"")&&!H.access(p,"globalEval")&&C.contains(l,p)&&(p.src?C._evalUrl&&C._evalUrl(p.src):m(p.textContent.replace(Ce,""),l))}return i}function Oe(e,t,i){for(var n,r=t?C.filter(t,e):e,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||C.cleanData(se(n)),n.parentNode&&(i&&C.contains(n.ownerDocument,n)&&pe(se(n,"script")),n.parentNode.removeChild(n));return e}C.extend({htmlPrefilter:function(e){return e.replace(ze,"<$1></$2>")},clone:function(e,t,i){var n,r,o,a,s,p,l,h=e.cloneNode(!0),u=C.contains(e.ownerDocument,e);if(!(x.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||C.isXMLDoc(e)))for(a=se(h),n=0,r=(o=se(e)).length;n<r;n++)s=o[n],p=a[n],void 0,"input"===(l=p.nodeName.toLowerCase())&&ne.test(s.type)?p.checked=s.checked:"input"!==l&&"textarea"!==l||(p.defaultValue=s.defaultValue);if(t)if(i)for(o=o||se(e),a=a||se(h),n=0,r=o.length;n<r;n++)Te(o[n],a[n]);else Te(e,h);return 0<(a=se(h,"script")).length&&pe(a,!u&&se(e,"script")),h},cleanData:function(e){for(var t,i,n,r=C.event.special,o=0;void 0!==(i=e[o]);o++)if(U(i)){if(t=i[H.expando]){if(t.events)for(n in t.events)r[n]?C.event.remove(i,n):C.removeEvent(i,n,t.handle);i[H.expando]=void 0}i[W.expando]&&(i[W.expando]=void 0)}}}),C.fn.extend({detach:function(e){return Oe(this,e,!0)},remove:function(e){return Oe(this,e)},text:function(e){return N(this,function(e){return void 0===e?C.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ae(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Me(this,e).appendChild(e)})},prepend:function(){return Ae(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Me(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ae(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ae(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(C.cleanData(se(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return C.clone(this,e,t)})},html:function(e){return N(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!we.test(e)&&!ae[(re.exec(e)||["",""])[1].toLowerCase()]){e=C.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(C.cleanData(se(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var i=[];return Ae(this,arguments,function(e){var t=this.parentNode;C.inArray(this,i)<0&&(C.cleanData(se(this)),t&&t.replaceChild(e,this))},i)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){C.fn[e]=function(e){for(var t,i=[],n=C(e),r=n.length-1,o=0;o<=r;o++)t=o===r?this:this.clone(!0),C(n[o])[a](t),p.apply(i,t.get());return this.pushStack(i)}});var Ee=/^margin/,Ge=new RegExp("^("+K+")(?!px)[a-z%]+$","i"),De=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=b),t.getComputedStyle(e)};function Ie(e,t,i){var n,r,o,a,s=e.style;return(i=i||De(e))&&(""!==(a=i.getPropertyValue(t)||i[t])||C.contains(e.ownerDocument,e)||(a=C.style(e,t)),!x.pixelMarginRight()&&Ge.test(a)&&Ee.test(t)&&(n=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=i.width,s.width=n,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function Le(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}!function(){function e(){if(a){a.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",ce.appendChild(o);var e=b.getComputedStyle(a);t="1%"!==e.top,r="2px"===e.marginLeft,i="4px"===e.width,a.style.marginRight="50%",n="4px"===e.marginRight,ce.removeChild(o),a=null}}var t,i,n,r,o=S.createElement("div"),a=S.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",x.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(a),C.extend(x,{pixelPosition:function(){return e(),t},boxSizingReliable:function(){return e(),i},pixelMarginRight:function(){return e(),n},reliableMarginLeft:function(){return e(),r}}))}();var Be=/^(none|table(?!-c[ea]).+)/,Re={position:"absolute",visibility:"hidden",display:"block"},Fe={letterSpacing:"0",fontWeight:"400"},je=["Webkit","Moz","ms"],Ne=S.createElement("div").style;function Ue(e){if(e in Ne)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=je.length;i--;)if((e=je[i]+t)in Ne)return e}function Ve(e,t,i){var n=Z.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function He(e,t,i,n,r){var o,a=0;for(o=i===(n?"border":"content")?4:"width"===t?1:0;o<4;o+=2)"margin"===i&&(a+=C.css(e,i+J[o],!0,r)),n?("content"===i&&(a-=C.css(e,"padding"+J[o],!0,r)),"margin"!==i&&(a-=C.css(e,"border"+J[o]+"Width",!0,r))):(a+=C.css(e,"padding"+J[o],!0,r),"padding"!==i&&(a+=C.css(e,"border"+J[o]+"Width",!0,r)));return a}function We(e,t,i){var n,r=!0,o=De(e),a="border-box"===C.css(e,"boxSizing",!1,o);if(e.getClientRects().length&&(n=e.getBoundingClientRect()[t]),n<=0||null==n){if(((n=Ie(e,t,o))<0||null==n)&&(n=e.style[t]),Ge.test(n))return n;r=a&&(x.boxSizingReliable()||n===e.style[t]),n=parseFloat(n)||0}return n+He(e,t,i||(a?"border":"content"),r,o)+"px"}function qe(e,t,i,n,r){return new qe.prototype.init(e,t,i,n,r)}C.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Ie(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=C.camelCase(t),p=e.style;return t=C.cssProps[s]||(C.cssProps[s]=Ue(s)||s),a=C.cssHooks[t]||C.cssHooks[s],void 0===i?a&&"get"in a&&void 0!==(r=a.get(e,!1,n))?r:p[t]:("string"===(o=typeof i)&&(r=Z.exec(i))&&r[1]&&(i=ee(e,t,r),o="number"),void(null!=i&&i==i&&("number"===o&&(i+=r&&r[3]||(C.cssNumber[s]?"":"px")),x.clearCloneStyle||""!==i||0!==t.indexOf("background")||(p[t]="inherit"),a&&"set"in a&&void 0===(i=a.set(e,i,n))||(p[t]=i))))}},css:function(e,t,i,n){var r,o,a,s=C.camelCase(t);return t=C.cssProps[s]||(C.cssProps[s]=Ue(s)||s),(a=C.cssHooks[t]||C.cssHooks[s])&&"get"in a&&(r=a.get(e,!0,i)),void 0===r&&(r=Ie(e,t,n)),"normal"===r&&t in Fe&&(r=Fe[t]),""===i||i?(o=parseFloat(r),!0===i||isFinite(o)?o||0:r):r}}),C.each(["height","width"],function(e,a){C.cssHooks[a]={get:function(e,t,i){if(t)return!Be.test(C.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?We(e,a,i):$(e,Re,function(){return We(e,a,i)})},set:function(e,t,i){var n,r=i&&De(e),o=i&&He(e,a,i,"border-box"===C.css(e,"boxSizing",!1,r),r);return o&&(n=Z.exec(t))&&"px"!==(n[3]||"px")&&(e.style[a]=t,t=C.css(e,a)),Ve(0,t,o)}}}),C.cssHooks.marginLeft=Le(x.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ie(e,"marginLeft"))||e.getBoundingClientRect().left-$(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),C.each({margin:"",padding:"",border:"Width"},function(r,o){C.cssHooks[r+o]={expand:function(e){for(var t=0,i={},n="string"==typeof e?e.split(" "):[e];t<4;t++)i[r+J[t]+o]=n[t]||n[t-2]||n[0];return i}},Ee.test(r)||(C.cssHooks[r+o].set=Ve)}),C.fn.extend({css:function(e,t){return N(this,function(e,t,i){var n,r,o={},a=0;if(C.isArray(t)){for(n=De(e),r=t.length;a<r;a++)o[t[a]]=C.css(e,t[a],!1,n);return o}return void 0!==i?C.style(e,t,i):C.css(e,t)},e,t,1<arguments.length)}}),((C.Tween=qe).prototype={constructor:qe,init:function(e,t,i,n,r,o){this.elem=e,this.prop=i,this.easing=r||C.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(C.cssNumber[i]?"":"px")},cur:function(){var e=qe.propHooks[this.prop];return e&&e.get?e.get(this):qe.propHooks._default.get(this)},run:function(e){var t,i=qe.propHooks[this.prop];return this.options.duration?this.pos=t=C.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):qe.propHooks._default.set(this),this}}).init.prototype=qe.prototype,(qe.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=C.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){C.fx.step[e.prop]?C.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[C.cssProps[e.prop]]&&!C.cssHooks[e.prop]?e.elem[e.prop]=e.now:C.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=qe.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},C.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},C.fx=qe.prototype.init,C.fx.step={};var Xe,Ye,Ke,Ze,Je=/^(?:toggle|show|hide)$/,Qe=/queueHooks$/;function $e(){Ye&&(b.requestAnimationFrame($e),C.fx.tick())}function et(){return b.setTimeout(function(){Xe=void 0}),Xe=C.now()}function tt(e,t){var i,n=0,r={height:e};for(t=t?1:0;n<4;n+=2-t)r["margin"+(i=J[n])]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function it(e,t,i){for(var n,r=(nt.tweeners[t]||[]).concat(nt.tweeners["*"]),o=0,a=r.length;o<a;o++)if(n=r[o].call(i,t,e))return n}function nt(o,e,t){var i,a,n=0,r=nt.prefilters.length,s=C.Deferred().always(function(){delete p.elem}),p=function(){if(a)return!1;for(var e=Xe||et(),t=Math.max(0,l.startTime+l.duration-e),i=1-(t/l.duration||0),n=0,r=l.tweens.length;n<r;n++)l.tweens[n].run(i);return s.notifyWith(o,[l,i,t]),i<1&&r?t:(s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:C.extend({},e),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},t),originalProperties:e,originalOptions:t,startTime:Xe||et(),duration:t.duration,tweens:[],createTween:function(e,t){var i=C.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(i),i},stop:function(e){var t=0,i=e?l.tweens.length:0;if(a)return this;for(a=!0;t<i;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),h=l.props;for(function(e,t){var i,n,r,o,a;for(i in e)if(r=t[n=C.camelCase(i)],o=e[i],C.isArray(o)&&(r=o[1],o=e[i]=o[0]),i!==n&&(e[n]=o,delete e[i]),(a=C.cssHooks[n])&&"expand"in a)for(i in o=a.expand(o),delete e[n],o)i in e||(e[i]=o[i],t[i]=r);else t[n]=r}(h,l.opts.specialEasing);n<r;n++)if(i=nt.prefilters[n].call(l,o,h,l.opts))return C.isFunction(i.stop)&&(C._queueHooks(l.elem,l.opts.queue).stop=C.proxy(i.stop,i)),i;return C.map(h,it,l),C.isFunction(l.opts.start)&&l.opts.start.call(o,l),C.fx.timer(C.extend(p,{elem:o,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}C.Animation=C.extend(nt,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return ee(i.elem,e,Z.exec(t),i),i}]},tweener:function(e,t){for(var i,n=0,r=(e=C.isFunction(e)?(t=e,["*"]):e.match(D)).length;n<r;n++)i=e[n],nt.tweeners[i]=nt.tweeners[i]||[],nt.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var n,r,o,a,s,p,l,h,u="width"in t||"height"in t,d=this,c={},_=e.style,y=e.nodeType&&Q(e),x=H.get(e,"fxshow");for(n in i.queue||(null==(a=C._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,C.queue(e,"fx").length||a.empty.fire()})})),t)if(r=t[n],Je.test(r)){if(delete t[n],o=o||"toggle"===r,r===(y?"hide":"show")){if("show"!==r||!x||void 0===x[n])continue;y=!0}c[n]=x&&x[n]||C.style(e,n)}if((p=!C.isEmptyObject(t))||!C.isEmptyObject(c))for(n in u&&1===e.nodeType&&(i.overflow=[_.overflow,_.overflowX,_.overflowY],null==(l=x&&x.display)&&(l=H.get(e,"display")),"none"===(h=C.css(e,"display"))&&(l?h=l:(ie([e],!0),l=e.style.display||l,h=C.css(e,"display"),ie([e]))),("inline"===h||"inline-block"===h&&null!=l)&&"none"===C.css(e,"float")&&(p||(d.done(function(){_.display=l}),null==l&&(h=_.display,l="none"===h?"":h)),_.display="inline-block")),i.overflow&&(_.overflow="hidden",d.always(function(){_.overflow=i.overflow[0],_.overflowX=i.overflow[1],_.overflowY=i.overflow[2]})),p=!1,c)p||(x?"hidden"in x&&(y=x.hidden):x=H.access(e,"fxshow",{display:l}),o&&(x.hidden=!y),y&&ie([e],!0),d.done(function(){for(n in y||ie([e]),H.remove(e,"fxshow"),c)C.style(e,n,c[n])})),p=it(y?x[n]:0,n,d),n in x||(x[n]=p.start,y&&(p.end=p.start,p.start=0))}],prefilter:function(e,t){t?nt.prefilters.unshift(e):nt.prefilters.push(e)}}),C.speed=function(e,t,i){var n=e&&"object"==typeof e?C.extend({},e):{complete:i||!i&&t||C.isFunction(e)&&e,duration:e,easing:i&&t||t&&!C.isFunction(t)&&t};return C.fx.off||S.hidden?n.duration=0:"number"!=typeof n.duration&&(n.duration in C.fx.speeds?n.duration=C.fx.speeds[n.duration]:n.duration=C.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){C.isFunction(n.old)&&n.old.call(this),n.queue&&C.dequeue(this,n.queue)},n},C.fn.extend({fadeTo:function(e,t,i,n){return this.filter(Q).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(t,e,i,n){var r=C.isEmptyObject(t),o=C.speed(e,i,n),a=function(){var e=nt(this,C.extend({},t),o);(r||H.get(this,"finish"))&&e.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(r,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof r&&(o=e,e=r,r=void 0),e&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var e=!0,t=null!=r&&r+"queueHooks",i=C.timers,n=H.get(this);if(t)n[t]&&n[t].stop&&a(n[t]);else for(t in n)n[t]&&n[t].stop&&Qe.test(t)&&a(n[t]);for(t=i.length;t--;)i[t].elem!==this||null!=r&&i[t].queue!==r||(i[t].anim.stop(o),e=!1,i.splice(t,1));!e&&o||C.dequeue(this,r)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=H.get(this),i=t[a+"queue"],n=t[a+"queueHooks"],r=C.timers,o=i?i.length:0;for(t.finish=!0,C.queue(this,a,[]),n&&n.stop&&n.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===a&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete t.finish})}}),C.each(["toggle","show","hide"],function(e,n){var r=C.fn[n];C.fn[n]=function(e,t,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(tt(n,!0),e,t,i)}}),C.each({slideDown:tt("show"),slideUp:tt("hide"),slideToggle:tt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,n){C.fn[e]=function(e,t,i){return this.animate(n,e,t,i)}}),C.timers=[],C.fx.tick=function(){var e,t=0,i=C.timers;for(Xe=C.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||C.fx.stop(),Xe=void 0},C.fx.timer=function(e){C.timers.push(e),e()?C.fx.start():C.timers.pop()},C.fx.interval=13,C.fx.start=function(){Ye||(Ye=b.requestAnimationFrame?b.requestAnimationFrame($e):b.setInterval(C.fx.tick,C.fx.interval))},C.fx.stop=function(){b.cancelAnimationFrame?b.cancelAnimationFrame(Ye):b.clearInterval(Ye),Ye=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(n,e){return n=C.fx&&C.fx.speeds[n]||n,e=e||"fx",this.queue(e,function(e,t){var i=b.setTimeout(e,n);t.stop=function(){b.clearTimeout(i)}})},Ke=S.createElement("input"),Ze=S.createElement("select").appendChild(S.createElement("option")),Ke.type="checkbox",x.checkOn=""!==Ke.value,x.optSelected=Ze.selected,(Ke=S.createElement("input")).value="t",Ke.type="radio",x.radioValue="t"===Ke.value;var rt,ot=C.expr.attrHandle;C.fn.extend({attr:function(e,t){return N(this,C.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){C.removeAttr(this,e)})}}),C.extend({attr:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?C.prop(e,t,i):(1===o&&C.isXMLDoc(e)||(r=C.attrHooks[t.toLowerCase()]||(C.expr.match.bool.test(t)?rt:void 0)),void 0!==i?null===i?void C.removeAttr(e,t):r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:(e.setAttribute(t,i+""),i):r&&"get"in r&&null!==(n=r.get(e,t))?n:null==(n=C.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!x.radioValue&&"radio"===t&&C.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,r=t&&t.match(D);if(r&&1===e.nodeType)for(;i=r[n++];)e.removeAttribute(i)}}),rt={set:function(e,t,i){return!1===t?C.removeAttr(e,i):e.setAttribute(i,i),i}},C.each(C.expr.match.bool.source.match(/\w+/g),function(e,t){var a=ot[t]||C.find.attr;ot[t]=function(e,t,i){var n,r,o=t.toLowerCase();return i||(r=ot[o],ot[o]=n,n=null!=a(e,t,i)?o:null,ot[o]=r),n}});var at=/^(?:input|select|textarea|button)$/i,st=/^(?:a|area)$/i;function pt(e){return(e.match(D)||[]).join(" ")}function lt(e){return e.getAttribute&&e.getAttribute("class")||""}C.fn.extend({prop:function(e,t){return N(this,C.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[C.propFix[e]||e]})}}),C.extend({prop:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&C.isXMLDoc(e)||(t=C.propFix[t]||t,r=C.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=C.find.attr(e,"tabindex");return t?parseInt(t,10):at.test(e.nodeName)||st.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),x.optSelected||(C.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){C.propFix[this.toLowerCase()]=this}),C.fn.extend({addClass:function(t){var e,i,n,r,o,a,s,p=0;if(C.isFunction(t))return this.each(function(e){C(this).addClass(t.call(this,e,lt(this)))});if("string"==typeof t&&t)for(e=t.match(D)||[];i=this[p++];)if(r=lt(i),n=1===i.nodeType&&" "+pt(r)+" "){for(a=0;o=e[a++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");r!==(s=pt(n))&&i.setAttribute("class",s)}return this},removeClass:function(t){var e,i,n,r,o,a,s,p=0;if(C.isFunction(t))return this.each(function(e){C(this).removeClass(t.call(this,e,lt(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(D)||[];i=this[p++];)if(r=lt(i),n=1===i.nodeType&&" "+pt(r)+" "){for(a=0;o=e[a++];)for(;-1<n.indexOf(" "+o+" ");)n=n.replace(" "+o+" "," ");r!==(s=pt(n))&&i.setAttribute("class",s)}return this},toggleClass:function(r,t){var o=typeof r;return"boolean"==typeof t&&"string"===o?t?this.addClass(r):this.removeClass(r):C.isFunction(r)?this.each(function(e){C(this).toggleClass(r.call(this,e,lt(this),t),t)}):this.each(function(){var e,t,i,n;if("string"===o)for(t=0,i=C(this),n=r.match(D)||[];e=n[t++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else void 0!==r&&"boolean"!==o||((e=lt(this))&&H.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===r?"":H.get(this,"__className__")||""))})},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&-1<(" "+pt(lt(i))+" ").indexOf(t))return!0;return!1}});var ht=/\r/g;C.fn.extend({val:function(i){var n,e,r,t=this[0];return arguments.length?(r=C.isFunction(i),this.each(function(e){var t;1===this.nodeType&&(null==(t=r?i.call(this,e,C(this).val()):i)?t="":"number"==typeof t?t+="":C.isArray(t)&&(t=C.map(t,function(e){return null==e?"":e+""})),(n=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,t,"value")||(this.value=t))})):t?(n=C.valHooks[t.type]||C.valHooks[t.nodeName.toLowerCase()])&&"get"in n&&void 0!==(e=n.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(ht,""):null==e?"":e:void 0}}),C.extend({valHooks:{option:{get:function(e){var t=C.find.attr(e,"value");return null!=t?t:pt(C.text(e))}},select:{get:function(e){var t,i,n,r=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],p=a?o+1:r.length;for(n=o<0?p:a?o:0;n<p;n++)if(((i=r[n]).selected||n===o)&&!i.disabled&&(!i.parentNode.disabled||!C.nodeName(i.parentNode,"optgroup"))){if(t=C(i).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var i,n,r=e.options,o=C.makeArray(t),a=r.length;a--;)((n=r[a]).selected=-1<C.inArray(C.valHooks.option.get(n),o))&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(e,t){if(C.isArray(t))return e.checked=-1<C.inArray(C(e).val(),t)}},x.checkOn||(C.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var ut=/^(?:focusinfocus|focusoutblur)$/;C.extend(C.event,{trigger:function(e,t,i,n){var r,o,a,s,p,l,h,u=[i||S],d=_.call(e,"type")?e.type:e,c=_.call(e,"namespace")?e.namespace.split("."):[];if(o=a=i=i||S,3!==i.nodeType&&8!==i.nodeType&&!ut.test(d+C.event.triggered)&&(-1<d.indexOf(".")&&(d=(c=d.split(".")).shift(),c.sort()),p=d.indexOf(":")<0&&"on"+d,(e=e[C.expando]?e:new C.Event(d,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=c.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+c.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:C.makeArray(t,[e]),h=C.event.special[d]||{},n||!h.trigger||!1!==h.trigger.apply(i,t))){if(!n&&!h.noBubble&&!C.isWindow(i)){for(s=h.delegateType||d,ut.test(s+d)||(o=o.parentNode);o;o=o.parentNode)u.push(o),a=o;a===(i.ownerDocument||S)&&u.push(a.defaultView||a.parentWindow||b)}for(r=0;(o=u[r++])&&!e.isPropagationStopped();)e.type=1<r?s:h.bindType||d,(l=(H.get(o,"events")||{})[e.type]&&H.get(o,"handle"))&&l.apply(o,t),(l=p&&o[p])&&l.apply&&U(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,n||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(u.pop(),t)||!U(i)||p&&C.isFunction(i[d])&&!C.isWindow(i)&&((a=i[p])&&(i[p]=null),i[C.event.triggered=d](),C.event.triggered=void 0,a&&(i[p]=a)),e.result}},simulate:function(e,t,i){var n=C.extend(new C.Event,i,{type:e,isSimulated:!0});C.event.trigger(n,null,t)}}),C.fn.extend({trigger:function(e,t){return this.each(function(){C.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return C.event.trigger(e,t,i,!0)}}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,i){C.fn[i]=function(e,t){return 0<arguments.length?this.on(i,null,e,t):this.trigger(i)}}),C.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),x.focusin="onfocusin"in b,x.focusin||C.each({focus:"focusin",blur:"focusout"},function(i,n){var r=function(e){C.event.simulate(n,e.target,C.event.fix(e))};C.event.special[n]={setup:function(){var e=this.ownerDocument||this,t=H.access(e,n);t||e.addEventListener(i,r,!0),H.access(e,n,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=H.access(e,n)-1;t?H.access(e,n,t):(e.removeEventListener(i,r,!0),H.remove(e,n))}}});var dt=b.location,ct=C.now(),_t=/\?/;C.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new b.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||C.error("Invalid XML: "+e),t};var yt=/\[\]$/,xt=/\r?\n/g,mt=/^(?:submit|button|image|reset|file)$/i,gt=/^(?:input|select|textarea|keygen)/i;function ft(i,e,n,r){var t;if(C.isArray(e))C.each(e,function(e,t){n||yt.test(i)?r(i,t):ft(i+"["+("object"==typeof t&&null!=t?e:"")+"]",t,n,r)});else if(n||"object"!==C.type(e))r(i,e);else for(t in e)ft(i+"["+t+"]",e[t],n,r)}C.param=function(e,t){var i,n=[],r=function(e,t){var i=C.isFunction(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(C.isArray(e)||e.jquery&&!C.isPlainObject(e))C.each(e,function(){r(this.name,this.value)});else for(i in e)ft(i,e[i],t,r);return n.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=C.prop(this,"elements");return e?C.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!C(this).is(":disabled")&&gt.test(this.nodeName)&&!mt.test(e)&&(this.checked||!ne.test(e))}).map(function(e,t){var i=C(this).val();return null==i?null:C.isArray(i)?C.map(i,function(e){return{name:t.name,value:e.replace(xt,"\r\n")}}):{name:t.name,value:i.replace(xt,"\r\n")}}).get()}});var vt=/%20/g,zt=/#.*$/,wt=/([?&])_=[^&]*/,bt=/^(.*?):[ \t]*([^\r\n]*)$/gm,St=/^(?:GET|HEAD)$/,Ct=/^\/\//,Mt={},Pt={},kt="*/".concat("*"),Tt=S.createElement("a");function At(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var i,n=0,r=e.toLowerCase().match(D)||[];if(C.isFunction(t))for(;i=r[n++];)"+"===i[0]?(i=i.slice(1)||"*",(o[i]=o[i]||[]).unshift(t)):(o[i]=o[i]||[]).push(t)}}function Ot(t,r,o,a){var s={},p=t===Pt;function l(e){var n;return s[e]=!0,C.each(t[e]||[],function(e,t){var i=t(r,o,a);return"string"!=typeof i||p||s[i]?p?!(n=i):void 0:(r.dataTypes.unshift(i),l(i),!1)}),n}return l(r.dataTypes[0])||!s["*"]&&l("*")}function Et(e,t){var i,n,r=C.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&C.extend(!0,e,n),e}Tt.href=dt.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:dt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(dt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":kt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Et(Et(e,C.ajaxSettings),t):Et(C.ajaxSettings,e)},ajaxPrefilter:At(Mt),ajaxTransport:At(Pt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var h,u,d,i,c,n,_,y,r,o,x=C.ajaxSetup({},t),m=x.context||x,g=x.context&&(m.nodeType||m.jquery)?C(m):C.event,f=C.Deferred(),v=C.Callbacks("once memory"),z=x.statusCode||{},a={},s={},p="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(_){if(!i)for(i={};t=bt.exec(d);)i[t[1].toLowerCase()]=t[2];t=i[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return _?d:null},setRequestHeader:function(e,t){return null==_&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==_&&(x.mimeType=e),this},statusCode:function(e){var t;if(e)if(_)w.always(e[w.status]);else for(t in e)z[t]=[z[t],e[t]];return this},abort:function(e){var t=e||p;return h&&h.abort(t),l(0,t),this}};if(f.promise(w),x.url=((e||x.url||dt.href)+"").replace(Ct,dt.protocol+"//"),x.type=t.method||t.type||x.method||x.type,x.dataTypes=(x.dataType||"*").toLowerCase().match(D)||[""],null==x.crossDomain){n=S.createElement("a");try{n.href=x.url,n.href=n.href,x.crossDomain=Tt.protocol+"//"+Tt.host!=n.protocol+"//"+n.host}catch(e){x.crossDomain=!0}}if(x.data&&x.processData&&"string"!=typeof x.data&&(x.data=C.param(x.data,x.traditional)),Ot(Mt,x,t,w),_)return w;for(r in(y=C.event&&x.global)&&0==C.active++&&C.event.trigger("ajaxStart"),x.type=x.type.toUpperCase(),x.hasContent=!St.test(x.type),u=x.url.replace(zt,""),x.hasContent?x.data&&x.processData&&0===(x.contentType||"").indexOf("application/x-www-form-urlencoded")&&(x.data=x.data.replace(vt,"+")):(o=x.url.slice(u.length),x.data&&(u+=(_t.test(u)?"&":"?")+x.data,delete x.data),!1===x.cache&&(u=u.replace(wt,"$1"),o=(_t.test(u)?"&":"?")+"_="+ct+++o),x.url=u+o),x.ifModified&&(C.lastModified[u]&&w.setRequestHeader("If-Modified-Since",C.lastModified[u]),C.etag[u]&&w.setRequestHeader("If-None-Match",C.etag[u])),(x.data&&x.hasContent&&!1!==x.contentType||t.contentType)&&w.setRequestHeader("Content-Type",x.contentType),w.setRequestHeader("Accept",x.dataTypes[0]&&x.accepts[x.dataTypes[0]]?x.accepts[x.dataTypes[0]]+("*"!==x.dataTypes[0]?", "+kt+"; q=0.01":""):x.accepts["*"]),x.headers)w.setRequestHeader(r,x.headers[r]);if(x.beforeSend&&(!1===x.beforeSend.call(m,w,x)||_))return w.abort();if(p="abort",v.add(x.complete),w.done(x.success),w.fail(x.error),h=Ot(Pt,x,t,w)){if(w.readyState=1,y&&g.trigger("ajaxSend",[w,x]),_)return w;x.async&&0<x.timeout&&(c=b.setTimeout(function(){w.abort("timeout")},x.timeout));try{_=!1,h.send(a,l)}catch(e){if(_)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,i,n){var r,o,a,s,p,l=t;_||(_=!0,c&&b.clearTimeout(c),h=void 0,d=n||"",w.readyState=0<e?4:0,r=200<=e&&e<300||304===e,i&&(s=function(e,t,i){for(var n,r,o,a,s=e.contents,p=e.dataTypes;"*"===p[0];)p.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in s)if(s[r]&&s[r].test(n)){p.unshift(r);break}if(p[0]in i)o=p[0];else{for(r in i){if(!p[0]||e.converters[r+" "+p[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==p[0]&&p.unshift(o),i[o]}(x,w,i)),s=function(e,t,i,n){var r,o,a,s,p,l={},h=e.dataTypes.slice();if(h[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=h.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!p&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),p=o,o=h.shift())if("*"===o)o=p;else if("*"!==p&&p!==o){if(!(a=l[p+" "+o]||l["* "+o]))for(r in l)if((s=r.split(" "))[1]===o&&(a=l[p+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[r]:!0!==l[r]&&(o=s[0],h.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+p+" to "+o}}}return{state:"success",data:t}}(x,s,w,r),r?(x.ifModified&&((p=w.getResponseHeader("Last-Modified"))&&(C.lastModified[u]=p),(p=w.getResponseHeader("etag"))&&(C.etag[u]=p)),204===e||"HEAD"===x.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,r=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),w.status=e,w.statusText=(t||l)+"",r?f.resolveWith(m,[o,l,w]):f.rejectWith(m,[w,l,a]),w.statusCode(z),z=void 0,y&&g.trigger(r?"ajaxSuccess":"ajaxError",[w,x,r?o:a]),v.fireWith(m,[w,l]),y&&(g.trigger("ajaxComplete",[w,x]),--C.active||C.event.trigger("ajaxStop")))}return w},getJSON:function(e,t,i){return C.get(e,t,i,"json")},getScript:function(e,t){return C.get(e,void 0,t,"script")}}),C.each(["get","post"],function(e,r){C[r]=function(e,t,i,n){return C.isFunction(t)&&(n=n||i,i=t,t=void 0),C.ajax(C.extend({url:e,type:r,dataType:n,data:t,success:i},C.isPlainObject(e)&&e))}}),C._evalUrl=function(e){return C.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},C.fn.extend({wrapAll:function(e){var t;return this[0]&&(C.isFunction(e)&&(e=e.call(this[0])),t=C(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(i){return C.isFunction(i)?this.each(function(e){C(this).wrapInner(i.call(this,e))}):this.each(function(){var e=C(this),t=e.contents();t.length?t.wrapAll(i):e.append(i)})},wrap:function(t){var i=C.isFunction(t);return this.each(function(e){C(this).wrapAll(i?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){C(this).replaceWith(this.childNodes)}),this}}),C.expr.pseudos.hidden=function(e){return!C.expr.pseudos.visible(e)},C.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new b.XMLHttpRequest}catch(e){}};var Gt={0:200,1223:204},Dt=C.ajaxSettings.xhr();x.cors=!!Dt&&"withCredentials"in Dt,x.ajax=Dt=!!Dt,C.ajaxTransport(function(r){var o,a;if(x.cors||Dt&&!r.crossDomain)return{send:function(e,t){var i,n=r.xhr();if(n.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(i in r.xhrFields)n[i]=r.xhrFields[i];for(i in r.mimeType&&n.overrideMimeType&&n.overrideMimeType(r.mimeType),r.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)n.setRequestHeader(i,e[i]);o=function(e){return function(){o&&(o=a=n.onload=n.onerror=n.onabort=n.onreadystatechange=null,"abort"===e?n.abort():"error"===e?"number"!=typeof n.status?t(0,"error"):t(n.status,n.statusText):t(Gt[n.status]||n.status,n.statusText,"text"!==(n.responseType||"text")||"string"!=typeof n.responseText?{binary:n.response}:{text:n.responseText},n.getAllResponseHeaders()))}},n.onload=o(),a=n.onerror=o("error"),void 0!==n.onabort?n.onabort=a:n.onreadystatechange=function(){4===n.readyState&&b.setTimeout(function(){o&&a()})},o=o("abort");try{n.send(r.hasContent&&r.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),C.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return C.globalEval(e),e}}}),C.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),C.ajaxTransport("script",function(i){var n,r;if(i.crossDomain)return{send:function(e,t){n=C("<script>").prop({charset:i.scriptCharset,src:i.url}).on("load error",r=function(e){n.remove(),r=null,e&&t("error"===e.type?404:200,e.type)}),S.head.appendChild(n[0])},abort:function(){r&&r()}}});var It,Lt=[],Bt=/(=)\?(?=&|$)|\?\?/;function Rt(e){return C.isWindow(e)?e:9===e.nodeType&&e.defaultView}C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Lt.pop()||C.expando+"_"+ct++;return this[e]=!0,e}}),C.ajaxPrefilter("json jsonp",function(e,t,i){var n,r,o,a=!1!==e.jsonp&&(Bt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return n=e.jsonpCallback=C.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Bt,"$1"+n):!1!==e.jsonp&&(e.url+=(_t.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return o||C.error(n+" was not called"),o[0]},e.dataTypes[0]="json",r=b[n],b[n]=function(){o=arguments},i.always(function(){void 0===r?C(b).removeProp(n):b[n]=r,e[n]&&(e.jsonpCallback=t.jsonpCallback,Lt.push(n)),o&&C.isFunction(r)&&r(o[0]),o=r=void 0}),"script"}),x.createHTMLDocument=((It=S.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===It.childNodes.length),C.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(x.createHTMLDocument?((n=(t=S.implementation.createHTMLDocument("")).createElement("base")).href=S.location.href,t.head.appendChild(n)):t=S),o=!i&&[],(r=M.exec(e))?[t.createElement(r[1])]:(r=de([e],t,o),o&&o.length&&C(o).remove(),C.merge([],r.childNodes)));var n,r,o},C.fn.load=function(e,t,i){var n,r,o,a=this,s=e.indexOf(" ");return-1<s&&(n=pt(e.slice(s)),e=e.slice(0,s)),C.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),0<a.length&&C.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(n?C("<div>").append(C.parseHTML(e)).find(n):e)}).always(i&&function(e,t){a.each(function(){i.apply(this,o||[e.responseText,t,e])})}),this},C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){C.fn[t]=function(e){return this.on(t,e)}}),C.expr.pseudos.animated=function(t){return C.grep(C.timers,function(e){return t===e.elem}).length},C.offset={setOffset:function(e,t,i){var n,r,o,a,s,p,l=C.css(e,"position"),h=C(e),u={};"static"===l&&(e.style.position="relative"),s=h.offset(),o=C.css(e,"top"),p=C.css(e,"left"),r=("absolute"===l||"fixed"===l)&&-1<(o+p).indexOf("auto")?(a=(n=h.position()).top,n.left):(a=parseFloat(o)||0,parseFloat(p)||0),C.isFunction(t)&&(t=t.call(e,i,C.extend({},s))),null!=t.top&&(u.top=t.top-s.top+a),null!=t.left&&(u.left=t.left-s.left+r),"using"in t?t.using.call(e,u):h.css(u)}},C.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){C.offset.setOffset(this,t,e)});var e,i,n,r,o=this[0];return o?o.getClientRects().length?(n=o.getBoundingClientRect()).width||n.height?(i=Rt(r=o.ownerDocument),e=r.documentElement,{top:n.top+i.pageYOffset-e.clientTop,left:n.left+i.pageXOffset-e.clientLeft}):n:{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===C.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),C.nodeName(e[0],"html")||(n=e.offset()),n={top:n.top+C.css(e[0],"borderTopWidth",!0),left:n.left+C.css(e[0],"borderLeftWidth",!0)}),{top:t.top-n.top-C.css(i,"marginTop",!0),left:t.left-n.left-C.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===C.css(e,"position");)e=e.offsetParent;return e||ce})}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var o="pageYOffset"===r;C.fn[t]=function(e){return N(this,function(e,t,i){var n=Rt(e);return void 0===i?n?n[r]:e[t]:void(n?n.scrollTo(o?n.pageXOffset:i,o?i:n.pageYOffset):e[t]=i)},t,e,arguments.length)}}),C.each(["top","left"],function(e,i){C.cssHooks[i]=Le(x.pixelPosition,function(e,t){if(t)return t=Ie(e,i),Ge.test(t)?C(e).position()[i]+"px":t})}),C.each({Height:"height",Width:"width"},function(a,s){C.each({padding:"inner"+a,content:s,"":"outer"+a},function(n,o){C.fn[o]=function(e,t){var i=arguments.length&&(n||"boolean"!=typeof e),r=n||(!0===e||!0===t?"margin":"border");return N(this,function(e,t,i){var n;return C.isWindow(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(n=e.documentElement,Math.max(e.body["scroll"+a],n["scroll"+a],e.body["offset"+a],n["offset"+a],n["client"+a])):void 0===i?C.css(e,t,r):C.style(e,t,i,r)},s,i?e:void 0,i)}})}),C.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),C.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return C});var Ft=b.jQuery,jt=b.$;return C.noConflict=function(e){return b.$===C&&(b.$=jt),e&&b.jQuery===C&&(b.jQuery=Ft),C},e||(b.jQuery=b.$=C),C}),function(){var d;function $(e,t){var i=function(){return i.method.apply(i.scope,arguments)};return i.scope=e,i.method=t,i}window.js=js={_Boot:{}},window.zpp_nape=zpp_nape={shape:{},constraint:{},geom:{},phys:{},dynamics:{},callbacks:{},util:{},space:{}},window.sandbox=sandbox={},window.nape=nape={shape:{},constraint:{},geom:{},phys:{},dynamics:{},callbacks:{},space:{},util:{}};var _=_=function(){};_.__name__=["Reflect"],_.field=function(e,t){try{return e[t]}catch(e){return null}},_.fields=function(e){var t=[];if(null!=e){var i=Object.prototype.hasOwnProperty;for(var n in e)"__id__"!=n&&"hx__closures__"!=n&&i.call(e,n)&&t.push(n)}return t},_.copy=function(e){for(var t={},i=0,n=_.fields(e);i<n.length;){var r=n[i];++i,t[r]=_.field(e,r)}return t},_.prototype.__class__=_;var n=n=function(){};n.__name__=["Std"],n.string=function(e){return fe.__string_rec(e,"")},n.prototype.__class__=n;var e=e=function(){};e.__name__=["StringTools"],e.hex=function(e,t){for(var i="";i="0123456789ABCDEF".charAt(15&e)+i,0<(e>>>=4););if(null!=t)for(;i.length<t;)i="0"+i;return i},e.prototype.__class__=e;var r=js._Boot.HaxeError=function(e){Error.call(this),this.val=e,this.message=String(e),Error.captureStackTrace&&Error.captureStackTrace(this,r)};r.__name__=["js","_Boot","HaxeError"],r.__super__=Error,r.prototype=Object.create(Error.prototype),r.wrap=function(e){return e instanceof Error?e:new r(e)},r.prototype.val=null,r.prototype.__class__=r;var fe=js.Boot=function(){};fe.__name__=["js","Boot"],fe.getClass=function(e){if(e instanceof Array&&null==e.__enum__)return Array;var t=e.__class__;if(null!=t)return t;var i=fe.__nativeClassName(e);return null!=i?fe.__resolveNativeClass(i):null},fe.__string_rec=function(e,t){if(null==e)return"null";if(5<=t.length)return"<...>";var i=typeof e;switch("function"==i&&(e.__name__||e.__ename__)&&(i="object"),i){case"function":return"<function>";case"object":if(e instanceof Array){if(e.__enum__){if(2==e.length)return e[0];var n=e[0]+"(";t+="\t";for(var r=2,o=e.length;r<o;){var a=r++;n+=2!=a?","+fe.__string_rec(e[a],t):fe.__string_rec(e[a],t)}return n+")"}var s="[";t+="\t";for(var p=0,l=e.length;p<l;){var h=p++;s+=(0<h?",":"")+fe.__string_rec(e[h],t)}return s+="]"}var u;try{u=e.toString}catch(e){return"???"}if(null!=u&&u!=Object.toString&&"function"==typeof u){var d=e.toString();if("[object Object]"!=d)return d}var c=null,_="{\n";t+="\t";var y=null!=e.hasOwnProperty;for(var c in e)y&&!e.hasOwnProperty(c)||"prototype"!=c&&"__class__"!=c&&"__super__"!=c&&"__interfaces__"!=c&&"__properties__"!=c&&(2!=_.length&&(_+=", \n"),_+=t+c+" : "+fe.__string_rec(e[c],t));return _+="\n"+(t=t.substring(1))+"}";case"string":return e;default:return String(e)}},fe.__interfLoop=function(e,t){if(null==e)return!1;if(e==t)return!0;var i=e.__interfaces__;if(null!=i)for(var n=0,r=i.length;n<r;){var o=i[n++];if(o==t||fe.__interfLoop(o,t))return!0}return fe.__interfLoop(e.__super__,t)},fe.__instanceof=function(e,t){if(null==t)return!1;switch(t){case Array:return e instanceof Array&&null==e.__enum__;case Qn:return"boolean"==typeof e;case Zn:return!0;case Jn:return"number"==typeof e;case Kn:return"number"==typeof e&&(0|e)===e;case String:return"string"==typeof e;default:if(null==e)return!1;if("function"==typeof t){if(e instanceof t)return!0;if(fe.__interfLoop(fe.getClass(e),t))return!0}else if("object"==typeof t&&fe.__isNativeObj(t)&&e instanceof t)return!0;return t==$n&&null!=e.__name__||(t==er&&null!=e.__ename__||e.__enum__==t)}},fe.__nativeClassName=function(e){var t=fe.__toStr.call(e).slice(8,-1);return"Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t},fe.__isNativeObj=function(e){return null!=fe.__nativeClassName(e)},fe.__resolveNativeClass=function(e){return $global[e]},fe.prototype.__class__=fe;var Qs=nape.Config=function(){};Qs.__name__=["nape","Config"],Qs.prototype.__class__=Qs;var t=nape.callbacks.Callback=function(){this.zpp_inner=null};t.__name__=["nape","callbacks","Callback"],t.prototype.zpp_inner=null,t.prototype.get_event=function(){return Le.events[this.zpp_inner.event]},t.prototype.get_listener=function(){return this.zpp_inner.listener.outer},t.prototype.toString=function(){return""},Object.defineProperty(t.prototype,"event",{get:t.prototype.get_event}),Object.defineProperty(t.prototype,"listener",{get:t.prototype.get_listener}),t.prototype.__class__=t;var i=nape.callbacks.BodyCallback=function(){t.call(this)};i.__name__=["nape","callbacks","BodyCallback"],i.__super__=t,i.prototype=Object.create(t.prototype),i.prototype.get_body=function(){return this.zpp_inner.body.outer},i.prototype.toString=function(){var e="Cb:";return e="Cb:"+["WAKE","SLEEP"][this.zpp_inner.event-2],e+=":"+this.zpp_inner.body.outer.toString(),e+=" : listener: "+n.string(this.zpp_inner.listener.outer)},Object.defineProperty(i.prototype,"body",{get:i.prototype.get_body}),i.prototype.__class__=i;var h=nape.callbacks.Listener=function(){this.zpp_inner=null};h.__name__=["nape","callbacks","Listener"],h.prototype.zpp_inner=null,h.prototype.get_type=function(){return Le.types[this.zpp_inner.type]},h.prototype.get_event=function(){return Le.events[this.zpp_inner.event]},h.prototype.set_event=function(e){var t;Le.events[this.zpp_inner.event]!=e&&(null==Uo.CbEvent_BEGIN&&(Uo.internal=!0,Uo.CbEvent_BEGIN=new u,Uo.internal=!1),t=e==Uo.CbEvent_BEGIN?0:(null==Uo.CbEvent_ONGOING&&(Uo.internal=!0,Uo.CbEvent_ONGOING=new u,Uo.internal=!1),e==Uo.CbEvent_ONGOING?6:(null==Uo.CbEvent_END&&(Uo.internal=!0,Uo.CbEvent_END=new u,Uo.internal=!1),e==Uo.CbEvent_END?1:(null==Uo.CbEvent_SLEEP&&(Uo.internal=!0,Uo.CbEvent_SLEEP=new u,Uo.internal=!1),e==Uo.CbEvent_SLEEP?3:(null==Uo.CbEvent_WAKE&&(Uo.internal=!0,Uo.CbEvent_WAKE=new u,Uo.internal=!1),e==Uo.CbEvent_WAKE?2:(null==Uo.CbEvent_PRE&&(Uo.internal=!0,Uo.CbEvent_PRE=new u,Uo.internal=!1),e==Uo.CbEvent_PRE?5:4))))),this.zpp_inner.swapEvent(t));return Le.events[this.zpp_inner.event]},h.prototype.get_precedence=function(){return this.zpp_inner.precedence},h.prototype.set_precedence=function(e){return this.zpp_inner.precedence!=e&&(this.zpp_inner.precedence=e,this.zpp_inner.invalidate_precedence()),this.zpp_inner.precedence},h.prototype.get_space=function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},h.prototype.set_space=function(e){if((null==this.zpp_inner.space?null:this.zpp_inner.space.outer)!=e)if(null!=this.zpp_inner.space&&this.zpp_inner.space.outer.zpp_inner.wrap_listeners.remove(this),null!=e){var t=e.zpp_inner.wrap_listeners;t.zpp_inner.reverse_flag?t.push(this):t.unshift(this)}else this.zpp_inner.space=null;return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},h.prototype.toString=function(){var e=["BEGIN","END","WAKE","SLEEP","BREAK","PRE","ONGOING"][this.zpp_inner.event];if(0==this.zpp_inner.type)return"BodyListener{"+e+"::"+n.string(this.zpp_inner.body.outer_zn.zpp_inner_zn.options.outer)+"}";if(1==this.zpp_inner.type)return"ConstraintListener{"+e+"::"+n.string(this.zpp_inner.constraint.outer_zn.zpp_inner_zn.options.outer)+"}";var t,i=this.zpp_inner.interaction;switch(i.itype){case 1:t="COLLISION";break;case 2:t="SENSOR";break;case 4:t="FLUID";break;default:t="ALL"}return(2==this.zpp_inner.type?"InteractionListener{"+e+"#"+t+"::"+n.string(i.outer_zni.zpp_inner_zn.options1.outer)+":"+n.string(i.outer_zni.zpp_inner_zn.options2.outer)+"}":"PreListener{"+t+"::"+n.string(i.outer_znp.zpp_inner_zn.options1.outer)+":"+n.string(i.outer_znp.zpp_inner_zn.options2.outer)+"}")+" precedence="+this.zpp_inner.precedence},Object.defineProperty(h.prototype,"type",{get:h.prototype.get_type}),Object.defineProperty(h.prototype,"event",{get:h.prototype.get_event,set:h.prototype.set_event}),Object.defineProperty(h.prototype,"precedence",{get:h.prototype.get_precedence,set:h.prototype.set_precedence}),Object.defineProperty(h.prototype,"space",{get:h.prototype.get_space,set:h.prototype.set_space}),h.prototype.__class__=h;var o=nape.callbacks.BodyListener=function(e,t,i,n){null==n&&(n=0),this.zpp_inner_zn=null,h.call(this);var r=-1;null==Uo.CbEvent_WAKE&&(Uo.internal=!0,Uo.CbEvent_WAKE=new u,Uo.internal=!1),e==Uo.CbEvent_WAKE?r=2:(null==Uo.CbEvent_SLEEP&&(Uo.internal=!0,Uo.CbEvent_SLEEP=new u,Uo.internal=!1),e==Uo.CbEvent_SLEEP&&(r=3)),this.zpp_inner_zn=new Be(je.argument(t),r,i),this.zpp_inner=this.zpp_inner_zn,((this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this).zpp_inner.precedence=n};o.__name__=["nape","callbacks","BodyListener"],o.__super__=h,o.prototype=Object.create(h.prototype),o.prototype.zpp_inner_zn=null,o.prototype.get_options=function(){return this.zpp_inner_zn.options.outer},o.prototype.set_options=function(e){return this.zpp_inner_zn.options.set(e.zpp_inner),this.zpp_inner_zn.options.outer},o.prototype.get_handler=function(){return this.zpp_inner_zn.handler},o.prototype.set_handler=function(e){return this.zpp_inner_zn.handler=e,this.zpp_inner_zn.handler},Object.defineProperty(o.prototype,"options",{get:o.prototype.get_options,set:o.prototype.set_options}),Object.defineProperty(o.prototype,"handler",{get:o.prototype.get_handler,set:o.prototype.set_handler}),o.prototype.__class__=o;var u=nape.callbacks.CbEvent=function(){};u.__name__=["nape","callbacks","CbEvent"],u.BEGIN=null,u.get_BEGIN=function(){return null==Uo.CbEvent_BEGIN&&(Uo.internal=!0,Uo.CbEvent_BEGIN=new u,Uo.internal=!1),Uo.CbEvent_BEGIN},u.ONGOING=null,u.get_ONGOING=function(){return null==Uo.CbEvent_ONGOING&&(Uo.internal=!0,Uo.CbEvent_ONGOING=new u,Uo.internal=!1),Uo.CbEvent_ONGOING},u.END=null,u.get_END=function(){return null==Uo.CbEvent_END&&(Uo.internal=!0,Uo.CbEvent_END=new u,Uo.internal=!1),Uo.CbEvent_END},u.WAKE=null,u.get_WAKE=function(){return null==Uo.CbEvent_WAKE&&(Uo.internal=!0,Uo.CbEvent_WAKE=new u,Uo.internal=!1),Uo.CbEvent_WAKE},u.SLEEP=null,u.get_SLEEP=function(){return null==Uo.CbEvent_SLEEP&&(Uo.internal=!0,Uo.CbEvent_SLEEP=new u,Uo.internal=!1),Uo.CbEvent_SLEEP},u.BREAK=null,u.get_BREAK=function(){return null==Uo.CbEvent_BREAK&&(Uo.internal=!0,Uo.CbEvent_BREAK=new u,Uo.internal=!1),Uo.CbEvent_BREAK},u.PRE=null,u.get_PRE=function(){return null==Uo.CbEvent_PRE&&(Uo.internal=!0,Uo.CbEvent_PRE=new u,Uo.internal=!1),Uo.CbEvent_PRE},u.prototype.toString=function(){return null==Uo.CbEvent_PRE&&(Uo.internal=!0,Uo.CbEvent_PRE=new u,Uo.internal=!1),this==Uo.CbEvent_PRE?"PRE":(null==Uo.CbEvent_BEGIN&&(Uo.internal=!0,Uo.CbEvent_BEGIN=new u,Uo.internal=!1),this==Uo.CbEvent_BEGIN?"BEGIN":(null==Uo.CbEvent_ONGOING&&(Uo.internal=!0,Uo.CbEvent_ONGOING=new u,Uo.internal=!1),this==Uo.CbEvent_ONGOING?"ONGOING":(null==Uo.CbEvent_END&&(Uo.internal=!0,Uo.CbEvent_END=new u,Uo.internal=!1),this==Uo.CbEvent_END?"END":(null==Uo.CbEvent_WAKE&&(Uo.internal=!0,Uo.CbEvent_WAKE=new u,Uo.internal=!1),this==Uo.CbEvent_WAKE?"WAKE":(null==Uo.CbEvent_SLEEP&&(Uo.internal=!0,Uo.CbEvent_SLEEP=new u,Uo.internal=!1),this==Uo.CbEvent_SLEEP?"SLEEP":(null==Uo.CbEvent_BREAK&&(Uo.internal=!0,Uo.CbEvent_BREAK=new u,Uo.internal=!1),this==Uo.CbEvent_BREAK?"BREAK":""))))))},Object.defineProperty(u,"BEGIN",{get:u.get_BEGIN}),Object.defineProperty(u,"ONGOING",{get:u.get_ONGOING}),Object.defineProperty(u,"END",{get:u.get_END}),Object.defineProperty(u,"WAKE",{get:u.get_WAKE}),Object.defineProperty(u,"SLEEP",{get:u.get_SLEEP}),Object.defineProperty(u,"BREAK",{get:u.get_BREAK}),Object.defineProperty(u,"PRE",{get:u.get_PRE}),u.prototype.__class__=u;var c=nape.callbacks.CbType=function(){this.zpp_inner=null,this.zpp_inner=new Ie,this.zpp_inner.outer=this};c.__name__=["nape","callbacks","CbType"],c.ANY_BODY=null,c.get_ANY_BODY=function(){return Ie.ANY_BODY},c.ANY_CONSTRAINT=null,c.get_ANY_CONSTRAINT=function(){return Ie.ANY_CONSTRAINT},c.ANY_SHAPE=null,c.get_ANY_SHAPE=function(){return Ie.ANY_SHAPE},c.ANY_COMPOUND=null,c.get_ANY_COMPOUND=function(){return Ie.ANY_COMPOUND},c.prototype.zpp_inner=null,c.prototype.get_id=function(){return this.zpp_inner.id},c.prototype.including=function(e){return new g(this).including(e)},c.prototype.excluding=function(e){return new g(this).excluding(e)},c.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},c.prototype.get_interactors=function(){return null==this.zpp_inner.wrap_interactors&&(this.zpp_inner.wrap_interactors=fn.get(this.zpp_inner.interactors,!0)),this.zpp_inner.wrap_interactors},c.prototype.get_constraints=function(){return null==this.zpp_inner.wrap_constraints&&(this.zpp_inner.wrap_constraints=mn.get(this.zpp_inner.constraints,!0)),this.zpp_inner.wrap_constraints},c.prototype.toString=function(){return this==Ie.ANY_BODY?"ANY_BODY":this==Ie.ANY_SHAPE?"ANY_SHAPE":this==Ie.ANY_COMPOUND?"ANY_COMPOUND":this==Ie.ANY_CONSTRAINT?"ANY_CONSTRAINT":"CbType#"+this.zpp_inner.id},Object.defineProperty(c,"ANY_BODY",{get:c.get_ANY_BODY}),Object.defineProperty(c,"ANY_CONSTRAINT",{get:c.get_ANY_CONSTRAINT}),Object.defineProperty(c,"ANY_SHAPE",{get:c.get_ANY_SHAPE}),Object.defineProperty(c,"ANY_COMPOUND",{get:c.get_ANY_COMPOUND}),Object.defineProperty(c.prototype,"id",{get:c.prototype.get_id}),Object.defineProperty(c.prototype,"userData",{get:c.prototype.get_userData}),Object.defineProperty(c.prototype,"interactors",{get:c.prototype.get_interactors}),Object.defineProperty(c.prototype,"constraints",{get:c.prototype.get_constraints}),c.prototype.__class__=c;var Ve=nape.callbacks.CbTypeIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};Ve.__name__=["nape","callbacks","CbTypeIterator"],Ve.get=function(e){var t;if(null==Ve.zpp_pool){Tn.internal=!0;var i=new Ve;Tn.internal=!1,t=i}else{var n=Ve.zpp_pool;Ve.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},Ve.prototype.zpp_inner=null,Ve.prototype.zpp_i=null,Ve.prototype.zpp_critical=null,Ve.prototype.zpp_next=null,Ve.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=Ve.zpp_pool,(Ve.zpp_pool=this).zpp_inner=null,!1)},Ve.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},Ve.prototype.__class__=Ve;var y=nape.callbacks.CbTypeList=function(){this.zpp_inner=null,this.zpp_inner=new Tn,this.zpp_inner.outer=this};y.__name__=["nape","callbacks","CbTypeList"],y.fromArray=function(e){for(var t=new y,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},y.prototype.zpp_inner=null,y.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},y.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},y.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},y.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},y.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},y.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var n=(e=null==(i=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:i.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer},y.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var i=(e=null==(t=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer},y.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},y.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},y.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},y.prototype.empty=function(){return null==this.zpp_inner.inner.head},y.prototype.iterator=function(){return this.zpp_inner.valmod(),Ve.get(this)},y.prototype.copy=function(e){null==e&&(e=!1);var t=new y;this.zpp_inner.valmod();for(var i=Ve.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=Ve.zpp_pool,(Ve.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},y.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=Ve.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=Ve.zpp_pool,(Ve.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||(this.zpp_inner.reverse_flag?this.push(r):this.unshift(r))}},y.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=Ve.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=Ve.zpp_pool,(Ve.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},y.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=Ve.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=Ve.zpp_pool,(Ve.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=Ve.zpp_pool,(Ve.zpp_pool=t).zpp_inner=null;break}}return this},y.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(y.prototype,"length",{get:y.prototype.get_length}),y.prototype.__class__=y;var a=nape.callbacks.ConstraintCallback=function(){t.call(this)};a.__name__=["nape","callbacks","ConstraintCallback"],a.__super__=t,a.prototype=Object.create(t.prototype),a.prototype.get_constraint=function(){return this.zpp_inner.constraint.outer},a.prototype.toString=function(){var e="Cb:";return e="Cb:"+["WAKE","SLEEP","BREAK"][this.zpp_inner.event-2],e+=":"+this.zpp_inner.constraint.outer.toString(),e+=" : listener: "+n.string(this.zpp_inner.listener.outer)},Object.defineProperty(a.prototype,"constraint",{get:a.prototype.get_constraint}),a.prototype.__class__=a;var s=nape.callbacks.ConstraintListener=function(e,t,i,n){null==n&&(n=0),this.zpp_inner_zn=null,h.call(this);var r=-1;null==Uo.CbEvent_WAKE&&(Uo.internal=!0,Uo.CbEvent_WAKE=new u,Uo.internal=!1),e==Uo.CbEvent_WAKE?r=2:(null==Uo.CbEvent_SLEEP&&(Uo.internal=!0,Uo.CbEvent_SLEEP=new u,Uo.internal=!1),e==Uo.CbEvent_SLEEP?r=3:(null==Uo.CbEvent_BREAK&&(Uo.internal=!0,Uo.CbEvent_BREAK=new u,Uo.internal=!1),e==Uo.CbEvent_BREAK&&(r=4))),this.zpp_inner_zn=new Re(je.argument(t),r,i),this.zpp_inner=this.zpp_inner_zn,((this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this).zpp_inner.precedence=n};s.__name__=["nape","callbacks","ConstraintListener"],s.__super__=h,s.prototype=Object.create(h.prototype),s.prototype.zpp_inner_zn=null,s.prototype.get_options=function(){return this.zpp_inner_zn.options.outer},s.prototype.set_options=function(e){return this.zpp_inner_zn.options.set(e.zpp_inner),this.zpp_inner_zn.options.outer},s.prototype.get_handler=function(){return this.zpp_inner_zn.handler},s.prototype.set_handler=function(e){return this.zpp_inner_zn.handler=e,this.zpp_inner_zn.handler},Object.defineProperty(s.prototype,"options",{get:s.prototype.get_options,set:s.prototype.set_options}),Object.defineProperty(s.prototype,"handler",{get:s.prototype.get_handler,set:s.prototype.set_handler}),s.prototype.__class__=s;var p=nape.callbacks.InteractionCallback=function(){t.call(this)};p.__name__=["nape","callbacks","InteractionCallback"],p.__super__=t,p.prototype=Object.create(t.prototype),p.prototype.get_int1=function(){return this.zpp_inner.int1.outer_i},p.prototype.get_int2=function(){return this.zpp_inner.int2.outer_i},p.prototype.get_arbiters=function(){return this.zpp_inner.wrap_arbiters},p.prototype.toString=function(){var e="Cb:";return e="Cb:"+["BEGIN","END","","","","","ONGOING"][this.zpp_inner.event],e+=":"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString(),e+=" : "+this.zpp_inner.wrap_arbiters.toString(),e+=" : listener: "+n.string(this.zpp_inner.listener.outer)},Object.defineProperty(p.prototype,"int1",{get:p.prototype.get_int1}),Object.defineProperty(p.prototype,"int2",{get:p.prototype.get_int2}),Object.defineProperty(p.prototype,"arbiters",{get:p.prototype.get_arbiters}),p.prototype.__class__=p;var l=nape.callbacks.InteractionListener=function(e,t,i,n,r,o){null==o&&(o=0),this.zpp_inner_zn=null,h.call(this);var a=-1;null==Uo.CbEvent_BEGIN&&(Uo.internal=!0,Uo.CbEvent_BEGIN=new u,Uo.internal=!1),e==Uo.CbEvent_BEGIN?a=0:(null==Uo.CbEvent_END&&(Uo.internal=!0,Uo.CbEvent_END=new u,Uo.internal=!1),e==Uo.CbEvent_END?a=1:(null==Uo.CbEvent_ONGOING&&(Uo.internal=!0,Uo.CbEvent_ONGOING=new u,Uo.internal=!1),e==Uo.CbEvent_ONGOING&&(a=6))),this.zpp_inner_zn=new ri(je.argument(i),je.argument(n),a,2),this.zpp_inner=this.zpp_inner_zn,((this.zpp_inner.outer=this).zpp_inner_zn.outer_zni=this).zpp_inner.precedence=o,this.zpp_inner_zn.handleri=r;var s,p=this.zpp_inner_zn.itype;(1==p?(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION):2==p?(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR):4==p?(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID):7==p?(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),Uo.InteractionType_ANY):null)!=t&&(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),s=t==Uo.InteractionType_COLLISION?1:(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),t==Uo.InteractionType_SENSOR?2:(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),t==Uo.InteractionType_FLUID?4:7)),this.zpp_inner_zn.itype=s);var l=this.zpp_inner_zn.itype;1==l?null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1):2==l?null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1):4==l?null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1):7==l&&null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1)};l.__name__=["nape","callbacks","InteractionListener"],l.__super__=h,l.prototype=Object.create(h.prototype),l.prototype.zpp_inner_zn=null,l.prototype.get_options1=function(){return this.zpp_inner_zn.options1.outer},l.prototype.set_options1=function(e){return this.zpp_inner_zn.options1.set(e.zpp_inner),this.zpp_inner_zn.options1.outer},l.prototype.get_options2=function(){return this.zpp_inner_zn.options2.outer},l.prototype.set_options2=function(e){return this.zpp_inner_zn.options2.set(e.zpp_inner),this.zpp_inner_zn.options2.outer},l.prototype.get_interactionType=function(){var e=this.zpp_inner_zn.itype;return 1==e?(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION):2==e?(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR):4==e?(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID):7==e?(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),Uo.InteractionType_ANY):null},l.prototype.set_interactionType=function(e){var t,i=this.zpp_inner_zn.itype;(1==i?(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION):2==i?(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR):4==i?(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID):7==i?(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),Uo.InteractionType_ANY):null)!=e&&(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),t=e==Uo.InteractionType_COLLISION?1:(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),e==Uo.InteractionType_SENSOR?2:(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),e==Uo.InteractionType_FLUID?4:7)),this.zpp_inner_zn.itype=t);var n=this.zpp_inner_zn.itype;return 1==n?(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION):2==n?(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR):4==n?(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID):7==n?(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),Uo.InteractionType_ANY):null},l.prototype.get_handler=function(){return this.zpp_inner_zn.handleri},l.prototype.set_handler=function(e){return this.zpp_inner_zn.handleri=e,this.zpp_inner_zn.handleri},l.prototype.get_allowSleepingCallbacks=function(){return this.zpp_inner_zn.allowSleepingCallbacks},l.prototype.set_allowSleepingCallbacks=function(e){return this.zpp_inner_zn.allowSleepingCallbacks=e,this.zpp_inner_zn.allowSleepingCallbacks},Object.defineProperty(l.prototype,"options1",{get:l.prototype.get_options1,set:l.prototype.set_options1}),Object.defineProperty(l.prototype,"options2",{get:l.prototype.get_options2,set:l.prototype.set_options2}),Object.defineProperty(l.prototype,"interactionType",{get:l.prototype.get_interactionType,set:l.prototype.set_interactionType}),Object.defineProperty(l.prototype,"handler",{get:l.prototype.get_handler,set:l.prototype.set_handler}),Object.defineProperty(l.prototype,"allowSleepingCallbacks",{get:l.prototype.get_allowSleepingCallbacks,set:l.prototype.set_allowSleepingCallbacks}),l.prototype.__class__=l;var C=nape.callbacks.InteractionType=function(){};C.__name__=["nape","callbacks","InteractionType"],C.COLLISION=null,C.get_COLLISION=function(){return null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION},C.SENSOR=null,C.get_SENSOR=function(){return null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR},C.FLUID=null,C.get_FLUID=function(){return null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID},C.ANY=null,C.get_ANY=function(){return null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),Uo.InteractionType_ANY},C.prototype.toString=function(){return null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),this==Uo.InteractionType_COLLISION?"COLLISION":(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),this==Uo.InteractionType_SENSOR?"SENSOR":(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),this==Uo.InteractionType_FLUID?"FLUID":(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),this==Uo.InteractionType_ANY?"ANY":"")))},Object.defineProperty(C,"COLLISION",{get:C.get_COLLISION}),Object.defineProperty(C,"SENSOR",{get:C.get_SENSOR}),Object.defineProperty(C,"FLUID",{get:C.get_FLUID}),Object.defineProperty(C,"ANY",{get:C.get_ANY}),C.prototype.__class__=C;var He=nape.callbacks.ListenerIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};He.__name__=["nape","callbacks","ListenerIterator"],He.get=function(e){var t;if(null==He.zpp_pool){zn.internal=!0;var i=new He;zn.internal=!1,t=i}else{var n=He.zpp_pool;He.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},He.prototype.zpp_inner=null,He.prototype.zpp_i=null,He.prototype.zpp_critical=null,He.prototype.zpp_next=null,He.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=He.zpp_pool,(He.zpp_pool=this).zpp_inner=null,!1)},He.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},He.prototype.__class__=He;var x=nape.callbacks.ListenerList=function(){this.zpp_inner=null,this.zpp_inner=new zn,this.zpp_inner.outer=this};x.__name__=["nape","callbacks","ListenerList"],x.fromArray=function(e){for(var t=new x,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},x.prototype.zpp_inner=null,x.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},x.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},x.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},x.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},x.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},x.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var n=(e=null==(i=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:i.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer},x.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var i=(e=null==(t=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer},x.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},x.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},x.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},x.prototype.empty=function(){return null==this.zpp_inner.inner.head},x.prototype.iterator=function(){return this.zpp_inner.valmod(),He.get(this)},x.prototype.copy=function(e){null==e&&(e=!1);var t=new x;this.zpp_inner.valmod();for(var i=He.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=He.zpp_pool,(He.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},x.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=He.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=He.zpp_pool,(He.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||(this.zpp_inner.reverse_flag?this.push(r):this.unshift(r))}},x.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=He.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=He.zpp_pool,(He.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},x.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=He.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=He.zpp_pool,(He.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=He.zpp_pool,(He.zpp_pool=t).zpp_inner=null;break}}return this},x.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(x.prototype,"length",{get:x.prototype.get_length}),x.prototype.__class__=x;var m=nape.callbacks.ListenerType=function(){};m.__name__=["nape","callbacks","ListenerType"],m.BODY=null,m.get_BODY=function(){return null==Uo.ListenerType_BODY&&(Uo.internal=!0,Uo.ListenerType_BODY=new m,Uo.internal=!1),Uo.ListenerType_BODY},m.CONSTRAINT=null,m.get_CONSTRAINT=function(){return null==Uo.ListenerType_CONSTRAINT&&(Uo.internal=!0,Uo.ListenerType_CONSTRAINT=new m,Uo.internal=!1),Uo.ListenerType_CONSTRAINT},m.INTERACTION=null,m.get_INTERACTION=function(){return null==Uo.ListenerType_INTERACTION&&(Uo.internal=!0,Uo.ListenerType_INTERACTION=new m,Uo.internal=!1),Uo.ListenerType_INTERACTION},m.PRE=null,m.get_PRE=function(){return null==Uo.ListenerType_PRE&&(Uo.internal=!0,Uo.ListenerType_PRE=new m,Uo.internal=!1),Uo.ListenerType_PRE},m.prototype.toString=function(){return null==Uo.ListenerType_BODY&&(Uo.internal=!0,Uo.ListenerType_BODY=new m,Uo.internal=!1),this==Uo.ListenerType_BODY?"BODY":(null==Uo.ListenerType_CONSTRAINT&&(Uo.internal=!0,Uo.ListenerType_CONSTRAINT=new m,Uo.internal=!1),this==Uo.ListenerType_CONSTRAINT?"CONSTRAINT":(null==Uo.ListenerType_INTERACTION&&(Uo.internal=!0,Uo.ListenerType_INTERACTION=new m,Uo.internal=!1),this==Uo.ListenerType_INTERACTION?"INTERACTION":(null==Uo.ListenerType_PRE&&(Uo.internal=!0,Uo.ListenerType_PRE=new m,Uo.internal=!1),this==Uo.ListenerType_PRE?"PRE":"")))},Object.defineProperty(m,"BODY",{get:m.get_BODY}),Object.defineProperty(m,"CONSTRAINT",{get:m.get_CONSTRAINT}),Object.defineProperty(m,"INTERACTION",{get:m.get_INTERACTION}),Object.defineProperty(m,"PRE",{get:m.get_PRE}),m.prototype.__class__=m;var g=nape.callbacks.OptionType=function(e,t){this.zpp_inner=null,this.zpp_inner=new je,this.zpp_inner.outer=this,null!=e&&this.including(e),null!=t&&this.excluding(t)};g.__name__=["nape","callbacks","OptionType"],g.prototype.zpp_inner=null,g.prototype.get_includes=function(){return null==this.zpp_inner.wrap_includes&&this.zpp_inner.setup_includes(),this.zpp_inner.wrap_includes},g.prototype.get_excludes=function(){return null==this.zpp_inner.wrap_excludes&&this.zpp_inner.setup_excludes(),this.zpp_inner.wrap_excludes},g.prototype.including=function(e){return this.zpp_inner.append(this.zpp_inner.includes,e),this},g.prototype.excluding=function(e){return this.zpp_inner.append(this.zpp_inner.excludes,e),this},g.prototype.toString=function(){null==this.zpp_inner.wrap_includes&&this.zpp_inner.setup_includes();var e=this.zpp_inner.wrap_includes.toString();return null==this.zpp_inner.wrap_excludes&&this.zpp_inner.setup_excludes(),"@{"+e+" excluding "+this.zpp_inner.wrap_excludes.toString()+"}"},Object.defineProperty(g.prototype,"includes",{get:g.prototype.get_includes}),Object.defineProperty(g.prototype,"excludes",{get:g.prototype.get_excludes}),g.prototype.__class__=g;var f=nape.callbacks.PreCallback=function(){t.call(this)};f.__name__=["nape","callbacks","PreCallback"],f.__super__=t,f.prototype=Object.create(t.prototype),f.prototype.get_arbiter=function(){return this.zpp_inner.pre_arbiter.wrapper()},f.prototype.get_int1=function(){return this.zpp_inner.int1.outer_i},f.prototype.get_int2=function(){return this.zpp_inner.int2.outer_i},f.prototype.get_swapped=function(){return this.zpp_inner.pre_swapped},f.prototype.toString=function(){var e="Cb:PRE:";return e="Cb:PRE::"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString(),e+=" : "+this.zpp_inner.pre_arbiter.wrapper().toString(),e+=" : listnener: "+n.string(this.zpp_inner.listener.outer)},Object.defineProperty(f.prototype,"arbiter",{get:f.prototype.get_arbiter}),Object.defineProperty(f.prototype,"int1",{get:f.prototype.get_int1}),Object.defineProperty(f.prototype,"int2",{get:f.prototype.get_int2}),Object.defineProperty(f.prototype,"swapped",{get:f.prototype.get_swapped}),f.prototype.__class__=f;var Fo=nape.callbacks.PreFlag=function(){};Fo.__name__=["nape","callbacks","PreFlag"],Fo.ACCEPT=null,Fo.get_ACCEPT=function(){return null==Uo.PreFlag_ACCEPT&&(Uo.internal=!0,Uo.PreFlag_ACCEPT=new Fo,Uo.internal=!1),Uo.PreFlag_ACCEPT},Fo.IGNORE=null,Fo.get_IGNORE=function(){return null==Uo.PreFlag_IGNORE&&(Uo.internal=!0,Uo.PreFlag_IGNORE=new Fo,Uo.internal=!1),Uo.PreFlag_IGNORE},Fo.ACCEPT_ONCE=null,Fo.get_ACCEPT_ONCE=function(){return null==Uo.PreFlag_ACCEPT_ONCE&&(Uo.internal=!0,Uo.PreFlag_ACCEPT_ONCE=new Fo,Uo.internal=!1),Uo.PreFlag_ACCEPT_ONCE},Fo.IGNORE_ONCE=null,Fo.get_IGNORE_ONCE=function(){return null==Uo.PreFlag_IGNORE_ONCE&&(Uo.internal=!0,Uo.PreFlag_IGNORE_ONCE=new Fo,Uo.internal=!1),Uo.PreFlag_IGNORE_ONCE},Fo.prototype.toString=function(){return null==Uo.PreFlag_ACCEPT&&(Uo.internal=!0,Uo.PreFlag_ACCEPT=new Fo,Uo.internal=!1),this==Uo.PreFlag_ACCEPT?"ACCEPT":(null==Uo.PreFlag_IGNORE&&(Uo.internal=!0,Uo.PreFlag_IGNORE=new Fo,Uo.internal=!1),this==Uo.PreFlag_IGNORE?"IGNORE":(null==Uo.PreFlag_ACCEPT_ONCE&&(Uo.internal=!0,Uo.PreFlag_ACCEPT_ONCE=new Fo,Uo.internal=!1),this==Uo.PreFlag_ACCEPT_ONCE?"ACCEPT_ONCE":(null==Uo.PreFlag_IGNORE_ONCE&&(Uo.internal=!0,Uo.PreFlag_IGNORE_ONCE=new Fo,Uo.internal=!1),this==Uo.PreFlag_IGNORE_ONCE?"IGNORE_ONCE":"")))},Object.defineProperty(Fo,"ACCEPT",{get:Fo.get_ACCEPT}),Object.defineProperty(Fo,"IGNORE",{get:Fo.get_IGNORE}),Object.defineProperty(Fo,"ACCEPT_ONCE",{get:Fo.get_ACCEPT_ONCE}),Object.defineProperty(Fo,"IGNORE_ONCE",{get:Fo.get_IGNORE_ONCE}),Fo.prototype.__class__=Fo;var v=nape.callbacks.PreListener=function(e,t,i,n,r,o){null==o&&(o=!1),null==r&&(r=0),this.zpp_inner_zn=null,h.call(this),this.zpp_inner_zn=new ri(je.argument(t),je.argument(i),5,3),this.zpp_inner=this.zpp_inner_zn,((this.zpp_inner.outer=this).zpp_inner_zn.outer_znp=this).zpp_inner.precedence=r,this.zpp_inner_zn.pure=o,this.zpp_inner_zn.handlerp=n;var a,s=this.zpp_inner_zn.itype;(1==s?(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION):2==s?(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR):4==s?(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID):7==s?(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),Uo.InteractionType_ANY):null)!=e&&(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),a=e==Uo.InteractionType_COLLISION?1:(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),e==Uo.InteractionType_SENSOR?2:(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),e==Uo.InteractionType_FLUID?4:7)),this.zpp_inner_zn.itype=a);var p=this.zpp_inner_zn.itype;1==p?null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1):2==p?null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1):4==p?null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1):7==p&&null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1)};v.__name__=["nape","callbacks","PreListener"],v.__super__=h,v.prototype=Object.create(h.prototype),v.prototype.zpp_inner_zn=null,v.prototype.get_options1=function(){return this.zpp_inner_zn.options1.outer},v.prototype.set_options1=function(e){return this.zpp_inner_zn.options1.set(e.zpp_inner),this.zpp_inner_zn.options1.outer},v.prototype.get_options2=function(){return this.zpp_inner_zn.options2.outer},v.prototype.set_options2=function(e){return this.zpp_inner_zn.options2.set(e.zpp_inner),this.zpp_inner_zn.options2.outer},v.prototype.get_handler=function(){return this.zpp_inner_zn.handlerp},v.prototype.set_handler=function(e){return this.zpp_inner_zn.handlerp=e,this.zpp_inner_zn.wake(),this.zpp_inner_zn.handlerp},v.prototype.get_pure=function(){return this.zpp_inner_zn.pure},v.prototype.set_pure=function(e){return e||this.zpp_inner_zn.wake(),this.zpp_inner_zn.pure=e,this.zpp_inner_zn.pure},v.prototype.get_interactionType=function(){var e=this.zpp_inner_zn.itype;return 1==e?(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION):2==e?(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR):4==e?(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID):7==e?(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),Uo.InteractionType_ANY):null},v.prototype.set_interactionType=function(e){var t,i=this.zpp_inner_zn.itype;(1==i?(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION):2==i?(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR):4==i?(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID):7==i?(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),Uo.InteractionType_ANY):null)!=e&&(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),t=e==Uo.InteractionType_COLLISION?1:(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),e==Uo.InteractionType_SENSOR?2:(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),e==Uo.InteractionType_FLUID?4:7)),this.zpp_inner_zn.itype=t);var n=this.zpp_inner_zn.itype;return 1==n?(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION):2==n?(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR):4==n?(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID):7==n?(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),Uo.InteractionType_ANY):null},Object.defineProperty(v.prototype,"options1",{get:v.prototype.get_options1,set:v.prototype.set_options1}),Object.defineProperty(v.prototype,"options2",{get:v.prototype.get_options2,set:v.prototype.set_options2}),Object.defineProperty(v.prototype,"handler",{get:v.prototype.get_handler,set:v.prototype.set_handler}),Object.defineProperty(v.prototype,"pure",{get:v.prototype.get_pure,set:v.prototype.set_pure}),Object.defineProperty(v.prototype,"interactionType",{get:v.prototype.get_interactionType,set:v.prototype.set_interactionType}),v.prototype.__class__=v;var te=nape.constraint.Constraint=function(){this.debugDraw=!0,this.zpp_inner.insert_cbtype(Ie.ANY_CONSTRAINT.zpp_inner)};te.__name__=["nape","constraint","Constraint"],te.prototype.zpp_inner=null,te.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},te.prototype.debugDraw=null,te.prototype.get_compound=function(){return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},te.prototype.set_compound=function(e){if((null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)!=e&&(null!=(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)&&(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer).zpp_inner.wrap_constraints.remove(this),null!=e)){var t=e.zpp_inner.wrap_constraints;t.zpp_inner.reverse_flag?t.push(this):t.unshift(this)}return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},te.prototype.get_space=function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},te.prototype.set_space=function(e){if((null==this.zpp_inner.space?null:this.zpp_inner.space.outer)!=e)if(null!=this.zpp_inner.component&&(this.zpp_inner.component.woken=!1),this.zpp_inner.clearcache(),null!=this.zpp_inner.space&&this.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(this),null!=e){var t=e.zpp_inner.wrap_constraints;t.zpp_inner.reverse_flag?t.push(this):t.unshift(this)}else this.zpp_inner.space=null;return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},te.prototype.get_isSleeping=function(){return this.zpp_inner.component.sleeping},te.prototype.get_active=function(){return this.zpp_inner.active},te.prototype.set_active=function(e){return this.zpp_inner.active!=e&&(null!=this.zpp_inner.component&&(this.zpp_inner.component.woken=!1),this.zpp_inner.clearcache(),e?(this.zpp_inner.active=e,this.zpp_inner.activate(),null!=this.zpp_inner.space&&(null!=this.zpp_inner.component&&(this.zpp_inner.component.sleeping=!0),this.zpp_inner.space.wake_constraint(this.zpp_inner,!0))):(null!=this.zpp_inner.space&&(this.zpp_inner.wake(),this.zpp_inner.space.live_constraints.remove(this.zpp_inner)),this.zpp_inner.active=e,this.zpp_inner.deactivate())),this.zpp_inner.active},te.prototype.get_ignore=function(){return this.zpp_inner.ignore},te.prototype.set_ignore=function(e){return this.zpp_inner.ignore!=e&&(this.zpp_inner.ignore=e,this.zpp_inner.wake()),this.zpp_inner.ignore},te.prototype.get_stiff=function(){return this.zpp_inner.stiff},te.prototype.set_stiff=function(e){return this.zpp_inner.stiff!=e&&(this.zpp_inner.stiff=e,this.zpp_inner.wake()),this.zpp_inner.stiff},te.prototype.get_frequency=function(){return this.zpp_inner.frequency},te.prototype.set_frequency=function(e){return this.zpp_inner.frequency!=e&&(this.zpp_inner.frequency=e,this.zpp_inner.stiff||this.zpp_inner.wake()),this.zpp_inner.frequency},te.prototype.get_damping=function(){return this.zpp_inner.damping},te.prototype.set_damping=function(e){return this.zpp_inner.damping!=e&&(this.zpp_inner.damping=e,this.zpp_inner.stiff||this.zpp_inner.wake()),this.zpp_inner.damping},te.prototype.get_maxForce=function(){return this.zpp_inner.maxForce},te.prototype.set_maxForce=function(e){return this.zpp_inner.maxForce!=e&&(this.zpp_inner.maxForce=e,this.zpp_inner.wake()),this.zpp_inner.maxForce},te.prototype.get_maxError=function(){return this.zpp_inner.maxError},te.prototype.set_maxError=function(e){return this.zpp_inner.maxError!=e&&(this.zpp_inner.maxError=e,this.zpp_inner.wake()),this.zpp_inner.maxError},te.prototype.get_breakUnderForce=function(){return this.zpp_inner.breakUnderForce},te.prototype.set_breakUnderForce=function(e){return this.zpp_inner.breakUnderForce!=e&&(this.zpp_inner.breakUnderForce=e,this.zpp_inner.wake()),this.zpp_inner.breakUnderForce},te.prototype.get_breakUnderError=function(){return this.zpp_inner.breakUnderError},te.prototype.set_breakUnderError=function(e){return this.zpp_inner.breakUnderError!=e&&(this.zpp_inner.breakUnderError=e,this.zpp_inner.wake()),this.zpp_inner.breakUnderError},te.prototype.get_removeOnBreak=function(){return this.zpp_inner.removeOnBreak},te.prototype.set_removeOnBreak=function(e){return this.zpp_inner.removeOnBreak=e,this.zpp_inner.removeOnBreak},te.prototype.impulse=function(){return null},te.prototype.bodyImpulse=function(e){return null},te.prototype.visitBodies=function(e){},te.prototype.get_cbTypes=function(){return null==this.zpp_inner.wrap_cbTypes&&this.zpp_inner.setupcbTypes(),this.zpp_inner.wrap_cbTypes},te.prototype.toString=function(){return"{Constraint}"},te.prototype.copy=function(){return this.zpp_inner.copy()},Object.defineProperty(te.prototype,"userData",{get:te.prototype.get_userData}),Object.defineProperty(te.prototype,"compound",{get:te.prototype.get_compound,set:te.prototype.set_compound}),Object.defineProperty(te.prototype,"space",{get:te.prototype.get_space,set:te.prototype.set_space}),Object.defineProperty(te.prototype,"isSleeping",{get:te.prototype.get_isSleeping}),Object.defineProperty(te.prototype,"active",{get:te.prototype.get_active,set:te.prototype.set_active}),Object.defineProperty(te.prototype,"ignore",{get:te.prototype.get_ignore,set:te.prototype.set_ignore}),Object.defineProperty(te.prototype,"stiff",{get:te.prototype.get_stiff,set:te.prototype.set_stiff}),Object.defineProperty(te.prototype,"frequency",{get:te.prototype.get_frequency,set:te.prototype.set_frequency}),Object.defineProperty(te.prototype,"damping",{get:te.prototype.get_damping,set:te.prototype.set_damping}),Object.defineProperty(te.prototype,"maxForce",{get:te.prototype.get_maxForce,set:te.prototype.set_maxForce}),Object.defineProperty(te.prototype,"maxError",{get:te.prototype.get_maxError,set:te.prototype.set_maxError}),Object.defineProperty(te.prototype,"breakUnderForce",{get:te.prototype.get_breakUnderForce,set:te.prototype.set_breakUnderForce}),Object.defineProperty(te.prototype,"breakUnderError",{get:te.prototype.get_breakUnderError,set:te.prototype.set_breakUnderError}),Object.defineProperty(te.prototype,"removeOnBreak",{get:te.prototype.get_removeOnBreak,set:te.prototype.set_removeOnBreak}),Object.defineProperty(te.prototype,"cbTypes",{get:te.prototype.get_cbTypes}),te.prototype.__class__=te;var z=nape.constraint.AngleJoint=function(e,t,i,n,r){null==r&&(r=1),this.zpp_inner_zn=null,this.zpp_inner_zn=new Ue,this.zpp_inner=this.zpp_inner_zn,(this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this,te.call(this),this.zpp_inner.immutable_midstep("Constraint::body1");var o=null==e?null:e.zpp_inner;o!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=o,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=o&&this.zpp_inner_zn.b2!=o&&null!=o&&o.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=o&&o.wake())),this.zpp_inner.immutable_midstep("Constraint::body2");var a=null==t?null:t.zpp_inner;a!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=a,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=a&&this.zpp_inner_zn.b1!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=a&&a.wake())),this.zpp_inner.immutable_midstep("AngleJoint::jointMin"),this.zpp_inner_zn.jointMin!=i&&(this.zpp_inner_zn.jointMin=i,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("AngleJoint::jointMax"),this.zpp_inner_zn.jointMax!=n&&(this.zpp_inner_zn.jointMax=n,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("AngleJoint::ratio"),this.zpp_inner_zn.ratio!=r&&(this.zpp_inner_zn.ratio=r,this.zpp_inner.wake())};z.__name__=["nape","constraint","AngleJoint"],z.__super__=te,z.prototype=Object.create(te.prototype),z.prototype.zpp_inner_zn=null,z.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},z.prototype.set_body1=function(e){this.zpp_inner.immutable_midstep("Constraint::body1");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b2!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},z.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},z.prototype.set_body2=function(e){this.zpp_inner.immutable_midstep("Constraint::body2");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},z.prototype.get_jointMin=function(){return this.zpp_inner_zn.jointMin},z.prototype.set_jointMin=function(e){return this.zpp_inner.immutable_midstep("AngleJoint::jointMin"),this.zpp_inner_zn.jointMin!=e&&(this.zpp_inner_zn.jointMin=e,this.zpp_inner.wake()),this.zpp_inner_zn.jointMin},z.prototype.get_jointMax=function(){return this.zpp_inner_zn.jointMax},z.prototype.set_jointMax=function(e){return this.zpp_inner.immutable_midstep("AngleJoint::jointMax"),this.zpp_inner_zn.jointMax!=e&&(this.zpp_inner_zn.jointMax=e,this.zpp_inner.wake()),this.zpp_inner_zn.jointMax},z.prototype.get_ratio=function(){return this.zpp_inner_zn.ratio},z.prototype.set_ratio=function(e){return this.zpp_inner.immutable_midstep("AngleJoint::ratio"),this.zpp_inner_zn.ratio!=e&&(this.zpp_inner_zn.ratio=e,this.zpp_inner.wake()),this.zpp_inner_zn.ratio},z.prototype.isSlack=function(){var e,t=this.zpp_inner_zn,i=t.ratio*t.b2.rot-t.b1.rot;return t.equal?(e=!1,t.scale=1):e=i<t.jointMin?!(t.scale=-1):i>t.jointMax?(i-=t.jointMax,!(t.scale=1)):!(i=t.scale=0),e},z.prototype.impulse=function(){var e=new q(1,1);return e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAcc,e},z.prototype.bodyImpulse=function(e){return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(e.zpp_inner):Z.get(0,0,0)},z.prototype.visitBodies=function(e){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},Object.defineProperty(z.prototype,"body1",{get:z.prototype.get_body1,set:z.prototype.set_body1}),Object.defineProperty(z.prototype,"body2",{get:z.prototype.get_body2,set:z.prototype.set_body2}),Object.defineProperty(z.prototype,"jointMin",{get:z.prototype.get_jointMin,set:z.prototype.set_jointMin}),Object.defineProperty(z.prototype,"jointMax",{get:z.prototype.get_jointMax,set:z.prototype.set_jointMax}),Object.defineProperty(z.prototype,"ratio",{get:z.prototype.get_ratio,set:z.prototype.set_ratio}),z.prototype.__class__=z;var We=nape.constraint.ConstraintIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};We.__name__=["nape","constraint","ConstraintIterator"],We.get=function(e){var t;if(null==We.zpp_pool){mn.internal=!0;var i=new We;mn.internal=!1,t=i}else{var n=We.zpp_pool;We.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},We.prototype.zpp_inner=null,We.prototype.zpp_i=null,We.prototype.zpp_critical=null,We.prototype.zpp_next=null,We.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=We.zpp_pool,(We.zpp_pool=this).zpp_inner=null,!1)},We.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},We.prototype.__class__=We;var w=nape.constraint.ConstraintList=function(){this.zpp_inner=null,this.zpp_inner=new mn,this.zpp_inner.outer=this};w.__name__=["nape","constraint","ConstraintList"],w.fromArray=function(e){for(var t=new w,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},w.prototype.zpp_inner=null,w.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},w.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},w.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},w.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},w.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},w.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var n=(e=null==(i=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:i.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer},w.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var i=(e=null==(t=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer},w.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},w.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},w.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},w.prototype.empty=function(){return null==this.zpp_inner.inner.head},w.prototype.iterator=function(){return this.zpp_inner.valmod(),We.get(this)},w.prototype.copy=function(e){null==e&&(e=!1);var t=new w;this.zpp_inner.valmod();for(var i=We.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=We.zpp_pool,(We.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},w.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=We.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=We.zpp_pool,(We.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||(this.zpp_inner.reverse_flag?this.push(r):this.unshift(r))}},w.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=We.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=We.zpp_pool,(We.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},w.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=We.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=We.zpp_pool,(We.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=We.zpp_pool,(We.zpp_pool=t).zpp_inner=null;break}}return this},w.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(w.prototype,"length",{get:w.prototype.get_length}),w.prototype.__class__=w;var b=nape.constraint.DistanceJoint=function(e,t,i,n,r,o){this.zpp_inner_zn=null,this.zpp_inner_zn=new ot,this.zpp_inner=this.zpp_inner_zn,(this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this,te.call(this),this.zpp_inner.immutable_midstep("Constraint::body1");var a=null==e?null:e.zpp_inner;a!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=a,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=a&&this.zpp_inner_zn.b2!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=a&&a.wake())),this.zpp_inner.immutable_midstep("Constraint::body2");var s=null==t?null:t.zpp_inner;s!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=s,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=s&&this.zpp_inner_zn.b1!=s&&null!=s&&s.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=s&&s.wake())),null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var p=this.zpp_inner_zn.wrap_a1,l=i.zpp_inner;null!=l._validate&&l._validate();var h=i.zpp_inner.x,u=i.zpp_inner;null!=u._validate&&u._validate();var d,c=i.zpp_inner.y,_=p.zpp_inner;if(null!=_._validate&&_._validate(),p.zpp_inner.x==h){var y=p.zpp_inner;null!=y._validate&&y._validate(),d=p.zpp_inner.y==c}else d=!1;if(!d){p.zpp_inner.x=h,p.zpp_inner.y=c;var x=p.zpp_inner;null!=x._invalidate&&x._invalidate(x)}if(i.zpp_inner.weak){var m=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,i.zpp_pool=jn.poolVec2,jn.poolVec2=i,null!=m.outer&&(m.outer.zpp_inner=null,m.outer=null),m._isimmutable=null,m._validate=null,m._invalidate=null,m.next=ep.zpp_pool,ep.zpp_pool=m}null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var g=this.zpp_inner_zn.wrap_a2,f=n.zpp_inner;null!=f._validate&&f._validate();var v=n.zpp_inner.x,z=n.zpp_inner;null!=z._validate&&z._validate();var w,b=n.zpp_inner.y,S=g.zpp_inner;if(null!=S._validate&&S._validate(),g.zpp_inner.x==v){var C=g.zpp_inner;null!=C._validate&&C._validate(),w=g.zpp_inner.y==b}else w=!1;if(!w){g.zpp_inner.x=v,g.zpp_inner.y=b;var M=g.zpp_inner;null!=M._invalidate&&M._invalidate(M)}if(n.zpp_inner.weak){var P=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=P.outer&&(P.outer.zpp_inner=null,P.outer=null),P._isimmutable=null,P._validate=null,P._invalidate=null,P.next=ep.zpp_pool,ep.zpp_pool=P}null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner.immutable_midstep("DistanceJoint::jointMin"),this.zpp_inner_zn.jointMin!=r&&(this.zpp_inner_zn.jointMin=r,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("DistanceJoint::jointMax"),this.zpp_inner_zn.jointMax!=o&&(this.zpp_inner_zn.jointMax=o,this.zpp_inner.wake())};b.__name__=["nape","constraint","DistanceJoint"],b.__super__=te,b.prototype=Object.create(te.prototype),b.prototype.zpp_inner_zn=null,b.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},b.prototype.set_body1=function(e){this.zpp_inner.immutable_midstep("Constraint::body1");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b2!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},b.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},b.prototype.set_body2=function(e){this.zpp_inner.immutable_midstep("Constraint::body2");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},b.prototype.get_anchor1=function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},b.prototype.set_anchor1=function(e){null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var t=this.zpp_inner_zn.wrap_a1,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},b.prototype.get_anchor2=function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},b.prototype.set_anchor2=function(e){null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var t=this.zpp_inner_zn.wrap_a2,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},b.prototype.get_jointMin=function(){return this.zpp_inner_zn.jointMin},b.prototype.set_jointMin=function(e){return this.zpp_inner.immutable_midstep("DistanceJoint::jointMin"),this.zpp_inner_zn.jointMin!=e&&(this.zpp_inner_zn.jointMin=e,this.zpp_inner.wake()),this.zpp_inner_zn.jointMin},b.prototype.get_jointMax=function(){return this.zpp_inner_zn.jointMax},b.prototype.set_jointMax=function(e){return this.zpp_inner.immutable_midstep("DistanceJoint::jointMax"),this.zpp_inner_zn.jointMax!=e&&(this.zpp_inner_zn.jointMax=e,this.zpp_inner.wake()),this.zpp_inner_zn.jointMax},b.prototype.isSlack=function(){return this.zpp_inner_zn.slack},b.prototype.impulse=function(){var e=new q(1,1);return e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAcc,e},b.prototype.bodyImpulse=function(e){return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(e.zpp_inner):Z.get()},b.prototype.visitBodies=function(e){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},Object.defineProperty(b.prototype,"body1",{get:b.prototype.get_body1,set:b.prototype.set_body1}),Object.defineProperty(b.prototype,"body2",{get:b.prototype.get_body2,set:b.prototype.set_body2}),Object.defineProperty(b.prototype,"anchor1",{get:b.prototype.get_anchor1,set:b.prototype.set_anchor1}),Object.defineProperty(b.prototype,"anchor2",{get:b.prototype.get_anchor2,set:b.prototype.set_anchor2}),Object.defineProperty(b.prototype,"jointMin",{get:b.prototype.get_jointMin,set:b.prototype.set_jointMin}),Object.defineProperty(b.prototype,"jointMax",{get:b.prototype.get_jointMax,set:b.prototype.set_jointMax}),b.prototype.__class__=b;var S=nape.constraint.LineJoint=function(e,t,i,n,r,o,a){this.zpp_inner_zn=null,this.zpp_inner_zn=new at,this.zpp_inner=this.zpp_inner_zn,(this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this,te.call(this),this.zpp_inner.immutable_midstep("Constraint::body1");var s=null==e?null:e.zpp_inner;s!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=s,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=s&&this.zpp_inner_zn.b2!=s&&null!=s&&s.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=s&&s.wake())),this.zpp_inner.immutable_midstep("Constraint::body2");var p=null==t?null:t.zpp_inner;p!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=p,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=p&&this.zpp_inner_zn.b1!=p&&null!=p&&p.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=p&&p.wake())),null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var l=this.zpp_inner_zn.wrap_a1,h=i.zpp_inner;null!=h._validate&&h._validate();var u=i.zpp_inner.x,d=i.zpp_inner;null!=d._validate&&d._validate();var c,_=i.zpp_inner.y,y=l.zpp_inner;if(null!=y._validate&&y._validate(),l.zpp_inner.x==u){var x=l.zpp_inner;null!=x._validate&&x._validate(),c=l.zpp_inner.y==_}else c=!1;if(!c){l.zpp_inner.x=u,l.zpp_inner.y=_;var m=l.zpp_inner;null!=m._invalidate&&m._invalidate(m)}if(i.zpp_inner.weak){var g=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,i.zpp_pool=jn.poolVec2,jn.poolVec2=i,null!=g.outer&&(g.outer.zpp_inner=null,g.outer=null),g._isimmutable=null,g._validate=null,g._invalidate=null,g.next=ep.zpp_pool,ep.zpp_pool=g}null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var f=this.zpp_inner_zn.wrap_a2,v=n.zpp_inner;null!=v._validate&&v._validate();var z=n.zpp_inner.x,w=n.zpp_inner;null!=w._validate&&w._validate();var b,S=n.zpp_inner.y,C=f.zpp_inner;if(null!=C._validate&&C._validate(),f.zpp_inner.x==z){var M=f.zpp_inner;null!=M._validate&&M._validate(),b=f.zpp_inner.y==S}else b=!1;if(!b){f.zpp_inner.x=z,f.zpp_inner.y=S;var P=f.zpp_inner;null!=P._invalidate&&P._invalidate(P)}if(n.zpp_inner.weak){var k=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=k.outer&&(k.outer.zpp_inner=null,k.outer=null),k._isimmutable=null,k._validate=null,k._invalidate=null,k.next=ep.zpp_pool,ep.zpp_pool=k}null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n();var T=this.zpp_inner_zn.wrap_n,A=r.zpp_inner;null!=A._validate&&A._validate();var O=r.zpp_inner.x,E=r.zpp_inner;null!=E._validate&&E._validate();var G,D=r.zpp_inner.y,I=T.zpp_inner;if(null!=I._validate&&I._validate(),T.zpp_inner.x==O){var L=T.zpp_inner;null!=L._validate&&L._validate(),G=T.zpp_inner.y==D}else G=!1;if(!G){T.zpp_inner.x=O,T.zpp_inner.y=D;var B=T.zpp_inner;null!=B._invalidate&&B._invalidate(B)}if(r.zpp_inner.weak){var R=r.zpp_inner;r.zpp_inner.outer=null,r.zpp_inner=null,r.zpp_pool=jn.poolVec2,jn.poolVec2=r,null!=R.outer&&(R.outer.zpp_inner=null,R.outer=null),R._isimmutable=null,R._validate=null,R._invalidate=null,R.next=ep.zpp_pool,ep.zpp_pool=R}null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n(),this.zpp_inner.immutable_midstep("LineJoint::jointMin"),this.zpp_inner_zn.jointMin!=o&&(this.zpp_inner_zn.jointMin=o,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("LineJoint::jointMax"),this.zpp_inner_zn.jointMax!=a&&(this.zpp_inner_zn.jointMax=a,this.zpp_inner.wake())};S.__name__=["nape","constraint","LineJoint"],S.__super__=te,S.prototype=Object.create(te.prototype),S.prototype.zpp_inner_zn=null,S.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},S.prototype.set_body1=function(e){this.zpp_inner.immutable_midstep("Constraint::body1");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b2!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},S.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},S.prototype.set_body2=function(e){this.zpp_inner.immutable_midstep("Constraint::body2");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},S.prototype.get_anchor1=function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},S.prototype.set_anchor1=function(e){null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var t=this.zpp_inner_zn.wrap_a1,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},S.prototype.get_anchor2=function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},S.prototype.set_anchor2=function(e){null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var t=this.zpp_inner_zn.wrap_a2,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},S.prototype.get_direction=function(){return null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n(),this.zpp_inner_zn.wrap_n},S.prototype.set_direction=function(e){null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n();var t=this.zpp_inner_zn.wrap_n,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n(),this.zpp_inner_zn.wrap_n},S.prototype.get_jointMin=function(){return this.zpp_inner_zn.jointMin},S.prototype.set_jointMin=function(e){return this.zpp_inner.immutable_midstep("LineJoint::jointMin"),this.zpp_inner_zn.jointMin!=e&&(this.zpp_inner_zn.jointMin=e,this.zpp_inner.wake()),this.zpp_inner_zn.jointMin},S.prototype.get_jointMax=function(){return this.zpp_inner_zn.jointMax},S.prototype.set_jointMax=function(e){return this.zpp_inner.immutable_midstep("LineJoint::jointMax"),this.zpp_inner_zn.jointMax!=e&&(this.zpp_inner_zn.jointMax=e,this.zpp_inner.wake()),this.zpp_inner_zn.jointMax},S.prototype.impulse=function(){var e=new q(2,1);return e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAccx,e.zpp_inner.x[e.zpp_inner.n]=this.zpp_inner_zn.jAccy,e},S.prototype.bodyImpulse=function(e){return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(e.zpp_inner):Z.get()},S.prototype.visitBodies=function(e){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},Object.defineProperty(S.prototype,"body1",{get:S.prototype.get_body1,set:S.prototype.set_body1}),Object.defineProperty(S.prototype,"body2",{get:S.prototype.get_body2,set:S.prototype.set_body2}),Object.defineProperty(S.prototype,"anchor1",{get:S.prototype.get_anchor1,set:S.prototype.set_anchor1}),Object.defineProperty(S.prototype,"anchor2",{get:S.prototype.get_anchor2,set:S.prototype.set_anchor2}),Object.defineProperty(S.prototype,"direction",{get:S.prototype.get_direction,set:S.prototype.set_direction}),Object.defineProperty(S.prototype,"jointMin",{get:S.prototype.get_jointMin,set:S.prototype.set_jointMin}),Object.defineProperty(S.prototype,"jointMax",{get:S.prototype.get_jointMax,set:S.prototype.set_jointMax}),S.prototype.__class__=S;var M=nape.constraint.MotorJoint=function(e,t,i,n){null==n&&(n=1),null==i&&(i=0),this.zpp_inner_zn=null,this.zpp_inner_zn=new st,this.zpp_inner=this.zpp_inner_zn,(this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this,te.call(this),this.zpp_inner.immutable_midstep("Constraint::body1");var r=null==e?null:e.zpp_inner;r!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=r,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=r&&this.zpp_inner_zn.b2!=r&&null!=r&&r.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=r&&r.wake())),this.zpp_inner.immutable_midstep("Constraint::body2");var o=null==t?null:t.zpp_inner;o!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=o,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=o&&this.zpp_inner_zn.b1!=o&&null!=o&&o.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=o&&o.wake())),this.zpp_inner.immutable_midstep("MotorJoint::rate"),this.zpp_inner_zn.rate!=i&&(this.zpp_inner_zn.rate=i,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("MotorJoint::ratio"),this.zpp_inner_zn.ratio!=n&&(this.zpp_inner_zn.ratio=n,this.zpp_inner.wake())};M.__name__=["nape","constraint","MotorJoint"],M.__super__=te,M.prototype=Object.create(te.prototype),M.prototype.zpp_inner_zn=null,M.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},M.prototype.set_body1=function(e){this.zpp_inner.immutable_midstep("Constraint::body1");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b2!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},M.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},M.prototype.set_body2=function(e){this.zpp_inner.immutable_midstep("Constraint::body2");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},M.prototype.get_ratio=function(){return this.zpp_inner_zn.ratio},M.prototype.set_ratio=function(e){return this.zpp_inner.immutable_midstep("MotorJoint::ratio"),this.zpp_inner_zn.ratio!=e&&(this.zpp_inner_zn.ratio=e,this.zpp_inner.wake()),this.zpp_inner_zn.ratio},M.prototype.get_rate=function(){return this.zpp_inner_zn.rate},M.prototype.set_rate=function(e){return this.zpp_inner.immutable_midstep("MotorJoint::rate"),this.zpp_inner_zn.rate!=e&&(this.zpp_inner_zn.rate=e,this.zpp_inner.wake()),this.zpp_inner_zn.rate},M.prototype.impulse=function(){var e=new q(1,1);return e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAcc,e},M.prototype.bodyImpulse=function(e){return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(e.zpp_inner):Z.get()},M.prototype.visitBodies=function(e){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},Object.defineProperty(M.prototype,"body1",{get:M.prototype.get_body1,set:M.prototype.set_body1}),Object.defineProperty(M.prototype,"body2",{get:M.prototype.get_body2,set:M.prototype.set_body2}),Object.defineProperty(M.prototype,"ratio",{get:M.prototype.get_ratio,set:M.prototype.set_ratio}),Object.defineProperty(M.prototype,"rate",{get:M.prototype.get_rate,set:M.prototype.set_rate}),M.prototype.__class__=M;var P=nape.constraint.PivotJoint=function(e,t,i,n){this.zpp_inner_zn=null,this.zpp_inner_zn=new ut,this.zpp_inner=this.zpp_inner_zn,(this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this,te.call(this),this.zpp_inner.immutable_midstep("Constraint::body1");var r=null==e?null:e.zpp_inner;r!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=r,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=r&&this.zpp_inner_zn.b2!=r&&null!=r&&r.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=r&&r.wake())),this.zpp_inner.immutable_midstep("Constraint::body2");var o=null==t?null:t.zpp_inner;o!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=o,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=o&&this.zpp_inner_zn.b1!=o&&null!=o&&o.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=o&&o.wake())),null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var a=this.zpp_inner_zn.wrap_a1,s=i.zpp_inner;null!=s._validate&&s._validate();var p=i.zpp_inner.x,l=i.zpp_inner;null!=l._validate&&l._validate();var h,u=i.zpp_inner.y,d=a.zpp_inner;if(null!=d._validate&&d._validate(),a.zpp_inner.x==p){var c=a.zpp_inner;null!=c._validate&&c._validate(),h=a.zpp_inner.y==u}else h=!1;if(!h){a.zpp_inner.x=p,a.zpp_inner.y=u;var _=a.zpp_inner;null!=_._invalidate&&_._invalidate(_)}if(i.zpp_inner.weak){var y=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,i.zpp_pool=jn.poolVec2,jn.poolVec2=i,null!=y.outer&&(y.outer.zpp_inner=null,y.outer=null),y._isimmutable=null,y._validate=null,y._invalidate=null,y.next=ep.zpp_pool,ep.zpp_pool=y}null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var x=this.zpp_inner_zn.wrap_a2,m=n.zpp_inner;null!=m._validate&&m._validate();var g=n.zpp_inner.x,f=n.zpp_inner;null!=f._validate&&f._validate();var v,z=n.zpp_inner.y,w=x.zpp_inner;if(null!=w._validate&&w._validate(),x.zpp_inner.x==g){var b=x.zpp_inner;null!=b._validate&&b._validate(),v=x.zpp_inner.y==z}else v=!1;if(!v){x.zpp_inner.x=g,x.zpp_inner.y=z;var S=x.zpp_inner;null!=S._invalidate&&S._invalidate(S)}if(n.zpp_inner.weak){var C=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=C.outer&&(C.outer.zpp_inner=null,C.outer=null),C._isimmutable=null,C._validate=null,C._invalidate=null,C.next=ep.zpp_pool,ep.zpp_pool=C}null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2()};P.__name__=["nape","constraint","PivotJoint"],P.__super__=te,P.prototype=Object.create(te.prototype),P.prototype.zpp_inner_zn=null,P.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},P.prototype.set_body1=function(e){this.zpp_inner.immutable_midstep("Constraint::body1");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b2!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},P.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},P.prototype.set_body2=function(e){this.zpp_inner.immutable_midstep("Constraint::body2");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},P.prototype.get_anchor1=function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},P.prototype.set_anchor1=function(e){null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var t=this.zpp_inner_zn.wrap_a1,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},P.prototype.get_anchor2=function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},P.prototype.set_anchor2=function(e){null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var t=this.zpp_inner_zn.wrap_a2,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},P.prototype.impulse=function(){var e=new q(2,1);return e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAccx,e.zpp_inner.x[e.zpp_inner.n]=this.zpp_inner_zn.jAccy,e},P.prototype.bodyImpulse=function(e){return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(e.zpp_inner):Z.get()},P.prototype.visitBodies=function(e){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},Object.defineProperty(P.prototype,"body1",{get:P.prototype.get_body1,set:P.prototype.set_body1}),Object.defineProperty(P.prototype,"body2",{get:P.prototype.get_body2,set:P.prototype.set_body2}),Object.defineProperty(P.prototype,"anchor1",{get:P.prototype.get_anchor1,set:P.prototype.set_anchor1}),Object.defineProperty(P.prototype,"anchor2",{get:P.prototype.get_anchor2,set:P.prototype.set_anchor2}),P.prototype.__class__=P;var k=nape.constraint.PulleyJoint=function(e,t,i,n,r,o,a,s,p,l,h){null==h&&(h=1),this.zpp_inner_zn=null,this.zpp_inner_zn=new dt,this.zpp_inner=this.zpp_inner_zn,(this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this,te.call(this),this.zpp_inner.immutable_midstep("Constraint::body1");var u=null==e?null:e.zpp_inner;u!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=u,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=u&&this.zpp_inner_zn.b2!=u&&this.zpp_inner_zn.b3!=u&&this.zpp_inner_zn.b4!=u&&null!=u&&u.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=u&&u.wake())),this.zpp_inner.immutable_midstep("Constraint::body2");var d=null==t?null:t.zpp_inner;d!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=d,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=d&&this.zpp_inner_zn.b1!=d&&this.zpp_inner_zn.b3!=d&&this.zpp_inner_zn.b4!=d&&null!=d&&d.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=d&&d.wake())),this.zpp_inner.immutable_midstep("Constraint::body3");var c=null==i?null:i.zpp_inner;c!=this.zpp_inner_zn.b3&&(null!=this.zpp_inner_zn.b3&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b3&&null!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b3.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b3.wake()),this.zpp_inner_zn.b3=c,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=c&&this.zpp_inner_zn.b1!=c&&this.zpp_inner_zn.b2!=c&&this.zpp_inner_zn.b4!=c&&null!=c&&c.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=c&&c.wake())),this.zpp_inner.immutable_midstep("Constraint::body4");var _=null==n?null:n.zpp_inner;_!=this.zpp_inner_zn.b4&&(null!=this.zpp_inner_zn.b4&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b4&&null!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b4.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b4.wake()),this.zpp_inner_zn.b4=_,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=_&&this.zpp_inner_zn.b1!=_&&this.zpp_inner_zn.b2!=_&&this.zpp_inner_zn.b3!=_&&null!=_&&_.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=_&&_.wake())),null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var y=this.zpp_inner_zn.wrap_a1,x=r.zpp_inner;null!=x._validate&&x._validate();var m=r.zpp_inner.x,g=r.zpp_inner;null!=g._validate&&g._validate();var f,v=r.zpp_inner.y,z=y.zpp_inner;if(null!=z._validate&&z._validate(),y.zpp_inner.x==m){var w=y.zpp_inner;null!=w._validate&&w._validate(),f=y.zpp_inner.y==v}else f=!1;if(!f){y.zpp_inner.x=m,y.zpp_inner.y=v;var b=y.zpp_inner;null!=b._invalidate&&b._invalidate(b)}if(r.zpp_inner.weak){var S=r.zpp_inner;r.zpp_inner.outer=null,r.zpp_inner=null,r.zpp_pool=jn.poolVec2,jn.poolVec2=r,null!=S.outer&&(S.outer.zpp_inner=null,S.outer=null),S._isimmutable=null,S._validate=null,S._invalidate=null,S.next=ep.zpp_pool,ep.zpp_pool=S}null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var C=this.zpp_inner_zn.wrap_a2,M=o.zpp_inner;null!=M._validate&&M._validate();var P=o.zpp_inner.x,k=o.zpp_inner;null!=k._validate&&k._validate();var T,A=o.zpp_inner.y,O=C.zpp_inner;if(null!=O._validate&&O._validate(),C.zpp_inner.x==P){var E=C.zpp_inner;null!=E._validate&&E._validate(),T=C.zpp_inner.y==A}else T=!1;if(!T){C.zpp_inner.x=P,C.zpp_inner.y=A;var G=C.zpp_inner;null!=G._invalidate&&G._invalidate(G)}if(o.zpp_inner.weak){var D=o.zpp_inner;o.zpp_inner.outer=null,o.zpp_inner=null,o.zpp_pool=jn.poolVec2,jn.poolVec2=o,null!=D.outer&&(D.outer.zpp_inner=null,D.outer=null),D._isimmutable=null,D._validate=null,D._invalidate=null,D.next=ep.zpp_pool,ep.zpp_pool=D}null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3();var I=this.zpp_inner_zn.wrap_a3,L=a.zpp_inner;null!=L._validate&&L._validate();var B=a.zpp_inner.x,R=a.zpp_inner;null!=R._validate&&R._validate();var F,j=a.zpp_inner.y,N=I.zpp_inner;if(null!=N._validate&&N._validate(),I.zpp_inner.x==B){var U=I.zpp_inner;null!=U._validate&&U._validate(),F=I.zpp_inner.y==j}else F=!1;if(!F){I.zpp_inner.x=B,I.zpp_inner.y=j;var V=I.zpp_inner;null!=V._invalidate&&V._invalidate(V)}if(a.zpp_inner.weak){var H=a.zpp_inner;a.zpp_inner.outer=null,a.zpp_inner=null,a.zpp_pool=jn.poolVec2,jn.poolVec2=a,null!=H.outer&&(H.outer.zpp_inner=null,H.outer=null),H._isimmutable=null,H._validate=null,H._invalidate=null,H.next=ep.zpp_pool,ep.zpp_pool=H}null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3(),null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4();var W=this.zpp_inner_zn.wrap_a4,q=s.zpp_inner;null!=q._validate&&q._validate();var X=s.zpp_inner.x,Y=s.zpp_inner;null!=Y._validate&&Y._validate();var K,Z=s.zpp_inner.y,J=W.zpp_inner;if(null!=J._validate&&J._validate(),W.zpp_inner.x==X){var Q=W.zpp_inner;null!=Q._validate&&Q._validate(),K=W.zpp_inner.y==Z}else K=!1;if(!K){W.zpp_inner.x=X,W.zpp_inner.y=Z;var $=W.zpp_inner;null!=$._invalidate&&$._invalidate($)}if(s.zpp_inner.weak){var ee=s.zpp_inner;s.zpp_inner.outer=null,s.zpp_inner=null,s.zpp_pool=jn.poolVec2,jn.poolVec2=s,null!=ee.outer&&(ee.outer.zpp_inner=null,ee.outer=null),ee._isimmutable=null,ee._validate=null,ee._invalidate=null,ee.next=ep.zpp_pool,ep.zpp_pool=ee}null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4(),this.zpp_inner.immutable_midstep("PulleyJoint::ratio"),this.zpp_inner_zn.ratio!=h&&(this.zpp_inner_zn.ratio=h,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("PulleyJoint::jointMin"),this.zpp_inner_zn.jointMin!=p&&(this.zpp_inner_zn.jointMin=p,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("PulleyJoint::jointMax"),this.zpp_inner_zn.jointMax!=l&&(this.zpp_inner_zn.jointMax=l,this.zpp_inner.wake())};k.__name__=["nape","constraint","PulleyJoint"],k.__super__=te,k.prototype=Object.create(te.prototype),k.prototype.zpp_inner_zn=null,k.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},k.prototype.set_body1=function(e){this.zpp_inner.immutable_midstep("Constraint::body1");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b2!=t&&this.zpp_inner_zn.b3!=t&&this.zpp_inner_zn.b4!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},k.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},k.prototype.set_body2=function(e){this.zpp_inner.immutable_midstep("Constraint::body2");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&this.zpp_inner_zn.b3!=t&&this.zpp_inner_zn.b4!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},k.prototype.get_body3=function(){return null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer},k.prototype.set_body3=function(e){this.zpp_inner.immutable_midstep("Constraint::body3");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b3&&(null!=this.zpp_inner_zn.b3&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b3&&null!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b3.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b3.wake()),this.zpp_inner_zn.b3=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&this.zpp_inner_zn.b2!=t&&this.zpp_inner_zn.b4!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer},k.prototype.get_body4=function(){return null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer},k.prototype.set_body4=function(e){this.zpp_inner.immutable_midstep("Constraint::body4");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b4&&(null!=this.zpp_inner_zn.b4&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b4&&null!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b4.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b4.wake()),this.zpp_inner_zn.b4=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&this.zpp_inner_zn.b2!=t&&this.zpp_inner_zn.b3!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer},k.prototype.get_anchor1=function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},k.prototype.set_anchor1=function(e){null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var t=this.zpp_inner_zn.wrap_a1,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},k.prototype.get_anchor2=function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},k.prototype.set_anchor2=function(e){null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var t=this.zpp_inner_zn.wrap_a2,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},k.prototype.get_anchor3=function(){return null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3(),this.zpp_inner_zn.wrap_a3},k.prototype.set_anchor3=function(e){null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3();var t=this.zpp_inner_zn.wrap_a3,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3(),this.zpp_inner_zn.wrap_a3},k.prototype.get_anchor4=function(){return null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4(),this.zpp_inner_zn.wrap_a4},k.prototype.set_anchor4=function(e){null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4();var t=this.zpp_inner_zn.wrap_a4,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4(),this.zpp_inner_zn.wrap_a4},k.prototype.get_jointMin=function(){return this.zpp_inner_zn.jointMin},k.prototype.set_jointMin=function(e){return this.zpp_inner.immutable_midstep("PulleyJoint::jointMin"),this.zpp_inner_zn.jointMin!=e&&(this.zpp_inner_zn.jointMin=e,this.zpp_inner.wake()),this.zpp_inner_zn.jointMin},k.prototype.get_jointMax=function(){return this.zpp_inner_zn.jointMax},k.prototype.set_jointMax=function(e){return this.zpp_inner.immutable_midstep("PulleyJoint::jointMax"),this.zpp_inner_zn.jointMax!=e&&(this.zpp_inner_zn.jointMax=e,this.zpp_inner.wake()),this.zpp_inner_zn.jointMax},k.prototype.get_ratio=function(){return this.zpp_inner_zn.ratio},k.prototype.set_ratio=function(e){return this.zpp_inner.immutable_midstep("PulleyJoint::ratio"),this.zpp_inner_zn.ratio!=e&&(this.zpp_inner_zn.ratio=e,this.zpp_inner.wake()),this.zpp_inner_zn.ratio},k.prototype.isSlack=function(){return this.zpp_inner_zn.slack},k.prototype.impulse=function(){var e=new q(1,1);return e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAcc,e},k.prototype.bodyImpulse=function(e){return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(e.zpp_inner):Z.get()},k.prototype.visitBodies=function(e){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer),null!=(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer)&&(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer)!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&e(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer),null!=(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)&&(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)!=(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer)&&e(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)},Object.defineProperty(k.prototype,"body1",{get:k.prototype.get_body1,set:k.prototype.set_body1}),Object.defineProperty(k.prototype,"body2",{get:k.prototype.get_body2,set:k.prototype.set_body2}),Object.defineProperty(k.prototype,"body3",{get:k.prototype.get_body3,set:k.prototype.set_body3}),Object.defineProperty(k.prototype,"body4",{get:k.prototype.get_body4,set:k.prototype.set_body4}),Object.defineProperty(k.prototype,"anchor1",{get:k.prototype.get_anchor1,set:k.prototype.set_anchor1}),Object.defineProperty(k.prototype,"anchor2",{get:k.prototype.get_anchor2,set:k.prototype.set_anchor2}),Object.defineProperty(k.prototype,"anchor3",{get:k.prototype.get_anchor3,set:k.prototype.set_anchor3}),Object.defineProperty(k.prototype,"anchor4",{get:k.prototype.get_anchor4,set:k.prototype.set_anchor4}),Object.defineProperty(k.prototype,"jointMin",{get:k.prototype.get_jointMin,set:k.prototype.set_jointMin}),Object.defineProperty(k.prototype,"jointMax",{get:k.prototype.get_jointMax,set:k.prototype.set_jointMax}),Object.defineProperty(k.prototype,"ratio",{get:k.prototype.get_ratio,set:k.prototype.set_ratio}),k.prototype.__class__=k;var T=nape.constraint.UserConstraint=function(e,t){null==t&&(t=!1),this.zpp_inner_zn=null,this.zpp_inner_zn=new ct(e,t),this.zpp_inner=this.zpp_inner_zn,(this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this,te.call(this)};T.__name__=["nape","constraint","UserConstraint"],T.__super__=te,T.prototype=Object.create(te.prototype),T.prototype.zpp_inner_zn=null,T.prototype.__bindVec2=function(){var e=new lt;return e.zpp_inner._inuse=!0,e.zpp_inner._invalidate=$(d=this.zpp_inner_zn,d.bindVec2_invalidate),e},T.prototype.__copy=function(){return null},T.prototype.__broken=function(){},T.prototype.__validate=function(){},T.prototype.__draw=function(e){},T.prototype.__prepare=function(){},T.prototype.__position=function(e){},T.prototype.__velocity=function(e){},T.prototype.__eff_mass=function(e){},T.prototype.__clamp=function(e){},T.prototype.__impulse=function(e,t,i){},T.prototype.impulse=function(){for(var e=new q(this.zpp_inner_zn.dim,1),t=0,i=this.zpp_inner_zn.dim;t<i;){var n=t++;e.zpp_inner.x[n*e.zpp_inner.n]=this.zpp_inner_zn.jAcc[n]}return e},T.prototype.bodyImpulse=function(e){return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(e.zpp_inner):Z.get()},T.prototype.visitBodies=function(e){for(var t=0,i=this.zpp_inner_zn.bodies.length;t<i;){var n=this.zpp_inner_zn.bodies[t];if(null!=n.body){for(var r=!1,o=t+1;o<i;)if(this.zpp_inner_zn.bodies[o++].body==n.body){r=!0;break}r||e(n.body.outer)}++t}},T.prototype.__invalidate=function(){this.zpp_inner.immutable_midstep("UserConstraint::invalidate()"),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner.wake()},T.prototype.__registerBody=function(e,t){return this.zpp_inner.immutable_midstep("UserConstraint::registerBody(..)"),e!=t&&(null!=e&&(this.zpp_inner_zn.remBody(e.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&e.zpp_inner.wake()),null!=t&&this.zpp_inner_zn.addBody(t.zpp_inner),this.zpp_inner.wake(),null!=t&&t.zpp_inner.wake()),t},T.prototype.__class__=T;var A=nape.constraint.WeldJoint=function(e,t,i,n,r){null==r&&(r=0),this.zpp_inner_zn=null,this.zpp_inner_zn=new yt,this.zpp_inner=this.zpp_inner_zn,(this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this,te.call(this),this.zpp_inner.immutable_midstep("Constraint::body1");var o=null==e?null:e.zpp_inner;o!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=o,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=o&&this.zpp_inner_zn.b2!=o&&null!=o&&o.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=o&&o.wake())),this.zpp_inner.immutable_midstep("Constraint::body2");var a=null==t?null:t.zpp_inner;a!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=a,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=a&&this.zpp_inner_zn.b1!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=a&&a.wake())),null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var s=this.zpp_inner_zn.wrap_a1,p=i.zpp_inner;null!=p._validate&&p._validate();var l=i.zpp_inner.x,h=i.zpp_inner;null!=h._validate&&h._validate();var u,d=i.zpp_inner.y,c=s.zpp_inner;if(null!=c._validate&&c._validate(),s.zpp_inner.x==l){var _=s.zpp_inner;null!=_._validate&&_._validate(),u=s.zpp_inner.y==d}else u=!1;if(!u){s.zpp_inner.x=l,s.zpp_inner.y=d;var y=s.zpp_inner;null!=y._invalidate&&y._invalidate(y)}if(i.zpp_inner.weak){var x=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,i.zpp_pool=jn.poolVec2,jn.poolVec2=i,null!=x.outer&&(x.outer.zpp_inner=null,x.outer=null),x._isimmutable=null,x._validate=null,x._invalidate=null,x.next=ep.zpp_pool,ep.zpp_pool=x}null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var m=this.zpp_inner_zn.wrap_a2,g=n.zpp_inner;null!=g._validate&&g._validate();var f=n.zpp_inner.x,v=n.zpp_inner;null!=v._validate&&v._validate();var z,w=n.zpp_inner.y,b=m.zpp_inner;if(null!=b._validate&&b._validate(),m.zpp_inner.x==f){var S=m.zpp_inner;null!=S._validate&&S._validate(),z=m.zpp_inner.y==w}else z=!1;if(!z){m.zpp_inner.x=f,m.zpp_inner.y=w;var C=m.zpp_inner;null!=C._invalidate&&C._invalidate(C)}if(n.zpp_inner.weak){var M=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=M.outer&&(M.outer.zpp_inner=null,M.outer=null),M._isimmutable=null,M._validate=null,M._invalidate=null,M.next=ep.zpp_pool,ep.zpp_pool=M}null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner.immutable_midstep("WeldJoint::phase"),this.zpp_inner_zn.phase!=r&&(this.zpp_inner_zn.phase=r,this.zpp_inner.wake())};A.__name__=["nape","constraint","WeldJoint"],A.__super__=te,A.prototype=Object.create(te.prototype),A.prototype.zpp_inner_zn=null,A.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},A.prototype.set_body1=function(e){this.zpp_inner.immutable_midstep("Constraint::body1");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b2!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},A.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},A.prototype.set_body2=function(e){this.zpp_inner.immutable_midstep("Constraint::body2");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},A.prototype.get_anchor1=function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},A.prototype.set_anchor1=function(e){null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var t=this.zpp_inner_zn.wrap_a1,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},A.prototype.get_anchor2=function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},A.prototype.set_anchor2=function(e){null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var t=this.zpp_inner_zn.wrap_a2,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},A.prototype.get_phase=function(){return this.zpp_inner_zn.phase},A.prototype.set_phase=function(e){return this.zpp_inner.immutable_midstep("WeldJoint::phase"),this.zpp_inner_zn.phase!=e&&(this.zpp_inner_zn.phase=e,this.zpp_inner.wake()),this.zpp_inner_zn.phase},A.prototype.impulse=function(){var e=new q(3,1);return e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAccx,e.zpp_inner.x[e.zpp_inner.n]=this.zpp_inner_zn.jAccy,e.zpp_inner.x[e.zpp_inner.n]=this.zpp_inner_zn.jAccz,e},A.prototype.bodyImpulse=function(e){return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(e.zpp_inner):Z.get()},A.prototype.visitBodies=function(e){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},Object.defineProperty(A.prototype,"body1",{get:A.prototype.get_body1,set:A.prototype.set_body1}),Object.defineProperty(A.prototype,"body2",{get:A.prototype.get_body2,set:A.prototype.set_body2}),Object.defineProperty(A.prototype,"anchor1",{get:A.prototype.get_anchor1,set:A.prototype.set_anchor1}),Object.defineProperty(A.prototype,"anchor2",{get:A.prototype.get_anchor2,set:A.prototype.set_anchor2}),Object.defineProperty(A.prototype,"phase",{get:A.prototype.get_phase,set:A.prototype.set_phase}),A.prototype.__class__=A;var O=nape.dynamics.Arbiter=function(){this.zpp_inner=null};O.__name__=["nape","dynamics","Arbiter"],O.prototype.zpp_inner=null,O.prototype.get_isSleeping=function(){return this.zpp_inner.sleeping},O.prototype.get_type=function(){return ln.types[this.zpp_inner.type]},O.prototype.isCollisionArbiter=function(){return this.zpp_inner.type==ln.COL},O.prototype.isFluidArbiter=function(){return this.zpp_inner.type==ln.FLUID},O.prototype.isSensorArbiter=function(){return this.zpp_inner.type==ln.SENSOR},O.prototype.get_collisionArbiter=function(){return this.zpp_inner.type==ln.COL?this.zpp_inner.colarb.outer_zn:null},O.prototype.get_fluidArbiter=function(){return this.zpp_inner.type==ln.FLUID?this.zpp_inner.fluidarb.outer_zn:null},O.prototype.get_shape1=function(){return this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer},O.prototype.get_shape2=function(){return this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer},O.prototype.get_body1=function(){return this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b2.outer:this.zpp_inner.b1.outer},O.prototype.get_body2=function(){return this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b1.outer:this.zpp_inner.b2.outer},O.prototype.get_state=function(){var e=this.zpp_inner.immState;return 5==e?(null==Uo.PreFlag_ACCEPT&&(Uo.internal=!0,Uo.PreFlag_ACCEPT=new Fo,Uo.internal=!1),Uo.PreFlag_ACCEPT):1==e?(null==Uo.PreFlag_ACCEPT_ONCE&&(Uo.internal=!0,Uo.PreFlag_ACCEPT_ONCE=new Fo,Uo.internal=!1),Uo.PreFlag_ACCEPT_ONCE):6==e?(null==Uo.PreFlag_IGNORE&&(Uo.internal=!0,Uo.PreFlag_IGNORE=new Fo,Uo.internal=!1),Uo.PreFlag_IGNORE):(null==Uo.PreFlag_IGNORE_ONCE&&(Uo.internal=!0,Uo.PreFlag_IGNORE_ONCE=new Fo,Uo.internal=!1),Uo.PreFlag_IGNORE_ONCE)},O.prototype.totalImpulse=function(e,t){return null==t&&(t=!1),Z.get(0,0,0)},O.prototype.toString=function(){var e=this.zpp_inner.type==ln.COL?"CollisionArbiter":this.zpp_inner.type==ln.FLUID?"FluidArbiter":"SensorArbiter";if(this.zpp_inner.cleared)return e+"(object-pooled)";var t=e+"("+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer).toString()+"|"+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer).toString()+")"+(this.zpp_inner.type==ln.COL?"["+["SD","DD"][this.zpp_inner.colarb.stat?0:1]+"]":"")+"<-",i=this.zpp_inner.immState;return t+(5==i?(null==Uo.PreFlag_ACCEPT&&(Uo.internal=!0,Uo.PreFlag_ACCEPT=new Fo,Uo.internal=!1),Uo.PreFlag_ACCEPT):1==i?(null==Uo.PreFlag_ACCEPT_ONCE&&(Uo.internal=!0,Uo.PreFlag_ACCEPT_ONCE=new Fo,Uo.internal=!1),Uo.PreFlag_ACCEPT_ONCE):6==i?(null==Uo.PreFlag_IGNORE&&(Uo.internal=!0,Uo.PreFlag_IGNORE=new Fo,Uo.internal=!1),Uo.PreFlag_IGNORE):(null==Uo.PreFlag_IGNORE_ONCE&&(Uo.internal=!0,Uo.PreFlag_IGNORE_ONCE=new Fo,Uo.internal=!1),Uo.PreFlag_IGNORE_ONCE)).toString()},Object.defineProperty(O.prototype,"isSleeping",{get:O.prototype.get_isSleeping}),Object.defineProperty(O.prototype,"type",{get:O.prototype.get_type}),Object.defineProperty(O.prototype,"collisionArbiter",{get:O.prototype.get_collisionArbiter}),Object.defineProperty(O.prototype,"fluidArbiter",{get:O.prototype.get_fluidArbiter}),Object.defineProperty(O.prototype,"shape1",{get:O.prototype.get_shape1}),Object.defineProperty(O.prototype,"shape2",{get:O.prototype.get_shape2}),Object.defineProperty(O.prototype,"body1",{get:O.prototype.get_body1}),Object.defineProperty(O.prototype,"body2",{get:O.prototype.get_body2}),Object.defineProperty(O.prototype,"state",{get:O.prototype.get_state}),O.prototype.__class__=O;var qe=nape.dynamics.ArbiterIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};qe.__name__=["nape","dynamics","ArbiterIterator"],qe.get=function(e){var t;if(null==qe.zpp_pool){Bn.internal=!0;var i=new qe;Bn.internal=!1,t=i}else{var n=qe.zpp_pool;qe.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},qe.prototype.zpp_inner=null,qe.prototype.zpp_i=null,qe.prototype.zpp_critical=null,qe.prototype.zpp_next=null,qe.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner.zpp_gl();return this.zpp_critical=!0,this.zpp_i<e||(this.zpp_next=qe.zpp_pool,(qe.zpp_pool=this).zpp_inner=null,!1)},qe.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},qe.prototype.__class__=qe;var E=nape.dynamics.ArbiterList=function(){this.zpp_inner=null,this.zpp_inner=new Bn,this.zpp_inner.outer=this};E.__name__=["nape","dynamics","ArbiterList"],E.fromArray=function(e){for(var t=new E,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},E.prototype.zpp_inner=null,E.prototype.get_length=function(){return this.zpp_gl()},E.prototype.zpp_gl=function(){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var e=this.zpp_inner.inner.head;null!=e;)e.elt.active&&this.zpp_inner.user_length++,e=e.next}return this.zpp_inner.user_length},E.prototype.zpp_vm=function(){this.zpp_inner.valmod()},E.prototype.has=function(e){return this.zpp_vm(),this.zpp_inner.inner.has(e.zpp_inner)},E.prototype.at=function(e){if(this.zpp_vm(),this.zpp_inner.reverse_flag&&(e=this.zpp_gl()-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)for(this.zpp_inner.at_index=0,this.zpp_inner.at_ite=this.zpp_inner.inner.head;!this.zpp_inner.at_ite.elt.active;)this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;for(;this.zpp_inner.at_index!=e;)for(this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;!this.zpp_inner.at_ite.elt.active;)this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.wrapper()},E.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_vm();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);return t&&(this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(e.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)),t},E.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_vm();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);return t&&(this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)):this.zpp_inner.inner.add(e.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)),t},E.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_vm();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var i=1==this.zpp_gl()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-2),n=(e=null==i?this.zpp_inner.inner.head.elt:i.next.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.wrapper()},E.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_vm();var e=null;if(this.zpp_inner.reverse_flag){null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var t=1==this.zpp_gl()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-2),i=(e=null==t?this.zpp_inner.inner.head.elt:t.next.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.wrapper()},E.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},E.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_vm(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},E.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;!this.empty();)this.pop();else for(;!this.empty();)this.shift()},E.prototype.empty=function(){return 0==this.zpp_gl()},E.prototype.iterator=function(){return this.zpp_vm(),qe.get(this)},E.prototype.copy=function(e){null==e&&(e=!1);for(var t=new E,i=this.iterator();;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner.zpp_gl();if(i.zpp_critical=!0,!(i.zpp_i<n||(i.zpp_next=qe.zpp_pool,(qe.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var r=i.zpp_inner.at(i.zpp_i++);t.push(e?null:r)}return t},E.prototype.merge=function(e){for(var t=e.iterator();;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner.zpp_gl();if(t.zpp_critical=!0,!(t.zpp_i<i||(t.zpp_next=qe.zpp_pool,(qe.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var n=t.zpp_inner.at(t.zpp_i++);this.has(n)||this.add(n)}},E.prototype.toString=function(){for(var e="[",t=!0,i=this.iterator();;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner.zpp_gl();if(i.zpp_critical=!0,!(i.zpp_i<n||(i.zpp_next=qe.zpp_pool,(qe.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var r=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==r?"NULL":r.toString(),t=!1}return e+"]"},E.prototype.foreach=function(e){for(var t=this.iterator();;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner.zpp_gl();if(t.zpp_critical=!0,!(t.zpp_i<i||(t.zpp_next=qe.zpp_pool,(qe.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=qe.zpp_pool,(qe.zpp_pool=t).zpp_inner=null;break}}return this},E.prototype.filter=function(e){for(var t=0;t<this.zpp_gl();){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(E.prototype,"length",{get:E.prototype.get_length}),E.prototype.__class__=E;var G=nape.dynamics.ArbiterType=function(){};G.__name__=["nape","dynamics","ArbiterType"],G.COLLISION=null,G.get_COLLISION=function(){return null==Uo.ArbiterType_COLLISION&&(Uo.internal=!0,Uo.ArbiterType_COLLISION=new G,Uo.internal=!1),Uo.ArbiterType_COLLISION},G.SENSOR=null,G.get_SENSOR=function(){return null==Uo.ArbiterType_SENSOR&&(Uo.internal=!0,Uo.ArbiterType_SENSOR=new G,Uo.internal=!1),Uo.ArbiterType_SENSOR},G.FLUID=null,G.get_FLUID=function(){return null==Uo.ArbiterType_FLUID&&(Uo.internal=!0,Uo.ArbiterType_FLUID=new G,Uo.internal=!1),Uo.ArbiterType_FLUID},G.prototype.toString=function(){return null==Uo.ArbiterType_COLLISION&&(Uo.internal=!0,Uo.ArbiterType_COLLISION=new G,Uo.internal=!1),this==Uo.ArbiterType_COLLISION?"COLLISION":(null==Uo.ArbiterType_SENSOR&&(Uo.internal=!0,Uo.ArbiterType_SENSOR=new G,Uo.internal=!1),this==Uo.ArbiterType_SENSOR?"SENSOR":(null==Uo.ArbiterType_FLUID&&(Uo.internal=!0,Uo.ArbiterType_FLUID=new G,Uo.internal=!1),this==Uo.ArbiterType_FLUID?"FLUID":""))},Object.defineProperty(G,"COLLISION",{get:G.get_COLLISION}),Object.defineProperty(G,"SENSOR",{get:G.get_SENSOR}),Object.defineProperty(G,"FLUID",{get:G.get_FLUID}),G.prototype.__class__=G;var D=nape.dynamics.CollisionArbiter=function(){O.call(this)};D.__name__=["nape","dynamics","CollisionArbiter"],D.__super__=O,D.prototype=Object.create(O.prototype),D.prototype.get_contacts=function(){return null==this.zpp_inner.colarb.wrap_contacts&&this.zpp_inner.colarb.setupcontacts(),this.zpp_inner.colarb.wrap_contacts},D.prototype.get_normal=function(){return null==this.zpp_inner.colarb.wrap_normal&&this.zpp_inner.colarb.getnormal(),this.zpp_inner.colarb.wrap_normal},D.prototype.get_radius=function(){return this.zpp_inner.colarb.radius},D.prototype.get_referenceEdge1=function(){var e=this.zpp_inner.colarb.__ref_edge1;return null==e||1==(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer).zpp_inner.type&&(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer).zpp_inner==e.polygon||(e=this.zpp_inner.colarb.__ref_edge2),null==e?null:e.wrapper()},D.prototype.get_referenceEdge2=function(){var e=this.zpp_inner.colarb.__ref_edge1;return null==e||1==(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer).zpp_inner.type&&(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer).zpp_inner==e.polygon||(e=this.zpp_inner.colarb.__ref_edge2),null==e?null:e.wrapper()},D.prototype.firstVertex=function(){return null!=this.zpp_inner.colarb.__ref_edge1!=(null!=this.zpp_inner.colarb.__ref_edge2)&&-1==this.zpp_inner.colarb.__ref_vertex},D.prototype.secondVertex=function(){return null!=this.zpp_inner.colarb.__ref_edge1!=(null!=this.zpp_inner.colarb.__ref_edge2)&&1==this.zpp_inner.colarb.__ref_vertex},D.prototype.normalImpulse=function(e,t){null==t&&(t=!1);var i=0,n=0,r=0,o=this.zpp_inner.colarb;if(!t||o.oc1.fresh){var a=o.oc1.wrapper().normalImpulse(e),s=a.zpp_inner;null!=s._validate&&s._validate(),i+=a.zpp_inner.x;var p=a.zpp_inner;null!=p._validate&&p._validate(),n+=a.zpp_inner.y;var l=a.zpp_inner;null!=l._validate&&l._validate(),r+=a.zpp_inner.z,a.dispose()}if(o.hc2&&(!t||o.oc2.fresh)){var h=o.oc2.wrapper().normalImpulse(e),u=h.zpp_inner;null!=u._validate&&u._validate(),i+=h.zpp_inner.x;var d=h.zpp_inner;null!=d._validate&&d._validate(),n+=h.zpp_inner.y;var c=h.zpp_inner;null!=c._validate&&c._validate(),r+=h.zpp_inner.z,h.dispose()}return Z.get(i,n,r)},D.prototype.tangentImpulse=function(e,t){null==t&&(t=!1);var i=0,n=0,r=0,o=this.zpp_inner.colarb;if(!t||o.oc1.fresh){var a=o.oc1.wrapper().tangentImpulse(e),s=a.zpp_inner;null!=s._validate&&s._validate(),i+=a.zpp_inner.x;var p=a.zpp_inner;null!=p._validate&&p._validate(),n+=a.zpp_inner.y;var l=a.zpp_inner;null!=l._validate&&l._validate(),r+=a.zpp_inner.z,a.dispose()}if(o.hc2&&(!t||o.oc2.fresh)){var h=o.oc2.wrapper().tangentImpulse(e),u=h.zpp_inner;null!=u._validate&&u._validate(),i+=h.zpp_inner.x;var d=h.zpp_inner;null!=d._validate&&d._validate(),n+=h.zpp_inner.y;var c=h.zpp_inner;null!=c._validate&&c._validate(),r+=h.zpp_inner.z,h.dispose()}return Z.get(i,n,r)},D.prototype.totalImpulse=function(e,t){null==t&&(t=!1);var i=0,n=0,r=0,o=this.zpp_inner.colarb;if(!t||o.oc1.fresh){var a=o.oc1.wrapper().totalImpulse(e),s=a.zpp_inner;null!=s._validate&&s._validate(),i+=a.zpp_inner.x;var p=a.zpp_inner;null!=p._validate&&p._validate(),n+=a.zpp_inner.y;var l=a.zpp_inner;null!=l._validate&&l._validate(),r+=a.zpp_inner.z,a.dispose()}if(o.hc2&&(!t||o.oc2.fresh)){var h=o.oc2.wrapper().totalImpulse(e),u=h.zpp_inner;null!=u._validate&&u._validate(),i+=h.zpp_inner.x;var d=h.zpp_inner;null!=d._validate&&d._validate(),n+=h.zpp_inner.y;var c=h.zpp_inner;null!=c._validate&&c._validate(),r+=h.zpp_inner.z,h.dispose()}return Z.get(i,n,r)},D.prototype.rollingImpulse=function(e,t){null==t&&(t=!1);var i=this.zpp_inner.colarb;return!t||i.oc1.fresh?i.oc1.wrapper().rollingImpulse(e):0},D.prototype.get_elasticity=function(){var e=this.zpp_inner.colarb;return e.invalidated&&(e.invalidated=!1,e.userdef_restitution||(e.s1.material.elasticity<=-1/0||e.s2.material.elasticity<=-1/0?e.restitution=0:e.s1.material.elasticity>=1/0||e.s2.material.elasticity>=1/0?e.restitution=1:e.restitution=(e.s1.material.elasticity+e.s2.material.elasticity)/2,e.restitution<0&&(e.restitution=0),1<e.restitution&&(e.restitution=1)),e.userdef_dyn_fric||(e.dyn_fric=Math.sqrt(e.s1.material.dynamicFriction*e.s2.material.dynamicFriction)),e.userdef_stat_fric||(e.stat_fric=Math.sqrt(e.s1.material.staticFriction*e.s2.material.staticFriction)),e.userdef_rfric||(e.rfric=Math.sqrt(e.s1.material.rollingFriction*e.s2.material.rollingFriction))),e.restitution},D.prototype.set_elasticity=function(e){var t=this.zpp_inner.colarb;t.restitution=e,t.userdef_restitution=!0;var i=this.zpp_inner.colarb;return i.invalidated&&(i.invalidated=!1,i.userdef_restitution||(i.s1.material.elasticity<=-1/0||i.s2.material.elasticity<=-1/0?i.restitution=0:i.s1.material.elasticity>=1/0||i.s2.material.elasticity>=1/0?i.restitution=1:i.restitution=(i.s1.material.elasticity+i.s2.material.elasticity)/2,i.restitution<0&&(i.restitution=0),1<i.restitution&&(i.restitution=1)),i.userdef_dyn_fric||(i.dyn_fric=Math.sqrt(i.s1.material.dynamicFriction*i.s2.material.dynamicFriction)),i.userdef_stat_fric||(i.stat_fric=Math.sqrt(i.s1.material.staticFriction*i.s2.material.staticFriction)),i.userdef_rfric||(i.rfric=Math.sqrt(i.s1.material.rollingFriction*i.s2.material.rollingFriction))),i.restitution},D.prototype.get_dynamicFriction=function(){var e=this.zpp_inner.colarb;return e.invalidated&&(e.invalidated=!1,e.userdef_restitution||(e.s1.material.elasticity<=-1/0||e.s2.material.elasticity<=-1/0?e.restitution=0:e.s1.material.elasticity>=1/0||e.s2.material.elasticity>=1/0?e.restitution=1:e.restitution=(e.s1.material.elasticity+e.s2.material.elasticity)/2,e.restitution<0&&(e.restitution=0),1<e.restitution&&(e.restitution=1)),e.userdef_dyn_fric||(e.dyn_fric=Math.sqrt(e.s1.material.dynamicFriction*e.s2.material.dynamicFriction)),e.userdef_stat_fric||(e.stat_fric=Math.sqrt(e.s1.material.staticFriction*e.s2.material.staticFriction)),e.userdef_rfric||(e.rfric=Math.sqrt(e.s1.material.rollingFriction*e.s2.material.rollingFriction))),e.dyn_fric},D.prototype.set_dynamicFriction=function(e){var t=this.zpp_inner.colarb;t.dyn_fric=e,t.userdef_dyn_fric=!0;var i=this.zpp_inner.colarb;return i.invalidated&&(i.invalidated=!1,i.userdef_restitution||(i.s1.material.elasticity<=-1/0||i.s2.material.elasticity<=-1/0?i.restitution=0:i.s1.material.elasticity>=1/0||i.s2.material.elasticity>=1/0?i.restitution=1:i.restitution=(i.s1.material.elasticity+i.s2.material.elasticity)/2,i.restitution<0&&(i.restitution=0),1<i.restitution&&(i.restitution=1)),i.userdef_dyn_fric||(i.dyn_fric=Math.sqrt(i.s1.material.dynamicFriction*i.s2.material.dynamicFriction)),i.userdef_stat_fric||(i.stat_fric=Math.sqrt(i.s1.material.staticFriction*i.s2.material.staticFriction)),i.userdef_rfric||(i.rfric=Math.sqrt(i.s1.material.rollingFriction*i.s2.material.rollingFriction))),i.dyn_fric},D.prototype.get_staticFriction=function(){var e=this.zpp_inner.colarb;return e.invalidated&&(e.invalidated=!1,e.userdef_restitution||(e.s1.material.elasticity<=-1/0||e.s2.material.elasticity<=-1/0?e.restitution=0:e.s1.material.elasticity>=1/0||e.s2.material.elasticity>=1/0?e.restitution=1:e.restitution=(e.s1.material.elasticity+e.s2.material.elasticity)/2,e.restitution<0&&(e.restitution=0),1<e.restitution&&(e.restitution=1)),e.userdef_dyn_fric||(e.dyn_fric=Math.sqrt(e.s1.material.dynamicFriction*e.s2.material.dynamicFriction)),e.userdef_stat_fric||(e.stat_fric=Math.sqrt(e.s1.material.staticFriction*e.s2.material.staticFriction)),e.userdef_rfric||(e.rfric=Math.sqrt(e.s1.material.rollingFriction*e.s2.material.rollingFriction))),e.stat_fric},D.prototype.set_staticFriction=function(e){var t=this.zpp_inner.colarb;t.stat_fric=e,t.userdef_stat_fric=!0;var i=this.zpp_inner.colarb;return i.invalidated&&(i.invalidated=!1,i.userdef_restitution||(i.s1.material.elasticity<=-1/0||i.s2.material.elasticity<=-1/0?i.restitution=0:i.s1.material.elasticity>=1/0||i.s2.material.elasticity>=1/0?i.restitution=1:i.restitution=(i.s1.material.elasticity+i.s2.material.elasticity)/2,i.restitution<0&&(i.restitution=0),1<i.restitution&&(i.restitution=1)),i.userdef_dyn_fric||(i.dyn_fric=Math.sqrt(i.s1.material.dynamicFriction*i.s2.material.dynamicFriction)),i.userdef_stat_fric||(i.stat_fric=Math.sqrt(i.s1.material.staticFriction*i.s2.material.staticFriction)),i.userdef_rfric||(i.rfric=Math.sqrt(i.s1.material.rollingFriction*i.s2.material.rollingFriction))),i.stat_fric},D.prototype.get_rollingFriction=function(){var e=this.zpp_inner.colarb;return e.invalidated&&(e.invalidated=!1,e.userdef_restitution||(e.s1.material.elasticity<=-1/0||e.s2.material.elasticity<=-1/0?e.restitution=0:e.s1.material.elasticity>=1/0||e.s2.material.elasticity>=1/0?e.restitution=1:e.restitution=(e.s1.material.elasticity+e.s2.material.elasticity)/2,e.restitution<0&&(e.restitution=0),1<e.restitution&&(e.restitution=1)),e.userdef_dyn_fric||(e.dyn_fric=Math.sqrt(e.s1.material.dynamicFriction*e.s2.material.dynamicFriction)),e.userdef_stat_fric||(e.stat_fric=Math.sqrt(e.s1.material.staticFriction*e.s2.material.staticFriction)),e.userdef_rfric||(e.rfric=Math.sqrt(e.s1.material.rollingFriction*e.s2.material.rollingFriction))),e.rfric},D.prototype.set_rollingFriction=function(e){var t=this.zpp_inner.colarb;t.rfric=e,t.userdef_rfric=!0;var i=this.zpp_inner.colarb;return i.invalidated&&(i.invalidated=!1,i.userdef_restitution||(i.s1.material.elasticity<=-1/0||i.s2.material.elasticity<=-1/0?i.restitution=0:i.s1.material.elasticity>=1/0||i.s2.material.elasticity>=1/0?i.restitution=1:i.restitution=(i.s1.material.elasticity+i.s2.material.elasticity)/2,i.restitution<0&&(i.restitution=0),1<i.restitution&&(i.restitution=1)),i.userdef_dyn_fric||(i.dyn_fric=Math.sqrt(i.s1.material.dynamicFriction*i.s2.material.dynamicFriction)),i.userdef_stat_fric||(i.stat_fric=Math.sqrt(i.s1.material.staticFriction*i.s2.material.staticFriction)),i.userdef_rfric||(i.rfric=Math.sqrt(i.s1.material.rollingFriction*i.s2.material.rollingFriction))),i.rfric},Object.defineProperty(D.prototype,"contacts",{get:D.prototype.get_contacts}),Object.defineProperty(D.prototype,"normal",{get:D.prototype.get_normal}),Object.defineProperty(D.prototype,"radius",{get:D.prototype.get_radius}),Object.defineProperty(D.prototype,"referenceEdge1",{get:D.prototype.get_referenceEdge1}),Object.defineProperty(D.prototype,"referenceEdge2",{get:D.prototype.get_referenceEdge2}),Object.defineProperty(D.prototype,"elasticity",{get:D.prototype.get_elasticity,set:D.prototype.set_elasticity}),Object.defineProperty(D.prototype,"dynamicFriction",{get:D.prototype.get_dynamicFriction,set:D.prototype.set_dynamicFriction}),Object.defineProperty(D.prototype,"staticFriction",{get:D.prototype.get_staticFriction,set:D.prototype.set_staticFriction}),Object.defineProperty(D.prototype,"rollingFriction",{get:D.prototype.get_rollingFriction,set:D.prototype.set_rollingFriction}),D.prototype.__class__=D;var I=nape.dynamics.Contact=function(){this.zpp_inner=null};I.__name__=["nape","dynamics","Contact"],I.prototype.zpp_inner=null,I.prototype.get_arbiter=function(){if(null==this.zpp_inner.arbiter)return null;var e=this.zpp_inner.arbiter.outer;return e.zpp_inner.type==ln.COL?e.zpp_inner.colarb.outer_zn:null},I.prototype.get_penetration=function(){return-this.zpp_inner.dist},I.prototype.get_position=function(){return null==this.zpp_inner.wrap_position&&this.zpp_inner.getposition(),this.zpp_inner.wrap_position},I.prototype.get_fresh=function(){return this.zpp_inner.fresh},I.prototype.normalImpulse=function(e){var t=this.zpp_inner.arbiter.colarb,i=this.zpp_inner.inner,n=i.jnAcc;return null==e?Z.get(t.nx*n,t.ny*n):e==t.b1.outer?Z.get(t.nx*-n,t.ny*-n,-(t.ny*i.r1x-t.nx*i.r1y)*n):Z.get(t.nx*n,t.ny*n,(t.ny*i.r2x-t.nx*i.r2y)*n)},I.prototype.tangentImpulse=function(e){var t=this.zpp_inner.arbiter.colarb,i=this.zpp_inner.inner,n=i.jtAcc;return null==e?Z.get(-t.ny*n,t.nx*n):e==t.b1.outer?Z.get(t.ny*n,-t.nx*n,-(i.r1x*t.nx+i.r1y*t.ny)*n):Z.get(-t.ny*n,t.nx*n,(i.r2x*t.nx+i.r2y*t.ny)*n)},I.prototype.rollingImpulse=function(e){var t=this.zpp_inner.arbiter.colarb,i=this.zpp_inner.arbiter.colarb.jrAcc;return null==e?i:e==t.b1.outer?-i:i},I.prototype.totalImpulse=function(e){var t=this.zpp_inner.arbiter.colarb,i=this.zpp_inner.inner,n=i.jnAcc,r=i.jtAcc,o=t.jrAcc;if(null==e)return Z.get(t.nx*n-t.ny*r,t.ny*n+t.nx*r,o);var a=t.nx*n-t.ny*r,s=t.ny*n+t.nx*r;return e==t.b1.outer?Z.get(-a,-s,-(s*i.r1x-a*i.r1y)-o):Z.get(a,s,s*i.r2x-a*i.r2y+o)},I.prototype.get_friction=function(){return this.zpp_inner.inner.friction},I.prototype.toString=function(){return null==this.zpp_inner.arbiter||this.zpp_inner.arbiter.cleared?"{object-pooled}":"{Contact}"},Object.defineProperty(I.prototype,"arbiter",{get:I.prototype.get_arbiter}),Object.defineProperty(I.prototype,"penetration",{get:I.prototype.get_penetration}),Object.defineProperty(I.prototype,"position",{get:I.prototype.get_position}),Object.defineProperty(I.prototype,"fresh",{get:I.prototype.get_fresh}),Object.defineProperty(I.prototype,"friction",{get:I.prototype.get_friction}),I.prototype.__class__=I;var Xe=nape.dynamics.ContactIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};Xe.__name__=["nape","dynamics","ContactIterator"],Xe.get=function(e){var t;if(null==Xe.zpp_pool){Rn.internal=!0;var i=new Xe;Rn.internal=!1,t=i}else{var n=Xe.zpp_pool;Xe.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},Xe.prototype.zpp_inner=null,Xe.prototype.zpp_i=null,Xe.prototype.zpp_critical=null,Xe.prototype.zpp_next=null,Xe.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;if(e.zpp_inner.valmod(),e.zpp_inner.zip_length){e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=0;for(var t=e.zpp_inner.inner.next;null!=t;){var i=t;i.active&&i.arbiter.active&&e.zpp_inner.user_length++,t=t.next}}var n=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<n||(this.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=this).zpp_inner=null,!1)},Xe.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},Xe.prototype.__class__=Xe;var L=nape.dynamics.ContactList=function(){this.zpp_inner=null,this.zpp_inner=new Rn,this.zpp_inner.outer=this};L.__name__=["nape","dynamics","ContactList"],L.fromArray=function(e){for(var t=new L,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},L.prototype.zpp_inner=null,L.prototype.get_length=function(){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var e=this.zpp_inner.inner.next;null!=e;){var t=e;t.active&&t.arbiter.active&&this.zpp_inner.user_length++,e=e.next}}return this.zpp_inner.user_length},L.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},L.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var t=this.zpp_inner.inner.next;null!=t;){var i=t;i.active&&i.arbiter.active&&this.zpp_inner.user_length++,t=t.next}}e=this.zpp_inner.user_length-1-e}if(e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)for(this.zpp_inner.at_index=0,this.zpp_inner.at_ite=this.zpp_inner.inner.next;;){var n=this.zpp_inner.at_ite;if(n.active&&n.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}for(;this.zpp_inner.at_index!=e;)for(this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;;){var r=this.zpp_inner.at_ite;if(r.active&&r.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.wrapper()},L.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{if(null==this.zpp_inner.push_ite){var i;if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var n=this.zpp_inner.inner.next;null!=n;){var r=n;r.active&&r.arbiter.active&&this.zpp_inner.user_length++,n=n.next}}if(0==this.zpp_inner.user_length)i=null;else{if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var o=this.zpp_inner.inner.next;null!=o;){var a=o;a.active&&a.arbiter.active&&this.zpp_inner.user_length++,o=o.next}}i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=i}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},L.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var i;if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var n=this.zpp_inner.inner.next;null!=n;){var r=n;r.active&&r.arbiter.active&&this.zpp_inner.user_length++,n=n.next}}if(0==this.zpp_inner.user_length)i=null;else{if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var o=this.zpp_inner.inner.next;null!=o;){var a=o;a.active&&a.arbiter.active&&this.zpp_inner.user_length++,o=o.next}}i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=i}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},L.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.next).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var n=this.zpp_inner.inner.next;null!=n;){var r=n;r.active&&r.arbiter.active&&this.zpp_inner.user_length++,n=n.next}}if(1==this.zpp_inner.user_length)i=null;else{if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var o=this.zpp_inner.inner.next;null!=o;){var a=o;a.active&&a.arbiter.active&&this.zpp_inner.user_length++,o=o.next}}i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)}var s=(e=null==i?this.zpp_inner.inner.next:i.next).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(s),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.wrapper()},L.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var i=this.zpp_inner.inner.next;null!=i;){var n=i;n.active&&n.arbiter.active&&this.zpp_inner.user_length++,i=i.next}}if(1==this.zpp_inner.user_length)t=null;else{if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var r=this.zpp_inner.inner.next;null!=r;){var o=r;o.active&&o.arbiter.active&&this.zpp_inner.user_length++,r=r.next}}t=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)}var a=(e=null==t?this.zpp_inner.inner.next:t.next).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var s=(e=this.zpp_inner.inner.next).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(s),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.wrapper()},L.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},L.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.next;null!=i;){if(i==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},L.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;;){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var e=this.zpp_inner.inner.next;null!=e;){var t=e;t.active&&t.arbiter.active&&this.zpp_inner.user_length++,e=e.next}}if(0==this.zpp_inner.user_length)break;this.pop()}else for(;;){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var i=this.zpp_inner.inner.next;null!=i;){var n=i;n.active&&n.arbiter.active&&this.zpp_inner.user_length++,i=i.next}}if(0==this.zpp_inner.user_length)break;this.shift()}},L.prototype.empty=function(){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var e=this.zpp_inner.inner.next;null!=e;){var t=e;t.active&&t.arbiter.active&&this.zpp_inner.user_length++,e=e.next}}return 0==this.zpp_inner.user_length},L.prototype.iterator=function(){return this.zpp_inner.valmod(),Xe.get(this)},L.prototype.copy=function(e){null==e&&(e=!1);var t=new L;this.zpp_inner.valmod();for(var i=Xe.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;if(n.zpp_inner.valmod(),n.zpp_inner.zip_length){n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=0;for(var r=n.zpp_inner.inner.next;null!=r;){var o=r;o.active&&o.arbiter.active&&n.zpp_inner.user_length++,r=r.next}}var a=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<a||(i.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var s=i.zpp_inner.at(i.zpp_i++);t.push(e?null:s)}return t},L.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=Xe.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;if(i.zpp_inner.valmod(),i.zpp_inner.zip_length){i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=0;for(var n=i.zpp_inner.inner.next;null!=n;){var r=n;r.active&&r.arbiter.active&&i.zpp_inner.user_length++,n=n.next}}var o=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<o||(t.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var a=t.zpp_inner.at(t.zpp_i++);this.has(a)||(this.zpp_inner.reverse_flag?this.push(a):this.unshift(a))}},L.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=Xe.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;if(n.zpp_inner.valmod(),n.zpp_inner.zip_length){n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=0;for(var r=n.zpp_inner.inner.next;null!=r;){var o=r;o.active&&o.arbiter.active&&n.zpp_inner.user_length++,r=r.next}}var a=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<a||(i.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var s=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==s?"NULL":s.toString(),t=!1}return e+"]"},L.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=Xe.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;if(i.zpp_inner.valmod(),i.zpp_inner.zip_length){i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=0;for(var n=i.zpp_inner.inner.next;null!=n;){var r=n;r.active&&r.arbiter.active&&i.zpp_inner.user_length++,n=n.next}}var o=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<o||(t.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=t).zpp_inner=null;break}}return this},L.prototype.filter=function(e){for(var t=0;;){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var i=this.zpp_inner.inner.next;null!=i;){var n=i;n.active&&n.arbiter.active&&this.zpp_inner.user_length++,i=i.next}}if(!(t<this.zpp_inner.user_length))break;var r=this.at(t);try{e(r)?++t:this.remove(r)}catch(e){break}}return this},Object.defineProperty(L.prototype,"length",{get:L.prototype.get_length}),L.prototype.__class__=L;var B=nape.dynamics.FluidArbiter=function(){O.call(this)};B.__name__=["nape","dynamics","FluidArbiter"],B.__super__=O,B.prototype=Object.create(O.prototype),B.prototype.get_position=function(){return null==this.zpp_inner.fluidarb.wrap_position&&this.zpp_inner.fluidarb.getposition(),this.zpp_inner.fluidarb.wrap_position},B.prototype.set_position=function(e){null==this.zpp_inner.fluidarb.wrap_position&&this.zpp_inner.fluidarb.getposition();var t=this.zpp_inner.fluidarb.wrap_position,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner.fluidarb.wrap_position&&this.zpp_inner.fluidarb.getposition(),this.zpp_inner.fluidarb.wrap_position},B.prototype.get_overlap=function(){return this.zpp_inner.fluidarb.overlap},B.prototype.set_overlap=function(e){return this.zpp_inner.fluidarb.overlap=e,this.zpp_inner.fluidarb.overlap},B.prototype.buoyancyImpulse=function(e){var t=this.zpp_inner.fluidarb;return null==e?Z.get(t.buoyx,t.buoyy,0):e.zpp_inner==this.zpp_inner.b2?Z.get(t.buoyx,t.buoyy,t.buoyy*t.r2x-t.buoyx*t.r2y):Z.get(-t.buoyx,-t.buoyy,-(t.buoyy*t.r1x-t.buoyx*t.r1y))},B.prototype.dragImpulse=function(e){var t=this.zpp_inner.fluidarb,i=null==e||e.zpp_inner==this.zpp_inner.b2?1:-1;return Z.get(t.dampx*i,t.dampy*i,t.adamp*i)},B.prototype.totalImpulse=function(e,t){null==t&&(t=!1);var i=this.buoyancyImpulse(e),n=this.dragImpulse(e),r=n.zpp_inner;null!=r._validate&&r._validate();var o=n.zpp_inner.x,a=i.zpp_inner;null!=a._validate&&a._validate(),n.zpp_inner.x=o+i.zpp_inner.x;var s=n.zpp_inner;null!=s._validate&&s._validate();var p=n.zpp_inner;null!=p._validate&&p._validate();var l=n.zpp_inner.y,h=i.zpp_inner;null!=h._validate&&h._validate(),n.zpp_inner.y=l+i.zpp_inner.y;var u=n.zpp_inner;null!=u._validate&&u._validate();var d=n.zpp_inner;null!=d._validate&&d._validate();var c=n.zpp_inner.z,_=i.zpp_inner;null!=_._validate&&_._validate(),n.zpp_inner.z=c+i.zpp_inner.z;var y=n.zpp_inner;return null!=y._validate&&y._validate(),i.dispose(),n},Object.defineProperty(B.prototype,"position",{get:B.prototype.get_position,set:B.prototype.set_position}),Object.defineProperty(B.prototype,"overlap",{get:B.prototype.get_overlap,set:B.prototype.set_overlap}),B.prototype.__class__=B;var R=nape.dynamics.InteractionFilter=function(e,t,i,n,r,o){null==o&&(o=-1),null==r&&(r=1),null==n&&(n=-1),null==i&&(i=1),null==t&&(t=-1),null==e&&(e=1),(this.zpp_inner=null)==mt.zpp_pool?this.zpp_inner=new mt:(this.zpp_inner=mt.zpp_pool,mt.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null),(this.zpp_inner.outer=this).zpp_inner.collisionGroup!=e&&(this.zpp_inner.collisionGroup=e,this.zpp_inner.invalidate()),this.zpp_inner.collisionMask!=t&&(this.zpp_inner.collisionMask=t,this.zpp_inner.invalidate()),this.zpp_inner.sensorGroup!=i&&(this.zpp_inner.sensorGroup=i,this.zpp_inner.invalidate()),this.zpp_inner.sensorMask!=n&&(this.zpp_inner.sensorMask=n,this.zpp_inner.invalidate()),this.zpp_inner.fluidGroup!=r&&(this.zpp_inner.fluidGroup=r,this.zpp_inner.invalidate()),this.zpp_inner.fluidMask!=o&&(this.zpp_inner.fluidMask=o,this.zpp_inner.invalidate())};R.__name__=["nape","dynamics","InteractionFilter"],R.prototype.zpp_inner=null,R.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},R.prototype.get_shapes=function(){return null==this.zpp_inner.wrap_shapes&&(this.zpp_inner.wrap_shapes=In.get(this.zpp_inner.shapes,!0)),this.zpp_inner.wrap_shapes},R.prototype.get_collisionGroup=function(){return this.zpp_inner.collisionGroup},R.prototype.set_collisionGroup=function(e){return this.zpp_inner.collisionGroup!=e&&(this.zpp_inner.collisionGroup=e,this.zpp_inner.invalidate()),this.zpp_inner.collisionGroup},R.prototype.get_collisionMask=function(){return this.zpp_inner.collisionMask},R.prototype.set_collisionMask=function(e){return this.zpp_inner.collisionMask!=e&&(this.zpp_inner.collisionMask=e,this.zpp_inner.invalidate()),this.zpp_inner.collisionMask},R.prototype.get_sensorGroup=function(){return this.zpp_inner.sensorGroup},R.prototype.set_sensorGroup=function(e){return this.zpp_inner.sensorGroup!=e&&(this.zpp_inner.sensorGroup=e,this.zpp_inner.invalidate()),this.zpp_inner.sensorGroup},R.prototype.get_sensorMask=function(){return this.zpp_inner.sensorMask},R.prototype.set_sensorMask=function(e){return this.zpp_inner.sensorMask!=e&&(this.zpp_inner.sensorMask=e,this.zpp_inner.invalidate()),this.zpp_inner.sensorMask},R.prototype.get_fluidGroup=function(){return this.zpp_inner.fluidGroup},R.prototype.set_fluidGroup=function(e){return this.zpp_inner.fluidGroup!=e&&(this.zpp_inner.fluidGroup=e,this.zpp_inner.invalidate()),this.zpp_inner.fluidGroup},R.prototype.get_fluidMask=function(){return this.zpp_inner.fluidMask},R.prototype.set_fluidMask=function(e){return this.zpp_inner.fluidMask!=e&&(this.zpp_inner.fluidMask=e,this.zpp_inner.invalidate()),this.zpp_inner.fluidMask},R.prototype.shouldCollide=function(e){var t=this.zpp_inner,i=e.zpp_inner;return 0!=(t.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&t.collisionGroup)},R.prototype.shouldSense=function(e){var t=this.zpp_inner,i=e.zpp_inner;return 0!=(t.sensorMask&i.sensorGroup)&&0!=(i.sensorMask&t.sensorGroup)},R.prototype.shouldFlow=function(e){var t=this.zpp_inner,i=e.zpp_inner;return 0!=(t.fluidMask&i.fluidGroup)&&0!=(i.fluidMask&t.fluidGroup)},R.prototype.copy=function(){return new R(this.zpp_inner.collisionGroup,this.zpp_inner.collisionMask,this.zpp_inner.sensorGroup,this.zpp_inner.sensorMask,this.zpp_inner.fluidGroup,this.zpp_inner.fluidMask)},R.prototype.toString=function(){return"{ collision: "+e.hex(this.zpp_inner.collisionGroup,8)+"~"+e.hex(this.zpp_inner.collisionMask,8)+" sensor: "+e.hex(this.zpp_inner.sensorGroup,8)+"~"+e.hex(this.zpp_inner.sensorMask,8)+" fluid: "+e.hex(this.zpp_inner.fluidGroup,8)+"~"+e.hex(this.zpp_inner.fluidMask,8)+" }"},Object.defineProperty(R.prototype,"userData",{get:R.prototype.get_userData}),Object.defineProperty(R.prototype,"shapes",{get:R.prototype.get_shapes}),Object.defineProperty(R.prototype,"collisionGroup",{get:R.prototype.get_collisionGroup,set:R.prototype.set_collisionGroup}),Object.defineProperty(R.prototype,"collisionMask",{get:R.prototype.get_collisionMask,set:R.prototype.set_collisionMask}),Object.defineProperty(R.prototype,"sensorGroup",{get:R.prototype.get_sensorGroup,set:R.prototype.set_sensorGroup}),Object.defineProperty(R.prototype,"sensorMask",{get:R.prototype.get_sensorMask,set:R.prototype.set_sensorMask}),Object.defineProperty(R.prototype,"fluidGroup",{get:R.prototype.get_fluidGroup,set:R.prototype.set_fluidGroup}),Object.defineProperty(R.prototype,"fluidMask",{get:R.prototype.get_fluidMask,set:R.prototype.set_fluidMask}),R.prototype.__class__=R;var F=nape.dynamics.InteractionGroup=function(e){null==e&&(e=!1),this.zpp_inner=null,this.zpp_inner=new gt,(this.zpp_inner.outer=this).zpp_inner.ignore!=e&&(this.zpp_inner.invalidate(!0),this.zpp_inner.ignore=e)};F.__name__=["nape","dynamics","InteractionGroup"],F.prototype.zpp_inner=null,F.prototype.get_group=function(){return null==this.zpp_inner.group?null:this.zpp_inner.group.outer},F.prototype.set_group=function(e){return this.zpp_inner.setGroup(null==e?null:e.zpp_inner),null==this.zpp_inner.group?null:this.zpp_inner.group.outer},F.prototype.get_ignore=function(){return this.zpp_inner.ignore},F.prototype.set_ignore=function(e){return this.zpp_inner.ignore!=e&&(this.zpp_inner.invalidate(!0),this.zpp_inner.ignore=e),this.zpp_inner.ignore},F.prototype.get_interactors=function(){return null==this.zpp_inner.wrap_interactors&&(this.zpp_inner.wrap_interactors=fn.get(this.zpp_inner.interactors,!0)),this.zpp_inner.wrap_interactors},F.prototype.get_groups=function(){return null==this.zpp_inner.wrap_groups&&(this.zpp_inner.wrap_groups=Ln.get(this.zpp_inner.groups,!0)),this.zpp_inner.wrap_groups},F.prototype.toString=function(){var e="InteractionGroup";return this.zpp_inner.ignore&&(e="InteractionGroup:ignore"),e},Object.defineProperty(F.prototype,"group",{get:F.prototype.get_group,set:F.prototype.set_group}),Object.defineProperty(F.prototype,"ignore",{get:F.prototype.get_ignore,set:F.prototype.set_ignore}),Object.defineProperty(F.prototype,"interactors",{get:F.prototype.get_interactors}),Object.defineProperty(F.prototype,"groups",{get:F.prototype.get_groups}),F.prototype.__class__=F;var Ye=nape.dynamics.InteractionGroupIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};Ye.__name__=["nape","dynamics","InteractionGroupIterator"],Ye.get=function(e){var t;if(null==Ye.zpp_pool){Ln.internal=!0;var i=new Ye;Ln.internal=!1,t=i}else{var n=Ye.zpp_pool;Ye.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},Ye.prototype.zpp_inner=null,Ye.prototype.zpp_i=null,Ye.prototype.zpp_critical=null,Ye.prototype.zpp_next=null,Ye.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=Ye.zpp_pool,(Ye.zpp_pool=this).zpp_inner=null,!1)},Ye.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},Ye.prototype.__class__=Ye;var j=nape.dynamics.InteractionGroupList=function(){this.zpp_inner=null,this.zpp_inner=new Ln,this.zpp_inner.outer=this};j.__name__=["nape","dynamics","InteractionGroupList"],j.fromArray=function(e){for(var t=new j,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},j.prototype.zpp_inner=null,j.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},j.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},j.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},j.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},j.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},j.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var n=(e=null==(i=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:i.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer},j.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var i=(e=null==(t=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer},j.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},j.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},j.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},j.prototype.empty=function(){return null==this.zpp_inner.inner.head},j.prototype.iterator=function(){return this.zpp_inner.valmod(),Ye.get(this)},j.prototype.copy=function(e){null==e&&(e=!1);var t=new j;this.zpp_inner.valmod();for(var i=Ye.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=Ye.zpp_pool,(Ye.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},j.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=Ye.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=Ye.zpp_pool,(Ye.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||(this.zpp_inner.reverse_flag?this.push(r):this.unshift(r))}},j.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=Ye.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=Ye.zpp_pool,(Ye.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},j.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=Ye.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=Ye.zpp_pool,(Ye.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=Ye.zpp_pool,(Ye.zpp_pool=t).zpp_inner=null;break}}return this},j.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(j.prototype,"length",{get:j.prototype.get_length}),j.prototype.__class__=j;var N=nape.geom.AABB=function(e,t,i,n){var r;null==n&&(n=0),null==i&&(i=0),null==t&&(t=0),null==e&&(e=0),(this.zpp_inner=null)==Oo.zpp_pool?r=new Oo:(r=Oo.zpp_pool,Oo.zpp_pool=r.next,r.next=null),r.minx=e,r.miny=t,r.maxx=e+i,r.maxy=t+n,this.zpp_inner=r,this.zpp_inner.outer=this};N.__name__=["nape","geom","AABB"],N.prototype.zpp_inner=null,N.prototype.copy=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t,i=this.zpp_inner,n=i.minx,r=i.miny,o=i.maxx,a=i.maxy;return null==Oo.zpp_pool?t=new Oo:(t=Oo.zpp_pool,Oo.zpp_pool=t.next,t.next=null),t.minx=n,t.miny=r,t.maxx=o,t.maxy=a,t.wrapper()},N.prototype.get_min=function(){return this.zpp_inner.getmin()},N.prototype.set_min=function(e){var t=this.zpp_inner.getmin(),i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return this.zpp_inner.getmin()},N.prototype.get_max=function(){return this.zpp_inner.getmax()},N.prototype.set_max=function(e){var t=this.zpp_inner.getmax(),i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return this.zpp_inner.getmax()},N.prototype.get_x=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.minx},N.prototype.set_x=function(e){var t=this.zpp_inner;if(null!=t._validate&&t._validate(),this.zpp_inner.minx!=e){this.zpp_inner.maxx+=e-this.zpp_inner.minx,this.zpp_inner.minx=e;var i=this.zpp_inner;null!=i._invalidate&&i._invalidate(i)}var n=this.zpp_inner;return null!=n._validate&&n._validate(),this.zpp_inner.minx},N.prototype.get_y=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.miny},N.prototype.set_y=function(e){var t=this.zpp_inner;if(null!=t._validate&&t._validate(),this.zpp_inner.miny!=e){this.zpp_inner.maxy+=e-this.zpp_inner.miny,this.zpp_inner.miny=e;var i=this.zpp_inner;null!=i._invalidate&&i._invalidate(i)}var n=this.zpp_inner;return null!=n._validate&&n._validate(),this.zpp_inner.miny},N.prototype.get_width=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t=this.zpp_inner;return t.maxx-t.minx},N.prototype.set_width=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner;if(i.maxx-i.minx!=e){var n=this.zpp_inner;null!=n._validate&&n._validate(),this.zpp_inner.maxx=this.zpp_inner.minx+e;var r=this.zpp_inner;null!=r._invalidate&&r._invalidate(r)}var o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner;return a.maxx-a.minx},N.prototype.get_height=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t=this.zpp_inner;return t.maxy-t.miny},N.prototype.set_height=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner;if(i.maxy-i.miny!=e){var n=this.zpp_inner;null!=n._validate&&n._validate(),this.zpp_inner.maxy=this.zpp_inner.miny+e;var r=this.zpp_inner;null!=r._invalidate&&r._invalidate(r)}var o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner;return a.maxy-a.miny},N.prototype.toString=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.toString()},Object.defineProperty(N.prototype,"min",{get:N.prototype.get_min,set:N.prototype.set_min}),Object.defineProperty(N.prototype,"max",{get:N.prototype.get_max,set:N.prototype.set_max}),Object.defineProperty(N.prototype,"x",{get:N.prototype.get_x,set:N.prototype.set_x}),Object.defineProperty(N.prototype,"y",{get:N.prototype.get_y,set:N.prototype.set_y}),Object.defineProperty(N.prototype,"width",{get:N.prototype.get_width,set:N.prototype.set_width}),Object.defineProperty(N.prototype,"height",{get:N.prototype.get_height,set:N.prototype.set_height}),N.prototype.__class__=N;var U=nape.geom.ConvexResult=function(){this.zpp_inner=null};U.__name__=["nape","geom","ConvexResult"],U.prototype.zpp_inner=null,U.prototype.get_normal=function(){return this.zpp_inner.normal},U.prototype.get_position=function(){return this.zpp_inner.position},U.prototype.get_toi=function(){return this.zpp_inner.toiDistance},U.prototype.get_shape=function(){return this.zpp_inner.shape},U.prototype.dispose=function(){this.zpp_inner.free()},U.prototype.toString=function(){return"{ shape: "+n.string(this.zpp_inner.shape)+" toi: "+this.zpp_inner.toiDistance+" }"},Object.defineProperty(U.prototype,"normal",{get:U.prototype.get_normal}),Object.defineProperty(U.prototype,"position",{get:U.prototype.get_position}),Object.defineProperty(U.prototype,"toi",{get:U.prototype.get_toi}),Object.defineProperty(U.prototype,"shape",{get:U.prototype.get_shape}),U.prototype.__class__=U;var Ke=nape.geom.ConvexResultIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};Ke.__name__=["nape","geom","ConvexResultIterator"],Ke.get=function(e){var t;if(null==Ke.zpp_pool){Gn.internal=!0;var i=new Ke;Gn.internal=!1,t=i}else{var n=Ke.zpp_pool;Ke.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},Ke.prototype.zpp_inner=null,Ke.prototype.zpp_i=null,Ke.prototype.zpp_critical=null,Ke.prototype.zpp_next=null,Ke.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=Ke.zpp_pool,(Ke.zpp_pool=this).zpp_inner=null,!1)},Ke.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},Ke.prototype.__class__=Ke;var pt=nape.geom.ConvexResultList=function(){this.zpp_inner=null,this.zpp_inner=new Gn,this.zpp_inner.outer=this};pt.__name__=["nape","geom","ConvexResultList"],pt.fromArray=function(e){for(var t=new pt,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},pt.prototype.zpp_inner=null,pt.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},pt.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e)},pt.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},pt.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e);else{var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},pt.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e)}else this.zpp_inner.inner.add(e);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},pt.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=e=this.zpp_inner.inner.head.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var n=e=null==(i=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:i.next.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e},pt.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var i=e=null==(t=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:t.next.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=e=this.zpp_inner.inner.head.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e},pt.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},pt.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e),this.zpp_inner.invalidate()),t},pt.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},pt.prototype.empty=function(){return null==this.zpp_inner.inner.head},pt.prototype.iterator=function(){return this.zpp_inner.valmod(),Ke.get(this)},pt.prototype.copy=function(e){null==e&&(e=!1);var t=new pt;this.zpp_inner.valmod();for(var i=Ke.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=Ke.zpp_pool,(Ke.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},pt.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=Ke.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=Ke.zpp_pool,(Ke.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||(this.zpp_inner.reverse_flag?this.push(r):this.unshift(r))}},pt.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=Ke.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=Ke.zpp_pool,(Ke.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},pt.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=Ke.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=Ke.zpp_pool,(Ke.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=Ke.zpp_pool,(Ke.zpp_pool=t).zpp_inner=null;break}}return this},pt.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(pt.prototype,"length",{get:pt.prototype.get_length}),pt.prototype.__class__=pt;var V=nape.geom.Geom=function(){};V.__name__=["nape","geom","Geom"],V.distanceBody=function(e,t,i,n){for(var r=e.zpp_inner.shapes.head;null!=r;)bt.validateShape(r.elt),r=r.next;for(var o=t.zpp_inner.shapes.head;null!=o;)bt.validateShape(o.elt),o=o.next;return Ht.distanceBody(e.zpp_inner,t.zpp_inner,i.zpp_inner,n.zpp_inner)},V.distance=function(e,t,i,n){var r;bt.validateShape(e.zpp_inner),bt.validateShape(t.zpp_inner),null==ep.zpp_pool?r=new ep:(r=ep.zpp_pool,ep.zpp_pool=r.next,r.next=null),r.weak=!1;var o,a=e.zpp_inner,s=t.zpp_inner,p=i.zpp_inner,l=n.zpp_inner;if(0==a.type&&0==s.type){var h,u=a.circle,d=s.circle,c=0,_=0;c=d.worldCOMx-u.worldCOMx,_=d.worldCOMy-u.worldCOMy;var y=Math.sqrt(c*c+_*_);if((h=y-(u.radius+d.radius))<1e100){if(0==y)c=1,_=0;else{var x=1/y;c*=x,_*=x}var m=u.radius;p.x=u.worldCOMx+c*m,p.y=u.worldCOMy+_*m;var g=-d.radius;l.x=d.worldCOMx+c*g,l.y=d.worldCOMy+_*g,r.x=c,r.y=_}o=h}else{var f=!1;if(0==a.type&&1==s.type){var v=a;a=s,s=v;var z=p;p=l,l=z,f=!0}if(1==a.type&&0==s.type){for(var w=a.polygon,b=s.circle,S=-1e100,C=null,M=w.edges.head;null!=M;){var P=M.elt,k=P.gnormx*b.worldCOMx+P.gnormy*b.worldCOMy-P.gprojection-b.radius;if(1e100<k){S=k;break}0<k?S<k&&(S=k,C=P):S<0&&S<k&&(S=k,C=P),M=M.next}if(S<1e100){var T=C.gp0,A=C.gp1,O=b.worldCOMy*C.gnormx-b.worldCOMx*C.gnormy;if(O<=T.y*C.gnormx-T.x*C.gnormy){var E=0,G=0;E=b.worldCOMx-T.x,G=b.worldCOMy-T.y;var D=Math.sqrt(E*E+G*G);if((S=D-b.radius)<1e100){if(0==D)E=1,G=0;else{var I=1/D;E*=I,G*=I}p.x=T.x+0*E,p.y=T.y+0*G;var L=-b.radius;l.x=b.worldCOMx+E*L,l.y=b.worldCOMy+G*L,r.x=E,r.y=G}}else if(O>=A.y*C.gnormx-A.x*C.gnormy){var B=0,R=0;B=b.worldCOMx-A.x,R=b.worldCOMy-A.y;var F=Math.sqrt(B*B+R*R);if((S=F-b.radius)<1e100){if(0==F)B=1,R=0;else{var j=1/F;B*=j,R*=j}p.x=A.x+0*B,p.y=A.y+0*R;var N=-b.radius;l.x=b.worldCOMx+B*N,l.y=b.worldCOMy+R*N,r.x=B,r.y=R}}else{var U=-b.radius;l.x=b.worldCOMx+C.gnormx*U,l.y=b.worldCOMy+C.gnormy*U;var V=-S;p.x=l.x+C.gnormx*V,p.y=l.y+C.gnormy*V,r.x=C.gnormx,r.y=C.gnormy}}f&&(r.x=-r.x,r.y=-r.y),o=S}else{for(var H=a.polygon,W=s.polygon,q=-1e100,X=null,Y=null,K=0,Z=H.edges.head;null!=Z;){for(var J=Z.elt,Q=1e100,$=W.gverts.next;null!=$;){var ee=$,te=J.gnormx*ee.x+J.gnormy*ee.y;te<Q&&(Q=te),$=$.next}if(1e100<(Q-=J.gprojection)){q=Q;break}0<Q?q<Q&&(q=Q,X=J,K=1):q<0&&q<Q&&(q=Q,X=J,K=1),Z=Z.next}if(q<1e100){for(var ie=W.edges.head;null!=ie;){for(var ne=ie.elt,re=1e100,oe=H.gverts.next;null!=oe;){var ae=oe,se=ne.gnormx*ae.x+ne.gnormy*ae.y;se<re&&(re=se),oe=oe.next}if(1e100<(re-=ne.gprojection)){q=re;break}0<re?q<re&&(q=re,Y=ne,K=2):q<0&&q<re&&(q=re,Y=ne,K=2),ie=ie.next}if(q<1e100){var pe,le;if(1==K)pe=W,le=X;else{pe=H,le=Y;var he=p;p=l,l=he,f=!f}for(var ue=null,de=1e100,ce=pe.edges.head;null!=ce;){var _e=ce.elt,ye=le.gnormx*_e.gnormx+le.gnormy*_e.gnormy;ye<de&&(de=ye,ue=_e),ce=ce.next}if(f?(r.x=-le.gnormx,r.y=-le.gnormy):(r.x=le.gnormx,r.y=le.gnormy),0<=q){var xe,me,ge,fe,ve=le.gp0,ze=le.gp1,we=ue.gp0,be=ue.gp1,Se=1/((xe=ze.x-ve.x)*xe+(me=ze.y-ve.y)*me),Ce=1/((ge=be.x-we.x)*ge+(fe=be.y-we.y)*fe),Me=-(xe*(ve.x-we.x)+me*(ve.y-we.y))*Se,Pe=-(xe*(ve.x-be.x)+me*(ve.y-be.y))*Se,ke=-(ge*(we.x-ve.x)+fe*(we.y-ve.y))*Ce,Te=-(ge*(we.x-ze.x)+fe*(we.y-ze.y))*Ce;Me<0?Me=0:1<Me&&(Me=1),Pe<0?Pe=0:1<Pe&&(Pe=1),ke<0?ke=0:1<ke&&(ke=1),Te<0?Te=0:1<Te&&(Te=1);var Ae,Oe,Ee=Me;Ae=ve.x+xe*Ee,Oe=ve.y+me*Ee;var Ge,De,Ie=Pe;Ge=ve.x+xe*Ie,De=ve.y+me*Ie;var Le,Be,Re=ke;Le=we.x+ge*Re,Be=we.y+fe*Re;var Fe,je,Ne=Te;Fe=we.x+ge*Ne,je=we.y+fe*Ne;var Ue,Ve,He,We,qe,Xe,Ye,Ke,Ze=(Ue=Ae-we.x)*Ue+(Ve=Oe-we.y)*Ve,Je=(He=Ge-be.x)*He+(We=De-be.y)*We,Qe=(qe=Le-ve.x)*qe+(Xe=Be-ve.y)*Xe,$e=(Ye=Fe-ze.x)*Ye+(Ke=je-ze.y)*Ke,et=0,tt=0,it=null;Ze<Je?(et=Ae,tt=Oe,it=we):(et=Ge,tt=De,it=be,Ze=Je);var nt=0,rt=0,ot=null;if(Qe<$e?(nt=Le,rt=Be,ot=ve):(nt=Fe,rt=je,ot=ze,Qe=$e),0!=(q=Ze<Qe?(p.x=et,p.y=tt,l.x=it.x,l.y=it.y,Math.sqrt(Ze)):(l.x=nt,l.y=rt,p.x=ot.x,p.y=ot.y,Math.sqrt(Qe)))){r.x=l.x-p.x,r.y=l.y-p.y;var at=1/q;r.x*=at,r.y*=at,f&&(r.x=-r.x,r.y=-r.y)}o=q}else{var st=0,pt=0;st=ue.gp0.x,pt=ue.gp0.y;var lt,ht,ut=0,dt=0;lt=(ut=ue.gp1.x)-st,ht=(dt=ue.gp1.y)-pt;var ct=le.gnormy*st-le.gnormx*pt,_t=le.gnormy*ut-le.gnormx*dt,yt=1/(_t-ct),xt=(-le.tp1-ct)*yt;xt>Qs.epsilon&&(st+=lt*xt,pt+=ht*xt);var mt=(-le.tp0-_t)*yt;mt<-Qs.epsilon&&(ut+=lt*mt,dt+=ht*mt);var gt=st*le.gnormx+pt*le.gnormy-le.gprojection,ft=ut*le.gnormx+dt*le.gnormy-le.gprojection;if(gt<ft){l.x=st,l.y=pt;var vt=-gt;p.x=l.x+le.gnormx*vt,p.y=l.y+le.gnormy*vt,o=gt}else{l.x=ut,l.y=dt;var zt=-ft;p.x=l.x+le.gnormx*zt,p.y=l.y+le.gnormy*zt,o=ft}}}else o=1e100}else o=1e100}}var wt=r;return null!=wt.outer&&(wt.outer.zpp_inner=null,wt.outer=null),wt._isimmutable=null,wt._validate=null,wt._invalidate=null,wt.next=ep.zpp_pool,ep.zpp_pool=wt,o},V.intersectsBody=function(e,t){for(var i=e.zpp_inner.shapes.head;null!=i;)bt.validateShape(i.elt),i=i.next;for(var n=t.zpp_inner.shapes.head;null!=n;)bt.validateShape(n.elt),n=n.next;var r=e.zpp_inner.aabb,o=t.zpp_inner.aabb;if(o.miny<=r.maxy&&r.miny<=o.maxy&&o.minx<=r.maxx&&r.minx<=o.maxx){for(var a=e.zpp_inner.shapes.head;null!=a;){for(var s=a.elt,p=t.zpp_inner.shapes.head;null!=p;){if($s.testCollide_safe(s,p.elt))return!0;p=p.next}a=a.next}return!1}return!1},V.intersects=function(e,t){bt.validateShape(e.zpp_inner),bt.validateShape(t.zpp_inner);var i=e.zpp_inner.aabb,n=t.zpp_inner.aabb;return n.miny<=i.maxy&&i.miny<=n.maxy&&n.minx<=i.maxx&&i.minx<=n.maxx&&$s.testCollide_safe(e.zpp_inner,t.zpp_inner)},V.contains=function(e,t){return bt.validateShape(e.zpp_inner),bt.validateShape(t.zpp_inner),$s.containTest(e.zpp_inner,t.zpp_inner)},V.prototype.__class__=V;var wn=nape.geom.GeomPoly=function(e){if(this.zpp_inner=null,this.zpp_pool=null,this.zpp_inner=new St(this),null!=e){if(e instanceof Array&&null==e.__enum__)for(var t=e,i=0;i<t.length;){var n=t[i];++i;var r=n,o=r.zpp_inner;null!=o._validate&&o._validate();var a=r.zpp_inner.x,s=r.zpp_inner;null!=s._validate&&s._validate();var p,l=r.zpp_inner.y;null==cr.zpp_pool?p=new cr:(p=cr.zpp_pool,cr.zpp_pool=p.next,p.next=null),p.forced=!1,p.x=a,p.y=l;var h=p;null==this.zpp_inner.vertices?this.zpp_inner.vertices=h.prev=h.next=h:(h.prev=this.zpp_inner.vertices,h.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=h,this.zpp_inner.vertices.next=h),this.zpp_inner.vertices=h}else if(fe.__instanceof(e,ve))for(var u=e.iterator();;){u.zpp_inner.zpp_inner.valmod();var d=u.zpp_inner.zpp_gl();if(u.zpp_critical=!0,!(u.zpp_i<d||(u.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=u).zpp_inner=null,!1)))break;u.zpp_critical=!1;var c=u.zpp_inner.at(u.zpp_i++),_=c.zpp_inner;null!=_._validate&&_._validate();var y=c.zpp_inner.x,x=c.zpp_inner;null!=x._validate&&x._validate();var m,g=c.zpp_inner.y;null==cr.zpp_pool?m=new cr:(m=cr.zpp_pool,cr.zpp_pool=m.next,m.next=null),m.forced=!1,m.x=y,m.y=g;var f=m;null==this.zpp_inner.vertices?this.zpp_inner.vertices=f.prev=f.next=f:(f.prev=this.zpp_inner.vertices,f.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=f,this.zpp_inner.vertices.next=f),this.zpp_inner.vertices=f}else if(fe.__instanceof(e,wn)){var v=e.zpp_inner.vertices;if(null!=v)for(var z=v;;){var w,b=z.x,S=z.y;if(null==jn.poolVec2?w=new lt:(w=jn.poolVec2,jn.poolVec2=w.zpp_pool,w.zpp_pool=null),null==w.zpp_inner){var C;null==ep.zpp_pool?C=new ep:(C=ep.zpp_pool,ep.zpp_pool=C.next,C.next=null),C.weak=!1,C._immutable=!1,C.x=b,C.y=S,w.zpp_inner=C,w.zpp_inner.outer=w}else{var M,P=w.zpp_inner;if(null!=P._validate&&P._validate(),w.zpp_inner.x==b){var k=w.zpp_inner;null!=k._validate&&k._validate(),M=w.zpp_inner.y==S}else M=!1;if(!M){w.zpp_inner.x=b,w.zpp_inner.y=S;var T=w.zpp_inner;null!=T._invalidate&&T._invalidate(T)}}w.zpp_inner.weak=!1;var A=w;z=z.next;var O=A.zpp_inner;null!=O._validate&&O._validate();var E=A.zpp_inner.x,G=A.zpp_inner;null!=G._validate&&G._validate();var D,I=A.zpp_inner.y;null==cr.zpp_pool?D=new cr:(D=cr.zpp_pool,cr.zpp_pool=D.next,D.next=null),D.forced=!1,D.x=E,D.y=I;var L=D;null==this.zpp_inner.vertices?this.zpp_inner.vertices=L.prev=L.next=L:(L.prev=this.zpp_inner.vertices,L.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=L,this.zpp_inner.vertices.next=L),this.zpp_inner.vertices=L;var B=A.zpp_inner;A.zpp_inner.outer=null,A.zpp_inner=null;var R=A;R.zpp_pool=jn.poolVec2,jn.poolVec2=R;var F=B;if(null!=F.outer&&(F.outer.zpp_inner=null,F.outer=null),F._isimmutable=null,F._validate=null,F._invalidate=null,F.next=ep.zpp_pool,ep.zpp_pool=F,z==v)break}}if(this.skipForward(1),e instanceof Array&&null==e.__enum__)for(var j=e,N=0;N<j.length;){var U,V=j[N];if(V.zpp_inner.weak){var H=V.zpp_inner;V.zpp_inner.outer=null,V.zpp_inner=null;var W=V;W.zpp_pool=jn.poolVec2,jn.poolVec2=W;var q=H;null!=q.outer&&(q.outer.zpp_inner=null,q.outer=null),q._isimmutable=null,q._validate=null,q._invalidate=null,q.next=ep.zpp_pool,ep.zpp_pool=q,U=!0}else U=!1;U?j.splice(N,1):++N}else if(fe.__instanceof(e,ve)){var X=e;null!=X.zpp_inner._validate&&X.zpp_inner._validate();for(var Y=X.zpp_inner.inner,K=null,Z=Y.head;null!=Z;){var J=Z.elt;if(J.outer.zpp_inner.weak){if(Z=Y.erase(K),J.outer.zpp_inner.weak){var Q=J.outer,$=Q.zpp_inner;Q.zpp_inner.outer=null,Q.zpp_inner=null;var ee=Q;ee.zpp_pool=jn.poolVec2,jn.poolVec2=ee;var te=$;null!=te.outer&&(te.outer.zpp_inner=null,te.outer=null),te._isimmutable=null,te._validate=null,te._invalidate=null,te.next=ep.zpp_pool,ep.zpp_pool=te}}else Z=(K=Z).next}}}};wn.__name__=["nape","geom","GeomPoly"],wn.get=function(e){var t;if(null==jn.poolGeomPoly?t=new wn:(t=jn.poolGeomPoly,jn.poolGeomPoly=t.zpp_pool,t.zpp_pool=null),null!=e){if(e instanceof Array&&null==e.__enum__)for(var i=e,n=0;n<i.length;){var r=i[n];++n;var o=r,a=o.zpp_inner;null!=a._validate&&a._validate();var s=o.zpp_inner.x,p=o.zpp_inner;null!=p._validate&&p._validate();var l,h=o.zpp_inner.y;null==cr.zpp_pool?l=new cr:(l=cr.zpp_pool,cr.zpp_pool=l.next,l.next=null),l.forced=!1,l.x=s,l.y=h;var u=l;null==t.zpp_inner.vertices?t.zpp_inner.vertices=u.prev=u.next=u:(u.prev=t.zpp_inner.vertices,u.next=t.zpp_inner.vertices.next,t.zpp_inner.vertices.next.prev=u,t.zpp_inner.vertices.next=u),t.zpp_inner.vertices=u}else if(fe.__instanceof(e,ve))for(var d=e.iterator();;){d.zpp_inner.zpp_inner.valmod();var c=d.zpp_inner.zpp_gl();if(d.zpp_critical=!0,!(d.zpp_i<c||(d.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=d).zpp_inner=null,!1)))break;d.zpp_critical=!1;var _=d.zpp_inner.at(d.zpp_i++),y=_.zpp_inner;null!=y._validate&&y._validate();var x=_.zpp_inner.x,m=_.zpp_inner;null!=m._validate&&m._validate();var g,f=_.zpp_inner.y;null==cr.zpp_pool?g=new cr:(g=cr.zpp_pool,cr.zpp_pool=g.next,g.next=null),g.forced=!1,g.x=x,g.y=f;var v=g;null==t.zpp_inner.vertices?t.zpp_inner.vertices=v.prev=v.next=v:(v.prev=t.zpp_inner.vertices,v.next=t.zpp_inner.vertices.next,t.zpp_inner.vertices.next.prev=v,t.zpp_inner.vertices.next=v),t.zpp_inner.vertices=v}else if(fe.__instanceof(e,wn)){var z=e.zpp_inner.vertices;if(null!=z)for(var w=z;;){var b,S=w.x,C=w.y;if(null==jn.poolVec2?b=new lt:(b=jn.poolVec2,jn.poolVec2=b.zpp_pool,b.zpp_pool=null),null==b.zpp_inner){var M;null==ep.zpp_pool?M=new ep:(M=ep.zpp_pool,ep.zpp_pool=M.next,M.next=null),M.weak=!1,M._immutable=!1,M.x=S,M.y=C,b.zpp_inner=M,b.zpp_inner.outer=b}else{var P,k=b.zpp_inner;if(null!=k._validate&&k._validate(),b.zpp_inner.x==S){var T=b.zpp_inner;null!=T._validate&&T._validate(),P=b.zpp_inner.y==C}else P=!1;if(!P){b.zpp_inner.x=S,b.zpp_inner.y=C;var A=b.zpp_inner;null!=A._invalidate&&A._invalidate(A)}}b.zpp_inner.weak=!1;var O=b;w=w.next;var E=O.zpp_inner;null!=E._validate&&E._validate();var G=O.zpp_inner.x,D=O.zpp_inner;null!=D._validate&&D._validate();var I,L=O.zpp_inner.y;null==cr.zpp_pool?I=new cr:(I=cr.zpp_pool,cr.zpp_pool=I.next,I.next=null),I.forced=!1,I.x=G,I.y=L;var B=I;null==t.zpp_inner.vertices?t.zpp_inner.vertices=B.prev=B.next=B:(B.prev=t.zpp_inner.vertices,B.next=t.zpp_inner.vertices.next,t.zpp_inner.vertices.next.prev=B,t.zpp_inner.vertices.next=B),t.zpp_inner.vertices=B;var R=O.zpp_inner;O.zpp_inner.outer=null,O.zpp_inner=null;var F=O;F.zpp_pool=jn.poolVec2,jn.poolVec2=F;var j=R;if(null!=j.outer&&(j.outer.zpp_inner=null,j.outer=null),j._isimmutable=null,j._validate=null,j._invalidate=null,j.next=ep.zpp_pool,ep.zpp_pool=j,w==z)break}}if(t.skipForward(1),e instanceof Array&&null==e.__enum__)for(var N=e,U=0;U<N.length;){var V,H=N[U];if(H.zpp_inner.weak){var W=H.zpp_inner;H.zpp_inner.outer=null,H.zpp_inner=null;var q=H;q.zpp_pool=jn.poolVec2,jn.poolVec2=q;var X=W;null!=X.outer&&(X.outer.zpp_inner=null,X.outer=null),X._isimmutable=null,X._validate=null,X._invalidate=null,X.next=ep.zpp_pool,ep.zpp_pool=X,V=!0}else V=!1;V?N.splice(U,1):++U}else if(fe.__instanceof(e,ve)){var Y=e;null!=Y.zpp_inner._validate&&Y.zpp_inner._validate();for(var K=Y.zpp_inner.inner,Z=null,J=K.head;null!=J;){var Q=J.elt;if(Q.outer.zpp_inner.weak){if(J=K.erase(Z),Q.outer.zpp_inner.weak){var $=Q.outer,ee=$.zpp_inner;$.zpp_inner.outer=null,$.zpp_inner=null;var te=$;te.zpp_pool=jn.poolVec2,jn.poolVec2=te;var ie=ee;null!=ie.outer&&(ie.outer.zpp_inner=null,ie.outer=null),ie._isimmutable=null,ie._validate=null,ie._invalidate=null,ie.next=ep.zpp_pool,ep.zpp_pool=ie}}else J=(Z=J).next}}}return t},wn.prototype.zpp_pool=null,wn.prototype.zpp_inner=null,wn.prototype.empty=function(){return null==this.zpp_inner.vertices},wn.prototype.size=function(){var e=0,t=this.zpp_inner.vertices,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;++e,(n=n.next)!=i;);return e},wn.prototype.iterator=function(){return Ct.get(this.zpp_inner.vertices,!0)},wn.prototype.forwardIterator=function(){return Ct.get(this.zpp_inner.vertices,!0)},wn.prototype.backwardsIterator=function(){return Ct.get(this.zpp_inner.vertices,!1)},wn.prototype.current=function(){var e=this.zpp_inner.vertices;if(null==e.wrap){var t,i=e.x,n=e.y;if(null==jn.poolVec2?t=new lt:(t=jn.poolVec2,jn.poolVec2=t.zpp_pool,t.zpp_pool=null),null==t.zpp_inner){var r;null==ep.zpp_pool?r=new ep:(r=ep.zpp_pool,ep.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=i,r.y=n,t.zpp_inner=r,t.zpp_inner.outer=t}else{var o,a=t.zpp_inner;if(null!=a._validate&&a._validate(),t.zpp_inner.x==i){var s=t.zpp_inner;null!=s._validate&&s._validate(),o=t.zpp_inner.y==n}else o=!1;if(!o){t.zpp_inner.x=i,t.zpp_inner.y=n;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}}t.zpp_inner.weak=!1,e.wrap=t,e.wrap.zpp_inner._inuse=!0,e.wrap.zpp_inner._invalidate=$(e,e.modwrap),e.wrap.zpp_inner._validate=$(e,e.getwrap)}return e.wrap},wn.prototype.push=function(e){var t=e.zpp_inner;null!=t._validate&&t._validate();var i=e.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate();var r,o=e.zpp_inner.y;null==cr.zpp_pool?r=new cr:(r=cr.zpp_pool,cr.zpp_pool=r.next,r.next=null),r.forced=!1,r.x=i,r.y=o;var a=r;if(null==this.zpp_inner.vertices?this.zpp_inner.vertices=a.prev=a.next=a:(a.prev=this.zpp_inner.vertices,a.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=a,this.zpp_inner.vertices.next=a),this.zpp_inner.vertices=a,e.zpp_inner.weak){var s=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=s.outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=ep.zpp_pool,ep.zpp_pool=s}return this},wn.prototype.pop=function(){var e,t=this.zpp_inner.vertices;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,e=null;else{var i=this.zpp_inner.vertices.prev;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,e=i}if(this.zpp_inner.vertices=e,null!=t.wrap){t.wrap.zpp_inner._inuse=!1;var n=t.wrap,r=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=ep.zpp_pool,ep.zpp_pool=r,t.wrap=null}return t.prev=t.next=null,t.next=cr.zpp_pool,cr.zpp_pool=t,this},wn.prototype.unshift=function(e){var t=e.zpp_inner;null!=t._validate&&t._validate();var i=e.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate();var r,o=e.zpp_inner.y;null==cr.zpp_pool?r=new cr:(r=cr.zpp_pool,cr.zpp_pool=r.next,r.next=null),r.forced=!1,r.x=i,r.y=o;var a=r;if(null==this.zpp_inner.vertices?this.zpp_inner.vertices=a.prev=a.next=a:(a.next=this.zpp_inner.vertices,a.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.prev.next=a,this.zpp_inner.vertices.prev=a),this.zpp_inner.vertices=a,e.zpp_inner.weak){var s=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=s.outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=ep.zpp_pool,ep.zpp_pool=s}return this},wn.prototype.shift=function(){var e,t=this.zpp_inner.vertices;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,e=this.zpp_inner.vertices=null;else{var i=this.zpp_inner.vertices.next;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,e=i}if(this.zpp_inner.vertices=e,null!=t.wrap){t.wrap.zpp_inner._inuse=!1;var n=t.wrap,r=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=ep.zpp_pool,ep.zpp_pool=r,t.wrap=null}return t.prev=t.next=null,t.next=cr.zpp_pool,cr.zpp_pool=t,this},wn.prototype.skipForward=function(e){if(null!=this.zpp_inner.vertices)if(0<e)for(;0<e--;)this.zpp_inner.vertices=this.zpp_inner.vertices.next;else if(e<0)for(;e++<0;)this.zpp_inner.vertices=this.zpp_inner.vertices.prev;return this},wn.prototype.skipBackwards=function(e){return this.skipForward(-e)},wn.prototype.erase=function(e){for(;0!=e&&null!=this.zpp_inner.vertices;){var t=this.zpp_inner.vertices;if(0<e){var i;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,i=this.zpp_inner.vertices=null;else{var n=this.zpp_inner.vertices.next;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,i=n}this.zpp_inner.vertices=i,--e}else if(e<0){var r;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,r=null;else{var o=this.zpp_inner.vertices.prev;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,r=o}this.zpp_inner.vertices=r,++e}if(null!=t.wrap){t.wrap.zpp_inner._inuse=!1;var a=t.wrap,s=a.zpp_inner;a.zpp_inner.outer=null,a.zpp_inner=null,a.zpp_pool=jn.poolVec2,jn.poolVec2=a,null!=s.outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=ep.zpp_pool,ep.zpp_pool=s,t.wrap=null}t.prev=t.next=null,t.next=cr.zpp_pool,cr.zpp_pool=t}return this},wn.prototype.clear=function(){for(;null!=this.zpp_inner.vertices;){var e,t=this.zpp_inner.vertices;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,e=this.zpp_inner.vertices=null;else{var i=this.zpp_inner.vertices.next;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,e=i}if(this.zpp_inner.vertices=e,null!=t.wrap){t.wrap.zpp_inner._inuse=!1;var n=t.wrap,r=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=ep.zpp_pool,ep.zpp_pool=r,t.wrap=null}t.prev=t.next=null,t.next=cr.zpp_pool,cr.zpp_pool=t}return this},wn.prototype.copy=function(){var e=wn.get(),t=this.zpp_inner.vertices,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r,o=n,a=o.x,s=o.y;null==cr.zpp_pool?r=new cr:(r=cr.zpp_pool,cr.zpp_pool=r.next,r.next=null),r.forced=!1,r.x=a,r.y=s;var p=r;if(null==e.zpp_inner.vertices?e.zpp_inner.vertices=p.prev=p.next=p:(p.prev=e.zpp_inner.vertices,p.next=e.zpp_inner.vertices.next,e.zpp_inner.vertices.next.prev=p,e.zpp_inner.vertices.next=p),e.zpp_inner.vertices=p,(n=n.next)==i)break}return e.skipForward(1)},wn.prototype.dispose=function(){this.clear();this.zpp_pool=jn.poolGeomPoly,jn.poolGeomPoly=this},wn.prototype.toString=function(){var e="GeomPoly[",t=this.zpp_inner.vertices,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r=n;if(r!=this.zpp_inner.vertices&&(e+=","),e+="{"+r.x+","+r.y+"}",(n=n.next)==i)break}return e+"]"},wn.prototype.area=function(){if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return 0;var e=0,t=this.zpp_inner.vertices,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r=n;if(e+=r.x*(r.next.y-r.prev.y),(n=n.next)==i)break}var o=.5*e;return o<0?-o:o},wn.prototype.winding=function(){if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return null==Uo.Winding_UNDEFINED&&(Uo.internal=!0,Uo.Winding_UNDEFINED=new J,Uo.internal=!1),Uo.Winding_UNDEFINED;var e=0,t=this.zpp_inner.vertices,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r=n;if(e+=r.x*(r.next.y-r.prev.y),(n=n.next)==i)break}var o=.5*e;return 0<o?(null==Uo.Winding_CLOCKWISE&&(Uo.internal=!0,Uo.Winding_CLOCKWISE=new J,Uo.internal=!1),Uo.Winding_CLOCKWISE):0==o?(null==Uo.Winding_UNDEFINED&&(Uo.internal=!0,Uo.Winding_UNDEFINED=new J,Uo.internal=!1),Uo.Winding_UNDEFINED):(null==Uo.Winding_ANTICLOCKWISE&&(Uo.internal=!0,Uo.Winding_ANTICLOCKWISE=new J,Uo.internal=!1),Uo.Winding_ANTICLOCKWISE)},wn.prototype.contains=function(e){var t=e.zpp_inner;null!=t._validate&&t._validate();var i=e.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate();var r=e.zpp_inner.y,o=!1,a=this.zpp_inner.vertices,s=this.zpp_inner.vertices;if(null!=a)for(var p=a;;){var l=p,h=l.prev;if((l.y<r&&h.y>=r||h.y<r&&l.y>=r)&&(l.x<=i||h.x<=i)&&l.x+(r-l.y)/(h.y-l.y)*(h.x-l.x)<i&&(o=!o),(p=p.next)==s)break}var u=o;if(e.zpp_inner.weak){var d=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=ep.zpp_pool,ep.zpp_pool=d}return u},wn.prototype.isClockwise=function(){var e=this.winding();return null==Uo.Winding_CLOCKWISE&&(Uo.internal=!0,Uo.Winding_CLOCKWISE=new J,Uo.internal=!1),e==Uo.Winding_CLOCKWISE},wn.prototype.isConvex=function(){if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return!0;var e=!1,t=!1,i=!0,n=this.zpp_inner.vertices,r=this.zpp_inner.vertices;if(null!=n)for(var o=n;;){var a,s,p=o,l=p.prev,h=p.next;a=h.x-p.x,s=h.y-p.y;var u;u=p.x-l.x;var d=(p.y-l.y)*a-u*s;if(0<d?t=!0:d<0&&(e=!0),t&&e){i=!1;break}if((o=o.next)==r)break}return i},wn.prototype.isSimple=function(){return null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next||Bt.isSimple(this.zpp_inner.vertices)},wn.prototype.isMonotone=function(){return null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next||Tt.isMonotone(this.zpp_inner.vertices)},wn.prototype.isDegenerate=function(){return null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next||this.area()<Qs.epsilon},wn.prototype.simplify=function(e){if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return this.copy();var t=jt.simplify(this.zpp_inner.vertices,e),i=wn.get();return i.zpp_inner.vertices=t,i},wn.prototype.simpleDecomposition=function(e){null==Ot.sharedGVList&&(Ot.sharedGVList=new Si);for(var t=Bt.decompose(this.zpp_inner.vertices,Ot.sharedGVList),i=null==e?new bn:e;null!=t.head;){var n=t.pop_unsafe(),r=wn.get();r.zpp_inner.vertices=n,i.zpp_inner.reverse_flag?i.push(r):i.unshift(r)}return i},wn.prototype.monotoneDecomposition=function(e){null==Tt.sharedPPoly&&(Tt.sharedPPoly=new Ot);var t=Tt.decompose(this.zpp_inner.vertices,Tt.sharedPPoly);null==Ot.sharedGVList&&(Ot.sharedGVList=new Si);for(var i=t.extract(Ot.sharedGVList),n=null==e?new bn:e;null!=i.head;){var r=i.pop_unsafe(),o=wn.get();o.zpp_inner.vertices=r,n.zpp_inner.reverse_flag?n.push(o):n.unshift(o)}return n},wn.prototype.convexDecomposition=function(e,t){null==e&&(e=!1),null==Tt.sharedPPoly&&(Tt.sharedPPoly=new Ot);var i=Tt.decompose(this.zpp_inner.vertices,Tt.sharedPPoly);null==Ot.sharedPPList&&(Ot.sharedPPList=new bi);for(var n=i.extract_partitions(Ot.sharedPPList),r=null==t?new bn:t;null!=n.head;){var o=n.pop_unsafe();Ut.triangulate(o),e&&Ut.optimise(o),zt.optimise(o),null==Ot.sharedGVList&&(Ot.sharedGVList=new Si);var a=o.extract(Ot.sharedGVList);for(o.next=Ot.zpp_pool,Ot.zpp_pool=o;null!=a.head;){var s=a.pop_unsafe(),p=wn.get();p.zpp_inner.vertices=s,r.zpp_inner.reverse_flag?r.push(p):r.unshift(p)}}return r},wn.prototype.triangularDecomposition=function(e,t){null==e&&(e=!1),null==Tt.sharedPPoly&&(Tt.sharedPPoly=new Ot);var i=Tt.decompose(this.zpp_inner.vertices,Tt.sharedPPoly);null==Ot.sharedPPList&&(Ot.sharedPPList=new bi);for(var n=i.extract_partitions(Ot.sharedPPList),r=null==t?new bn:t;null!=n.head;){var o=n.pop_unsafe();Ut.triangulate(o),e&&Ut.optimise(o),null==Ot.sharedGVList&&(Ot.sharedGVList=new Si);var a=o.extract(Ot.sharedGVList);for(o.next=Ot.zpp_pool,Ot.zpp_pool=o;null!=a.head;){var s=a.pop_unsafe(),p=wn.get();p.zpp_inner.vertices=s,r.zpp_inner.reverse_flag?r.push(p):r.unshift(p)}}return r},wn.prototype.inflate=function(e){var t=wn.get(),i=this.winding();null==Uo.Winding_CLOCKWISE&&(Uo.internal=!0,Uo.Winding_CLOCKWISE=new J,Uo.internal=!1),i==Uo.Winding_CLOCKWISE&&(e=-e);var n=this.zpp_inner.vertices,r=this.zpp_inner.vertices;if(null!=n)for(var o=n;;){var a,s,p,l,h=o,u=h.prev,d=h.next;a=h.x-u.x,s=h.y-u.y,p=d.x-h.x,l=d.y-h.y;var c=0,_=0,y=0,x=0;c=a,_=s;var m=1/Math.sqrt(c*c+_*_),g=c*=m;c=-(_*=m),_=g;c*=e,_*=e,y=p,x=l;var f=1/Math.sqrt(y*y+x*x),v=y*=f;y=-(x*=f),x=v;var z=l*((y*=e)-c)-p*((x*=e)-_),w=0==z?0:z/(l*a-p*s),b=0,S=0;b=h.x+c,S=h.y+_;var C;if(b+=a*w,S+=s*w,null==jn.poolVec2?C=new lt:(C=jn.poolVec2,jn.poolVec2=C.zpp_pool,C.zpp_pool=null),null==C.zpp_inner){var M;null==ep.zpp_pool?M=new ep:(M=ep.zpp_pool,ep.zpp_pool=M.next,M.next=null),M.weak=!1,M._immutable=!1,M.x=b,M.y=S,C.zpp_inner=M,C.zpp_inner.outer=C}else{var P,k=C.zpp_inner;if(null!=k._validate&&k._validate(),C.zpp_inner.x==b){var T=C.zpp_inner;null!=T._validate&&T._validate(),P=C.zpp_inner.y==S}else P=!1;if(!P){C.zpp_inner.x=b,C.zpp_inner.y=S;var A=C.zpp_inner;null!=A._invalidate&&A._invalidate(A)}}if(C.zpp_inner.weak=!1,t.push(C),(o=o.next)==r)break}return t.skipForward(1)},wn.prototype.cut=function(e,t,i,n,r){null==n&&(n=!1),null==i&&(i=!1);var o=Mn.run(this.zpp_inner.vertices,e,t,i,n,r);if(e.zpp_inner.weak){var a=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=ep.zpp_pool,ep.zpp_pool=a}if(t.zpp_inner.weak){var s=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=s.outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=ep.zpp_pool,ep.zpp_pool=s}return o},wn.prototype.transform=function(e){var t=this.zpp_inner.vertices,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r=n,o=e.zpp_inner.a*r.x+e.zpp_inner.b*r.y+e.zpp_inner.tx;if(r.y=e.zpp_inner.c*r.x+e.zpp_inner.d*r.y+e.zpp_inner.ty,r.x=o,(n=n.next)==i)break}return this},wn.prototype.bounds=function(){var e=1e100,t=1e100,i=-1e100,n=-1e100,r=this.zpp_inner.vertices,o=this.zpp_inner.vertices;if(null!=r)for(var a=r;;){var s=a;if(s.x<e&&(e=s.x),s.y<t&&(t=s.y),s.x>i&&(i=s.x),s.y>n&&(n=s.y),(a=a.next)==o)break}return new N(e,t,i-e,n-t)},wn.prototype.top=function(){var e=this.zpp_inner.vertices,t=this.zpp_inner.vertices.next,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r=n;if(r.y<e.y&&(e=r),(n=n.next)==i)break}if(null==e.wrap){var o,a=e.x,s=e.y;if(null==jn.poolVec2?o=new lt:(o=jn.poolVec2,jn.poolVec2=o.zpp_pool,o.zpp_pool=null),null==o.zpp_inner){var p;null==ep.zpp_pool?p=new ep:(p=ep.zpp_pool,ep.zpp_pool=p.next,p.next=null),p.weak=!1,p._immutable=!1,p.x=a,p.y=s,o.zpp_inner=p,o.zpp_inner.outer=o}else{var l,h=o.zpp_inner;if(null!=h._validate&&h._validate(),o.zpp_inner.x==a){var u=o.zpp_inner;null!=u._validate&&u._validate(),l=o.zpp_inner.y==s}else l=!1;if(!l){o.zpp_inner.x=a,o.zpp_inner.y=s;var d=o.zpp_inner;null!=d._invalidate&&d._invalidate(d)}}o.zpp_inner.weak=!1,e.wrap=o,e.wrap.zpp_inner._inuse=!0,e.wrap.zpp_inner._invalidate=$(e,e.modwrap),e.wrap.zpp_inner._validate=$(e,e.getwrap)}return e.wrap},wn.prototype.bottom=function(){var e=this.zpp_inner.vertices,t=this.zpp_inner.vertices.next,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r=n;if(r.y>e.y&&(e=r),(n=n.next)==i)break}if(null==e.wrap){var o,a=e.x,s=e.y;if(null==jn.poolVec2?o=new lt:(o=jn.poolVec2,jn.poolVec2=o.zpp_pool,o.zpp_pool=null),null==o.zpp_inner){var p;null==ep.zpp_pool?p=new ep:(p=ep.zpp_pool,ep.zpp_pool=p.next,p.next=null),p.weak=!1,p._immutable=!1,p.x=a,p.y=s,o.zpp_inner=p,o.zpp_inner.outer=o}else{var l,h=o.zpp_inner;if(null!=h._validate&&h._validate(),o.zpp_inner.x==a){var u=o.zpp_inner;null!=u._validate&&u._validate(),l=o.zpp_inner.y==s}else l=!1;if(!l){o.zpp_inner.x=a,o.zpp_inner.y=s;var d=o.zpp_inner;null!=d._invalidate&&d._invalidate(d)}}o.zpp_inner.weak=!1,e.wrap=o,e.wrap.zpp_inner._inuse=!0,e.wrap.zpp_inner._invalidate=$(e,e.modwrap),e.wrap.zpp_inner._validate=$(e,e.getwrap)}return e.wrap},wn.prototype.left=function(){var e=this.zpp_inner.vertices,t=this.zpp_inner.vertices.next,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r=n;if(r.x<e.x&&(e=r),(n=n.next)==i)break}if(null==e.wrap){var o,a=e.x,s=e.y;if(null==jn.poolVec2?o=new lt:(o=jn.poolVec2,jn.poolVec2=o.zpp_pool,o.zpp_pool=null),null==o.zpp_inner){var p;null==ep.zpp_pool?p=new ep:(p=ep.zpp_pool,ep.zpp_pool=p.next,p.next=null),p.weak=!1,p._immutable=!1,p.x=a,p.y=s,o.zpp_inner=p,o.zpp_inner.outer=o}else{var l,h=o.zpp_inner;if(null!=h._validate&&h._validate(),o.zpp_inner.x==a){var u=o.zpp_inner;null!=u._validate&&u._validate(),l=o.zpp_inner.y==s}else l=!1;if(!l){o.zpp_inner.x=a,o.zpp_inner.y=s;var d=o.zpp_inner;null!=d._invalidate&&d._invalidate(d)}}o.zpp_inner.weak=!1,e.wrap=o,e.wrap.zpp_inner._inuse=!0,e.wrap.zpp_inner._invalidate=$(e,e.modwrap),e.wrap.zpp_inner._validate=$(e,e.getwrap)}return e.wrap},wn.prototype.right=function(){var e=this.zpp_inner.vertices,t=this.zpp_inner.vertices.next,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r=n;if(r.x>e.x&&(e=r),(n=n.next)==i)break}if(null==e.wrap){var o,a=e.x,s=e.y;if(null==jn.poolVec2?o=new lt:(o=jn.poolVec2,jn.poolVec2=o.zpp_pool,o.zpp_pool=null),null==o.zpp_inner){var p;null==ep.zpp_pool?p=new ep:(p=ep.zpp_pool,ep.zpp_pool=p.next,p.next=null),p.weak=!1,p._immutable=!1,p.x=a,p.y=s,o.zpp_inner=p,o.zpp_inner.outer=o}else{var l,h=o.zpp_inner;if(null!=h._validate&&h._validate(),o.zpp_inner.x==a){var u=o.zpp_inner;null!=u._validate&&u._validate(),l=o.zpp_inner.y==s}else l=!1;if(!l){o.zpp_inner.x=a,o.zpp_inner.y=s;var d=o.zpp_inner;null!=d._invalidate&&d._invalidate(d)}}o.zpp_inner.weak=!1,e.wrap=o,e.wrap.zpp_inner._inuse=!0,e.wrap.zpp_inner._invalidate=$(e,e.modwrap),e.wrap.zpp_inner._validate=$(e,e.getwrap)}return e.wrap},wn.prototype.__class__=wn;var Ze=nape.geom.GeomPolyIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};Ze.__name__=["nape","geom","GeomPolyIterator"],Ze.get=function(e){var t;if(null==Ze.zpp_pool){On.internal=!0;var i=new Ze;On.internal=!1,t=i}else{var n=Ze.zpp_pool;Ze.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},Ze.prototype.zpp_inner=null,Ze.prototype.zpp_i=null,Ze.prototype.zpp_critical=null,Ze.prototype.zpp_next=null,Ze.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=Ze.zpp_pool,(Ze.zpp_pool=this).zpp_inner=null,!1)},Ze.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},Ze.prototype.__class__=Ze;var bn=nape.geom.GeomPolyList=function(){this.zpp_inner=null,this.zpp_inner=new On,this.zpp_inner.outer=this};bn.__name__=["nape","geom","GeomPolyList"],bn.fromArray=function(e){for(var t=new bn,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},bn.prototype.zpp_inner=null,bn.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},bn.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},bn.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},bn.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},bn.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},bn.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var n=(e=null==(i=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:i.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer},bn.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var i=(e=null==(t=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer},bn.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},bn.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},bn.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},bn.prototype.empty=function(){return null==this.zpp_inner.inner.head},bn.prototype.iterator=function(){return this.zpp_inner.valmod(),Ze.get(this)},bn.prototype.copy=function(e){null==e&&(e=!1);var t=new bn;this.zpp_inner.valmod();for(var i=Ze.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=Ze.zpp_pool,(Ze.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},bn.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=Ze.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=Ze.zpp_pool,(Ze.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||(this.zpp_inner.reverse_flag?this.push(r):this.unshift(r))}},bn.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=Ze.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=Ze.zpp_pool,(Ze.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},bn.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=Ze.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=Ze.zpp_pool,(Ze.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=Ze.zpp_pool,(Ze.zpp_pool=t).zpp_inner=null;break}}return this},bn.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(bn.prototype,"length",{get:bn.prototype.get_length}),bn.prototype.__class__=bn;var H=nape.geom.GeomVertexIterator=function(){};H.__name__=["nape","geom","GeomVertexIterator"],H.prototype.zpp_inner=null,H.prototype.hasNext=function(){var e=this.zpp_inner.ptr!=this.zpp_inner.start||this.zpp_inner.first;if(this.zpp_inner.first=!1,!e){var t=this.zpp_inner;t.outer.zpp_inner=null,t.ptr=t.start=null,t.next=Ct.zpp_pool,Ct.zpp_pool=t}return e},H.prototype.next=function(){var e=this.zpp_inner.ptr;if(null==e.wrap){var t,i=e.x,n=e.y;if(null==jn.poolVec2?t=new lt:(t=jn.poolVec2,jn.poolVec2=t.zpp_pool,t.zpp_pool=null),null==t.zpp_inner){var r;null==ep.zpp_pool?r=new ep:(r=ep.zpp_pool,ep.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=i,r.y=n,t.zpp_inner=r,t.zpp_inner.outer=t}else{var o,a=t.zpp_inner;if(null!=a._validate&&a._validate(),t.zpp_inner.x==i){var s=t.zpp_inner;null!=s._validate&&s._validate(),o=t.zpp_inner.y==n}else o=!1;if(!o){t.zpp_inner.x=i,t.zpp_inner.y=n;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}}t.zpp_inner.weak=!1,e.wrap=t,e.wrap.zpp_inner._inuse=!0,e.wrap.zpp_inner._invalidate=$(e,e.modwrap),e.wrap.zpp_inner._validate=$(e,e.getwrap)}var l=e.wrap;return this.zpp_inner.ptr=this.zpp_inner.forward?this.zpp_inner.ptr.next:this.zpp_inner.ptr.prev,l},H.prototype.__class__=H;var W=nape.geom.MarchingSquares=function(){};W.__name__=["nape","geom","MarchingSquares"],W.run=function(e,t,i,n,r,o,a){null==o&&(o=!0),null==n&&(n=2);var s=null!=a?a:new bn;if(null==r){var p=t.zpp_inner;null!=p._validate&&p._validate();var l=t.zpp_inner.minx,h=t.zpp_inner;null!=h._validate&&h._validate();var u=t.zpp_inner.miny,d=t.zpp_inner.getmax(),c=d.zpp_inner;null!=c._validate&&c._validate();var _=d.zpp_inner.x,y=t.zpp_inner.getmax(),x=y.zpp_inner;null!=x._validate&&x._validate(),yr.run(e,l,u,_,y.zpp_inner.y,i,n,o,s)}else{var m=t.zpp_inner;null!=m._validate&&m._validate();var g=t.zpp_inner,f=g.maxx-g.minx,v=r.zpp_inner;null!=v._validate&&v._validate();var z=f/r.zpp_inner.x,w=t.zpp_inner;null!=w._validate&&w._validate();var b=t.zpp_inner,S=b.maxy-b.miny,C=r.zpp_inner;null!=C._validate&&C._validate();var M=S/r.zpp_inner.y,P=0|z,k=0|M;P!=z&&++P,k!=M&&++k;for(var T=0,A=P;T<A;){var O=T++,E=t.zpp_inner;null!=E._validate&&E._validate();var G=t.zpp_inner.minx,D=r.zpp_inner;null!=D._validate&&D._validate();var I,L=G+r.zpp_inner.x*O;if(O==P-1){var B=t.zpp_inner.getmax(),R=B.zpp_inner;null!=R._validate&&R._validate(),I=B.zpp_inner.x}else{var F=r.zpp_inner;null!=F._validate&&F._validate(),I=L+r.zpp_inner.x}for(var j=0,N=k;j<N;){var U=j++,V=t.zpp_inner;null!=V._validate&&V._validate();var H=t.zpp_inner.miny,W=r.zpp_inner;null!=W._validate&&W._validate();var q,X=H+r.zpp_inner.y*U;if(U==k-1){var Y=t.zpp_inner.getmax(),K=Y.zpp_inner;null!=K._validate&&K._validate(),q=Y.zpp_inner.y}else{var Z=r.zpp_inner;null!=Z._validate&&Z._validate(),q=X+r.zpp_inner.y}yr.run(e,L,X,I,q,i,n,o,s)}}}if(i.zpp_inner.weak){var J=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,i.zpp_pool=jn.poolVec2,jn.poolVec2=i,null!=J.outer&&(J.outer.zpp_inner=null,J.outer=null),J._isimmutable=null,J._validate=null,J._invalidate=null,J.next=ep.zpp_pool,ep.zpp_pool=J}if(null!=r&&r.zpp_inner.weak){var Q=r.zpp_inner;r.zpp_inner.outer=null,r.zpp_inner=null,r.zpp_pool=jn.poolVec2,jn.poolVec2=r,null!=Q.outer&&(Q.outer.zpp_inner=null,Q.outer=null),Q._isimmutable=null,Q._validate=null,Q._invalidate=null,Q.next=ep.zpp_pool,ep.zpp_pool=Q}return s},W.prototype.__class__=W;var ne=nape.geom.Mat23=function(e,t,i,n,r,o){null==o&&(o=0),null==r&&(r=0),null==n&&(n=1),null==i&&(i=0),null==t&&(t=0),null==e&&(e=1),this.zpp_inner=null,this.zpp_inner=Pt.get(),(this.zpp_inner.outer=this).zpp_inner.a=e;var a=this.zpp_inner;null!=a._invalidate&&a._invalidate(),this.zpp_inner.b=t;var s=this.zpp_inner;null!=s._invalidate&&s._invalidate(),this.zpp_inner.tx=r;var p=this.zpp_inner;null!=p._invalidate&&p._invalidate(),this.zpp_inner.c=i;var l=this.zpp_inner;null!=l._invalidate&&l._invalidate(),this.zpp_inner.d=n;var h=this.zpp_inner;null!=h._invalidate&&h._invalidate(),this.zpp_inner.ty=o;var u=this.zpp_inner;null!=u._invalidate&&u._invalidate()};ne.__name__=["nape","geom","Mat23"],ne.rotation=function(e){var t=Math.cos(e),i=Math.sin(e);return new ne(t,-i,i,t,0,0)},ne.translation=function(e,t){return new ne(1,0,0,1,e,t)},ne.scale=function(e,t){return new ne(e,0,0,t,0,0)},ne.prototype.zpp_inner=null,ne.prototype.get_a=function(){return this.zpp_inner.a},ne.prototype.set_a=function(e){this.zpp_inner.a=e;var t=this.zpp_inner;return null!=t._invalidate&&t._invalidate(),this.zpp_inner.a},ne.prototype.get_b=function(){return this.zpp_inner.b},ne.prototype.set_b=function(e){this.zpp_inner.b=e;var t=this.zpp_inner;return null!=t._invalidate&&t._invalidate(),this.zpp_inner.b},ne.prototype.get_c=function(){return this.zpp_inner.c},ne.prototype.set_c=function(e){this.zpp_inner.c=e;var t=this.zpp_inner;return null!=t._invalidate&&t._invalidate(),this.zpp_inner.c},ne.prototype.get_d=function(){return this.zpp_inner.d},ne.prototype.set_d=function(e){this.zpp_inner.d=e;var t=this.zpp_inner;return null!=t._invalidate&&t._invalidate(),this.zpp_inner.d},ne.prototype.get_tx=function(){return this.zpp_inner.tx},ne.prototype.set_tx=function(e){this.zpp_inner.tx=e;var t=this.zpp_inner;return null!=t._invalidate&&t._invalidate(),this.zpp_inner.tx},ne.prototype.get_ty=function(){return this.zpp_inner.ty},ne.prototype.set_ty=function(e){this.zpp_inner.ty=e;var t=this.zpp_inner;return null!=t._invalidate&&t._invalidate(),this.zpp_inner.ty},ne.prototype.copy=function(){return new ne(this.zpp_inner.a,this.zpp_inner.b,this.zpp_inner.c,this.zpp_inner.d,this.zpp_inner.tx,this.zpp_inner.ty)},ne.prototype.set=function(e){var t=e.zpp_inner;this.zpp_inner.setas(t.a,t.b,t.c,t.d,t.tx,t.ty);var i=this.zpp_inner;return null!=i._invalidate&&i._invalidate(),this},ne.prototype.setAs=function(e,t,i,n,r,o){null==o&&(o=0),null==r&&(r=0),null==n&&(n=1),null==i&&(i=0),null==t&&(t=0),null==e&&(e=1),this.zpp_inner.setas(e,t,i,n,r,o);var a=this.zpp_inner;return null!=a._invalidate&&a._invalidate(),this},ne.prototype.reset=function(){return this.setAs()},ne.prototype.get_determinant=function(){return this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c},ne.prototype.singular=function(){var e=this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.b*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.c+this.zpp_inner.d*this.zpp_inner.d,t=this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c;return t<0&&(t=-t),e>Qs.illConditionedThreshold*t},ne.prototype.inverse=function(){var e=1/(this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c);return new ne(this.zpp_inner.d*e,-this.zpp_inner.b*e,-this.zpp_inner.c*e,this.zpp_inner.a*e,(this.zpp_inner.b*this.zpp_inner.ty-this.zpp_inner.d*this.zpp_inner.tx)*e,(this.zpp_inner.c*this.zpp_inner.tx-this.zpp_inner.a*this.zpp_inner.ty)*e)},ne.prototype.transpose=function(){return new ne(this.zpp_inner.a,this.zpp_inner.c,this.zpp_inner.b,this.zpp_inner.d,-this.zpp_inner.a*this.zpp_inner.tx-this.zpp_inner.c*this.zpp_inner.ty,-this.zpp_inner.b*this.zpp_inner.tx-this.zpp_inner.d*this.zpp_inner.ty)},ne.prototype.concat=function(e){return new ne(e.zpp_inner.a*this.zpp_inner.a+e.zpp_inner.b*this.zpp_inner.c,e.zpp_inner.a*this.zpp_inner.b+e.zpp_inner.b*this.zpp_inner.d,e.zpp_inner.c*this.zpp_inner.a+e.zpp_inner.d*this.zpp_inner.c,e.zpp_inner.c*this.zpp_inner.b+e.zpp_inner.d*this.zpp_inner.d,e.zpp_inner.a*this.zpp_inner.tx+e.zpp_inner.b*this.zpp_inner.ty+e.zpp_inner.tx,e.zpp_inner.c*this.zpp_inner.tx+e.zpp_inner.d*this.zpp_inner.ty+e.zpp_inner.ty)},ne.prototype.transform=function(e,t,i){var n;if(null==i&&(i=!1),null==t&&(t=!1),t){var r=e.zpp_inner;null!=r._validate&&r._validate();var o=e.zpp_inner.x*this.zpp_inner.a,a=e.zpp_inner;null!=a._validate&&a._validate();var s=o+e.zpp_inner.y*this.zpp_inner.b,p=e.zpp_inner;null!=p._validate&&p._validate();var l=e.zpp_inner.x*this.zpp_inner.c,h=e.zpp_inner;null!=h._validate&&h._validate();var u,d=l+e.zpp_inner.y*this.zpp_inner.d;if(null==jn.poolVec2?u=new lt:(u=jn.poolVec2,jn.poolVec2=u.zpp_pool,u.zpp_pool=null),null==u.zpp_inner){var c;null==ep.zpp_pool?c=new ep:(c=ep.zpp_pool,ep.zpp_pool=c.next,c.next=null),c.weak=!1,c._immutable=!1,c.x=s,c.y=d,u.zpp_inner=c,u.zpp_inner.outer=u}else{var _,y=u.zpp_inner;if(null!=y._validate&&y._validate(),u.zpp_inner.x==s){var x=u.zpp_inner;null!=x._validate&&x._validate(),_=u.zpp_inner.y==d}else _=!1;if(!_){u.zpp_inner.x=s,u.zpp_inner.y=d;var m=u.zpp_inner;null!=m._invalidate&&m._invalidate(m)}}u.zpp_inner.weak=i,n=u}else{var g=e.zpp_inner;null!=g._validate&&g._validate();var f=e.zpp_inner.x*this.zpp_inner.a,v=e.zpp_inner;null!=v._validate&&v._validate();var z=f+e.zpp_inner.y*this.zpp_inner.b+this.zpp_inner.tx,w=e.zpp_inner;null!=w._validate&&w._validate();var b=e.zpp_inner.x*this.zpp_inner.c,S=e.zpp_inner;null!=S._validate&&S._validate();var C,M=b+e.zpp_inner.y*this.zpp_inner.d+this.zpp_inner.ty;if(null==jn.poolVec2?C=new lt:(C=jn.poolVec2,jn.poolVec2=C.zpp_pool,C.zpp_pool=null),null==C.zpp_inner){var P;null==ep.zpp_pool?P=new ep:(P=ep.zpp_pool,ep.zpp_pool=P.next,P.next=null),P.weak=!1,P._immutable=!1,P.x=z,P.y=M,C.zpp_inner=P,C.zpp_inner.outer=C}else{var k,T=C.zpp_inner;if(null!=T._validate&&T._validate(),C.zpp_inner.x==z){var A=C.zpp_inner;null!=A._validate&&A._validate(),k=C.zpp_inner.y==M}else k=!1;if(!k){C.zpp_inner.x=z,C.zpp_inner.y=M;var O=C.zpp_inner;null!=O._invalidate&&O._invalidate(O)}}C.zpp_inner.weak=i,n=C}if(e.zpp_inner.weak){var E=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=E.outer&&(E.outer.zpp_inner=null,E.outer=null),E._isimmutable=null,E._validate=null,E._invalidate=null,E.next=ep.zpp_pool,ep.zpp_pool=E}return n},ne.prototype.inverseTransform=function(e,t,i){null==i&&(i=!1),null==t&&(t=!1);var n,r=1/(this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c);if(t){var o=e.zpp_inner;null!=o._validate&&o._validate();var a=e.zpp_inner.x*this.zpp_inner.d,s=e.zpp_inner;null!=s._validate&&s._validate();var p=(a-e.zpp_inner.y*this.zpp_inner.b)*r,l=e.zpp_inner;null!=l._validate&&l._validate();var h=e.zpp_inner.y*this.zpp_inner.a,u=e.zpp_inner;null!=u._validate&&u._validate();var d,c=(h-e.zpp_inner.x*this.zpp_inner.c)*r;if(null==jn.poolVec2?d=new lt:(d=jn.poolVec2,jn.poolVec2=d.zpp_pool,d.zpp_pool=null),null==d.zpp_inner){var _;null==ep.zpp_pool?_=new ep:(_=ep.zpp_pool,ep.zpp_pool=_.next,_.next=null),_.weak=!1,_._immutable=!1,_.x=p,_.y=c,d.zpp_inner=_,d.zpp_inner.outer=d}else{var y,x=d.zpp_inner;if(null!=x._validate&&x._validate(),d.zpp_inner.x==p){var m=d.zpp_inner;null!=m._validate&&m._validate(),y=d.zpp_inner.y==c}else y=!1;if(!y){d.zpp_inner.x=p,d.zpp_inner.y=c;var g=d.zpp_inner;null!=g._invalidate&&g._invalidate(g)}}d.zpp_inner.weak=i,n=d}else{var f=e.zpp_inner;null!=f._validate&&f._validate();var v=e.zpp_inner.x-this.zpp_inner.tx,z=e.zpp_inner;null!=z._validate&&z._validate();var w,b=e.zpp_inner.y-this.zpp_inner.ty,S=(v*this.zpp_inner.d-b*this.zpp_inner.b)*r,C=(b*this.zpp_inner.a-v*this.zpp_inner.c)*r;if(null==jn.poolVec2?w=new lt:(w=jn.poolVec2,jn.poolVec2=w.zpp_pool,w.zpp_pool=null),null==w.zpp_inner){var M;null==ep.zpp_pool?M=new ep:(M=ep.zpp_pool,ep.zpp_pool=M.next,M.next=null),M.weak=!1,M._immutable=!1,M.x=S,M.y=C,w.zpp_inner=M,w.zpp_inner.outer=w}else{var P,k=w.zpp_inner;if(null!=k._validate&&k._validate(),w.zpp_inner.x==S){var T=w.zpp_inner;null!=T._validate&&T._validate(),P=w.zpp_inner.y==C}else P=!1;if(!P){w.zpp_inner.x=S,w.zpp_inner.y=C;var A=w.zpp_inner;null!=A._invalidate&&A._invalidate(A)}}w.zpp_inner.weak=i,n=w}if(e.zpp_inner.weak){var O=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=O.outer&&(O.outer.zpp_inner=null,O.outer=null),O._isimmutable=null,O._validate=null,O._invalidate=null,O.next=ep.zpp_pool,ep.zpp_pool=O}return n},ne.prototype.toString=function(){return"{ a: "+this.zpp_inner.a+" b: "+this.zpp_inner.b+" c: "+this.zpp_inner.c+" d: "+this.zpp_inner.d+" tx: "+this.zpp_inner.tx+" ty: "+this.zpp_inner.ty+" }"},ne.prototype.equiorthogonal=function(){if(this.singular())return!1;var e=this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d;if(e*e<Qs.epsilon){var t=this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.b*this.zpp_inner.b-this.zpp_inner.c*this.zpp_inner.c-this.zpp_inner.d*this.zpp_inner.d;return t*t<Qs.epsilon}return!1},ne.prototype.orthogonal=function(){var e=this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d;if(e*e<Qs.epsilon){var t=this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.b*this.zpp_inner.b-1,i=this.zpp_inner.c*this.zpp_inner.c+this.zpp_inner.d*this.zpp_inner.d-1;return t*t<Qs.epsilon&&i*i<Qs.epsilon}return!1},ne.prototype.equiorthogonalise=function(){if(!this.equiorthogonal()){var e=Math.sqrt(this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.c*this.zpp_inner.c),t=Math.sqrt(this.zpp_inner.b*this.zpp_inner.b+this.zpp_inner.d*this.zpp_inner.d),i=(e+t)/2;e=i/e,t=i/t;this.zpp_inner.a=this.zpp_inner.a*e;var n=this.zpp_inner;null!=n._invalidate&&n._invalidate();this.zpp_inner.c=this.zpp_inner.c*e;var r=this.zpp_inner;null!=r._invalidate&&r._invalidate();this.zpp_inner.b=this.zpp_inner.b*t;var o=this.zpp_inner;null!=o._invalidate&&o._invalidate();this.zpp_inner.d=this.zpp_inner.d*t;var a=this.zpp_inner;null!=a._invalidate&&a._invalidate();var s=.25*Math.PI-.5*Math.acos((this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d)/(i*i));0<this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c&&(s=-s);var p=Math.sin(s),l=Math.cos(s),h=this.zpp_inner.a*l-this.zpp_inner.c*p,u=this.zpp_inner.b*l+this.zpp_inner.d*p;this.zpp_inner.c=this.zpp_inner.c*l+this.zpp_inner.a*p;var d=this.zpp_inner;null!=d._invalidate&&d._invalidate(),this.zpp_inner.a=h;var c=this.zpp_inner;null!=c._invalidate&&c._invalidate(),this.zpp_inner.d=this.zpp_inner.d*l-this.zpp_inner.b*p;var _=this.zpp_inner;null!=_._invalidate&&_._invalidate(),this.zpp_inner.b=u;var y=this.zpp_inner;null!=y._invalidate&&y._invalidate();var x=this.zpp_inner;null!=x._invalidate&&x._invalidate()}return this},ne.prototype.orthogonalise=function(){if(!this.orthogonal()){var e=Math.sqrt(this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.c*this.zpp_inner.c),t=Math.sqrt(this.zpp_inner.b*this.zpp_inner.b+this.zpp_inner.d*this.zpp_inner.d);e=1/e,t=1/t;this.zpp_inner.a=this.zpp_inner.a*e;var i=this.zpp_inner;null!=i._invalidate&&i._invalidate();this.zpp_inner.c=this.zpp_inner.c*e;var n=this.zpp_inner;null!=n._invalidate&&n._invalidate();this.zpp_inner.b=this.zpp_inner.b*t;var r=this.zpp_inner;null!=r._invalidate&&r._invalidate();this.zpp_inner.d=this.zpp_inner.d*t;var o=this.zpp_inner;null!=o._invalidate&&o._invalidate();var a=.25*Math.PI-.5*Math.acos((this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d)/1);0<this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c&&(a=-a);var s=Math.sin(a),p=Math.cos(a),l=this.zpp_inner.a*p-this.zpp_inner.c*s,h=this.zpp_inner.b*p+this.zpp_inner.d*s;this.zpp_inner.c=this.zpp_inner.c*p+this.zpp_inner.a*s;var u=this.zpp_inner;null!=u._invalidate&&u._invalidate(),this.zpp_inner.a=l;var d=this.zpp_inner;null!=d._invalidate&&d._invalidate(),this.zpp_inner.d=this.zpp_inner.d*p-this.zpp_inner.b*s;var c=this.zpp_inner;null!=c._invalidate&&c._invalidate(),this.zpp_inner.b=h;var _=this.zpp_inner;null!=_._invalidate&&_._invalidate();var y=this.zpp_inner;null!=y._invalidate&&y._invalidate()}return this},Object.defineProperty(ne.prototype,"a",{get:ne.prototype.get_a,set:ne.prototype.set_a}),Object.defineProperty(ne.prototype,"b",{get:ne.prototype.get_b,set:ne.prototype.set_b}),Object.defineProperty(ne.prototype,"c",{get:ne.prototype.get_c,set:ne.prototype.set_c}),Object.defineProperty(ne.prototype,"d",{get:ne.prototype.get_d,set:ne.prototype.set_d}),Object.defineProperty(ne.prototype,"tx",{get:ne.prototype.get_tx,set:ne.prototype.set_tx}),Object.defineProperty(ne.prototype,"ty",{get:ne.prototype.get_ty,set:ne.prototype.set_ty}),Object.defineProperty(ne.prototype,"determinant",{get:ne.prototype.get_determinant}),ne.prototype.__class__=ne;var q=nape.geom.MatMN=function(e,t){this.zpp_inner=null,this.zpp_inner=new kt(e,t),this.zpp_inner.outer=this};q.__name__=["nape","geom","MatMN"],q.prototype.zpp_inner=null,q.prototype.get_rows=function(){return this.zpp_inner.m},q.prototype.get_cols=function(){return this.zpp_inner.n},q.prototype.x=function(e,t){return this.zpp_inner.x[e*this.zpp_inner.n+t]},q.prototype.setx=function(e,t,i){return this.zpp_inner.x[e*this.zpp_inner.n+t]=i},q.prototype.toString=function(){for(var e="{ ",t=!0,i=0,n=this.zpp_inner.m;i<n;){var r=i++;t||(e+="; "),t=!1;for(var o=0,a=this.zpp_inner.n;o<a;)e+=this.zpp_inner.x[r*this.zpp_inner.n+o++]+" "}return e+="}"},q.prototype.transpose=function(){for(var e=new q(this.zpp_inner.n,this.zpp_inner.m),t=0,i=this.zpp_inner.m;t<i;)for(var n=t++,r=0,o=this.zpp_inner.n;r<o;){var a=r++;e.zpp_inner.x[a*e.zpp_inner.n+n]=this.zpp_inner.x[n*this.zpp_inner.n+a]}return e},q.prototype.mul=function(e){for(var t=new q(this.zpp_inner.m,e.zpp_inner.n),i=0,n=this.zpp_inner.m;i<n;)for(var r=i++,o=0,a=e.zpp_inner.n;o<a;){for(var s=o++,p=0,l=0,h=this.zpp_inner.n;l<h;){var u=l++;p+=this.zpp_inner.x[r*this.zpp_inner.n+u]*e.zpp_inner.x[u*e.zpp_inner.n+s]}t.zpp_inner.x[r*t.zpp_inner.n+s]=p}return t},Object.defineProperty(q.prototype,"rows",{get:q.prototype.get_rows}),Object.defineProperty(q.prototype,"cols",{get:q.prototype.get_cols}),q.prototype.__class__=q;var X=nape.geom.Ray=function(e,t){this.zpp_inner=null,this.zpp_inner=new Et;var i=this.zpp_inner.origin,n=e.zpp_inner;null!=n._validate&&n._validate();var r=e.zpp_inner.x,o=e.zpp_inner;null!=o._validate&&o._validate();var a,s=e.zpp_inner.y,p=i.zpp_inner;if(null!=p._validate&&p._validate(),i.zpp_inner.x==r){var l=i.zpp_inner;null!=l._validate&&l._validate(),a=i.zpp_inner.y==s}else a=!1;if(!a){i.zpp_inner.x=r,i.zpp_inner.y=s;var h=i.zpp_inner;null!=h._invalidate&&h._invalidate(h)}if(e.zpp_inner.weak){var u=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=u.outer&&(u.outer.zpp_inner=null,u.outer=null),u._isimmutable=null,u._validate=null,u._invalidate=null,u.next=ep.zpp_pool,ep.zpp_pool=u}var d=this.zpp_inner.direction,c=t.zpp_inner;null!=c._validate&&c._validate();var _=t.zpp_inner.x,y=t.zpp_inner;null!=y._validate&&y._validate();var x,m=t.zpp_inner.y,g=d.zpp_inner;if(null!=g._validate&&g._validate(),d.zpp_inner.x==_){var f=d.zpp_inner;null!=f._validate&&f._validate(),x=d.zpp_inner.y==m}else x=!1;if(!x){d.zpp_inner.x=_,d.zpp_inner.y=m;var v=d.zpp_inner;null!=v._invalidate&&v._invalidate(v)}if(t.zpp_inner.weak){var z=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=z.outer&&(z.outer.zpp_inner=null,z.outer=null),z._isimmutable=null,z._validate=null,z._invalidate=null,z.next=ep.zpp_pool,ep.zpp_pool=z}this.zpp_inner.zip_dir=!0,this.zpp_inner.maxdist=1/0};X.__name__=["nape","geom","Ray"],X.fromSegment=function(e,t){var i=new X(e,t.sub(e,!0)),n=e.zpp_inner;null!=n._validate&&n._validate();var r=e.zpp_inner.x,o=e.zpp_inner;null!=o._validate&&o._validate();var a=e.zpp_inner.y,s=t.zpp_inner;null!=s._validate&&s._validate();var p=t.zpp_inner.x,l=t.zpp_inner;null!=l._validate&&l._validate();var h,u;if(h=r-p,u=a-t.zpp_inner.y,i.zpp_inner.maxdist=Math.sqrt(h*h+u*u),e.zpp_inner.weak){var d=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=ep.zpp_pool,ep.zpp_pool=d}if(t.zpp_inner.weak){var c=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null),c._isimmutable=null,c._validate=null,c._invalidate=null,c.next=ep.zpp_pool,ep.zpp_pool=c}return i},X.prototype.zpp_inner=null,X.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},X.prototype.get_origin=function(){return this.zpp_inner.origin},X.prototype.set_origin=function(e){var t=this.zpp_inner.origin,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return this.zpp_inner.origin},X.prototype.get_direction=function(){return this.zpp_inner.direction},X.prototype.set_direction=function(e){var t=this.zpp_inner.direction,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return this.zpp_inner.zip_dir=!0,this.zpp_inner.direction},X.prototype.get_maxDistance=function(){return this.zpp_inner.maxdist},X.prototype.set_maxDistance=function(e){return this.zpp_inner.maxdist=e,this.zpp_inner.maxdist},X.prototype.aabb=function(){return this.zpp_inner.rayAABB().wrapper()},X.prototype.at=function(e,t){null==t&&(t=!1),this.zpp_inner.validate_dir();var i=this.zpp_inner.origin,n=i.zpp_inner;null!=n._validate&&n._validate();var r=i.zpp_inner.x+e*this.zpp_inner.dirx,o=this.zpp_inner.origin,a=o.zpp_inner;null!=a._validate&&a._validate();var s,p=o.zpp_inner.y+e*this.zpp_inner.diry;if(null==jn.poolVec2?s=new lt:(s=jn.poolVec2,jn.poolVec2=s.zpp_pool,s.zpp_pool=null),null==s.zpp_inner){var l;null==ep.zpp_pool?l=new ep:(l=ep.zpp_pool,ep.zpp_pool=l.next,l.next=null),l.weak=!1,l._immutable=!1,l.x=r,l.y=p,s.zpp_inner=l,s.zpp_inner.outer=s}else{var h,u=s.zpp_inner;if(null!=u._validate&&u._validate(),s.zpp_inner.x==r){var d=s.zpp_inner;null!=d._validate&&d._validate(),h=s.zpp_inner.y==p}else h=!1;if(!h){s.zpp_inner.x=r,s.zpp_inner.y=p;var c=s.zpp_inner;null!=c._invalidate&&c._invalidate(c)}}return s.zpp_inner.weak=t,s},X.prototype.copy=function(){var e=new X(this.zpp_inner.origin,this.zpp_inner.direction);return e.zpp_inner.maxdist=this.zpp_inner.maxdist,e},Object.defineProperty(X.prototype,"userData",{get:X.prototype.get_userData}),Object.defineProperty(X.prototype,"origin",{get:X.prototype.get_origin,set:X.prototype.set_origin}),Object.defineProperty(X.prototype,"direction",{get:X.prototype.get_direction,set:X.prototype.set_direction}),Object.defineProperty(X.prototype,"maxDistance",{get:X.prototype.get_maxDistance,set:X.prototype.set_maxDistance}),X.prototype.__class__=X;var Y=nape.geom.RayResult=function(){this.zpp_inner=null};Y.__name__=["nape","geom","RayResult"],Y.prototype.zpp_inner=null,Y.prototype.get_normal=function(){return this.zpp_inner.normal},Y.prototype.get_distance=function(){return this.zpp_inner.toiDistance},Y.prototype.get_inner=function(){return this.zpp_inner.inner},Y.prototype.get_shape=function(){return this.zpp_inner.shape},Y.prototype.dispose=function(){this.zpp_inner.free()},Y.prototype.toString=function(){return"{ shape: "+n.string(this.zpp_inner.shape)+" distance: "+this.zpp_inner.toiDistance+" ?inner: "+n.string(this.zpp_inner.inner)+" }"},Object.defineProperty(Y.prototype,"normal",{get:Y.prototype.get_normal}),Object.defineProperty(Y.prototype,"distance",{get:Y.prototype.get_distance}),Object.defineProperty(Y.prototype,"inner",{get:Y.prototype.get_inner}),Object.defineProperty(Y.prototype,"shape",{get:Y.prototype.get_shape}),Y.prototype.__class__=Y;var Je=nape.geom.RayResultIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};Je.__name__=["nape","geom","RayResultIterator"],Je.get=function(e){var t;if(null==Je.zpp_pool){En.internal=!0;var i=new Je;En.internal=!1,t=i}else{var n=Je.zpp_pool;Je.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},Je.prototype.zpp_inner=null,Je.prototype.zpp_i=null,Je.prototype.zpp_critical=null,Je.prototype.zpp_next=null,Je.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=Je.zpp_pool,(Je.zpp_pool=this).zpp_inner=null,!1)},Je.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},Je.prototype.__class__=Je;var K=nape.geom.RayResultList=function(){this.zpp_inner=null,this.zpp_inner=new En,this.zpp_inner.outer=this};K.__name__=["nape","geom","RayResultList"],K.fromArray=function(e){for(var t=new K,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},K.prototype.zpp_inner=null,K.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},K.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e)},K.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},K.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e);else{var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},K.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e)}else this.zpp_inner.inner.add(e);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},K.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=e=this.zpp_inner.inner.head.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var n=e=null==(i=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:i.next.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e},K.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var i=e=null==(t=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:t.next.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=e=this.zpp_inner.inner.head.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e},K.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},K.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e),this.zpp_inner.invalidate()),t},K.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},K.prototype.empty=function(){return null==this.zpp_inner.inner.head},K.prototype.iterator=function(){return this.zpp_inner.valmod(),Je.get(this)},K.prototype.copy=function(e){null==e&&(e=!1);var t=new K;this.zpp_inner.valmod();for(var i=Je.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=Je.zpp_pool,(Je.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},K.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=Je.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=Je.zpp_pool,(Je.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||(this.zpp_inner.reverse_flag?this.push(r):this.unshift(r))}},K.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=Je.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=Je.zpp_pool,(Je.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},K.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=Je.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=Je.zpp_pool,(Je.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=Je.zpp_pool,(Je.zpp_pool=t).zpp_inner=null;break}}return this},K.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(K.prototype,"length",{get:K.prototype.get_length}),K.prototype.__class__=K;var lt=nape.geom.Vec2=function(e,t){var i;null==t&&(t=0),null==e&&(e=0),this.zpp_pool=null,(this.zpp_inner=null)==ep.zpp_pool?i=new ep:(i=ep.zpp_pool,ep.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,this.zpp_inner=i,this.zpp_inner.outer=this};lt.__name__=["nape","geom","Vec2"],lt.weak=function(e,t){var i;if(null==t&&(t=0),null==e&&(e=0),null==jn.poolVec2?i=new lt:(i=jn.poolVec2,jn.poolVec2=i.zpp_pool,i.zpp_pool=null),null==i.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=e,n.y=t,i.zpp_inner=n,i.zpp_inner.outer=i}else{var r,o=i.zpp_inner;if(null!=o._validate&&o._validate(),i.zpp_inner.x==e){var a=i.zpp_inner;null!=a._validate&&a._validate(),r=i.zpp_inner.y==t}else r=!1;if(!r){i.zpp_inner.x=e,i.zpp_inner.y=t;var s=i.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}return i.zpp_inner.weak=!0,i},lt.get=function(e,t,i){var n;if(null==i&&(i=!1),null==t&&(t=0),null==e&&(e=0),null==jn.poolVec2?n=new lt:(n=jn.poolVec2,jn.poolVec2=n.zpp_pool,n.zpp_pool=null),null==n.zpp_inner){var r;null==ep.zpp_pool?r=new ep:(r=ep.zpp_pool,ep.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=e,r.y=t,n.zpp_inner=r,n.zpp_inner.outer=n}else{var o,a=n.zpp_inner;if(null!=a._validate&&a._validate(),n.zpp_inner.x==e){var s=n.zpp_inner;null!=s._validate&&s._validate(),o=n.zpp_inner.y==t}else o=!1;if(!o){n.zpp_inner.x=e,n.zpp_inner.y=t;var p=n.zpp_inner;null!=p._invalidate&&p._invalidate(p)}}return n.zpp_inner.weak=i,n},lt.fromPolar=function(e,t,i){null==i&&(i=!1);var n,r=e*Math.cos(t),o=e*Math.sin(t);if(null==jn.poolVec2?n=new lt:(n=jn.poolVec2,jn.poolVec2=n.zpp_pool,n.zpp_pool=null),null==n.zpp_inner){var a;null==ep.zpp_pool?a=new ep:(a=ep.zpp_pool,ep.zpp_pool=a.next,a.next=null),a.weak=!1,a._immutable=!1,a.x=r,a.y=o,n.zpp_inner=a,n.zpp_inner.outer=n}else{var s,p=n.zpp_inner;if(null!=p._validate&&p._validate(),n.zpp_inner.x==r){var l=n.zpp_inner;null!=l._validate&&l._validate(),s=n.zpp_inner.y==o}else s=!1;if(!s){n.zpp_inner.x=r,n.zpp_inner.y=o;var h=n.zpp_inner;null!=h._invalidate&&h._invalidate(h)}}return n.zpp_inner.weak=i,n},lt.dsq=function(e,t){var i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o=e.zpp_inner.y,a=t.zpp_inner;null!=a._validate&&a._validate();var s=t.zpp_inner.x,p=t.zpp_inner;null!=p._validate&&p._validate();var l,h,u=(l=n-s)*l+(h=o-t.zpp_inner.y)*h;if(e.zpp_inner.weak){var d=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=ep.zpp_pool,ep.zpp_pool=d}if(t.zpp_inner.weak){var c=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null),c._isimmutable=null,c._validate=null,c._invalidate=null,c.next=ep.zpp_pool,ep.zpp_pool=c}return u},lt.distance=function(e,t){var i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o=e.zpp_inner.y,a=t.zpp_inner;null!=a._validate&&a._validate();var s=t.zpp_inner.x,p=t.zpp_inner;null!=p._validate&&p._validate();var l,h;l=n-s,h=o-t.zpp_inner.y;var u=Math.sqrt(l*l+h*h);if(e.zpp_inner.weak){var d=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=ep.zpp_pool,ep.zpp_pool=d}if(t.zpp_inner.weak){var c=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null),c._isimmutable=null,c._validate=null,c._invalidate=null,c.next=ep.zpp_pool,ep.zpp_pool=c}return u},lt.prototype.zpp_inner=null,lt.prototype.zpp_pool=null,lt.prototype.dispose=function(){var e=this.zpp_inner;this.zpp_inner.outer=null,this.zpp_inner=null;this.zpp_pool=jn.poolVec2,jn.poolVec2=this,null!=e.outer&&(e.outer.zpp_inner=null,e.outer=null),e._isimmutable=null,e._validate=null,e._invalidate=null,e.next=ep.zpp_pool,ep.zpp_pool=e},lt.prototype.copy=function(e){null==e&&(e=!1);var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=this.zpp_inner;null!=n._validate&&n._validate();var r,o=this.zpp_inner.y;if(null==jn.poolVec2?r=new lt:(r=jn.poolVec2,jn.poolVec2=r.zpp_pool,r.zpp_pool=null),null==r.zpp_inner){var a;null==ep.zpp_pool?a=new ep:(a=ep.zpp_pool,ep.zpp_pool=a.next,a.next=null),a.weak=!1,a._immutable=!1,a.x=i,a.y=o,r.zpp_inner=a,r.zpp_inner.outer=r}else{var s,p=r.zpp_inner;if(null!=p._validate&&p._validate(),r.zpp_inner.x==i){var l=r.zpp_inner;null!=l._validate&&l._validate(),s=r.zpp_inner.y==o}else s=!1;if(!s){r.zpp_inner.x=i,r.zpp_inner.y=o;var h=r.zpp_inner;null!=h._invalidate&&h._invalidate(h)}}return r.zpp_inner.weak=e,r},lt.prototype.get_x=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.x},lt.prototype.set_x=function(e){var t=this.zpp_inner;if(null!=t._validate&&t._validate(),this.zpp_inner.x!=e){this.zpp_inner.x=e;var i=this.zpp_inner;null!=i._invalidate&&i._invalidate(i)}var n=this.zpp_inner;return null!=n._validate&&n._validate(),this.zpp_inner.x},lt.prototype.get_y=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.y},lt.prototype.set_y=function(e){var t=this.zpp_inner;if(null!=t._validate&&t._validate(),this.zpp_inner.y!=e){this.zpp_inner.y=e;var i=this.zpp_inner;null!=i._invalidate&&i._invalidate(i)}var n=this.zpp_inner;return null!=n._validate&&n._validate(),this.zpp_inner.y},lt.prototype.get_length=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t=this.zpp_inner.x,i=this.zpp_inner;null!=i._validate&&i._validate();var n=t*this.zpp_inner.x,r=this.zpp_inner;null!=r._validate&&r._validate();var o=this.zpp_inner.y,a=this.zpp_inner;return null!=a._validate&&a._validate(),Math.sqrt(n+o*this.zpp_inner.y)},lt.prototype.set_length=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=this.zpp_inner;null!=n._validate&&n._validate();var r=i*this.zpp_inner.x,o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.y,s=this.zpp_inner;null!=s._validate&&s._validate();var p=e/Math.sqrt(r+a*this.zpp_inner.y),l=this.zpp_inner;null!=l._validate&&l._validate();var h=this.zpp_inner.x*p,u=this.zpp_inner;if(null!=u._validate&&u._validate(),this.zpp_inner.x!=h){this.zpp_inner.x=h;var d=this.zpp_inner;null!=d._invalidate&&d._invalidate(d)}var c=this.zpp_inner;null!=c._validate&&c._validate();var _=this.zpp_inner;null!=_._validate&&_._validate();var y=this.zpp_inner.y*p,x=this.zpp_inner;if(null!=x._validate&&x._validate(),this.zpp_inner.y!=y){this.zpp_inner.y=y;var m=this.zpp_inner;null!=m._invalidate&&m._invalidate(m)}var g=this.zpp_inner;null!=g._validate&&g._validate();var f=this.zpp_inner;null!=f._invalidate&&f._invalidate(f);var v=this.zpp_inner;null!=v._validate&&v._validate();var z=this.zpp_inner.x,w=this.zpp_inner;null!=w._validate&&w._validate();var b=z*this.zpp_inner.x,S=this.zpp_inner;null!=S._validate&&S._validate();var C=this.zpp_inner.y,M=this.zpp_inner;return null!=M._validate&&M._validate(),Math.sqrt(b+C*this.zpp_inner.y)},lt.prototype.lsq=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t=this.zpp_inner.x,i=this.zpp_inner;null!=i._validate&&i._validate();var n=t*this.zpp_inner.x,r=this.zpp_inner;null!=r._validate&&r._validate();var o=this.zpp_inner.y,a=this.zpp_inner;return null!=a._validate&&a._validate(),n+o*this.zpp_inner.y},lt.prototype.set=function(e){var t=e.zpp_inner;null!=t._validate&&t._validate();var i=e.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate();var r,o=e.zpp_inner.y,a=this.zpp_inner;if(null!=a._validate&&a._validate(),this.zpp_inner.x==i){var s=this.zpp_inner;null!=s._validate&&s._validate(),r=this.zpp_inner.y==o}else r=!1;if(!r){this.zpp_inner.x=i,this.zpp_inner.y=o;var p=this.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var l=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=l.outer&&(l.outer.zpp_inner=null,l.outer=null),l._isimmutable=null,l._validate=null,l._invalidate=null,l.next=ep.zpp_pool,ep.zpp_pool=l}return this},lt.prototype.setxy=function(e,t){var i,n=this.zpp_inner;if(null!=n._validate&&n._validate(),this.zpp_inner.x==e){var r=this.zpp_inner;null!=r._validate&&r._validate(),i=this.zpp_inner.y==t}else i=!1;if(!i){this.zpp_inner.x=e,this.zpp_inner.y=t;var o=this.zpp_inner;null!=o._invalidate&&o._invalidate(o)}return this},lt.prototype.get_angle=function(){var e,t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=this.zpp_inner;if(null!=n._validate&&n._validate(),i==this.zpp_inner.y){var r=this.zpp_inner;null!=r._validate&&r._validate(),e=0==this.zpp_inner.x}else e=!1;if(e)return 0;var o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.y,s=this.zpp_inner;return null!=s._validate&&s._validate(),Math.atan2(a,this.zpp_inner.x)},lt.prototype.set_angle=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=this.zpp_inner;null!=n._validate&&n._validate();var r=i*this.zpp_inner.x,o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.y,s=this.zpp_inner;null!=s._validate&&s._validate();var p,l,h=Math.sqrt(r+a*this.zpp_inner.y),u=h*Math.cos(e),d=h*Math.sin(e),c=this.zpp_inner;if(null!=c._validate&&c._validate(),this.zpp_inner.x==u){var _=this.zpp_inner;null!=_._validate&&_._validate(),p=this.zpp_inner.y==d}else p=!1;if(!p){this.zpp_inner.x=u,this.zpp_inner.y=d;var y=this.zpp_inner;null!=y._invalidate&&y._invalidate(y)}var x=this.zpp_inner;null!=x._validate&&x._validate();var m=this.zpp_inner.x,g=this.zpp_inner;if(null!=g._validate&&g._validate(),m==this.zpp_inner.y){var f=this.zpp_inner;null!=f._validate&&f._validate(),l=0==this.zpp_inner.x}else l=!1;if(l)return 0;var v=this.zpp_inner;null!=v._validate&&v._validate();var z=this.zpp_inner.y,w=this.zpp_inner;return null!=w._validate&&w._validate(),Math.atan2(z,this.zpp_inner.x)},lt.prototype.rotate=function(e){if(e%(2*Math.PI)!=0){var t=Math.sin(e),i=Math.cos(e),n=i*this.zpp_inner.x-t*this.zpp_inner.y;this.zpp_inner.y=this.zpp_inner.x*t+this.zpp_inner.y*i,this.zpp_inner.x=n;var r=this.zpp_inner;null!=r._invalidate&&r._invalidate(r)}return this},lt.prototype.reflect=function(e,t){null==t&&(t=!1);var i=this.zpp_inner;null!=i._validate&&i._validate();var n=this.zpp_inner.x,r=this.zpp_inner;null!=r._validate&&r._validate();var o,a=this.zpp_inner.y;if(null==jn.poolVec2?o=new lt:(o=jn.poolVec2,jn.poolVec2=o.zpp_pool,o.zpp_pool=null),null==o.zpp_inner){var s;null==ep.zpp_pool?s=new ep:(s=ep.zpp_pool,ep.zpp_pool=s.next,s.next=null),s.weak=!1,s._immutable=!1,s.x=n,s.y=a,o.zpp_inner=s,o.zpp_inner.outer=o}else{var p,l=o.zpp_inner;if(null!=l._validate&&l._validate(),o.zpp_inner.x==n){var h=o.zpp_inner;null!=h._validate&&h._validate(),p=o.zpp_inner.y==a}else p=!1;if(!p){o.zpp_inner.x=n,o.zpp_inner.y=a;var u=o.zpp_inner;null!=u._invalidate&&u._invalidate(u)}}o.zpp_inner.weak=!0;var d=o.normalise(),c=e.sub(d.muleq(2*d.dot(e)),t);if(e.zpp_inner.weak){var _=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=_.outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=ep.zpp_pool,ep.zpp_pool=_}return c},lt.prototype.normalise=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t=this.zpp_inner.x,i=this.zpp_inner;null!=i._validate&&i._validate();var n=t*this.zpp_inner.x,r=this.zpp_inner;null!=r._validate&&r._validate();var o=this.zpp_inner.y,a=this.zpp_inner;null!=a._validate&&a._validate();var s=1/Math.sqrt(n+o*this.zpp_inner.y),p=this.zpp_inner;null!=p._validate&&p._validate();var l=this.zpp_inner.x*s,h=this.zpp_inner;if(null!=h._validate&&h._validate(),this.zpp_inner.x!=l){this.zpp_inner.x=l;var u=this.zpp_inner;null!=u._invalidate&&u._invalidate(u)}var d=this.zpp_inner;null!=d._validate&&d._validate();var c=this.zpp_inner;null!=c._validate&&c._validate();var _=this.zpp_inner.y*s,y=this.zpp_inner;if(null!=y._validate&&y._validate(),this.zpp_inner.y!=_){this.zpp_inner.y=_;var x=this.zpp_inner;null!=x._invalidate&&x._invalidate(x)}var m=this.zpp_inner;null!=m._validate&&m._validate();var g=this.zpp_inner;return null!=g._invalidate&&g._invalidate(g),this},lt.prototype.unit=function(e){null==e&&(e=!1);var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=this.zpp_inner;null!=n._validate&&n._validate();var r=i*this.zpp_inner.x,o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.y,s=this.zpp_inner;null!=s._validate&&s._validate();var p=1/Math.sqrt(r+a*this.zpp_inner.y),l=this.zpp_inner;null!=l._validate&&l._validate();var h=this.zpp_inner.x*p,u=this.zpp_inner;null!=u._validate&&u._validate();var d,c=this.zpp_inner.y*p;if(null==jn.poolVec2?d=new lt:(d=jn.poolVec2,jn.poolVec2=d.zpp_pool,d.zpp_pool=null),null==d.zpp_inner){var _;null==ep.zpp_pool?_=new ep:(_=ep.zpp_pool,ep.zpp_pool=_.next,_.next=null),_.weak=!1,_._immutable=!1,_.x=h,_.y=c,d.zpp_inner=_,d.zpp_inner.outer=d}else{var y,x=d.zpp_inner;if(null!=x._validate&&x._validate(),d.zpp_inner.x==h){var m=d.zpp_inner;null!=m._validate&&m._validate(),y=d.zpp_inner.y==c}else y=!1;if(!y){d.zpp_inner.x=h,d.zpp_inner.y=c;var g=d.zpp_inner;null!=g._invalidate&&g._invalidate(g)}}return d.zpp_inner.weak=e,d},lt.prototype.add=function(e,t){null==t&&(t=!1);var i=this.zpp_inner;null!=i._validate&&i._validate();var n=this.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o=n+e.zpp_inner.x,a=this.zpp_inner;null!=a._validate&&a._validate();var s=this.zpp_inner.y,p=e.zpp_inner;null!=p._validate&&p._validate();var l,h=s+e.zpp_inner.y;if(null==jn.poolVec2?l=new lt:(l=jn.poolVec2,jn.poolVec2=l.zpp_pool,l.zpp_pool=null),null==l.zpp_inner){var u;null==ep.zpp_pool?u=new ep:(u=ep.zpp_pool,ep.zpp_pool=u.next,u.next=null),u.weak=!1,u._immutable=!1,u.x=o,u.y=h,l.zpp_inner=u,l.zpp_inner.outer=l}else{var d,c=l.zpp_inner;if(null!=c._validate&&c._validate(),l.zpp_inner.x==o){var _=l.zpp_inner;null!=_._validate&&_._validate(),d=l.zpp_inner.y==h}else d=!1;if(!d){l.zpp_inner.x=o,l.zpp_inner.y=h;var y=l.zpp_inner;null!=y._invalidate&&y._invalidate(y)}}l.zpp_inner.weak=t;var x=l;if(e.zpp_inner.weak){var m=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=m.outer&&(m.outer.zpp_inner=null,m.outer=null),m._isimmutable=null,m._validate=null,m._invalidate=null,m.next=ep.zpp_pool,ep.zpp_pool=m}return x},lt.prototype.addMul=function(e,t,i){null==i&&(i=!1);var n=this.zpp_inner;null!=n._validate&&n._validate();var r=this.zpp_inner.x,o=e.zpp_inner;null!=o._validate&&o._validate();var a=r+e.zpp_inner.x*t,s=this.zpp_inner;null!=s._validate&&s._validate();var p=this.zpp_inner.y,l=e.zpp_inner;null!=l._validate&&l._validate();var h,u=p+e.zpp_inner.y*t;if(null==jn.poolVec2?h=new lt:(h=jn.poolVec2,jn.poolVec2=h.zpp_pool,h.zpp_pool=null),null==h.zpp_inner){var d;null==ep.zpp_pool?d=new ep:(d=ep.zpp_pool,ep.zpp_pool=d.next,d.next=null),d.weak=!1,d._immutable=!1,d.x=a,d.y=u,h.zpp_inner=d,h.zpp_inner.outer=h}else{var c,_=h.zpp_inner;if(null!=_._validate&&_._validate(),h.zpp_inner.x==a){var y=h.zpp_inner;null!=y._validate&&y._validate(),c=h.zpp_inner.y==u}else c=!1;if(!c){h.zpp_inner.x=a,h.zpp_inner.y=u;var x=h.zpp_inner;null!=x._invalidate&&x._invalidate(x)}}h.zpp_inner.weak=i;var m=h;if(e.zpp_inner.weak){var g=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=g.outer&&(g.outer.zpp_inner=null,g.outer=null),g._isimmutable=null,g._validate=null,g._invalidate=null,g.next=ep.zpp_pool,ep.zpp_pool=g}return m},lt.prototype.sub=function(e,t){null==t&&(t=!1);var i=this.zpp_inner;null!=i._validate&&i._validate();var n=this.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o=n-e.zpp_inner.x,a=this.zpp_inner;null!=a._validate&&a._validate();var s=this.zpp_inner.y,p=e.zpp_inner;null!=p._validate&&p._validate();var l,h=s-e.zpp_inner.y;if(null==jn.poolVec2?l=new lt:(l=jn.poolVec2,jn.poolVec2=l.zpp_pool,l.zpp_pool=null),null==l.zpp_inner){var u;null==ep.zpp_pool?u=new ep:(u=ep.zpp_pool,ep.zpp_pool=u.next,u.next=null),u.weak=!1,u._immutable=!1,u.x=o,u.y=h,l.zpp_inner=u,l.zpp_inner.outer=l}else{var d,c=l.zpp_inner;if(null!=c._validate&&c._validate(),l.zpp_inner.x==o){var _=l.zpp_inner;null!=_._validate&&_._validate(),d=l.zpp_inner.y==h}else d=!1;if(!d){l.zpp_inner.x=o,l.zpp_inner.y=h;var y=l.zpp_inner;null!=y._invalidate&&y._invalidate(y)}}l.zpp_inner.weak=t;var x=l;if(e.zpp_inner.weak){var m=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=m.outer&&(m.outer.zpp_inner=null,m.outer=null),m._isimmutable=null,m._validate=null,m._invalidate=null,m.next=ep.zpp_pool,ep.zpp_pool=m}return x},lt.prototype.mul=function(e,t){null==t&&(t=!1);var i=this.zpp_inner;null!=i._validate&&i._validate();var n=this.zpp_inner.x*e,r=this.zpp_inner;null!=r._validate&&r._validate();var o,a=this.zpp_inner.y*e;if(null==jn.poolVec2?o=new lt:(o=jn.poolVec2,jn.poolVec2=o.zpp_pool,o.zpp_pool=null),null==o.zpp_inner){var s;null==ep.zpp_pool?s=new ep:(s=ep.zpp_pool,ep.zpp_pool=s.next,s.next=null),s.weak=!1,s._immutable=!1,s.x=n,s.y=a,o.zpp_inner=s,o.zpp_inner.outer=o}else{var p,l=o.zpp_inner;if(null!=l._validate&&l._validate(),o.zpp_inner.x==n){var h=o.zpp_inner;null!=h._validate&&h._validate(),p=o.zpp_inner.y==a}else p=!1;if(!p){o.zpp_inner.x=n,o.zpp_inner.y=a;var u=o.zpp_inner;null!=u._invalidate&&u._invalidate(u)}}return o.zpp_inner.weak=t,o},lt.prototype.addeq=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate();var r=i+e.zpp_inner.x,o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.y,s=e.zpp_inner;null!=s._validate&&s._validate();var p,l=a+e.zpp_inner.y,h=this.zpp_inner;if(null!=h._validate&&h._validate(),this.zpp_inner.x==r){var u=this.zpp_inner;null!=u._validate&&u._validate(),p=this.zpp_inner.y==l}else p=!1;if(!p){this.zpp_inner.x=r,this.zpp_inner.y=l;var d=this.zpp_inner;null!=d._invalidate&&d._invalidate(d)}if(e.zpp_inner.weak){var c=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null),c._isimmutable=null,c._validate=null,c._invalidate=null,c.next=ep.zpp_pool,ep.zpp_pool=c}return this},lt.prototype.subeq=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate();var r=i-e.zpp_inner.x,o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.y,s=e.zpp_inner;null!=s._validate&&s._validate();var p,l=a-e.zpp_inner.y,h=this.zpp_inner;if(null!=h._validate&&h._validate(),this.zpp_inner.x==r){var u=this.zpp_inner;null!=u._validate&&u._validate(),p=this.zpp_inner.y==l}else p=!1;if(!p){this.zpp_inner.x=r,this.zpp_inner.y=l;var d=this.zpp_inner;null!=d._invalidate&&d._invalidate(d)}if(e.zpp_inner.weak){var c=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null),c._isimmutable=null,c._validate=null,c._invalidate=null,c.next=ep.zpp_pool,ep.zpp_pool=c}return this},lt.prototype.muleq=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x*e,n=this.zpp_inner;null!=n._validate&&n._validate();var r,o=this.zpp_inner.y*e,a=this.zpp_inner;if(null!=a._validate&&a._validate(),this.zpp_inner.x==i){var s=this.zpp_inner;null!=s._validate&&s._validate(),r=this.zpp_inner.y==o}else r=!1;if(!r){this.zpp_inner.x=i,this.zpp_inner.y=o;var p=this.zpp_inner;null!=p._invalidate&&p._invalidate(p)}return this},lt.prototype.dot=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate();var r=i*e.zpp_inner.x,o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.y,s=e.zpp_inner;null!=s._validate&&s._validate();var p=r+a*e.zpp_inner.y;if(e.zpp_inner.weak){var l=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=l.outer&&(l.outer.zpp_inner=null,l.outer=null),l._isimmutable=null,l._validate=null,l._invalidate=null,l.next=ep.zpp_pool,ep.zpp_pool=l}return p},lt.prototype.cross=function(e){var t=e.zpp_inner;null!=t._validate&&t._validate();var i=e.zpp_inner.y,n=this.zpp_inner;null!=n._validate&&n._validate();var r=i*this.zpp_inner.x,o=e.zpp_inner;null!=o._validate&&o._validate();var a=e.zpp_inner.x,s=this.zpp_inner;null!=s._validate&&s._validate();var p=r-a*this.zpp_inner.y;if(e.zpp_inner.weak){var l=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=l.outer&&(l.outer.zpp_inner=null,l.outer=null),l._isimmutable=null,l._validate=null,l._invalidate=null,l.next=ep.zpp_pool,ep.zpp_pool=l}return p},lt.prototype.perp=function(e){null==e&&(e=!1);var t=this.zpp_inner;null!=t._validate&&t._validate();var i=-this.zpp_inner.y,n=this.zpp_inner;null!=n._validate&&n._validate();var r,o=this.zpp_inner.x;if(null==jn.poolVec2?r=new lt:(r=jn.poolVec2,jn.poolVec2=r.zpp_pool,r.zpp_pool=null),null==r.zpp_inner){var a;null==ep.zpp_pool?a=new ep:(a=ep.zpp_pool,ep.zpp_pool=a.next,a.next=null),a.weak=!1,a._immutable=!1,a.x=i,a.y=o,r.zpp_inner=a,r.zpp_inner.outer=r}else{var s,p=r.zpp_inner;if(null!=p._validate&&p._validate(),r.zpp_inner.x==i){var l=r.zpp_inner;null!=l._validate&&l._validate(),s=r.zpp_inner.y==o}else s=!1;if(!s){r.zpp_inner.x=i,r.zpp_inner.y=o;var h=r.zpp_inner;null!=h._invalidate&&h._invalidate(h)}}return r.zpp_inner.weak=e,r},lt.prototype.toString=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.toString()},Object.defineProperty(lt.prototype,"x",{get:lt.prototype.get_x,set:lt.prototype.set_x}),Object.defineProperty(lt.prototype,"y",{get:lt.prototype.get_y,set:lt.prototype.set_y}),Object.defineProperty(lt.prototype,"length",{get:lt.prototype.get_length,set:lt.prototype.set_length}),Object.defineProperty(lt.prototype,"angle",{get:lt.prototype.get_angle,set:lt.prototype.set_angle}),lt.prototype.__class__=lt;var Qe=nape.geom.Vec2Iterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};Qe.__name__=["nape","geom","Vec2Iterator"],Qe.get=function(e){var t;if(null==Qe.zpp_pool){An.internal=!0;var i=new Qe;An.internal=!1,t=i}else{var n=Qe.zpp_pool;Qe.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},Qe.prototype.zpp_inner=null,Qe.prototype.zpp_i=null,Qe.prototype.zpp_critical=null,Qe.prototype.zpp_next=null,Qe.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner.zpp_gl();return this.zpp_critical=!0,this.zpp_i<e||(this.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=this).zpp_inner=null,!1)},Qe.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},Qe.prototype.__class__=Qe;var ve=nape.geom.Vec2List=function(){this.zpp_inner=null,this.zpp_inner=new An,this.zpp_inner.outer=this};ve.__name__=["nape","geom","Vec2List"],ve.fromArray=function(e){for(var t=new ve,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},ve.prototype.zpp_inner=null,ve.prototype.get_length=function(){return this.zpp_gl()},ve.prototype.zpp_gl=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},ve.prototype.zpp_vm=function(){this.zpp_inner.valmod()},ve.prototype.has=function(e){return this.zpp_vm(),this.zpp_inner.inner.has(e.zpp_inner)},ve.prototype.at=function(e){if(this.zpp_vm(),this.zpp_inner.reverse_flag&&(e=this.zpp_gl()-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;var t=this.zpp_inner.at_ite.elt;if(null==t.outer){t.outer=new lt;var i=t.outer.zpp_inner;null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=ep.zpp_pool,ep.zpp_pool=i,t.outer.zpp_inner=t}return t.outer},ve.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_vm();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);return t&&(this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(e.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)),t},ve.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_vm();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);return t&&(this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)):this.zpp_inner.inner.add(e.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)),t},ve.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_vm();var e=null;if(this.zpp_inner.reverse_flag){if(null==(e=this.zpp_inner.inner.head.elt).outer){e.outer=new lt;var t=e.outer.zpp_inner;null!=t.outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=ep.zpp_pool,ep.zpp_pool=t,e.outer.zpp_inner=e}var i=e.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var n=1==this.zpp_gl()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-2);if(null==(e=null==n?this.zpp_inner.inner.head.elt:n.next.elt).outer){e.outer=new lt;var r=e.outer.zpp_inner;null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=ep.zpp_pool,ep.zpp_pool=r,e.outer.zpp_inner=e}var o=e.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(o),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(n)}if(this.zpp_inner.invalidate(),null==e.outer){e.outer=new lt;var a=e.outer.zpp_inner;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=ep.zpp_pool,ep.zpp_pool=a,e.outer.zpp_inner=e}return e.outer},ve.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_vm();var e=null;if(this.zpp_inner.reverse_flag){null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var t=1==this.zpp_gl()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-2);if(null==(e=null==t?this.zpp_inner.inner.head.elt:t.next.elt).outer){e.outer=new lt;var i=e.outer.zpp_inner;null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=ep.zpp_pool,ep.zpp_pool=i,e.outer.zpp_inner=e}var n=e.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{if(null==(e=this.zpp_inner.inner.head.elt).outer){e.outer=new lt;var r=e.outer.zpp_inner;null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=ep.zpp_pool,ep.zpp_pool=r,e.outer.zpp_inner=e}var o=e.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(o),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}if(this.zpp_inner.invalidate(),null==e.outer){e.outer=new lt;var a=e.outer.zpp_inner;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=ep.zpp_pool,ep.zpp_pool=a,e.outer.zpp_inner=e}return e.outer},ve.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},ve.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_vm(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},ve.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;!this.empty();)this.pop();else for(;!this.empty();)this.shift()},ve.prototype.empty=function(){return 0==this.zpp_gl()},ve.prototype.iterator=function(){return this.zpp_vm(),Qe.get(this)},ve.prototype.copy=function(e){null==e&&(e=!1);for(var t=new ve,i=this.iterator();;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner.zpp_gl();if(i.zpp_critical=!0,!(i.zpp_i<n||(i.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var r,o=i.zpp_inner.at(i.zpp_i++);if(e){var a=o.zpp_inner;null!=a._validate&&a._validate();var s=o.zpp_inner.x,p=o.zpp_inner;null!=p._validate&&p._validate();var l,h=o.zpp_inner.y;if(null==jn.poolVec2?l=new lt:(l=jn.poolVec2,jn.poolVec2=l.zpp_pool,l.zpp_pool=null),null==l.zpp_inner){var u;null==ep.zpp_pool?u=new ep:(u=ep.zpp_pool,ep.zpp_pool=u.next,u.next=null),u.weak=!1,u._immutable=!1,u.x=s,u.y=h,l.zpp_inner=u,l.zpp_inner.outer=l}else{var d,c=l.zpp_inner;if(null!=c._validate&&c._validate(),l.zpp_inner.x==s){var _=l.zpp_inner;null!=_._validate&&_._validate(),d=l.zpp_inner.y==h}else d=!1;if(!d){l.zpp_inner.x=s,l.zpp_inner.y=h;var y=l.zpp_inner;null!=y._invalidate&&y._invalidate(y)}}l.zpp_inner.weak=!1,r=l}else r=o;t.push(r)}return t},ve.prototype.merge=function(e){for(var t=e.iterator();;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner.zpp_gl();if(t.zpp_critical=!0,!(t.zpp_i<i||(t.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var n=t.zpp_inner.at(t.zpp_i++);this.has(n)||this.add(n)}},ve.prototype.toString=function(){for(var e="[",t=!0,i=this.iterator();;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner.zpp_gl();if(i.zpp_critical=!0,!(i.zpp_i<n||(i.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var r=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==r?"NULL":r.toString(),t=!1}return e+"]"},ve.prototype.foreach=function(e){for(var t=this.iterator();;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner.zpp_gl();if(t.zpp_critical=!0,!(t.zpp_i<i||(t.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=t).zpp_inner=null;break}}return this},ve.prototype.filter=function(e){for(var t=0;t<this.zpp_gl();){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(ve.prototype,"length",{get:ve.prototype.get_length}),ve.prototype.__class__=ve;var Z=nape.geom.Vec3=function(e,t,i){null==i&&(i=0),null==t&&(t=0),null==e&&(e=0),this.zpp_pool=null,this.zpp_inner=null,this.zpp_inner=new Wt,(this.zpp_inner.outer=this).zpp_inner.x=e;var n=this.zpp_inner;null!=n._validate&&n._validate(),this.zpp_inner.y=t;var r=this.zpp_inner;null!=r._validate&&r._validate(),this.zpp_inner.z=i;var o=this.zpp_inner;null!=o._validate&&o._validate()};Z.__name__=["nape","geom","Vec3"],Z.get=function(e,t,i){var n;return null==i&&(i=0),null==t&&(t=0),null==e&&(e=0),null==jn.poolVec3?n=new Z:(n=jn.poolVec3,jn.poolVec3=n.zpp_pool,n.zpp_pool=null),n.setxyz(e,t,i),n.zpp_inner.immutable=!1,n.zpp_inner._validate=null,n},Z.prototype.zpp_inner=null,Z.prototype.zpp_pool=null,Z.prototype.get_x=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.x},Z.prototype.set_x=function(e){this.zpp_inner.x=e;var t=this.zpp_inner;return null!=t._validate&&t._validate(),this.zpp_inner.x},Z.prototype.get_y=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.y},Z.prototype.set_y=function(e){this.zpp_inner.y=e;var t=this.zpp_inner;return null!=t._validate&&t._validate(),this.zpp_inner.y},Z.prototype.get_z=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.z},Z.prototype.set_z=function(e){this.zpp_inner.z=e;var t=this.zpp_inner;return null!=t._validate&&t._validate(),this.zpp_inner.z},Z.prototype.dispose=function(){this.zpp_pool=jn.poolVec3,jn.poolVec3=this},Z.prototype.get_length=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t=this.zpp_inner.x,i=this.zpp_inner;null!=i._validate&&i._validate();var n=t*this.zpp_inner.x,r=this.zpp_inner;null!=r._validate&&r._validate();var o=this.zpp_inner.y,a=this.zpp_inner;null!=a._validate&&a._validate();var s=n+o*this.zpp_inner.y,p=this.zpp_inner;null!=p._validate&&p._validate();var l=this.zpp_inner.z,h=this.zpp_inner;return null!=h._validate&&h._validate(),Math.sqrt(s+l*this.zpp_inner.z)},Z.prototype.set_length=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=this.zpp_inner;null!=n._validate&&n._validate();var r=i*this.zpp_inner.x,o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.y,s=this.zpp_inner;null!=s._validate&&s._validate();var p=r+a*this.zpp_inner.y,l=this.zpp_inner;null!=l._validate&&l._validate();var h=this.zpp_inner.z,u=this.zpp_inner;null!=u._validate&&u._validate();var d=e/Math.sqrt(p+h*this.zpp_inner.z),c=this.zpp_inner;null!=c._validate&&c._validate(),this.zpp_inner.x=this.zpp_inner.x*d;var _=this.zpp_inner;null!=_._validate&&_._validate();var y=this.zpp_inner;null!=y._validate&&y._validate(),this.zpp_inner.y=this.zpp_inner.y*d;var x=this.zpp_inner;null!=x._validate&&x._validate();var m=this.zpp_inner;null!=m._validate&&m._validate(),this.zpp_inner.z=this.zpp_inner.z*d;var g=this.zpp_inner;null!=g._validate&&g._validate();var f=this.zpp_inner;null!=f._validate&&f._validate();var v=this.zpp_inner.x,z=this.zpp_inner;null!=z._validate&&z._validate();var w=v*this.zpp_inner.x,b=this.zpp_inner;null!=b._validate&&b._validate();var S=this.zpp_inner.y,C=this.zpp_inner;null!=C._validate&&C._validate();var M=w+S*this.zpp_inner.y,P=this.zpp_inner;null!=P._validate&&P._validate();var k=this.zpp_inner.z,T=this.zpp_inner;return null!=T._validate&&T._validate(),Math.sqrt(M+k*this.zpp_inner.z)},Z.prototype.lsq=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t=this.zpp_inner.x,i=this.zpp_inner;null!=i._validate&&i._validate();var n=t*this.zpp_inner.x,r=this.zpp_inner;null!=r._validate&&r._validate();var o=this.zpp_inner.y,a=this.zpp_inner;null!=a._validate&&a._validate();var s=n+o*this.zpp_inner.y,p=this.zpp_inner;null!=p._validate&&p._validate();var l=this.zpp_inner.z,h=this.zpp_inner;return null!=h._validate&&h._validate(),s+l*this.zpp_inner.z},Z.prototype.set=function(e){var t=e.zpp_inner;null!=t._validate&&t._validate();var i=e.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate();var r=e.zpp_inner.y,o=e.zpp_inner;return null!=o._validate&&o._validate(),this.setxyz(i,r,e.zpp_inner.z)},Z.prototype.setxyz=function(e,t,i){this.zpp_inner.x=e;var n=this.zpp_inner;null!=n._validate&&n._validate(),this.zpp_inner.y=t;var r=this.zpp_inner;null!=r._validate&&r._validate(),this.zpp_inner.z=i;var o=this.zpp_inner;return null!=o._validate&&o._validate(),this},Z.prototype.xy=function(e){null==e&&(e=!1);var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=this.zpp_inner;null!=n._validate&&n._validate();var r,o=this.zpp_inner.y;if(null==jn.poolVec2?r=new lt:(r=jn.poolVec2,jn.poolVec2=r.zpp_pool,r.zpp_pool=null),null==r.zpp_inner){var a;null==ep.zpp_pool?a=new ep:(a=ep.zpp_pool,ep.zpp_pool=a.next,a.next=null),a.weak=!1,a._immutable=!1,a.x=i,a.y=o,r.zpp_inner=a,r.zpp_inner.outer=r}else{var s,p=r.zpp_inner;if(null!=p._validate&&p._validate(),r.zpp_inner.x==i){var l=r.zpp_inner;null!=l._validate&&l._validate(),s=r.zpp_inner.y==o}else s=!1;if(!s){r.zpp_inner.x=i,r.zpp_inner.y=o;var h=r.zpp_inner;null!=h._invalidate&&h._invalidate(h)}}return r.zpp_inner.weak=e,r},Z.prototype.toString=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t="{ x: "+this.zpp_inner.x+" y: ",i=this.zpp_inner;null!=i._validate&&i._validate();var n=t+this.zpp_inner.y+" z: ",r=this.zpp_inner;return null!=r._validate&&r._validate(),n+this.zpp_inner.z+" }"},Object.defineProperty(Z.prototype,"x",{get:Z.prototype.get_x,set:Z.prototype.set_x}),Object.defineProperty(Z.prototype,"y",{get:Z.prototype.get_y,set:Z.prototype.set_y}),Object.defineProperty(Z.prototype,"z",{get:Z.prototype.get_z,set:Z.prototype.set_z}),Object.defineProperty(Z.prototype,"length",{get:Z.prototype.get_length,set:Z.prototype.set_length}),Z.prototype.__class__=Z;var J=nape.geom.Winding=function(){};J.__name__=["nape","geom","Winding"],J.UNDEFINED=null,J.get_UNDEFINED=function(){return null==Uo.Winding_UNDEFINED&&(Uo.internal=!0,Uo.Winding_UNDEFINED=new J,Uo.internal=!1),Uo.Winding_UNDEFINED},J.CLOCKWISE=null,J.get_CLOCKWISE=function(){return null==Uo.Winding_CLOCKWISE&&(Uo.internal=!0,Uo.Winding_CLOCKWISE=new J,Uo.internal=!1),Uo.Winding_CLOCKWISE},J.ANTICLOCKWISE=null,J.get_ANTICLOCKWISE=function(){return null==Uo.Winding_ANTICLOCKWISE&&(Uo.internal=!0,Uo.Winding_ANTICLOCKWISE=new J,Uo.internal=!1),Uo.Winding_ANTICLOCKWISE},J.prototype.toString=function(){return null==Uo.Winding_UNDEFINED&&(Uo.internal=!0,Uo.Winding_UNDEFINED=new J,Uo.internal=!1),this==Uo.Winding_UNDEFINED?"UNDEFINED":(null==Uo.Winding_CLOCKWISE&&(Uo.internal=!0,Uo.Winding_CLOCKWISE=new J,Uo.internal=!1),this==Uo.Winding_CLOCKWISE?"CLOCKWISE":(null==Uo.Winding_ANTICLOCKWISE&&(Uo.internal=!0,Uo.Winding_ANTICLOCKWISE=new J,Uo.internal=!1),this==Uo.Winding_ANTICLOCKWISE?"ANTICLOCKWISE":""))},Object.defineProperty(J,"UNDEFINED",{get:J.get_UNDEFINED}),Object.defineProperty(J,"CLOCKWISE",{get:J.get_CLOCKWISE}),Object.defineProperty(J,"ANTICLOCKWISE",{get:J.get_ANTICLOCKWISE}),J.prototype.__class__=J;var Q=nape.phys.Interactor=function(){this.zpp_inner_i=null};Q.__name__=["nape","phys","Interactor"],Q.prototype.zpp_inner_i=null,Q.prototype.get_id=function(){return this.zpp_inner_i.id},Q.prototype.get_userData=function(){return null==this.zpp_inner_i.userData&&(this.zpp_inner_i.userData={}),this.zpp_inner_i.userData},Q.prototype.isShape=function(){return null!=this.zpp_inner_i.ishape},Q.prototype.isBody=function(){return null!=this.zpp_inner_i.ibody},Q.prototype.isCompound=function(){return null!=this.zpp_inner_i.icompound},Q.prototype.get_castShape=function(){return null!=this.zpp_inner_i.ishape?this.zpp_inner_i.ishape.outer:null},Q.prototype.get_castBody=function(){return null!=this.zpp_inner_i.ibody?this.zpp_inner_i.ibody.outer:null},Q.prototype.get_castCompound=function(){return null!=this.zpp_inner_i.icompound?this.zpp_inner_i.icompound.outer:null},Q.prototype.get_group=function(){return null==this.zpp_inner_i.group?null:this.zpp_inner_i.group.outer},Q.prototype.set_group=function(e){return this.zpp_inner_i.immutable_midstep("Interactor::group"),this.zpp_inner_i.setGroup(null==e?null:e.zpp_inner),null==this.zpp_inner_i.group?null:this.zpp_inner_i.group.outer},Q.prototype.get_cbTypes=function(){return null==this.zpp_inner_i.wrap_cbTypes&&this.zpp_inner_i.setupcbTypes(),this.zpp_inner_i.wrap_cbTypes},Q.prototype.toString=function(){return""},Object.defineProperty(Q.prototype,"id",{get:Q.prototype.get_id}),Object.defineProperty(Q.prototype,"userData",{get:Q.prototype.get_userData}),Object.defineProperty(Q.prototype,"castShape",{get:Q.prototype.get_castShape}),Object.defineProperty(Q.prototype,"castBody",{get:Q.prototype.get_castBody}),Object.defineProperty(Q.prototype,"castCompound",{get:Q.prototype.get_castCompound}),Object.defineProperty(Q.prototype,"group",{get:Q.prototype.get_group,set:Q.prototype.set_group}),Object.defineProperty(Q.prototype,"cbTypes",{get:Q.prototype.get_cbTypes}),Q.prototype.__class__=Q;var re=nape.phys.Body=function(e,t){if(this.debugDraw=!0,this.zpp_inner=null,Q.call(this),this.zpp_inner=new Xt,((this.zpp_inner.outer=this).zpp_inner.outer_i=this).zpp_inner_i=this.zpp_inner,null!=t){var i=t.zpp_inner;null!=i._validate&&i._validate(),this.zpp_inner.posx=t.zpp_inner.x;var n=t.zpp_inner;null!=n._validate&&n._validate(),this.zpp_inner.posy=t.zpp_inner.y}else this.zpp_inner.posx=0,this.zpp_inner.posy=0;var r,o;(r=null==e?(null==Uo.BodyType_DYNAMIC&&(Uo.internal=!0,Uo.BodyType_DYNAMIC=new oe,Uo.internal=!1),Uo.BodyType_DYNAMIC):e,this.zpp_inner.immutable_midstep("Body::type"),Xt.types[this.zpp_inner.type]!=r)&&(null==Uo.BodyType_DYNAMIC&&(Uo.internal=!0,Uo.BodyType_DYNAMIC=new oe,Uo.internal=!1),1==(o=r==Uo.BodyType_DYNAMIC?2:(null==Uo.BodyType_KINEMATIC&&(Uo.internal=!0,Uo.BodyType_KINEMATIC=new oe,Uo.internal=!1),r==Uo.BodyType_KINEMATIC?3:1))&&null!=this.zpp_inner.space&&(this.zpp_inner.velx=0,this.zpp_inner.vely=0,this.zpp_inner.angvel=0),this.zpp_inner.invalidate_type(),null!=this.zpp_inner.space?this.zpp_inner.space.transmitType(this.zpp_inner,o):this.zpp_inner.type=o);if(null!=t&&t.zpp_inner.weak){var a=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=ep.zpp_pool,ep.zpp_pool=a}this.zpp_inner_i.insert_cbtype(Ie.ANY_BODY.zpp_inner)};re.__name__=["nape","phys","Body"],re.__super__=Q,re.prototype=Object.create(Q.prototype),re.prototype.zpp_inner=null,re.prototype.debugDraw=null,re.prototype.get_type=function(){return Xt.types[this.zpp_inner.type]},re.prototype.set_type=function(e){var t;(this.zpp_inner.immutable_midstep("Body::type"),Xt.types[this.zpp_inner.type]!=e)&&(null==Uo.BodyType_DYNAMIC&&(Uo.internal=!0,Uo.BodyType_DYNAMIC=new oe,Uo.internal=!1),1==(t=e==Uo.BodyType_DYNAMIC?2:(null==Uo.BodyType_KINEMATIC&&(Uo.internal=!0,Uo.BodyType_KINEMATIC=new oe,Uo.internal=!1),e==Uo.BodyType_KINEMATIC?3:1))&&null!=this.zpp_inner.space&&(this.zpp_inner.velx=0,this.zpp_inner.vely=0,this.zpp_inner.angvel=0),this.zpp_inner.invalidate_type(),null!=this.zpp_inner.space?this.zpp_inner.space.transmitType(this.zpp_inner,t):this.zpp_inner.type=t);return Xt.types[this.zpp_inner.type]},re.prototype.get_isBullet=function(){return this.zpp_inner.bulletEnabled},re.prototype.set_isBullet=function(e){return this.zpp_inner.bulletEnabled=e,this.zpp_inner.bulletEnabled},re.prototype.get_disableCCD=function(){return this.zpp_inner.disableCCD},re.prototype.set_disableCCD=function(e){return this.zpp_inner.disableCCD=e,this.zpp_inner.disableCCD},re.prototype.integrate=function(e){if(this.zpp_inner.immutable_midstep("Body::space"),0==e)return this;var t=this.zpp_inner;t.sweepTime=0,t.sweep_angvel=t.angvel;var i=e-t.sweepTime;if(0!=i&&(t.sweepTime=e,t.posx+=t.velx*i,t.posy+=t.vely*i,0!=t.angvel)){var n=t.sweep_angvel*i;if(t.rot+=n,1e-4<n*n)t.axisx=Math.sin(t.rot),t.axisy=Math.cos(t.rot);else{var r=n*n,o=1-.5*r,a=1-r*r/8,s=(o*t.axisx+n*t.axisy)*a;t.axisy=(o*t.axisy-n*t.axisx)*a,t.axisx=s}}for(var p=t.shapes.head;null!=p;){var l=p.elt;1==l.type&&(l.polygon.invalidate_gverts(),l.polygon.invalidate_gaxi()),l.invalidate_worldCOM(),p=p.next}t.zip_worldCOM=!0,t.zip_axis=!0;for(var h=t.shapes.head;null!=h;){var u=h.elt;1==u.type&&(u.polygon.invalidate_gverts(),u.polygon.invalidate_gaxi()),u.invalidate_worldCOM(),h=h.next}return t.zip_worldCOM=!0,t.sweepTime=0,this},re.prototype.isStatic=function(){return 1==this.zpp_inner.type},re.prototype.isDynamic=function(){return 2==this.zpp_inner.type},re.prototype.isKinematic=function(){return 3==this.zpp_inner.type},re.prototype.get_shapes=function(){return this.zpp_inner.wrap_shapes},re.prototype.get_compound=function(){return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},re.prototype.set_compound=function(e){if((null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)!=e&&(null!=(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)&&(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer).zpp_inner.wrap_bodies.remove(this),null!=e)){var t=e.zpp_inner.wrap_bodies;t.zpp_inner.reverse_flag?t.push(this):t.unshift(this)}return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},re.prototype.get_space=function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},re.prototype.set_space=function(e){if(this.zpp_inner.immutable_midstep("Body::space"),(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)!=e&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.component.woken=!1),null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(null==this.zpp_inner.space?null:this.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(this),null!=e)){var t=e.zpp_inner.wrap_bodies;t.zpp_inner.reverse_flag?t.push(this):t.unshift(this)}return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},re.prototype.get_arbiters=function(){return null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Bn.get(this.zpp_inner.arbiters,!0)),this.zpp_inner.wrap_arbiters},re.prototype.get_isSleeping=function(){return this.zpp_inner.component.sleeping},re.prototype.get_constraints=function(){return null==this.zpp_inner.wrap_constraints&&(this.zpp_inner.wrap_constraints=mn.get(this.zpp_inner.constraints,!0)),this.zpp_inner.wrap_constraints},re.prototype.copy=function(){return this.zpp_inner.copy()},re.prototype.get_position=function(){return null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition(),this.zpp_inner.wrap_pos},re.prototype.set_position=function(e){null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();var t=this.zpp_inner.wrap_pos,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition(),this.zpp_inner.wrap_pos},re.prototype.get_velocity=function(){return null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity(),this.zpp_inner.wrap_vel},re.prototype.set_velocity=function(e){null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();var t=this.zpp_inner.wrap_vel,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity(),this.zpp_inner.wrap_vel},re.prototype.setVelocityFromTarget=function(e,t,i){var n=1/i;null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();var r=this.zpp_inner.wrap_vel;null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();var o=e.sub(this.zpp_inner.wrap_pos,!0).muleq(n),a=o.zpp_inner;null!=a._validate&&a._validate();var s=o.zpp_inner.x,p=o.zpp_inner;null!=p._validate&&p._validate();var l,h=o.zpp_inner.y,u=r.zpp_inner;if(null!=u._validate&&u._validate(),r.zpp_inner.x==s){var d=r.zpp_inner;null!=d._validate&&d._validate(),l=r.zpp_inner.y==h}else l=!1;if(!l){r.zpp_inner.x=s,r.zpp_inner.y=h;var c=r.zpp_inner;null!=c._invalidate&&c._invalidate(c)}if(o.zpp_inner.weak){var _=o.zpp_inner;o.zpp_inner.outer=null,o.zpp_inner=null,o.zpp_pool=jn.poolVec2,jn.poolVec2=o,null!=_.outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=ep.zpp_pool,ep.zpp_pool=_}var y=(t-this.zpp_inner.rot)*n;if(this.zpp_inner.angvel!=y&&(this.zpp_inner.angvel=y,this.zpp_inner.wake()),e.zpp_inner.weak){var x=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=x.outer&&(x.outer.zpp_inner=null,x.outer=null),x._isimmutable=null,x._validate=null,x._invalidate=null,x.next=ep.zpp_pool,ep.zpp_pool=x}return this},re.prototype.get_kinematicVel=function(){return null==this.zpp_inner.wrap_kinvel&&this.zpp_inner.setupkinvel(),this.zpp_inner.wrap_kinvel},re.prototype.set_kinematicVel=function(e){null==this.zpp_inner.wrap_kinvel&&this.zpp_inner.setupkinvel();var t=this.zpp_inner.wrap_kinvel,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner.wrap_kinvel&&this.zpp_inner.setupkinvel(),this.zpp_inner.wrap_kinvel},re.prototype.get_surfaceVel=function(){return null==this.zpp_inner.wrap_svel&&this.zpp_inner.setupsvel(),this.zpp_inner.wrap_svel},re.prototype.set_surfaceVel=function(e){null==this.zpp_inner.wrap_svel&&this.zpp_inner.setupsvel();var t=this.zpp_inner.wrap_svel,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner.wrap_svel&&this.zpp_inner.setupsvel(),this.zpp_inner.wrap_svel},re.prototype.get_force=function(){return null==this.zpp_inner.wrap_force&&this.zpp_inner.setupForce(),this.zpp_inner.wrap_force},re.prototype.set_force=function(e){null==this.zpp_inner.wrap_force&&this.zpp_inner.setupForce();var t=this.zpp_inner.wrap_force,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner.wrap_force&&this.zpp_inner.setupForce(),this.zpp_inner.wrap_force},re.prototype.get_constraintVelocity=function(){return null==this.zpp_inner.wrapcvel&&this.zpp_inner.setup_cvel(),this.zpp_inner.wrapcvel},re.prototype.get_rotation=function(){return this.zpp_inner.rot},re.prototype.set_rotation=function(e){if(this.zpp_inner.immutable_midstep("Body::rotation"),this.zpp_inner.rot!=e){this.zpp_inner.rot=e;var t=this.zpp_inner;t.zip_axis=!0;for(var i=t.shapes.head;null!=i;){var n=i.elt;1==n.type&&(n.polygon.invalidate_gverts(),n.polygon.invalidate_gaxi()),n.invalidate_worldCOM(),i=i.next}t.zip_worldCOM=!0,this.zpp_inner.wake()}return this.zpp_inner.rot},re.prototype.get_angularVel=function(){return this.zpp_inner.angvel},re.prototype.set_angularVel=function(e){return this.zpp_inner.angvel!=e&&(this.zpp_inner.angvel=e,this.zpp_inner.wake()),this.zpp_inner.angvel},re.prototype.get_kinAngVel=function(){return this.zpp_inner.kinangvel},re.prototype.set_kinAngVel=function(e){return this.zpp_inner.kinangvel!=e&&(this.zpp_inner.kinangvel=e,this.zpp_inner.wake()),this.zpp_inner.kinangvel},re.prototype.get_torque=function(){return this.zpp_inner.torque},re.prototype.set_torque=function(e){return this.zpp_inner.torque!=e&&(this.zpp_inner.torque=e,this.zpp_inner.wake()),this.zpp_inner.torque},re.prototype.get_bounds=function(){return this.zpp_inner.aabb.wrapper()},re.prototype.get_allowMovement=function(){return!this.zpp_inner.nomove},re.prototype.set_allowMovement=function(e){return this.zpp_inner.immutable_midstep("Body::"+(null==e?"null":""+e)),!this.zpp_inner.nomove!=e&&(this.zpp_inner.nomove=!e,this.zpp_inner.invalidate_mass()),!this.zpp_inner.nomove},re.prototype.get_allowRotation=function(){return!this.zpp_inner.norotate},re.prototype.set_allowRotation=function(e){return this.zpp_inner.immutable_midstep("Body::"+(null==e?"null":""+e)),!this.zpp_inner.norotate!=e&&(this.zpp_inner.norotate=!e,this.zpp_inner.invalidate_inertia()),!this.zpp_inner.norotate},re.prototype.get_massMode=function(){null==Uo.MassMode_DEFAULT&&(Uo.internal=!0,Uo.MassMode_DEFAULT=new ue,Uo.internal=!1);var e=Uo.MassMode_DEFAULT;return null==Uo.MassMode_FIXED&&(Uo.internal=!0,Uo.MassMode_FIXED=new ue,Uo.internal=!1),[e,Uo.MassMode_FIXED][this.zpp_inner.massMode]},re.prototype.set_massMode=function(e){var t;this.zpp_inner.immutable_midstep("Body::massMode"),null==Uo.MassMode_DEFAULT&&(Uo.internal=!0,Uo.MassMode_DEFAULT=new ue,Uo.internal=!1),t=e==Uo.MassMode_DEFAULT?0:1,this.zpp_inner.massMode=t,this.zpp_inner.invalidate_mass(),null==Uo.MassMode_DEFAULT&&(Uo.internal=!0,Uo.MassMode_DEFAULT=new ue,Uo.internal=!1);var i=Uo.MassMode_DEFAULT;return null==Uo.MassMode_FIXED&&(Uo.internal=!0,Uo.MassMode_FIXED=new ue,Uo.internal=!1),[i,Uo.MassMode_FIXED][this.zpp_inner.massMode]},re.prototype.get_constraintMass=function(){return this.zpp_inner.world||this.zpp_inner.validate_mass(),this.zpp_inner.smass},re.prototype.get_mass=function(){return this.zpp_inner.validate_mass(),this.zpp_inner.cmass},re.prototype.set_mass=function(e){return this.zpp_inner.immutable_midstep("Body::mass"),this.zpp_inner.massMode=1,this.zpp_inner.cmass=e,this.zpp_inner.invalidate_mass(),this.zpp_inner.validate_mass(),this.zpp_inner.cmass},re.prototype.get_gravMassMode=function(){null==Uo.GravMassMode_DEFAULT&&(Uo.internal=!0,Uo.GravMassMode_DEFAULT=new pe,Uo.internal=!1);var e=Uo.GravMassMode_DEFAULT;null==Uo.GravMassMode_FIXED&&(Uo.internal=!0,Uo.GravMassMode_FIXED=new pe,Uo.internal=!1);var t=Uo.GravMassMode_FIXED;return null==Uo.GravMassMode_SCALED&&(Uo.internal=!0,Uo.GravMassMode_SCALED=new pe,Uo.internal=!1),[e,t,Uo.GravMassMode_SCALED][this.zpp_inner.massMode]},re.prototype.set_gravMassMode=function(e){var t;this.zpp_inner.immutable_midstep("Body::gravMassMode"),null==Uo.GravMassMode_SCALED&&(Uo.internal=!0,Uo.GravMassMode_SCALED=new pe,Uo.internal=!1),t=e==Uo.GravMassMode_SCALED?2:(null==Uo.GravMassMode_DEFAULT&&(Uo.internal=!0,Uo.GravMassMode_DEFAULT=new pe,Uo.internal=!1),e==Uo.GravMassMode_DEFAULT?0:1),this.zpp_inner.gravMassMode=t,this.zpp_inner.invalidate_gravMass(),null==Uo.GravMassMode_DEFAULT&&(Uo.internal=!0,Uo.GravMassMode_DEFAULT=new pe,Uo.internal=!1);var i=Uo.GravMassMode_DEFAULT;null==Uo.GravMassMode_FIXED&&(Uo.internal=!0,Uo.GravMassMode_FIXED=new pe,Uo.internal=!1);var n=Uo.GravMassMode_FIXED;return null==Uo.GravMassMode_SCALED&&(Uo.internal=!0,Uo.GravMassMode_SCALED=new pe,Uo.internal=!1),[i,n,Uo.GravMassMode_SCALED][this.zpp_inner.massMode]},re.prototype.get_gravMass=function(){return this.zpp_inner.validate_gravMass(),this.zpp_inner.gravMass},re.prototype.set_gravMass=function(e){return this.zpp_inner.immutable_midstep("Body::gravMass"),this.zpp_inner.gravMassMode=1,this.zpp_inner.gravMass=e,this.zpp_inner.invalidate_gravMass(),this.zpp_inner.validate_gravMass(),this.zpp_inner.gravMass},re.prototype.get_gravMassScale=function(){return this.zpp_inner.validate_gravMassScale(),this.zpp_inner.gravMassScale},re.prototype.set_gravMassScale=function(e){return this.zpp_inner.immutable_midstep("Body::gravMassScale"),this.zpp_inner.gravMassMode=2,this.zpp_inner.gravMassScale=e,this.zpp_inner.invalidate_gravMassScale(),this.zpp_inner.validate_gravMassScale(),this.zpp_inner.gravMassScale},re.prototype.get_inertiaMode=function(){null==Uo.InertiaMode_DEFAULT&&(Uo.internal=!0,Uo.InertiaMode_DEFAULT=new le,Uo.internal=!1);var e=Uo.InertiaMode_DEFAULT;return null==Uo.InertiaMode_FIXED&&(Uo.internal=!0,Uo.InertiaMode_FIXED=new le,Uo.internal=!1),[e,Uo.InertiaMode_FIXED][this.zpp_inner.inertiaMode]},re.prototype.set_inertiaMode=function(e){var t;this.zpp_inner.immutable_midstep("Body::inertiaMode"),null==Uo.InertiaMode_FIXED&&(Uo.internal=!0,Uo.InertiaMode_FIXED=new le,Uo.internal=!1),t=e==Uo.InertiaMode_FIXED?1:0,this.zpp_inner.inertiaMode=t,this.zpp_inner.invalidate_inertia(),null==Uo.InertiaMode_DEFAULT&&(Uo.internal=!0,Uo.InertiaMode_DEFAULT=new le,Uo.internal=!1);var i=Uo.InertiaMode_DEFAULT;return null==Uo.InertiaMode_FIXED&&(Uo.internal=!0,Uo.InertiaMode_FIXED=new le,Uo.internal=!1),[i,Uo.InertiaMode_FIXED][this.zpp_inner.inertiaMode]},re.prototype.get_constraintInertia=function(){return this.zpp_inner.world||this.zpp_inner.validate_inertia(),this.zpp_inner.sinertia},re.prototype.get_inertia=function(){return this.zpp_inner.validate_inertia(),this.zpp_inner.cinertia},re.prototype.set_inertia=function(e){return this.zpp_inner.immutable_midstep("Body::inertia"),this.zpp_inner.inertiaMode=1,this.zpp_inner.cinertia=e,this.zpp_inner.invalidate_inertia(),this.zpp_inner.validate_inertia(),this.zpp_inner.cinertia},re.prototype.connectedBodies=function(e,t){return null==e&&(e=-1),this.zpp_inner.connectedBodies(e,t)},re.prototype.interactingBodies=function(e,t,i){var n;return null==t&&(t=-1),n=null==e?ln.COL|ln.SENSOR|ln.FLUID:(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),e==Uo.InteractionType_COLLISION?ln.COL:(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),e==Uo.InteractionType_SENSOR?ln.SENSOR:ln.FLUID)),this.zpp_inner.interactingBodies(n,t,i)},re.prototype.crushFactor=function(){var e,t=0;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var i;null==ep.zpp_pool?i=new ep:(i=ep.zpp_pool,ep.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=0,i.y=0,e.zpp_inner=i,e.zpp_inner.outer=e}else{var n,r=e.zpp_inner;if(null!=r._validate&&r._validate(),0==e.zpp_inner.x){var o=e.zpp_inner;null!=o._validate&&o._validate(),n=0==e.zpp_inner.y}else n=!1;if(!n){e.zpp_inner.x=0,e.zpp_inner.y=0;var a=e.zpp_inner;null!=a._invalidate&&a._invalidate(a)}}e.zpp_inner.weak=!1;var s=e;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Bn.get(this.zpp_inner.arbiters,!0));for(var p=this.zpp_inner.wrap_arbiters.iterator();;){p.zpp_inner.zpp_inner.valmod();var l=p.zpp_inner.zpp_gl();if(p.zpp_critical=!0,!(p.zpp_i<l||(p.zpp_next=qe.zpp_pool,(qe.zpp_pool=p).zpp_inner=null,!1)))break;p.zpp_critical=!1;var h=p.zpp_inner.at(p.zpp_i++).totalImpulse(this),u=h.xy();s.addeq(u);var d=u.zpp_inner;null!=d._validate&&d._validate();var c=u.zpp_inner.x,_=u.zpp_inner;null!=_._validate&&_._validate();var y=c*u.zpp_inner.x,x=u.zpp_inner;null!=x._validate&&x._validate();var m=u.zpp_inner.y,g=u.zpp_inner;null!=g._validate&&g._validate(),t+=Math.sqrt(y+m*u.zpp_inner.y);var f=u.zpp_inner;u.zpp_inner.outer=null,u.zpp_inner=null,u.zpp_pool=jn.poolVec2,jn.poolVec2=u,null!=f.outer&&(f.outer.zpp_inner=null,f.outer=null),f._isimmutable=null,f._validate=null,f._invalidate=null,f.next=ep.zpp_pool,ep.zpp_pool=f,h.dispose()}null==this.zpp_inner.wrap_constraints&&(this.zpp_inner.wrap_constraints=mn.get(this.zpp_inner.constraints,!0));var v=this.zpp_inner.wrap_constraints;v.zpp_inner.valmod();for(var z=We.get(v);;){z.zpp_inner.zpp_inner.valmod();var w=z.zpp_inner;w.zpp_inner.valmod(),w.zpp_inner.zip_length&&(w.zpp_inner.zip_length=!1,w.zpp_inner.user_length=w.zpp_inner.inner.length);var b=w.zpp_inner.user_length;if(z.zpp_critical=!0,!(z.zpp_i<b||(z.zpp_next=We.zpp_pool,(We.zpp_pool=z).zpp_inner=null,!1)))break;z.zpp_critical=!1;var S=z.zpp_inner.at(z.zpp_i++).bodyImpulse(this),C=S.xy();s.addeq(C);var M=C.zpp_inner;null!=M._validate&&M._validate();var P=C.zpp_inner.x,k=C.zpp_inner;null!=k._validate&&k._validate();var T=P*C.zpp_inner.x,A=C.zpp_inner;null!=A._validate&&A._validate();var O=C.zpp_inner.y,E=C.zpp_inner;null!=E._validate&&E._validate(),t+=Math.sqrt(T+O*C.zpp_inner.y);var G=C.zpp_inner;C.zpp_inner.outer=null,C.zpp_inner=null,C.zpp_pool=jn.poolVec2,jn.poolVec2=C,null!=G.outer&&(G.outer.zpp_inner=null,G.outer=null),G._isimmutable=null,G._validate=null,G._invalidate=null,G.next=ep.zpp_pool,ep.zpp_pool=G,S.dispose()}var D=s.zpp_inner;null!=D._validate&&D._validate();var I=s.zpp_inner.x,L=s.zpp_inner;null!=L._validate&&L._validate();var B=I*s.zpp_inner.x,R=s.zpp_inner;null!=R._validate&&R._validate();var F=s.zpp_inner.y,j=s.zpp_inner;null!=j._validate&&j._validate();var N=t-Math.sqrt(B+F*s.zpp_inner.y);this.zpp_inner.validate_mass();var U=N/(this.zpp_inner.cmass*(null==this.zpp_inner.space?null:this.zpp_inner.space.outer).zpp_inner.pre_dt),V=s.zpp_inner;return s.zpp_inner.outer=null,s.zpp_inner=null,s.zpp_pool=jn.poolVec2,jn.poolVec2=s,null!=V.outer&&(V.outer.zpp_inner=null,V.outer=null),V._isimmutable=null,V._validate=null,V._invalidate=null,V.next=ep.zpp_pool,ep.zpp_pool=V,U},re.prototype.localPointToWorld=function(e,t){null==t&&(t=!1);var i=this.zpp_inner;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));var n,r,o=e.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.axisy*e.zpp_inner.x,s=e.zpp_inner;null!=s._validate&&s._validate(),n=a-this.zpp_inner.axisx*e.zpp_inner.y;var p=e.zpp_inner;null!=p._validate&&p._validate();var l=e.zpp_inner.x*this.zpp_inner.axisx,h=e.zpp_inner;if(null!=h._validate&&h._validate(),r=l+e.zpp_inner.y*this.zpp_inner.axisy,e.zpp_inner.weak){var u=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=u.outer&&(u.outer.zpp_inner=null,u.outer=null),u._isimmutable=null,u._validate=null,u._invalidate=null,u.next=ep.zpp_pool,ep.zpp_pool=u}var d,c=n+this.zpp_inner.posx,_=r+this.zpp_inner.posy;if(null==jn.poolVec2?d=new lt:(d=jn.poolVec2,jn.poolVec2=d.zpp_pool,d.zpp_pool=null),null==d.zpp_inner){var y;null==ep.zpp_pool?y=new ep:(y=ep.zpp_pool,ep.zpp_pool=y.next,y.next=null),y.weak=!1,y._immutable=!1,y.x=c,y.y=_,d.zpp_inner=y,d.zpp_inner.outer=d}else{var x,m=d.zpp_inner;if(null!=m._validate&&m._validate(),d.zpp_inner.x==c){var g=d.zpp_inner;null!=g._validate&&g._validate(),x=d.zpp_inner.y==_}else x=!1;if(!x){d.zpp_inner.x=c,d.zpp_inner.y=_;var f=d.zpp_inner;null!=f._invalidate&&f._invalidate(f)}}return d.zpp_inner.weak=t,d},re.prototype.worldPointToLocal=function(e,t){null==t&&(t=!1);var i=this.zpp_inner;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));var n,r,o,a,s=e.zpp_inner;null!=s._validate&&s._validate(),o=e.zpp_inner.x-this.zpp_inner.posx;var p,l=e.zpp_inner;if(null!=l._validate&&l._validate(),a=e.zpp_inner.y-this.zpp_inner.posy,n=o*this.zpp_inner.axisy+a*this.zpp_inner.axisx,r=a*this.zpp_inner.axisy-o*this.zpp_inner.axisx,e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}if(null==jn.poolVec2?p=new lt:(p=jn.poolVec2,jn.poolVec2=p.zpp_pool,p.zpp_pool=null),null==p.zpp_inner){var u;null==ep.zpp_pool?u=new ep:(u=ep.zpp_pool,ep.zpp_pool=u.next,u.next=null),u.weak=!1,u._immutable=!1,u.x=n,u.y=r,p.zpp_inner=u,p.zpp_inner.outer=p}else{var d,c=p.zpp_inner;if(null!=c._validate&&c._validate(),p.zpp_inner.x==n){var _=p.zpp_inner;null!=_._validate&&_._validate(),d=p.zpp_inner.y==r}else d=!1;if(!d){p.zpp_inner.x=n,p.zpp_inner.y=r;var y=p.zpp_inner;null!=y._invalidate&&y._invalidate(y)}}return p.zpp_inner.weak=t,p},re.prototype.localVectorToWorld=function(e,t){null==t&&(t=!1);var i=this.zpp_inner;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));var n,r,o=e.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.axisy*e.zpp_inner.x,s=e.zpp_inner;null!=s._validate&&s._validate(),n=a-this.zpp_inner.axisx*e.zpp_inner.y;var p=e.zpp_inner;null!=p._validate&&p._validate();var l,h=e.zpp_inner.x*this.zpp_inner.axisx,u=e.zpp_inner;if(null!=u._validate&&u._validate(),r=h+e.zpp_inner.y*this.zpp_inner.axisy,e.zpp_inner.weak){var d=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=ep.zpp_pool,ep.zpp_pool=d}if(null==jn.poolVec2?l=new lt:(l=jn.poolVec2,jn.poolVec2=l.zpp_pool,l.zpp_pool=null),null==l.zpp_inner){var c;null==ep.zpp_pool?c=new ep:(c=ep.zpp_pool,ep.zpp_pool=c.next,c.next=null),c.weak=!1,c._immutable=!1,c.x=n,c.y=r,l.zpp_inner=c,l.zpp_inner.outer=l}else{var _,y=l.zpp_inner;if(null!=y._validate&&y._validate(),l.zpp_inner.x==n){var x=l.zpp_inner;null!=x._validate&&x._validate(),_=l.zpp_inner.y==r}else _=!1;if(!_){l.zpp_inner.x=n,l.zpp_inner.y=r;var m=l.zpp_inner;null!=m._invalidate&&m._invalidate(m)}}return l.zpp_inner.weak=t,l},re.prototype.worldVectorToLocal=function(e,t){null==t&&(t=!1);var i=this.zpp_inner;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));var n,r,o=e.zpp_inner;null!=o._validate&&o._validate();var a=e.zpp_inner.x*this.zpp_inner.axisy,s=e.zpp_inner;null!=s._validate&&s._validate(),n=a+e.zpp_inner.y*this.zpp_inner.axisx;var p=e.zpp_inner;null!=p._validate&&p._validate();var l,h=e.zpp_inner.y*this.zpp_inner.axisy,u=e.zpp_inner;if(null!=u._validate&&u._validate(),r=h-e.zpp_inner.x*this.zpp_inner.axisx,e.zpp_inner.weak){var d=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=ep.zpp_pool,ep.zpp_pool=d}if(null==jn.poolVec2?l=new lt:(l=jn.poolVec2,jn.poolVec2=l.zpp_pool,l.zpp_pool=null),null==l.zpp_inner){var c;null==ep.zpp_pool?c=new ep:(c=ep.zpp_pool,ep.zpp_pool=c.next,c.next=null),c.weak=!1,c._immutable=!1,c.x=n,c.y=r,l.zpp_inner=c,l.zpp_inner.outer=l}else{var _,y=l.zpp_inner;if(null!=y._validate&&y._validate(),l.zpp_inner.x==n){var x=l.zpp_inner;null!=x._validate&&x._validate(),_=l.zpp_inner.y==r}else _=!1;if(!_){l.zpp_inner.x=n,l.zpp_inner.y=r;var m=l.zpp_inner;null!=m._invalidate&&m._invalidate(m)}}return l.zpp_inner.weak=t,l},re.prototype.applyImpulse=function(e,t,i){if(null==i&&(i=!1),i&&this.zpp_inner.component.sleeping){if(e.zpp_inner.weak){var n=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n._isimmutable=null,n._validate=null,n._invalidate=null,n.next=ep.zpp_pool,ep.zpp_pool=n}if(null!=t&&t.zpp_inner.weak){var r=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=ep.zpp_pool,ep.zpp_pool=r}return this}this.zpp_inner.validate_mass();var o=this.zpp_inner.imass,a=e.zpp_inner;null!=a._validate&&a._validate(),this.zpp_inner.velx+=e.zpp_inner.x*o;var s=e.zpp_inner;if(null!=s._validate&&s._validate(),this.zpp_inner.vely+=e.zpp_inner.y*o,null!=t){var p,l,h=t.zpp_inner;null!=h._validate&&h._validate(),p=t.zpp_inner.x-this.zpp_inner.posx;var u=t.zpp_inner;null!=u._validate&&u._validate(),l=t.zpp_inner.y-this.zpp_inner.posy,this.zpp_inner.validate_inertia();var d=e.zpp_inner;null!=d._validate&&d._validate();var c=e.zpp_inner.y*p,_=e.zpp_inner;if(null!=_._validate&&_._validate(),this.zpp_inner.angvel+=(c-e.zpp_inner.x*l)*this.zpp_inner.iinertia,t.zpp_inner.weak){var y=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=y.outer&&(y.outer.zpp_inner=null,y.outer=null),y._isimmutable=null,y._validate=null,y._invalidate=null,y.next=ep.zpp_pool,ep.zpp_pool=y}}if(i||2==this.zpp_inner.type&&this.zpp_inner.wake(),e.zpp_inner.weak){var x=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=x.outer&&(x.outer.zpp_inner=null,x.outer=null),x._isimmutable=null,x._validate=null,x._invalidate=null,x.next=ep.zpp_pool,ep.zpp_pool=x}return this},re.prototype.applyAngularImpulse=function(e,t){return null==t&&(t=!1),t&&this.zpp_inner.component.sleeping||(this.zpp_inner.validate_inertia(),this.zpp_inner.angvel+=e*this.zpp_inner.iinertia,t||2==this.zpp_inner.type&&this.zpp_inner.wake()),this},re.prototype.translateShapes=function(e){this.zpp_inner.immutable_midstep("Body::translateShapes()");var t=e.zpp_inner.weak;e.zpp_inner.weak=!1;for(var i=this.zpp_inner.shapes.head;null!=i;)i.elt.outer.translate(e),i=i.next;if(e.zpp_inner.weak=t,e.zpp_inner.weak){var n=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n._isimmutable=null,n._validate=null,n._invalidate=null,n.next=ep.zpp_pool,ep.zpp_pool=n}return this},re.prototype.rotateShapes=function(e){this.zpp_inner.immutable_midstep("Body::rotateShapes()");for(var t=this.zpp_inner.shapes.head;null!=t;)t.elt.outer.rotate(e),t=t.next;return this},re.prototype.scaleShapes=function(e,t){this.zpp_inner.immutable_midstep("Body::scaleShapes()");for(var i=this.zpp_inner.shapes.head;null!=i;)i.elt.outer.scale(e,t),i=i.next;return this},re.prototype.transformShapes=function(e){this.zpp_inner.immutable_midstep("Body::transformShapes()");for(var t=this.zpp_inner.shapes.head;null!=t;)t.elt.outer.transform(e),t=t.next;return this},re.prototype.align=function(){this.zpp_inner.immutable_midstep("Body::align()"),this.zpp_inner.validate_localCOM();var e,t=-this.zpp_inner.localCOMx,i=-this.zpp_inner.localCOMy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1;var p=e;this.translateShapes(p);var l=this.localVectorToWorld(p);if(null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition(),this.zpp_inner.wrap_pos.subeq(l),this.zpp_inner.pre_posx<1/0){var h=l.zpp_inner;null!=h._validate&&h._validate(),this.zpp_inner.pre_posx-=l.zpp_inner.x;var u=l.zpp_inner;null!=u._validate&&u._validate(),this.zpp_inner.pre_posy-=l.zpp_inner.y}var d=p.zpp_inner;p.zpp_inner.outer=null,p.zpp_inner=null,p.zpp_pool=jn.poolVec2,jn.poolVec2=p,null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=ep.zpp_pool,ep.zpp_pool=d;var c=l.zpp_inner;return l.zpp_inner.outer=null,l.zpp_inner=null,l.zpp_pool=jn.poolVec2,jn.poolVec2=l,null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null),c._isimmutable=null,c._validate=null,c._invalidate=null,c.next=ep.zpp_pool,ep.zpp_pool=c,this},re.prototype.rotate=function(e,t){var i=e.zpp_inner.weak;e.zpp_inner.weak=!1,null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();var n=this.zpp_inner.wrap_pos.sub(e);n.rotate(t);var r=e.add(n,!0);null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();var o=this.zpp_inner.wrap_pos,a=r.zpp_inner;null!=a._validate&&a._validate();var s=r.zpp_inner.x,p=r.zpp_inner;null!=p._validate&&p._validate();var l,h=r.zpp_inner.y,u=o.zpp_inner;if(null!=u._validate&&u._validate(),o.zpp_inner.x==s){var d=o.zpp_inner;null!=d._validate&&d._validate(),l=o.zpp_inner.y==h}else l=!1;if(!l){o.zpp_inner.x=s,o.zpp_inner.y=h;var c=o.zpp_inner;null!=c._invalidate&&c._invalidate(c)}if(r.zpp_inner.weak){var _=r.zpp_inner;r.zpp_inner.outer=null,r.zpp_inner=null,r.zpp_pool=jn.poolVec2,jn.poolVec2=r,null!=_.outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=ep.zpp_pool,ep.zpp_pool=_}null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();var y=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=y.outer&&(y.outer.zpp_inner=null,y.outer=null),y._isimmutable=null,y._validate=null,y._invalidate=null,y.next=ep.zpp_pool,ep.zpp_pool=y;var x=this.zpp_inner.rot+t;if(this.zpp_inner.immutable_midstep("Body::rotation"),this.zpp_inner.rot!=x){this.zpp_inner.rot=x;var m=this.zpp_inner;m.zip_axis=!0;for(var g=m.shapes.head;null!=g;){var f=g.elt;1==f.type&&(f.polygon.invalidate_gverts(),f.polygon.invalidate_gaxi()),f.invalidate_worldCOM(),g=g.next}m.zip_worldCOM=!0,this.zpp_inner.wake()}if(e.zpp_inner.weak=i,e.zpp_inner.weak){var v=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=v.outer&&(v.outer.zpp_inner=null,v.outer=null),v._isimmutable=null,v._validate=null,v._invalidate=null,v.next=ep.zpp_pool,ep.zpp_pool=v}return this},re.prototype.setShapeMaterials=function(e){this.zpp_inner.immutable_midstep("Body::setShapeMaterials()");for(var t=this.zpp_inner.shapes.head;null!=t;){var i=t.elt.outer;i.zpp_inner.immutable_midstep("Shape::material"),i.zpp_inner.setMaterial(e.zpp_inner),i.zpp_inner.material.wrapper(),t=t.next}return this},re.prototype.setShapeFilters=function(e){this.zpp_inner.immutable_midstep("Body::setShapeFilters()");for(var t=this.zpp_inner.shapes.head;null!=t;){var i=t.elt.outer;i.zpp_inner.immutable_midstep("Shape::filter"),i.zpp_inner.setFilter(e.zpp_inner),i.zpp_inner.filter.wrapper(),t=t.next}return this},re.prototype.setShapeFluidProperties=function(e){this.zpp_inner.immutable_midstep("Body::setShapeFluidProperties()");for(var t=this.zpp_inner.shapes.head;null!=t;){var i=t.elt.outer;i.zpp_inner.setFluid(e.zpp_inner),i.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==i.zpp_inner.fluidProperties&&i.zpp_inner.setFluid((new se).zpp_inner),i.zpp_inner.fluidProperties.wrapper(),t=t.next}return this},re.prototype.get_localCOM=function(){if(null==this.zpp_inner.wrap_localCOM){var e,t=this.zpp_inner.localCOMx,i=this.zpp_inner.localCOMy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.zpp_inner.wrap_localCOM=e,this.zpp_inner.wrap_localCOM.zpp_inner._inuse=!0,this.zpp_inner.wrap_localCOM.zpp_inner._immutable=!0,this.zpp_inner.wrap_localCOM.zpp_inner._validate=$(d=this.zpp_inner,d.getlocalCOM)}return this.zpp_inner.wrap_localCOM},re.prototype.get_worldCOM=function(){if(null==this.zpp_inner.wrap_worldCOM){var e,t=this.zpp_inner.worldCOMx,i=this.zpp_inner.worldCOMy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.zpp_inner.wrap_worldCOM=e,this.zpp_inner.wrap_worldCOM.zpp_inner._inuse=!0,this.zpp_inner.wrap_worldCOM.zpp_inner._immutable=!0,this.zpp_inner.wrap_worldCOM.zpp_inner._validate=$(d=this.zpp_inner,d.getworldCOM)}return this.zpp_inner.wrap_worldCOM},re.prototype.normalImpulse=function(e,t){null==t&&(t=!1);var i=0,n=0,r=0;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Bn.get(this.zpp_inner.arbiters,!0));for(var o=this.zpp_inner.wrap_arbiters.iterator();;){o.zpp_inner.zpp_inner.valmod();var a=o.zpp_inner.zpp_gl();if(o.zpp_critical=!0,!(o.zpp_i<a||(o.zpp_next=qe.zpp_pool,(qe.zpp_pool=o).zpp_inner=null,!1)))break;o.zpp_critical=!1;var s=o.zpp_inner.at(o.zpp_i++).zpp_inner;if(s.type==ln.COL&&(null==e||s.b2==e.zpp_inner||s.b1==e.zpp_inner)){var p=s.wrapper(),l=(p.zpp_inner.type==ln.COL?p.zpp_inner.colarb.outer_zn:null).normalImpulse(this,t),h=l.zpp_inner;null!=h._validate&&h._validate(),i+=l.zpp_inner.x;var u=l.zpp_inner;null!=u._validate&&u._validate(),n+=l.zpp_inner.y;var d=l.zpp_inner;null!=d._validate&&d._validate(),r+=l.zpp_inner.z,l.dispose()}}return Z.get(i,n,r)},re.prototype.tangentImpulse=function(e,t){null==t&&(t=!1);var i=0,n=0,r=0;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Bn.get(this.zpp_inner.arbiters,!0));for(var o=this.zpp_inner.wrap_arbiters.iterator();;){o.zpp_inner.zpp_inner.valmod();var a=o.zpp_inner.zpp_gl();if(o.zpp_critical=!0,!(o.zpp_i<a||(o.zpp_next=qe.zpp_pool,(qe.zpp_pool=o).zpp_inner=null,!1)))break;o.zpp_critical=!1;var s=o.zpp_inner.at(o.zpp_i++).zpp_inner;if(s.type==ln.COL&&(null==e||s.b2==e.zpp_inner||s.b1==e.zpp_inner)){var p=s.wrapper(),l=(p.zpp_inner.type==ln.COL?p.zpp_inner.colarb.outer_zn:null).tangentImpulse(this,t),h=l.zpp_inner;null!=h._validate&&h._validate(),i+=l.zpp_inner.x;var u=l.zpp_inner;null!=u._validate&&u._validate(),n+=l.zpp_inner.y;var d=l.zpp_inner;null!=d._validate&&d._validate(),r+=l.zpp_inner.z,l.dispose()}}return Z.get(i,n,r)},re.prototype.totalContactsImpulse=function(e,t){null==t&&(t=!1);var i=0,n=0,r=0;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Bn.get(this.zpp_inner.arbiters,!0));for(var o=this.zpp_inner.wrap_arbiters.iterator();;){o.zpp_inner.zpp_inner.valmod();var a=o.zpp_inner.zpp_gl();if(o.zpp_critical=!0,!(o.zpp_i<a||(o.zpp_next=qe.zpp_pool,(qe.zpp_pool=o).zpp_inner=null,!1)))break;o.zpp_critical=!1;var s=o.zpp_inner.at(o.zpp_i++).zpp_inner;if(s.type==ln.COL&&(null==e||s.b2==e.zpp_inner||s.b1==e.zpp_inner)){var p=s.wrapper(),l=(p.zpp_inner.type==ln.COL?p.zpp_inner.colarb.outer_zn:null).totalImpulse(this,t),h=l.zpp_inner;null!=h._validate&&h._validate(),i+=l.zpp_inner.x;var u=l.zpp_inner;null!=u._validate&&u._validate(),n+=l.zpp_inner.y;var d=l.zpp_inner;null!=d._validate&&d._validate(),r+=l.zpp_inner.z,l.dispose()}}return Z.get(i,n,r)},re.prototype.rollingImpulse=function(e,t){null==t&&(t=!1);var i=0;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Bn.get(this.zpp_inner.arbiters,!0));for(var n=this.zpp_inner.wrap_arbiters.iterator();;){n.zpp_inner.zpp_inner.valmod();var r=n.zpp_inner.zpp_gl();if(n.zpp_critical=!0,!(n.zpp_i<r||(n.zpp_next=qe.zpp_pool,(qe.zpp_pool=n).zpp_inner=null,!1)))break;n.zpp_critical=!1;var o=n.zpp_inner.at(n.zpp_i++).zpp_inner;if(o.type==ln.COL&&(null==e||o.b2==e.zpp_inner||o.b1==e.zpp_inner)){var a=o.wrapper();i+=(a.zpp_inner.type==ln.COL?a.zpp_inner.colarb.outer_zn:null).rollingImpulse(this,t)}}return i},re.prototype.buoyancyImpulse=function(e){var t=0,i=0,n=0;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Bn.get(this.zpp_inner.arbiters,!0));for(var r=this.zpp_inner.wrap_arbiters.iterator();;){r.zpp_inner.zpp_inner.valmod();var o=r.zpp_inner.zpp_gl();if(r.zpp_critical=!0,!(r.zpp_i<o||(r.zpp_next=qe.zpp_pool,(qe.zpp_pool=r).zpp_inner=null,!1)))break;r.zpp_critical=!1;var a=r.zpp_inner.at(r.zpp_i++).zpp_inner;if(a.type==ln.FLUID&&(null==e||a.b2==e.zpp_inner||a.b1==e.zpp_inner)){var s=a.wrapper(),p=(s.zpp_inner.type==ln.FLUID?s.zpp_inner.fluidarb.outer_zn:null).buoyancyImpulse(this),l=p.zpp_inner;null!=l._validate&&l._validate(),t+=p.zpp_inner.x;var h=p.zpp_inner;null!=h._validate&&h._validate(),i+=p.zpp_inner.y;var u=p.zpp_inner;null!=u._validate&&u._validate(),n+=p.zpp_inner.z,p.dispose()}}return Z.get(t,i,n)},re.prototype.dragImpulse=function(e){var t=0,i=0,n=0;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Bn.get(this.zpp_inner.arbiters,!0));for(var r=this.zpp_inner.wrap_arbiters.iterator();;){r.zpp_inner.zpp_inner.valmod();var o=r.zpp_inner.zpp_gl();if(r.zpp_critical=!0,!(r.zpp_i<o||(r.zpp_next=qe.zpp_pool,(qe.zpp_pool=r).zpp_inner=null,!1)))break;r.zpp_critical=!1;var a=r.zpp_inner.at(r.zpp_i++).zpp_inner;if(a.type==ln.FLUID&&(null==e||a.b2==e.zpp_inner||a.b1==e.zpp_inner)){var s=a.wrapper(),p=(s.zpp_inner.type==ln.FLUID?s.zpp_inner.fluidarb.outer_zn:null).dragImpulse(this),l=p.zpp_inner;null!=l._validate&&l._validate(),t+=p.zpp_inner.x;var h=p.zpp_inner;null!=h._validate&&h._validate(),i+=p.zpp_inner.y;var u=p.zpp_inner;null!=u._validate&&u._validate(),n+=p.zpp_inner.z,p.dispose()}}return Z.get(t,i,n)},re.prototype.totalFluidImpulse=function(e){var t=0,i=0,n=0;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Bn.get(this.zpp_inner.arbiters,!0));for(var r=this.zpp_inner.wrap_arbiters.iterator();;){r.zpp_inner.zpp_inner.valmod();var o=r.zpp_inner.zpp_gl();if(r.zpp_critical=!0,!(r.zpp_i<o||(r.zpp_next=qe.zpp_pool,(qe.zpp_pool=r).zpp_inner=null,!1)))break;r.zpp_critical=!1;var a=r.zpp_inner.at(r.zpp_i++).zpp_inner;if(a.type==ln.FLUID&&(null==e||a.b2==e.zpp_inner||a.b1==e.zpp_inner)){var s=a.wrapper(),p=(s.zpp_inner.type==ln.FLUID?s.zpp_inner.fluidarb.outer_zn:null).totalImpulse(this),l=p.zpp_inner;null!=l._validate&&l._validate(),t+=p.zpp_inner.x;var h=p.zpp_inner;null!=h._validate&&h._validate(),i+=p.zpp_inner.y;var u=p.zpp_inner;null!=u._validate&&u._validate(),n+=p.zpp_inner.z,p.dispose()}}return Z.get(t,i,n)},re.prototype.constraintsImpulse=function(){for(var e=0,t=0,i=0,n=this.zpp_inner.constraints.head;null!=n;){var r=n.elt.outer.bodyImpulse(this),o=r.zpp_inner;null!=o._validate&&o._validate(),e+=r.zpp_inner.x;var a=r.zpp_inner;null!=a._validate&&a._validate(),t+=r.zpp_inner.y;var s=r.zpp_inner;null!=s._validate&&s._validate(),i+=r.zpp_inner.z,r.dispose(),n=n.next}return Z.get(e,t,i)},re.prototype.totalImpulse=function(e,t){null==t&&(t=!1);var i=0,n=0,r=0;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Bn.get(this.zpp_inner.arbiters,!0));for(var o=this.zpp_inner.wrap_arbiters.iterator();;){o.zpp_inner.zpp_inner.valmod();var a=o.zpp_inner.zpp_gl();if(o.zpp_critical=!0,!(o.zpp_i<a||(o.zpp_next=qe.zpp_pool,(qe.zpp_pool=o).zpp_inner=null,!1)))break;o.zpp_critical=!1;var s=o.zpp_inner.at(o.zpp_i++).zpp_inner;if(s.type!=ln.SENSOR&&(null==e||s.b2==e.zpp_inner||s.b1==e.zpp_inner)){var p=s.wrapper().totalImpulse(this,t),l=p.zpp_inner;null!=l._validate&&l._validate(),i+=p.zpp_inner.x;var h=p.zpp_inner;null!=h._validate&&h._validate(),n+=p.zpp_inner.y;var u=p.zpp_inner;null!=u._validate&&u._validate(),r+=p.zpp_inner.z,p.dispose()}}for(var d=this.zpp_inner.constraints.head;null!=d;){var c=d.elt;if(c.active){var _=c.outer.bodyImpulse(this),y=_.zpp_inner;null!=y._validate&&y._validate(),i+=_.zpp_inner.x;var x=_.zpp_inner;null!=x._validate&&x._validate(),n+=_.zpp_inner.y;var m=_.zpp_inner;null!=m._validate&&m._validate(),r+=_.zpp_inner.z,_.dispose()}d=d.next}return Z.get(i,n,r)},re.prototype.contains=function(e){var t,i=e.zpp_inner.weak;t=e.zpp_inner.weak=!1;for(var n=this.zpp_inner.shapes.head;null!=n;){if(n.elt.outer.contains(e)){t=!0;break}n=n.next}if(e.zpp_inner.weak=i,e.zpp_inner.weak){var r=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=ep.zpp_pool,ep.zpp_pool=r}return t},re.prototype.toString=function(){return(this.zpp_inner.world?"(space::world":"("+(2==this.zpp_inner.type?"dynamic":1==this.zpp_inner.type?"static":"kinematic"))+")#"+this.zpp_inner_i.id},Object.defineProperty(re.prototype,"type",{get:re.prototype.get_type,set:re.prototype.set_type}),Object.defineProperty(re.prototype,"isBullet",{get:re.prototype.get_isBullet,set:re.prototype.set_isBullet}),Object.defineProperty(re.prototype,"disableCCD",{get:re.prototype.get_disableCCD,set:re.prototype.set_disableCCD}),Object.defineProperty(re.prototype,"shapes",{get:re.prototype.get_shapes}),Object.defineProperty(re.prototype,"compound",{get:re.prototype.get_compound,set:re.prototype.set_compound}),Object.defineProperty(re.prototype,"space",{get:re.prototype.get_space,set:re.prototype.set_space}),Object.defineProperty(re.prototype,"arbiters",{get:re.prototype.get_arbiters}),Object.defineProperty(re.prototype,"isSleeping",{get:re.prototype.get_isSleeping}),Object.defineProperty(re.prototype,"constraints",{get:re.prototype.get_constraints}),Object.defineProperty(re.prototype,"position",{get:re.prototype.get_position,set:re.prototype.set_position}),Object.defineProperty(re.prototype,"velocity",{get:re.prototype.get_velocity,set:re.prototype.set_velocity}),Object.defineProperty(re.prototype,"kinematicVel",{get:re.prototype.get_kinematicVel,set:re.prototype.set_kinematicVel}),Object.defineProperty(re.prototype,"surfaceVel",{get:re.prototype.get_surfaceVel,set:re.prototype.set_surfaceVel}),Object.defineProperty(re.prototype,"force",{get:re.prototype.get_force,set:re.prototype.set_force}),Object.defineProperty(re.prototype,"constraintVelocity",{get:re.prototype.get_constraintVelocity}),Object.defineProperty(re.prototype,"rotation",{get:re.prototype.get_rotation,set:re.prototype.set_rotation}),Object.defineProperty(re.prototype,"angularVel",{get:re.prototype.get_angularVel,set:re.prototype.set_angularVel}),Object.defineProperty(re.prototype,"kinAngVel",{get:re.prototype.get_kinAngVel,set:re.prototype.set_kinAngVel}),Object.defineProperty(re.prototype,"torque",{get:re.prototype.get_torque,set:re.prototype.set_torque}),Object.defineProperty(re.prototype,"bounds",{get:re.prototype.get_bounds}),Object.defineProperty(re.prototype,"allowMovement",{get:re.prototype.get_allowMovement,set:re.prototype.set_allowMovement}),Object.defineProperty(re.prototype,"allowRotation",{get:re.prototype.get_allowRotation,set:re.prototype.set_allowRotation}),Object.defineProperty(re.prototype,"massMode",{get:re.prototype.get_massMode,set:re.prototype.set_massMode}),Object.defineProperty(re.prototype,"constraintMass",{get:re.prototype.get_constraintMass}),Object.defineProperty(re.prototype,"mass",{get:re.prototype.get_mass,set:re.prototype.set_mass}),Object.defineProperty(re.prototype,"gravMassMode",{get:re.prototype.get_gravMassMode,set:re.prototype.set_gravMassMode}),Object.defineProperty(re.prototype,"gravMass",{get:re.prototype.get_gravMass,set:re.prototype.set_gravMass}),Object.defineProperty(re.prototype,"gravMassScale",{get:re.prototype.get_gravMassScale,set:re.prototype.set_gravMassScale}),Object.defineProperty(re.prototype,"inertiaMode",{get:re.prototype.get_inertiaMode,set:re.prototype.set_inertiaMode}),Object.defineProperty(re.prototype,"constraintInertia",{get:re.prototype.get_constraintInertia}),Object.defineProperty(re.prototype,"inertia",{get:re.prototype.get_inertia,set:re.prototype.set_inertia}),Object.defineProperty(re.prototype,"localCOM",{get:re.prototype.get_localCOM}),Object.defineProperty(re.prototype,"worldCOM",{get:re.prototype.get_worldCOM}),re.prototype.__class__=re;var $e=nape.phys.BodyIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};$e.__name__=["nape","phys","BodyIterator"],$e.get=function(e){var t;if(null==$e.zpp_pool){gn.internal=!0;var i=new $e;gn.internal=!1,t=i}else{var n=$e.zpp_pool;$e.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},$e.prototype.zpp_inner=null,$e.prototype.zpp_i=null,$e.prototype.zpp_critical=null,$e.prototype.zpp_next=null,$e.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=$e.zpp_pool,($e.zpp_pool=this).zpp_inner=null,!1)},$e.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},$e.prototype.__class__=$e;var ee=nape.phys.BodyList=function(){this.zpp_inner=null,this.zpp_inner=new gn,this.zpp_inner.outer=this};ee.__name__=["nape","phys","BodyList"],ee.fromArray=function(e){for(var t=new ee,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},ee.prototype.zpp_inner=null,ee.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},ee.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},ee.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},ee.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},ee.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},ee.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var n=(e=null==(i=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:i.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer},ee.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var i=(e=null==(t=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer},ee.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},ee.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},ee.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},ee.prototype.empty=function(){return null==this.zpp_inner.inner.head},ee.prototype.iterator=function(){return this.zpp_inner.valmod(),$e.get(this)},ee.prototype.copy=function(e){null==e&&(e=!1);var t=new ee;this.zpp_inner.valmod();for(var i=$e.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=$e.zpp_pool,($e.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},ee.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=$e.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=$e.zpp_pool,($e.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||(this.zpp_inner.reverse_flag?this.push(r):this.unshift(r))}},ee.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=$e.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=$e.zpp_pool,($e.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},ee.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=$e.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=$e.zpp_pool,($e.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=$e.zpp_pool,($e.zpp_pool=t).zpp_inner=null;break}}return this},ee.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(ee.prototype,"length",{get:ee.prototype.get_length}),ee.prototype.__class__=ee;var oe=nape.phys.BodyType=function(){};oe.__name__=["nape","phys","BodyType"],oe.STATIC=null,oe.get_STATIC=function(){return null==Uo.BodyType_STATIC&&(Uo.internal=!0,Uo.BodyType_STATIC=new oe,Uo.internal=!1),Uo.BodyType_STATIC},oe.DYNAMIC=null,oe.get_DYNAMIC=function(){return null==Uo.BodyType_DYNAMIC&&(Uo.internal=!0,Uo.BodyType_DYNAMIC=new oe,Uo.internal=!1),Uo.BodyType_DYNAMIC},oe.KINEMATIC=null,oe.get_KINEMATIC=function(){return null==Uo.BodyType_KINEMATIC&&(Uo.internal=!0,Uo.BodyType_KINEMATIC=new oe,Uo.internal=!1),Uo.BodyType_KINEMATIC},oe.prototype.toString=function(){return null==Uo.BodyType_STATIC&&(Uo.internal=!0,Uo.BodyType_STATIC=new oe,Uo.internal=!1),this==Uo.BodyType_STATIC?"STATIC":(null==Uo.BodyType_DYNAMIC&&(Uo.internal=!0,Uo.BodyType_DYNAMIC=new oe,Uo.internal=!1),this==Uo.BodyType_DYNAMIC?"DYNAMIC":(null==Uo.BodyType_KINEMATIC&&(Uo.internal=!0,Uo.BodyType_KINEMATIC=new oe,Uo.internal=!1),this==Uo.BodyType_KINEMATIC?"KINEMATIC":""))},Object.defineProperty(oe,"STATIC",{get:oe.get_STATIC}),Object.defineProperty(oe,"DYNAMIC",{get:oe.get_DYNAMIC}),Object.defineProperty(oe,"KINEMATIC",{get:oe.get_KINEMATIC}),oe.prototype.__class__=oe;var ie=nape.phys.Compound=function(){this.zpp_inner=null,Q.call(this),this.zpp_inner=new Yt,((this.zpp_inner.outer=this).zpp_inner.outer_i=this).zpp_inner_i=this.zpp_inner,this.zpp_inner.insert_cbtype(Ie.ANY_COMPOUND.zpp_inner)};ie.__name__=["nape","phys","Compound"],ie.__super__=Q,ie.prototype=Object.create(Q.prototype),ie.prototype.zpp_inner=null,ie.prototype.get_bodies=function(){return this.zpp_inner.wrap_bodies},ie.prototype.get_constraints=function(){return this.zpp_inner.wrap_constraints},ie.prototype.get_compounds=function(){return this.zpp_inner.wrap_compounds},ie.prototype.get_compound=function(){return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},ie.prototype.set_compound=function(e){if(this.zpp_inner.immutable_midstep("Compound::compound"),(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)!=e&&(null!=(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)&&(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer).zpp_inner.wrap_compounds.remove(this),null!=e)){var t=e.zpp_inner.wrap_compounds;t.zpp_inner.reverse_flag?t.push(this):t.unshift(this)}return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},ie.prototype.get_space=function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},ie.prototype.set_space=function(e){if(this.zpp_inner.immutable_midstep("Compound::space"),(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)!=e&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(null==this.zpp_inner.space?null:this.zpp_inner.space.outer).zpp_inner.wrap_compounds.remove(this),null!=e)){var t=e.zpp_inner.wrap_compounds;t.zpp_inner.reverse_flag?t.push(this):t.unshift(this)}return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},ie.prototype.toString=function(){return"Compound"+this.zpp_inner_i.id},ie.prototype.copy=function(){return this.zpp_inner.copy()},ie.prototype.breakApart=function(){this.zpp_inner.breakApart()},ie.prototype.visitBodies=function(e){var t=this.zpp_inner.wrap_bodies;t.zpp_inner.valmod();for(var i=$e.get(t);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=$e.zpp_pool,($e.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1,e(i.zpp_inner.at(i.zpp_i++))}var o=this.zpp_inner.wrap_compounds;o.zpp_inner.valmod();for(var a=et.get(o);;){a.zpp_inner.zpp_inner.valmod();var s=a.zpp_inner;s.zpp_inner.valmod(),s.zpp_inner.zip_length&&(s.zpp_inner.zip_length=!1,s.zpp_inner.user_length=s.zpp_inner.inner.length);var p=s.zpp_inner.user_length;if(a.zpp_critical=!0,!(a.zpp_i<p||(a.zpp_next=et.zpp_pool,(et.zpp_pool=a).zpp_inner=null,!1)))break;a.zpp_critical=!1,a.zpp_inner.at(a.zpp_i++).visitBodies(e)}},ie.prototype.visitConstraints=function(e){var t=this.zpp_inner.wrap_constraints;t.zpp_inner.valmod();for(var i=We.get(t);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=We.zpp_pool,(We.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1,e(i.zpp_inner.at(i.zpp_i++))}var o=this.zpp_inner.wrap_compounds;o.zpp_inner.valmod();for(var a=et.get(o);;){a.zpp_inner.zpp_inner.valmod();var s=a.zpp_inner;s.zpp_inner.valmod(),s.zpp_inner.zip_length&&(s.zpp_inner.zip_length=!1,s.zpp_inner.user_length=s.zpp_inner.inner.length);var p=s.zpp_inner.user_length;if(a.zpp_critical=!0,!(a.zpp_i<p||(a.zpp_next=et.zpp_pool,(et.zpp_pool=a).zpp_inner=null,!1)))break;a.zpp_critical=!1,a.zpp_inner.at(a.zpp_i++).visitConstraints(e)}},ie.prototype.visitCompounds=function(e){var t=this.zpp_inner.wrap_compounds;t.zpp_inner.valmod();for(var i=et.get(t);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=et.zpp_pool,(et.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);e(o),o.visitCompounds(e)}},ie.prototype.COM=function(e){var t;if(null==e&&(e=!1),null==jn.poolVec2?t=new lt:(t=jn.poolVec2,jn.poolVec2=t.zpp_pool,t.zpp_pool=null),null==t.zpp_inner){var i;null==ep.zpp_pool?i=new ep:(i=ep.zpp_pool,ep.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=0,i.y=0,t.zpp_inner=i,t.zpp_inner.outer=t}else{var n,r=t.zpp_inner;if(null!=r._validate&&r._validate(),0==t.zpp_inner.x){var o=t.zpp_inner;null!=o._validate&&o._validate(),n=0==t.zpp_inner.y}else n=!1;if(!n){t.zpp_inner.x=0,t.zpp_inner.y=0;var a=t.zpp_inner;null!=a._invalidate&&a._invalidate(a)}}t.zpp_inner.weak=e;var h=t,u=0;return this.visitBodies(function(e){if(null!=e.zpp_inner.wrap_shapes.zpp_inner.inner.head){if(null==e.zpp_inner.wrap_worldCOM){var t,i=e.zpp_inner.worldCOMx,n=e.zpp_inner.worldCOMy;if(null==jn.poolVec2?t=new lt:(t=jn.poolVec2,jn.poolVec2=t.zpp_pool,t.zpp_pool=null),null==t.zpp_inner){var r;null==ep.zpp_pool?r=new ep:(r=ep.zpp_pool,ep.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=i,r.y=n,t.zpp_inner=r,t.zpp_inner.outer=t}else{var o,a=t.zpp_inner;if(null!=a._validate&&a._validate(),t.zpp_inner.x==i){var s=t.zpp_inner;null!=s._validate&&s._validate(),o=t.zpp_inner.y==n}else o=!1;if(!o){t.zpp_inner.x=i,t.zpp_inner.y=n;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}}t.zpp_inner.weak=!1,e.zpp_inner.wrap_worldCOM=t,e.zpp_inner.wrap_worldCOM.zpp_inner._inuse=!0,e.zpp_inner.wrap_worldCOM.zpp_inner._immutable=!0,e.zpp_inner.wrap_worldCOM.zpp_inner._validate=$(d=e.zpp_inner,d.getworldCOM)}var l=e.zpp_inner.wrap_worldCOM;e.zpp_inner.validate_mass(),h.addeq(l.mul(e.zpp_inner.cmass,!0)),e.zpp_inner.validate_mass(),u+=e.zpp_inner.cmass}}),h.muleq(1/u),h},ie.prototype.translate=function(t){var e=t.zpp_inner.weak;if(t.zpp_inner.weak=!1,this.visitBodies(function(e){null==e.zpp_inner.wrap_pos&&e.zpp_inner.setupPosition(),e.zpp_inner.wrap_pos.addeq(t)}),t.zpp_inner.weak=e,t.zpp_inner.weak){var i=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null;var n=t;n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=ep.zpp_pool,ep.zpp_pool=i}return this},ie.prototype.rotate=function(t,i){var e=t.zpp_inner.weak;if(t.zpp_inner.weak=!1,this.visitBodies(function(e){e.rotate(t,i)}),t.zpp_inner.weak=e,t.zpp_inner.weak){var n=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null;var r=t;r.zpp_pool=jn.poolVec2,jn.poolVec2=r,null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n._isimmutable=null,n._validate=null,n._invalidate=null,n.next=ep.zpp_pool,ep.zpp_pool=n}return this},Object.defineProperty(ie.prototype,"bodies",{get:ie.prototype.get_bodies}),Object.defineProperty(ie.prototype,"constraints",{get:ie.prototype.get_constraints}),Object.defineProperty(ie.prototype,"compounds",{get:ie.prototype.get_compounds}),Object.defineProperty(ie.prototype,"compound",{get:ie.prototype.get_compound,set:ie.prototype.set_compound}),Object.defineProperty(ie.prototype,"space",{get:ie.prototype.get_space,set:ie.prototype.set_space}),ie.prototype.__class__=ie;var et=nape.phys.CompoundIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};et.__name__=["nape","phys","CompoundIterator"],et.get=function(e){var t;if(null==et.zpp_pool){vn.internal=!0;var i=new et;vn.internal=!1,t=i}else{var n=et.zpp_pool;et.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},et.prototype.zpp_inner=null,et.prototype.zpp_i=null,et.prototype.zpp_critical=null,et.prototype.zpp_next=null,et.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=et.zpp_pool,(et.zpp_pool=this).zpp_inner=null,!1)},et.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},et.prototype.__class__=et;var ae=nape.phys.CompoundList=function(){this.zpp_inner=null,this.zpp_inner=new vn,this.zpp_inner.outer=this};ae.__name__=["nape","phys","CompoundList"],ae.fromArray=function(e){for(var t=new ae,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},ae.prototype.zpp_inner=null,ae.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},ae.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},ae.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},ae.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},ae.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},ae.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var n=(e=null==(i=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:i.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer},ae.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var i=(e=null==(t=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer},ae.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},ae.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},ae.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},ae.prototype.empty=function(){return null==this.zpp_inner.inner.head},ae.prototype.iterator=function(){return this.zpp_inner.valmod(),et.get(this)},ae.prototype.copy=function(e){null==e&&(e=!1);var t=new ae;this.zpp_inner.valmod();for(var i=et.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=et.zpp_pool,(et.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},ae.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=et.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=et.zpp_pool,(et.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||(this.zpp_inner.reverse_flag?this.push(r):this.unshift(r))}},ae.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=et.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=et.zpp_pool,(et.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},ae.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=et.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=et.zpp_pool,(et.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=et.zpp_pool,(et.zpp_pool=t).zpp_inner=null;break}}return this},ae.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(ae.prototype,"length",{get:ae.prototype.get_length}),ae.prototype.__class__=ae;var se=nape.phys.FluidProperties=function(e,t){null==t&&(t=1),null==e&&(e=1),(this.zpp_inner=null)==Kt.zpp_pool?this.zpp_inner=new Kt:(this.zpp_inner=Kt.zpp_pool,Kt.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null),e!=1e3*(this.zpp_inner.outer=this).zpp_inner.density&&(this.zpp_inner.density=e/1e3,this.zpp_inner.invalidate()),t!=this.zpp_inner.viscosity&&(this.zpp_inner.viscosity=t/1,this.zpp_inner.invalidate())};se.__name__=["nape","phys","FluidProperties"],se.prototype.zpp_inner=null,se.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},se.prototype.get_shapes=function(){return null==this.zpp_inner.wrap_shapes&&(this.zpp_inner.wrap_shapes=In.get(this.zpp_inner.shapes,!0)),this.zpp_inner.wrap_shapes},se.prototype.copy=function(){var e=new se(1e3*this.zpp_inner.density,this.zpp_inner.viscosity);null!=this.zpp_inner.userData&&(e.zpp_inner.userData=_.copy(this.zpp_inner.userData));var t=this.zpp_inner.wrap_gravity;if(null==t){if(null!=e.zpp_inner.wrap_gravity){e.zpp_inner.wrap_gravity.zpp_inner._inuse=!1;var i=e.zpp_inner.wrap_gravity,n=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,i.zpp_pool=jn.poolVec2,jn.poolVec2=i,null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n._isimmutable=null,n._validate=null,n._invalidate=null,n.next=ep.zpp_pool,ep.zpp_pool=n,e.zpp_inner.wrap_gravity=null}}else{null==e.zpp_inner.wrap_gravity&&e.zpp_inner.getgravity();var r=e.zpp_inner.wrap_gravity,o=t.zpp_inner;null!=o._validate&&o._validate();var a=t.zpp_inner.x,s=t.zpp_inner;null!=s._validate&&s._validate();var p,l=t.zpp_inner.y,h=r.zpp_inner;if(null!=h._validate&&h._validate(),r.zpp_inner.x==a){var u=r.zpp_inner;null!=u._validate&&u._validate(),p=r.zpp_inner.y==l}else p=!1;if(!p){r.zpp_inner.x=a,r.zpp_inner.y=l;var d=r.zpp_inner;null!=d._invalidate&&d._invalidate(d)}if(t.zpp_inner.weak){var c=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null),c._isimmutable=null,c._validate=null,c._invalidate=null,c.next=ep.zpp_pool,ep.zpp_pool=c}}return e},se.prototype.get_density=function(){return 1e3*this.zpp_inner.density},se.prototype.set_density=function(e){return e!=1e3*this.zpp_inner.density&&(this.zpp_inner.density=e/1e3,this.zpp_inner.invalidate()),1e3*this.zpp_inner.density},se.prototype.get_viscosity=function(){return this.zpp_inner.viscosity},se.prototype.set_viscosity=function(e){return e!=this.zpp_inner.viscosity&&(this.zpp_inner.viscosity=e/1,this.zpp_inner.invalidate()),this.zpp_inner.viscosity},se.prototype.get_gravity=function(){return this.zpp_inner.wrap_gravity},se.prototype.set_gravity=function(e){if(null==e){if(null!=this.zpp_inner.wrap_gravity){this.zpp_inner.wrap_gravity.zpp_inner._inuse=!1;var t=this.zpp_inner.wrap_gravity,i=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=ep.zpp_pool,ep.zpp_pool=i,this.zpp_inner.wrap_gravity=null}}else{null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity();var n=this.zpp_inner.wrap_gravity,r=e.zpp_inner;null!=r._validate&&r._validate();var o=e.zpp_inner.x,a=e.zpp_inner;null!=a._validate&&a._validate();var s,p=e.zpp_inner.y,l=n.zpp_inner;if(null!=l._validate&&l._validate(),n.zpp_inner.x==o){var h=n.zpp_inner;null!=h._validate&&h._validate(),s=n.zpp_inner.y==p}else s=!1;if(!s){n.zpp_inner.x=o,n.zpp_inner.y=p;var u=n.zpp_inner;null!=u._invalidate&&u._invalidate(u)}if(e.zpp_inner.weak){var d=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=ep.zpp_pool,ep.zpp_pool=d}}return this.zpp_inner.wrap_gravity},se.prototype.toString=function(){return"{ density: "+1e3*this.zpp_inner.density+" viscosity: "+this.zpp_inner.viscosity+" gravity: "+n.string(this.zpp_inner.wrap_gravity)+" }"},Object.defineProperty(se.prototype,"userData",{get:se.prototype.get_userData}),Object.defineProperty(se.prototype,"shapes",{get:se.prototype.get_shapes}),Object.defineProperty(se.prototype,"density",{get:se.prototype.get_density,set:se.prototype.set_density}),Object.defineProperty(se.prototype,"viscosity",{get:se.prototype.get_viscosity,set:se.prototype.set_viscosity}),Object.defineProperty(se.prototype,"gravity",{get:se.prototype.get_gravity,set:se.prototype.set_gravity}),se.prototype.__class__=se;var pe=nape.phys.GravMassMode=function(){};pe.__name__=["nape","phys","GravMassMode"],pe.DEFAULT=null,pe.get_DEFAULT=function(){return null==Uo.GravMassMode_DEFAULT&&(Uo.internal=!0,Uo.GravMassMode_DEFAULT=new pe,Uo.internal=!1),Uo.GravMassMode_DEFAULT},pe.FIXED=null,pe.get_FIXED=function(){return null==Uo.GravMassMode_FIXED&&(Uo.internal=!0,Uo.GravMassMode_FIXED=new pe,Uo.internal=!1),Uo.GravMassMode_FIXED},pe.SCALED=null,pe.get_SCALED=function(){return null==Uo.GravMassMode_SCALED&&(Uo.internal=!0,Uo.GravMassMode_SCALED=new pe,Uo.internal=!1),Uo.GravMassMode_SCALED},pe.prototype.toString=function(){return null==Uo.GravMassMode_DEFAULT&&(Uo.internal=!0,Uo.GravMassMode_DEFAULT=new pe,Uo.internal=!1),this==Uo.GravMassMode_DEFAULT?"DEFAULT":(null==Uo.GravMassMode_FIXED&&(Uo.internal=!0,Uo.GravMassMode_FIXED=new pe,Uo.internal=!1),this==Uo.GravMassMode_FIXED?"FIXED":(null==Uo.GravMassMode_SCALED&&(Uo.internal=!0,Uo.GravMassMode_SCALED=new pe,Uo.internal=!1),this==Uo.GravMassMode_SCALED?"SCALED":""))},Object.defineProperty(pe,"DEFAULT",{get:pe.get_DEFAULT}),Object.defineProperty(pe,"FIXED",{get:pe.get_FIXED}),Object.defineProperty(pe,"SCALED",{get:pe.get_SCALED}),pe.prototype.__class__=pe;var le=nape.phys.InertiaMode=function(){};le.__name__=["nape","phys","InertiaMode"],le.DEFAULT=null,le.get_DEFAULT=function(){return null==Uo.InertiaMode_DEFAULT&&(Uo.internal=!0,Uo.InertiaMode_DEFAULT=new le,Uo.internal=!1),Uo.InertiaMode_DEFAULT},le.FIXED=null,le.get_FIXED=function(){return null==Uo.InertiaMode_FIXED&&(Uo.internal=!0,Uo.InertiaMode_FIXED=new le,Uo.internal=!1),Uo.InertiaMode_FIXED},le.prototype.toString=function(){return null==Uo.InertiaMode_DEFAULT&&(Uo.internal=!0,Uo.InertiaMode_DEFAULT=new le,Uo.internal=!1),this==Uo.InertiaMode_DEFAULT?"DEFAULT":(null==Uo.InertiaMode_FIXED&&(Uo.internal=!0,Uo.InertiaMode_FIXED=new le,Uo.internal=!1),this==Uo.InertiaMode_FIXED?"FIXED":"")},Object.defineProperty(le,"DEFAULT",{get:le.get_DEFAULT}),Object.defineProperty(le,"FIXED",{get:le.get_FIXED}),le.prototype.__class__=le;var tt=nape.phys.InteractorIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};tt.__name__=["nape","phys","InteractorIterator"],tt.get=function(e){var t;if(null==tt.zpp_pool){fn.internal=!0;var i=new tt;fn.internal=!1,t=i}else{var n=tt.zpp_pool;tt.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},tt.prototype.zpp_inner=null,tt.prototype.zpp_i=null,tt.prototype.zpp_critical=null,tt.prototype.zpp_next=null,tt.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=tt.zpp_pool,(tt.zpp_pool=this).zpp_inner=null,!1)},tt.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},tt.prototype.__class__=tt;var he=nape.phys.InteractorList=function(){this.zpp_inner=null,this.zpp_inner=new fn,this.zpp_inner.outer=this};he.__name__=["nape","phys","InteractorList"],he.fromArray=function(e){for(var t=new he,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},he.prototype.zpp_inner=null,he.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},he.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner_i)},he.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer_i},he.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner_i);else{var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner_i)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},he.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner_i)}else this.zpp_inner.inner.add(e.zpp_inner_i);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},he.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer_i;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var n=(e=null==(i=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:i.next.elt).outer_i;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer_i},he.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var i=(e=null==(t=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:t.next.elt).outer_i;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer_i;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer_i},he.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},he.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner_i){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner_i),this.zpp_inner.invalidate()),t},he.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},he.prototype.empty=function(){return null==this.zpp_inner.inner.head},he.prototype.iterator=function(){return this.zpp_inner.valmod(),tt.get(this)},he.prototype.copy=function(e){null==e&&(e=!1);var t=new he;this.zpp_inner.valmod();for(var i=tt.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=tt.zpp_pool,(tt.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},he.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=tt.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=tt.zpp_pool,(tt.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||(this.zpp_inner.reverse_flag?this.push(r):this.unshift(r))}},he.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=tt.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=tt.zpp_pool,(tt.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},he.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=tt.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=tt.zpp_pool,(tt.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=tt.zpp_pool,(tt.zpp_pool=t).zpp_inner=null;break}}return this},he.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(he.prototype,"length",{get:he.prototype.get_length}),he.prototype.__class__=he;var ue=nape.phys.MassMode=function(){};ue.__name__=["nape","phys","MassMode"],ue.DEFAULT=null,ue.get_DEFAULT=function(){return null==Uo.MassMode_DEFAULT&&(Uo.internal=!0,Uo.MassMode_DEFAULT=new ue,Uo.internal=!1),Uo.MassMode_DEFAULT},ue.FIXED=null,ue.get_FIXED=function(){return null==Uo.MassMode_FIXED&&(Uo.internal=!0,Uo.MassMode_FIXED=new ue,Uo.internal=!1),Uo.MassMode_FIXED},ue.prototype.toString=function(){return null==Uo.MassMode_DEFAULT&&(Uo.internal=!0,Uo.MassMode_DEFAULT=new ue,Uo.internal=!1),this==Uo.MassMode_DEFAULT?"DEFAULT":(null==Uo.MassMode_FIXED&&(Uo.internal=!0,Uo.MassMode_FIXED=new ue,Uo.internal=!1),this==Uo.MassMode_FIXED?"FIXED":"")},Object.defineProperty(ue,"DEFAULT",{get:ue.get_DEFAULT}),Object.defineProperty(ue,"FIXED",{get:ue.get_FIXED}),ue.prototype.__class__=ue;var de=nape.phys.Material=function(e,t,i,n,r){null==r&&(r=.001),null==n&&(n=1),null==i&&(i=2),null==t&&(t=1),null==e&&(e=0),(this.zpp_inner=null)==Zt.zpp_pool?this.zpp_inner=new Zt:(this.zpp_inner=Zt.zpp_pool,Zt.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null),e!=(this.zpp_inner.outer=this).zpp_inner.elasticity&&(this.zpp_inner.elasticity=e/1,this.zpp_inner.invalidate(Zt.WAKE|Zt.ARBITERS)),t!=this.zpp_inner.dynamicFriction&&(this.zpp_inner.dynamicFriction=t/1,this.zpp_inner.invalidate(Zt.WAKE|Zt.ANGDRAG|Zt.ARBITERS)),i!=this.zpp_inner.staticFriction&&(this.zpp_inner.staticFriction=i/1,this.zpp_inner.invalidate(Zt.WAKE|Zt.ARBITERS)),n!=1e3*this.zpp_inner.density&&(this.zpp_inner.density=n/1e3,this.zpp_inner.invalidate(Zt.WAKE|Zt.PROPS)),r!=this.zpp_inner.rollingFriction&&(this.zpp_inner.rollingFriction=r/1,this.zpp_inner.invalidate(Zt.WAKE|Zt.ARBITERS))};de.__name__=["nape","phys","Material"],de.wood=function(){return new de(.4,.2,.38,.7,.005)},de.steel=function(){return new de(.2,.57,.74,7.8,.001)},de.ice=function(){return new de(.3,.03,.1,.9,1e-4)},de.rubber=function(){return new de(.8,1,1.4,1.5,.01)},de.glass=function(){return new de(.4,.4,.94,2.6,.002)},de.sand=function(){return new de(-1,.45,.6,1.6,16)},de.prototype.zpp_inner=null,de.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},de.prototype.get_shapes=function(){return null==this.zpp_inner.wrap_shapes&&(this.zpp_inner.wrap_shapes=In.get(this.zpp_inner.shapes,!0)),this.zpp_inner.wrap_shapes},de.prototype.copy=function(){var e=new de(this.zpp_inner.elasticity,this.zpp_inner.dynamicFriction,this.zpp_inner.staticFriction,1e3*this.zpp_inner.density,this.zpp_inner.rollingFriction);return null!=this.zpp_inner.userData&&(e.zpp_inner.userData=_.copy(this.zpp_inner.userData)),e},de.prototype.get_elasticity=function(){return this.zpp_inner.elasticity},de.prototype.set_elasticity=function(e){return e!=this.zpp_inner.elasticity&&(this.zpp_inner.elasticity=e/1,this.zpp_inner.invalidate(Zt.WAKE|Zt.ARBITERS)),this.zpp_inner.elasticity},de.prototype.get_dynamicFriction=function(){return this.zpp_inner.dynamicFriction},de.prototype.set_dynamicFriction=function(e){return e!=this.zpp_inner.dynamicFriction&&(this.zpp_inner.dynamicFriction=e/1,this.zpp_inner.invalidate(Zt.WAKE|Zt.ANGDRAG|Zt.ARBITERS)),this.zpp_inner.dynamicFriction},de.prototype.get_staticFriction=function(){return this.zpp_inner.staticFriction},de.prototype.set_staticFriction=function(e){return e!=this.zpp_inner.staticFriction&&(this.zpp_inner.staticFriction=e/1,this.zpp_inner.invalidate(Zt.WAKE|Zt.ARBITERS)),this.zpp_inner.staticFriction},de.prototype.get_density=function(){return 1e3*this.zpp_inner.density},de.prototype.set_density=function(e){return e!=1e3*this.zpp_inner.density&&(this.zpp_inner.density=e/1e3,this.zpp_inner.invalidate(Zt.WAKE|Zt.PROPS)),1e3*this.zpp_inner.density},de.prototype.get_rollingFriction=function(){return this.zpp_inner.rollingFriction},de.prototype.set_rollingFriction=function(e){return e!=this.zpp_inner.rollingFriction&&(this.zpp_inner.rollingFriction=e/1,this.zpp_inner.invalidate(Zt.WAKE|Zt.ARBITERS)),this.zpp_inner.rollingFriction},de.prototype.toString=function(){return"{ elasticity: "+this.zpp_inner.elasticity+" dynamicFriction: "+this.zpp_inner.dynamicFriction+" staticFriction: "+this.zpp_inner.staticFriction+" density: "+1e3*this.zpp_inner.density+" rollingFriction: "+this.zpp_inner.rollingFriction+" }"},Object.defineProperty(de.prototype,"userData",{get:de.prototype.get_userData}),Object.defineProperty(de.prototype,"shapes",{get:de.prototype.get_shapes}),Object.defineProperty(de.prototype,"elasticity",{get:de.prototype.get_elasticity,set:de.prototype.set_elasticity}),Object.defineProperty(de.prototype,"dynamicFriction",{get:de.prototype.get_dynamicFriction,set:de.prototype.set_dynamicFriction}),Object.defineProperty(de.prototype,"staticFriction",{get:de.prototype.get_staticFriction,set:de.prototype.set_staticFriction}),Object.defineProperty(de.prototype,"density",{get:de.prototype.get_density,set:de.prototype.set_density}),Object.defineProperty(de.prototype,"rollingFriction",{get:de.prototype.get_rollingFriction,set:de.prototype.set_rollingFriction}),de.prototype.__class__=de;var ze=nape.shape.Shape=function(){this.zpp_inner=null,Q.call(this)};ze.__name__=["nape","shape","Shape"],ze.__super__=Q,ze.prototype=Object.create(Q.prototype),ze.prototype.zpp_inner=null,ze.prototype.get_type=function(){return Jt.types[this.zpp_inner.type]},ze.prototype.isCircle=function(){return 0==this.zpp_inner.type},ze.prototype.isPolygon=function(){return 1==this.zpp_inner.type},ze.prototype.get_body=function(){return null!=this.zpp_inner.body?this.zpp_inner.body.outer:null},ze.prototype.set_body=function(e){if(this.zpp_inner.immutable_midstep("Shape::body"),(null!=this.zpp_inner.body?this.zpp_inner.body.outer:null)!=e&&(null!=this.zpp_inner.body&&(null!=this.zpp_inner.body?this.zpp_inner.body.outer:null).zpp_inner.wrap_shapes.remove(this),null!=e)){var t=e.zpp_inner.wrap_shapes;t.zpp_inner.reverse_flag?t.push(this):t.unshift(this)}return null!=this.zpp_inner.body?this.zpp_inner.body.outer:null},ze.prototype.get_castCircle=function(){return 0==this.zpp_inner.type?this.zpp_inner.circle.outer_zn:null},ze.prototype.get_castPolygon=function(){return 1==this.zpp_inner.type?this.zpp_inner.polygon.outer_zn:null},ze.prototype.get_worldCOM=function(){if(null==this.zpp_inner.wrap_worldCOM){var e,t=this.zpp_inner.worldCOMx,i=this.zpp_inner.worldCOMy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.zpp_inner.wrap_worldCOM=e,this.zpp_inner.wrap_worldCOM.zpp_inner._inuse=!0,this.zpp_inner.wrap_worldCOM.zpp_inner._immutable=!0,this.zpp_inner.wrap_worldCOM.zpp_inner._validate=$(d=this.zpp_inner,d.getworldCOM)}return this.zpp_inner.wrap_worldCOM},ze.prototype.get_localCOM=function(){return null==this.zpp_inner.wrap_localCOM&&(0==this.zpp_inner.type?this.zpp_inner.circle.setupLocalCOM():this.zpp_inner.polygon.setupLocalCOM()),this.zpp_inner.wrap_localCOM},ze.prototype.set_localCOM=function(e){this.zpp_inner.immutable_midstep("Body::localCOM"),null==this.zpp_inner.wrap_localCOM&&(0==this.zpp_inner.type?this.zpp_inner.circle.setupLocalCOM():this.zpp_inner.polygon.setupLocalCOM());var t=this.zpp_inner.wrap_localCOM,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner.wrap_localCOM&&(0==this.zpp_inner.type?this.zpp_inner.circle.setupLocalCOM():this.zpp_inner.polygon.setupLocalCOM()),this.zpp_inner.wrap_localCOM},ze.prototype.get_area=function(){return this.zpp_inner.validate_area_inertia(),this.zpp_inner.area},ze.prototype.get_inertia=function(){return this.zpp_inner.validate_area_inertia(),this.zpp_inner.inertia},ze.prototype.get_angDrag=function(){return this.zpp_inner.validate_angDrag(),this.zpp_inner.angDrag},ze.prototype.get_material=function(){return this.zpp_inner.material.wrapper()},ze.prototype.set_material=function(e){return this.zpp_inner.immutable_midstep("Shape::material"),this.zpp_inner.setMaterial(e.zpp_inner),this.zpp_inner.material.wrapper()},ze.prototype.get_filter=function(){return this.zpp_inner.filter.wrapper()},ze.prototype.set_filter=function(e){return this.zpp_inner.immutable_midstep("Shape::filter"),this.zpp_inner.setFilter(e.zpp_inner),this.zpp_inner.filter.wrapper()},ze.prototype.get_fluidProperties=function(){return this.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==this.zpp_inner.fluidProperties&&this.zpp_inner.setFluid((new se).zpp_inner),this.zpp_inner.fluidProperties.wrapper()},ze.prototype.set_fluidProperties=function(e){return this.zpp_inner.setFluid(e.zpp_inner),this.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==this.zpp_inner.fluidProperties&&this.zpp_inner.setFluid((new se).zpp_inner),this.zpp_inner.fluidProperties.wrapper()},ze.prototype.get_fluidEnabled=function(){return this.zpp_inner.fluidEnabled},ze.prototype.set_fluidEnabled=function(e){return this.zpp_inner.immutable_midstep("Shape::fluidEnabled"),(this.zpp_inner.fluidEnabled=e)&&null==this.zpp_inner.fluidProperties&&(this.zpp_inner.setFluid((new se).zpp_inner),this.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==this.zpp_inner.fluidProperties&&this.zpp_inner.setFluid((new se).zpp_inner),this.zpp_inner.fluidProperties.wrapper()),this.zpp_inner.wake(),this.zpp_inner.fluidEnabled},ze.prototype.get_sensorEnabled=function(){return this.zpp_inner.sensorEnabled},ze.prototype.set_sensorEnabled=function(e){return this.zpp_inner.immutable_midstep("Shape::sensorEnabled"),this.zpp_inner.sensorEnabled=e,this.zpp_inner.wake(),this.zpp_inner.sensorEnabled},ze.prototype.get_bounds=function(){return this.zpp_inner.aabb.wrapper()},ze.prototype.translate=function(e){if(this.zpp_inner.immutable_midstep("Shape::translate()"),0<e.lsq())if(0==this.zpp_inner.type){var t=e.zpp_inner;null!=t._validate&&t._validate();var i=e.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate(),this.zpp_inner.circle.__translate(i,e.zpp_inner.y)}else{var r=e.zpp_inner;null!=r._validate&&r._validate();var o=e.zpp_inner.x,a=e.zpp_inner;null!=a._validate&&a._validate(),this.zpp_inner.polygon.__translate(o,e.zpp_inner.y)}if(e.zpp_inner.weak){var s=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=s.outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=ep.zpp_pool,ep.zpp_pool=s}return this},ze.prototype.scale=function(e,t){if(this.zpp_inner.immutable_midstep("Shape::scale()"),0==this.zpp_inner.type){var i=e*e-t*t;i*i<Qs.epsilon*Qs.epsilon&&this.zpp_inner.circle.__scale(e,t)}else this.zpp_inner.polygon.__scale(e,t);return this},ze.prototype.rotate=function(e){if(this.zpp_inner.immutable_midstep("Shape::rotate()"),e%(2*Math.PI)!=0){var t=Math.cos(e),i=Math.sin(e);0==this.zpp_inner.type?this.zpp_inner.circle.__rotate(i,t):this.zpp_inner.polygon.__rotate(i,t)}return this},ze.prototype.transform=function(e){return this.zpp_inner.immutable_midstep("Shape::transform()"),0==this.zpp_inner.type?e.equiorthogonal()&&this.zpp_inner.circle.__transform(e):this.zpp_inner.polygon.__transform(e),this},ze.prototype.contains=function(e){bt.validateShape(this.zpp_inner);var t=e.zpp_inner;null!=t._validate&&t._validate();var i=$s.shapeContains(this.zpp_inner,e.zpp_inner);if(e.zpp_inner.weak){var n=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n._isimmutable=null,n._validate=null,n._invalidate=null,n.next=ep.zpp_pool,ep.zpp_pool=n}return i},ze.prototype.copy=function(){return this.zpp_inner.copy()},ze.prototype.toString=function(){return(0==this.zpp_inner.type?"Circle":"Polygon")+"#"+this.zpp_inner_i.id},Object.defineProperty(ze.prototype,"type",{get:ze.prototype.get_type}),Object.defineProperty(ze.prototype,"body",{get:ze.prototype.get_body,set:ze.prototype.set_body}),Object.defineProperty(ze.prototype,"castCircle",{get:ze.prototype.get_castCircle}),Object.defineProperty(ze.prototype,"castPolygon",{get:ze.prototype.get_castPolygon}),Object.defineProperty(ze.prototype,"worldCOM",{get:ze.prototype.get_worldCOM}),Object.defineProperty(ze.prototype,"localCOM",{get:ze.prototype.get_localCOM,set:ze.prototype.set_localCOM}),Object.defineProperty(ze.prototype,"area",{get:ze.prototype.get_area}),Object.defineProperty(ze.prototype,"inertia",{get:ze.prototype.get_inertia}),Object.defineProperty(ze.prototype,"angDrag",{get:ze.prototype.get_angDrag}),Object.defineProperty(ze.prototype,"material",{get:ze.prototype.get_material,set:ze.prototype.set_material}),Object.defineProperty(ze.prototype,"filter",{get:ze.prototype.get_filter,set:ze.prototype.set_filter}),Object.defineProperty(ze.prototype,"fluidProperties",{get:ze.prototype.get_fluidProperties,set:ze.prototype.set_fluidProperties}),Object.defineProperty(ze.prototype,"fluidEnabled",{get:ze.prototype.get_fluidEnabled,set:ze.prototype.set_fluidEnabled}),Object.defineProperty(ze.prototype,"sensorEnabled",{get:ze.prototype.get_sensorEnabled,set:ze.prototype.set_sensorEnabled}),Object.defineProperty(ze.prototype,"bounds",{get:ze.prototype.get_bounds}),ze.prototype.__class__=ze;var ce=nape.shape.Circle=function(e,t,i,n){if(this.zpp_inner_zn=null,ze.call(this),this.zpp_inner_zn=new Qt,((this.zpp_inner_zn.outer=this).zpp_inner_zn.outer_zn=this).zpp_inner=this.zpp_inner_zn,this.zpp_inner_i=this.zpp_inner,(this.zpp_inner_i.outer_i=this).zpp_inner.immutable_midstep("Circle::radius"),e!=this.zpp_inner_zn.radius&&(this.zpp_inner_zn.radius=e,this.zpp_inner_zn.invalidate_radius()),null==t)this.zpp_inner.localCOMx=0,this.zpp_inner.localCOMy=0;else{var r=t.zpp_inner;null!=r._validate&&r._validate(),this.zpp_inner.localCOMx=t.zpp_inner.x;var o=t.zpp_inner;if(null!=o._validate&&o._validate(),this.zpp_inner.localCOMy=t.zpp_inner.y,t.zpp_inner.weak){var a=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=ep.zpp_pool,ep.zpp_pool=a}}null==i?null==Zt.zpp_pool?this.zpp_inner.material=new Zt:(this.zpp_inner.material=Zt.zpp_pool,Zt.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null):(this.zpp_inner.immutable_midstep("Shape::material"),this.zpp_inner.setMaterial(i.zpp_inner),this.zpp_inner.material.wrapper()),null==n?null==mt.zpp_pool?this.zpp_inner.filter=new mt:(this.zpp_inner.filter=mt.zpp_pool,mt.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null):(this.zpp_inner.immutable_midstep("Shape::filter"),this.zpp_inner.setFilter(n.zpp_inner),this.zpp_inner.filter.wrapper()),this.zpp_inner_i.insert_cbtype(Ie.ANY_SHAPE.zpp_inner)};ce.__name__=["nape","shape","Circle"],ce.__super__=ze,ce.prototype=Object.create(ze.prototype),ce.prototype.zpp_inner_zn=null,ce.prototype.get_radius=function(){return this.zpp_inner_zn.radius},ce.prototype.set_radius=function(e){return this.zpp_inner.immutable_midstep("Circle::radius"),e!=this.zpp_inner_zn.radius&&(this.zpp_inner_zn.radius=e,this.zpp_inner_zn.invalidate_radius()),this.zpp_inner_zn.radius},Object.defineProperty(ce.prototype,"radius",{get:ce.prototype.get_radius,set:ce.prototype.set_radius}),ce.prototype.__class__=ce;var _e=nape.shape.Edge=function(){this.zpp_inner=null};_e.__name__=["nape","shape","Edge"],_e.prototype.zpp_inner=null,_e.prototype.get_polygon=function(){return this.zpp_inner.polygon.outer_zn},_e.prototype.get_localNormal=function(){return null==this.zpp_inner.wrap_lnorm&&this.zpp_inner.getlnorm(),this.zpp_inner.wrap_lnorm},_e.prototype.get_worldNormal=function(){return null==this.zpp_inner.wrap_gnorm&&this.zpp_inner.getgnorm(),this.zpp_inner.wrap_gnorm},_e.prototype.get_length=function(){return this.zpp_inner.polygon.validate_laxi(),this.zpp_inner.length},_e.prototype.get_localProjection=function(){return this.zpp_inner.polygon.validate_laxi(),this.zpp_inner.lprojection},_e.prototype.get_worldProjection=function(){var e=this.zpp_inner.polygon;if(e.zip_gaxi&&null!=e.body){e.zip_gaxi=!1,e.validate_laxi();var t=e.body;if(t.zip_axis&&(t.zip_axis=!1,t.axisx=Math.sin(t.rot),t.axisy=Math.cos(t.rot)),e.zip_gverts&&null!=e.body){e.zip_gverts=!1,e.validate_lverts();var i=e.body;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));for(var n=e.lverts.next,r=e.gverts.next;null!=r;){var o=r,a=n;n=n.next,o.x=e.body.posx+(e.body.axisy*a.x-e.body.axisx*a.y),o.y=e.body.posy+(a.x*e.body.axisx+a.y*e.body.axisy),r=r.next}}var s=e.edges.head,p=e.gverts.next,l=p;for(p=p.next;null!=p;){var h=p,u=s.elt;s=s.next,u.gp0=l,u.gp1=h,u.gnormx=e.body.axisy*u.lnormx-e.body.axisx*u.lnormy,u.gnormy=u.lnormx*e.body.axisx+u.lnormy*e.body.axisy,u.gprojection=e.body.posx*u.gnormx+e.body.posy*u.gnormy+u.lprojection,null!=u.wrap_gnorm&&(u.wrap_gnorm.zpp_inner.x=u.gnormx,u.wrap_gnorm.zpp_inner.y=u.gnormy),u.tp0=u.gp0.y*u.gnormx-u.gp0.x*u.gnormy,u.tp1=u.gp1.y*u.gnormx-u.gp1.x*u.gnormy,l=h,p=p.next}var d=s.elt;d.gp0=l,d.gp1=e.gverts.next,d.gnormx=e.body.axisy*d.lnormx-e.body.axisx*d.lnormy,d.gnormy=d.lnormx*e.body.axisx+d.lnormy*e.body.axisy,d.gprojection=e.body.posx*d.gnormx+e.body.posy*d.gnormy+d.lprojection,null!=d.wrap_gnorm&&(d.wrap_gnorm.zpp_inner.x=d.gnormx,d.wrap_gnorm.zpp_inner.y=d.gnormy),d.tp0=d.gp0.y*d.gnormx-d.gp0.x*d.gnormy,d.tp1=d.gp1.y*d.gnormx-d.gp1.x*d.gnormy}return this.zpp_inner.gprojection},_e.prototype.get_localVertex1=function(){this.zpp_inner.polygon.validate_laxi();var e=this.zpp_inner.lp0;if(null==e.outer){e.outer=new lt;var t=e.outer.zpp_inner;null!=t.outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=ep.zpp_pool,ep.zpp_pool=t,e.outer.zpp_inner=e}return e.outer},_e.prototype.get_localVertex2=function(){this.zpp_inner.polygon.validate_laxi();var e=this.zpp_inner.lp1;if(null==e.outer){e.outer=new lt;var t=e.outer.zpp_inner;null!=t.outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=ep.zpp_pool,ep.zpp_pool=t,e.outer.zpp_inner=e}return e.outer},_e.prototype.get_worldVertex1=function(){var e=this.zpp_inner.polygon;if(e.zip_gaxi&&null!=e.body){e.zip_gaxi=!1,e.validate_laxi();var t=e.body;if(t.zip_axis&&(t.zip_axis=!1,t.axisx=Math.sin(t.rot),t.axisy=Math.cos(t.rot)),e.zip_gverts&&null!=e.body){e.zip_gverts=!1,e.validate_lverts();var i=e.body;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));for(var n=e.lverts.next,r=e.gverts.next;null!=r;){var o=r,a=n;n=n.next,o.x=e.body.posx+(e.body.axisy*a.x-e.body.axisx*a.y),o.y=e.body.posy+(a.x*e.body.axisx+a.y*e.body.axisy),r=r.next}}var s=e.edges.head,p=e.gverts.next,l=p;for(p=p.next;null!=p;){var h=p,u=s.elt;s=s.next,u.gp0=l,u.gp1=h,u.gnormx=e.body.axisy*u.lnormx-e.body.axisx*u.lnormy,u.gnormy=u.lnormx*e.body.axisx+u.lnormy*e.body.axisy,u.gprojection=e.body.posx*u.gnormx+e.body.posy*u.gnormy+u.lprojection,null!=u.wrap_gnorm&&(u.wrap_gnorm.zpp_inner.x=u.gnormx,u.wrap_gnorm.zpp_inner.y=u.gnormy),u.tp0=u.gp0.y*u.gnormx-u.gp0.x*u.gnormy,u.tp1=u.gp1.y*u.gnormx-u.gp1.x*u.gnormy,l=h,p=p.next}var d=s.elt;d.gp0=l,d.gp1=e.gverts.next,d.gnormx=e.body.axisy*d.lnormx-e.body.axisx*d.lnormy,d.gnormy=d.lnormx*e.body.axisx+d.lnormy*e.body.axisy,d.gprojection=e.body.posx*d.gnormx+e.body.posy*d.gnormy+d.lprojection,null!=d.wrap_gnorm&&(d.wrap_gnorm.zpp_inner.x=d.gnormx,d.wrap_gnorm.zpp_inner.y=d.gnormy),d.tp0=d.gp0.y*d.gnormx-d.gp0.x*d.gnormy,d.tp1=d.gp1.y*d.gnormx-d.gp1.x*d.gnormy}var c=this.zpp_inner.gp0;if(null==c.outer){c.outer=new lt;var _=c.outer.zpp_inner;null!=_.outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=ep.zpp_pool,ep.zpp_pool=_,c.outer.zpp_inner=c}return c.outer},_e.prototype.get_worldVertex2=function(){var e=this.zpp_inner.polygon;if(e.zip_gaxi&&null!=e.body){e.zip_gaxi=!1,e.validate_laxi();var t=e.body;if(t.zip_axis&&(t.zip_axis=!1,t.axisx=Math.sin(t.rot),t.axisy=Math.cos(t.rot)),e.zip_gverts&&null!=e.body){e.zip_gverts=!1,e.validate_lverts();var i=e.body;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));for(var n=e.lverts.next,r=e.gverts.next;null!=r;){var o=r,a=n;n=n.next,o.x=e.body.posx+(e.body.axisy*a.x-e.body.axisx*a.y),o.y=e.body.posy+(a.x*e.body.axisx+a.y*e.body.axisy),r=r.next}}var s=e.edges.head,p=e.gverts.next,l=p;for(p=p.next;null!=p;){var h=p,u=s.elt;s=s.next,u.gp0=l,u.gp1=h,u.gnormx=e.body.axisy*u.lnormx-e.body.axisx*u.lnormy,u.gnormy=u.lnormx*e.body.axisx+u.lnormy*e.body.axisy,u.gprojection=e.body.posx*u.gnormx+e.body.posy*u.gnormy+u.lprojection,null!=u.wrap_gnorm&&(u.wrap_gnorm.zpp_inner.x=u.gnormx,u.wrap_gnorm.zpp_inner.y=u.gnormy),u.tp0=u.gp0.y*u.gnormx-u.gp0.x*u.gnormy,u.tp1=u.gp1.y*u.gnormx-u.gp1.x*u.gnormy,l=h,p=p.next}var d=s.elt;d.gp0=l,d.gp1=e.gverts.next,d.gnormx=e.body.axisy*d.lnormx-e.body.axisx*d.lnormy,d.gnormy=d.lnormx*e.body.axisx+d.lnormy*e.body.axisy,d.gprojection=e.body.posx*d.gnormx+e.body.posy*d.gnormy+d.lprojection,null!=d.wrap_gnorm&&(d.wrap_gnorm.zpp_inner.x=d.gnormx,d.wrap_gnorm.zpp_inner.y=d.gnormy),d.tp0=d.gp0.y*d.gnormx-d.gp0.x*d.gnormy,d.tp1=d.gp1.y*d.gnormx-d.gp1.x*d.gnormy}var c=this.zpp_inner.gp1;if(null==c.outer){c.outer=new lt;var _=c.outer.zpp_inner;null!=_.outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=ep.zpp_pool,ep.zpp_pool=_,c.outer.zpp_inner=c}return c.outer},_e.prototype.toString=function(){if(null==this.zpp_inner.polygon)return"Edge(object-pooled)";if(null==this.zpp_inner.polygon.body)return this.zpp_inner.polygon.validate_laxi(),"{ localNormal : { x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" } }";var e=this.zpp_inner.polygon;if(e.zip_gaxi&&null!=e.body){e.zip_gaxi=!1,e.validate_laxi();var t=e.body;if(t.zip_axis&&(t.zip_axis=!1,t.axisx=Math.sin(t.rot),t.axisy=Math.cos(t.rot)),e.zip_gverts&&null!=e.body){e.zip_gverts=!1,e.validate_lverts();var i=e.body;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));for(var n=e.lverts.next,r=e.gverts.next;null!=r;){var o=r,a=n;n=n.next,o.x=e.body.posx+(e.body.axisy*a.x-e.body.axisx*a.y),o.y=e.body.posy+(a.x*e.body.axisx+a.y*e.body.axisy),r=r.next}}var s=e.edges.head,p=e.gverts.next,l=p;for(p=p.next;null!=p;){var h=p,u=s.elt;s=s.next,u.gp0=l,u.gp1=h,u.gnormx=e.body.axisy*u.lnormx-e.body.axisx*u.lnormy,u.gnormy=u.lnormx*e.body.axisx+u.lnormy*e.body.axisy,u.gprojection=e.body.posx*u.gnormx+e.body.posy*u.gnormy+u.lprojection,null!=u.wrap_gnorm&&(u.wrap_gnorm.zpp_inner.x=u.gnormx,u.wrap_gnorm.zpp_inner.y=u.gnormy),u.tp0=u.gp0.y*u.gnormx-u.gp0.x*u.gnormy,u.tp1=u.gp1.y*u.gnormx-u.gp1.x*u.gnormy,l=h,p=p.next}var d=s.elt;d.gp0=l,d.gp1=e.gverts.next,d.gnormx=e.body.axisy*d.lnormx-e.body.axisx*d.lnormy,d.gnormy=d.lnormx*e.body.axisx+d.lnormy*e.body.axisy,d.gprojection=e.body.posx*d.gnormx+e.body.posy*d.gnormy+d.lprojection,null!=d.wrap_gnorm&&(d.wrap_gnorm.zpp_inner.x=d.gnormx,d.wrap_gnorm.zpp_inner.y=d.gnormy),d.tp0=d.gp0.y*d.gnormx-d.gp0.x*d.gnormy,d.tp1=d.gp1.y*d.gnormx-d.gp1.x*d.gnormy}return"{ localNormal : { x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" } worldNormal : { x: "+this.zpp_inner.gnormx+" y: "+this.zpp_inner.gnormy+" } }"},Object.defineProperty(_e.prototype,"polygon",{get:_e.prototype.get_polygon}),Object.defineProperty(_e.prototype,"localNormal",{get:_e.prototype.get_localNormal}),Object.defineProperty(_e.prototype,"worldNormal",{get:_e.prototype.get_worldNormal}),Object.defineProperty(_e.prototype,"length",{get:_e.prototype.get_length}),Object.defineProperty(_e.prototype,"localProjection",{get:_e.prototype.get_localProjection}),Object.defineProperty(_e.prototype,"worldProjection",{get:_e.prototype.get_worldProjection}),Object.defineProperty(_e.prototype,"localVertex1",{get:_e.prototype.get_localVertex1}),Object.defineProperty(_e.prototype,"localVertex2",{get:_e.prototype.get_localVertex2}),Object.defineProperty(_e.prototype,"worldVertex1",{get:_e.prototype.get_worldVertex1}),Object.defineProperty(_e.prototype,"worldVertex2",{get:_e.prototype.get_worldVertex2}),_e.prototype.__class__=_e;var it=nape.shape.EdgeIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};it.__name__=["nape","shape","EdgeIterator"],it.get=function(e){var t;if(null==it.zpp_pool){Dn.internal=!0;var i=new it;Dn.internal=!1,t=i}else{var n=it.zpp_pool;it.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},it.prototype.zpp_inner=null,it.prototype.zpp_i=null,it.prototype.zpp_critical=null,it.prototype.zpp_next=null,it.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=it.zpp_pool,(it.zpp_pool=this).zpp_inner=null,!1)},it.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},it.prototype.__class__=it;var ye=nape.shape.EdgeList=function(){this.zpp_inner=null,this.zpp_inner=new Dn,this.zpp_inner.outer=this};ye.__name__=["nape","shape","EdgeList"],ye.fromArray=function(e){for(var t=new ye,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},ye.prototype.zpp_inner=null,ye.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},ye.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},ye.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=e==this.zpp_inner.user_length-1?e:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length-2-e)),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.wrapper()},ye.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},ye.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},ye.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var n=(e=null==(i=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:i.next.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.wrapper()},ye.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var i=(e=null==(t=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:t.next.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.wrapper()},ye.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},ye.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},ye.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},ye.prototype.empty=function(){return null==this.zpp_inner.inner.head},ye.prototype.iterator=function(){return this.zpp_inner.valmod(),it.get(this)},ye.prototype.copy=function(e){null==e&&(e=!1);var t=new ye;this.zpp_inner.valmod();for(var i=it.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=it.zpp_pool,(it.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},ye.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=it.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=it.zpp_pool,(it.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||(this.zpp_inner.reverse_flag?this.push(r):this.unshift(r))}},ye.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=it.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=it.zpp_pool,(it.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},ye.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=it.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=it.zpp_pool,(it.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=it.zpp_pool,(it.zpp_pool=t).zpp_inner=null;break}}return this},ye.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(ye.prototype,"length",{get:ye.prototype.get_length}),ye.prototype.__class__=ye;var xe=nape.shape.Polygon=function(e,t,i){if(this.zpp_inner_zn=null,ze.call(this),this.zpp_inner_zn=new ei,((this.zpp_inner_zn.outer=this).zpp_inner_zn.outer_zn=this).zpp_inner=this.zpp_inner_zn,this.zpp_inner_i=this.zpp_inner,this.zpp_inner_i.outer_i=this,e instanceof Array&&null==e.__enum__)for(var n=e,r=0;r<n.length;){var o=n[r];++r;var a=o;null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();var s=this.zpp_inner_zn.wrap_lverts,p=a.zpp_inner;null!=p._validate&&p._validate();var l=a.zpp_inner.x,h=a.zpp_inner;null!=h._validate&&h._validate();var u,d=a.zpp_inner.y;if(null==jn.poolVec2?u=new lt:(u=jn.poolVec2,jn.poolVec2=u.zpp_pool,u.zpp_pool=null),null==u.zpp_inner){var c;null==ep.zpp_pool?c=new ep:(c=ep.zpp_pool,ep.zpp_pool=c.next,c.next=null),c.weak=!1,c._immutable=!1,c.x=l,c.y=d,u.zpp_inner=c,u.zpp_inner.outer=u}else{var _,y=u.zpp_inner;if(null!=y._validate&&y._validate(),u.zpp_inner.x==l){var x=u.zpp_inner;null!=x._validate&&x._validate(),_=u.zpp_inner.y==d}else _=!1;if(!_){u.zpp_inner.x=l,u.zpp_inner.y=d;var m=u.zpp_inner;null!=m._invalidate&&m._invalidate(m)}}u.zpp_inner.weak=!1,s.push(u)}else if(fe.__instanceof(e,ve))for(var g=e.iterator();;){g.zpp_inner.zpp_inner.valmod();var f=g.zpp_inner.zpp_gl();if(g.zpp_critical=!0,!(g.zpp_i<f||(g.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=g).zpp_inner=null,!1)))break;g.zpp_critical=!1;var v=g.zpp_inner.at(g.zpp_i++);null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();var z=this.zpp_inner_zn.wrap_lverts,w=v.zpp_inner;null!=w._validate&&w._validate();var b=v.zpp_inner.x,S=v.zpp_inner;null!=S._validate&&S._validate();var C,M=v.zpp_inner.y;if(null==jn.poolVec2?C=new lt:(C=jn.poolVec2,jn.poolVec2=C.zpp_pool,C.zpp_pool=null),null==C.zpp_inner){var P;null==ep.zpp_pool?P=new ep:(P=ep.zpp_pool,ep.zpp_pool=P.next,P.next=null),P.weak=!1,P._immutable=!1,P.x=b,P.y=M,C.zpp_inner=P,C.zpp_inner.outer=C}else{var k,T=C.zpp_inner;if(null!=T._validate&&T._validate(),C.zpp_inner.x==b){var A=C.zpp_inner;null!=A._validate&&A._validate(),k=C.zpp_inner.y==M}else k=!1;if(!k){C.zpp_inner.x=b,C.zpp_inner.y=M;var O=C.zpp_inner;null!=O._invalidate&&O._invalidate(O)}}C.zpp_inner.weak=!1,z.push(C)}else if(fe.__instanceof(e,wn)){var E=e.zpp_inner.vertices;if(null!=E)for(var G=E;;){var D,I=G.x,L=G.y;if(null==jn.poolVec2?D=new lt:(D=jn.poolVec2,jn.poolVec2=D.zpp_pool,D.zpp_pool=null),null==D.zpp_inner){var B;null==ep.zpp_pool?B=new ep:(B=ep.zpp_pool,ep.zpp_pool=B.next,B.next=null),B.weak=!1,B._immutable=!1,B.x=I,B.y=L,D.zpp_inner=B,D.zpp_inner.outer=D}else{var R,F=D.zpp_inner;if(null!=F._validate&&F._validate(),D.zpp_inner.x==I){var j=D.zpp_inner;null!=j._validate&&j._validate(),R=D.zpp_inner.y==L}else R=!1;if(!R){D.zpp_inner.x=I,D.zpp_inner.y=L;var N=D.zpp_inner;null!=N._invalidate&&N._invalidate(N)}}D.zpp_inner.weak=!1;var U=D;G=G.next,null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();var V=this.zpp_inner_zn.wrap_lverts,H=U.zpp_inner;null!=H._validate&&H._validate();var W=U.zpp_inner.x,q=U.zpp_inner;null!=q._validate&&q._validate();var X,Y=U.zpp_inner.y;if(null==jn.poolVec2?X=new lt:(X=jn.poolVec2,jn.poolVec2=X.zpp_pool,X.zpp_pool=null),null==X.zpp_inner){var K;null==ep.zpp_pool?K=new ep:(K=ep.zpp_pool,ep.zpp_pool=K.next,K.next=null),K.weak=!1,K._immutable=!1,K.x=W,K.y=Y,X.zpp_inner=K,X.zpp_inner.outer=X}else{var Z,J=X.zpp_inner;if(null!=J._validate&&J._validate(),X.zpp_inner.x==W){var Q=X.zpp_inner;null!=Q._validate&&Q._validate(),Z=X.zpp_inner.y==Y}else Z=!1;if(!Z){X.zpp_inner.x=W,X.zpp_inner.y=Y;var $=X.zpp_inner;null!=$._invalidate&&$._invalidate($)}}X.zpp_inner.weak=!1,V.push(X);var ee=U.zpp_inner;U.zpp_inner.outer=null,U.zpp_inner=null;var te=U;te.zpp_pool=jn.poolVec2,jn.poolVec2=te;var ie=ee;if(null!=ie.outer&&(ie.outer.zpp_inner=null,ie.outer=null),ie._isimmutable=null,ie._validate=null,ie._invalidate=null,ie.next=ep.zpp_pool,ep.zpp_pool=ie,G==E)break}}if(e instanceof Array&&null==e.__enum__)for(var ne=e,re=0;re<ne.length;){var oe,ae=ne[re];if(ae.zpp_inner.weak){var se=ae.zpp_inner;ae.zpp_inner.outer=null,ae.zpp_inner=null;var pe=ae;pe.zpp_pool=jn.poolVec2,jn.poolVec2=pe;var le=se;null!=le.outer&&(le.outer.zpp_inner=null,le.outer=null),le._isimmutable=null,le._validate=null,le._invalidate=null,le.next=ep.zpp_pool,ep.zpp_pool=le,oe=!0}else oe=!1;oe?ne.splice(re,1):++re}else if(fe.__instanceof(e,ve)){var he=e;null!=he.zpp_inner._validate&&he.zpp_inner._validate();for(var ue=he.zpp_inner.inner,de=null,ce=ue.head;null!=ce;){var _e=ce.elt;if(_e.outer.zpp_inner.weak){if(ce=ue.erase(de),_e.outer.zpp_inner.weak){var ye=_e.outer,xe=ye.zpp_inner;ye.zpp_inner.outer=null,ye.zpp_inner=null;var me=ye;me.zpp_pool=jn.poolVec2,jn.poolVec2=me;var ge=xe;null!=ge.outer&&(ge.outer.zpp_inner=null,ge.outer=null),ge._isimmutable=null,ge._validate=null,ge._invalidate=null,ge.next=ep.zpp_pool,ep.zpp_pool=ge}}else ce=(de=ce).next}}null==t?null==Zt.zpp_pool?this.zpp_inner.material=new Zt:(this.zpp_inner.material=Zt.zpp_pool,Zt.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null):(this.zpp_inner.immutable_midstep("Shape::material"),this.zpp_inner.setMaterial(t.zpp_inner),this.zpp_inner.material.wrapper()),null==i?null==mt.zpp_pool?this.zpp_inner.filter=new mt:(this.zpp_inner.filter=mt.zpp_pool,mt.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null):(this.zpp_inner.immutable_midstep("Shape::filter"),this.zpp_inner.setFilter(i.zpp_inner),this.zpp_inner.filter.wrapper()),this.zpp_inner_i.insert_cbtype(Ie.ANY_SHAPE.zpp_inner)};xe.__name__=["nape","shape","Polygon"],xe.__super__=ze,xe.prototype=Object.create(ze.prototype),xe.rect=function(e,t,i,n,r){var o;if(null==r&&(r=!1),null==jn.poolVec2?o=new lt:(o=jn.poolVec2,jn.poolVec2=o.zpp_pool,o.zpp_pool=null),null==o.zpp_inner){var a;null==ep.zpp_pool?a=new ep:(a=ep.zpp_pool,ep.zpp_pool=a.next,a.next=null),a.weak=!1,a._immutable=!1,a.x=e,a.y=t,o.zpp_inner=a,o.zpp_inner.outer=o}else{var s,p=o.zpp_inner;if(null!=p._validate&&p._validate(),o.zpp_inner.x==e){var l=o.zpp_inner;null!=l._validate&&l._validate(),s=o.zpp_inner.y==t}else s=!1;if(!s){o.zpp_inner.x=e,o.zpp_inner.y=t;var h=o.zpp_inner;null!=h._invalidate&&h._invalidate(h)}}o.zpp_inner.weak=r;var u,d=o,c=e+i;if(null==jn.poolVec2?u=new lt:(u=jn.poolVec2,jn.poolVec2=u.zpp_pool,u.zpp_pool=null),null==u.zpp_inner){var _;null==ep.zpp_pool?_=new ep:(_=ep.zpp_pool,ep.zpp_pool=_.next,_.next=null),_.weak=!1,_._immutable=!1,_.x=c,_.y=t,u.zpp_inner=_,u.zpp_inner.outer=u}else{var y,x=u.zpp_inner;if(null!=x._validate&&x._validate(),u.zpp_inner.x==c){var m=u.zpp_inner;null!=m._validate&&m._validate(),y=u.zpp_inner.y==t}else y=!1;if(!y){u.zpp_inner.x=c,u.zpp_inner.y=t;var g=u.zpp_inner;null!=g._invalidate&&g._invalidate(g)}}u.zpp_inner.weak=r;var f,v=u,z=e+i,w=t+n;if(null==jn.poolVec2?f=new lt:(f=jn.poolVec2,jn.poolVec2=f.zpp_pool,f.zpp_pool=null),null==f.zpp_inner){var b;null==ep.zpp_pool?b=new ep:(b=ep.zpp_pool,ep.zpp_pool=b.next,b.next=null),b.weak=!1,b._immutable=!1,b.x=z,b.y=w,f.zpp_inner=b,f.zpp_inner.outer=f}else{var S,C=f.zpp_inner;if(null!=C._validate&&C._validate(),f.zpp_inner.x==z){var M=f.zpp_inner;null!=M._validate&&M._validate(),S=f.zpp_inner.y==w}else S=!1;if(!S){f.zpp_inner.x=z,f.zpp_inner.y=w;var P=f.zpp_inner;null!=P._invalidate&&P._invalidate(P)}}f.zpp_inner.weak=r;var k,T=f,A=t+n;if(null==jn.poolVec2?k=new lt:(k=jn.poolVec2,jn.poolVec2=k.zpp_pool,k.zpp_pool=null),null==k.zpp_inner){var O;null==ep.zpp_pool?O=new ep:(O=ep.zpp_pool,ep.zpp_pool=O.next,O.next=null),O.weak=!1,O._immutable=!1,O.x=e,O.y=A,k.zpp_inner=O,k.zpp_inner.outer=k}else{var E,G=k.zpp_inner;if(null!=G._validate&&G._validate(),k.zpp_inner.x==e){var D=k.zpp_inner;null!=D._validate&&D._validate(),E=k.zpp_inner.y==A}else E=!1;if(!E){k.zpp_inner.x=e,k.zpp_inner.y=A;var I=k.zpp_inner;null!=I._invalidate&&I._invalidate(I)}}return k.zpp_inner.weak=r,[d,v,T,k]},xe.box=function(e,t,i){return null==i&&(i=!1),xe.rect(-e/2,-t/2,e,t,i)},xe.regular=function(e,t,i,n,r){null==r&&(r=!1),null==n&&(n=0);for(var o=[],a=2*Math.PI/i,s=0;s<i;){var p,l=s++*a+n,h=Math.cos(l)*e,u=Math.sin(l)*t;if(null==jn.poolVec2?p=new lt:(p=jn.poolVec2,jn.poolVec2=p.zpp_pool,p.zpp_pool=null),null==p.zpp_inner){var d;null==ep.zpp_pool?d=new ep:(d=ep.zpp_pool,ep.zpp_pool=d.next,d.next=null),d.weak=!1,d._immutable=!1,d.x=h,d.y=u,p.zpp_inner=d,p.zpp_inner.outer=p}else{var c,_=p.zpp_inner;if(null!=_._validate&&_._validate(),p.zpp_inner.x==h){var y=p.zpp_inner;null!=y._validate&&y._validate(),c=p.zpp_inner.y==u}else c=!1;if(!c){p.zpp_inner.x=h,p.zpp_inner.y=u;var x=p.zpp_inner;null!=x._invalidate&&x._invalidate(x)}}p.zpp_inner.weak=r,o.push(p)}return o},xe.prototype.zpp_inner_zn=null,xe.prototype.get_localVerts=function(){return null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts(),this.zpp_inner_zn.wrap_lverts},xe.prototype.get_worldVerts=function(){return null==this.zpp_inner_zn.wrap_gverts&&this.zpp_inner_zn.getgverts(),this.zpp_inner_zn.wrap_gverts},xe.prototype.get_edges=function(){return null==this.zpp_inner_zn.wrap_edges&&this.zpp_inner_zn.getedges(),this.zpp_inner_zn.wrap_edges},xe.prototype.validity=function(){return this.zpp_inner_zn.valid()},Object.defineProperty(xe.prototype,"localVerts",{get:xe.prototype.get_localVerts}),Object.defineProperty(xe.prototype,"worldVerts",{get:xe.prototype.get_worldVerts}),Object.defineProperty(xe.prototype,"edges",{get:xe.prototype.get_edges}),xe.prototype.__class__=xe;var ht=nape.shape.ShapeIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};ht.__name__=["nape","shape","ShapeIterator"],ht.get=function(e){var t;if(null==ht.zpp_pool){In.internal=!0;var i=new ht;In.internal=!1,t=i}else{var n=ht.zpp_pool;ht.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},ht.prototype.zpp_inner=null,ht.prototype.zpp_i=null,ht.prototype.zpp_critical=null,ht.prototype.zpp_next=null,ht.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=ht.zpp_pool,(ht.zpp_pool=this).zpp_inner=null,!1)},ht.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},ht.prototype.__class__=ht;var me=nape.shape.ShapeList=function(){this.zpp_inner=null,this.zpp_inner=new In,this.zpp_inner.outer=this};me.__name__=["nape","shape","ShapeList"],me.fromArray=function(e){for(var t=new me,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},me.prototype.zpp_inner=null,me.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},me.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},me.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},me.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},me.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)i=null==this.zpp_inner.inner.head?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},me.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var n=(e=null==(i=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:i.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer},me.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);var i=(e=null==(t=1==this.zpp_inner.user_length?null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)))?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer},me.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},me.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},me.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},me.prototype.empty=function(){return null==this.zpp_inner.inner.head},me.prototype.iterator=function(){return this.zpp_inner.valmod(),ht.get(this)},me.prototype.copy=function(e){null==e&&(e=!1);var t=new me;this.zpp_inner.valmod();for(var i=ht.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=ht.zpp_pool,(ht.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},me.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=ht.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=ht.zpp_pool,(ht.zpp_pool=t).zpp_inner=null,!1)))break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||(this.zpp_inner.reverse_flag?this.push(r):this.unshift(r))}},me.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=ht.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=ht.zpp_pool,(ht.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},me.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=ht.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n=i.zpp_inner.user_length;if(t.zpp_critical=!0,!(t.zpp_i<n||(t.zpp_next=ht.zpp_pool,(ht.zpp_pool=t).zpp_inner=null,!1)))break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=ht.zpp_pool,(ht.zpp_pool=t).zpp_inner=null;break}}return this},me.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(me.prototype,"length",{get:me.prototype.get_length}),me.prototype.__class__=me;var ge=nape.shape.ShapeType=function(){};ge.__name__=["nape","shape","ShapeType"],ge.CIRCLE=null,ge.get_CIRCLE=function(){return null==Uo.ShapeType_CIRCLE&&(Uo.internal=!0,Uo.ShapeType_CIRCLE=new ge,Uo.internal=!1),Uo.ShapeType_CIRCLE},ge.POLYGON=null,ge.get_POLYGON=function(){return null==Uo.ShapeType_POLYGON&&(Uo.internal=!0,Uo.ShapeType_POLYGON=new ge,Uo.internal=!1),Uo.ShapeType_POLYGON},ge.prototype.toString=function(){return null==Uo.ShapeType_CIRCLE&&(Uo.internal=!0,Uo.ShapeType_CIRCLE=new ge,Uo.internal=!1),this==Uo.ShapeType_CIRCLE?"CIRCLE":(null==Uo.ShapeType_POLYGON&&(Uo.internal=!0,Uo.ShapeType_POLYGON=new ge,Uo.internal=!1),this==Uo.ShapeType_POLYGON?"POLYGON":"")},Object.defineProperty(ge,"CIRCLE",{get:ge.get_CIRCLE}),Object.defineProperty(ge,"POLYGON",{get:ge.get_POLYGON}),ge.prototype.__class__=ge;var we=nape.shape.ValidationResult=function(){};we.__name__=["nape","shape","ValidationResult"],we.VALID=null,we.get_VALID=function(){return null==Uo.ValidationResult_VALID&&(Uo.internal=!0,Uo.ValidationResult_VALID=new we,Uo.internal=!1),Uo.ValidationResult_VALID},we.DEGENERATE=null,we.get_DEGENERATE=function(){return null==Uo.ValidationResult_DEGENERATE&&(Uo.internal=!0,Uo.ValidationResult_DEGENERATE=new we,Uo.internal=!1),Uo.ValidationResult_DEGENERATE},we.CONCAVE=null,we.get_CONCAVE=function(){return null==Uo.ValidationResult_CONCAVE&&(Uo.internal=!0,Uo.ValidationResult_CONCAVE=new we,Uo.internal=!1),Uo.ValidationResult_CONCAVE},we.SELF_INTERSECTING=null,we.get_SELF_INTERSECTING=function(){return null==Uo.ValidationResult_SELF_INTERSECTING&&(Uo.internal=!0,Uo.ValidationResult_SELF_INTERSECTING=new we,Uo.internal=!1),Uo.ValidationResult_SELF_INTERSECTING},we.prototype.toString=function(){return null==Uo.ValidationResult_VALID&&(Uo.internal=!0,Uo.ValidationResult_VALID=new we,Uo.internal=!1),this==Uo.ValidationResult_VALID?"VALID":(null==Uo.ValidationResult_DEGENERATE&&(Uo.internal=!0,Uo.ValidationResult_DEGENERATE=new we,Uo.internal=!1),this==Uo.ValidationResult_DEGENERATE?"DEGENERATE":(null==Uo.ValidationResult_CONCAVE&&(Uo.internal=!0,Uo.ValidationResult_CONCAVE=new we,Uo.internal=!1),this==Uo.ValidationResult_CONCAVE?"CONCAVE":(null==Uo.ValidationResult_SELF_INTERSECTING&&(Uo.internal=!0,Uo.ValidationResult_SELF_INTERSECTING=new we,Uo.internal=!1),this==Uo.ValidationResult_SELF_INTERSECTING?"SELF_INTERSECTING":"")))},Object.defineProperty(we,"VALID",{get:we.get_VALID}),Object.defineProperty(we,"DEGENERATE",{get:we.get_DEGENERATE}),Object.defineProperty(we,"CONCAVE",{get:we.get_CONCAVE}),Object.defineProperty(we,"SELF_INTERSECTING",{get:we.get_SELF_INTERSECTING}),we.prototype.__class__=we;var be=nape.space.Broadphase=function(){};be.__name__=["nape","space","Broadphase"],be.DYNAMIC_AABB_TREE=null,be.get_DYNAMIC_AABB_TREE=function(){return null==Uo.Broadphase_DYNAMIC_AABB_TREE&&(Uo.internal=!0,Uo.Broadphase_DYNAMIC_AABB_TREE=new be,Uo.internal=!1),Uo.Broadphase_DYNAMIC_AABB_TREE},be.SWEEP_AND_PRUNE=null,be.get_SWEEP_AND_PRUNE=function(){return null==Uo.Broadphase_SWEEP_AND_PRUNE&&(Uo.internal=!0,Uo.Broadphase_SWEEP_AND_PRUNE=new be,Uo.internal=!1),Uo.Broadphase_SWEEP_AND_PRUNE},be.prototype.toString=function(){return null==Uo.Broadphase_DYNAMIC_AABB_TREE&&(Uo.internal=!0,Uo.Broadphase_DYNAMIC_AABB_TREE=new be,Uo.internal=!1),this==Uo.Broadphase_DYNAMIC_AABB_TREE?"DYNAMIC_AABB_TREE":(null==Uo.Broadphase_SWEEP_AND_PRUNE&&(Uo.internal=!0,Uo.Broadphase_SWEEP_AND_PRUNE=new be,Uo.internal=!1),this==Uo.Broadphase_SWEEP_AND_PRUNE?"SWEEP_AND_PRUNE":"")},Object.defineProperty(be,"DYNAMIC_AABB_TREE",{get:be.get_DYNAMIC_AABB_TREE}),Object.defineProperty(be,"SWEEP_AND_PRUNE",{get:be.get_SWEEP_AND_PRUNE}),be.prototype.__class__=be;var Se=nape.space.Space=function(e,t){if(this.zpp_inner=null,this.zpp_inner=new si(null==e?null:e.zpp_inner,t),this.zpp_inner.outer=this,null!=e&&e.zpp_inner.weak){var i=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=ep.zpp_pool,ep.zpp_pool=i}};Se.__name__=["nape","space","Space"],Se.prototype.zpp_inner=null,Se.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},Se.prototype.get_gravity=function(){return null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity(),this.zpp_inner.wrap_gravity},Se.prototype.set_gravity=function(e){null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity();var t=this.zpp_inner.wrap_gravity,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var p=t.zpp_inner;null!=p._validate&&p._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h}return null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity(),this.zpp_inner.wrap_gravity},Se.prototype.get_broadphase=function(){return this.zpp_inner.bphase.is_sweep?(null==Uo.Broadphase_SWEEP_AND_PRUNE&&(Uo.internal=!0,Uo.Broadphase_SWEEP_AND_PRUNE=new be,Uo.internal=!1),Uo.Broadphase_SWEEP_AND_PRUNE):(null==Uo.Broadphase_DYNAMIC_AABB_TREE&&(Uo.internal=!0,Uo.Broadphase_DYNAMIC_AABB_TREE=new be,Uo.internal=!1),Uo.Broadphase_DYNAMIC_AABB_TREE)},Se.prototype.get_sortContacts=function(){return this.zpp_inner.sortcontacts},Se.prototype.set_sortContacts=function(e){return this.zpp_inner.sortcontacts=e,this.zpp_inner.sortcontacts},Se.prototype.get_worldAngularDrag=function(){return this.zpp_inner.global_ang_drag},Se.prototype.set_worldAngularDrag=function(e){return this.zpp_inner.global_ang_drag=e,this.zpp_inner.global_ang_drag},Se.prototype.get_worldLinearDrag=function(){return this.zpp_inner.global_lin_drag},Se.prototype.set_worldLinearDrag=function(e){return this.zpp_inner.global_lin_drag=e,this.zpp_inner.global_lin_drag},Se.prototype.get_compounds=function(){return this.zpp_inner.wrap_compounds},Se.prototype.get_bodies=function(){return this.zpp_inner.wrap_bodies},Se.prototype.get_liveBodies=function(){return this.zpp_inner.wrap_live},Se.prototype.get_constraints=function(){return this.zpp_inner.wrap_constraints},Se.prototype.get_liveConstraints=function(){return this.zpp_inner.wrap_livecon},Se.prototype.visitBodies=function(e){var t=this.zpp_inner.wrap_bodies;t.zpp_inner.valmod();for(var i=$e.get(t);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=$e.zpp_pool,($e.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1,e(i.zpp_inner.at(i.zpp_i++))}var o=this.zpp_inner.wrap_compounds;o.zpp_inner.valmod();for(var a=et.get(o);;){a.zpp_inner.zpp_inner.valmod();var s=a.zpp_inner;s.zpp_inner.valmod(),s.zpp_inner.zip_length&&(s.zpp_inner.zip_length=!1,s.zpp_inner.user_length=s.zpp_inner.inner.length);var p=s.zpp_inner.user_length;if(a.zpp_critical=!0,!(a.zpp_i<p||(a.zpp_next=et.zpp_pool,(et.zpp_pool=a).zpp_inner=null,!1)))break;a.zpp_critical=!1,a.zpp_inner.at(a.zpp_i++).visitBodies(e)}},Se.prototype.visitConstraints=function(e){var t=this.zpp_inner.wrap_constraints;t.zpp_inner.valmod();for(var i=We.get(t);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=We.zpp_pool,(We.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1,e(i.zpp_inner.at(i.zpp_i++))}var o=this.zpp_inner.wrap_compounds;o.zpp_inner.valmod();for(var a=et.get(o);;){a.zpp_inner.zpp_inner.valmod();var s=a.zpp_inner;s.zpp_inner.valmod(),s.zpp_inner.zip_length&&(s.zpp_inner.zip_length=!1,s.zpp_inner.user_length=s.zpp_inner.inner.length);var p=s.zpp_inner.user_length;if(a.zpp_critical=!0,!(a.zpp_i<p||(a.zpp_next=et.zpp_pool,(et.zpp_pool=a).zpp_inner=null,!1)))break;a.zpp_critical=!1,a.zpp_inner.at(a.zpp_i++).visitConstraints(e)}},Se.prototype.visitCompounds=function(e){var t=this.zpp_inner.wrap_compounds;t.zpp_inner.valmod();for(var i=et.get(t);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r=n.zpp_inner.user_length;if(i.zpp_critical=!0,!(i.zpp_i<r||(i.zpp_next=et.zpp_pool,(et.zpp_pool=i).zpp_inner=null,!1)))break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);e(o),o.visitCompounds(e)}},Se.prototype.get_world=function(){return this.zpp_inner.__static},Se.prototype.get_arbiters=function(){if(null==this.zpp_inner.wrap_arbiters){var e=new ft;e.space=this.zpp_inner,this.zpp_inner.wrap_arbiters=e}return this.zpp_inner.wrap_arbiters},Se.prototype.get_listeners=function(){return this.zpp_inner.wrap_listeners},Se.prototype.clear=function(){this.zpp_inner.clear()},Se.prototype.step=function(e,t,i){null==i&&(i=10),null==t&&(t=10),this.zpp_inner.step(e,t,i)},Se.prototype.get_timeStamp=function(){return this.zpp_inner.stamp},Se.prototype.get_elapsedTime=function(){return this.zpp_inner.time},Se.prototype.interactionType=function(e,t){if(1==(null!=e.zpp_inner.body?e.zpp_inner.body.outer:null).zpp_inner.type&&1==(null!=t.zpp_inner.body?t.zpp_inner.body.outer:null).zpp_inner.type)return null;if((null!=e.zpp_inner.body?e.zpp_inner.body.outer:null)==(null!=t.zpp_inner.body?t.zpp_inner.body.outer:null))return null;var i,n=e.zpp_inner,r=t.zpp_inner,o=n.body,a=r.body;i=!1;for(var s,p,l=o.constraints.head;null!=l;){var h=l.elt;if(h.ignore&&h.pair_exists(o.id,a.id)){i=!0;break}l=l.next}if(i)p=!1;else{for(var u=n;null!=u&&null==u.group;)u=null!=u.ishape?u.ishape.body:null!=u.icompound?u.icompound.compound:u.ibody.compound;var d,c=null==u?null:u.group;if(null==c)d=!1;else{for(var _=r;null!=_&&null==_.group;)_=null!=_.ishape?_.ishape.body:null!=_.icompound?_.icompound.compound:_.ibody.compound;var y=null==_?null:_.group;if(null==y)d=!1;else{for(var x=!1;null!=c&&null!=y;){if(c==y){x=c.ignore;break}c.depth<y.depth?y=y.group:c=c.group}d=x}}p=!d}if(p){var m;if(n.sensorEnabled||r.sensorEnabled){var g=n.filter,f=r.filter;m=0!=(g.sensorMask&f.sensorGroup)&&0!=(f.sensorMask&g.sensorGroup)}else m=!1;if(m)s=2;else{var v;if(n.fluidEnabled||r.fluidEnabled){var z=n.filter,w=r.filter;v=0!=(z.fluidMask&w.fluidGroup)&&0!=(w.fluidMask&z.fluidGroup)}else v=!1;if(!!v&&!(0==o.imass&&0==a.imass&&0==o.iinertia&&0==a.iinertia))s=0;else{var b=n.filter,S=r.filter;s=0!=(b.collisionMask&S.collisionGroup)&&0!=(S.collisionMask&b.collisionGroup)&&!(0==o.imass&&0==a.imass&&0==o.iinertia&&0==a.iinertia)?1:-1}}}else s=-1;switch(s){case 0:return null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID;case 1:return null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION;case 2:return null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR;default:return null}},Se.prototype.shapesUnderPoint=function(e,t,i){var n=e.zpp_inner;null!=n._validate&&n._validate();var r=e.zpp_inner.x,o=e.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.shapesUnderPoint(r,e.zpp_inner.y,null==t?null:t.zpp_inner,i);if(e.zpp_inner.weak){var s=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=s.outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=ep.zpp_pool,ep.zpp_pool=s}return a},Se.prototype.bodiesUnderPoint=function(e,t,i){var n=e.zpp_inner;null!=n._validate&&n._validate();var r=e.zpp_inner.x,o=e.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.bodiesUnderPoint(r,e.zpp_inner.y,null==t?null:t.zpp_inner,i);if(e.zpp_inner.weak){var s=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=s.outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=ep.zpp_pool,ep.zpp_pool=s}return a},Se.prototype.shapesInAABB=function(e,t,i,n,r){return null==i&&(i=!0),null==t&&(t=!1),this.zpp_inner.shapesInAABB(e,i,t,null==n?null:n.zpp_inner,r)},Se.prototype.bodiesInAABB=function(e,t,i,n,r){return null==i&&(i=!0),null==t&&(t=!1),this.zpp_inner.bodiesInAABB(e,i,t,null==n?null:n.zpp_inner,r)},Se.prototype.shapesInCircle=function(e,t,i,n,r){null==i&&(i=!1);var o=this.zpp_inner.shapesInCircle(e,t,i,null==n?null:n.zpp_inner,r);if(e.zpp_inner.weak){var a=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=ep.zpp_pool,ep.zpp_pool=a}return o},Se.prototype.bodiesInCircle=function(e,t,i,n,r){null==i&&(i=!1);var o=this.zpp_inner.bodiesInCircle(e,t,i,null==n?null:n.zpp_inner,r);if(e.zpp_inner.weak){var a=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=ep.zpp_pool,ep.zpp_pool=a}return o},Se.prototype.shapesInShape=function(e,t,i,n){return null==t&&(t=!1),this.zpp_inner.shapesInShape(e.zpp_inner,t,null==i?null:i.zpp_inner,n)},Se.prototype.bodiesInShape=function(e,t,i,n){return null==t&&(t=!1),this.zpp_inner.bodiesInShape(e.zpp_inner,t,null==i?null:i.zpp_inner,n)},Se.prototype.shapesInBody=function(e,t,i){var n=null==i?new me:i,r=e.zpp_inner.wrap_shapes;r.zpp_inner.valmod();for(var o=ht.get(r);;){o.zpp_inner.zpp_inner.valmod();var a=o.zpp_inner;a.zpp_inner.valmod(),a.zpp_inner.zip_length&&(a.zpp_inner.zip_length=!1,a.zpp_inner.user_length=a.zpp_inner.inner.length);var s=a.zpp_inner.user_length;if(o.zpp_critical=!0,!(o.zpp_i<s||(o.zpp_next=ht.zpp_pool,(ht.zpp_pool=o).zpp_inner=null,!1)))break;o.zpp_critical=!1,this.shapesInShape(o.zpp_inner.at(o.zpp_i++),!1,t,n)}return n},Se.prototype.bodiesInBody=function(e,t,i){var n=null==i?new ee:i,r=e.zpp_inner.wrap_shapes;r.zpp_inner.valmod();for(var o=ht.get(r);;){o.zpp_inner.zpp_inner.valmod();var a=o.zpp_inner;a.zpp_inner.valmod(),a.zpp_inner.zip_length&&(a.zpp_inner.zip_length=!1,a.zpp_inner.user_length=a.zpp_inner.inner.length);var s=a.zpp_inner.user_length;if(o.zpp_critical=!0,!(o.zpp_i<s||(o.zpp_next=ht.zpp_pool,(ht.zpp_pool=o).zpp_inner=null,!1)))break;o.zpp_critical=!1,this.bodiesInShape(o.zpp_inner.at(o.zpp_i++),!1,t,n)}return n},Se.prototype.convexCast=function(e,t,i,n){return null==i&&(i=!1),this.zpp_inner.convexCast(e.zpp_inner,t,n,i)},Se.prototype.convexMultiCast=function(e,t,i,n,r){return null==i&&(i=!1),this.zpp_inner.convexMultiCast(e.zpp_inner,t,n,i,r)},Se.prototype.rayCast=function(e,t,i){return null==t&&(t=!1),this.zpp_inner.rayCast(e,t,i)},Se.prototype.rayMultiCast=function(e,t,i,n){return null==t&&(t=!1),this.zpp_inner.rayMultiCast(e,t,i,n)},Object.defineProperty(Se.prototype,"userData",{get:Se.prototype.get_userData}),Object.defineProperty(Se.prototype,"gravity",{get:Se.prototype.get_gravity,set:Se.prototype.set_gravity}),Object.defineProperty(Se.prototype,"broadphase",{get:Se.prototype.get_broadphase}),Object.defineProperty(Se.prototype,"sortContacts",{get:Se.prototype.get_sortContacts,set:Se.prototype.set_sortContacts}),Object.defineProperty(Se.prototype,"worldAngularDrag",{get:Se.prototype.get_worldAngularDrag,set:Se.prototype.set_worldAngularDrag}),Object.defineProperty(Se.prototype,"worldLinearDrag",{get:Se.prototype.get_worldLinearDrag,set:Se.prototype.set_worldLinearDrag}),Object.defineProperty(Se.prototype,"compounds",{get:Se.prototype.get_compounds}),Object.defineProperty(Se.prototype,"bodies",{get:Se.prototype.get_bodies}),Object.defineProperty(Se.prototype,"liveBodies",{get:Se.prototype.get_liveBodies}),Object.defineProperty(Se.prototype,"constraints",{get:Se.prototype.get_constraints}),Object.defineProperty(Se.prototype,"liveConstraints",{get:Se.prototype.get_liveConstraints}),Object.defineProperty(Se.prototype,"world",{get:Se.prototype.get_world}),Object.defineProperty(Se.prototype,"arbiters",{get:Se.prototype.get_arbiters}),Object.defineProperty(Se.prototype,"listeners",{get:Se.prototype.get_listeners}),Object.defineProperty(Se.prototype,"timeStamp",{get:Se.prototype.get_timeStamp}),Object.defineProperty(Se.prototype,"elapsedTime",{get:Se.prototype.get_elapsedTime}),Se.prototype.__class__=Se;var Ce=nape.util.Debug=function(){};Ce.__name__=["nape","util","Debug"],Ce.version=function(){return"Nape 2.0.19"},Ce.clearObjectPools=function(){for(;null!=We.zpp_pool;){var e=We.zpp_pool.zpp_next;We.zpp_pool.zpp_next=null,We.zpp_pool=e}for(;null!=tt.zpp_pool;){var t=tt.zpp_pool.zpp_next;tt.zpp_pool.zpp_next=null,tt.zpp_pool=t}for(;null!=$e.zpp_pool;){var i=$e.zpp_pool.zpp_next;$e.zpp_pool.zpp_next=null,$e.zpp_pool=i}for(;null!=et.zpp_pool;){var n=et.zpp_pool.zpp_next;et.zpp_pool.zpp_next=null,et.zpp_pool=n}for(;null!=He.zpp_pool;){var r=He.zpp_pool.zpp_next;He.zpp_pool.zpp_next=null,He.zpp_pool=r}for(;null!=Ve.zpp_pool;){var o=Ve.zpp_pool.zpp_next;Ve.zpp_pool.zpp_next=null,Ve.zpp_pool=o}for(;null!=Ke.zpp_pool;){var a=Ke.zpp_pool.zpp_next;Ke.zpp_pool.zpp_next=null,Ke.zpp_pool=a}for(;null!=Ze.zpp_pool;){var s=Ze.zpp_pool.zpp_next;Ze.zpp_pool.zpp_next=null,Ze.zpp_pool=s}for(;null!=Qe.zpp_pool;){var p=Qe.zpp_pool.zpp_next;Qe.zpp_pool.zpp_next=null,Qe.zpp_pool=p}for(;null!=Je.zpp_pool;){var l=Je.zpp_pool.zpp_next;Je.zpp_pool.zpp_next=null,Je.zpp_pool=l}for(;null!=ht.zpp_pool;){var h=ht.zpp_pool.zpp_next;ht.zpp_pool.zpp_next=null,ht.zpp_pool=h}for(;null!=it.zpp_pool;){var u=it.zpp_pool.zpp_next;it.zpp_pool.zpp_next=null,it.zpp_pool=u}for(;null!=Xe.zpp_pool;){var d=Xe.zpp_pool.zpp_next;Xe.zpp_pool.zpp_next=null,Xe.zpp_pool=d}for(;null!=qe.zpp_pool;){var c=qe.zpp_pool.zpp_next;qe.zpp_pool.zpp_next=null,qe.zpp_pool=c}for(;null!=Ye.zpp_pool;){var _=Ye.zpp_pool.zpp_next;Ye.zpp_pool.zpp_next=null,Ye.zpp_pool=_}for(;null!=ji.zpp_pool;){var y=ji.zpp_pool.next;ji.zpp_pool.next=null,ji.zpp_pool=y}for(;null!=Ni.zpp_pool;){var x=Ni.zpp_pool.next;Ni.zpp_pool.next=null,Ni.zpp_pool=x}for(;null!=Zt.zpp_pool;){var m=Zt.zpp_pool.next;Zt.zpp_pool.next=null,Zt.zpp_pool=m}for(;null!=Ui.zpp_pool;){var g=Ui.zpp_pool.next;Ui.zpp_pool.next=null,Ui.zpp_pool=g}for(;null!=Kt.zpp_pool;){var f=Kt.zpp_pool.next;Kt.zpp_pool.next=null,Kt.zpp_pool=f}for(;null!=Vi.zpp_pool;){var v=Vi.zpp_pool.next;Vi.zpp_pool.next=null,Vi.zpp_pool=v}for(;null!=Hi.zpp_pool;){var z=Hi.zpp_pool.next;Hi.zpp_pool.next=null,Hi.zpp_pool=z}for(;null!=Wi.zpp_pool;){var w=Wi.zpp_pool.next;Wi.zpp_pool.next=null,Wi.zpp_pool=w}for(;null!=Ko.zpp_pool;){var b=Ko.zpp_pool.next;Ko.zpp_pool.next=null,Ko.zpp_pool=b}for(;null!=Nn.zpp_pool;){var S=Nn.zpp_pool.next;Nn.zpp_pool.next=null,Nn.zpp_pool=S}for(;null!=No.zpp_pool;){var C=No.zpp_pool.next;No.zpp_pool.next=null,No.zpp_pool=C}for(;null!=Zo.zpp_pool;){var M=Zo.zpp_pool.next;Zo.zpp_pool.next=null,Zo.zpp_pool=M}for(;null!=qi.zpp_pool;){var P=qi.zpp_pool.next;qi.zpp_pool.next=null,qi.zpp_pool=P}for(;null!=Jo.zpp_pool;){var k=Jo.zpp_pool.next;Jo.zpp_pool.next=null,Jo.zpp_pool=k}for(;null!=Xi.zpp_pool;){var T=Xi.zpp_pool.next;Xi.zpp_pool.next=null,Xi.zpp_pool=T}for(;null!=nt.zpp_pool;){var A=nt.zpp_pool.next;nt.zpp_pool.next=null,nt.zpp_pool=A}for(;null!=jo.zpp_pool;){var O=jo.zpp_pool.next;jo.zpp_pool.next=null,jo.zpp_pool=O}for(;null!=Yi.zpp_pool;){var E=Yi.zpp_pool.next;Yi.zpp_pool.next=null,Yi.zpp_pool=E}for(;null!=Ki.zpp_pool;){var G=Ki.zpp_pool.next;Ki.zpp_pool.next=null,Ki.zpp_pool=G}for(;null!=cr.zpp_pool;){var D=cr.zpp_pool.next;cr.zpp_pool.next=null,cr.zpp_pool=D}for(;null!=Ct.zpp_pool;){var I=Ct.zpp_pool.next;Ct.zpp_pool.next=null,Ct.zpp_pool=I}for(;null!=Pt.zpp_pool;){var L=Pt.zpp_pool.next;Pt.zpp_pool.next=null,Pt.zpp_pool=L}for(;null!=Un.zpp_pool;){var B=Un.zpp_pool.next;Un.zpp_pool.next=null,Un.zpp_pool=B}for(;null!=Sn.zpp_pool;){var R=Sn.zpp_pool.next;Sn.zpp_pool.next=null,Sn.zpp_pool=R}for(;null!=Cn.zpp_pool;){var F=Cn.zpp_pool.next;Cn.zpp_pool.next=null,Cn.zpp_pool=F}for(;null!=Zi.zpp_pool;){var j=Zi.zpp_pool.next;Zi.zpp_pool.next=null,Zi.zpp_pool=j}for(;null!=Ji.zpp_pool;){var N=Ji.zpp_pool.next;Ji.zpp_pool.next=null,Ji.zpp_pool=N}for(;null!=ep.zpp_pool;){var U=ep.zpp_pool.next;ep.zpp_pool.next=null,ep.zpp_pool=U}for(;null!=Qi.zpp_pool;){var V=Qi.zpp_pool.next;Qi.zpp_pool.next=null,Qi.zpp_pool=V}for(;null!=At.zpp_pool;){var H=At.zpp_pool.next;At.zpp_pool.next=null,At.zpp_pool=H}for(;null!=Vn.zpp_pool;){var W=Vn.zpp_pool.next;Vn.zpp_pool.next=null,Vn.zpp_pool=W}for(;null!=Rt.zpp_pool;){var q=Rt.zpp_pool.next;Rt.zpp_pool.next=null,Rt.zpp_pool=q}for(;null!=Ft.zpp_pool;){var X=Ft.zpp_pool.next;Ft.zpp_pool.next=null,Ft.zpp_pool=X}for(;null!=Ot.zpp_pool;){var Y=Ot.zpp_pool.next;Ot.zpp_pool.next=null,Ot.zpp_pool=Y}for(;null!=$i.zpp_pool;){var K=$i.zpp_pool.next;$i.zpp_pool.next=null,$i.zpp_pool=K}for(;null!=en.zpp_pool;){var Z=en.zpp_pool.next;en.zpp_pool.next=null,en.zpp_pool=Z}for(;null!=Nt.zpp_pool;){var J=Nt.zpp_pool.next;Nt.zpp_pool.next=null,Nt.zpp_pool=J}for(;null!=Hn.zpp_pool;){var Q=Hn.zpp_pool.next;Hn.zpp_pool.next=null,Hn.zpp_pool=Q}for(;null!=tn.zpp_pool;){var $=tn.zpp_pool.next;tn.zpp_pool.next=null,tn.zpp_pool=$}for(;null!=Oo.zpp_pool;){var ee=Oo.zpp_pool.next;Oo.zpp_pool.next=null,Oo.zpp_pool=ee}for(;null!=Wn.zpp_pool;){var te=Wn.zpp_pool.next;Wn.zpp_pool.next=null,Wn.zpp_pool=te}for(;null!=Gt.zpp_pool;){var ie=Gt.zpp_pool.next;Gt.zpp_pool.next=null,Gt.zpp_pool=ie}for(;null!=Dt.zpp_pool;){var ne=Dt.zpp_pool.next;Dt.zpp_pool.next=null,Dt.zpp_pool=ne}for(;null!=qn.zpp_pool;){var re=qn.zpp_pool.next;qn.zpp_pool.next=null,qn.zpp_pool=re}for(;null!=Xn.zpp_pool;){var oe=Xn.zpp_pool.next;Xn.zpp_pool.next=null,Xn.zpp_pool=oe}for(;null!=It.zpp_pool;){var ae=It.zpp_pool.next;It.zpp_pool.next=null,It.zpp_pool=ae}for(;null!=ci.zpp_pool;){var se=ci.zpp_pool.next;ci.zpp_pool.next=null,ci.zpp_pool=se}for(;null!=Vt.zpp_pool;){var pe=Vt.zpp_pool.next;Vt.zpp_pool.next=null,Vt.zpp_pool=pe}for(;null!=nn.zpp_pool;){var le=nn.zpp_pool.next;nn.zpp_pool.next=null,nn.zpp_pool=le}for(;null!=rn.zpp_pool;){var he=rn.zpp_pool.next;rn.zpp_pool.next=null,rn.zpp_pool=he}for(;null!=Mt.zpp_pool;){var ue=Mt.zpp_pool.next;Mt.zpp_pool.next=null,Mt.zpp_pool=ue}for(;null!=_r.zpp_pool;){var de=_r.zpp_pool.next;_r.zpp_pool.next=null,_r.zpp_pool=de}for(;null!=on.zpp_pool;){var ce=on.zpp_pool.next;on.zpp_pool.next=null,on.zpp_pool=ce}for(;null!=$t.zpp_pool;){var _e=$t.zpp_pool.next;$t.zpp_pool.next=null,$t.zpp_pool=_e}for(;null!=rr.zpp_pool;){var ye=rr.zpp_pool.next;rr.zpp_pool.next=null,rr.zpp_pool=ye}for(;null!=an.zpp_pool;){var xe=an.zpp_pool.next;an.zpp_pool.next=null,an.zpp_pool=xe}for(;null!=pi.zpp_pool;){var me=pi.zpp_pool.next;pi.zpp_pool.next=null,pi.zpp_pool=me}for(;null!=Eo.zpp_pool;){var ge=Eo.zpp_pool.next;Eo.zpp_pool.next=null,Eo.zpp_pool=ge}for(;null!=nr.zpp_pool;){var fe=nr.zpp_pool.next;nr.zpp_pool.next=null,nr.zpp_pool=fe}for(;null!=sn.zpp_pool;){var ve=sn.zpp_pool.next;sn.zpp_pool.next=null,sn.zpp_pool=ve}for(;null!=qo.zpp_pool;){var ze=qo.zpp_pool.next;qo.zpp_pool.next=null,qo.zpp_pool=ze}for(;null!=pn.zpp_pool;){var we=pn.zpp_pool.next;pn.zpp_pool.next=null,pn.zpp_pool=we}for(;null!=ni.zpp_pool;){var be=ni.zpp_pool.next;ni.zpp_pool.next=null,ni.zpp_pool=be}for(;null!=oi.zpp_pool;){var Se=oi.zpp_pool.next;oi.zpp_pool.next=null,oi.zpp_pool=Se}for(;null!=Yo.zpp_pool;){var Ce=Yo.zpp_pool.next;Yo.zpp_pool.next=null,Yo.zpp_pool=Ce}for(;null!=Vo.zpp_pool;){var Me=Vo.zpp_pool.next;Vo.zpp_pool.next=null,Vo.zpp_pool=Me}for(;null!=Ho.zpp_pool;){var Pe=Ho.zpp_pool.next;Ho.zpp_pool.next=null,Ho.zpp_pool=Pe}for(;null!=Yn.zpp_pool;){var ke=Yn.zpp_pool.next;Yn.zpp_pool.next=null,Yn.zpp_pool=ke}for(;null!=Qo.zpp_pool;){var Te=Qo.zpp_pool.next;Qo.zpp_pool.next=null,Qo.zpp_pool=Te}for(;null!=Wo.zpp_pool;){var Ae=Wo.zpp_pool.next;Wo.zpp_pool.next=null,Wo.zpp_pool=Ae}for(;null!=$o.zpp_pool;){var Oe=$o.zpp_pool.next;$o.zpp_pool.next=null,$o.zpp_pool=Oe}for(;null!=hn.zpp_pool;){var Ee=hn.zpp_pool.next;hn.zpp_pool.next=null,hn.zpp_pool=Ee}for(;null!=ea.zpp_pool;){var Ge=ea.zpp_pool.next;ea.zpp_pool.next=null,ea.zpp_pool=Ge}for(;null!=un.zpp_pool;){var De=un.zpp_pool.next;un.zpp_pool.next=null,un.zpp_pool=De}for(;null!=dn.zpp_pool;){var Ie=dn.zpp_pool.next;dn.zpp_pool.next=null,dn.zpp_pool=Ie}for(;null!=mt.zpp_pool;){var Le=mt.zpp_pool.next;mt.zpp_pool.next=null,mt.zpp_pool=Le}for(;null!=cn.zpp_pool;){var Be=cn.zpp_pool.next;cn.zpp_pool.next=null,cn.zpp_pool=Be}for(;null!=_n.zpp_pool;){var Re=_n.zpp_pool.next;_n.zpp_pool.next=null,_n.zpp_pool=Re}for(;null!=yn.zpp_pool;){var Fe=yn.zpp_pool.next;yn.zpp_pool.next=null,yn.zpp_pool=Fe}for(;null!=jn.poolGeomPoly;){var je=jn.poolGeomPoly.zpp_pool;jn.poolGeomPoly.zpp_pool=null,jn.poolGeomPoly=je}for(;null!=jn.poolVec2;){var Ne=jn.poolVec2.zpp_pool;jn.poolVec2.zpp_pool=null,jn.poolVec2=Ne}for(;null!=jn.poolVec3;){var Ue=jn.poolVec3.zpp_pool;jn.poolVec3.zpp_pool=null,jn.poolVec3=Ue}},Ce.prototype.__class__=Ce;var Me=sandbox.Main=function(){};Me.__name__=["sandbox","Main"],Me.main=function(){},Me.prototype.__class__=Me;var Pe=zpp_nape.ZPP_Const=function(){};Pe.__name__=["zpp_nape","ZPP_Const"],Pe.POSINF=function(){return 1/0},Pe.NEGINF=function(){return-1/0},Pe.prototype.__class__=Pe;var ke=zpp_nape.ZPP_ID=function(){};ke.__name__=["zpp_nape","ZPP_ID"],ke.Constraint=function(){return ke._Constraint++},ke.Interactor=function(){return ke._Interactor++},ke.CbType=function(){return ke._CbType++},ke.CbSet=function(){return ke._CbSet++},ke.Listener=function(){return ke._Listener++},ke.ZPP_SimpleVert=function(){return ke._ZPP_SimpleVert++},ke.ZPP_SimpleSeg=function(){return ke._ZPP_SimpleSeg++},ke.Space=function(){return ke._Space++},ke.InteractionGroup=function(){return ke._InteractionGroup++},ke.prototype.__class__=ke;var nt=zpp_nape.callbacks.ZPP_Callback=function(){this.constraint=null,this.body=null,this.pre_swapped=!1,this.pre_arbiter=null,this.wrap_arbiters=null,this.set=null,this.int2=null,this.int1=null,this.length=0,this.prev=null,this.next=null,this.index=0,this.space=null,this.listener=null,this.event=0,this.outer_int=null,this.outer_con=null,this.outer_body=null,this.length=0};nt.__name__=["zpp_nape","callbacks","ZPP_Callback"],nt.prototype.outer_body=null,nt.prototype.outer_con=null,nt.prototype.outer_int=null,nt.prototype.wrapper_body=function(){return null==this.outer_body&&(this.outer_body=new i,this.outer_body.zpp_inner=this),this.outer_body},nt.prototype.wrapper_con=function(){return null==this.outer_con&&(this.outer_con=new a,this.outer_con.zpp_inner=this),this.outer_con},nt.prototype.wrapper_int=function(){return null==this.outer_int&&(this.outer_int=new p,this.outer_int.zpp_inner=this),null==this.wrap_arbiters?this.wrap_arbiters=Bn.get(this.set.arbiters,!0):this.wrap_arbiters.zpp_inner.inner=this.set.arbiters,this.wrap_arbiters.zpp_inner.zip_length=!0,this.wrap_arbiters.zpp_inner.at_ite=null,this.outer_int},nt.prototype.event=null,nt.prototype.listener=null,nt.prototype.space=null,nt.prototype.index=null,nt.prototype.next=null,nt.prototype.prev=null,nt.prototype.length=null,nt.prototype.push=function(e){null!=this.prev?this.prev.next=e:this.next=e,e.prev=this.prev,e.next=null,this.prev=e,this.length++},nt.prototype.push_rev=function(e){null!=this.next?this.next.prev=e:this.prev=e,e.next=this.next,e.prev=null,this.next=e,this.length++},nt.prototype.pop=function(){var e=this.next;return this.next=e.next,null==this.next?this.prev=null:this.next.prev=null,this.length--,e},nt.prototype.pop_rev=function(){var e=this.prev;return this.prev=e.prev,null==this.prev?this.next=null:this.prev.next=null,this.length--,e},nt.prototype.empty=function(){return null==this.next},nt.prototype.clear=function(){for(;!this.empty();)this.pop()},nt.prototype.splice=function(e){var t=e.next;return null==e.prev?(this.next=e.next,null!=this.next?this.next.prev=null:this.prev=null):(e.prev.next=e.next,null!=e.next?e.next.prev=e.prev:this.prev=e.prev),this.length--,t},nt.prototype.rotateL=function(){this.push(this.pop())},nt.prototype.rotateR=function(){this.push_rev(this.pop_rev())},nt.prototype.cycleNext=function(e){return null==e.next?this.next:e.next},nt.prototype.cyclePrev=function(e){return null==e.prev?this.prev:e.prev},nt.prototype.at=function(e){for(var t=this.next;0!=e--;)t=t.next;return t},nt.prototype.rev_at=function(e){for(var t=this.prev;0!=e--;)t=t.prev;return t},nt.prototype.free=function(){this.int1=this.int2=null,this.body=null,this.constraint=null,(this.listener=null)!=this.wrap_arbiters&&(this.wrap_arbiters.zpp_inner.inner=null),this.set=null},nt.prototype.alloc=function(){},nt.prototype.int1=null,nt.prototype.int2=null,nt.prototype.set=null,nt.prototype.wrap_arbiters=null,nt.prototype.pre_arbiter=null,nt.prototype.pre_swapped=null,nt.prototype.genarbs=function(){null==this.wrap_arbiters?this.wrap_arbiters=Bn.get(this.set.arbiters,!0):this.wrap_arbiters.zpp_inner.inner=this.set.arbiters,this.wrap_arbiters.zpp_inner.zip_length=!0,this.wrap_arbiters.zpp_inner.at_ite=null},nt.prototype.body=null,nt.prototype.constraint=null,nt.prototype.__class__=nt;var jo=zpp_nape.callbacks.ZPP_CbSet=function(){this.wrap_constraints=null,this.constraints=null,this.wrap_interactors=null,this.interactors=null,this.zip_conlisteners=!1,this.conlisteners=null,this.zip_bodylisteners=!1,this.bodylisteners=null,this.zip_listeners=!1,this.listeners=null,this.cbpairs=null,this.manager=null,this.id=0,this.next=null,this.count=0,this.cbTypes=null,this.cbTypes=new Fe,this.listeners=new Te,this.zip_listeners=!0,this.bodylisteners=new Ae,this.zip_bodylisteners=!0,this.conlisteners=new Oe,this.zip_conlisteners=!0,this.constraints=new Ee,this.interactors=new Ge,this.id=ke.CbSet(),this.cbpairs=new vi};jo.__name__=["zpp_nape","callbacks","ZPP_CbSet"],jo.setlt=function(e,t){for(var i=e.cbTypes.head,n=t.cbTypes.head;null!=i&&null!=n;){var r=i.elt,o=n.elt;if(r.id<o.id)return!0;if(o.id<r.id)return!1;i=i.next,n=n.next}return null!=n&&null==i},jo.get=function(e){var t;null==jo.zpp_pool?t=new jo:(t=jo.zpp_pool,jo.zpp_pool=t.next,t.next=null);for(var i=null,n=e.head;null!=n;){var r=n.elt;i=t.cbTypes.insert(i,r),r.cbsets.add(t),n=n.next}return t},jo.compatible=function(e,t,i){var n,r=e.options1,o=t.cbTypes;if(r.nonemptyintersection(o,r.includes)&&!r.nonemptyintersection(o,r.excludes)){var a=e.options2,s=i.cbTypes;n=!!a.nonemptyintersection(s,a.includes)&&!a.nonemptyintersection(s,a.excludes)}else n=!1;if(n)return!0;var p=e.options2,l=t.cbTypes;if(!p.nonemptyintersection(l,p.includes)||p.nonemptyintersection(l,p.excludes))return!1;var h=e.options1,u=i.cbTypes;return!!h.nonemptyintersection(u,h.includes)&&!h.nonemptyintersection(u,h.excludes)},jo.empty_intersection=function(e,t){for(var i,n=null,r=(e.cbpairs.length<t.cbpairs.length?e.cbpairs:t.cbpairs).head;null!=r;){var o=r.elt;if(o.a==e&&o.b==t||o.a==t&&o.b==e){n=o;break}r=r.next}null==n&&(null==No.zpp_pool?i=new No:(i=No.zpp_pool,No.zpp_pool=i.next,i.next=null),i.zip_listeners=!0,jo.setlt(e,t)?(i.a=e,i.b=t):(i.a=t,i.b=e),n=i,e.cbpairs.add(n),t!=e&&t.cbpairs.add(n));return n.zip_listeners&&(n.zip_listeners=!1,n.__validate()),null==n.listeners.head},jo.single_intersection=function(e,t,i){for(var n,r=null,o=(e.cbpairs.length<t.cbpairs.length?e.cbpairs:t.cbpairs).head;null!=o;){var a=o.elt;if(a.a==e&&a.b==t||a.a==t&&a.b==e){r=a;break}o=o.next}null==r&&(null==No.zpp_pool?n=new No:(n=No.zpp_pool,No.zpp_pool=n.next,n.next=null),n.zip_listeners=!0,jo.setlt(e,t)?(n.a=e,n.b=t):(n.a=t,n.b=e),r=n,e.cbpairs.add(r),t!=e&&t.cbpairs.add(r));r.zip_listeners&&(r.zip_listeners=!1,r.__validate());var s=r.listeners.head;return null!=s&&s.elt==i&&null==s.next},jo.find_all=function(e,t,i,n){for(var r,o=null,a=(e.cbpairs.length<t.cbpairs.length?e.cbpairs:t.cbpairs).head;null!=a;){var s=a.elt;if(s.a==e&&s.b==t||s.a==t&&s.b==e){o=s;break}a=a.next}null==o&&(null==No.zpp_pool?r=new No:(r=No.zpp_pool,No.zpp_pool=r.next,r.next=null),r.zip_listeners=!0,jo.setlt(e,t)?(r.a=e,r.b=t):(r.a=t,r.b=e),o=r,e.cbpairs.add(o),t!=e&&t.cbpairs.add(o));o.zip_listeners&&(o.zip_listeners=!1,o.__validate());for(var p=o.listeners.head;null!=p;){var l=p.elt;l.event==i&&n(l),p=p.next}},jo.prototype.cbTypes=null,jo.prototype.count=null,jo.prototype.next=null,jo.prototype.id=null,jo.prototype.manager=null,jo.prototype.cbpairs=null,jo.prototype.increment=function(){this.count++},jo.prototype.decrement=function(){return 0==--this.count},jo.prototype.invalidate_pairs=function(){for(var e=this.cbpairs.head;null!=e;)e.elt.zip_listeners=!0,e=e.next},jo.prototype.listeners=null,jo.prototype.zip_listeners=null,jo.prototype.invalidate_listeners=function(){this.zip_listeners=!0,this.invalidate_pairs()},jo.prototype.validate_listeners=function(){this.zip_listeners&&(this.zip_listeners=!1,this.realvalidate_listeners())},jo.prototype.realvalidate_listeners=function(){this.listeners.clear();for(var e=this.cbTypes.head;null!=e;){for(var t=null,i=this.listeners.head,n=e.elt.listeners.head;null!=n;){var r=n.elt;if(null!=i&&i.elt==r)n=n.next,i=(t=i).next;else{var o;if(null!=i){var a=i.elt;o=!(r.precedence<=a.precedence)||r.precedence==a.precedence&&r.id>a.id}else o=!0;if(o){if(r.space==this.manager.space){var s,p=this.listeners;null==Zo.zpp_pool?s=new Zo:(s=Zo.zpp_pool,Zo.zpp_pool=s.next,s.next=null),s.elt=r;var l=s;null==t?(l.next=p.head,p.head=l):(l.next=t.next,t.next=l),p.pushmod=p.modified=!0,p.length++,t=l}n=n.next}else i=(t=i).next}}e=e.next}},jo.prototype.bodylisteners=null,jo.prototype.zip_bodylisteners=null,jo.prototype.invalidate_bodylisteners=function(){this.zip_bodylisteners=!0},jo.prototype.validate_bodylisteners=function(){this.zip_bodylisteners&&(this.zip_bodylisteners=!1,this.realvalidate_bodylisteners())},jo.prototype.realvalidate_bodylisteners=function(){this.bodylisteners.clear();for(var e=this.cbTypes.head;null!=e;){for(var t=null,i=this.bodylisteners.head,n=e.elt.bodylisteners.head;null!=n;){var r=n.elt;if(null!=i&&i.elt==r)n=n.next,i=(t=i).next;else{var o;if(null!=i){var a=i.elt;o=!(r.precedence<=a.precedence)||r.precedence==a.precedence&&r.id>a.id}else o=!0;if(o){var s=r.options;if(!s.nonemptyintersection(this.cbTypes,s.excludes)&&r.space==this.manager.space){var p,l=this.bodylisteners;null==Xi.zpp_pool?p=new Xi:(p=Xi.zpp_pool,Xi.zpp_pool=p.next,p.next=null),p.elt=r;var h=p;null==t?(h.next=l.head,l.head=h):(h.next=t.next,t.next=h),l.pushmod=l.modified=!0,l.length++,t=h}n=n.next}else i=(t=i).next}}e=e.next}},jo.prototype.conlisteners=null,jo.prototype.zip_conlisteners=null,jo.prototype.invalidate_conlisteners=function(){this.zip_conlisteners=!0},jo.prototype.validate_conlisteners=function(){this.zip_conlisteners&&(this.zip_conlisteners=!1,this.realvalidate_conlisteners())},jo.prototype.realvalidate_conlisteners=function(){this.conlisteners.clear();for(var e=this.cbTypes.head;null!=e;){for(var t=null,i=this.conlisteners.head,n=e.elt.conlisteners.head;null!=n;){var r=n.elt;if(null!=i&&i.elt==r)n=n.next,i=(t=i).next;else{var o;if(null!=i){var a=i.elt;o=!(r.precedence<=a.precedence)||r.precedence==a.precedence&&r.id>a.id}else o=!0;if(o){var s=r.options;if(!s.nonemptyintersection(this.cbTypes,s.excludes)&&r.space==this.manager.space){var p,l=this.conlisteners;null==Ki.zpp_pool?p=new Ki:(p=Ki.zpp_pool,Ki.zpp_pool=p.next,p.next=null),p.elt=r;var h=p;null==t?(h.next=l.head,l.head=h):(h.next=t.next,t.next=h),l.pushmod=l.modified=!0,l.length++,t=h}n=n.next}else i=(t=i).next}}e=e.next}},jo.prototype.validate=function(){this.zip_listeners&&(this.zip_listeners=!1,this.realvalidate_listeners()),this.zip_bodylisteners&&(this.zip_bodylisteners=!1,this.realvalidate_bodylisteners()),this.zip_conlisteners&&(this.zip_conlisteners=!1,this.realvalidate_conlisteners())},jo.prototype.interactors=null,jo.prototype.wrap_interactors=null,jo.prototype.constraints=null,jo.prototype.wrap_constraints=null,jo.prototype.addConstraint=function(e){this.constraints.add(e)},jo.prototype.addInteractor=function(e){this.interactors.add(e)},jo.prototype.remConstraint=function(e){this.constraints.remove(e)},jo.prototype.remInteractor=function(e){this.interactors.remove(e)},jo.prototype.free=function(){for(this.listeners.clear(),this.zip_listeners=!0,this.bodylisteners.clear(),this.zip_bodylisteners=!0,this.conlisteners.clear(),this.zip_conlisteners=!0;null!=this.cbTypes.head;)this.cbTypes.pop_unsafe().cbsets.remove(this)},jo.prototype.alloc=function(){},jo.prototype.__class__=jo;var No=zpp_nape.callbacks.ZPP_CbSetPair=function(){this.listeners=null,this.zip_listeners=!1,this.next=null,this.b=null,this.a=null,this.listeners=new Te};No.__name__=["zpp_nape","callbacks","ZPP_CbSetPair"],No.get=function(e,t){var i;return null==No.zpp_pool?i=new No:(i=No.zpp_pool,No.zpp_pool=i.next,i.next=null),i.zip_listeners=!0,jo.setlt(e,t)?(i.a=e,i.b=t):(i.a=t,i.b=e),i},No.setlt=function(e,t){return!!jo.setlt(e.a,t.a)||e.a==t.a&&jo.setlt(e.b,t.b)},No.prototype.a=null,No.prototype.b=null,No.prototype.next=null,No.prototype.free=function(){this.a=this.b=null,this.listeners.clear()},No.prototype.alloc=function(){this.zip_listeners=!0},No.prototype.compatible=function(e){var t,i=e.options1,n=this.a.cbTypes;if(i.nonemptyintersection(n,i.includes)&&!i.nonemptyintersection(n,i.excludes)){var r=e.options2,o=this.b.cbTypes;t=!!r.nonemptyintersection(o,r.includes)&&!r.nonemptyintersection(o,r.excludes)}else t=!1;if(t)return!0;var a=e.options2,s=this.a.cbTypes;if(!a.nonemptyintersection(s,a.includes)||a.nonemptyintersection(s,a.excludes))return!1;var p=e.options1,l=this.b.cbTypes;return!!p.nonemptyintersection(l,p.includes)&&!p.nonemptyintersection(l,p.excludes)},No.prototype.zip_listeners=null,No.prototype.listeners=null,No.prototype.invalidate=function(){this.zip_listeners=!0},No.prototype.validate=function(){this.zip_listeners&&(this.zip_listeners=!1,this.__validate())},No.prototype.__validate=function(){this.listeners.clear();for(var e=this.a.listeners.head,t=this.b.listeners.head;null!=e&&null!=t;){var i=e.elt,n=t.elt;if(i==n){var r,o,a=i.options1,s=this.a.cbTypes;if(a.nonemptyintersection(s,a.includes)&&!a.nonemptyintersection(s,a.excludes)){var p=i.options2,l=this.b.cbTypes;o=!!p.nonemptyintersection(l,p.includes)&&!p.nonemptyintersection(l,p.excludes)}else o=!1;if(o)r=!0;else{var h=i.options2,u=this.a.cbTypes;if(h.nonemptyintersection(u,h.includes)&&!h.nonemptyintersection(u,h.excludes)){var d=i.options1,c=this.b.cbTypes;r=!!d.nonemptyintersection(c,d.includes)&&!d.nonemptyintersection(c,d.excludes)}else r=!1}r&&this.listeners.add(i),e=e.next,t=t.next}else i.precedence>n.precedence||i.precedence==n.precedence&&i.id>n.id?e=e.next:t=t.next}},No.prototype.empty_intersection=function(){return null==this.listeners.head},No.prototype.single_intersection=function(e){var t=this.listeners.head;return null!=t&&t.elt==e&&null==t.next},No.prototype.forall=function(e,t){for(var i=this.listeners.head;null!=i;){var n=i.elt;n.event==e&&t(n),i=i.next}},No.prototype.__class__=No;var Te=zpp_nape.util.ZNPList_ZPP_InteractionListener=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Te.__name__=["zpp_nape","util","ZNPList_ZPP_InteractionListener"],Te.prototype.head=null,Te.prototype.begin=function(){return this.head},Te.prototype.modified=null,Te.prototype.pushmod=null,Te.prototype.length=null,Te.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Te.prototype.add=function(e){var t;null==Zo.zpp_pool?t=new Zo:(t=Zo.zpp_pool,Zo.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Te.prototype.inlined_add=function(e){var t;null==Zo.zpp_pool?t=new Zo:(t=Zo.zpp_pool,Zo.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Te.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Te.prototype.insert=function(e,t){var i;null==Zo.zpp_pool?i=new Zo:(i=Zo.zpp_pool,Zo.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Te.prototype.inlined_insert=function(e,t){var i;null==Zo.zpp_pool?i=new Zo:(i=Zo.zpp_pool,Zo.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Te.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Zo.zpp_pool,Zo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Te.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Zo.zpp_pool,Zo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Te.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Te.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Te.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Zo.zpp_pool,Zo.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Te.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Te.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Zo.zpp_pool,Zo.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Te.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Zo.zpp_pool,Zo.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Te.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Zo.zpp_pool,Zo.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Te.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Zo.zpp_pool,Zo.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Te.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Te.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Zo.zpp_pool,Zo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Te.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Zo.zpp_pool,Zo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Te.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Te.prototype.empty=function(){return null==this.head},Te.prototype.size=function(){return this.length},Te.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Te.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Te.prototype.front=function(){return this.head.elt},Te.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Te.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Te.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Te.prototype.__class__=Te;var Ae=zpp_nape.util.ZNPList_ZPP_BodyListener=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ae.__name__=["zpp_nape","util","ZNPList_ZPP_BodyListener"],Ae.prototype.head=null,Ae.prototype.begin=function(){return this.head},Ae.prototype.modified=null,Ae.prototype.pushmod=null,Ae.prototype.length=null,Ae.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ae.prototype.add=function(e){var t;null==Xi.zpp_pool?t=new Xi:(t=Xi.zpp_pool,Xi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ae.prototype.inlined_add=function(e){var t;null==Xi.zpp_pool?t=new Xi:(t=Xi.zpp_pool,Xi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ae.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ae.prototype.insert=function(e,t){var i;null==Xi.zpp_pool?i=new Xi:(i=Xi.zpp_pool,Xi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ae.prototype.inlined_insert=function(e,t){var i;null==Xi.zpp_pool?i=new Xi:(i=Xi.zpp_pool,Xi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ae.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Xi.zpp_pool,Xi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ae.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Xi.zpp_pool,Xi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ae.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ae.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ae.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Xi.zpp_pool,Xi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ae.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ae.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Xi.zpp_pool,Xi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ae.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Xi.zpp_pool,Xi.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ae.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Xi.zpp_pool,Xi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ae.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Xi.zpp_pool,Xi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ae.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ae.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Xi.zpp_pool,Xi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ae.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Xi.zpp_pool,Xi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ae.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ae.prototype.empty=function(){return null==this.head},Ae.prototype.size=function(){return this.length},Ae.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ae.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ae.prototype.front=function(){return this.head.elt},Ae.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ae.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ae.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ae.prototype.__class__=Ae;var Oe=zpp_nape.util.ZNPList_ZPP_ConstraintListener=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Oe.__name__=["zpp_nape","util","ZNPList_ZPP_ConstraintListener"],Oe.prototype.head=null,Oe.prototype.begin=function(){return this.head},Oe.prototype.modified=null,Oe.prototype.pushmod=null,Oe.prototype.length=null,Oe.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Oe.prototype.add=function(e){var t;null==Ki.zpp_pool?t=new Ki:(t=Ki.zpp_pool,Ki.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Oe.prototype.inlined_add=function(e){var t;null==Ki.zpp_pool?t=new Ki:(t=Ki.zpp_pool,Ki.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Oe.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Oe.prototype.insert=function(e,t){var i;null==Ki.zpp_pool?i=new Ki:(i=Ki.zpp_pool,Ki.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Oe.prototype.inlined_insert=function(e,t){var i;null==Ki.zpp_pool?i=new Ki:(i=Ki.zpp_pool,Ki.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Oe.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ki.zpp_pool,Ki.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Oe.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ki.zpp_pool,Ki.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Oe.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Oe.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Oe.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ki.zpp_pool,Ki.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Oe.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Oe.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ki.zpp_pool,Ki.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Oe.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Ki.zpp_pool,Ki.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Oe.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ki.zpp_pool,Ki.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Oe.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ki.zpp_pool,Ki.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Oe.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Oe.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ki.zpp_pool,Ki.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Oe.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ki.zpp_pool,Ki.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Oe.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Oe.prototype.empty=function(){return null==this.head},Oe.prototype.size=function(){return this.length},Oe.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Oe.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Oe.prototype.front=function(){return this.head.elt},Oe.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Oe.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Oe.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Oe.prototype.__class__=Oe;var Ee=zpp_nape.util.ZNPList_ZPP_Constraint=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ee.__name__=["zpp_nape","util","ZNPList_ZPP_Constraint"],Ee.prototype.head=null,Ee.prototype.begin=function(){return this.head},Ee.prototype.modified=null,Ee.prototype.pushmod=null,Ee.prototype.length=null,Ee.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ee.prototype.add=function(e){var t;null==Hi.zpp_pool?t=new Hi:(t=Hi.zpp_pool,Hi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ee.prototype.inlined_add=function(e){var t;null==Hi.zpp_pool?t=new Hi:(t=Hi.zpp_pool,Hi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ee.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ee.prototype.insert=function(e,t){var i;null==Hi.zpp_pool?i=new Hi:(i=Hi.zpp_pool,Hi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ee.prototype.inlined_insert=function(e,t){var i;null==Hi.zpp_pool?i=new Hi:(i=Hi.zpp_pool,Hi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ee.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Hi.zpp_pool,Hi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ee.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Hi.zpp_pool,Hi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ee.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ee.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ee.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Hi.zpp_pool,Hi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ee.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ee.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Hi.zpp_pool,Hi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ee.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Hi.zpp_pool,Hi.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ee.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Hi.zpp_pool,Hi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ee.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Hi.zpp_pool,Hi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ee.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ee.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Hi.zpp_pool,Hi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ee.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Hi.zpp_pool,Hi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ee.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ee.prototype.empty=function(){return null==this.head},Ee.prototype.size=function(){return this.length},Ee.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ee.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ee.prototype.front=function(){return this.head.elt},Ee.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ee.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ee.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ee.prototype.__class__=Ee;var Ge=zpp_nape.util.ZNPList_ZPP_Interactor=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ge.__name__=["zpp_nape","util","ZNPList_ZPP_Interactor"],Ge.prototype.head=null,Ge.prototype.begin=function(){return this.head},Ge.prototype.modified=null,Ge.prototype.pushmod=null,Ge.prototype.length=null,Ge.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ge.prototype.add=function(e){var t;null==Jo.zpp_pool?t=new Jo:(t=Jo.zpp_pool,Jo.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ge.prototype.inlined_add=function(e){var t;null==Jo.zpp_pool?t=new Jo:(t=Jo.zpp_pool,Jo.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ge.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ge.prototype.insert=function(e,t){var i;null==Jo.zpp_pool?i=new Jo:(i=Jo.zpp_pool,Jo.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ge.prototype.inlined_insert=function(e,t){var i;null==Jo.zpp_pool?i=new Jo:(i=Jo.zpp_pool,Jo.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ge.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Jo.zpp_pool,Jo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ge.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Jo.zpp_pool,Jo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ge.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ge.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ge.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Jo.zpp_pool,Jo.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ge.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ge.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Jo.zpp_pool,Jo.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ge.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Jo.zpp_pool,Jo.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ge.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Jo.zpp_pool,Jo.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ge.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Jo.zpp_pool,Jo.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ge.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ge.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Jo.zpp_pool,Jo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ge.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Jo.zpp_pool,Jo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ge.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ge.prototype.empty=function(){return null==this.head},Ge.prototype.size=function(){return this.length},Ge.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ge.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ge.prototype.front=function(){return this.head.elt},Ge.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ge.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ge.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ge.prototype.__class__=Ge;var De=zpp_nape.util.ZNPList_ZPP_CbSet=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};De.__name__=["zpp_nape","util","ZNPList_ZPP_CbSet"],De.prototype.head=null,De.prototype.begin=function(){return this.head},De.prototype.modified=null,De.prototype.pushmod=null,De.prototype.length=null,De.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},De.prototype.add=function(e){var t;null==qi.zpp_pool?t=new qi:(t=qi.zpp_pool,qi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},De.prototype.inlined_add=function(e){var t;null==qi.zpp_pool?t=new qi:(t=qi.zpp_pool,qi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},De.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},De.prototype.insert=function(e,t){var i;null==qi.zpp_pool?i=new qi:(i=qi.zpp_pool,qi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},De.prototype.inlined_insert=function(e,t){var i;null==qi.zpp_pool?i=new qi:(i=qi.zpp_pool,qi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},De.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=qi.zpp_pool,qi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},De.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=qi.zpp_pool,qi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},De.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},De.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},De.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=qi.zpp_pool,qi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},De.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},De.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=qi.zpp_pool,qi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},De.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=qi.zpp_pool,qi.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},De.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=qi.zpp_pool,qi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},De.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=qi.zpp_pool,qi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},De.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},De.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=qi.zpp_pool,qi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},De.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=qi.zpp_pool,qi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},De.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},De.prototype.empty=function(){return null==this.head},De.prototype.size=function(){return this.length},De.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},De.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},De.prototype.front=function(){return this.head.elt},De.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},De.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},De.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},De.prototype.__class__=De;var Ie=zpp_nape.callbacks.ZPP_CbType=function(){this.conlisteners=null,this.bodylisteners=null,this.listeners=null,this.cbsets=null,this.id=0,this.userData=null,this.outer=null,this.id=ke.CbType(),this.listeners=new Te,this.bodylisteners=new Ae,this.conlisteners=new Oe,this.constraints=new Ee,this.interactors=new Ge,this.cbsets=new De};Ie.__name__=["zpp_nape","callbacks","ZPP_CbType"],Ie.setlt=function(e,t){return e.id<t.id},Ie.prototype.outer=null,Ie.prototype.userData=null,Ie.prototype.id=null,Ie.prototype.cbsets=null,Ie.prototype.interactors=null,Ie.prototype.wrap_interactors=null,Ie.prototype.constraints=null,Ie.prototype.wrap_constraints=null,Ie.prototype.addConstraint=function(e){this.constraints.add(e)},Ie.prototype.addInteractor=function(e){this.interactors.add(e)},Ie.prototype.remConstraint=function(e){this.constraints.remove(e)},Ie.prototype.remInteractor=function(e){this.interactors.remove(e)},Ie.prototype.listeners=null,Ie.prototype.addint=function(e){for(var t=null,i=this.listeners.head;null!=i;){var n=i.elt;if(e.precedence>n.precedence||e.precedence==n.precedence&&e.id>n.id)break;i=(t=i).next}var r,o=this.listeners;null==Zo.zpp_pool?r=new Zo:(r=Zo.zpp_pool,Zo.zpp_pool=r.next,r.next=null),r.elt=e;var a=r;null==t?(a.next=o.head,o.head=a):(a.next=t.next,t.next=a),o.pushmod=o.modified=!0,o.length++;for(var s=this.cbsets.head;null!=s;){var p=s.elt;p.zip_listeners=!0,p.invalidate_pairs(),s=s.next}},Ie.prototype.removeint=function(e){this.listeners.remove(e);for(var t=this.cbsets.head;null!=t;){var i=t.elt;i.zip_listeners=!0,i.invalidate_pairs(),t=t.next}},Ie.prototype.invalidateint=function(){for(var e=this.cbsets.head;null!=e;){var t=e.elt;t.zip_listeners=!0,t.invalidate_pairs(),e=e.next}},Ie.prototype.bodylisteners=null,Ie.prototype.addbody=function(e){for(var t=null,i=this.bodylisteners.head;null!=i;){var n=i.elt;if(e.precedence>n.precedence||e.precedence==n.precedence&&e.id>n.id)break;i=(t=i).next}var r,o=this.bodylisteners;null==Xi.zpp_pool?r=new Xi:(r=Xi.zpp_pool,Xi.zpp_pool=r.next,r.next=null),r.elt=e;var a=r;null==t?(a.next=o.head,o.head=a):(a.next=t.next,t.next=a),o.pushmod=o.modified=!0,o.length++;for(var s=this.cbsets.head;null!=s;)s.elt.zip_bodylisteners=!0,s=s.next},Ie.prototype.removebody=function(e){this.bodylisteners.remove(e);for(var t=this.cbsets.head;null!=t;)t.elt.zip_bodylisteners=!0,t=t.next},Ie.prototype.invalidatebody=function(){for(var e=this.cbsets.head;null!=e;)e.elt.zip_bodylisteners=!0,e=e.next},Ie.prototype.conlisteners=null,Ie.prototype.addconstraint=function(e){for(var t=null,i=this.conlisteners.head;null!=i;){var n=i.elt;if(e.precedence>n.precedence||e.precedence==n.precedence&&e.id>n.id)break;i=(t=i).next}var r,o=this.conlisteners;null==Ki.zpp_pool?r=new Ki:(r=Ki.zpp_pool,Ki.zpp_pool=r.next,r.next=null),r.elt=e;var a=r;null==t?(a.next=o.head,o.head=a):(a.next=t.next,t.next=a),o.pushmod=o.modified=!0,o.length++;for(var s=this.cbsets.head;null!=s;)s.elt.zip_conlisteners=!0,s=s.next},Ie.prototype.removeconstraint=function(e){this.conlisteners.remove(e);for(var t=this.cbsets.head;null!=t;)t.elt.zip_conlisteners=!0,t=t.next},Ie.prototype.invalidateconstraint=function(){for(var e=this.cbsets.head;null!=e;)e.elt.zip_conlisteners=!0,e=e.next},Ie.prototype.__class__=Ie;var Uo=zpp_nape.util.ZPP_Flags=function(){};Uo.__name__=["zpp_nape","util","ZPP_Flags"],Uo.GravMassMode_DEFAULT=null,Uo.GravMassMode_FIXED=null,Uo.GravMassMode_SCALED=null,Uo.InertiaMode_DEFAULT=null,Uo.InertiaMode_FIXED=null,Uo.MassMode_DEFAULT=null,Uo.MassMode_FIXED=null,Uo.BodyType_STATIC=null,Uo.BodyType_DYNAMIC=null,Uo.BodyType_KINEMATIC=null,Uo.ListenerType_BODY=null,Uo.PreFlag_ACCEPT=null,Uo.ListenerType_CONSTRAINT=null,Uo.PreFlag_IGNORE=null,Uo.ListenerType_INTERACTION=null,Uo.PreFlag_ACCEPT_ONCE=null,Uo.ListenerType_PRE=null,Uo.PreFlag_IGNORE_ONCE=null,Uo.CbEvent_BEGIN=null,Uo.InteractionType_COLLISION=null,Uo.CbEvent_ONGOING=null,Uo.InteractionType_SENSOR=null,Uo.CbEvent_END=null,Uo.InteractionType_FLUID=null,Uo.CbEvent_WAKE=null,Uo.InteractionType_ANY=null,Uo.CbEvent_SLEEP=null,Uo.CbEvent_BREAK=null,Uo.CbEvent_PRE=null,Uo.Winding_UNDEFINED=null,Uo.Winding_CLOCKWISE=null,Uo.Winding_ANTICLOCKWISE=null,Uo.ValidationResult_VALID=null,Uo.ValidationResult_DEGENERATE=null,Uo.ValidationResult_CONCAVE=null,Uo.ValidationResult_SELF_INTERSECTING=null,Uo.ShapeType_CIRCLE=null,Uo.ShapeType_POLYGON=null,Uo.Broadphase_DYNAMIC_AABB_TREE=null,Uo.Broadphase_SWEEP_AND_PRUNE=null,Uo.ArbiterType_COLLISION=null,Uo.ArbiterType_SENSOR=null,Uo.ArbiterType_FLUID=null,Uo.prototype.__class__=Uo;var Le=zpp_nape.callbacks.ZPP_Listener=function(){this.space=null,this.interaction=null,this.constraint=null,this.body=null,this.precedence=0,this.event=0,this.type=0,this.id=0,this.outer=null,this.id=ke.Listener()};Le.__name__=["zpp_nape","callbacks","ZPP_Listener"],Le.setlt=function(e,t){return!(e.precedence<=t.precedence)||e.precedence==t.precedence&&e.id>t.id},Le.prototype.outer=null,Le.prototype.id=null,Le.prototype.type=null,Le.prototype.event=null,Le.prototype.precedence=null,Le.prototype.body=null,Le.prototype.constraint=null,Le.prototype.interaction=null,Le.prototype.space=null,Le.prototype.swapEvent=function(e){},Le.prototype.invalidate_precedence=function(){},Le.prototype.addedToSpace=function(){},Le.prototype.removedFromSpace=function(){},Le.prototype.__class__=Le;var Be=zpp_nape.callbacks.ZPP_BodyListener=function(e,t,i){this.handler=null,this.options=null,this.outer_zn=null,Le.call(this),this.event=t,this.handler=i,(this.body=this).type=0,this.options=e.zpp_inner};Be.__name__=["zpp_nape","callbacks","ZPP_BodyListener"],Be.__super__=Le,Be.prototype=Object.create(Le.prototype),Be.prototype.outer_zn=null,Be.prototype.options=null,Be.prototype.handler=null,Be.prototype.addedToSpace=function(){this.options.handler=$(this,this.cbtype_change);for(var e=this.options.includes.head;null!=e;){for(var t=e.elt,i=null,n=t.bodylisteners.head;null!=n;){var r=n.elt;if(this.precedence>r.precedence||this.precedence==r.precedence&&this.id>r.id)break;n=(i=n).next}var o,a=t.bodylisteners;null==Xi.zpp_pool?o=new Xi:(o=Xi.zpp_pool,Xi.zpp_pool=o.next,o.next=null),o.elt=this;var s=o;null==i?(s.next=a.head,a.head=s):(s.next=i.next,i.next=s),a.pushmod=a.modified=!0,a.length++;for(var p=t.cbsets.head;null!=p;)p.elt.zip_bodylisteners=!0,p=p.next;e=e.next}},Be.prototype.removedFromSpace=function(){for(var e=this.options.includes.head;null!=e;){var t=e.elt;t.bodylisteners.remove(this);for(var i=t.cbsets.head;null!=i;)i.elt.zip_bodylisteners=!0,i=i.next;e=e.next}this.options.handler=null},Be.prototype.cbtype_change=function(e,t,i){this.removedFromSpace();var n=this.options;if(t)if(i){for(var r=null,o=n.includes.head;null!=o&&!(e.id<o.elt.id);)o=(r=o).next;var a,s=n.includes;null==ji.zpp_pool?a=new ji:(a=ji.zpp_pool,ji.zpp_pool=a.next,a.next=null),a.elt=e;var p=a;null==r?(p.next=s.head,s.head=p):(p.next=r.next,r.next=p),s.pushmod=s.modified=!0,s.length++}else n.includes.remove(e);else if(i){for(var l=null,h=n.excludes.head;null!=h&&!(e.id<h.elt.id);)h=(l=h).next;var u,d=n.excludes;null==ji.zpp_pool?u=new ji:(u=ji.zpp_pool,ji.zpp_pool=u.next,u.next=null),u.elt=e;var c=u;null==l?(c.next=d.head,d.head=c):(c.next=l.next,l.next=c),d.pushmod=d.modified=!0,d.length++}else n.excludes.remove(e);this.addedToSpace()},Be.prototype.invalidate_precedence=function(){null!=this.space&&(this.removedFromSpace(),this.addedToSpace())},Be.prototype.swapEvent=function(e){this.removedFromSpace(),this.event=e,this.addedToSpace()},Be.prototype.__class__=Be;var Re=zpp_nape.callbacks.ZPP_ConstraintListener=function(e,t,i){this.handler=null,this.options=null,this.outer_zn=null,Le.call(this),this.event=t,this.handler=i,(this.constraint=this).type=1,this.options=e.zpp_inner};Re.__name__=["zpp_nape","callbacks","ZPP_ConstraintListener"],Re.__super__=Le,Re.prototype=Object.create(Le.prototype),Re.prototype.outer_zn=null,Re.prototype.options=null,Re.prototype.handler=null,Re.prototype.addedToSpace=function(){this.options.handler=$(this,this.cbtype_change);for(var e=this.options.includes.head;null!=e;){for(var t=e.elt,i=null,n=t.conlisteners.head;null!=n;){var r=n.elt;if(this.precedence>r.precedence||this.precedence==r.precedence&&this.id>r.id)break;n=(i=n).next}var o,a=t.conlisteners;null==Ki.zpp_pool?o=new Ki:(o=Ki.zpp_pool,Ki.zpp_pool=o.next,o.next=null),o.elt=this;var s=o;null==i?(s.next=a.head,a.head=s):(s.next=i.next,i.next=s),a.pushmod=a.modified=!0,a.length++;for(var p=t.cbsets.head;null!=p;)p.elt.zip_conlisteners=!0,p=p.next;e=e.next}},Re.prototype.removedFromSpace=function(){for(var e=this.options.includes.head;null!=e;){var t=e.elt;t.conlisteners.remove(this);for(var i=t.cbsets.head;null!=i;)i.elt.zip_conlisteners=!0,i=i.next;e=e.next}this.options.handler=null},Re.prototype.cbtype_change=function(e,t,i){this.removedFromSpace();var n=this.options;if(t)if(i){for(var r=null,o=n.includes.head;null!=o&&!(e.id<o.elt.id);)o=(r=o).next;var a,s=n.includes;null==ji.zpp_pool?a=new ji:(a=ji.zpp_pool,ji.zpp_pool=a.next,a.next=null),a.elt=e;var p=a;null==r?(p.next=s.head,s.head=p):(p.next=r.next,r.next=p),s.pushmod=s.modified=!0,s.length++}else n.includes.remove(e);else if(i){for(var l=null,h=n.excludes.head;null!=h&&!(e.id<h.elt.id);)h=(l=h).next;var u,d=n.excludes;null==ji.zpp_pool?u=new ji:(u=ji.zpp_pool,ji.zpp_pool=u.next,u.next=null),u.elt=e;var c=u;null==l?(c.next=d.head,d.head=c):(c.next=l.next,l.next=c),d.pushmod=d.modified=!0,d.length++}else n.excludes.remove(e);this.addedToSpace()},Re.prototype.invalidate_precedence=function(){null!=this.space&&(this.removedFromSpace(),this.addedToSpace())},Re.prototype.swapEvent=function(e){this.removedFromSpace(),this.event=e,this.addedToSpace()},Re.prototype.__class__=Re;var Fe=zpp_nape.util.ZNPList_ZPP_CbType=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Fe.__name__=["zpp_nape","util","ZNPList_ZPP_CbType"],Fe.prototype.head=null,Fe.prototype.begin=function(){return this.head},Fe.prototype.modified=null,Fe.prototype.pushmod=null,Fe.prototype.length=null,Fe.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Fe.prototype.add=function(e){var t;null==ji.zpp_pool?t=new ji:(t=ji.zpp_pool,ji.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Fe.prototype.inlined_add=function(e){var t;null==ji.zpp_pool?t=new ji:(t=ji.zpp_pool,ji.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Fe.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Fe.prototype.insert=function(e,t){var i;null==ji.zpp_pool?i=new ji:(i=ji.zpp_pool,ji.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Fe.prototype.inlined_insert=function(e,t){var i;null==ji.zpp_pool?i=new ji:(i=ji.zpp_pool,ji.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Fe.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=ji.zpp_pool,ji.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Fe.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=ji.zpp_pool,ji.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Fe.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Fe.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Fe.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=ji.zpp_pool,ji.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Fe.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Fe.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=ji.zpp_pool,ji.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Fe.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=ji.zpp_pool,ji.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Fe.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=ji.zpp_pool,ji.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Fe.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=ji.zpp_pool,ji.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Fe.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Fe.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=ji.zpp_pool,ji.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Fe.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=ji.zpp_pool,ji.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Fe.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Fe.prototype.empty=function(){return null==this.head},Fe.prototype.size=function(){return this.length},Fe.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Fe.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Fe.prototype.front=function(){return this.head.elt},Fe.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Fe.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Fe.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Fe.prototype.__class__=Fe;var ri=zpp_nape.callbacks.ZPP_InteractionListener=function(e,t,i,n){this.handlerp=null,this.pure=!1,this.allowSleepingCallbacks=!1,this.handleri=null,this.options2=null,this.options1=null,this.itype=0,this.outer_znp=null,this.outer_zni=null,Le.call(this),this.type=n,(this.interaction=this).event=i,this.options1=e.zpp_inner,this.options2=t.zpp_inner,this.allowSleepingCallbacks=!1};ri.__name__=["zpp_nape","callbacks","ZPP_InteractionListener"],ri.__super__=Le,ri.prototype=Object.create(Le.prototype),ri.prototype.outer_zni=null,ri.prototype.outer_znp=null,ri.prototype.itype=null,ri.prototype.options1=null,ri.prototype.options2=null,ri.prototype.handleri=null,ri.prototype.allowSleepingCallbacks=null,ri.prototype.pure=null,ri.prototype.handlerp=null,ri.prototype.setInteractionType=function(e){this.itype=e},ri.prototype.wake=function(){for(var e=this.options1.includes.head,t=this.options2.includes.head;null!=e&&null!=t;){var i=e.elt,n=t.elt;if(i==n){for(var r=i.interactors.head;null!=r;)r.elt.wake(),r=r.next;e=e.next,t=t.next}else if(i.id<n.id){for(var o=i.interactors.head;null!=o;)o.elt.wake(),o=o.next;e=e.next}else{for(var a=n.interactors.head;null!=a;)a.elt.wake(),a=a.next;t=t.next}}for(;null!=e;){for(var s=e.elt.interactors.head;null!=s;)s.elt.wake(),s=s.next;e=e.next}for(;null!=t;){for(var p=t.elt.interactors.head;null!=p;)p.elt.wake(),p=p.next;t=t.next}},ri.prototype.CbSetset=function(e,t,i){for(var n=ri.UCbSet,r=ri.VCbSet,o=ri.WCbSet,a=e.head,s=t.head;null!=a&&null!=s;){var p=a.elt,l=s.elt;if(p==l){var h;null==qi.zpp_pool?h=new qi:(h=qi.zpp_pool,qi.zpp_pool=h.next,h.next=null),h.elt=p;var u=h;u.next=o.head,o.head=u,o.modified=!0,o.length++,a=a.next,s=s.next}else if(jo.setlt(p,l)){var d;null==qi.zpp_pool?d=new qi:(d=qi.zpp_pool,qi.zpp_pool=d.next,d.next=null),d.elt=p;var c=d;c.next=n.head,n.head=c,n.modified=!0,n.length++,a=a.next}else{var _;null==qi.zpp_pool?_=new qi:(_=qi.zpp_pool,qi.zpp_pool=_.next,_.next=null),_.elt=l;var y=_;y.next=r.head,r.head=y,r.modified=!0,r.length++,s=s.next}}for(;null!=a;){var x,m=a.elt;null==qi.zpp_pool?x=new qi:(x=qi.zpp_pool,qi.zpp_pool=x.next,x.next=null),x.elt=m;var g=x;g.next=n.head,n.head=g,n.modified=!0,n.length++,a=a.next}for(;null!=s;){var f,v=s.elt;null==qi.zpp_pool?f=new qi:(f=qi.zpp_pool,qi.zpp_pool=f.next,f.next=null),f.elt=v;var z=f;z.next=r.head,r.head=z,r.modified=!0,r.length++,s=s.next}for(;null!=n.head;)for(var w=n.pop_unsafe(),b=t.head;null!=b;)i(w,b.elt),b=b.next;for(;null!=r.head;)for(var S=r.pop_unsafe(),C=o.head;null!=C;)i(S,C.elt),C=C.next;for(;null!=o.head;){var M=o.pop_unsafe();i(M,M);for(var P=o.head;null!=P;)i(M,P.elt),P=P.next}},ri.prototype.CbTypeset=function(e,t,i){for(var n=ri.UCbType,r=ri.VCbType,o=ri.WCbType,a=e.head,s=t.head;null!=a&&null!=s;){var p=a.elt,l=s.elt;if(p==l){var h;null==ji.zpp_pool?h=new ji:(h=ji.zpp_pool,ji.zpp_pool=h.next,h.next=null),h.elt=p;var u=h;u.next=o.head,o.head=u,o.modified=!0,o.length++,a=a.next,s=s.next}else if(p.id<l.id){var d;null==ji.zpp_pool?d=new ji:(d=ji.zpp_pool,ji.zpp_pool=d.next,d.next=null),d.elt=p;var c=d;c.next=n.head,n.head=c,n.modified=!0,n.length++,a=a.next}else{var _;null==ji.zpp_pool?_=new ji:(_=ji.zpp_pool,ji.zpp_pool=_.next,_.next=null),_.elt=l;var y=_;y.next=r.head,r.head=y,r.modified=!0,r.length++,s=s.next}}for(;null!=a;){var x,m=a.elt;null==ji.zpp_pool?x=new ji:(x=ji.zpp_pool,ji.zpp_pool=x.next,x.next=null),x.elt=m;var g=x;g.next=n.head,n.head=g,n.modified=!0,n.length++,a=a.next}for(;null!=s;){var f,v=s.elt;null==ji.zpp_pool?f=new ji:(f=ji.zpp_pool,ji.zpp_pool=f.next,f.next=null),f.elt=v;var z=f;z.next=r.head,r.head=z,r.modified=!0,r.length++,s=s.next}for(;null!=n.head;)for(var w=n.pop_unsafe(),b=t.head;null!=b;)i(w,b.elt),b=b.next;for(;null!=r.head;)for(var S=r.pop_unsafe(),C=o.head;null!=C;)i(S,C.elt),C=C.next;for(;null!=o.head;){var M=o.pop_unsafe();i(M,M);for(var P=o.head;null!=P;)i(M,P.elt),P=P.next}},ri.prototype.with_uniquesets=function(e){var t,i=this;null==Un.zpp_pool?t=new Un:(t=Un.zpp_pool,Un.zpp_pool=t.next,t.next=null),t.lt=No.setlt;for(var n=this.options2.includes,r=ri.UCbType,o=ri.VCbType,a=ri.WCbType,s=this.options1.includes.head,p=n.head;null!=s&&null!=p;){var l=s.elt,h=p.elt;if(l==h){var u;null==ji.zpp_pool?u=new ji:(u=ji.zpp_pool,ji.zpp_pool=u.next,u.next=null),u.elt=l;var d=u;d.next=a.head,a.head=d,a.modified=!0,a.length++,s=s.next,p=p.next}else if(l.id<h.id){var c;null==ji.zpp_pool?c=new ji:(c=ji.zpp_pool,ji.zpp_pool=c.next,c.next=null),c.elt=l;var _=c;_.next=r.head,r.head=_,r.modified=!0,r.length++,s=s.next}else{var y;null==ji.zpp_pool?y=new ji:(y=ji.zpp_pool,ji.zpp_pool=y.next,y.next=null),y.elt=h;var x=y;x.next=o.head,o.head=x,o.modified=!0,o.length++,p=p.next}}for(;null!=s;){var m,g=s.elt;null==ji.zpp_pool?m=new ji:(m=ji.zpp_pool,ji.zpp_pool=m.next,m.next=null),m.elt=g;var f=m;f.next=r.head,r.head=f,r.modified=!0,r.length++,s=s.next}for(;null!=p;){var v,z=p.elt;null==ji.zpp_pool?v=new ji:(v=ji.zpp_pool,ji.zpp_pool=v.next,v.next=null),v.elt=z;var w=v;w.next=o.head,o.head=w,o.modified=!0,o.length++,p=p.next}for(;null!=r.head;)for(var b=r.pop_unsafe(),S=n.head;null!=S;){for(var C=S.elt.cbsets,M=ri.UCbSet,P=ri.VCbSet,k=ri.WCbSet,T=b.cbsets.head,A=C.head;null!=T&&null!=A;){var O=T.elt,E=A.elt;if(O==E){var G;null==qi.zpp_pool?G=new qi:(G=qi.zpp_pool,qi.zpp_pool=G.next,G.next=null),G.elt=O;var D=G;D.next=k.head,k.head=D,k.modified=!0,k.length++,T=T.next,A=A.next}else if(jo.setlt(O,E)){var I;null==qi.zpp_pool?I=new qi:(I=qi.zpp_pool,qi.zpp_pool=I.next,I.next=null),I.elt=O;var L=I;L.next=M.head,M.head=L,M.modified=!0,M.length++,T=T.next}else{var B;null==qi.zpp_pool?B=new qi:(B=qi.zpp_pool,qi.zpp_pool=B.next,B.next=null),B.elt=E;var R=B;R.next=P.head,P.head=R,P.modified=!0,P.length++,A=A.next}}for(;null!=T;){var F,j=T.elt;null==qi.zpp_pool?F=new qi:(F=qi.zpp_pool,qi.zpp_pool=F.next,F.next=null),F.elt=j;var N=F;N.next=M.head,M.head=N,M.modified=!0,M.length++,T=T.next}for(;null!=A;){var U,V=A.elt;null==qi.zpp_pool?U=new qi:(U=qi.zpp_pool,qi.zpp_pool=U.next,U.next=null),U.elt=V;var H=U;H.next=P.head,P.head=H,P.modified=!0,P.length++,A=A.next}for(;null!=M.head;)for(var W=M.pop_unsafe(),q=C.head;null!=q;){var X,Y=q.elt;if(W.validate(),Y.validate(),jo.single_intersection(W,Y,i))null==No.zpp_pool?X=new No:(X=No.zpp_pool,No.zpp_pool=X.next,X.next=null),X.zip_listeners=!0,jo.setlt(W,Y)?(X.a=W,X.b=Y):(X.a=Y,X.b=W),t.try_insert(X);q=q.next}for(;null!=P.head;)for(var K=P.pop_unsafe(),Z=k.head;null!=Z;){var J,Q=Z.elt;if(K.validate(),Q.validate(),jo.single_intersection(K,Q,i))null==No.zpp_pool?J=new No:(J=No.zpp_pool,No.zpp_pool=J.next,J.next=null),J.zip_listeners=!0,jo.setlt(K,Q)?(J.a=K,J.b=Q):(J.a=Q,J.b=K),t.try_insert(J);Z=Z.next}for(;null!=k.head;){var $,ee=k.pop_unsafe();if(ee.validate(),ee.validate(),jo.single_intersection(ee,ee,i))null==No.zpp_pool?$=new No:($=No.zpp_pool,No.zpp_pool=$.next,$.next=null),$.zip_listeners=!0,jo.setlt(ee,ee),$.a=ee,$.b=ee,t.try_insert($);for(var te=k.head;null!=te;){var ie,ne=te.elt;if(ee.validate(),ne.validate(),jo.single_intersection(ee,ne,i))null==No.zpp_pool?ie=new No:(ie=No.zpp_pool,No.zpp_pool=ie.next,ie.next=null),ie.zip_listeners=!0,jo.setlt(ee,ne)?(ie.a=ee,ie.b=ne):(ie.a=ne,ie.b=ee),t.try_insert(ie);te=te.next}}S=S.next}for(;null!=o.head;)for(var re=o.pop_unsafe(),oe=a.head;null!=oe;){for(var ae=oe.elt.cbsets,se=ri.UCbSet,pe=ri.VCbSet,le=ri.WCbSet,he=re.cbsets.head,ue=ae.head;null!=he&&null!=ue;){var de=he.elt,ce=ue.elt;if(de==ce){var _e;null==qi.zpp_pool?_e=new qi:(_e=qi.zpp_pool,qi.zpp_pool=_e.next,_e.next=null),_e.elt=de;var ye=_e;ye.next=le.head,le.head=ye,le.modified=!0,le.length++,he=he.next,ue=ue.next}else if(jo.setlt(de,ce)){var xe;null==qi.zpp_pool?xe=new qi:(xe=qi.zpp_pool,qi.zpp_pool=xe.next,xe.next=null),xe.elt=de;var me=xe;me.next=se.head,se.head=me,se.modified=!0,se.length++,he=he.next}else{var ge;null==qi.zpp_pool?ge=new qi:(ge=qi.zpp_pool,qi.zpp_pool=ge.next,ge.next=null),ge.elt=ce;var fe=ge;fe.next=pe.head,pe.head=fe,pe.modified=!0,pe.length++,ue=ue.next}}for(;null!=he;){var ve,ze=he.elt;null==qi.zpp_pool?ve=new qi:(ve=qi.zpp_pool,qi.zpp_pool=ve.next,ve.next=null),ve.elt=ze;var we=ve;we.next=se.head,se.head=we,se.modified=!0,se.length++,he=he.next}for(;null!=ue;){var be,Se=ue.elt;null==qi.zpp_pool?be=new qi:(be=qi.zpp_pool,qi.zpp_pool=be.next,be.next=null),be.elt=Se;var Ce=be;Ce.next=pe.head,pe.head=Ce,pe.modified=!0,pe.length++,ue=ue.next}for(;null!=se.head;)for(var Me=se.pop_unsafe(),Pe=ae.head;null!=Pe;){var ke,Te=Pe.elt;if(Me.validate(),Te.validate(),jo.single_intersection(Me,Te,i))null==No.zpp_pool?ke=new No:(ke=No.zpp_pool,No.zpp_pool=ke.next,ke.next=null),ke.zip_listeners=!0,jo.setlt(Me,Te)?(ke.a=Me,ke.b=Te):(ke.a=Te,ke.b=Me),t.try_insert(ke);Pe=Pe.next}for(;null!=pe.head;)for(var Ae=pe.pop_unsafe(),Oe=le.head;null!=Oe;){var Ee,Ge=Oe.elt;if(Ae.validate(),Ge.validate(),jo.single_intersection(Ae,Ge,i))null==No.zpp_pool?Ee=new No:(Ee=No.zpp_pool,No.zpp_pool=Ee.next,Ee.next=null),Ee.zip_listeners=!0,jo.setlt(Ae,Ge)?(Ee.a=Ae,Ee.b=Ge):(Ee.a=Ge,Ee.b=Ae),t.try_insert(Ee);Oe=Oe.next}for(;null!=le.head;){var De,Ie=le.pop_unsafe();if(Ie.validate(),Ie.validate(),jo.single_intersection(Ie,Ie,i))null==No.zpp_pool?De=new No:(De=No.zpp_pool,No.zpp_pool=De.next,De.next=null),De.zip_listeners=!0,jo.setlt(Ie,Ie),De.a=Ie,De.b=Ie,t.try_insert(De);for(var Le=le.head;null!=Le;){var Be,Re=Le.elt;if(Ie.validate(),Re.validate(),jo.single_intersection(Ie,Re,i))null==No.zpp_pool?Be=new No:(Be=No.zpp_pool,No.zpp_pool=Be.next,Be.next=null),Be.zip_listeners=!0,jo.setlt(Ie,Re)?(Be.a=Ie,Be.b=Re):(Be.a=Re,Be.b=Ie),t.try_insert(Be);Le=Le.next}}oe=oe.next}for(;null!=a.head;){for(var Fe=a.pop_unsafe(),je=Fe.cbsets,Ne=ri.UCbSet,Ue=ri.VCbSet,Ve=ri.WCbSet,He=Fe.cbsets.head,We=je.head;null!=He&&null!=We;){var qe=He.elt,Xe=We.elt;if(qe==Xe){var Ye;null==qi.zpp_pool?Ye=new qi:(Ye=qi.zpp_pool,qi.zpp_pool=Ye.next,Ye.next=null),Ye.elt=qe;var Ke=Ye;Ke.next=Ve.head,Ve.head=Ke,Ve.modified=!0,Ve.length++,He=He.next,We=We.next}else if(jo.setlt(qe,Xe)){var Ze;null==qi.zpp_pool?Ze=new qi:(Ze=qi.zpp_pool,qi.zpp_pool=Ze.next,Ze.next=null),Ze.elt=qe;var Je=Ze;Je.next=Ne.head,Ne.head=Je,Ne.modified=!0,Ne.length++,He=He.next}else{var Qe;null==qi.zpp_pool?Qe=new qi:(Qe=qi.zpp_pool,qi.zpp_pool=Qe.next,Qe.next=null),Qe.elt=Xe;var $e=Qe;$e.next=Ue.head,Ue.head=$e,Ue.modified=!0,Ue.length++,We=We.next}}for(;null!=He;){var et,tt=He.elt;null==qi.zpp_pool?et=new qi:(et=qi.zpp_pool,qi.zpp_pool=et.next,et.next=null),et.elt=tt;var it=et;it.next=Ne.head,Ne.head=it,Ne.modified=!0,Ne.length++,He=He.next}for(;null!=We;){var nt,rt=We.elt;null==qi.zpp_pool?nt=new qi:(nt=qi.zpp_pool,qi.zpp_pool=nt.next,nt.next=null),nt.elt=rt;var ot=nt;ot.next=Ue.head,Ue.head=ot,Ue.modified=!0,Ue.length++,We=We.next}for(;null!=Ne.head;)for(var at=Ne.pop_unsafe(),st=je.head;null!=st;){var pt,lt=st.elt;if(at.validate(),lt.validate(),jo.single_intersection(at,lt,i))null==No.zpp_pool?pt=new No:(pt=No.zpp_pool,No.zpp_pool=pt.next,pt.next=null),pt.zip_listeners=!0,jo.setlt(at,lt)?(pt.a=at,pt.b=lt):(pt.a=lt,pt.b=at),t.try_insert(pt);st=st.next}for(;null!=Ue.head;)for(var ht=Ue.pop_unsafe(),ut=Ve.head;null!=ut;){var dt,ct=ut.elt;if(ht.validate(),ct.validate(),jo.single_intersection(ht,ct,i))null==No.zpp_pool?dt=new No:(dt=No.zpp_pool,No.zpp_pool=dt.next,dt.next=null),dt.zip_listeners=!0,jo.setlt(ht,ct)?(dt.a=ht,dt.b=ct):(dt.a=ct,dt.b=ht),t.try_insert(dt);ut=ut.next}for(;null!=Ve.head;){var _t,yt=Ve.pop_unsafe();if(yt.validate(),yt.validate(),jo.single_intersection(yt,yt,i))null==No.zpp_pool?_t=new No:(_t=No.zpp_pool,No.zpp_pool=_t.next,_t.next=null),_t.zip_listeners=!0,jo.setlt(yt,yt),_t.a=yt,_t.b=yt,t.try_insert(_t);for(var xt=Ve.head;null!=xt;){var mt,gt=xt.elt;if(yt.validate(),gt.validate(),jo.single_intersection(yt,gt,i))null==No.zpp_pool?mt=new No:(mt=No.zpp_pool,No.zpp_pool=mt.next,mt.next=null),mt.zip_listeners=!0,jo.setlt(yt,gt)?(mt.a=yt,mt.b=gt):(mt.a=gt,mt.b=yt),t.try_insert(mt);xt=xt.next}}for(var ft=a.head;null!=ft;){for(var vt=ft.elt.cbsets,zt=ri.UCbSet,wt=ri.VCbSet,bt=ri.WCbSet,St=Fe.cbsets.head,Ct=vt.head;null!=St&&null!=Ct;){var Mt=St.elt,Pt=Ct.elt;if(Mt==Pt){var kt;null==qi.zpp_pool?kt=new qi:(kt=qi.zpp_pool,qi.zpp_pool=kt.next,kt.next=null),kt.elt=Mt;var Tt=kt;Tt.next=bt.head,bt.head=Tt,bt.modified=!0,bt.length++,St=St.next,Ct=Ct.next}else if(jo.setlt(Mt,Pt)){var At;null==qi.zpp_pool?At=new qi:(At=qi.zpp_pool,qi.zpp_pool=At.next,At.next=null),At.elt=Mt;var Ot=At;Ot.next=zt.head,zt.head=Ot,zt.modified=!0,zt.length++,St=St.next}else{var Et;null==qi.zpp_pool?Et=new qi:(Et=qi.zpp_pool,qi.zpp_pool=Et.next,Et.next=null),Et.elt=Pt;var Gt=Et;Gt.next=wt.head,wt.head=Gt,wt.modified=!0,wt.length++,Ct=Ct.next}}for(;null!=St;){var Dt,It=St.elt;null==qi.zpp_pool?Dt=new qi:(Dt=qi.zpp_pool,qi.zpp_pool=Dt.next,Dt.next=null),Dt.elt=It;var Lt=Dt;Lt.next=zt.head,zt.head=Lt,zt.modified=!0,zt.length++,St=St.next}for(;null!=Ct;){var Bt,Rt=Ct.elt;null==qi.zpp_pool?Bt=new qi:(Bt=qi.zpp_pool,qi.zpp_pool=Bt.next,Bt.next=null),Bt.elt=Rt;var Ft=Bt;Ft.next=wt.head,wt.head=Ft,wt.modified=!0,wt.length++,Ct=Ct.next}for(;null!=zt.head;)for(var jt=zt.pop_unsafe(),Nt=vt.head;null!=Nt;){var Ut,Vt=Nt.elt;if(jt.validate(),Vt.validate(),jo.single_intersection(jt,Vt,i))null==No.zpp_pool?Ut=new No:(Ut=No.zpp_pool,No.zpp_pool=Ut.next,Ut.next=null),Ut.zip_listeners=!0,jo.setlt(jt,Vt)?(Ut.a=jt,Ut.b=Vt):(Ut.a=Vt,Ut.b=jt),t.try_insert(Ut);Nt=Nt.next}for(;null!=wt.head;)for(var Ht=wt.pop_unsafe(),Wt=bt.head;null!=Wt;){var qt,Xt=Wt.elt;if(Ht.validate(),Xt.validate(),jo.single_intersection(Ht,Xt,i))null==No.zpp_pool?qt=new No:(qt=No.zpp_pool,No.zpp_pool=qt.next,qt.next=null),qt.zip_listeners=!0,jo.setlt(Ht,Xt)?(qt.a=Ht,qt.b=Xt):(qt.a=Xt,qt.b=Ht),t.try_insert(qt);Wt=Wt.next}for(;null!=bt.head;){var Yt,Kt=bt.pop_unsafe();if(Kt.validate(),Kt.validate(),jo.single_intersection(Kt,Kt,i))null==No.zpp_pool?Yt=new No:(Yt=No.zpp_pool,No.zpp_pool=Yt.next,Yt.next=null),Yt.zip_listeners=!0,jo.setlt(Kt,Kt),Yt.a=Kt,Yt.b=Kt,t.try_insert(Yt);for(var Zt=bt.head;null!=Zt;){var Jt,Qt=Zt.elt;if(Kt.validate(),Qt.validate(),jo.single_intersection(Kt,Qt,i))null==No.zpp_pool?Jt=new No:(Jt=No.zpp_pool,No.zpp_pool=Jt.next,Jt.next=null),Jt.zip_listeners=!0,jo.setlt(Kt,Qt)?(Jt.a=Kt,Jt.b=Qt):(Jt.a=Qt,Jt.b=Kt),t.try_insert(Jt);Zt=Zt.next}}ft=ft.next}}if(null!=t.parent){for(var $t=t.parent;null!=$t;)if(null!=$t.prev)$t=$t.prev;else if(null!=$t.next)$t=$t.next;else{var ei=$t.data;e?i.space.freshListenerType(ei.a,ei.b):i.space.nullListenerType(ei.a,ei.b),ei.a=ei.b=null,ei.listeners.clear(),ei.next=No.zpp_pool,No.zpp_pool=ei;var ti=$t.parent;null!=ti&&($t==ti.prev?ti.prev=null:ti.next=null,$t.parent=null);var ii=$t;ii.data=null,ii.lt=null,ii.swapped=null,ii.next=Un.zpp_pool,Un.zpp_pool=ii,$t=ti}t.parent=null}var ni=t;ni.data=null,ni.lt=null,ni.swapped=null,ni.next=Un.zpp_pool,Un.zpp_pool=ni},ri.prototype.with_union=function(e){for(var t=this.options1.includes.head,i=this.options2.includes.head;null!=t&&null!=i;){var n=t.elt,r=i.elt;n==r?(e(n),t=t.next,i=i.next):n.id<r.id?(e(n),t=t.next):(e(r),i=i.next)}for(;null!=t;)e(t.elt),t=t.next;for(;null!=i;)e(i.elt),i=i.next},ri.prototype.addedToSpace=function(){for(var e=this,t=3==this.type,i=this.options1.includes.head,n=this.options2.includes.head;null!=i&&null!=n;){var r=i.elt,o=n.elt;if(r==o){for(var a=null,s=r.listeners.head;null!=s;){var p=s.elt;if(e.precedence>p.precedence||e.precedence==p.precedence&&e.id>p.id)break;s=(a=s).next}var l,h=r.listeners;null==Zo.zpp_pool?l=new Zo:(l=Zo.zpp_pool,Zo.zpp_pool=l.next,l.next=null),l.elt=e;var u=l;null==a?(u.next=h.head,h.head=u):(u.next=a.next,a.next=u),h.pushmod=h.modified=!0,h.length++;for(var d=r.cbsets.head;null!=d;){var c=d.elt;c.zip_listeners=!0,c.invalidate_pairs(),d=d.next}if(t)for(var _=r.interactors.head;null!=_;)_.elt.wake(),_=_.next;i=i.next,n=n.next}else if(r.id<o.id){for(var y=null,x=r.listeners.head;null!=x;){var m=x.elt;if(e.precedence>m.precedence||e.precedence==m.precedence&&e.id>m.id)break;x=(y=x).next}var g,f=r.listeners;null==Zo.zpp_pool?g=new Zo:(g=Zo.zpp_pool,Zo.zpp_pool=g.next,g.next=null),g.elt=e;var v=g;null==y?(v.next=f.head,f.head=v):(v.next=y.next,y.next=v),f.pushmod=f.modified=!0,f.length++;for(var z=r.cbsets.head;null!=z;){var w=z.elt;w.zip_listeners=!0,w.invalidate_pairs(),z=z.next}if(t)for(var b=r.interactors.head;null!=b;)b.elt.wake(),b=b.next;i=i.next}else{for(var S=null,C=o.listeners.head;null!=C;){var M=C.elt;if(e.precedence>M.precedence||e.precedence==M.precedence&&e.id>M.id)break;C=(S=C).next}var P,k=o.listeners;null==Zo.zpp_pool?P=new Zo:(P=Zo.zpp_pool,Zo.zpp_pool=P.next,P.next=null),P.elt=e;var T=P;null==S?(T.next=k.head,k.head=T):(T.next=S.next,S.next=T),k.pushmod=k.modified=!0,k.length++;for(var A=o.cbsets.head;null!=A;){var O=A.elt;O.zip_listeners=!0,O.invalidate_pairs(),A=A.next}if(t)for(var E=o.interactors.head;null!=E;)E.elt.wake(),E=E.next;n=n.next}}for(;null!=i;){for(var G=i.elt,D=null,I=G.listeners.head;null!=I;){var L=I.elt;if(e.precedence>L.precedence||e.precedence==L.precedence&&e.id>L.id)break;I=(D=I).next}var B,R=G.listeners;null==Zo.zpp_pool?B=new Zo:(B=Zo.zpp_pool,Zo.zpp_pool=B.next,B.next=null),B.elt=e;var F=B;null==D?(F.next=R.head,R.head=F):(F.next=D.next,D.next=F),R.pushmod=R.modified=!0,R.length++;for(var j=G.cbsets.head;null!=j;){var N=j.elt;N.zip_listeners=!0,N.invalidate_pairs(),j=j.next}if(t)for(var U=G.interactors.head;null!=U;)U.elt.wake(),U=U.next;i=i.next}for(;null!=n;){for(var V=n.elt,H=null,W=V.listeners.head;null!=W;){var q=W.elt;if(e.precedence>q.precedence||e.precedence==q.precedence&&e.id>q.id)break;W=(H=W).next}var X,Y=V.listeners;null==Zo.zpp_pool?X=new Zo:(X=Zo.zpp_pool,Zo.zpp_pool=X.next,X.next=null),X.elt=e;var K=X;null==H?(K.next=Y.head,Y.head=K):(K.next=H.next,H.next=K),Y.pushmod=Y.modified=!0,Y.length++;for(var Z=V.cbsets.head;null!=Z;){var J=Z.elt;J.zip_listeners=!0,J.invalidate_pairs(),Z=Z.next}if(t)for(var Q=V.interactors.head;null!=Q;)Q.elt.wake(),Q=Q.next;n=n.next}this.options1.handler=$(this,this.cbtype_change1),this.options2.handler=$(this,this.cbtype_change2),this.with_uniquesets(!0)},ri.prototype.removedFromSpace=function(){this.with_uniquesets(!1);for(var e=3==this.type,t=this.options1.includes.head,i=this.options2.includes.head;null!=t&&null!=i;){var n=t.elt,r=i.elt;if(n==r){n.listeners.remove(this);for(var o=n.cbsets.head;null!=o;){var a=o.elt;a.zip_listeners=!0,a.invalidate_pairs(),o=o.next}if(e)for(var s=n.interactors.head;null!=s;)s.elt.wake(),s=s.next;t=t.next,i=i.next}else if(n.id<r.id){n.listeners.remove(this);for(var p=n.cbsets.head;null!=p;){var l=p.elt;l.zip_listeners=!0,l.invalidate_pairs(),p=p.next}if(e)for(var h=n.interactors.head;null!=h;)h.elt.wake(),h=h.next;t=t.next}else{r.listeners.remove(this);for(var u=r.cbsets.head;null!=u;){var d=u.elt;d.zip_listeners=!0,d.invalidate_pairs(),u=u.next}if(e)for(var c=r.interactors.head;null!=c;)c.elt.wake(),c=c.next;i=i.next}}for(;null!=t;){var _=t.elt;_.listeners.remove(this);for(var y=_.cbsets.head;null!=y;){var x=y.elt;x.zip_listeners=!0,x.invalidate_pairs(),y=y.next}if(e)for(var m=_.interactors.head;null!=m;)m.elt.wake(),m=m.next;t=t.next}for(;null!=i;){var g=i.elt;g.listeners.remove(this);for(var f=g.cbsets.head;null!=f;){var v=f.elt;v.zip_listeners=!0,v.invalidate_pairs(),f=f.next}if(e)for(var z=g.interactors.head;null!=z;)z.elt.wake(),z=z.next;i=i.next}this.options1.handler=null,this.options2.handler=null},ri.prototype.invalidate_precedence=function(){var e=this;if(null!=this.space){for(var t=3==this.type,i=this.options1.includes.head,n=this.options2.includes.head;null!=i&&null!=n;){var r=i.elt,o=n.elt;if(r==o){r.listeners.remove(e);for(var a=r.cbsets.head;null!=a;){var s=a.elt;s.zip_listeners=!0,s.invalidate_pairs(),a=a.next}for(var p=null,l=r.listeners.head;null!=l;){var h=l.elt;if(e.precedence>h.precedence||e.precedence==h.precedence&&e.id>h.id)break;l=(p=l).next}var u,d=r.listeners;null==Zo.zpp_pool?u=new Zo:(u=Zo.zpp_pool,Zo.zpp_pool=u.next,u.next=null),u.elt=e;var c=u;null==p?(c.next=d.head,d.head=c):(c.next=p.next,p.next=c),d.pushmod=d.modified=!0,d.length++;for(var _=r.cbsets.head;null!=_;){var y=_.elt;y.zip_listeners=!0,y.invalidate_pairs(),_=_.next}if(t)for(var x=r.interactors.head;null!=x;)x.elt.wake(),x=x.next;i=i.next,n=n.next}else if(r.id<o.id){r.listeners.remove(e);for(var m=r.cbsets.head;null!=m;){var g=m.elt;g.zip_listeners=!0,g.invalidate_pairs(),m=m.next}for(var f=null,v=r.listeners.head;null!=v;){var z=v.elt;if(e.precedence>z.precedence||e.precedence==z.precedence&&e.id>z.id)break;v=(f=v).next}var w,b=r.listeners;null==Zo.zpp_pool?w=new Zo:(w=Zo.zpp_pool,Zo.zpp_pool=w.next,w.next=null),w.elt=e;var S=w;null==f?(S.next=b.head,b.head=S):(S.next=f.next,f.next=S),b.pushmod=b.modified=!0,b.length++;for(var C=r.cbsets.head;null!=C;){var M=C.elt;M.zip_listeners=!0,M.invalidate_pairs(),C=C.next}if(t)for(var P=r.interactors.head;null!=P;)P.elt.wake(),P=P.next;i=i.next}else{o.listeners.remove(e);for(var k=o.cbsets.head;null!=k;){var T=k.elt;T.zip_listeners=!0,T.invalidate_pairs(),k=k.next}for(var A=null,O=o.listeners.head;null!=O;){var E=O.elt;if(e.precedence>E.precedence||e.precedence==E.precedence&&e.id>E.id)break;O=(A=O).next}var G,D=o.listeners;null==Zo.zpp_pool?G=new Zo:(G=Zo.zpp_pool,Zo.zpp_pool=G.next,G.next=null),G.elt=e;var I=G;null==A?(I.next=D.head,D.head=I):(I.next=A.next,A.next=I),D.pushmod=D.modified=!0,D.length++;for(var L=o.cbsets.head;null!=L;){var B=L.elt;B.zip_listeners=!0,B.invalidate_pairs(),L=L.next}if(t)for(var R=o.interactors.head;null!=R;)R.elt.wake(),R=R.next;n=n.next}}for(;null!=i;){var F=i.elt;F.listeners.remove(e);for(var j=F.cbsets.head;null!=j;){var N=j.elt;N.zip_listeners=!0,N.invalidate_pairs(),j=j.next}for(var U=null,V=F.listeners.head;null!=V;){var H=V.elt;if(e.precedence>H.precedence||e.precedence==H.precedence&&e.id>H.id)break;V=(U=V).next}var W,q=F.listeners;null==Zo.zpp_pool?W=new Zo:(W=Zo.zpp_pool,Zo.zpp_pool=W.next,W.next=null),W.elt=e;var X=W;null==U?(X.next=q.head,q.head=X):(X.next=U.next,U.next=X),q.pushmod=q.modified=!0,q.length++;for(var Y=F.cbsets.head;null!=Y;){var K=Y.elt;K.zip_listeners=!0,K.invalidate_pairs(),Y=Y.next}if(t)for(var Z=F.interactors.head;null!=Z;)Z.elt.wake(),Z=Z.next;i=i.next}for(;null!=n;){var J=n.elt;J.listeners.remove(e);for(var Q=J.cbsets.head;null!=Q;){var $=Q.elt;$.zip_listeners=!0,$.invalidate_pairs(),Q=Q.next}for(var ee=null,te=J.listeners.head;null!=te;){var ie=te.elt;if(e.precedence>ie.precedence||e.precedence==ie.precedence&&e.id>ie.id)break;te=(ee=te).next}var ne,re=J.listeners;null==Zo.zpp_pool?ne=new Zo:(ne=Zo.zpp_pool,Zo.zpp_pool=ne.next,ne.next=null),ne.elt=e;var oe=ne;null==ee?(oe.next=re.head,re.head=oe):(oe.next=ee.next,ee.next=oe),re.pushmod=re.modified=!0,re.length++;for(var ae=J.cbsets.head;null!=ae;){var se=ae.elt;se.zip_listeners=!0,se.invalidate_pairs(),ae=ae.next}if(t)for(var pe=J.interactors.head;null!=pe;)pe.elt.wake(),pe=pe.next;n=n.next}}},ri.prototype.cbtype_change1=function(e,t,i){this.cbtype_change(this.options1,e,t,i)},ri.prototype.cbtype_change2=function(e,t,i){this.cbtype_change(this.options2,e,t,i)},ri.prototype.cbtype_change=function(e,t,i,n){if(this.removedFromSpace(),i)if(n){for(var r=null,o=e.includes.head;null!=o&&!(t.id<o.elt.id);)o=(r=o).next;var a,s=e.includes;null==ji.zpp_pool?a=new ji:(a=ji.zpp_pool,ji.zpp_pool=a.next,a.next=null),a.elt=t;var p=a;null==r?(p.next=s.head,s.head=p):(p.next=r.next,r.next=p),s.pushmod=s.modified=!0,s.length++}else e.includes.remove(t);else if(n){for(var l=null,h=e.excludes.head;null!=h&&!(t.id<h.elt.id);)h=(l=h).next;var u,d=e.excludes;null==ji.zpp_pool?u=new ji:(u=ji.zpp_pool,ji.zpp_pool=u.next,u.next=null),u.elt=t;var c=u;null==l?(c.next=d.head,d.head=c):(c.next=l.next,l.next=c),d.pushmod=d.modified=!0,d.length++}else e.excludes.remove(t);this.addedToSpace()},ri.prototype.swapEvent=function(e){this.removedFromSpace(),this.event=e,this.addedToSpace()},ri.prototype.__class__=ri;var je=zpp_nape.callbacks.ZPP_OptionType=function(){this.wrap_excludes=null,this.wrap_includes=null,this.excludes=null,this.includes=null,this.handler=null,this.outer=null,this.includes=new Fe,this.excludes=new Fe};je.__name__=["zpp_nape","callbacks","ZPP_OptionType"],je.argument=function(e){return null==e?new g:fe.__instanceof(e,g)?e:(new g).including(e)},je.prototype.outer=null,je.prototype.handler=null,je.prototype.includes=null,je.prototype.excludes=null,je.prototype.wrap_includes=null,je.prototype.wrap_excludes=null,je.prototype.setup_includes=function(){this.wrap_includes=Tn.get(this.includes,!0)},je.prototype.setup_excludes=function(){this.wrap_excludes=Tn.get(this.excludes,!0)},je.prototype.excluded=function(e){return this.nonemptyintersection(e,this.excludes)},je.prototype.included=function(e){return this.nonemptyintersection(e,this.includes)},je.prototype.compatible=function(e){return!!this.nonemptyintersection(e,this.includes)&&!this.nonemptyintersection(e,this.excludes)},je.prototype.nonemptyintersection=function(e,t){for(var i=!1,n=e.head,r=t.head;null!=r&&null!=n;){var o=r.elt,a=n.elt;if(o==a){i=!0;break}o.id<a.id?r=r.next:n=n.next}return i},je.prototype.effect_change=function(e,t,i){if(t)if(i){for(var n=null,r=this.includes.head;null!=r&&!(e.id<r.elt.id);)r=(n=r).next;var o,a=this.includes;null==ji.zpp_pool?o=new ji:(o=ji.zpp_pool,ji.zpp_pool=o.next,o.next=null),o.elt=e;var s=o;null==n?(s.next=a.head,a.head=s):(s.next=n.next,n.next=s),a.pushmod=a.modified=!0,a.length++}else this.includes.remove(e);else if(i){for(var p=null,l=this.excludes.head;null!=l&&!(e.id<l.elt.id);)l=(p=l).next;var h,u=this.excludes;null==ji.zpp_pool?h=new ji:(h=ji.zpp_pool,ji.zpp_pool=h.next,h.next=null),h.elt=e;var d=h;null==p?(d.next=u.head,u.head=d):(d.next=p.next,p.next=d),u.pushmod=u.modified=!0,u.length++}else this.excludes.remove(e)},je.prototype.append_type=function(e,t){if(e==this.includes){if(!this.includes.has(t))if(this.excludes.has(t))null!=this.handler?this.handler(t,!1,!1):this.excludes.remove(t);else if(null!=this.handler)this.handler(t,!0,!0);else{for(var i=null,n=this.includes.head;null!=n&&!(t.id<n.elt.id);)n=(i=n).next;var r,o=this.includes;null==ji.zpp_pool?r=new ji:(r=ji.zpp_pool,ji.zpp_pool=r.next,r.next=null),r.elt=t;var a=r;null==i?(a.next=o.head,o.head=a):(a.next=i.next,i.next=a),o.pushmod=o.modified=!0,o.length++}}else if(!this.excludes.has(t))if(this.includes.has(t))null!=this.handler?this.handler(t,!0,!1):this.includes.remove(t);else if(null!=this.handler)this.handler(t,!1,!0);else{for(var s=null,p=this.excludes.head;null!=p&&!(t.id<p.elt.id);)p=(s=p).next;var l,h=this.excludes;null==ji.zpp_pool?l=new ji:(l=ji.zpp_pool,ji.zpp_pool=l.next,l.next=null),l.elt=t;var u=l;null==s?(u.next=h.head,h.head=u):(u.next=s.next,s.next=u),h.pushmod=h.modified=!0,h.length++}},je.prototype.set=function(e){if(e!=this){for(;null!=this.includes.head;)this.append_type(this.excludes,this.includes.head.elt);for(;null!=this.excludes.head;)this.append_type(this.includes,this.excludes.head.elt);for(var t=e.excludes.head;null!=t;)this.append_type(this.excludes,t.elt),t=t.next;for(var i=e.includes.head;null!=i;)this.append_type(this.includes,i.elt),i=i.next}return this},je.prototype.append=function(e,t){if(fe.__instanceof(t,c)){var i=t;this.append_type(e,i.zpp_inner)}else if(fe.__instanceof(t,y)){var n=t;n.zpp_inner.valmod();for(var r=Ve.get(n);;){r.zpp_inner.zpp_inner.valmod();var o=r.zpp_inner;o.zpp_inner.valmod(),o.zpp_inner.zip_length&&(o.zpp_inner.zip_length=!1,o.zpp_inner.user_length=o.zpp_inner.inner.length);var a=o.zpp_inner.user_length;if(r.zpp_critical=!0,!(r.zpp_i<a||(r.zpp_next=Ve.zpp_pool,(Ve.zpp_pool=r).zpp_inner=null,!1)))break;r.zpp_critical=!1,this.append_type(e,r.zpp_inner.at(r.zpp_i++).zpp_inner)}}else if(t instanceof Array&&null==t.__enum__)for(var s=t,p=0;p<s.length;){var l=s[p];++p;var h=l;this.append_type(e,h.zpp_inner)}},je.prototype.__class__=je;var Ne=zpp_nape.constraint.ZPP_Constraint=function(){this.pre_dt=0,this.wrap_cbTypes=null,this.cbSet=null,this.cbTypes=null,this.__velocity=!1,this.ignore=!1,this.component=null,this.removeOnBreak=!1,this.breakUnderError=!1,this.breakUnderForce=!1,this.maxError=0,this.maxForce=0,this.damping=0,this.frequency=0,this.stiff=!1,this.active=!1,this.space=null,this.compound=null,this.userData=null,this.id=0,this.outer=null,this.__velocity=!1,this.id=ke.Constraint(),this.stiff=!0,this.active=!0,this.ignore=!1,this.frequency=10,this.damping=1,this.maxForce=1/0,this.maxError=1/0,this.breakUnderForce=!1,this.removeOnBreak=!0,this.pre_dt=-1,this.cbTypes=new Fe};Ne.__name__=["zpp_nape","constraint","ZPP_Constraint"],Ne.prototype.outer=null,Ne.prototype.clear=function(){},Ne.prototype.id=null,Ne.prototype.userData=null,Ne.prototype.compound=null,Ne.prototype.space=null,Ne.prototype.active=null,Ne.prototype.stiff=null,Ne.prototype.frequency=null,Ne.prototype.damping=null,Ne.prototype.maxForce=null,Ne.prototype.maxError=null,Ne.prototype.breakUnderForce=null,Ne.prototype.breakUnderError=null,Ne.prototype.removeOnBreak=null,Ne.prototype.component=null,Ne.prototype.ignore=null,Ne.prototype.__velocity=null,Ne.prototype.immutable_midstep=function(e){},Ne.prototype.cbTypes=null,Ne.prototype.cbSet=null,Ne.prototype.wrap_cbTypes=null,Ne.prototype.setupcbTypes=function(){this.wrap_cbTypes=Tn.get(this.cbTypes),this.wrap_cbTypes.zpp_inner.adder=$(this,this.wrap_cbTypes_adder),this.wrap_cbTypes.zpp_inner.subber=$(this,this.wrap_cbTypes_subber),this.wrap_cbTypes.zpp_inner.dontremove=!0},Ne.prototype.wrap_cbTypes_subber=function(e){var t=e.zpp_inner;this.cbTypes.has(t)&&(null!=this.space&&(this.dealloc_cbSet(),t.constraints.remove(this)),this.cbTypes.remove(t),null!=this.space&&(this.alloc_cbSet(),this.wake()))},Ne.prototype.wrap_cbTypes_adder=function(e){return this.insert_cbtype(e.zpp_inner),!1},Ne.prototype.insert_cbtype=function(e){if(!this.cbTypes.has(e)){null!=this.space&&(this.dealloc_cbSet(),e.constraints.add(this));for(var t=null,i=this.cbTypes.head;null!=i&&!(e.id<i.elt.id);)i=(t=i).next;var n,r=this.cbTypes;null==ji.zpp_pool?n=new ji:(n=ji.zpp_pool,ji.zpp_pool=n.next,n.next=null),n.elt=e;var o=n;null==t?(o.next=r.head,r.head=o):(o.next=t.next,t.next=o),r.pushmod=r.modified=!0,r.length++,null!=this.space&&(this.alloc_cbSet(),this.wake())}},Ne.prototype.alloc_cbSet=function(){null!=(this.cbSet=this.space.cbsets.get(this.cbTypes))&&(this.cbSet.count++,this.cbSet.constraints.add(this))},Ne.prototype.dealloc_cbSet=function(){if(null!=this.cbSet){if(this.cbSet.constraints.remove(this),0==--this.cbSet.count){this.space.cbsets.remove(this.cbSet);var e=this.cbSet;for(e.listeners.clear(),e.zip_listeners=!0,e.bodylisteners.clear(),e.zip_bodylisteners=!0,e.conlisteners.clear(),e.zip_conlisteners=!0;null!=e.cbTypes.head;)e.cbTypes.pop_unsafe().cbsets.remove(e);e.next=jo.zpp_pool,jo.zpp_pool=e}this.cbSet=null}},Ne.prototype.activate=function(){null!=this.space&&this.activeInSpace()},Ne.prototype.deactivate=function(){null!=this.space&&this.inactiveOrOutSpace()},Ne.prototype.addedToSpace=function(){this.active&&this.activeInSpace(),this.activeBodies();for(var e=this.cbTypes.head;null!=e;)e.elt.constraints.add(this),e=e.next},Ne.prototype.removedFromSpace=function(){this.active&&this.inactiveOrOutSpace(),this.inactiveBodies();for(var e=this.cbTypes.head;null!=e;)e.elt.constraints.remove(this),e=e.next},Ne.prototype.activeInSpace=function(){this.alloc_cbSet(),null==oi.zpp_pool?this.component=new oi:(this.component=oi.zpp_pool,oi.zpp_pool=this.component.next,this.component.next=null),this.component.isBody=!1,this.component.constraint=this},Ne.prototype.inactiveOrOutSpace=function(){this.dealloc_cbSet();var e=this.component;e.body=null,e.constraint=null,e.next=oi.zpp_pool,oi.zpp_pool=e,this.component=null},Ne.prototype.activeBodies=function(){},Ne.prototype.inactiveBodies=function(){},Ne.prototype.clearcache=function(){},Ne.prototype.validate=function(){},Ne.prototype.wake_connected=function(){},Ne.prototype.forest=function(){},Ne.prototype.pair_exists=function(e,t){return!1},Ne.prototype.broken=function(){},Ne.prototype.warmStart=function(){},Ne.prototype.pre_dt=null,Ne.prototype.preStep=function(e){return!1},Ne.prototype.applyImpulseVel=function(){return!1},Ne.prototype.applyImpulsePos=function(){return!1},Ne.prototype.wake=function(){null!=this.space&&this.space.wake_constraint(this)},Ne.prototype.draw=function(e){},Ne.prototype.copy=function(e,t){return null},Ne.prototype.copyto=function(e){var t=this.outer;null==t.zpp_inner.wrap_cbTypes&&t.zpp_inner.setupcbTypes();var i=t.zpp_inner.wrap_cbTypes;i.zpp_inner.valmod();for(var n=Ve.get(i);;){n.zpp_inner.zpp_inner.valmod();var r=n.zpp_inner;r.zpp_inner.valmod(),r.zpp_inner.zip_length&&(r.zpp_inner.zip_length=!1,r.zpp_inner.user_length=r.zpp_inner.inner.length);var o=r.zpp_inner.user_length;if(n.zpp_critical=!0,!(n.zpp_i<o||(n.zpp_next=Ve.zpp_pool,(Ve.zpp_pool=n).zpp_inner=null,!1)))break;n.zpp_critical=!1;var a=n.zpp_inner.at(n.zpp_i++);null==e.zpp_inner.wrap_cbTypes&&e.zpp_inner.setupcbTypes();var s=e.zpp_inner.wrap_cbTypes;s.zpp_inner.reverse_flag?s.push(a):s.unshift(a)}e.zpp_inner.removeOnBreak=t.zpp_inner.removeOnBreak;var p=t.zpp_inner.breakUnderError;e.zpp_inner.breakUnderError!=p&&(e.zpp_inner.breakUnderError=p,e.zpp_inner.wake());var l=t.zpp_inner.breakUnderForce;e.zpp_inner.breakUnderForce!=l&&(e.zpp_inner.breakUnderForce=l,e.zpp_inner.wake());var h=t.zpp_inner.maxError;e.zpp_inner.maxError!=h&&(e.zpp_inner.maxError=h,e.zpp_inner.wake());var u=t.zpp_inner.maxForce;e.zpp_inner.maxForce!=u&&(e.zpp_inner.maxForce=u,e.zpp_inner.wake());var d=t.zpp_inner.damping;e.zpp_inner.damping!=d&&(e.zpp_inner.damping=d,e.zpp_inner.stiff||e.zpp_inner.wake());var c=t.zpp_inner.frequency;e.zpp_inner.frequency!=c&&(e.zpp_inner.frequency=c,e.zpp_inner.stiff||e.zpp_inner.wake());var _=t.zpp_inner.stiff;e.zpp_inner.stiff!=_&&(e.zpp_inner.stiff=_,e.zpp_inner.wake());var y=t.zpp_inner.ignore;e.zpp_inner.ignore!=y&&(e.zpp_inner.ignore=y,e.zpp_inner.wake());var x=t.zpp_inner.active;e.zpp_inner.active!=x&&(null!=e.zpp_inner.component&&(e.zpp_inner.component.woken=!1),e.zpp_inner.clearcache(),x?(e.zpp_inner.active=x,e.zpp_inner.activate(),null!=e.zpp_inner.space&&(null!=e.zpp_inner.component&&(e.zpp_inner.component.sleeping=!0),e.zpp_inner.space.wake_constraint(e.zpp_inner,!0))):(null!=e.zpp_inner.space&&(e.zpp_inner.wake(),e.zpp_inner.space.live_constraints.remove(e.zpp_inner)),e.zpp_inner.active=x,e.zpp_inner.deactivate()))},Ne.prototype.__class__=Ne;var Ue=zpp_nape.constraint.ZPP_AngleJoint=function(){this.stepped=!1,this.bias=0,this.gamma=0,this.jMax=0,this.jAcc=0,this.kMass=0,this.b2=null,this.b1=null,this.scale=0,this.equal=!1,this.slack=!1,this.jointMax=0,this.jointMin=0,this.ratio=0,this.outer_zn=null,Ne.call(this),this.ratio=1,this.jAcc=0,this.slack=!1,this.jMax=1/0,this.stepped=!1};Ue.__name__=["zpp_nape","constraint","ZPP_AngleJoint"],Ue.__super__=Ne,Ue.prototype=Object.create(Ne.prototype),Ue.prototype.outer_zn=null,Ue.prototype.ratio=null,Ue.prototype.jointMin=null,Ue.prototype.jointMax=null,Ue.prototype.slack=null,Ue.prototype.equal=null,Ue.prototype.scale=null,Ue.prototype.is_slack=function(){var e,t=this.ratio*this.b2.rot-this.b1.rot;return this.equal?(e=!1,this.scale=1):e=t<this.jointMin?!(this.scale=-1):t>this.jointMax?(t-=this.jointMax,!(this.scale=1)):!(t=this.scale=0),e},Ue.prototype.bodyImpulse=function(e){return this.stepped?e==this.b1?Z.get(0,0,-this.scale*this.jAcc):Z.get(0,0,this.ratio*this.scale*this.jAcc):Z.get(0,0,0)},Ue.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},Ue.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},Ue.prototype.b1=null,Ue.prototype.b2=null,Ue.prototype.kMass=null,Ue.prototype.jAcc=null,Ue.prototype.jMax=null,Ue.prototype.gamma=null,Ue.prototype.bias=null,Ue.prototype.stepped=null,Ue.prototype.copy=function(e,t){var i=new z(null,null,this.jointMin,this.jointMax,this.ratio);if(this.copyto(i),null!=e&&null!=this.b1){for(var n=null,r=0;r<e.length;){var o=e[r];if(++r,o.id==this.b1.id){n=o.bc;break}}null!=n?i.zpp_inner_zn.b1=n.zpp_inner:t.push(rt.todo(this.b1.id,function(e){i.zpp_inner_zn.b1=e.zpp_inner}))}if(null!=e&&null!=this.b2){for(var a=null,s=0;s<e.length;){var p=e[s];if(++s,p.id==this.b2.id){a=p.bc;break}}null!=a?i.zpp_inner_zn.b2=a.zpp_inner:t.push(rt.todo(this.b2.id,function(e){i.zpp_inner_zn.b2=e.zpp_inner}))}return i},Ue.prototype.validate=function(){if(null==this.b1||null==this.b2)throw new r("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new r("Error: AngleJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new r("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(this.jointMin>this.jointMax)throw new r("Error: AngleJoint must have jointMin <= jointMax");if(2!=this.b1.type&&2!=this.b2.type)throw new r("Error: Constraints cannot have both bodies non-dynamic")},Ue.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},Ue.prototype.forest=function(){if(2==this.b1.type){var e,t;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{for(var i=this.b1.component,n=null;i!=i.parent;){var r=i.parent;i.parent=n,n=i,i=r}for(;null!=n;){var o=n.parent;n.parent=i,n=o}e=i}if(this.component==this.component.parent)t=this.component;else{for(var a=this.component,s=null;a!=a.parent;){var p=a.parent;a.parent=s,s=a,a=p}for(;null!=s;){var l=s.parent;s.parent=a,s=l}t=a}e!=t&&(e.rank<t.rank?e.parent=t:e.rank>t.rank?t.parent=e:(t.parent=e).rank++)}if(2==this.b2.type){var h,u;if(this.b2.component==this.b2.component.parent)h=this.b2.component;else{for(var d=this.b2.component,c=null;d!=d.parent;){var _=d.parent;d.parent=c,c=d,d=_}for(;null!=c;){var y=c.parent;c.parent=d,c=y}h=d}if(this.component==this.component.parent)u=this.component;else{for(var x=this.component,m=null;x!=x.parent;){var g=x.parent;x.parent=m,m=x,x=g}for(;null!=m;){var f=m.parent;m.parent=x,m=f}u=x}h!=u&&(h.rank<u.rank?h.parent=u:h.rank>u.rank?u.parent=h:(u.parent=h).rank++)}},Ue.prototype.pair_exists=function(e,t){return this.b1.id==e&&this.b2.id==t||this.b1.id==t&&this.b2.id==e},Ue.prototype.clearcache=function(){this.jAcc=0,this.pre_dt=-1,this.slack=!1},Ue.prototype.preStep=function(e){-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;this.pre_dt=e,this.stepped=!0,this.equal=this.jointMin==this.jointMax;var i=this.ratio*this.b2.rot-this.b1.rot;this.equal?(i-=this.jointMax,this.slack=!1,this.scale=1):i<this.jointMin?(i=this.jointMin-i,this.scale=-1,this.slack=!1):i>this.jointMax?(i-=this.jointMax,this.scale=1,this.slack=!1):(i=this.scale=0,this.slack=!0);var n=i;if(!this.slack){if(this.kMass=this.b1.sinertia+this.ratio*this.ratio*this.b2.sinertia,0!=this.kMass?this.kMass=1/this.kMass:this.jAcc=0,this.stiff)this.bias=0,this.gamma=0;else{if(this.breakUnderError&&n*n>this.maxError*this.maxError)return!0;var r,o=2*Math.PI*this.frequency;this.gamma=1/(e*o*(2*this.damping+o*e));var a=1/(1+this.gamma);r=e*o*o*this.gamma,this.gamma*=a,this.kMass*=a,this.bias=-n*r,this.bias<-this.maxError?this.bias=-this.maxError:this.bias>this.maxError&&(this.bias=this.maxError)}this.jAcc*=t,this.jMax=this.maxForce*e}return!1},Ue.prototype.warmStart=function(){this.slack||(this.b1.angvel-=this.scale*this.b1.iinertia*this.jAcc,this.b2.angvel+=this.ratio*this.scale*this.b2.iinertia*this.jAcc)},Ue.prototype.applyImpulseVel=function(){if(this.slack)return!1;var e=this.kMass*(this.bias-this.scale*(this.ratio*(this.b2.angvel+this.b2.kinangvel)-this.b1.angvel-this.b1.kinangvel))-this.jAcc*this.gamma,t=this.jAcc;return this.jAcc+=e,!this.equal&&0<this.jAcc&&(this.jAcc=0),!(!this.breakUnderForce||!(this.jAcc>this.jMax||this.jAcc<-this.jMax))||(this.stiff||(this.jAcc>this.jMax?this.jAcc=this.jMax:this.jAcc<-this.jMax&&(this.jAcc=-this.jMax)),e=this.jAcc-t,this.b1.angvel-=this.scale*this.b1.iinertia*e,this.b2.angvel+=this.ratio*this.scale*this.b2.iinertia*e,!1)},Ue.prototype.applyImpulsePos=function(){var e,t,i,n=this.ratio*this.b2.rot-this.b1.rot;if(this.equal?(n-=this.jointMax,i=!1,this.scale=1):i=n<this.jointMin?(n=this.jointMin-n,!(this.scale=-1)):n>this.jointMax?(n-=this.jointMax,!(this.scale=1)):!(n=this.scale=0),e=n,!i){if(this.breakUnderError&&e*e>this.maxError*this.maxError)return!0;if(t=-(e*=.5)*this.kMass,this.equal||t<0){var r=this.b1,o=-this.scale*t*this.b1.iinertia;if(r.rot+=o,1e-4<o*o)r.axisx=Math.sin(r.rot),r.axisy=Math.cos(r.rot);else{var a=o*o,s=1-.5*a,p=1-a*a/8,l=(s*r.axisx+o*r.axisy)*p;r.axisy=(s*r.axisy-o*r.axisx)*p,r.axisx=l}var h=this.b2,u=this.ratio*this.scale*t*this.b2.iinertia;if(h.rot+=u,1e-4<u*u)h.axisx=Math.sin(h.rot),h.axisy=Math.cos(h.rot);else{var d=u*u,c=1-.5*d,_=1-d*d/8,y=(c*h.axisx+u*h.axisy)*_;h.axisy=(c*h.axisy-u*h.axisx)*_,h.axisx=y}}}return!1},Ue.prototype.draw=function(e){},Ue.prototype.__class__=Ue;var rt=zpp_nape.constraint.ZPP_CopyHelper=function(){this.cb=null,this.bc=null,this.id=0};rt.__name__=["zpp_nape","constraint","ZPP_CopyHelper"],rt.dict=function(e,t){var i=new rt;return i.id=e,i.bc=t,i},rt.todo=function(e,t){var i=new rt;return i.id=e,i.cb=t,i},rt.prototype.id=null,rt.prototype.bc=null,rt.prototype.cb=null,rt.prototype.__class__=rt;var ot=zpp_nape.constraint.ZPP_DistanceJoint=function(){this.stepped=!1,this.bias=0,this.gamma=0,this.jMax=0,this.jAcc=0,this.kMass=0,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.b2=null,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.b1=null,this.cx2=0,this.cx1=0,this.ny=0,this.nx=0,this.equal=!1,this.slack=!1,this.jointMax=0,this.jointMin=0,this.outer_zn=null,Ne.call(this),this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0,this.jAcc=0,this.jMax=1/0,this.stepped=!1,this.cx1=this.cx2=0};ot.__name__=["zpp_nape","constraint","ZPP_DistanceJoint"],ot.__super__=Ne,ot.prototype=Object.create(Ne.prototype),ot.prototype.outer_zn=null,ot.prototype.jointMin=null,ot.prototype.jointMax=null,ot.prototype.slack=null,ot.prototype.equal=null,ot.prototype.is_slack=function(){var e;this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var t=0,i=0,n=(t=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx))*t+(i=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely))*i;if(n<Qs.epsilon)e=!0;else{var r=1/(n=Math.sqrt(n));t*=r,i*=r,e=!this.equal&&(!(n<this.jointMin)&&(n>this.jointMax?(n-=this.jointMax,!1):!(n=i=t=0)))}return e},ot.prototype.nx=null,ot.prototype.ny=null,ot.prototype.cx1=null,ot.prototype.cx2=null,ot.prototype.bodyImpulse=function(e){return this.stepped?e==this.b1?Z.get(-this.jAcc*this.nx,-this.jAcc*this.ny,-this.cx1*this.jAcc):Z.get(this.jAcc*this.nx,this.jAcc*this.ny,this.cx2*this.jAcc):Z.get(0,0,0)},ot.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},ot.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},ot.prototype.b1=null,ot.prototype.a1localx=null,ot.prototype.a1localy=null,ot.prototype.a1relx=null,ot.prototype.a1rely=null,ot.prototype.validate_a1=function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},ot.prototype.invalidate_a1=function(e){this.immutable_midstep("Constraint::a1"),this.a1localx=e.x,this.a1localy=e.y,this.wake()},ot.prototype.setup_a1=function(){var e,t=this.a1localx,i=this.a1localy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a1=e,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$(this,this.invalidate_a1)},ot.prototype.wrap_a1=null,ot.prototype.b2=null,ot.prototype.a2localx=null,ot.prototype.a2localy=null,ot.prototype.a2relx=null,ot.prototype.a2rely=null,ot.prototype.validate_a2=function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},ot.prototype.invalidate_a2=function(e){this.immutable_midstep("Constraint::a2"),this.a2localx=e.x,this.a2localy=e.y,this.wake()},ot.prototype.setup_a2=function(){var e,t=this.a2localx,i=this.a2localy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a2=e,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$(this,this.invalidate_a2)},ot.prototype.wrap_a2=null,ot.prototype.kMass=null,ot.prototype.jAcc=null,ot.prototype.jMax=null,ot.prototype.gamma=null,ot.prototype.bias=null,ot.prototype.stepped=null,ot.prototype.copy=function(e,t){var i=this.outer_zn;null==i.zpp_inner_zn.wrap_a1&&i.zpp_inner_zn.setup_a1();var n=i.zpp_inner_zn.wrap_a1,r=this.outer_zn;null==r.zpp_inner_zn.wrap_a2&&r.zpp_inner_zn.setup_a2();var o=new b(null,null,n,r.zpp_inner_zn.wrap_a2,this.jointMin,this.jointMax);if(this.copyto(o),null!=e&&null!=this.b1){for(var a=null,s=0;s<e.length;){var p=e[s];if(++s,p.id==this.b1.id){a=p.bc;break}}null!=a?o.zpp_inner_zn.b1=a.zpp_inner:t.push(rt.todo(this.b1.id,function(e){o.zpp_inner_zn.b1=e.zpp_inner}))}if(null!=e&&null!=this.b2){for(var l=null,h=0;h<e.length;){var u=e[h];if(++h,u.id==this.b2.id){l=u.bc;break}}null!=l?o.zpp_inner_zn.b2=l.zpp_inner:t.push(rt.todo(this.b2.id,function(e){o.zpp_inner_zn.b2=e.zpp_inner}))}return o},ot.prototype.validate=function(){if(null==this.b1||null==this.b2)throw new r("Error: DistanceJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new r("Error: DistanceJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new r("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(this.jointMin>this.jointMax)throw new r("Error: DistanceJoint must have jointMin <= jointMax");if(2!=this.b1.type&&2!=this.b2.type)throw new r("Error: Constraints cannot have both bodies non-dynamic")},ot.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},ot.prototype.forest=function(){if(2==this.b1.type){var e,t;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{for(var i=this.b1.component,n=null;i!=i.parent;){var r=i.parent;i.parent=n,n=i,i=r}for(;null!=n;){var o=n.parent;n.parent=i,n=o}e=i}if(this.component==this.component.parent)t=this.component;else{for(var a=this.component,s=null;a!=a.parent;){var p=a.parent;a.parent=s,s=a,a=p}for(;null!=s;){var l=s.parent;s.parent=a,s=l}t=a}e!=t&&(e.rank<t.rank?e.parent=t:e.rank>t.rank?t.parent=e:(t.parent=e).rank++)}if(2==this.b2.type){var h,u;if(this.b2.component==this.b2.component.parent)h=this.b2.component;else{for(var d=this.b2.component,c=null;d!=d.parent;){var _=d.parent;d.parent=c,c=d,d=_}for(;null!=c;){var y=c.parent;c.parent=d,c=y}h=d}if(this.component==this.component.parent)u=this.component;else{for(var x=this.component,m=null;x!=x.parent;){var g=x.parent;x.parent=m,m=x,x=g}for(;null!=m;){var f=m.parent;m.parent=x,m=f}u=x}h!=u&&(h.rank<u.rank?h.parent=u:h.rank>u.rank?u.parent=h:(u.parent=h).rank++)}},ot.prototype.pair_exists=function(e,t){return this.b1.id==e&&this.b2.id==t||this.b1.id==t&&this.b2.id==e},ot.prototype.clearcache=function(){this.jAcc=0,this.pre_dt=-1},ot.prototype.preStep=function(e){-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;this.pre_dt=e,this.stepped=!0,this.equal=this.jointMin==this.jointMax,this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy,this.nx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),this.ny=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely);var i=this.nx*this.nx+this.ny*this.ny;if(i<Qs.epsilon)this.nx=0,i=this.ny=0,this.slack=!0;else{var n=1/(i=Math.sqrt(i));this.nx*=n,this.ny*=n,this.equal?(i-=this.jointMax,this.slack=!1):i<this.jointMin?(i=this.jointMin-i,this.nx=-this.nx,this.ny=-this.ny,this.slack=!1):i>this.jointMax?(i-=this.jointMax,this.slack=!1):(this.nx=0,i=this.ny=0,this.slack=!0)}var r=i;if(!this.slack){if(this.cx1=this.ny*this.a1relx-this.nx*this.a1rely,this.cx2=this.ny*this.a2relx-this.nx*this.a2rely,this.kMass=this.b1.smass+this.b2.smass+this.cx1*this.cx1*this.b1.sinertia+this.cx2*this.cx2*this.b2.sinertia,0!=this.kMass?this.kMass=1/this.kMass:this.jAcc=0,this.stiff)this.bias=0,this.gamma=0;else{if(this.breakUnderError&&r*r>this.maxError*this.maxError)return!0;var o,a=2*Math.PI*this.frequency;this.gamma=1/(e*a*(2*this.damping+a*e));var s=1/(1+this.gamma);o=e*a*a*this.gamma,this.gamma*=s,this.kMass*=s,this.bias=-r*o,this.bias<-this.maxError?this.bias=-this.maxError:this.bias>this.maxError&&(this.bias=this.maxError)}this.jAcc*=t,this.jMax=this.maxForce*e}return!1},ot.prototype.warmStart=function(){if(!this.slack){var e=this.b1.imass*this.jAcc;this.b1.velx-=this.nx*e,this.b1.vely-=this.ny*e;var t=this.b2.imass*this.jAcc;this.b2.velx+=this.nx*t,this.b2.vely+=this.ny*t,this.b1.angvel-=this.cx1*this.b1.iinertia*this.jAcc,this.b2.angvel+=this.cx2*this.b2.iinertia*this.jAcc}},ot.prototype.applyImpulseVel=function(){if(this.slack)return!1;var e=this.kMass*(this.bias-(this.nx*(this.b2.velx+this.b2.kinvelx-this.b1.velx-this.b1.kinvelx)+this.ny*(this.b2.vely+this.b2.kinvely-this.b1.vely-this.b1.kinvely)+(this.b2.angvel+this.b2.kinangvel)*this.cx2-(this.b1.angvel+this.b1.kinangvel)*this.cx1))-this.jAcc*this.gamma,t=this.jAcc;if(this.jAcc+=e,!this.equal&&0<this.jAcc&&(this.jAcc=0),this.breakUnderForce&&this.jAcc<-this.jMax)return!0;this.stiff||this.jAcc<-this.jMax&&(this.jAcc=-this.jMax),e=this.jAcc-t;var i=this.b1.imass*e;this.b1.velx-=this.nx*i,this.b1.vely-=this.ny*i;var n=this.b2.imass*e;return this.b2.velx+=this.nx*n,this.b2.vely+=this.ny*n,this.b1.angvel-=this.cx1*this.b1.iinertia*e,this.b2.angvel+=this.cx2*this.b2.iinertia*e,!1},ot.prototype.applyImpulsePos=function(){var e,t,i,n;i=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,n=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var r,o,a;r=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,o=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var s=0,p=0,l=(s=this.b2.posx+r-(this.b1.posx+i))*s+(p=this.b2.posy+o-(this.b1.posy+n))*p;if(l<Qs.epsilon)a=!(l=p=s=0);else{var h=1/(l=Math.sqrt(l));s*=h,p*=h,a=this.equal?(l-=this.jointMax,!1):l<this.jointMin?(l=this.jointMin-l,s=-s,p=-p,!1):l>this.jointMax?(l-=this.jointMax,!1):!(l=p=s=0)}if(e=l,!a){if(this.breakUnderError&&e*e>this.maxError*this.maxError)return!0;if(e*e<Qs.constraintLinearSlop*Qs.constraintLinearSlop)return!1;if(6<(e*=.5)*e){var u=this.b1.smass+this.b2.smass;if(u>Qs.epsilon&&(t=-e*(u=.75/u),this.equal||t<0)){var d=t*this.b1.imass;this.b1.posx-=s*d,this.b1.posy-=p*d;var c=t*this.b2.imass;this.b2.posx+=s*c,this.b2.posy+=p*c;var _=(s=this.b2.posx+r-(this.b1.posx+i))*s+(p=this.b2.posy+o-(this.b1.posy+n))*p;if(_<Qs.epsilon)_=p=s=0;else{var y=1/(_=Math.sqrt(_));s*=y,p*=y,this.equal?_-=this.jointMax:_<this.jointMin?(_=this.jointMin-_,s=-s,p=-p):_>this.jointMax?_-=this.jointMax:_=p=s=0}e=_,e*=.5}}var x,m;x=p*i-s*n,m=p*r-s*o;var g=this.b1.smass+this.b2.smass+x*x*this.b1.sinertia+m*m*this.b2.sinertia;if(0!=g&&(g=1/g),t=-e*g,this.equal||t<0){var f=this.b1.imass*t;this.b1.posx-=s*f,this.b1.posy-=p*f;var v=this.b2.imass*t;this.b2.posx+=s*v,this.b2.posy+=p*v;var z=this.b1,w=-x*this.b1.iinertia*t;if(z.rot+=w,1e-4<w*w)z.axisx=Math.sin(z.rot),z.axisy=Math.cos(z.rot);else{var b=w*w,S=1-.5*b,C=1-b*b/8,M=(S*z.axisx+w*z.axisy)*C;z.axisy=(S*z.axisy-w*z.axisx)*C,z.axisx=M}var P=this.b2,k=m*this.b2.iinertia*t;if(P.rot+=k,1e-4<k*k)P.axisx=Math.sin(P.rot),P.axisy=Math.cos(P.rot);else{var T=k*k,A=1-.5*T,O=1-T*T/8,E=(A*P.axisx+k*P.axisy)*O;P.axisy=(A*P.axisy-k*P.axisx)*O,P.axisx=E}}}return!1},ot.prototype.draw=function(e){},ot.prototype.__class__=ot;var at=zpp_nape.constraint.ZPP_LineJoint=function(){this.biasy=0,this.biasx=0,this.jAccy=0,this.jAccx=0,this.kMassc=0,this.kMassb=0,this.kMassa=0,this.wrap_n=null,this.nrely=0,this.nrelx=0,this.nlocaly=0,this.nlocalx=0,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.cx2=0,this.cx1=0,this.dot2=0,this.dot1=0,this.equal=!1,this.jointMax=0,this.jointMin=0,this.scale=0,this.outer_zn=null,Ne.call(this),this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0,this.nlocalx=0,this.nlocaly=0,this.nrelx=0,this.nrely=0,this.jAccx=0,this.jAccy=0,this.jMax=1/0,this.jointMin=-1/0,this.jointMax=1/0,this.stepped=!1};at.__name__=["zpp_nape","constraint","ZPP_LineJoint"],at.__super__=Ne,at.prototype=Object.create(Ne.prototype),at.prototype.outer_zn=null,at.prototype.scale=null,at.prototype.jointMin=null,at.prototype.jointMax=null,at.prototype.equal=null,at.prototype.dot1=null,at.prototype.dot2=null,at.prototype.cx1=null,at.prototype.cx2=null,at.prototype.bodyImpulse=function(e){if(this.stepped){var t=this.scale*this.nrelx*this.jAccy-this.nrely*this.jAccx,i=this.nrelx*this.jAccx+this.scale*this.nrely*this.jAccy;return e==this.b1?Z.get(-t,-i,this.scale*this.cx1*i-this.dot1*t):Z.get(t,i,this.scale*this.cx1*i-this.dot1*t)}return Z.get(0,0,0)},at.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},at.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},at.prototype.b1=null,at.prototype.a1localx=null,at.prototype.a1localy=null,at.prototype.a1relx=null,at.prototype.a1rely=null,at.prototype.validate_a1=function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},at.prototype.invalidate_a1=function(e){this.immutable_midstep("Constraint::a1"),this.a1localx=e.x,this.a1localy=e.y,this.wake()},at.prototype.setup_a1=function(){var e,t=this.a1localx,i=this.a1localy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a1=e,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$(this,this.invalidate_a1)},at.prototype.wrap_a1=null,at.prototype.b2=null,at.prototype.a2localx=null,at.prototype.a2localy=null,at.prototype.a2relx=null,at.prototype.a2rely=null,at.prototype.validate_a2=function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},at.prototype.invalidate_a2=function(e){this.immutable_midstep("Constraint::a2"),this.a2localx=e.x,this.a2localy=e.y,this.wake()},at.prototype.setup_a2=function(){var e,t=this.a2localx,i=this.a2localy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a2=e,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$(this,this.invalidate_a2)},at.prototype.wrap_a2=null,at.prototype.zip_n=null,at.prototype.nlocalx=null,at.prototype.nlocaly=null,at.prototype.nrelx=null,at.prototype.nrely=null,at.prototype.validate_n=function(){this.wrap_n.zpp_inner.x=this.nlocalx,this.wrap_n.zpp_inner.y=this.nlocaly},at.prototype.invalidate_n=function(e){this.immutable_midstep("Constraint::n"),this.nlocalx=e.x,this.nlocaly=e.y,this.zip_n=!0,this.wake()},at.prototype.setup_n=function(){var e,t=this.nlocalx,i=this.nlocaly;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_n=e,this.wrap_n.zpp_inner._inuse=!0,this.wrap_n.zpp_inner._validate=$(this,this.validate_n),this.wrap_n.zpp_inner._invalidate=$(this,this.invalidate_n)},at.prototype.wrap_n=null,at.prototype.validate_norm=function(){if(this.zip_n){this.zip_n=!1;var e=1/Math.sqrt(this.nlocalx*this.nlocalx+this.nlocaly*this.nlocaly);this.nlocalx*=e,this.nlocaly*=e}},at.prototype.kMassa=null,at.prototype.kMassb=null,at.prototype.kMassc=null,at.prototype.jAccx=null,at.prototype.jAccy=null,at.prototype.jMax=null,at.prototype.gamma=null,at.prototype.biasx=null,at.prototype.biasy=null,at.prototype.stepped=null,at.prototype.copy=function(e,t){var i=this.outer_zn;null==i.zpp_inner_zn.wrap_a1&&i.zpp_inner_zn.setup_a1();var n=i.zpp_inner_zn.wrap_a1,r=this.outer_zn;null==r.zpp_inner_zn.wrap_a2&&r.zpp_inner_zn.setup_a2();var o=r.zpp_inner_zn.wrap_a2,a=this.outer_zn;null==a.zpp_inner_zn.wrap_n&&a.zpp_inner_zn.setup_n();var s=new S(null,null,n,o,a.zpp_inner_zn.wrap_n,this.jointMin,this.jointMax);if(this.copyto(s),null!=e&&null!=this.b1){for(var p=null,l=0;l<e.length;){var h=e[l];if(++l,h.id==this.b1.id){p=h.bc;break}}null!=p?s.zpp_inner_zn.b1=p.zpp_inner:t.push(rt.todo(this.b1.id,function(e){s.zpp_inner_zn.b1=e.zpp_inner}))}if(null!=e&&null!=this.b2){for(var u=null,d=0;d<e.length;){var c=e[d];if(++d,c.id==this.b2.id){u=c.bc;break}}null!=u?s.zpp_inner_zn.b2=u.zpp_inner:t.push(rt.todo(this.b2.id,function(e){s.zpp_inner_zn.b2=e.zpp_inner}))}return s},at.prototype.validate=function(){if(null==this.b1||null==this.b2)throw new r("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new r("Error: DistanceJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new r("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(this.jointMin>this.jointMax)throw new r("Error: DistanceJoint must have jointMin <= jointMax");if(this.nlocalx*this.nlocalx+this.nlocaly*this.nlocaly<Qs.epsilon)throw new r("Error: DistanceJoint direction must be non-degenerate");if(2!=this.b1.type&&2!=this.b2.type)throw new r("Error: Constraints cannot have both bodies non-dynamic")},at.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},at.prototype.forest=function(){if(2==this.b1.type){var e,t;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{for(var i=this.b1.component,n=null;i!=i.parent;){var r=i.parent;i.parent=n,n=i,i=r}for(;null!=n;){var o=n.parent;n.parent=i,n=o}e=i}if(this.component==this.component.parent)t=this.component;else{for(var a=this.component,s=null;a!=a.parent;){var p=a.parent;a.parent=s,s=a,a=p}for(;null!=s;){var l=s.parent;s.parent=a,s=l}t=a}e!=t&&(e.rank<t.rank?e.parent=t:e.rank>t.rank?t.parent=e:(t.parent=e).rank++)}if(2==this.b2.type){var h,u;if(this.b2.component==this.b2.component.parent)h=this.b2.component;else{for(var d=this.b2.component,c=null;d!=d.parent;){var _=d.parent;d.parent=c,c=d,d=_}for(;null!=c;){var y=c.parent;c.parent=d,c=y}h=d}if(this.component==this.component.parent)u=this.component;else{for(var x=this.component,m=null;x!=x.parent;){var g=x.parent;x.parent=m,m=x,x=g}for(;null!=m;){var f=m.parent;m.parent=x,m=f}u=x}h!=u&&(h.rank<u.rank?h.parent=u:h.rank>u.rank?u.parent=h:(u.parent=h).rank++)}},at.prototype.pair_exists=function(e,t){return this.b1.id==e&&this.b2.id==t||this.b1.id==t&&this.b2.id==e},at.prototype.clearcache=function(){this.jAccx=0,this.jAccy=0,this.pre_dt=-1},at.prototype.preStep=function(e){-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;this.pre_dt=e,this.equal=this.jointMin==this.jointMax,this.stepped=!0,this.validate_norm(),this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.nrelx=this.b1.axisy*this.nlocalx-this.b1.axisx*this.nlocaly,this.nrely=this.nlocalx*this.b1.axisx+this.nlocaly*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var i,n,r,o=0;i=this.b2.posx+this.a2relx-this.b1.posx-this.a1relx,r=(n=this.b2.posy+this.a2rely-this.b1.posy-this.a1rely)*this.nrelx-i*this.nrely,o=this.nrelx*i+this.nrely*n,this.equal?(o-=this.jointMin,this.scale=1):o>this.jointMax?(o-=this.jointMax,this.scale=1):o<this.jointMin?(o=this.jointMin-o,this.scale=-1):(o=0,this.scale=0);var a,s;a=i+this.a1relx,s=n+this.a1rely,this.dot1=this.nrelx*a+this.nrely*s,this.cx1=s*this.nrelx-a*this.nrely,this.dot2=this.nrelx*this.a2relx+this.nrely*this.a2rely,this.cx2=this.a2rely*this.nrelx-this.a2relx*this.nrely,this.kMassa=this.b1.smass+this.b2.smass+this.dot1*this.dot1*this.b1.sinertia+this.dot2*this.dot2*this.b2.sinertia,this.kMassb=-this.scale*(this.dot1*this.cx1*this.b1.sinertia+this.dot2*this.cx2*this.b2.sinertia),this.kMassc=this.scale*this.scale*(this.b1.smass+this.b2.smass+this.cx1*this.cx1*this.b1.sinertia+this.cx2*this.cx2*this.b2.sinertia);var p,l=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(l!=l)this.kMassa=this.kMassb=this.kMassc=0,p=3;else if(0==l){var h=0;0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,h=1),0!=this.kMassc?this.kMassc=1/this.kMassc:(this.kMassc=0,h|=2),this.kMassb=0,p=h}else{l=1/l;var u=this.kMassc*l;this.kMassc=this.kMassa*l,this.kMassa=u,this.kMassb*=-l,p=0}if(0!=(1&p)&&(this.jAccx=0),0!=(2&p)&&(this.jAccy=0),this.stiff)this.gamma=0,this.biasx=0,this.biasy=0;else{if(this.breakUnderError&&r*r+o*o>this.maxError*this.maxError)return!0;var d,c=2*Math.PI*this.frequency;this.gamma=1/(e*c*(2*this.damping+c*e));var _=1/(1+this.gamma);d=e*c*c*this.gamma,this.gamma*=_,this.kMassa*=_,this.kMassb*=_,this.kMassc*=_,this.biasx=r,this.biasy=o;var y=-d;this.biasx*=y,this.biasy*=y;var x=this.maxError,m=this.biasx*this.biasx+this.biasy*this.biasy;if(x*x<m){var g=x*(1/Math.sqrt(m));this.biasx*=g,this.biasy*=g}}return this.jAccx*=t,this.jAccy*=t,this.jMax=this.maxForce*e,!1},at.prototype.warmStart=function(){var e=this.scale*this.nrelx*this.jAccy-this.nrely*this.jAccx,t=this.nrelx*this.jAccx+this.scale*this.nrely*this.jAccy,i=this.b1.imass;this.b1.velx-=e*i,this.b1.vely-=t*i;var n=this.b2.imass;this.b2.velx+=e*n,this.b2.vely+=t*n,this.b1.angvel+=(this.scale*this.cx1*this.jAccy-this.dot1*this.jAccx)*this.b1.iinertia,this.b2.angvel+=(this.dot2*this.jAccx-this.scale*this.cx2*this.jAccy)*this.b2.iinertia},at.prototype.applyImpulseVel=function(){var e,t,i=0,n=0;i=this.b2.velx-this.b1.velx,n=this.b2.vely-this.b1.vely,i+=this.b2.kinvelx-this.b1.kinvelx,e=(n+=this.b2.kinvely-this.b1.kinvely)*this.nrelx-i*this.nrely+(this.b2.angvel+this.b2.kinangvel)*this.dot2-(this.b1.angvel+this.b1.kinangvel)*this.dot1,t=this.scale*(this.nrelx*i+this.nrely*n-(this.b2.angvel+this.b2.kinangvel)*this.cx2+(this.b1.angvel+this.b1.kinangvel)*this.cx1);var r=0,o=0;r=this.biasx-e,o=this.biasy-t;var a=this.kMassa*r+this.kMassb*o;o=this.kMassb*r+this.kMassc*o,r=a;var s=this.gamma;r-=this.jAccx*s,o-=this.jAccy*s;var p,l;if(p=this.jAccx,l=this.jAccy,this.jAccx+=r,this.jAccy+=o,0<this.jAccy&&(this.jAccy=0),this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy>this.jMax*this.jMax)return!0}else if(!this.stiff){var h=this.jMax,u=this.jAccx*this.jAccx+this.jAccy*this.jAccy;if(h*h<u){var d=h*(1/Math.sqrt(u));this.jAccx*=d,this.jAccy*=d}}r=this.jAccx-p,o=this.jAccy-l;var c=this.scale*this.nrelx*o-this.nrely*r,_=this.nrelx*r+this.scale*this.nrely*o,y=this.b1.imass;this.b1.velx-=c*y,this.b1.vely-=_*y;var x=this.b2.imass;return this.b2.velx+=c*x,this.b2.vely+=_*x,this.b1.angvel+=(this.scale*this.cx1*o-this.dot1*r)*this.b1.iinertia,this.b2.angvel+=(this.dot2*r-this.scale*this.cx2*o)*this.b2.iinertia,!1},at.prototype.applyImpulsePos=function(){var e,t;e=this.b1.axisy*this.nlocalx-this.b1.axisx*this.nlocaly,t=this.nlocalx*this.b1.axisx+this.nlocaly*this.b1.axisy;var i,n;i=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,n=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var r,o;r=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,o=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var a,s=0,p=0,l=0,h=0;if(s=this.b2.posx+r-this.b1.posx-i,l=(p=this.b2.posy+o-this.b1.posy-n)*e-s*t,h=e*s+t*p,a=this.equal?(h-=this.jointMin,1):h>this.jointMax?(h-=this.jointMax,1):h<this.jointMin?(h=this.jointMin-h,-1):h=0,this.breakUnderError&&l*l+h*h>this.maxError*this.maxError)return!0;if(l*l+h*h<Qs.constraintLinearSlop*Qs.constraintLinearSlop)return!1;var u,d,c,_,y=0,x=0;if(6<(l*=.5)*l+(h*=.5)*h){var m=this.b1.smass+this.b2.smass;if(m>Qs.epsilon){var g=(m=.8/m)*(t*l-a*e*h),f=m*(e*l*a-t*l),v=this.b1.imass;this.b1.posx-=g*v,this.b1.posy-=f*v;var z=this.b2.imass;this.b2.posx+=g*z,this.b2.posy+=f*z,s=this.b2.posx+r-this.b1.posx-i,l=(p=this.b2.posy+o-this.b1.posy-n)*e-s*t,h=e*s+t*p,a=this.equal?(h-=this.jointMin,1):h>this.jointMax?(h-=this.jointMax,1):h<this.jointMin?(h=this.jointMin-h,-1):h=0,l*=.5,h*=.5}}var w,b,S,C,M;u=e*(C=s+i)+t*(M=p+n),c=M*e-C*t,d=e*r+t*o,_=o*e-r*t,w=this.b1.smass+this.b2.smass+u*u*this.b1.sinertia+d*d*this.b2.sinertia,b=-a*(u*c*this.b1.sinertia+d*_*this.b2.sinertia),y=-l,x=-h;var P=w*(S=a*a*(this.b1.smass+this.b2.smass+c*c*this.b1.sinertia+_*_*this.b2.sinertia))-b*b;if(P!=P)y=x=0;else if(0==P)0!=w?y/=w:y=0,0!=S?x/=S:x=0;else{var k=(P=1/P)*(S*y-b*x);x=P*(w*x-b*y),y=k}0<x&&(x=0);var T=a*e*x-t*y,A=e*y+a*t*x,O=this.b1.imass;this.b1.posx-=T*O,this.b1.posy-=A*O;var E=this.b2.imass;this.b2.posx+=T*E,this.b2.posy+=A*E;var G=this.b1,D=(a*c*x-u*y)*this.b1.iinertia;if(G.rot+=D,1e-4<D*D)G.axisx=Math.sin(G.rot),G.axisy=Math.cos(G.rot);else{var I=D*D,L=1-.5*I,B=1-I*I/8,R=(L*G.axisx+D*G.axisy)*B;G.axisy=(L*G.axisy-D*G.axisx)*B,G.axisx=R}var F=this.b2,j=(d*y-a*_*x)*this.b2.iinertia;if(F.rot+=j,1e-4<j*j)F.axisx=Math.sin(F.rot),F.axisy=Math.cos(F.rot);else{var N=j*j,U=1-.5*N,V=1-N*N/8,H=(U*F.axisx+j*F.axisy)*V;F.axisy=(U*F.axisy-j*F.axisx)*V,F.axisx=H}return!1},at.prototype.draw=function(e){},at.prototype.__class__=at;var st=zpp_nape.constraint.ZPP_MotorJoint=function(){this.stepped=!1,this.jMax=0,this.jAcc=0,this.kMass=0,this.b2=null,this.b1=null,this.rate=0,this.ratio=0,this.outer_zn=null,Ne.call(this),this.jAcc=0,this.stepped=!1,this.__velocity=!0};st.__name__=["zpp_nape","constraint","ZPP_MotorJoint"],st.__super__=Ne,st.prototype=Object.create(Ne.prototype),st.prototype.outer_zn=null,st.prototype.ratio=null,st.prototype.rate=null,st.prototype.bodyImpulse=function(e){return this.stepped?e==this.b1?Z.get(0,0,-this.jAcc):Z.get(0,0,this.ratio*this.jAcc):Z.get(0,0,0)},st.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},st.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},st.prototype.b1=null,st.prototype.b2=null,st.prototype.kMass=null,st.prototype.jAcc=null,st.prototype.jMax=null,st.prototype.stepped=null,st.prototype.copy=function(e,t){var i=new M(null,null,this.rate,this.ratio);if(this.copyto(i),null!=e&&null!=this.b1){for(var n=null,r=0;r<e.length;){var o=e[r];if(++r,o.id==this.b1.id){n=o.bc;break}}null!=n?i.zpp_inner_zn.b1=n.zpp_inner:t.push(rt.todo(this.b1.id,function(e){i.zpp_inner_zn.b1=e.zpp_inner}))}if(null!=e&&null!=this.b2){for(var a=null,s=0;s<e.length;){var p=e[s];if(++s,p.id==this.b2.id){a=p.bc;break}}null!=a?i.zpp_inner_zn.b2=a.zpp_inner:t.push(rt.todo(this.b2.id,function(e){i.zpp_inner_zn.b2=e.zpp_inner}))}return i},st.prototype.validate=function(){if(null==this.b1||null==this.b2)throw new r("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new r("Error: MotorJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new r("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(2!=this.b1.type&&2!=this.b2.type)throw new r("Error: Constraints cannot have both bodies non-dynamic")},st.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},st.prototype.forest=function(){if(2==this.b1.type){var e,t;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{for(var i=this.b1.component,n=null;i!=i.parent;){var r=i.parent;i.parent=n,n=i,i=r}for(;null!=n;){var o=n.parent;n.parent=i,n=o}e=i}if(this.component==this.component.parent)t=this.component;else{for(var a=this.component,s=null;a!=a.parent;){var p=a.parent;a.parent=s,s=a,a=p}for(;null!=s;){var l=s.parent;s.parent=a,s=l}t=a}e!=t&&(e.rank<t.rank?e.parent=t:e.rank>t.rank?t.parent=e:(t.parent=e).rank++)}if(2==this.b2.type){var h,u;if(this.b2.component==this.b2.component.parent)h=this.b2.component;else{for(var d=this.b2.component,c=null;d!=d.parent;){var _=d.parent;d.parent=c,c=d,d=_}for(;null!=c;){var y=c.parent;c.parent=d,c=y}h=d}if(this.component==this.component.parent)u=this.component;else{for(var x=this.component,m=null;x!=x.parent;){var g=x.parent;x.parent=m,m=x,x=g}for(;null!=m;){var f=m.parent;m.parent=x,m=f}u=x}h!=u&&(h.rank<u.rank?h.parent=u:h.rank>u.rank?u.parent=h:(u.parent=h).rank++)}},st.prototype.pair_exists=function(e,t){return this.b1.id==e&&this.b2.id==t||this.b1.id==t&&this.b2.id==e},st.prototype.clearcache=function(){this.jAcc=0,this.pre_dt=-1},st.prototype.preStep=function(e){-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;return this.pre_dt=e,this.stepped=!0,this.kMass=this.b1.sinertia+this.ratio*this.ratio*this.b2.sinertia,this.kMass=1/this.kMass,this.jAcc*=t,this.jMax=this.maxForce*e,!1},st.prototype.warmStart=function(){this.b1.angvel-=this.b1.iinertia*this.jAcc,this.b2.angvel+=this.ratio*this.b2.iinertia*this.jAcc},st.prototype.applyImpulseVel=function(){var e=-this.kMass*(this.ratio*(this.b2.angvel+this.b2.kinangvel)-this.b1.angvel-this.b1.kinangvel-this.rate),t=this.jAcc;if(this.jAcc+=e,this.breakUnderForce){if(this.jAcc>this.jMax||this.jAcc<-this.jMax)return!0}else this.jAcc<-this.jMax?this.jAcc=-this.jMax:this.jAcc>this.jMax&&(this.jAcc=this.jMax);return e=this.jAcc-t,this.b1.angvel-=this.b1.iinertia*e,this.b2.angvel+=this.ratio*this.b2.iinertia*e,!1},st.prototype.applyImpulsePos=function(){return!1},st.prototype.__class__=st;var ut=zpp_nape.constraint.ZPP_PivotJoint=function(){this.stepped=!1,this.biasy=0,this.biasx=0,this.gamma=0,this.jMax=0,this.jAccy=0,this.jAccx=0,this.kMassc=0,this.kMassb=0,this.kMassa=0,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.b2=null,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.b1=null,this.outer_zn=null,Ne.call(this),this.stepped=!1,this.jAccx=0,this.jAccy=0,this.jMax=1/0,this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0};ut.__name__=["zpp_nape","constraint","ZPP_PivotJoint"],ut.__super__=Ne,ut.prototype=Object.create(Ne.prototype),ut.prototype.outer_zn=null,ut.prototype.bodyImpulse=function(e){return this.stepped?e==this.b1?Z.get(-this.jAccx,-this.jAccy,-(this.jAccy*this.a1relx-this.jAccx*this.a1rely)):Z.get(this.jAccx,this.jAccy,this.jAccy*this.a2relx-this.jAccx*this.a2rely):Z.get(0,0,0)},ut.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},ut.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},ut.prototype.b1=null,ut.prototype.a1localx=null,ut.prototype.a1localy=null,ut.prototype.a1relx=null,ut.prototype.a1rely=null,ut.prototype.validate_a1=function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},ut.prototype.invalidate_a1=function(e){this.immutable_midstep("Constraint::a1"),this.a1localx=e.x,this.a1localy=e.y,this.wake()},ut.prototype.setup_a1=function(){var e,t=this.a1localx,i=this.a1localy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a1=e,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$(this,this.invalidate_a1)},ut.prototype.wrap_a1=null,ut.prototype.b2=null,ut.prototype.a2localx=null,ut.prototype.a2localy=null,ut.prototype.a2relx=null,ut.prototype.a2rely=null,ut.prototype.validate_a2=function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},ut.prototype.invalidate_a2=function(e){this.immutable_midstep("Constraint::a2"),this.a2localx=e.x,this.a2localy=e.y,this.wake()},ut.prototype.setup_a2=function(){var e,t=this.a2localx,i=this.a2localy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a2=e,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$(this,this.invalidate_a2)},ut.prototype.wrap_a2=null,ut.prototype.kMassa=null,ut.prototype.kMassb=null,ut.prototype.kMassc=null,ut.prototype.jAccx=null,ut.prototype.jAccy=null,ut.prototype.jMax=null,ut.prototype.gamma=null,ut.prototype.biasx=null,ut.prototype.biasy=null,ut.prototype.stepped=null,ut.prototype.copy=function(e,t){var i=this.outer_zn;null==i.zpp_inner_zn.wrap_a1&&i.zpp_inner_zn.setup_a1();var n=i.zpp_inner_zn.wrap_a1,r=this.outer_zn;null==r.zpp_inner_zn.wrap_a2&&r.zpp_inner_zn.setup_a2();var o=new P(null,null,n,r.zpp_inner_zn.wrap_a2);if(this.copyto(o),null!=e&&null!=this.b1){for(var a=null,s=0;s<e.length;){var p=e[s];if(++s,p.id==this.b1.id){a=p.bc;break}}null!=a?o.zpp_inner_zn.b1=a.zpp_inner:t.push(rt.todo(this.b1.id,function(e){o.zpp_inner_zn.b1=e.zpp_inner}))}if(null!=e&&null!=this.b2){for(var l=null,h=0;h<e.length;){var u=e[h];if(++h,u.id==this.b2.id){l=u.bc;break}}null!=l?o.zpp_inner_zn.b2=l.zpp_inner:t.push(rt.todo(this.b2.id,function(e){o.zpp_inner_zn.b2=e.zpp_inner}))}return o},ut.prototype.validate=function(){if(null==this.b1||null==this.b2)throw new r("Error: PivotJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new r("Error: PivotJoint cannot be simulated with body1 == body2 (body1=body2="+this.b1.outer.toString()+")");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new r("Error: Constraints must have each body within the same space to which the constraint has been assigned (body1="+this.b1.outer.toString()+", body2="+this.b2.outer.toString()+")");if(2!=this.b1.type&&2!=this.b2.type)throw new r("Error: Constraints cannot have both bodies non-dynamic (body1="+this.b1.outer.toString()+", body2="+this.b2.outer.toString()+")")},ut.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},ut.prototype.forest=function(){if(2==this.b1.type){var e,t;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{for(var i=this.b1.component,n=null;i!=i.parent;){var r=i.parent;i.parent=n,n=i,i=r}for(;null!=n;){var o=n.parent;n.parent=i,n=o}e=i}if(this.component==this.component.parent)t=this.component;else{for(var a=this.component,s=null;a!=a.parent;){var p=a.parent;a.parent=s,s=a,a=p}for(;null!=s;){var l=s.parent;s.parent=a,s=l}t=a}e!=t&&(e.rank<t.rank?e.parent=t:e.rank>t.rank?t.parent=e:(t.parent=e).rank++)}if(2==this.b2.type){var h,u;if(this.b2.component==this.b2.component.parent)h=this.b2.component;else{for(var d=this.b2.component,c=null;d!=d.parent;){var _=d.parent;d.parent=c,c=d,d=_}for(;null!=c;){var y=c.parent;c.parent=d,c=y}h=d}if(this.component==this.component.parent)u=this.component;else{for(var x=this.component,m=null;x!=x.parent;){var g=x.parent;x.parent=m,m=x,x=g}for(;null!=m;){var f=m.parent;m.parent=x,m=f}u=x}h!=u&&(h.rank<u.rank?h.parent=u:h.rank>u.rank?u.parent=h:(u.parent=h).rank++)}},ut.prototype.pair_exists=function(e,t){return this.b1.id==e&&this.b2.id==t||this.b1.id==t&&this.b2.id==e},ut.prototype.clearcache=function(){this.jAccx=0,this.jAccy=0,this.pre_dt=-1},ut.prototype.preStep=function(e){-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;this.pre_dt=e,this.stepped=!0,this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var i=this.b1.smass+this.b2.smass;if(this.kMassa=i,this.kMassb=0,this.kMassc=i,0!=this.b1.sinertia){var n=this.a1relx*this.b1.sinertia,r=this.a1rely*this.b1.sinertia;this.kMassa+=r*this.a1rely,this.kMassb+=-r*this.a1relx,this.kMassc+=n*this.a1relx}if(0!=this.b2.sinertia){var o=this.a2relx*this.b2.sinertia,a=this.a2rely*this.b2.sinertia;this.kMassa+=a*this.a2rely,this.kMassb+=-a*this.a2relx,this.kMassc+=o*this.a2relx}var s,p=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(p!=p)this.kMassa=this.kMassb=this.kMassc=0,s=3;else if(0==p){var l=0;0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,l=1),0!=this.kMassc?this.kMassc=1/this.kMassc:(this.kMassc=0,l|=2),this.kMassb=0,s=l}else{p=1/p;var h=this.kMassc*p;this.kMassc=this.kMassa*p,this.kMassa=h,this.kMassb*=-p,s=0}if(0!=(1&s)&&(this.jAccx=0),0!=(2&s)&&(this.jAccy=0),this.stiff)this.biasx=0,this.biasy=0,this.gamma=0;else{var u,d=2*Math.PI*this.frequency;this.gamma=1/(e*d*(2*this.damping+d*e));var c=1/(1+this.gamma);if(u=e*d*d*this.gamma,this.gamma*=c,this.kMassa*=c,this.kMassb*=c,this.kMassc*=c,this.biasx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),this.biasy=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely),this.breakUnderError&&this.biasx*this.biasx+this.biasy*this.biasy>this.maxError*this.maxError)return!0;var _=-u;this.biasx*=_,this.biasy*=_;var y=this.maxError,x=this.biasx*this.biasx+this.biasy*this.biasy;if(y*y<x){var m=y*(1/Math.sqrt(x));this.biasx*=m,this.biasy*=m}}return this.jAccx*=t,this.jAccy*=t,this.jMax=this.maxForce*e,!1},ut.prototype.warmStart=function(){var e=this.b1.imass;this.b1.velx-=this.jAccx*e,this.b1.vely-=this.jAccy*e;var t=this.b2.imass;this.b2.velx+=this.jAccx*t,this.b2.vely+=this.jAccy*t,this.b1.angvel-=(this.jAccy*this.a1relx-this.jAccx*this.a1rely)*this.b1.iinertia,this.b2.angvel+=(this.jAccy*this.a2relx-this.jAccx*this.a2rely)*this.b2.iinertia},ut.prototype.applyImpulseVel=function(){var e,t;e=this.b2.velx+this.b2.kinvelx-this.a2rely*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.a1rely*(this.b1.angvel+this.b1.kinangvel)),t=this.b2.vely+this.b2.kinvely+this.a2relx*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.a1relx*(this.b1.angvel+this.b1.kinangvel));var i=0,n=0;i=this.biasx-e,n=this.biasy-t;var r=this.kMassa*i+this.kMassb*n;n=this.kMassb*i+this.kMassc*n,i=r;var o=this.gamma;i-=this.jAccx*o,n-=this.jAccy*o;var a,s;if(a=this.jAccx,s=this.jAccy,this.jAccx+=i,this.jAccy+=n,this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy>this.jMax*this.jMax)return!0}else if(!this.stiff){var p=this.jMax,l=this.jAccx*this.jAccx+this.jAccy*this.jAccy;if(p*p<l){var h=p*(1/Math.sqrt(l));this.jAccx*=h,this.jAccy*=h}}i=this.jAccx-a,n=this.jAccy-s;var u=this.b1.imass;this.b1.velx-=i*u,this.b1.vely-=n*u;var d=this.b2.imass;return this.b2.velx+=i*d,this.b2.vely+=n*d,this.b1.angvel-=(n*this.a1relx-i*this.a1rely)*this.b1.iinertia,this.b2.angvel+=(n*this.a2relx-i*this.a2rely)*this.b2.iinertia,!1},ut.prototype.applyImpulsePos=function(){var e,t;e=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,t=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var i,n;i=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,n=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var r=0,o=0;if(r=this.b2.posx+i-(this.b1.posx+e),o=this.b2.posy+n-(this.b1.posy+t),this.breakUnderError&&r*r+o*o>this.maxError*this.maxError)return!0;if(r*r+o*o<Qs.constraintLinearSlop*Qs.constraintLinearSlop)return!1;var a=0,s=0;if(6<(r*=.5)*r+(o*=.5)*o){var p=this.b1.smass+this.b2.smass;if(p>Qs.epsilon){var l=(a=-r*(p=.75/p))*a+(s=-o*p)*s;if(400<l){var h=1/Math.sqrt(l)*20;a*=h,s*=h}var u=this.b1.imass;this.b1.posx-=a*u,this.b1.posy-=s*u;var d=this.b2.imass;this.b2.posx+=a*d,this.b2.posy+=s*d,r=this.b2.posx+i-(this.b1.posx+e),o=this.b2.posy+n-(this.b1.posy+t),r*=.5,o*=.5}}var c=0,_=0,y=0,x=this.b1.smass+this.b2.smass;if(y=c=x,(_=0)!=this.b1.sinertia){var m=e*this.b1.sinertia,g=t*this.b1.sinertia;c=x+g*t,_+=-g*e,y=x+m*e}if(0!=this.b2.sinertia){var f=i*this.b2.sinertia,v=n*this.b2.sinertia;c+=v*n,_+=-v*i,y+=f*i}var z=(a=-r)*a+(s=-o)*s;if(36<z){var w=1/Math.sqrt(z)*6;a*=w,s*=w}var b=c*y-_*_;if(b!=b)a=s=0;else if(0==b)0!=c?a/=c:a=0,0!=y?s/=y:s=0;else{var S=(b=1/b)*(y*a-_*s);s=b*(c*s-_*a),a=S}var C=this.b1.imass;this.b1.posx-=a*C,this.b1.posy-=s*C;var M=this.b2.imass;this.b2.posx+=a*M,this.b2.posy+=s*M;var P=this.b1,k=-(s*e-a*t)*this.b1.iinertia;if(P.rot+=k,1e-4<k*k)P.axisx=Math.sin(P.rot),P.axisy=Math.cos(P.rot);else{var T=k*k,A=1-.5*T,O=1-T*T/8,E=(A*P.axisx+k*P.axisy)*O;P.axisy=(A*P.axisy-k*P.axisx)*O,P.axisx=E}var G=this.b2,D=(s*i-a*n)*this.b2.iinertia;if(G.rot+=D,1e-4<D*D)G.axisx=Math.sin(G.rot),G.axisy=Math.cos(G.rot);else{var I=D*D,L=1-.5*I,B=1-I*I/8,R=(L*G.axisx+D*G.axisy)*B;G.axisy=(L*G.axisy-D*G.axisx)*B,G.axisx=R}return!1},ut.prototype.draw=function(e){},ut.prototype.__class__=ut;var dt=zpp_nape.constraint.ZPP_PulleyJoint=function(){this.stepped=!1,this.bias=0,this.gamma=0,this.jMax=0,this.jAcc=0,this.kMass=0,this.wrap_a4=null,this.a4rely=0,this.a4relx=0,this.a4localy=0,this.a4localx=0,this.b4=null,this.wrap_a3=null,this.a3rely=0,this.a3relx=0,this.a3localy=0,this.a3localx=0,this.b3=null,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.b2=null,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.b1=null,this.cx4=0,this.cx3=0,this.cx2=0,this.cx1=0,this.n34y=0,this.n34x=0,this.n12y=0,this.n12x=0,this.equal=!1,this.slack=!1,this.jointMax=0,this.jointMin=0,this.ratio=1,this.outer_zn=null,Ne.call(this),this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0,this.a3localx=0,this.a3localy=0,this.a3relx=0,this.a3rely=0,this.a4localx=0,this.a4localy=0,this.a4relx=0,this.a4rely=0,this.n12x=1,this.n12y=0,this.n34x=1,this.n34y=0,this.jAcc=0,this.jMax=1/0,this.stepped=!1,this.cx1=this.cx2=this.cx3=this.cx4=0};dt.__name__=["zpp_nape","constraint","ZPP_PulleyJoint"],dt.__super__=Ne,dt.prototype=Object.create(Ne.prototype),dt.prototype.outer_zn=null,dt.prototype.ratio=null,dt.prototype.jointMin=null,dt.prototype.jointMax=null,dt.prototype.slack=null,dt.prototype.equal=null,dt.prototype.is_slack=function(){this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy,this.a3relx=this.b3.axisy*this.a3localx-this.b3.axisx*this.a3localy,this.a3rely=this.a3localx*this.b3.axisx+this.a3localy*this.b3.axisy,this.a4relx=this.b4.axisy*this.a4localx-this.b4.axisx*this.a4localy,this.a4rely=this.a4localx*this.b4.axisx+this.a4localy*this.b4.axisy;var e,t,i,n;e=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),t=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely),i=this.b4.posx+this.a4relx-(this.b3.posx+this.a3relx),n=this.b4.posy+this.a4rely-(this.b3.posy+this.a3rely);var r=Math.sqrt(e*e+t*t),o=Math.sqrt(i*i+n*n);0==o&&Math.sqrt(0);var a=r+this.ratio*o;return!this.equal&&(!(a<this.jointMin)&&(a>this.jointMax?(a-=this.jointMax,!1):!(a=0)))},dt.prototype.n12x=null,dt.prototype.n12y=null,dt.prototype.n34x=null,dt.prototype.n34y=null,dt.prototype.cx1=null,dt.prototype.cx2=null,dt.prototype.cx3=null,dt.prototype.cx4=null,dt.prototype.bodyImpulse=function(e){if(this.stepped){var t=Z.get();if(e==this.b1){var i=t.zpp_inner;null!=i._validate&&i._validate(),t.zpp_inner.x=t.zpp_inner.x-this.jAcc*this.n12x;var n=t.zpp_inner;null!=n._validate&&n._validate();var r=t.zpp_inner;null!=r._validate&&r._validate(),t.zpp_inner.y=t.zpp_inner.y-this.jAcc*this.n12y;var o=t.zpp_inner;null!=o._validate&&o._validate();var a=t.zpp_inner;null!=a._validate&&a._validate(),t.zpp_inner.z=t.zpp_inner.z-this.cx1*this.jAcc;var s=t.zpp_inner;null!=s._validate&&s._validate()}if(e==this.b2){var p=t.zpp_inner;null!=p._validate&&p._validate(),t.zpp_inner.x=t.zpp_inner.x+this.jAcc*this.n12x;var l=t.zpp_inner;null!=l._validate&&l._validate();var h=t.zpp_inner;null!=h._validate&&h._validate(),t.zpp_inner.y=t.zpp_inner.y+this.jAcc*this.n12y;var u=t.zpp_inner;null!=u._validate&&u._validate();var d=t.zpp_inner;null!=d._validate&&d._validate(),t.zpp_inner.z=t.zpp_inner.z+this.cx2*this.jAcc;var c=t.zpp_inner;null!=c._validate&&c._validate()}if(e==this.b3){var _=t.zpp_inner;null!=_._validate&&_._validate(),t.zpp_inner.x=t.zpp_inner.x-this.jAcc*this.n34x;var y=t.zpp_inner;null!=y._validate&&y._validate();var x=t.zpp_inner;null!=x._validate&&x._validate(),t.zpp_inner.y=t.zpp_inner.y-this.jAcc*this.n34y;var m=t.zpp_inner;null!=m._validate&&m._validate();var g=t.zpp_inner;null!=g._validate&&g._validate(),t.zpp_inner.z=t.zpp_inner.z-this.cx3*this.jAcc;var f=t.zpp_inner;null!=f._validate&&f._validate()}if(e==this.b4){var v=t.zpp_inner;null!=v._validate&&v._validate(),t.zpp_inner.x=t.zpp_inner.x+this.jAcc*this.n34x;var z=t.zpp_inner;null!=z._validate&&z._validate();var w=t.zpp_inner;null!=w._validate&&w._validate(),t.zpp_inner.y=t.zpp_inner.y+this.jAcc*this.n34y;var b=t.zpp_inner;null!=b._validate&&b._validate();var S=t.zpp_inner;null!=S._validate&&S._validate(),t.zpp_inner.z=t.zpp_inner.z+this.cx4*this.jAcc;var C=t.zpp_inner;null!=C._validate&&C._validate()}return t}return Z.get(0,0,0)},dt.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this),this.b3!=this.b1&&this.b3!=this.b2&&null!=this.b3&&this.b3.constraints.add(this),this.b4!=this.b1&&this.b4!=this.b2&&this.b4!=this.b3&&null!=this.b4&&this.b4.constraints.add(this)},dt.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this),this.b3!=this.b1&&this.b3!=this.b2&&null!=this.b3&&this.b3.constraints.remove(this),this.b4!=this.b1&&this.b4!=this.b2&&this.b4!=this.b3&&null!=this.b4&&this.b4.constraints.remove(this)},dt.prototype.b1=null,dt.prototype.a1localx=null,dt.prototype.a1localy=null,dt.prototype.a1relx=null,dt.prototype.a1rely=null,dt.prototype.validate_a1=function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},dt.prototype.invalidate_a1=function(e){this.immutable_midstep("Constraint::a1"),this.a1localx=e.x,this.a1localy=e.y,this.wake()},dt.prototype.setup_a1=function(){var e,t=this.a1localx,i=this.a1localy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a1=e,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$(this,this.invalidate_a1)},dt.prototype.wrap_a1=null,dt.prototype.b2=null,dt.prototype.a2localx=null,dt.prototype.a2localy=null,dt.prototype.a2relx=null,dt.prototype.a2rely=null,dt.prototype.validate_a2=function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},dt.prototype.invalidate_a2=function(e){this.immutable_midstep("Constraint::a2"),this.a2localx=e.x,this.a2localy=e.y,this.wake()},dt.prototype.setup_a2=function(){var e,t=this.a2localx,i=this.a2localy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a2=e,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$(this,this.invalidate_a2)},dt.prototype.wrap_a2=null,dt.prototype.b3=null,dt.prototype.a3localx=null,dt.prototype.a3localy=null,dt.prototype.a3relx=null,dt.prototype.a3rely=null,dt.prototype.validate_a3=function(){this.wrap_a3.zpp_inner.x=this.a3localx,this.wrap_a3.zpp_inner.y=this.a3localy},dt.prototype.invalidate_a3=function(e){this.immutable_midstep("Constraint::a3"),this.a3localx=e.x,this.a3localy=e.y,this.wake()},dt.prototype.setup_a3=function(){var e,t=this.a3localx,i=this.a3localy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a3=e,this.wrap_a3.zpp_inner._inuse=!0,this.wrap_a3.zpp_inner._validate=$(this,this.validate_a3),this.wrap_a3.zpp_inner._invalidate=$(this,this.invalidate_a3)},dt.prototype.wrap_a3=null,dt.prototype.b4=null,dt.prototype.a4localx=null,dt.prototype.a4localy=null,dt.prototype.a4relx=null,dt.prototype.a4rely=null,dt.prototype.validate_a4=function(){this.wrap_a4.zpp_inner.x=this.a4localx,this.wrap_a4.zpp_inner.y=this.a4localy},dt.prototype.invalidate_a4=function(e){this.immutable_midstep("Constraint::a4"),this.a4localx=e.x,this.a4localy=e.y,this.wake()},dt.prototype.setup_a4=function(){var e,t=this.a4localx,i=this.a4localy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a4=e,this.wrap_a4.zpp_inner._inuse=!0,this.wrap_a4.zpp_inner._validate=$(this,this.validate_a4),this.wrap_a4.zpp_inner._invalidate=$(this,this.invalidate_a4)},dt.prototype.wrap_a4=null,dt.prototype.kMass=null,dt.prototype.jAcc=null,dt.prototype.jMax=null,dt.prototype.gamma=null,dt.prototype.bias=null,dt.prototype.stepped=null,dt.prototype.copy=function(e,t){var i=this.outer_zn;null==i.zpp_inner_zn.wrap_a1&&i.zpp_inner_zn.setup_a1();var n=i.zpp_inner_zn.wrap_a1,r=this.outer_zn;null==r.zpp_inner_zn.wrap_a2&&r.zpp_inner_zn.setup_a2();var o=r.zpp_inner_zn.wrap_a2,a=this.outer_zn;null==a.zpp_inner_zn.wrap_a3&&a.zpp_inner_zn.setup_a3();var s=a.zpp_inner_zn.wrap_a3,p=this.outer_zn;null==p.zpp_inner_zn.wrap_a4&&p.zpp_inner_zn.setup_a4();var l=new k(null,null,null,null,n,o,s,p.zpp_inner_zn.wrap_a4,this.jointMin,this.jointMax,this.ratio);if(this.copyto(l),null!=e&&null!=this.b1){for(var h=null,u=0;u<e.length;){var d=e[u];if(++u,d.id==this.b1.id){h=d.bc;break}}null!=h?l.zpp_inner_zn.b1=h.zpp_inner:t.push(rt.todo(this.b1.id,function(e){l.zpp_inner_zn.b1=e.zpp_inner}))}if(null!=e&&null!=this.b2){for(var c=null,_=0;_<e.length;){var y=e[_];if(++_,y.id==this.b2.id){c=y.bc;break}}null!=c?l.zpp_inner_zn.b2=c.zpp_inner:t.push(rt.todo(this.b2.id,function(e){l.zpp_inner_zn.b2=e.zpp_inner}))}if(null!=e&&null!=this.b3){for(var x=null,m=0;m<e.length;){var g=e[m];if(++m,g.id==this.b3.id){x=g.bc;break}}null!=x?l.zpp_inner_zn.b3=x.zpp_inner:t.push(rt.todo(this.b3.id,function(e){l.zpp_inner_zn.b3=e.zpp_inner}))}if(null!=e&&null!=this.b4){for(var f=null,v=0;v<e.length;){var z=e[v];if(++v,z.id==this.b4.id){f=z.bc;break}}null!=f?l.zpp_inner_zn.b4=f.zpp_inner:t.push(rt.todo(this.b4.id,function(e){l.zpp_inner_zn.b4=e.zpp_inner}))}return l},dt.prototype.validate=function(){if(null==this.b1||null==this.b2||null==this.b3||null==this.b4)throw new r("Error: PulleyJoint cannot be simulated with null bodies");if(this.b1==this.b2||this.b3==this.b4)throw new r("Error: PulleyJoint cannot have body1==body2 or body3==body4");if(this.b1.space!=this.space||this.b2.space!=this.space||this.b3.space!=this.space||this.b4.space!=this.space)throw new r("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(this.jointMin>this.jointMax)throw new r("Error: PulleyJoint must have jointMin <= jointMax");if(2!=this.b1.type&&2!=this.b2.type)throw new r("Error: PulleyJoint cannot have both bodies in a linked pair non-dynamic");if(2!=this.b3.type&&2!=this.b4.type)throw new r("Error: PulleyJoint cannot have both bodies in a linked pair non-dynamic")},dt.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake(),null!=this.b3&&2==this.b3.type&&this.b3.wake(),null!=this.b4&&2==this.b4.type&&this.b4.wake()},dt.prototype.forest=function(){if(2==this.b1.type){var e,t;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{for(var i=this.b1.component,n=null;i!=i.parent;){var r=i.parent;i.parent=n,n=i,i=r}for(;null!=n;){var o=n.parent;n.parent=i,n=o}e=i}if(this.component==this.component.parent)t=this.component;else{for(var a=this.component,s=null;a!=a.parent;){var p=a.parent;a.parent=s,s=a,a=p}for(;null!=s;){var l=s.parent;s.parent=a,s=l}t=a}e!=t&&(e.rank<t.rank?e.parent=t:e.rank>t.rank?t.parent=e:(t.parent=e).rank++)}if(2==this.b2.type){var h,u;if(this.b2.component==this.b2.component.parent)h=this.b2.component;else{for(var d=this.b2.component,c=null;d!=d.parent;){var _=d.parent;d.parent=c,c=d,d=_}for(;null!=c;){var y=c.parent;c.parent=d,c=y}h=d}if(this.component==this.component.parent)u=this.component;else{for(var x=this.component,m=null;x!=x.parent;){var g=x.parent;x.parent=m,m=x,x=g}for(;null!=m;){var f=m.parent;m.parent=x,m=f}u=x}h!=u&&(h.rank<u.rank?h.parent=u:h.rank>u.rank?u.parent=h:(u.parent=h).rank++)}if(2==this.b3.type){var v,z;if(this.b3.component==this.b3.component.parent)v=this.b3.component;else{for(var w=this.b3.component,b=null;w!=w.parent;){var S=w.parent;w.parent=b,b=w,w=S}for(;null!=b;){var C=b.parent;b.parent=w,b=C}v=w}if(this.component==this.component.parent)z=this.component;else{for(var M=this.component,P=null;M!=M.parent;){var k=M.parent;M.parent=P,P=M,M=k}for(;null!=P;){var T=P.parent;P.parent=M,P=T}z=M}v!=z&&(v.rank<z.rank?v.parent=z:v.rank>z.rank?z.parent=v:(z.parent=v).rank++)}if(2==this.b4.type){var A,O;if(this.b4.component==this.b4.component.parent)A=this.b4.component;else{for(var E=this.b4.component,G=null;E!=E.parent;){var D=E.parent;E.parent=G,G=E,E=D}for(;null!=G;){var I=G.parent;G.parent=E,G=I}A=E}if(this.component==this.component.parent)O=this.component;else{for(var L=this.component,B=null;L!=L.parent;){var R=L.parent;L.parent=B,B=L,L=R}for(;null!=B;){var F=B.parent;B.parent=L,B=F}O=L}A!=O&&(A.rank<O.rank?A.parent=O:A.rank>O.rank?O.parent=A:(O.parent=A).rank++)}},dt.prototype.pair_exists=function(e,t){return this.b1.id==e&&(this.b2.id==t||this.b3.id==t||this.b4.id==t)||this.b2.id==e&&(this.b3.id==t||this.b4.id==t||this.b1.id==t)||this.b3.id==e&&(this.b4.id==t||this.b1.id==t||this.b2.id==t)||this.b4.id==e&&(this.b1.id==t||this.b2.id==t||this.b3.id==t)},dt.prototype.clearcache=function(){this.jAcc=0,this.pre_dt=-1},dt.prototype.preStep=function(e){-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;this.pre_dt=e,this.stepped=!0,this.equal=this.jointMin==this.jointMax,this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy,this.a3relx=this.b3.axisy*this.a3localx-this.b3.axisx*this.a3localy,this.a3rely=this.a3localx*this.b3.axisx+this.a3localy*this.b3.axisy,this.a4relx=this.b4.axisy*this.a4localx-this.b4.axisx*this.a4localy,this.a4rely=this.a4localx*this.b4.axisx+this.a4localy*this.b4.axisy;var i,n,r,o;i=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),n=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely),r=this.b4.posx+this.a4relx-(this.b3.posx+this.a3relx),o=this.b4.posy+this.a4rely-(this.b3.posy+this.a3rely);var a=Math.sqrt(i*i+n*n),s=Math.sqrt(r*r+o*o);if(0!=a){var p=1/a;this.n12x=i*p,this.n12y=n*p}if(0!=s){var l=1/s;this.n34x=r*l,this.n34y=o*l;var h=this.ratio;this.n34x*=h,this.n34y*=h}else{var u=this.ratio/Math.sqrt(this.n34x*this.n34x+this.n34y*this.n34y);this.n34x*=u,this.n34y*=u}var d=a+this.ratio*s;this.equal?(d-=this.jointMax,this.slack=!1):d<this.jointMin?(d=this.jointMin-d,this.n12x=-this.n12x,this.n12y=-this.n12y,this.n34x=-this.n34x,this.n34y=-this.n34y,this.slack=!1):d>this.jointMax?(d-=this.jointMax,this.slack=!1):(this.n12x=0,this.n12y=0,this.n34x=0,d=this.n34y=0,this.slack=!0);var c=d;if(!this.slack){this.cx1=this.n12y*this.a1relx-this.n12x*this.a1rely,this.cx2=this.n12y*this.a2relx-this.n12x*this.a2rely,this.cx3=this.n34y*this.a3relx-this.n34x*this.a3rely,this.cx4=this.n34y*this.a4relx-this.n34x*this.a4rely;var _=this.b1.smass+this.b2.smass+this.ratio*this.ratio*(this.b3.smass+this.b4.smass)+this.b1.sinertia*this.cx1*this.cx1+this.b2.sinertia*this.cx2*this.cx2+this.b3.sinertia*this.cx3*this.cx3+this.b4.sinertia*this.cx4*this.cx4;if(this.b1==this.b4&&(_-=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b1.smass+this.cx1*this.cx4*this.b1.sinertia)),this.b1==this.b3&&(_+=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b1.smass+this.cx1*this.cx3*this.b1.sinertia)),this.b2==this.b3&&(_-=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b2.smass+this.cx2*this.cx3*this.b2.sinertia)),this.b2==this.b4&&(_+=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b2.smass+this.cx2*this.cx4*this.b2.sinertia)),this.kMass=_,0!=this.kMass?this.kMass=1/this.kMass:this.jAcc=0,this.stiff)this.bias=0,this.gamma=0;else{if(this.breakUnderError&&c*c>this.maxError*this.maxError)return!0;var y,x=2*Math.PI*this.frequency;this.gamma=1/(e*x*(2*this.damping+x*e));var m=1/(1+this.gamma);y=e*x*x*this.gamma,this.gamma*=m,this.kMass*=m,this.bias=-c*y,this.bias<-this.maxError?this.bias=-this.maxError:this.bias>this.maxError&&(this.bias=this.maxError)}this.jAcc*=t,this.jMax=this.maxForce*e}return!1},dt.prototype.warmStart=function(){if(!this.slack){var e=this.b1.imass*this.jAcc;this.b1.velx-=this.n12x*e,this.b1.vely-=this.n12y*e;var t=this.b2.imass*this.jAcc;this.b2.velx+=this.n12x*t,this.b2.vely+=this.n12y*t;var i=this.b3.imass*this.jAcc;this.b3.velx-=this.n34x*i,this.b3.vely-=this.n34y*i;var n=this.b4.imass*this.jAcc;this.b4.velx+=this.n34x*n,this.b4.vely+=this.n34y*n,this.b1.angvel-=this.cx1*this.b1.iinertia*this.jAcc,this.b2.angvel+=this.cx2*this.b2.iinertia*this.jAcc,this.b3.angvel-=this.cx3*this.b3.iinertia*this.jAcc,this.b4.angvel+=this.cx4*this.b4.iinertia*this.jAcc}},dt.prototype.applyImpulseVel=function(){if(this.slack)return!1;var e=this.kMass*(this.bias-(this.n12x*(this.b2.velx+this.b2.kinvelx-this.b1.velx-this.b1.kinvelx)+this.n12y*(this.b2.vely+this.b2.kinvely-this.b1.vely-this.b1.kinvely)+this.n34x*(this.b4.velx+this.b4.kinvelx-this.b3.velx-this.b3.kinvelx)+this.n34y*(this.b4.vely+this.b4.kinvely-this.b3.vely-this.b3.kinvely)+(this.b2.angvel+this.b2.kinangvel)*this.cx2-(this.b1.angvel+this.b1.kinangvel)*this.cx1+(this.b4.angvel+this.b4.kinangvel)*this.cx4-(this.b3.angvel+this.b3.kinangvel)*this.cx3))-this.jAcc*this.gamma,t=this.jAcc;if(this.jAcc+=e,!this.equal&&0<this.jAcc&&(this.jAcc=0),this.breakUnderForce&&this.jAcc<-this.jMax)return!0;this.stiff||this.jAcc<-this.jMax&&(this.jAcc=-this.jMax),e=this.jAcc-t;var i=this.b1.imass*e;this.b1.velx-=this.n12x*i,this.b1.vely-=this.n12y*i;var n=this.b2.imass*e;this.b2.velx+=this.n12x*n,this.b2.vely+=this.n12y*n;var r=this.b3.imass*e;this.b3.velx-=this.n34x*r,this.b3.vely-=this.n34y*r;var o=this.b4.imass*e;return this.b4.velx+=this.n34x*o,this.b4.vely+=this.n34y*o,this.b1.angvel-=this.cx1*this.b1.iinertia*e,this.b2.angvel+=this.cx2*this.b2.iinertia*e,this.b3.angvel-=this.cx3*this.b3.iinertia*e,this.b4.angvel+=this.cx4*this.b4.iinertia*e,!1},dt.prototype.applyImpulsePos=function(){var e,t,i,n;i=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,n=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var r,o;r=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,o=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var a,s;a=this.b3.axisy*this.a3localx-this.b3.axisx*this.a3localy,s=this.a3localx*this.b3.axisx+this.a3localy*this.b3.axisy;var p,l,h;p=this.b4.axisy*this.a4localx-this.b4.axisx*this.a4localy,l=this.a4localx*this.b4.axisx+this.a4localy*this.b4.axisy;var u=0,d=0,c=0,_=0;u=this.n12x,d=this.n12y,c=this.n34x,_=this.n34y;var y,x,m,g;y=this.b2.posx+r-(this.b1.posx+i),x=this.b2.posy+o-(this.b1.posy+n),m=this.b4.posx+p-(this.b3.posx+a),g=this.b4.posy+l-(this.b3.posy+s);var f=Math.sqrt(y*y+x*x),v=Math.sqrt(m*m+g*g);if(0!=f){var z=1/f;u=y*z,d=x*z}if(0!=v){var w=1/v;c=m*w,_=g*w;var b=this.ratio;c*=b,_*=b}else{var S=this.ratio/Math.sqrt(c*c+_*_);c*=S,_*=S}var C=f+this.ratio*v;if(h=this.equal?(C-=this.jointMax,!1):C<this.jointMin?(C=this.jointMin-C,u=-u,d=-d,c=-c,_=-_,!1):C>this.jointMax?(C-=this.jointMax,!1):!(C=_=c=d=u=0),e=C,!h){if(this.breakUnderError&&e*e>this.maxError*this.maxError)return!0;if(e*e<Qs.constraintLinearSlop*Qs.constraintLinearSlop)return!1;if(6<(e*=.5)*e){var M=this.b1.smass+this.b2.smass;if(M>Qs.epsilon&&(t=-e*(M=.75/M),this.equal||t<0)){var P=t*this.b1.imass;this.b1.posx-=u*P,this.b1.posy-=d*P;var k=t*this.b2.imass;this.b2.posx+=u*k,this.b2.posy+=d*k;var T=t*this.b3.imass;this.b3.posx-=c*T,this.b3.posy-=_*T;var A=t*this.b4.imass;this.b4.posx+=c*A,this.b4.posy+=_*A;var O,E,G,D;O=this.b2.posx+r-(this.b1.posx+i),E=this.b2.posy+o-(this.b1.posy+n),G=this.b4.posx+p-(this.b3.posx+a),D=this.b4.posy+l-(this.b3.posy+s);var I=Math.sqrt(O*O+E*E),L=Math.sqrt(G*G+D*D);if(0!=I){var B=1/I;u=O*B,d=E*B}if(0!=L){var R=1/L;c=G*R,_=D*R;var F=this.ratio;c*=F,_*=F}else{var j=this.ratio/Math.sqrt(c*c+_*_);c*=j,_*=j}var N=I+this.ratio*L;this.equal?N-=this.jointMax:N<this.jointMin?(N=this.jointMin-N,u=-u,d=-d,c=-c,_=-_):N>this.jointMax?N-=this.jointMax:N=_=c=d=u=0,e=N,e*=.5}}var U,V,H,W;U=d*i-u*n,V=d*r-u*o,H=_*a-c*s,W=_*p-c*l;var q=this.b1.smass+this.b2.smass+this.ratio*this.ratio*(this.b3.smass+this.b4.smass)+this.b1.sinertia*U*U+this.b2.sinertia*V*V+this.b3.sinertia*H*H+this.b4.sinertia*W*W;this.b1==this.b4&&(q-=2*((u*c+d*_)*this.b1.smass+U*W*this.b1.sinertia)),this.b1==this.b3&&(q+=2*((u*c+d*_)*this.b1.smass+U*H*this.b1.sinertia)),this.b2==this.b3&&(q-=2*((u*c+d*_)*this.b2.smass+V*H*this.b2.sinertia)),this.b2==this.b4&&(q+=2*((u*c+d*_)*this.b2.smass+V*W*this.b2.sinertia));var X=q;if(0!=X&&(X=1/X),t=-e*X,this.equal||t<0){var Y=this.b1.imass*t;this.b1.posx-=u*Y,this.b1.posy-=d*Y;var K=this.b2.imass*t;this.b2.posx+=u*K,this.b2.posy+=d*K;var Z=this.b3.imass*t;this.b3.posx-=c*Z,this.b3.posy-=_*Z;var J=this.b4.imass*t;this.b4.posx+=c*J,this.b4.posy+=_*J;var Q=this.b1,$=-U*this.b1.iinertia*t;if(Q.rot+=$,1e-4<$*$)Q.axisx=Math.sin(Q.rot),Q.axisy=Math.cos(Q.rot);else{var ee=$*$,te=1-.5*ee,ie=1-ee*ee/8,ne=(te*Q.axisx+$*Q.axisy)*ie;Q.axisy=(te*Q.axisy-$*Q.axisx)*ie,Q.axisx=ne}var re=this.b2,oe=V*this.b2.iinertia*t;if(re.rot+=oe,1e-4<oe*oe)re.axisx=Math.sin(re.rot),re.axisy=Math.cos(re.rot);else{var ae=oe*oe,se=1-.5*ae,pe=1-ae*ae/8,le=(se*re.axisx+oe*re.axisy)*pe;re.axisy=(se*re.axisy-oe*re.axisx)*pe,re.axisx=le}var he=this.b3,ue=-H*this.b3.iinertia*t;if(he.rot+=ue,1e-4<ue*ue)he.axisx=Math.sin(he.rot),he.axisy=Math.cos(he.rot);else{var de=ue*ue,ce=1-.5*de,_e=1-de*de/8,ye=(ce*he.axisx+ue*he.axisy)*_e;he.axisy=(ce*he.axisy-ue*he.axisx)*_e,he.axisx=ye}var xe=this.b4,me=W*this.b4.iinertia*t;if(xe.rot+=me,1e-4<me*me)xe.axisx=Math.sin(xe.rot),xe.axisy=Math.cos(xe.rot);else{var ge=me*me,fe=1-.5*ge,ve=1-ge*ge/8,ze=(fe*xe.axisx+me*xe.axisy)*ve;xe.axisy=(fe*xe.axisy-me*xe.axisx)*ve,xe.axisx=ze}}}return!1},dt.prototype.draw=function(e){},dt.prototype.__class__=dt;var ct=zpp_nape.constraint.ZPP_UserConstraint=function(e,t){this.jOld=null,this.J=null,this.vec3=null,this.Keff=null,this.jMax=0,this.velonly=!1,this.gamma=0,this.soft=0,this.y=null,this.L=null,this.stepped=!1,this.bias=null,this.jAcc=null,this.dim=0,this.bodies=null,this.outer_zn=null,Ne.call(this),this.bodies=[],this.dim=e,this.velonly=t,this.jAcc=[],this.bias=[],this.L=[],this.J=[],this.jOld=[],this.y=[],this.Keff=[],this.vec3=Z.get(0,0,0);for(var i=0;i<e;){var n=i++;this.J[n]=this.jOld[n]=this.y[n]=0,this.bias[n]=0;for(var r=this.jAcc[n]=0;r<e;)this.L[n*e+r++]=0}this.stepped=!1};ct.__name__=["zpp_nape","constraint","ZPP_UserConstraint"],ct.__super__=Ne,ct.prototype=Object.create(Ne.prototype),ct.prototype.outer_zn=null,ct.prototype.bindVec2_invalidate=function(e){this.outer_zn.__invalidate()},ct.prototype.bodies=null,ct.prototype.dim=null,ct.prototype.jAcc=null,ct.prototype.bias=null,ct.prototype.addBody=function(e){for(var t=null,i=0,n=this.bodies;i<n.length;){var r=n[i];if(++i,r.body==e){t=r;break}}null==t?(this.bodies.push(new _t(1,e)),this.active&&null!=this.space&&null!=e&&e.constraints.add(this)):t.cnt++},ct.prototype.remBody=function(e){for(var t=null,i=0|this.bodies.length,n=0;n<i;){var r=this.bodies[n];if(r.body==e){r.cnt--,0==r.cnt&&(0<i&&(this.bodies[n]=this.bodies[i-1]),this.bodies.pop(),this.active&&null!=this.space&&null!=e&&e.constraints.remove(this)),t=r;break}++n}return null!=t},ct.prototype.bodyImpulse=function(e){for(var t=0,i=this.dim;t<i;){var n=t++;this.J[n]=this.jAcc[n]}var r=Z.get(0,0,0);return this.stepped&&this.outer_zn.__impulse(this.J,e.outer,r),r},ct.prototype.activeBodies=function(){for(var e=0,t=this.bodies;e<t.length;){var i=t[e];++e,null!=i.body&&i.body.constraints.add(this)}},ct.prototype.inactiveBodies=function(){for(var e=0,t=this.bodies;e<t.length;){var i=t[e];++e,null!=i.body&&i.body.constraints.remove(this)}},ct.prototype.stepped=null,ct.prototype.copy=function(e,t){throw this.copyto(this.outer_zn.__copy()),new r("not done yet")},ct.prototype.validate=function(){for(var e=0,t=this.bodies;e<t.length;){var i=t[e];if(++e,i.body.space!=this.space)throw new r("Error: Constraints must have each body within the same sapce to which the constraint has been assigned")}this.outer_zn.__validate()},ct.prototype.wake_connected=function(){for(var e=0,t=this.bodies;e<t.length;){var i=t[e];++e,2==i.body.type&&i.body.wake()}},ct.prototype.forest=function(){for(var e=0,t=this.bodies;e<t.length;){var i=t[e];if(++e,2==i.body.type){var n,r;if(i.body.component==i.body.component.parent)n=i.body.component;else{for(var o=i.body.component,a=null;o!=o.parent;){var s=o.parent;o.parent=a,a=o,o=s}for(;null!=a;){var p=a.parent;a.parent=o,a=p}n=o}if(this.component==this.component.parent)r=this.component;else{for(var l=this.component,h=null;l!=l.parent;){var u=l.parent;l.parent=h,h=l,l=u}for(;null!=h;){var d=h.parent;h.parent=l,h=d}r=l}n!=r&&(n.rank<r.rank?n.parent=r:n.rank>r.rank?r.parent=n:(r.parent=n).rank++)}}},ct.prototype.pair_exists=function(e,t){for(var i=!1,n=0|this.bodies.length,r=0;r<n;){for(var o=r++,a=this.bodies[o].body,s=o+1;s<n;){var p=this.bodies[s++].body;if(a.id==e&&p.id==t||a.id==t&&p.id==e){i=!0;break}}if(i)break}return i},ct.prototype.broken=function(){this.outer_zn.__broken()},ct.prototype.clearcache=function(){for(var e=0,t=this.dim;e<t;)this.jAcc[e++]=0;this.pre_dt=-1},ct.prototype.lsq=function(e){for(var t=0,i=0,n=this.dim;i<n;){var r=i++;t+=e[r]*e[r]}return t},ct.prototype._clamp=function(e,t){var i=this.lsq(e);if(t*t<i)for(var n=t/Math.sqrt(i),r=0,o=this.dim;r<o;)e[r++]*=n},ct.prototype.L=null,ct.prototype.solve=function(e){for(var t=0,i=0,n=this.dim;i<n;){for(var r=i++,o=0,a=0,s=r-1;a<s;){var p=a++;o+=this.L[r*this.dim+p]*this.L[r*this.dim+p]}var l=Math.sqrt(e[t++]-o);if(0!=(this.L[r*this.dim+r]=l)){l=1/l;for(var h=r+1,u=this.dim;h<u;){for(var d=h++,c=0,_=0,y=r-1;_<y;){var x=_++;c+=this.L[d*this.dim+x]*this.L[r*this.dim+x]}this.L[d*this.dim+r]=l*(e[t++]-c)}}else{for(var m=r+1,g=this.dim;m<g;)this.L[m++*this.dim+r]=0;t+=this.dim-r-1}}return this.L},ct.prototype.y=null,ct.prototype.transform=function(e,t){for(var i=0,n=this.dim;i<n;){var r=i++,o=t[r],a=e[r*this.dim+r];if(0!=a){for(var s=0;s<r;){var p=s++;o-=e[r*this.dim+p]*this.y[p]}this.y[r]=o/a}else this.y[r]=0}for(var l=0,h=this.dim;l<h;){var u=this.dim-1-l++,d=e[u*this.dim+u];if(0!=d){for(var c=this.y[u],_=u+1,y=this.dim;_<y;){var x=_++;c-=e[x*this.dim+u]*t[x]}t[u]=c/d}else t[u]=0}},ct.prototype.soft=null,ct.prototype.gamma=null,ct.prototype.velonly=null,ct.prototype.jMax=null,ct.prototype.Keff=null,ct.prototype.preStep=function(e){this.outer_zn.__validate(),-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;if(this.pre_dt=e,this.stepped=!0,this.outer_zn.__prepare(),this.outer_zn.__eff_mass(this.Keff),this.L=this.solve(this.Keff),this.stiff||this.velonly){for(var i=0,n=this.dim;i<n;)this.bias[i++]=0;this.gamma=0,this.soft=1}else{var r,o=2*Math.PI*this.frequency;this.gamma=1/(e*o*(2*this.damping+o*e));var a=1/(1+this.gamma);if(r=e*o*o*this.gamma,this.gamma*=a,this.soft=a,this.outer_zn.__position(this.bias),this.breakUnderError&&this.lsq(this.bias)>this.maxError*this.maxError)return!0;for(var s=0,p=this.dim;s<p;)this.bias[s++]*=-r;this._clamp(this.bias,this.maxError)}for(var l=0,h=this.dim;l<h;)this.jAcc[l++]*=t;return this.jMax=this.maxForce*e,!1},ct.prototype.vec3=null,ct.prototype.warmStart=function(){for(var e=0,t=this.bodies;e<t.length;){var i=t[e];++e;var n=i.body;this.outer_zn.__impulse(this.jAcc,n.outer,this.vec3);var r=n.imass,o=this.vec3,a=o.zpp_inner;null!=a._validate&&a._validate(),n.velx+=o.zpp_inner.x*r;var s=this.vec3,p=s.zpp_inner;null!=p._validate&&p._validate(),n.vely+=s.zpp_inner.y*r;var l=this.vec3,h=l.zpp_inner;null!=h._validate&&h._validate(),n.angvel+=l.zpp_inner.z*n.iinertia}},ct.prototype.J=null,ct.prototype.jOld=null,ct.prototype.applyImpulseVel=function(){this.outer_zn.__velocity(this.J);for(var e=0,t=this.dim;e<t;){var i=e++;this.J[i]=this.bias[i]-this.J[i]}this.transform(this.L,this.J);for(var n=0,r=this.dim;n<r;){var o=n++;this.jOld[o]=this.jAcc[o],this.jAcc[o]+=this.J[o]=this.J[o]*this.soft-this.jAcc[o]*this.gamma}if(this.outer_zn.__clamp(this.jAcc),(this.breakUnderForce||!this.stiff)&&this.lsq(this.jAcc)>this.jMax*this.jMax){if(this.breakUnderForce)return!0;this.stiff||this._clamp(this.jAcc,this.jMax)}for(var a=0,s=this.dim;a<s;){var p=a++;this.J[p]=this.jAcc[p]-this.jOld[p]}for(var l=0,h=this.bodies;l<h.length;){var u=h[l];++l;var d=u.body;this.outer_zn.__impulse(this.J,d.outer,this.vec3);var c=d.imass,_=this.vec3,y=_.zpp_inner;null!=y._validate&&y._validate(),d.velx+=_.zpp_inner.x*c;var x=this.vec3,m=x.zpp_inner;null!=m._validate&&m._validate(),d.vely+=x.zpp_inner.y*c;var g=this.vec3,f=g.zpp_inner;null!=f._validate&&f._validate(),d.angvel+=g.zpp_inner.z*d.iinertia}return!1},ct.prototype.applyImpulsePos=function(){if(this.velonly)return!1;this.outer_zn.__prepare(),this.outer_zn.__position(this.J);var e=this.lsq(this.J);if(this.breakUnderError&&e>this.maxError*this.maxError)return!0;if(e<Qs.constraintLinearSlop*Qs.constraintLinearSlop)return!1;for(var t=0,i=this.dim;t<i;)this.J[t++]*=-1;this.outer_zn.__eff_mass(this.Keff),this.transform(this.solve(this.Keff),this.J),this.outer_zn.__clamp(this.J);for(var n=0,r=this.bodies;n<r.length;){var o=r[n];++n;var a=o.body;this.outer_zn.__impulse(this.J,a.outer,this.vec3);var s=a.imass,p=this.vec3,l=p.zpp_inner;null!=l._validate&&l._validate(),a.posx+=p.zpp_inner.x*s;var h=this.vec3,u=h.zpp_inner;null!=u._validate&&u._validate(),a.posy+=h.zpp_inner.y*s;var d=this.vec3,c=d.zpp_inner;null!=c._validate&&c._validate();var _=d.zpp_inner.z*a.iinertia;if(a.rot+=_,1e-4<_*_)a.axisx=Math.sin(a.rot),a.axisy=Math.cos(a.rot);else{var y=_*_,x=1-.5*y,m=1-y*y/8,g=(x*a.axisx+_*a.axisy)*m;a.axisy=(x*a.axisy-_*a.axisx)*m,a.axisx=g}}return!1},ct.prototype.draw=function(e){this.outer_zn.__draw(e)},ct.prototype.__class__=ct;var _t=zpp_nape.constraint.ZPP_UserBody=function(e,t){this.body=null,this.cnt=0,this.cnt=e,this.body=t};_t.__name__=["zpp_nape","constraint","ZPP_UserBody"],_t.prototype.cnt=null,_t.prototype.body=null,_t.prototype.__class__=_t;var yt=zpp_nape.constraint.ZPP_WeldJoint=function(){this.stepped=!1,this.biasz=0,this.biasy=0,this.biasx=0,this.gamma=0,this.jMax=0,this.jAccz=0,this.jAccy=0,this.jAccx=0,this.kMassf=0,this.kMasse=0,this.kMassc=0,this.kMassd=0,this.kMassb=0,this.kMassa=0,this.phase=0,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.b2=null,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.b1=null,this.outer_zn=null,Ne.call(this),this.phase=0,this.jAccx=0,this.jAccy=0,this.jAccz=0,this.jMax=1/0,this.stepped=!1,this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0};yt.__name__=["zpp_nape","constraint","ZPP_WeldJoint"],yt.__super__=Ne,yt.prototype=Object.create(Ne.prototype),yt.prototype.outer_zn=null,yt.prototype.bodyImpulse=function(e){return this.stepped?e==this.b1?Z.get(-this.jAccx,-this.jAccy,-(this.jAccy*this.a1relx-this.jAccx*this.a1rely+this.jAccz)):Z.get(this.jAccx,this.jAccy,this.jAccy*this.a2relx-this.jAccx*this.a2rely+this.jAccz):Z.get(0,0,0)},yt.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},yt.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},yt.prototype.b1=null,yt.prototype.a1localx=null,yt.prototype.a1localy=null,yt.prototype.a1relx=null,yt.prototype.a1rely=null,yt.prototype.validate_a1=function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},yt.prototype.invalidate_a1=function(e){this.immutable_midstep("Constraint::a1"),this.a1localx=e.x,this.a1localy=e.y,this.wake()},yt.prototype.setup_a1=function(){var e,t=this.a1localx,i=this.a1localy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a1=e,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$(this,this.invalidate_a1)},yt.prototype.wrap_a1=null,yt.prototype.b2=null,yt.prototype.a2localx=null,yt.prototype.a2localy=null,yt.prototype.a2relx=null,yt.prototype.a2rely=null,yt.prototype.validate_a2=function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},yt.prototype.invalidate_a2=function(e){this.immutable_midstep("Constraint::a2"),this.a2localx=e.x,this.a2localy=e.y,this.wake()},yt.prototype.setup_a2=function(){var e,t=this.a2localx,i=this.a2localy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a2=e,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$(this,this.invalidate_a2)},yt.prototype.wrap_a2=null,yt.prototype.phase=null,yt.prototype.kMassa=null,yt.prototype.kMassb=null,yt.prototype.kMassd=null,yt.prototype.kMassc=null,yt.prototype.kMasse=null,yt.prototype.kMassf=null,yt.prototype.jAccx=null,yt.prototype.jAccy=null,yt.prototype.jAccz=null,yt.prototype.jMax=null,yt.prototype.gamma=null,yt.prototype.biasx=null,yt.prototype.biasy=null,yt.prototype.biasz=null,yt.prototype.stepped=null,yt.prototype.copy=function(e,t){var i=this.outer_zn;null==i.zpp_inner_zn.wrap_a1&&i.zpp_inner_zn.setup_a1();var n=i.zpp_inner_zn.wrap_a1,r=this.outer_zn;null==r.zpp_inner_zn.wrap_a2&&r.zpp_inner_zn.setup_a2();var o=new A(null,null,n,r.zpp_inner_zn.wrap_a2);if(this.copyto(o),null!=e&&null!=this.b1){for(var a=null,s=0;s<e.length;){var p=e[s];if(++s,p.id==this.b1.id){a=p.bc;break}}null!=a?o.zpp_inner_zn.b1=a.zpp_inner:t.push(rt.todo(this.b1.id,function(e){o.zpp_inner_zn.b1=e.zpp_inner}))}if(null!=e&&null!=this.b2){for(var l=null,h=0;h<e.length;){var u=e[h];if(++h,u.id==this.b2.id){l=u.bc;break}}null!=l?o.zpp_inner_zn.b2=l.zpp_inner:t.push(rt.todo(this.b2.id,function(e){o.zpp_inner_zn.b2=e.zpp_inner}))}return o},yt.prototype.validate=function(){if(null==this.b1||null==this.b2)throw new r("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new r("Error: WeldJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new r("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(2!=this.b1.type&&2!=this.b2.type)throw new r("Error: Constraints cannot have both bodies non-dynamic")},yt.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},yt.prototype.forest=function(){if(2==this.b1.type){var e,t;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{for(var i=this.b1.component,n=null;i!=i.parent;){var r=i.parent;i.parent=n,n=i,i=r}for(;null!=n;){var o=n.parent;n.parent=i,n=o}e=i}if(this.component==this.component.parent)t=this.component;else{for(var a=this.component,s=null;a!=a.parent;){var p=a.parent;a.parent=s,s=a,a=p}for(;null!=s;){var l=s.parent;s.parent=a,s=l}t=a}e!=t&&(e.rank<t.rank?e.parent=t:e.rank>t.rank?t.parent=e:(t.parent=e).rank++)}if(2==this.b2.type){var h,u;if(this.b2.component==this.b2.component.parent)h=this.b2.component;else{for(var d=this.b2.component,c=null;d!=d.parent;){var _=d.parent;d.parent=c,c=d,d=_}for(;null!=c;){var y=c.parent;c.parent=d,c=y}h=d}if(this.component==this.component.parent)u=this.component;else{for(var x=this.component,m=null;x!=x.parent;){var g=x.parent;x.parent=m,m=x,x=g}for(;null!=m;){var f=m.parent;m.parent=x,m=f}u=x}h!=u&&(h.rank<u.rank?h.parent=u:h.rank>u.rank?u.parent=h:(u.parent=h).rank++)}},yt.prototype.pair_exists=function(e,t){return this.b1.id==e&&this.b2.id==t||this.b1.id==t&&this.b2.id==e},yt.prototype.clearcache=function(){this.jAccx=0,this.jAccy=0,this.jAccz=0,this.pre_dt=-1},yt.prototype.preStep=function(e){-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;this.pre_dt=e,this.stepped=!0,this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var i=this.b1.smass+this.b2.smass;if(this.kMassa=i,this.kMassb=0,this.kMassd=i,this.kMassc=0,this.kMasse=0,(this.kMassf=0)!=this.b1.sinertia){var n=this.a1relx*this.b1.sinertia,r=this.a1rely*this.b1.sinertia;this.kMassa+=r*this.a1rely,this.kMassb+=-r*this.a1relx,this.kMassd+=n*this.a1relx,this.kMassc+=-r,this.kMasse+=n,this.kMassf+=this.b1.sinertia}if(0!=this.b2.sinertia){var o=this.a2relx*this.b2.sinertia,a=this.a2rely*this.b2.sinertia;this.kMassa+=a*this.a2rely,this.kMassb+=-a*this.a2relx,this.kMassd+=o*this.a2relx,this.kMassc+=-a,this.kMasse+=o,this.kMassf+=this.b2.sinertia}var s,p=this.kMassa*(this.kMassd*this.kMassf-this.kMasse*this.kMasse)+this.kMassb*(this.kMassc*this.kMasse-this.kMassb*this.kMassf)+this.kMassc*(this.kMassb*this.kMasse-this.kMassc*this.kMassd);if(p!=p)this.kMassa=0,this.kMassb=0,this.kMassd=0,this.kMassc=0,this.kMasse=0,this.kMassf=0,s=7;else if(0==p){var l=0;0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,l=1),0!=this.kMassd?this.kMassd=1/this.kMassd:(this.kMassd=0,l|=2),0!=this.kMassf?this.kMassf=1/this.kMassf:(this.kMassf=0,l|=4),this.kMassb=this.kMassc=this.kMasse=0,s=l}else{var h=(p=1/p)*(this.kMassd*this.kMassf-this.kMasse*this.kMasse),u=p*(this.kMasse*this.kMassc-this.kMassb*this.kMassf),d=p*(this.kMassa*this.kMassf-this.kMassc*this.kMassc),c=p*(this.kMassb*this.kMasse-this.kMassc*this.kMassd),_=p*(this.kMassb*this.kMassc-this.kMassa*this.kMasse),y=this.kMassa*this.kMassd-this.kMassb*this.kMassb;this.kMassa=h,this.kMassb=u,this.kMassd=d,this.kMassc=c,this.kMasse=_,this.kMassf=p*y,s=0}if(0!=(1&s)&&(this.jAccx=0),0!=(2&s)&&(this.jAccy=0),0!=(4&s)&&(this.jAccz=0),this.stiff)this.biasx=0,this.biasy=0,this.biasz=0,this.gamma=0;else{var x,m=2*Math.PI*this.frequency;this.gamma=1/(e*m*(2*this.damping+m*e));var g=1/(1+this.gamma);if(x=e*m*m*this.gamma,this.gamma*=g,this.kMassa*=g,this.kMassb*=g,this.kMassd*=g,this.kMassc*=g,this.kMasse*=g,this.kMassf*=g,this.biasx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),this.biasy=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely),this.biasz=this.b2.rot-this.b1.rot-this.phase,this.breakUnderError&&this.biasx*this.biasx+this.biasy*this.biasy+this.biasz*this.biasz>this.maxError*this.maxError)return!0;var f=-x;this.biasx*=f,this.biasy*=f,this.biasz*=f;var v=this.maxError,z=this.biasx*this.biasx+this.biasy*this.biasy+this.biasz*this.biasz;if(v*v<z){var w=v*(1/Math.sqrt(z));this.biasx*=w,this.biasy*=w,this.biasz*=w}}return this.jAccx*=t,this.jAccy*=t,this.jAccz*=t,this.jMax=this.maxForce*e,!1},yt.prototype.warmStart=function(){var e=this.b1.imass;this.b1.velx-=this.jAccx*e,this.b1.vely-=this.jAccy*e;var t=this.b2.imass;this.b2.velx+=this.jAccx*t,this.b2.vely+=this.jAccy*t,this.b1.angvel-=(this.jAccy*this.a1relx-this.jAccx*this.a1rely+this.jAccz)*this.b1.iinertia,this.b2.angvel+=(this.jAccy*this.a2relx-this.jAccx*this.a2rely+this.jAccz)*this.b2.iinertia},yt.prototype.applyImpulseVel=function(){var e,t,i;e=this.b2.velx+this.b2.kinvelx-this.a2rely*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.a1rely*(this.b1.angvel+this.b1.kinangvel)),t=this.b2.vely+this.b2.kinvely+this.a2relx*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.a1relx*(this.b1.angvel+this.b1.kinangvel)),i=this.b2.angvel+this.b2.kinangvel-this.b1.angvel-this.b1.kinangvel;var n=0,r=0,o=0;n=this.biasx-e,r=this.biasy-t,o=this.biasz-i;var a=this.kMassa*n+this.kMassb*r+this.kMassc*o,s=this.kMassb*n+this.kMassd*r+this.kMasse*o;o=this.kMassc*n+this.kMasse*r+this.kMassf*o,n=a,r=s;var p=this.gamma;n-=this.jAccx*p,r-=this.jAccy*p,o-=this.jAccz*p;var l,h,u;if(l=this.jAccx,h=this.jAccy,u=this.jAccz,this.jAccx+=n,this.jAccy+=r,this.jAccz+=o,this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy+this.jAccz*this.jAccz>this.jMax*this.jMax)return!0}else if(!this.stiff){var d=this.jMax,c=this.jAccx*this.jAccx+this.jAccy*this.jAccy+this.jAccz*this.jAccz;if(d*d<c){var _=d*(1/Math.sqrt(c));this.jAccx*=_,this.jAccy*=_,this.jAccz*=_}}n=this.jAccx-l,r=this.jAccy-h,o=this.jAccz-u;var y=this.b1.imass;this.b1.velx-=n*y,this.b1.vely-=r*y;var x=this.b2.imass;return this.b2.velx+=n*x,this.b2.vely+=r*x,this.b1.angvel-=(r*this.a1relx-n*this.a1rely+o)*this.b1.iinertia,this.b2.angvel+=(r*this.a2relx-n*this.a2rely+o)*this.b2.iinertia,!1},yt.prototype.applyImpulsePos=function(){var e,t;e=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,t=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var i,n;i=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,n=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var r=0,o=0,a=0;r=this.b2.posx+i-(this.b1.posx+e),o=this.b2.posy+n-(this.b1.posy+t),a=this.b2.rot-this.b1.rot-this.phase;var s=0,p=0,l=0;if(this.breakUnderError&&r*r+o*o+a*a>this.maxError*this.maxError)return!0;var h=!0;r*r+o*o<Qs.constraintLinearSlop*Qs.constraintLinearSlop&&(h=!1,o=r=0);var u=a*a,d=Qs.constraintAngularSlop;if(u<d*d){if(!h)return!1;a=0}if(a*=.5,6<(r*=.5)*r+(o*=.5)*o){var c=this.b1.smass+this.b2.smass;if(c>Qs.epsilon){var _=(s=-r*(c=.75/c))*s+(p=-o*c)*p;if(400<_){var y=1/Math.sqrt(_)*20;s*=y,p*=y}var x=this.b1.imass;this.b1.posx-=s*x,this.b1.posy-=p*x;var m=this.b2.imass;this.b2.posx+=s*m,this.b2.posy+=p*m,r=this.b2.posx+i-(this.b1.posx+e),o=this.b2.posy+n-(this.b1.posy+t),a=this.b2.rot-this.b1.rot-this.phase,r*=.5,o*=.5,a*=.5}}var g=0,f=0,v=0,z=0,w=0,b=0,S=this.b1.smass+this.b2.smass;if(v=g=S,(b=w=z=f=0)!=this.b1.sinertia){var C=e*this.b1.sinertia,M=t*this.b1.sinertia;g=S+M*t,f+=-M*e,v=S+C*e,z+=-M,w+=C,b+=this.b1.sinertia}if(0!=this.b2.sinertia){var P=i*this.b2.sinertia,k=n*this.b2.sinertia;g+=k*n,f+=-k*i,v+=P*i,z+=-k,w+=P,b+=this.b2.sinertia}l=-a;var T=(s=-r)*s+(p=-o)*p;if(36<T){var A=1/Math.sqrt(T)*6;s*=A,p*=A}var O=g*(v*b-w*w)+f*(z*w-f*b)+z*(f*w-z*v);if(O!=O)s=p=l=0;else if(0==O)0!=g?s/=g:s=0,0!=v?p/=v:p=0,0!=b?l/=b:l=0;else{var E=w*z-f*b,G=f*w-z*v,D=f*z-g*w,I=(O=1/O)*(s*(v*b-w*w)+p*E+l*G),L=O*(s*E+p*(g*b-z*z)+l*D);l=O*(s*G+p*D+l*(g*v-f*f)),s=I,p=L}var B=this.b1.imass;this.b1.posx-=s*B,this.b1.posy-=p*B;var R=this.b2.imass;this.b2.posx+=s*R,this.b2.posy+=p*R;var F=this.b1,j=-(p*e-s*t+l)*this.b1.iinertia;if(F.rot+=j,1e-4<j*j)F.axisx=Math.sin(F.rot),F.axisy=Math.cos(F.rot);else{var N=j*j,U=1-.5*N,V=1-N*N/8,H=(U*F.axisx+j*F.axisy)*V;F.axisy=(U*F.axisy-j*F.axisx)*V,F.axisx=H}var W=this.b2,q=(p*i-s*n+l)*this.b2.iinertia;if(W.rot+=q,1e-4<q*q)W.axisx=Math.sin(W.rot),W.axisy=Math.cos(W.rot);else{var X=q*q,Y=1-.5*X,K=1-X*X/8,Z=(Y*W.axisx+q*W.axisy)*K;W.axisy=(Y*W.axisy-q*W.axisx)*K,W.axisx=Z}return!1},yt.prototype.draw=function(e){},yt.prototype.__class__=yt;var ln=zpp_nape.dynamics.ZPP_Arbiter=function(){this.sensorarb=null,this.fluidarb=null,this.colarb=null,this.type=0,this.pair=null,this.ws2=null,this.ws1=null,this.b2=null,this.b1=null,this.invalidated=!1,this.immState=0,this.fresh=!1,this.continuous=!1,this.presentable=!1,this.intchange=!1,this.present=0,this.sleeping=!1,this.cleared=!1,this.active=!1,this.endGenerated=0,this.sleep_stamp=0,this.up_stamp=0,this.stamp=0,this.di=0,this.id=0,this.hnext=null,this.outer=null};ln.__name__=["zpp_nape","dynamics","ZPP_Arbiter"],ln.prototype.outer=null,ln.prototype.wrapper=function(){return null==this.outer&&(ln.internal=!0,this.type==ln.COL?(this.colarb.outer_zn=new D,this.outer=this.colarb.outer_zn):this.type==ln.FLUID?(this.fluidarb.outer_zn=new B,this.outer=this.fluidarb.outer_zn):this.outer=new O,this.outer.zpp_inner=this,ln.internal=!1),this.outer},ln.prototype.inactiveme=function(){return!this.active},ln.prototype.hnext=null,ln.prototype.id=null,ln.prototype.di=null,ln.prototype.stamp=null,ln.prototype.up_stamp=null,ln.prototype.sleep_stamp=null,ln.prototype.endGenerated=null,ln.prototype.active=null,ln.prototype.cleared=null,ln.prototype.sleeping=null,ln.prototype.present=null,ln.prototype.intchange=null,ln.prototype.presentable=null,ln.prototype.continuous=null,ln.prototype.fresh=null,ln.prototype.immState=null,ln.prototype.acting=function(){return!!this.active&&0!=(1&this.immState)},ln.prototype.invalidated=null,ln.prototype.b1=null,ln.prototype.b2=null,ln.prototype.ws1=null,ln.prototype.ws2=null,ln.prototype.pair=null,ln.prototype.swap_features=function(){var e=this.b1;this.b1=this.b2,this.b2=e;var t=this.ws1;this.ws1=this.ws2,this.ws2=t;var i=this.colarb.s1;this.colarb.s1=this.colarb.s2,this.colarb.s2=i},ln.prototype.type=null,ln.prototype.colarb=null,ln.prototype.fluidarb=null,ln.prototype.sensorarb=null,ln.prototype.lazyRetire=function(e,t){if(this.cleared=!0,null==t||this.b2==t)for(var i=this.b1.arbiters,n=null,r=i.head;null!=r;){if(r.elt==this){var o,a;null==n?(a=(o=i.head).next,i.head=a,null==i.head&&(i.pushmod=!0)):(a=(o=n.next).next,null==(n.next=a)&&(i.pushmod=!0));var s=o;s.elt=null,s.next=Ko.zpp_pool,Ko.zpp_pool=s,i.modified=!0,i.length--,i.pushmod=!0;break}r=(n=r).next}if(null==t||this.b1==t)for(var p=this.b2.arbiters,l=null,h=p.head;null!=h;){if(h.elt==this){var u,d;null==l?(d=(u=p.head).next,p.head=d,null==p.head&&(p.pushmod=!0)):(d=(u=l.next).next,null==(l.next=d)&&(p.pushmod=!0));var c=u;c.elt=null,c.next=Ko.zpp_pool,Ko.zpp_pool=c,p.modified=!0,p.length--,p.pushmod=!0;break}h=(l=h).next}null!=this.pair&&(this.pair.arb=null,this.pair=null),this.active=!1,e.f_arbiters.modified=!0},ln.prototype.sup_assign=function(e,t,i,n){this.b1=e.body,this.ws1=e,this.b2=t.body,this.ws2=t,this.id=i,this.di=n;var r,o=this.b1.arbiters;null==Ko.zpp_pool?r=new Ko:(r=Ko.zpp_pool,Ko.zpp_pool=r.next,r.next=null),r.elt=this;var a=r;a.next=o.head,o.head=a,o.modified=!0,o.length++;var s,p=this.b2.arbiters;null==Ko.zpp_pool?s=new Ko:(s=Ko.zpp_pool,Ko.zpp_pool=s.next,s.next=null),s.elt=this;var l=s;l.next=p.head,p.head=l,p.modified=!0,p.length++,this.active=!0,this.present=0,this.cleared=!1,this.sleeping=!1,this.fresh=!1,this.presentable=!1},ln.prototype.sup_retire=function(){if(!this.cleared){for(var e=this.b1.arbiters,t=null,i=e.head;null!=i;){if(i.elt==this){var n,r;null==t?(r=(n=e.head).next,e.head=r,null==e.head&&(e.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(e.pushmod=!0));var o=n;o.elt=null,o.next=Ko.zpp_pool,Ko.zpp_pool=o,e.modified=!0,e.length--,e.pushmod=!0;break}i=(t=i).next}for(var a=this.b2.arbiters,s=null,p=a.head;null!=p;){if(p.elt==this){var l,h;null==s?(h=(l=a.head).next,a.head=h,null==a.head&&(a.pushmod=!0)):(h=(l=s.next).next,null==(s.next=h)&&(a.pushmod=!0));var u=l;u.elt=null,u.next=Ko.zpp_pool,Ko.zpp_pool=u,a.modified=!0,a.length--,a.pushmod=!0;break}p=(s=p).next}null!=this.pair&&(this.pair.arb=null,this.pair=null)}this.b1=this.b2=null,this.active=!1,this.intchange=!1},ln.prototype.__class__=ln;var Vo=zpp_nape.dynamics.ZPP_SensorArbiter=function(){this.next=null,ln.call(this),this.type=ln.SENSOR,this.sensorarb=this};Vo.__name__=["zpp_nape","dynamics","ZPP_SensorArbiter"],Vo.__super__=ln,Vo.prototype=Object.create(ln.prototype),Vo.prototype.next=null,Vo.prototype.alloc=function(){},Vo.prototype.free=function(){},Vo.prototype.assign=function(e,t,i,n){this.b1=e.body,this.ws1=e,this.b2=t.body,this.ws2=t,this.id=i,this.di=n;var r,o=this.b1.arbiters;null==Ko.zpp_pool?r=new Ko:(r=Ko.zpp_pool,Ko.zpp_pool=r.next,r.next=null),r.elt=this;var a=r;a.next=o.head,o.head=a,o.modified=!0,o.length++;var s,p=this.b2.arbiters;null==Ko.zpp_pool?s=new Ko:(s=Ko.zpp_pool,Ko.zpp_pool=s.next,s.next=null),s.elt=this;var l=s;l.next=p.head,p.head=l,p.modified=!0,p.length++,this.active=!0,this.present=0,this.cleared=!1,this.sleeping=!1,this.fresh=!1,this.presentable=!1},Vo.prototype.retire=function(){if(!this.cleared){for(var e=this.b1.arbiters,t=null,i=e.head;null!=i;){if(i.elt==this){var n,r;null==t?(r=(n=e.head).next,e.head=r,null==e.head&&(e.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(e.pushmod=!0));var o=n;o.elt=null,o.next=Ko.zpp_pool,Ko.zpp_pool=o,e.modified=!0,e.length--,e.pushmod=!0;break}i=(t=i).next}for(var a=this.b2.arbiters,s=null,p=a.head;null!=p;){if(p.elt==this){var l,h;null==s?(h=(l=a.head).next,a.head=h,null==a.head&&(a.pushmod=!0)):(h=(l=s.next).next,null==(s.next=h)&&(a.pushmod=!0));var u=l;u.elt=null,u.next=Ko.zpp_pool,Ko.zpp_pool=u,a.modified=!0,a.length--,a.pushmod=!0;break}p=(s=p).next}null!=this.pair&&(this.pair.arb=null,this.pair=null)}this.b1=this.b2=null,this.active=!1,this.intchange=!1;this.next=Vo.zpp_pool,Vo.zpp_pool=this},Vo.prototype.makemutable=function(){},Vo.prototype.makeimmutable=function(){},Vo.prototype.__class__=Vo;var Ho=zpp_nape.dynamics.ZPP_FluidArbiter=function(){this.pre_dt=0,this.mutable=!1,this.wrap_position=null,this.buoyy=0,this.buoyx=0,this.ny=0,this.nx=0,this.lgamma=0,this.dampy=0,this.dampx=0,this.vMassc=0,this.vMassb=0,this.vMassa=0,this.agamma=0,this.adamp=0,this.wMass=0,this.nodrag=!1,this.r2y=0,this.r2x=0,this.r1y=0,this.r1x=0,this.overlap=0,this.centroidy=0,this.centroidx=0,this.next=null,this.outer_zn=null,ln.call(this),this.type=ln.FLUID,(this.fluidarb=this).buoyx=0,this.buoyy=0,this.pre_dt=-1};Ho.__name__=["zpp_nape","dynamics","ZPP_FluidArbiter"],Ho.__super__=ln,Ho.prototype=Object.create(ln.prototype),Ho.prototype.outer_zn=null,Ho.prototype.next=null,Ho.prototype.alloc=function(){},Ho.prototype.free=function(){},Ho.prototype.centroidx=null,Ho.prototype.centroidy=null,Ho.prototype.overlap=null,Ho.prototype.r1x=null,Ho.prototype.r1y=null,Ho.prototype.r2x=null,Ho.prototype.r2y=null,Ho.prototype.nodrag=null,Ho.prototype.wMass=null,Ho.prototype.adamp=null,Ho.prototype.agamma=null,Ho.prototype.vMassa=null,Ho.prototype.vMassb=null,Ho.prototype.vMassc=null,Ho.prototype.dampx=null,Ho.prototype.dampy=null,Ho.prototype.lgamma=null,Ho.prototype.nx=null,Ho.prototype.ny=null,Ho.prototype.buoyx=null,Ho.prototype.buoyy=null,Ho.prototype.position_validate=function(){this.wrap_position.zpp_inner.x=this.centroidx,this.wrap_position.zpp_inner.y=this.centroidy},Ho.prototype.position_invalidate=function(e){this.centroidx=e.x,this.centroidy=e.y},Ho.prototype.wrap_position=null,Ho.prototype.getposition=function(){var e;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var t;null==ep.zpp_pool?t=new ep:(t=ep.zpp_pool,ep.zpp_pool=t.next,t.next=null),t.weak=!1,t._immutable=!1,t.x=0,t.y=0,e.zpp_inner=t,e.zpp_inner.outer=e}else{var i,n=e.zpp_inner;if(null!=n._validate&&n._validate(),0==e.zpp_inner.x){var r=e.zpp_inner;null!=r._validate&&r._validate(),i=0==e.zpp_inner.y}else i=!1;if(!i){e.zpp_inner.x=0,e.zpp_inner.y=0;var o=e.zpp_inner;null!=o._invalidate&&o._invalidate(o)}}e.zpp_inner.weak=!1,this.wrap_position=e,this.wrap_position.zpp_inner._inuse=!0,this.wrap_position.zpp_inner._immutable=!this.mutable,this.wrap_position.zpp_inner._validate=$(this,this.position_validate),this.wrap_position.zpp_inner._invalidate=$(this,this.position_invalidate)},Ho.prototype.assign=function(e,t,i,n){this.b1=e.body,this.ws1=e,this.b2=t.body,this.ws2=t,this.id=i,this.di=n;var r,o=this.b1.arbiters;null==Ko.zpp_pool?r=new Ko:(r=Ko.zpp_pool,Ko.zpp_pool=r.next,r.next=null),r.elt=this;var a=r;a.next=o.head,o.head=a,o.modified=!0,o.length++;var s,p=this.b2.arbiters;null==Ko.zpp_pool?s=new Ko:(s=Ko.zpp_pool,Ko.zpp_pool=s.next,s.next=null),s.elt=this;var l=s;l.next=p.head,p.head=l,p.modified=!0,p.length++,this.active=!0,this.present=0,this.cleared=!1,this.sleeping=!1,this.fresh=!1,this.presentable=!1,this.nx=0,this.ny=1,this.dampx=0,this.dampy=0,this.adamp=0},Ho.prototype.retire=function(){if(!this.cleared){for(var e=this.b1.arbiters,t=null,i=e.head;null!=i;){if(i.elt==this){var n,r;null==t?(r=(n=e.head).next,e.head=r,null==e.head&&(e.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(e.pushmod=!0));var o=n;o.elt=null,o.next=Ko.zpp_pool,Ko.zpp_pool=o,e.modified=!0,e.length--,e.pushmod=!0;break}i=(t=i).next}for(var a=this.b2.arbiters,s=null,p=a.head;null!=p;){if(p.elt==this){var l,h;null==s?(h=(l=a.head).next,a.head=h,null==a.head&&(a.pushmod=!0)):(h=(l=s.next).next,null==(s.next=h)&&(a.pushmod=!0));var u=l;u.elt=null,u.next=Ko.zpp_pool,Ko.zpp_pool=u,a.modified=!0,a.length--,a.pushmod=!0;break}p=(s=p).next}null!=this.pair&&(this.pair.arb=null,this.pair=null)}this.b1=this.b2=null,this.active=!1,this.intchange=!1;this.next=Ho.zpp_pool,(Ho.zpp_pool=this).pre_dt=-1},Ho.prototype.mutable=null,Ho.prototype.makemutable=function(){this.mutable=!0,null!=this.wrap_position&&(this.wrap_position.zpp_inner._immutable=!1)},Ho.prototype.makeimmutable=function(){this.mutable=!1,null!=this.wrap_position&&(this.wrap_position.zpp_inner._immutable=!0)},Ho.prototype.inject=function(e,t,i){this.overlap=e,this.centroidx=t,this.centroidy=i},Ho.prototype.pre_dt=null,Ho.prototype.preStep=function(e,t){-1==this.pre_dt&&(this.pre_dt=t);var i=t/this.pre_dt;this.pre_dt=t,this.r1x=this.centroidx-this.b1.posx,this.r1y=this.centroidy-this.b1.posy,this.r2x=this.centroidx-this.b2.posx,this.r2y=this.centroidy-this.b2.posy;var n=0,r=0;r=this.ws1.fluidEnabled&&null!=this.ws1.fluidProperties.wrap_gravity?(n=this.ws1.fluidProperties.gravityx,this.ws1.fluidProperties.gravityy):(n=e.gravityx,e.gravityy);var o=0,a=0;a=this.ws2.fluidEnabled&&null!=this.ws2.fluidProperties.wrap_gravity?(o=this.ws2.fluidProperties.gravityx,this.ws2.fluidProperties.gravityy):(o=e.gravityx,e.gravityy);var s=0,p=0;if(this.ws1.fluidEnabled&&this.ws2.fluidEnabled){var l=this.overlap*this.ws1.fluidProperties.density,h=this.overlap*this.ws2.fluidProperties.density;if(h<l){var u=l+h;s-=n*u,p-=r*u}else if(l<h){var d=l+h;s+=o*d,p+=a*d}else{var c=0,_=0;if(c=n+o,_=r+a,c*=.5,_*=.5,this.ws1.worldCOMx*c+this.ws1.worldCOMy*_>this.ws2.worldCOMx*c+this.ws2.worldCOMy*_){var y=l+h;s-=c*y,p-=_*y}else{var x=l+h;s+=c*x,p+=_*x}}}else if(this.ws1.fluidEnabled){var m=this.overlap*this.ws1.fluidProperties.density;s-=n*m,p-=r*m}else if(this.ws2.fluidEnabled){var g=this.overlap*this.ws2.fluidProperties.density;s+=o*g,p+=a*g}if(s*=t,p*=t,this.buoyx=s,this.buoyy=p,2==this.b1.type){var f=this.b1.imass;this.b1.velx-=s*f,this.b1.vely-=p*f,this.b1.angvel-=(p*this.r1x-s*this.r1y)*this.b1.iinertia}if(2==this.b2.type){var v=this.b2.imass;this.b2.velx+=s*v,this.b2.vely+=p*v,this.b2.angvel+=(p*this.r2x-s*this.r2y)*this.b2.iinertia}if(this.ws1.fluidEnabled&&0!=this.ws1.fluidProperties.viscosity||this.ws2.fluidEnabled&&0!=this.ws2.fluidProperties.viscosity){this.nodrag=!1;var z=0;if(this.ws1.fluidEnabled&&(this.ws2.validate_angDrag(),z=this.ws1.fluidProperties.viscosity*this.ws2.angDrag*this.overlap/this.ws2.area),this.ws2.fluidEnabled&&(this.ws1.validate_angDrag(),z+=this.ws2.fluidProperties.viscosity*this.ws1.angDrag*this.overlap/this.ws1.area),0!=z){var w=this.b1.sinertia+this.b2.sinertia;this.wMass=0!=w?1/w:0,z*=4e-4;var b=2*Math.PI*z;this.agamma=1/(t*b*(2+b*t));var S=1/(1+this.agamma);this.agamma*=S,this.wMass*=S}else this.wMass=0,this.agamma=0;var C=this.b2.velx+this.b2.kinvelx-this.r2y*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.r1y*(this.b2.angvel+this.b2.kinangvel)),M=this.b2.vely+this.b2.kinvely+this.r2x*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.r1x*(this.b1.angvel+this.b1.kinangvel));if(!(C*C+M*M<Qs.epsilon*Qs.epsilon)){var P=1/Math.sqrt(C*C+M*M);C*=P,M*=P,this.nx=C,this.ny=M}var k=0;if(this.ws1.fluidEnabled){var T=-this.ws1.fluidProperties.viscosity*this.overlap/this.ws2.area;if(0==this.ws2.type)k=0-T*this.ws2.circle.radius*Qs.fluidLinearDrag/(2*this.ws2.circle.radius*Math.PI);else{for(var A=0,O=0,E=this.ws2.polygon.edges.head;null!=E;){var G=E.elt;A+=G.length;var D=T*G.length*(G.gnormx*this.nx+G.gnormy*this.ny);0<D&&(D=D*=-Qs.fluidVacuumDrag),O-=.5*D*Qs.fluidLinearDrag,E=E.next}k=O/A}}if(this.ws2.fluidEnabled){var I=-this.ws2.fluidProperties.viscosity*this.overlap/this.ws1.area;if(0==this.ws1.type)k-=I*this.ws1.circle.radius*Qs.fluidLinearDrag/(2*this.ws1.circle.radius*Math.PI);else{for(var L=0,B=0,R=this.ws1.polygon.edges.head;null!=R;){var F=R.elt;L+=F.length;var j=I*F.length*(F.gnormx*this.nx+F.gnormy*this.ny);0<j&&(j=j*=-Qs.fluidVacuumDrag),B-=.5*j*Qs.fluidLinearDrag,R=R.next}k+=B/L}}if(0!=k){var N=this.b1.smass+this.b2.smass,U=0,V=0,H=0;if(H=U=N,(V=0)!=this.b1.sinertia){var W=this.r1x*this.b1.sinertia,q=this.r1y*this.b1.sinertia;U=N+q*this.r1y,V+=-q*this.r1x,H=N+W*this.r1x}if(0!=this.b2.sinertia){var X=this.r2x*this.b2.sinertia,Y=this.r2y*this.b2.sinertia;U+=Y*this.r2y,V+=-Y*this.r2x,H+=X*this.r2x}var K=U*H-V*V;if(K!=K)U=V=H=0;else if(0==K)U=0!=U?1/U:0,H=0!=H?1/H:0,V=0;else{var Z=H*(K=1/K);H=U*K,U=Z,V*=-K}this.vMassa=U,this.vMassb=V,this.vMassc=H;var J=2*Math.PI*k;this.lgamma=1/(t*J*(2+J*t));var Q=1/(1+this.lgamma);this.lgamma*=Q,this.vMassa*=Q,this.vMassb*=Q,this.vMassc*=Q}else this.vMassa=0,this.vMassb=0,this.vMassc=0,this.lgamma=0}else this.nodrag=!0,this.dampx=0,this.dampy=0,this.adamp=0;this.dampx*=i,this.dampy*=i,this.adamp*=i},Ho.prototype.warmStart=function(){var e=this.b1.imass;this.b1.velx-=this.dampx*e,this.b1.vely-=this.dampy*e;var t=this.b2.imass;this.b2.velx+=this.dampx*t,this.b2.vely+=this.dampy*t,this.b1.angvel-=this.b1.iinertia*(this.dampy*this.r1x-this.dampx*this.r1y),this.b2.angvel+=this.b2.iinertia*(this.dampy*this.r2x-this.dampx*this.r2y),this.b1.angvel-=this.adamp*this.b1.iinertia,this.b2.angvel+=this.adamp*this.b2.iinertia},Ho.prototype.applyImpulseVel=function(){if(!this.nodrag){var e=this.b1.angvel+this.b1.kinangvel,t=this.b2.angvel+this.b2.kinangvel,i=this.b1.velx+this.b1.kinvelx-this.r1y*e-(this.b2.velx+this.b2.kinvelx-this.r2y*t),n=this.b1.vely+this.b1.kinvely+this.r1x*e-(this.b2.vely+this.b2.kinvely+this.r2x*t),r=this.vMassa*i+this.vMassb*n;n=this.vMassb*i+this.vMassc*n,i=r;var o=this.lgamma;i-=this.dampx*o,n-=this.dampy*o,this.dampx+=i,this.dampy+=n;var a=this.b1.imass;this.b1.velx-=i*a,this.b1.vely-=n*a;var s=this.b2.imass;this.b2.velx+=i*s,this.b2.vely+=n*s,this.b1.angvel-=this.b1.iinertia*(n*this.r1x-i*this.r1y),this.b2.angvel+=this.b2.iinertia*(n*this.r2x-i*this.r2y);var p=(e-t)*this.wMass-this.adamp*this.agamma;this.adamp+=p,this.b1.angvel-=p*this.b1.iinertia,this.b2.angvel+=p*this.b2.iinertia}},Ho.prototype.__class__=Ho;var Wo=zpp_nape.dynamics.ZPP_ColArbiter=function(){this.pre_dt=0,this.mutable=!1,this.stat=!1,this.next=null,this.hpc2=!1,this.hc2=!1,this.oc2=null,this.c2=null,this.oc1=null,this.c1=null,this.__ref_vertex=0,this.__ref_edge2=null,this.__ref_edge1=null,this.biasCoef=0,this.rev=!1,this.radius=0,this.lproj=0,this.lnormy=0,this.lnormx=0,this.surfacey=0,this.surfacex=0,this.k2y=0,this.k2x=0,this.k1y=0,this.k1x=0,this.rt2b=0,this.rn2b=0,this.rt2a=0,this.rn2a=0,this.rt1b=0,this.rn1b=0,this.rt1a=0,this.rn1a=0,this.jrAcc=0,this.rMass=0,this.Kc=0,this.Kb=0,this.Ka=0,this.kMassc=0,this.kMassb=0,this.kMassa=0,this.wrap_normal=null,this.ny=0,this.nx=0,this.innards=null,this.wrap_contacts=null,this.contacts=null,this.s2=null,this.s1=null,this.userdef_rfric=!1,this.userdef_restitution=!1,this.userdef_stat_fric=!1,this.userdef_dyn_fric=!1,this.rfric=0,this.restitution=0,this.stat_fric=0,this.dyn_fric=0,this.outer_zn=null,ln.call(this),this.pre_dt=-1,this.contacts=new qo,this.innards=new xt,this.type=ln.COL,this.colarb=this};Wo.__name__=["zpp_nape","dynamics","ZPP_ColArbiter"],Wo.__super__=ln,Wo.prototype=Object.create(ln.prototype),Wo.prototype.outer_zn=null,Wo.prototype.dyn_fric=null,Wo.prototype.stat_fric=null,Wo.prototype.restitution=null,Wo.prototype.rfric=null,Wo.prototype.userdef_dyn_fric=null,Wo.prototype.userdef_stat_fric=null,Wo.prototype.userdef_restitution=null,Wo.prototype.userdef_rfric=null,Wo.prototype.s1=null,Wo.prototype.s2=null,Wo.prototype.contacts=null,Wo.prototype.wrap_contacts=null,Wo.prototype.innards=null,Wo.prototype.nx=null,Wo.prototype.ny=null,Wo.prototype.normal_validate=function(){if(this.cleared)throw new r("Error: Arbiter not currently in use");this.wrap_normal.zpp_inner.x=this.nx,this.wrap_normal.zpp_inner.y=this.ny,this.ws1.id>this.ws2.id&&(this.wrap_normal.zpp_inner.x=-this.wrap_normal.zpp_inner.x,this.wrap_normal.zpp_inner.y=-this.wrap_normal.zpp_inner.y)},Wo.prototype.wrap_normal=null,Wo.prototype.getnormal=function(){var e;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var t;null==ep.zpp_pool?t=new ep:(t=ep.zpp_pool,ep.zpp_pool=t.next,t.next=null),t.weak=!1,t._immutable=!1,t.x=0,t.y=0,e.zpp_inner=t,e.zpp_inner.outer=e}else{var i,n=e.zpp_inner;if(null!=n._validate&&n._validate(),0==e.zpp_inner.x){var r=e.zpp_inner;null!=r._validate&&r._validate(),i=0==e.zpp_inner.y}else i=!1;if(!i){e.zpp_inner.x=0,e.zpp_inner.y=0;var o=e.zpp_inner;null!=o._invalidate&&o._invalidate(o)}}e.zpp_inner.weak=!1,this.wrap_normal=e,this.wrap_normal.zpp_inner._immutable=!0,this.wrap_normal.zpp_inner._inuse=!0,this.wrap_normal.zpp_inner._validate=$(this,this.normal_validate)},Wo.prototype.kMassa=null,Wo.prototype.kMassb=null,Wo.prototype.kMassc=null,Wo.prototype.Ka=null,Wo.prototype.Kb=null,Wo.prototype.Kc=null,Wo.prototype.rMass=null,Wo.prototype.jrAcc=null,Wo.prototype.rn1a=null,Wo.prototype.rt1a=null,Wo.prototype.rn1b=null,Wo.prototype.rt1b=null,Wo.prototype.rn2a=null,Wo.prototype.rt2a=null,Wo.prototype.rn2b=null,Wo.prototype.rt2b=null,Wo.prototype.k1x=null,Wo.prototype.k1y=null,Wo.prototype.k2x=null,Wo.prototype.k2y=null,Wo.prototype.surfacex=null,Wo.prototype.surfacey=null,Wo.prototype.ptype=null,Wo.prototype.lnormx=null,Wo.prototype.lnormy=null,Wo.prototype.lproj=null,Wo.prototype.radius=null,Wo.prototype.rev=null,Wo.prototype.biasCoef=null,Wo.prototype.__ref_edge1=null,Wo.prototype.__ref_edge2=null,Wo.prototype.__ref_vertex=null,Wo.prototype.c1=null,Wo.prototype.oc1=null,Wo.prototype.c2=null,Wo.prototype.oc2=null,Wo.prototype.hc2=null,Wo.prototype.hpc2=null,Wo.prototype.next=null,Wo.prototype.alloc=function(){},Wo.prototype.free=function(){this.userdef_dyn_fric=!1,this.userdef_stat_fric=!1,this.userdef_restitution=!1,this.userdef_rfric=!1,this.__ref_edge1=this.__ref_edge2=null},Wo.prototype.stat=null,Wo.prototype.injectContact=function(e,t,i,n,r,o,a){null==a&&(a=!1);for(var s=null,p=this.contacts.next;null!=p;){var l=p;if(o==l.hash){s=l;break}p=p.next}if(null==s){null==qo.zpp_pool?s=new qo:(s=qo.zpp_pool,qo.zpp_pool=s.next,s.next=null);var h=s.inner;h.jnAcc=h.jtAcc=0,s.hash=o,s.fresh=!0,(s.arbiter=this).jrAcc=0;var u=this.contacts;s._inuse=!0;var d=s;d.next=u.next,u.next=d,u.modified=!0,u.length++,this.innards.add(h)}else s.fresh=!1;return s.px=e,s.py=t,this.nx=i,this.ny=n,s.dist=r,s.stamp=this.stamp,s.posOnly=a,s},Wo.prototype.assign=function(e,t,i,n){this.b1=e.body,this.ws1=e,this.b2=t.body,this.ws2=t,this.id=i,this.di=n;var r,o=this.b1.arbiters;null==Ko.zpp_pool?r=new Ko:(r=Ko.zpp_pool,Ko.zpp_pool=r.next,r.next=null),r.elt=this;var a=r;a.next=o.head,o.head=a,o.modified=!0,o.length++;var s,p=this.b2.arbiters;null==Ko.zpp_pool?s=new Ko:(s=Ko.zpp_pool,Ko.zpp_pool=s.next,s.next=null),s.elt=this;var l=s;l.next=p.head,p.head=l,p.modified=!0,p.length++,this.active=!0,this.present=0,this.cleared=!1,this.sleeping=!1,this.fresh=!1,this.presentable=!1,this.s1=e,this.s2=t,this.userdef_restitution||(this.s1.material.elasticity<=-1/0||this.s2.material.elasticity<=-1/0?this.restitution=0:this.s1.material.elasticity>=1/0||this.s2.material.elasticity>=1/0?this.restitution=1:this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2,this.restitution<0&&(this.restitution=0),1<this.restitution&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction))},Wo.prototype.calcProperties=function(){this.userdef_restitution||(this.s1.material.elasticity<=-1/0||this.s2.material.elasticity<=-1/0?this.restitution=0:this.s1.material.elasticity>=1/0||this.s2.material.elasticity>=1/0?this.restitution=1:this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2,this.restitution<0&&(this.restitution=0),1<this.restitution&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction))},Wo.prototype.validate_props=function(){this.invalidated&&(this.invalidated=!1,this.userdef_restitution||(this.s1.material.elasticity<=-1/0||this.s2.material.elasticity<=-1/0?this.restitution=0:this.s1.material.elasticity>=1/0||this.s2.material.elasticity>=1/0?this.restitution=1:this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2,this.restitution<0&&(this.restitution=0),1<this.restitution&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction)))},Wo.prototype.retire=function(){if(!this.cleared){for(var e=this.b1.arbiters,t=null,i=e.head;null!=i;){if(i.elt==this){var n,r;null==t?(r=(n=e.head).next,e.head=r,null==e.head&&(e.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(e.pushmod=!0));var o=n;o.elt=null,o.next=Ko.zpp_pool,Ko.zpp_pool=o,e.modified=!0,e.length--,e.pushmod=!0;break}i=(t=i).next}for(var a=this.b2.arbiters,s=null,p=a.head;null!=p;){if(p.elt==this){var l,h;null==s?(h=(l=a.head).next,a.head=h,null==a.head&&(a.pushmod=!0)):(h=(l=s.next).next,null==(s.next=h)&&(a.pushmod=!0));var u=l;u.elt=null,u.next=Ko.zpp_pool,Ko.zpp_pool=u,a.modified=!0,a.length--,a.pushmod=!0;break}p=(s=p).next}null!=this.pair&&(this.pair.arb=null,this.pair=null)}for(this.b1=this.b2=null,this.active=!1,this.intchange=!1;null!=this.contacts.next;){var d=this.contacts,c=d.next;d.pop(),c.arbiter=null,c.next=qo.zpp_pool,qo.zpp_pool=c;var _=this.innards,y=_.next;_.next=y.next,y._inuse=!1,null==_.next&&(_.pushmod=!0),_.modified=!0,_.length--}this.userdef_dyn_fric=!1,this.userdef_stat_fric=!1,this.userdef_restitution=!1,this.userdef_rfric=!1,this.__ref_edge1=this.__ref_edge2=null,this.next=Wo.zpp_pool,(Wo.zpp_pool=this).pre_dt=-1},Wo.prototype.mutable=null,Wo.prototype.makemutable=function(){this.mutable=!0,null!=this.wrap_normal&&(this.wrap_normal.zpp_inner._immutable=!1),null!=this.wrap_contacts&&(this.wrap_contacts.zpp_inner.immutable=!1)},Wo.prototype.makeimmutable=function(){this.mutable=!1,null!=this.wrap_normal&&(this.wrap_normal.zpp_inner._immutable=!0),null!=this.wrap_contacts&&(this.wrap_contacts.zpp_inner.immutable=!0)},Wo.prototype.contacts_adder=function(e){return!1},Wo.prototype.contacts_subber=function(e){for(var t=null,i=null,n=this.innards.next,r=this.contacts.next;null!=r;){var o=r;if(o==e.zpp_inner){this.contacts.erase(t),this.innards.erase(i),o.arbiter=null,o.next=qo.zpp_pool,qo.zpp_pool=o;break}t=r,n=(i=n).next,r=r.next}},Wo.prototype.setupcontacts=function(){this.wrap_contacts=Rn.get(this.contacts,!0),this.wrap_contacts.zpp_inner.immutable=!this.mutable,this.wrap_contacts.zpp_inner.adder=$(this,this.contacts_adder),this.wrap_contacts.zpp_inner.dontremove=!0,this.wrap_contacts.zpp_inner.subber=$(this,this.contacts_subber)},Wo.prototype.cleanupContacts=function(){var e=!0,t=null,i=null,n=this.innards.next;this.hc2=!1;for(var r=this.contacts.next;null!=r;){var o=r;if(o.stamp+Qs.arbiterExpirationDelay<this.stamp){var a,s,p=this.contacts;null==t?(s=(a=p.next).next,p.next=s,null==p.next&&(p.pushmod=!0)):(s=(a=t.next).next,null==(t.next=s)&&(p.pushmod=!0)),a._inuse=!1,p.modified=!0,p.length--,p.pushmod=!0,r=s;var l,h,u=this.innards;null==i?(h=(l=u.next).next,u.next=h,null==u.next&&(u.pushmod=!0)):(h=(l=i.next).next,null==(i.next=h)&&(u.pushmod=!0)),l._inuse=!1,u.modified=!0,u.length--,u.pushmod=!0,n=h,o.arbiter=null,o.next=qo.zpp_pool,qo.zpp_pool=o}else{var d=o.inner,c=o.active;o.active=o.stamp==this.stamp,o.active&&(e?(e=!1,this.c1=d,this.oc1=o):(this.hc2=!0,this.c2=d,this.oc2=o)),c!=o.active&&(this.contacts.modified=!0),t=r,n=(i=n).next,r=r.next}}if(this.hc2){if(this.hpc2=!0,this.oc1.posOnly){var _=this.c1;this.c1=this.c2,this.c2=_;var y=this.oc1;this.oc1=this.oc2,this.oc2=y,this.hc2=!1}else this.oc2.posOnly&&(this.hc2=!1);this.oc1.posOnly&&(e=!0)}else this.hpc2=!1;return e},Wo.prototype.pre_dt=null,Wo.prototype.preStep=function(e){this.invalidated&&(this.invalidated=!1,this.userdef_restitution||(this.s1.material.elasticity<=-1/0||this.s2.material.elasticity<=-1/0?this.restitution=0:this.s1.material.elasticity>=1/0||this.s2.material.elasticity>=1/0?this.restitution=1:this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2,this.restitution<0&&(this.restitution=0),1<this.restitution&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction))),-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;this.pre_dt=e;var i=this.b1.smass+this.b2.smass,n=!(this.hc2=!1);this.biasCoef=2!=this.b1.type||2!=this.b2.type?this.continuous?Qs.contactContinuousStaticBiasCoef:Qs.contactStaticBiasCoef:this.continuous?Qs.contactContinuousBiasCoef:Qs.contactBiasCoef,this.continuous=!1;for(var r=null,o=null,a=this.innards.next,s=this.contacts.next;null!=s;){var p=s;if(p.stamp+Qs.arbiterExpirationDelay<this.stamp){var l,h,u=this.contacts;null==r?(h=(l=u.next).next,u.next=h,null==u.next&&(u.pushmod=!0)):(h=(l=r.next).next,null==(r.next=h)&&(u.pushmod=!0)),l._inuse=!1,u.modified=!0,u.length--,u.pushmod=!0,s=h;var d,c,_=this.innards;null==o?(c=(d=_.next).next,_.next=c,null==_.next&&(_.pushmod=!0)):(c=(d=o.next).next,null==(o.next=c)&&(_.pushmod=!0)),d._inuse=!1,_.modified=!0,_.length--,_.pushmod=!0,a=c,p.arbiter=null,p.next=qo.zpp_pool,qo.zpp_pool=p}else{var y=p.inner,x=p.active;if(p.active=p.stamp==this.stamp,p.active){n?(n=!1,this.c1=y,this.oc1=p):(this.hc2=!0,this.c2=y,this.oc2=p),y.r2x=p.px-this.b2.posx,y.r2y=p.py-this.b2.posy,y.r1x=p.px-this.b1.posx,y.r1y=p.py-this.b1.posy;var m=y.r2x*this.nx+y.r2y*this.ny,g=i+this.b2.sinertia*(m*m),f=y.r1x*this.nx+y.r1y*this.ny;g+=this.b1.sinertia*(f*f),y.tMass=g<Qs.epsilon*Qs.epsilon?0:1/g;var v=this.ny*y.r2x-this.nx*y.r2y,z=i+this.b2.sinertia*(v*v),w=this.ny*y.r1x-this.nx*y.r1y;z+=this.b1.sinertia*(w*w),y.nMass=z<Qs.epsilon*Qs.epsilon?0:1/z;var b=0,S=0,C=this.b2.angvel+this.b2.kinangvel;b=this.b2.velx+this.b2.kinvelx-y.r2y*C,S=this.b2.vely+this.b2.kinvely+y.r2x*C,C=this.b1.angvel+this.b1.kinangvel,b-=this.b1.velx+this.b1.kinvelx-y.r1y*C,S-=this.b1.vely+this.b1.kinvely+y.r1x*C;var M=this.nx*b+this.ny*S;p.elasticity=this.restitution,y.bounce=M*p.elasticity,y.bounce>-Qs.elasticThreshold&&(y.bounce=0),M=S*this.nx-b*this.ny;var P=Qs.staticFrictionThreshold;y.friction=P*P<M*M?this.dyn_fric:this.stat_fric,y.jnAcc*=t,y.jtAcc*=t}x!=p.active&&(this.contacts.modified=!0),r=s,a=(o=a).next,s=s.next}}if(this.hc2){if(this.hpc2=!0,this.oc1.posOnly){var k=this.c1;this.c1=this.c2,this.c2=k;var T=this.oc1;this.oc1=this.oc2,this.oc2=T,this.hc2=!1}else this.oc2.posOnly&&(this.hc2=!1);this.oc1.posOnly&&(n=!0)}else this.hpc2=!1;if(this.jrAcc*=t,n||(this.rn1a=this.ny*this.c1.r1x-this.nx*this.c1.r1y,this.rt1a=this.c1.r1x*this.nx+this.c1.r1y*this.ny,this.rn1b=this.ny*this.c1.r2x-this.nx*this.c1.r2y,this.rt1b=this.c1.r2x*this.nx+this.c1.r2y*this.ny,this.k1x=this.b2.kinvelx-this.c1.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c1.r1y*this.b1.kinangvel),this.k1y=this.b2.kinvely+this.c1.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c1.r1x*this.b1.kinangvel)),this.hc2)if(this.rn2a=this.ny*this.c2.r1x-this.nx*this.c2.r1y,this.rt2a=this.c2.r1x*this.nx+this.c2.r1y*this.ny,this.rn2b=this.ny*this.c2.r2x-this.nx*this.c2.r2y,this.rt2b=this.c2.r2x*this.nx+this.c2.r2y*this.ny,this.k2x=this.b2.kinvelx-this.c2.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c2.r1y*this.b1.kinangvel),this.k2y=this.b2.kinvely+this.c2.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c2.r1x*this.b1.kinangvel),this.kMassa=i+this.b1.sinertia*this.rn1a*this.rn1a+this.b2.sinertia*this.rn1b*this.rn1b,this.kMassb=i+this.b1.sinertia*this.rn1a*this.rn2a+this.b2.sinertia*this.rn1b*this.rn2b,this.kMassc=i+this.b1.sinertia*this.rn2a*this.rn2a+this.b2.sinertia*this.rn2b*this.rn2b,this.kMassa*this.kMassa+2*this.kMassb*this.kMassb+this.kMassc*this.kMassc<Qs.illConditionedThreshold*(this.kMassa*this.kMassc-this.kMassb*this.kMassb)){this.Ka=this.kMassa,this.Kb=this.kMassb,this.Kc=this.kMassc;var A=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(A!=A)this.kMassa=this.kMassb=this.kMassc=0;else if(0==A)0!=this.kMassa?this.kMassa=1/this.kMassa:this.kMassa=0,0!=this.kMassc?this.kMassc=1/this.kMassc:this.kMassc=0,this.kMassb=0;else{A=1/A;var O=this.kMassc*A;this.kMassc=this.kMassa*A,this.kMassa=O,this.kMassb*=-A}}else{if(this.hc2=!1,this.oc2.dist<this.oc1.dist){var E=this.c1;this.c1=this.c2,this.c2=E}this.oc2.active=!1,this.contacts.modified=!0}return this.surfacex=this.b2.svelx,this.surfacey=this.b2.svely,this.surfacex+=this.b1.svelx,this.surfacey+=this.b1.svely,this.surfacex=-this.surfacex,this.surfacey=-this.surfacey,this.rMass=this.b1.sinertia+this.b2.sinertia,0!=this.rMass&&(this.rMass=1/this.rMass),n},Wo.prototype.warmStart=function(){var e=this.nx*this.c1.jnAcc-this.ny*this.c1.jtAcc,t=this.ny*this.c1.jnAcc+this.nx*this.c1.jtAcc,i=this.b1.imass;this.b1.velx-=e*i,this.b1.vely-=t*i,this.b1.angvel-=this.b1.iinertia*(t*this.c1.r1x-e*this.c1.r1y);var n=this.b2.imass;if(this.b2.velx+=e*n,this.b2.vely+=t*n,this.b2.angvel+=this.b2.iinertia*(t*this.c1.r2x-e*this.c1.r2y),this.hc2){var r=this.nx*this.c2.jnAcc-this.ny*this.c2.jtAcc,o=this.ny*this.c2.jnAcc+this.nx*this.c2.jtAcc,a=this.b1.imass;this.b1.velx-=r*a,this.b1.vely-=o*a,this.b1.angvel-=this.b1.iinertia*(o*this.c2.r1x-r*this.c2.r1y);var s=this.b2.imass;this.b2.velx+=r*s,this.b2.vely+=o*s,this.b2.angvel+=this.b2.iinertia*(o*this.c2.r2x-r*this.c2.r2y)}this.b2.angvel+=this.jrAcc*this.b2.iinertia,this.b1.angvel-=this.jrAcc*this.b1.iinertia},Wo.prototype.applyImpulseVel=function(){var e,t,i,n,r,o,a=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),s=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel);if(i=(s*this.nx-a*this.ny+this.surfacex)*this.c1.tMass,(n=this.c1.friction*this.c1.jnAcc)<(o=(r=this.c1.jtAcc)-i)?o=n:o<-n&&(o=-n),i=o-r,this.c1.jtAcc=o,e=-this.ny*i,t=this.nx*i,this.b2.velx+=e*this.b2.imass,this.b2.vely+=t*this.b2.imass,this.b1.velx-=e*this.b1.imass,this.b1.vely-=t*this.b1.imass,this.b2.angvel+=this.rt1b*i*this.b2.iinertia,this.b1.angvel-=this.rt1a*i*this.b1.iinertia,this.hc2){var p=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel),l=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel);i=(l*this.nx-p*this.ny+this.surfacex)*this.c2.tMass,(n=this.c2.friction*this.c2.jnAcc)<(o=(r=this.c2.jtAcc)-i)?o=n:o<-n&&(o=-n),i=o-r,this.c2.jtAcc=o,e=-this.ny*i,t=this.nx*i,this.b2.velx+=e*this.b2.imass,this.b2.vely+=t*this.b2.imass,this.b1.velx-=e*this.b1.imass,this.b1.vely-=t*this.b1.imass,this.b2.angvel+=this.rt2b*i*this.b2.iinertia,this.b1.angvel-=this.rt2a*i*this.b1.iinertia,a=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),s=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel),p=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel),l=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel);var h=this.c1.jnAcc,u=this.c2.jnAcc,d=a*this.nx+s*this.ny+this.surfacey+this.c1.bounce-(this.Ka*h+this.Kb*u),c=p*this.nx+l*this.ny+this.surfacey+this.c2.bounce-(this.Kb*h+this.Kc*u),_=-(this.kMassa*d+this.kMassb*c),y=-(this.kMassb*d+this.kMassc*c);0<=_&&0<=y?(d=_-h,c=y-u,this.c1.jnAcc=_,this.c2.jnAcc=y):0<=(_=-this.c1.nMass*d)&&0<=this.Kb*_+c?(d=_-h,c=-u,this.c1.jnAcc=_,this.c2.jnAcc=0):0<=(y=-this.c2.nMass*c)&&0<=this.Kb*y+d?(d=-h,c=y-u,this.c1.jnAcc=0,this.c2.jnAcc=y):0<=d&&0<=c?(d=-h,c=-u,this.c1.jnAcc=this.c2.jnAcc=0):c=d=0,i=d+c,e=this.nx*i,t=this.ny*i,this.b2.velx+=e*this.b2.imass,this.b2.vely+=t*this.b2.imass,this.b1.velx-=e*this.b1.imass,this.b1.vely-=t*this.b1.imass,this.b2.angvel+=(this.rn1b*d+this.rn2b*c)*this.b2.iinertia,this.b1.angvel-=(this.rn1a*d+this.rn2a*c)*this.b1.iinertia}else 0!=this.radius&&(i=(this.b2.angvel-this.b1.angvel)*this.rMass,n=this.rfric*this.c1.jnAcc,r=this.jrAcc,this.jrAcc-=i,this.jrAcc>n?this.jrAcc=n:this.jrAcc<-n&&(this.jrAcc=-n),i=this.jrAcc-r,this.b2.angvel+=i*this.b2.iinertia,this.b1.angvel-=i*this.b1.iinertia),a=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),s=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel),i=(this.c1.bounce+(this.nx*a+this.ny*s)+this.surfacey)*this.c1.nMass,(o=(r=this.c1.jnAcc)-i)<0&&(o=0),i=o-r,this.c1.jnAcc=o,e=this.nx*i,t=this.ny*i,this.b2.velx+=e*this.b2.imass,this.b2.vely+=t*this.b2.imass,this.b1.velx-=e*this.b1.imass,this.b1.vely-=t*this.b1.imass,this.b2.angvel+=this.rn1b*i*this.b2.iinertia,this.b1.angvel-=this.rn1a*i*this.b1.iinertia},Wo.prototype.applyImpulsePos=function(){if(2==this.ptype){var e=this.c1,t=0,i=0;t=this.b2.axisy*e.lr2x-this.b2.axisx*e.lr2y,i=e.lr2x*this.b2.axisx+e.lr2y*this.b2.axisy,t+=this.b2.posx,i+=this.b2.posy;var n=0,r=0;n=this.b1.axisy*e.lr1x-this.b1.axisx*e.lr1y,r=e.lr1x*this.b1.axisx+e.lr1y*this.b1.axisy;var o=0,a=0;o=t-(n+=this.b1.posx),a=i-(r+=this.b1.posy);var s=Math.sqrt(o*o+a*a),p=this.radius-Qs.collisionSlop,l=s-p;if(o*this.nx+a*this.ny<0&&(o=-o,a=-a,l-=this.radius),l<0)if(s<Qs.epsilon)0!=this.b1.smass?this.b1.posx+=10*Qs.epsilon:this.b2.posx+=10*Qs.epsilon;else{var h=1/s;o*=h;var u=.5*(n+t),d=.5*(r+i),c=s-p,_=(a*=h)*(n=u-this.b1.posx)-o*(r=d-this.b1.posy),y=a*(t=u-this.b2.posx)-o*(i=d-this.b2.posy),x=this.b2.smass+y*y*this.b2.sinertia+this.b1.smass+_*_*this.b1.sinertia;if(0!=x){var m,g,f=-this.biasCoef*c/x;m=o*f,g=a*f;var v=this.b1.imass;this.b1.posx-=m*v,this.b1.posy-=g*v;var z=this.b1,w=-_*this.b1.iinertia*f;if(z.rot+=w,1e-4<w*w)z.axisx=Math.sin(z.rot),z.axisy=Math.cos(z.rot);else{var b=w*w,S=1-.5*b,C=1-b*b/8,M=(S*z.axisx+w*z.axisy)*C;z.axisy=(S*z.axisy-w*z.axisx)*C,z.axisx=M}var P=this.b2.imass;this.b2.posx+=m*P,this.b2.posy+=g*P;var k=this.b2,T=y*this.b2.iinertia*f;if(k.rot+=T,1e-4<T*T)k.axisx=Math.sin(k.rot),k.axisy=Math.cos(k.rot);else{var A=T*T,O=1-.5*A,E=1-A*A/8,G=(O*k.axisx+T*k.axisy)*E;k.axisy=(O*k.axisy-T*k.axisx)*E,k.axisx=G}}}}else{var D,I=0,L=0,B=0,R=0,F=0,j=0;0==this.ptype?(I=this.b1.axisy*this.lnormx-this.b1.axisx*this.lnormy,L=this.lnormx*this.b1.axisx+this.lnormy*this.b1.axisy,D=this.lproj+(I*this.b1.posx+L*this.b1.posy),B=this.b2.axisy*this.c1.lr1x-this.b2.axisx*this.c1.lr1y,R=this.c1.lr1x*this.b2.axisx+this.c1.lr1y*this.b2.axisy,B+=this.b2.posx,R+=this.b2.posy,this.hpc2&&(F=this.b2.axisy*this.c2.lr1x-this.b2.axisx*this.c2.lr1y,j=this.c2.lr1x*this.b2.axisx+this.c2.lr1y*this.b2.axisy,F+=this.b2.posx,j+=this.b2.posy)):(I=this.b2.axisy*this.lnormx-this.b2.axisx*this.lnormy,L=this.lnormx*this.b2.axisx+this.lnormy*this.b2.axisy,D=this.lproj+(I*this.b2.posx+L*this.b2.posy),B=this.b1.axisy*this.c1.lr1x-this.b1.axisx*this.c1.lr1y,R=this.c1.lr1x*this.b1.axisx+this.c1.lr1y*this.b1.axisy,B+=this.b1.posx,R+=this.b1.posy,this.hpc2&&(F=this.b1.axisy*this.c2.lr1x-this.b1.axisx*this.c2.lr1y,j=this.c2.lr1x*this.b1.axisx+this.c2.lr1y*this.b1.axisy,F+=this.b1.posx,j+=this.b1.posy));var N=B*I+R*L-D-this.radius;N+=Qs.collisionSlop;var U=0;if(this.hpc2&&(U=F*I+j*L-D-this.radius,U+=Qs.collisionSlop),N<0||U<0){this.rev&&(I=-I,L=-L);var V,H;V=B-this.b1.posx,H=R-this.b1.posy;var W,q;W=B-this.b2.posx,q=R-this.b2.posy;if(this.hpc2){var X=L*V-I*H,Y=L*W-I*q,K=L*(F-this.b1.posx)-I*(j-this.b1.posy),Z=L*(F-this.b2.posx)-I*(j-this.b2.posy),J=this.b1.smass+this.b2.smass;this.kMassa=J+this.b1.sinertia*X*X+this.b2.sinertia*Y*Y,this.kMassb=J+this.b1.sinertia*X*K+this.b2.sinertia*Y*Z,this.kMassc=J+this.b1.sinertia*K*K+this.b2.sinertia*Z*Z;var Q,$,ee;Q=this.kMassa,$=this.kMassb,ee=this.kMassc;for(var te=N*this.biasCoef,ie=U*this.biasCoef;;){var ne=0,re=0;ne=-(ne=te),re=-(re=ie);var oe=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(oe!=oe)ne=re=0;else if(0==oe)0!=this.kMassa?ne/=this.kMassa:ne=0,0!=this.kMassc?re/=this.kMassc:re=0;else{var ae=(oe=1/oe)*(this.kMassc*ne-this.kMassb*re);re=oe*(this.kMassa*re-this.kMassb*ne),ne=ae}if(0<=ne&&0<=re){var se=(ne+re)*this.b1.imass;this.b1.posx-=I*se,this.b1.posy-=L*se;var pe=this.b1,le=-this.b1.iinertia*(X*ne+K*re);if(pe.rot+=le,1e-4<le*le)pe.axisx=Math.sin(pe.rot),pe.axisy=Math.cos(pe.rot);else{var he=le*le,ue=1-.5*he,de=1-he*he/8,ce=(ue*pe.axisx+le*pe.axisy)*de;pe.axisy=(ue*pe.axisy-le*pe.axisx)*de,pe.axisx=ce}var _e=(ne+re)*this.b2.imass;this.b2.posx+=I*_e,this.b2.posy+=L*_e;var ye=this.b2,xe=this.b2.iinertia*(Y*ne+Z*re);if(ye.rot+=xe,1e-4<xe*xe)ye.axisx=Math.sin(ye.rot),ye.axisy=Math.cos(ye.rot);else{var me=xe*xe,ge=1-.5*me,fe=1-me*me/8,ve=(ge*ye.axisx+xe*ye.axisy)*fe;ye.axisy=(ge*ye.axisy-xe*ye.axisx)*fe,ye.axisx=ve}break}if((re=0)<=(ne=-te/Q)&&0<=$*ne+ie){var ze=(ne+re)*this.b1.imass;this.b1.posx-=I*ze,this.b1.posy-=L*ze;var we=this.b1,be=-this.b1.iinertia*(X*ne+K*re);if(we.rot+=be,1e-4<be*be)we.axisx=Math.sin(we.rot),we.axisy=Math.cos(we.rot);else{var Se=be*be,Ce=1-.5*Se,Me=1-Se*Se/8,Pe=(Ce*we.axisx+be*we.axisy)*Me;we.axisy=(Ce*we.axisy-be*we.axisx)*Me,we.axisx=Pe}var ke=(ne+re)*this.b2.imass;this.b2.posx+=I*ke,this.b2.posy+=L*ke;var Te=this.b2,Ae=this.b2.iinertia*(Y*ne+Z*re);if(Te.rot+=Ae,1e-4<Ae*Ae)Te.axisx=Math.sin(Te.rot),Te.axisy=Math.cos(Te.rot);else{var Oe=Ae*Ae,Ee=1-.5*Oe,Ge=1-Oe*Oe/8,De=(Ee*Te.axisx+Ae*Te.axisy)*Ge;Te.axisy=(Ee*Te.axisy-Ae*Te.axisx)*Ge,Te.axisx=De}break}if((ne=0)<=(re=-ie/ee)&&0<=$*re+te){var Ie=(ne+re)*this.b1.imass;this.b1.posx-=I*Ie,this.b1.posy-=L*Ie;var Le=this.b1,Be=-this.b1.iinertia*(X*ne+K*re);if(Le.rot+=Be,1e-4<Be*Be)Le.axisx=Math.sin(Le.rot),Le.axisy=Math.cos(Le.rot);else{var Re=Be*Be,Fe=1-.5*Re,je=1-Re*Re/8,Ne=(Fe*Le.axisx+Be*Le.axisy)*je;Le.axisy=(Fe*Le.axisy-Be*Le.axisx)*je,Le.axisx=Ne}var Ue=(ne+re)*this.b2.imass;this.b2.posx+=I*Ue,this.b2.posy+=L*Ue;var Ve=this.b2,He=this.b2.iinertia*(Y*ne+Z*re);if(Ve.rot+=He,1e-4<He*He)Ve.axisx=Math.sin(Ve.rot),Ve.axisy=Math.cos(Ve.rot);else{var We=He*He,qe=1-.5*We,Xe=1-We*We/8,Ye=(qe*Ve.axisx+He*Ve.axisy)*Xe;Ve.axisy=(qe*Ve.axisy-He*Ve.axisx)*Xe,Ve.axisx=Ye}break}break}}else{var Ke=L*V-I*H,Ze=L*W-I*q,Je=this.b2.smass+Ze*Ze*this.b2.sinertia+this.b1.smass+Ke*Ke*this.b1.sinertia;if(0!=Je){var Qe,$e,et=-this.biasCoef*N/Je;Qe=I*et,$e=L*et;var tt=this.b1.imass;this.b1.posx-=Qe*tt,this.b1.posy-=$e*tt;var it=this.b1,nt=-Ke*this.b1.iinertia*et;if(it.rot+=nt,1e-4<nt*nt)it.axisx=Math.sin(it.rot),it.axisy=Math.cos(it.rot);else{var rt=nt*nt,ot=1-.5*rt,at=1-rt*rt/8,st=(ot*it.axisx+nt*it.axisy)*at;it.axisy=(ot*it.axisy-nt*it.axisx)*at,it.axisx=st}var pt=this.b2.imass;this.b2.posx+=Qe*pt,this.b2.posy+=$e*pt;var lt=this.b2,ht=Ze*this.b2.iinertia*et;if(lt.rot+=ht,1e-4<ht*ht)lt.axisx=Math.sin(lt.rot),lt.axisy=Math.cos(lt.rot);else{var ut=ht*ht,dt=1-.5*ut,ct=1-ut*ut/8,_t=(dt*lt.axisx+ht*lt.axisy)*ct;lt.axisy=(dt*lt.axisy-ht*lt.axisx)*ct,lt.axisx=_t}}}}}},Wo.prototype.__class__=Wo;var qo=zpp_nape.dynamics.ZPP_Contact=function(){this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.elasticity=0,this.dist=0,this.fresh=!1,this.hash=0,this.stamp=0,this.posOnly=!1,this.active=!1,this.inner=null,this.arbiter=null,this.wrap_position=null,this.py=0,this.px=0,this.outer=null,this.inner=new xt};qo.__name__=["zpp_nape","dynamics","ZPP_Contact"],qo.prototype.outer=null,qo.prototype.wrapper=function(){return null==this.outer&&(qo.internal=!0,this.outer=new I,qo.internal=!1,this.outer.zpp_inner=this),this.outer},qo.prototype.px=null,qo.prototype.py=null,qo.prototype.position_validate=function(){this.wrap_position.zpp_inner.x=this.px,this.wrap_position.zpp_inner.y=this.py},qo.prototype.wrap_position=null,qo.prototype.getposition=function(){var e;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var t;null==ep.zpp_pool?t=new ep:(t=ep.zpp_pool,ep.zpp_pool=t.next,t.next=null),t.weak=!1,t._immutable=!1,t.x=0,t.y=0,e.zpp_inner=t,e.zpp_inner.outer=e}else{var i,n=e.zpp_inner;if(null!=n._validate&&n._validate(),0==e.zpp_inner.x){var r=e.zpp_inner;null!=r._validate&&r._validate(),i=0==e.zpp_inner.y}else i=!1;if(!i){e.zpp_inner.x=0,e.zpp_inner.y=0;var o=e.zpp_inner;null!=o._invalidate&&o._invalidate(o)}}e.zpp_inner.weak=!1,this.wrap_position=e,this.wrap_position.zpp_inner._inuse=!0,this.wrap_position.zpp_inner._immutable=!0,this.wrap_position.zpp_inner._validate=$(this,this.position_validate)},qo.prototype.inactiveme=function(){return!(this.active&&null!=this.arbiter&&this.arbiter.active)},qo.prototype.arbiter=null,qo.prototype.inner=null,qo.prototype.active=null,qo.prototype.posOnly=null,qo.prototype.stamp=null,qo.prototype.hash=null,qo.prototype.fresh=null,qo.prototype.dist=null,qo.prototype.elasticity=null,qo.prototype.free=function(){this.arbiter=null},qo.prototype.alloc=function(){},qo.prototype.next=null,qo.prototype.elem=function(){return this},qo.prototype.begin=function(){return this.next},qo.prototype._inuse=null,qo.prototype.modified=null,qo.prototype.pushmod=null,qo.prototype.length=null,qo.prototype.setbegin=function(e){this.next=e,this.modified=!0,this.pushmod=!0},qo.prototype.add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},qo.prototype.inlined_add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},qo.prototype.addAll=function(e){for(var t=e.next;null!=t;)this.add(t),t=t.next},qo.prototype.insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},qo.prototype.inlined_insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},qo.prototype.pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},qo.prototype.inlined_pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},qo.prototype.pop_unsafe=function(){var e=this.next;return this.pop(),e},qo.prototype.inlined_pop_unsafe=function(){var e=this.next;return this.pop(),e},qo.prototype.remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},qo.prototype.try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){this.erase(t),n=!0;break}i=(t=i).next}return n},qo.prototype.inlined_remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},qo.prototype.inlined_try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){var r,o;null==t?(o=(r=this.next).next,this.next=o,null==this.next&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0)),r._inuse=!1,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},qo.prototype.erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},qo.prototype.inlined_erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},qo.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},qo.prototype.clear=function(){},qo.prototype.inlined_clear=function(){},qo.prototype.reverse=function(){for(var e=this.next,t=null;null!=e;){var i=e.next;e.next=t,t=this.next=e,e=i}this.modified=!0,this.pushmod=!0},qo.prototype.empty=function(){return null==this.next},qo.prototype.size=function(){return this.length},qo.prototype.has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},qo.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},qo.prototype.front=function(){return this.next},qo.prototype.back=function(){for(var e=this.next,t=e;null!=t;)t=(e=t).next;return e},qo.prototype.iterator_at=function(e){for(var t=this.next;0<e--&&null!=t;)t=t.next;return t},qo.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t:null},qo.prototype.__class__=qo;var xt=zpp_nape.dynamics.ZPP_IContact=function(){this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.lr2y=0,this.lr2x=0,this.lr1y=0,this.lr1x=0,this.jtAcc=0,this.jnAcc=0,this.friction=0,this.bounce=0,this.tMass=0,this.nMass=0,this.r2y=0,this.r2x=0,this.r1y=0,this.r1x=0};xt.__name__=["zpp_nape","dynamics","ZPP_IContact"],xt.prototype.r1x=null,xt.prototype.r1y=null,xt.prototype.r2x=null,xt.prototype.r2y=null,xt.prototype.nMass=null,xt.prototype.tMass=null,xt.prototype.bounce=null,xt.prototype.friction=null,xt.prototype.jnAcc=null,xt.prototype.jtAcc=null,xt.prototype.lr1x=null,xt.prototype.lr1y=null,xt.prototype.lr2x=null,xt.prototype.lr2y=null,xt.prototype.next=null,xt.prototype.elem=function(){return this},xt.prototype.begin=function(){return this.next},xt.prototype._inuse=null,xt.prototype.modified=null,xt.prototype.pushmod=null,xt.prototype.length=null,xt.prototype.setbegin=function(e){this.next=e,this.modified=!0,this.pushmod=!0},xt.prototype.add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},xt.prototype.inlined_add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},xt.prototype.addAll=function(e){for(var t=e.next;null!=t;)this.add(t),t=t.next},xt.prototype.insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},xt.prototype.inlined_insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},xt.prototype.pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},xt.prototype.inlined_pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},xt.prototype.pop_unsafe=function(){var e=this.next;return this.pop(),e},xt.prototype.inlined_pop_unsafe=function(){var e=this.next;return this.pop(),e},xt.prototype.remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},xt.prototype.try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){this.erase(t),n=!0;break}i=(t=i).next}return n},xt.prototype.inlined_remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},xt.prototype.inlined_try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){var r,o;null==t?(o=(r=this.next).next,this.next=o,null==this.next&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0)),r._inuse=!1,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},xt.prototype.erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},xt.prototype.inlined_erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},xt.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},xt.prototype.clear=function(){},xt.prototype.inlined_clear=function(){},xt.prototype.reverse=function(){for(var e=this.next,t=null;null!=e;){var i=e.next;e.next=t,t=this.next=e,e=i}this.modified=!0,this.pushmod=!0},xt.prototype.empty=function(){return null==this.next},xt.prototype.size=function(){return this.length},xt.prototype.has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},xt.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},xt.prototype.front=function(){return this.next},xt.prototype.back=function(){for(var e=this.next,t=e;null!=t;)t=(e=t).next;return e},xt.prototype.iterator_at=function(e){for(var t=this.next;0<e--&&null!=t;)t=t.next;return t},xt.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t:null},xt.prototype.__class__=xt;var mt=zpp_nape.dynamics.ZPP_InteractionFilter=function(){this.fluidMask=0,this.fluidGroup=0,this.sensorMask=0,this.sensorGroup=0,this.collisionMask=0,this.collisionGroup=0,this.wrap_shapes=null,this.shapes=null,this.outer=null,this.userData=null,this.next=null,this.shapes=new xi,this.collisionGroup=this.sensorGroup=this.fluidGroup=1,this.collisionMask=this.sensorMask=this.fluidMask=-1};mt.__name__=["zpp_nape","dynamics","ZPP_InteractionFilter"],mt.prototype.next=null,mt.prototype.userData=null,mt.prototype.outer=null,mt.prototype.wrapper=function(){if(null==this.outer){this.outer=new R;var e=this.outer.zpp_inner;e.outer=null,e.next=mt.zpp_pool,mt.zpp_pool=e,this.outer.zpp_inner=this}return this.outer},mt.prototype.free=function(){this.outer=null},mt.prototype.alloc=function(){},mt.prototype.shapes=null,mt.prototype.wrap_shapes=null,mt.prototype.feature_cons=function(){this.shapes=new xi},mt.prototype.addShape=function(e){this.shapes.add(e)},mt.prototype.remShape=function(e){this.shapes.remove(e)},mt.prototype.copy=function(){var e;return null==mt.zpp_pool?e=new mt:(e=mt.zpp_pool,mt.zpp_pool=e.next,e.next=null),e.collisionGroup=this.collisionGroup,e.collisionMask=this.collisionMask,e.sensorGroup=this.sensorGroup,e.sensorMask=this.sensorMask,e.fluidGroup=this.fluidGroup,e.fluidMask=this.fluidMask,e},mt.prototype.collisionGroup=null,mt.prototype.collisionMask=null,mt.prototype.shouldCollide=function(e){return 0!=(this.collisionMask&e.collisionGroup)&&0!=(e.collisionMask&this.collisionGroup)},mt.prototype.sensorGroup=null,mt.prototype.sensorMask=null,mt.prototype.shouldSense=function(e){return 0!=(this.sensorMask&e.sensorGroup)&&0!=(e.sensorMask&this.sensorGroup)},mt.prototype.fluidGroup=null,mt.prototype.fluidMask=null,mt.prototype.shouldFlow=function(e){return 0!=(this.fluidMask&e.fluidGroup)&&0!=(e.fluidMask&this.fluidGroup)},mt.prototype.invalidate=function(){for(var e=this.shapes.head;null!=e;)e.elt.invalidate_filter(),e=e.next},mt.prototype.__class__=mt;var gt=zpp_nape.dynamics.ZPP_InteractionGroup=function(){this.depth=0,this.wrap_interactors=null,this.interactors=null,this.wrap_groups=null,this.groups=null,this.group=null,this.ignore=!1,this.outer=null,this.depth=0,this.groups=new Ii,this.interactors=new Ge};gt.__name__=["zpp_nape","dynamics","ZPP_InteractionGroup"],gt.prototype.outer=null,gt.prototype.ignore=null,gt.prototype.group=null,gt.prototype.setGroup=function(e){this.group!=e&&(null!=this.group&&(this.group.groups.remove(this),this.depth=0,this.group.invalidate(!0)),null!=(this.group=e)?(e.groups.add(this),this.depth=e.depth+1,e.invalidate(!0)):this.invalidate(!0))},gt.prototype.groups=null,gt.prototype.wrap_groups=null,gt.prototype.interactors=null,gt.prototype.wrap_interactors=null,gt.prototype.depth=null,gt.prototype.invalidate=function(e){if(null==e&&(e=!1),e||this.ignore){for(var t=this.interactors.head;null!=t;){var i=t.elt;null!=i.ibody?i.ibody.wake():null!=i.ishape?i.ishape.body.wake():i.icompound.wake(),t=t.next}for(var n=this.groups.head;null!=n;)n.elt.invalidate(e),n=n.next}},gt.prototype.addGroup=function(e){this.groups.add(e),e.depth=this.depth+1},gt.prototype.remGroup=function(e){this.groups.remove(e),e.depth=0},gt.prototype.addInteractor=function(e){this.interactors.add(e)},gt.prototype.remInteractor=function(e,t){null==t&&(t=-1),this.interactors.remove(e)},gt.prototype.__class__=gt;var ft=zpp_nape.dynamics.ZPP_SpaceArbiterList=function(){this.at_index_3=0,this.at_index_2=0,this.at_index_1=0,this.at_index_0=0,this.ite_3=null,this.ite_2=null,this.ite_1=null,this.ite_0=null,this.lengths=null,this.zip_length=!1,this._length=0,this.space=null,E.call(this),this.at_index_0=0,this.at_index_1=0,this.at_index_2=0,this.at_index_3=0,this.zip_length=!0,this._length=0,this.lengths=[];for(var e=0;e<4;)++e,this.lengths.push(0)};ft.__name__=["zpp_nape","dynamics","ZPP_SpaceArbiterList"],ft.__super__=E,ft.prototype=Object.create(E.prototype),ft.prototype.space=null,ft.prototype._length=null,ft.prototype.zip_length=null,ft.prototype.zpp_gl=function(){if(this.zpp_vm(),this.zip_length){for(var e=this._length=0,t=this.space.c_arbiters_true.head;null!=t;)t.elt.active&&++e,t=t.next;this.lengths[0]=e,this._length+=e;for(var i=0,n=this.space.c_arbiters_false.head;null!=n;)n.elt.active&&++i,n=n.next;this.lengths[1]=i,this._length+=i;for(var r=0,o=this.space.f_arbiters.head;null!=o;)o.elt.active&&++r,o=o.next;this.lengths[2]=r,this._length+=r;for(var a=0,s=this.space.s_arbiters.head;null!=s;)s.elt.active&&++a,s=s.next;this.lengths[3]=a,this._length+=a,this.zip_length=!1}return this._length},ft.prototype.lengths=null,ft.prototype.ite_0=null,ft.prototype.ite_1=null,ft.prototype.ite_2=null,ft.prototype.ite_3=null,ft.prototype.at_index_0=null,ft.prototype.at_index_1=null,ft.prototype.at_index_2=null,ft.prototype.at_index_3=null,ft.prototype.zpp_vm=function(){var e=!1;this.space.c_arbiters_true.modified&&(e=!0,this.space.c_arbiters_true.modified=!1),this.space.c_arbiters_false.modified&&(e=!0,this.space.c_arbiters_false.modified=!1),this.space.f_arbiters.modified&&(e=!0,this.space.f_arbiters.modified=!1),this.space.s_arbiters.modified&&(e=!0,this.space.s_arbiters.modified=!1),e&&(this.zip_length=!0,this._length=0,this.ite_0=null,this.ite_1=null,this.ite_2=null,this.ite_3=null)},ft.prototype.push=function(e){return!1},ft.prototype.pop=function(){return null},ft.prototype.unshift=function(e){return!1},ft.prototype.shift=function(){return null},ft.prototype.remove=function(e){return!1},ft.prototype.clear=function(){},ft.prototype.at=function(e){this.zpp_vm();var t=null,i=0;if(null==t)if(e<this.lengths[0]){var n=e;if(n<this.at_index_0||null==this.ite_0)for(this.at_index_0=0,this.ite_0=this.space.c_arbiters_true.head;!this.ite_0.elt.active;)this.ite_0=this.ite_0.next;for(;this.at_index_0!=n;)for(this.at_index_0++,this.ite_0=this.ite_0.next;!this.ite_0.elt.active;)this.ite_0=this.ite_0.next;t=this.ite_0.elt.wrapper()}else i=this.lengths[0];if(null==t)if(e<i+this.lengths[1]){var r=e-i;if(r<this.at_index_1||null==this.ite_1)for(this.at_index_1=0,this.ite_1=this.space.c_arbiters_false.head;!this.ite_1.elt.active;)this.ite_1=this.ite_1.next;for(;this.at_index_1!=r;)for(this.at_index_1++,this.ite_1=this.ite_1.next;!this.ite_1.elt.active;)this.ite_1=this.ite_1.next;t=this.ite_1.elt.wrapper()}else i+=this.lengths[1];if(null==t)if(e<i+this.lengths[2]){var o=e-i;if(o<this.at_index_2||null==this.ite_2)for(this.at_index_2=0,this.ite_2=this.space.f_arbiters.head;!this.ite_2.elt.active;)this.ite_2=this.ite_2.next;for(;this.at_index_2!=o;)for(this.at_index_2++,this.ite_2=this.ite_2.next;!this.ite_2.elt.active;)this.ite_2=this.ite_2.next;t=this.ite_2.elt.wrapper()}else i+=this.lengths[2];if(null==t)if(e<i+this.lengths[3]){var a=e-i;if(a<this.at_index_3||null==this.ite_3)for(this.at_index_3=0,this.ite_3=this.space.s_arbiters.head;!this.ite_3.elt.active;)this.ite_3=this.ite_3.next;for(;this.at_index_3!=a;)for(this.at_index_3++,this.ite_3=this.ite_3.next;!this.ite_3.elt.active;)this.ite_3=this.ite_3.next;t=this.ite_3.elt.wrapper()}else i+=this.lengths[3];return t},ft.prototype.__class__=ft;var Oo=zpp_nape.geom.ZPP_AABB=function(){this.wrap_max=null,this.maxy=0,this.maxx=0,this.wrap_min=null,this.miny=0,this.minx=0,this.next=null,this.outer=null,this._immutable=!1,this._validate=null,this._invalidate=null};Oo.__name__=["zpp_nape","geom","ZPP_AABB"],Oo.get=function(e,t,i,n){var r;return null==Oo.zpp_pool?r=new Oo:(r=Oo.zpp_pool,Oo.zpp_pool=r.next,r.next=null),r.minx=e,r.miny=t,r.maxx=i,r.maxy=n,r},Oo.prototype._invalidate=null,Oo.prototype._validate=null,Oo.prototype._immutable=null,Oo.prototype.validate=function(){null!=this._validate&&this._validate()},Oo.prototype.invalidate=function(){null!=this._invalidate&&this._invalidate(this)},Oo.prototype.outer=null,Oo.prototype.wrapper=function(){if(null==this.outer){this.outer=new N;var e=this.outer.zpp_inner;null!=e.outer&&(e.outer.zpp_inner=null,e.outer=null),e.wrap_min=e.wrap_max=null,e._invalidate=null,e._validate=null,e.next=Oo.zpp_pool,Oo.zpp_pool=e,this.outer.zpp_inner=this}return this.outer},Oo.prototype.next=null,Oo.prototype.alloc=function(){},Oo.prototype.free=function(){null!=this.outer&&(this.outer.zpp_inner=null,this.outer=null),this.wrap_min=this.wrap_max=null,this._invalidate=null,this._validate=null},Oo.prototype.copy=function(){var e,t=this.minx,i=this.miny,n=this.maxx,r=this.maxy;return null==Oo.zpp_pool?e=new Oo:(e=Oo.zpp_pool,Oo.zpp_pool=e.next,e.next=null),e.minx=t,e.miny=i,e.maxx=n,e.maxy=r,e},Oo.prototype.width=function(){return this.maxx-this.minx},Oo.prototype.height=function(){return this.maxy-this.miny},Oo.prototype.perimeter=function(){return 2*(this.maxx-this.minx+(this.maxy-this.miny))},Oo.prototype.minx=null,Oo.prototype.miny=null,Oo.prototype.wrap_min=null,Oo.prototype.getmin=function(){if(null==this.wrap_min){var e,t=this.minx,i=this.miny;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_min=e,this.wrap_min.zpp_inner._inuse=!0,this._immutable?this.wrap_min.zpp_inner._immutable=!0:this.wrap_min.zpp_inner._invalidate=$(this,this.mod_min),this.wrap_min.zpp_inner._validate=$(this,this.dom_min)}return this.wrap_min},Oo.prototype.dom_min=function(){null!=this._validate&&this._validate(),this.wrap_min.zpp_inner.x=this.minx,this.wrap_min.zpp_inner.y=this.miny},Oo.prototype.mod_min=function(e){e.x==this.minx&&e.y==this.miny||(this.minx=e.x,this.miny=e.y,null!=this._invalidate&&this._invalidate(this))},Oo.prototype.maxx=null,Oo.prototype.maxy=null,Oo.prototype.wrap_max=null,Oo.prototype.getmax=function(){if(null==this.wrap_max){var e,t=this.maxx,i=this.maxy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_max=e,this.wrap_max.zpp_inner._inuse=!0,this._immutable?this.wrap_max.zpp_inner._immutable=!0:this.wrap_max.zpp_inner._invalidate=$(this,this.mod_max),this.wrap_max.zpp_inner._validate=$(this,this.dom_max)}return this.wrap_max},Oo.prototype.dom_max=function(){null!=this._validate&&this._validate(),this.wrap_max.zpp_inner.x=this.maxx,this.wrap_max.zpp_inner.y=this.maxy},Oo.prototype.mod_max=function(e){e.x==this.maxx&&e.y==this.maxy||(this.maxx=e.x,this.maxy=e.y,null!=this._invalidate&&this._invalidate(this))},Oo.prototype.intersectX=function(e){return!(e.minx>this.maxx||this.minx>e.maxx)},Oo.prototype.intersectY=function(e){return!(e.miny>this.maxy||this.miny>e.maxy)},Oo.prototype.intersect=function(e){return e.miny<=this.maxy&&this.miny<=e.maxy&&e.minx<=this.maxx&&this.minx<=e.maxx},Oo.prototype.combine=function(e){e.minx<this.minx&&(this.minx=e.minx),e.maxx>this.maxx&&(this.maxx=e.maxx),e.miny<this.miny&&(this.miny=e.miny),e.maxy>this.maxy&&(this.maxy=e.maxy)},Oo.prototype.contains=function(e){return e.minx>=this.minx&&e.miny>=this.miny&&e.maxx<=this.maxx&&e.maxy<=this.maxy},Oo.prototype.containsPoint=function(e){return e.x>=this.minx&&e.x<=this.maxx&&e.y>=this.miny&&e.y<=this.maxy},Oo.prototype.setCombine=function(e,t){this.minx=e.minx<t.minx?e.minx:t.minx,this.miny=e.miny<t.miny?e.miny:t.miny,this.maxx=e.maxx>t.maxx?e.maxx:t.maxx,this.maxy=e.maxy>t.maxy?e.maxy:t.maxy},Oo.prototype.setExpand=function(e,t){this.minx=e.minx-t,this.miny=e.miny-t,this.maxx=e.maxx+t,this.maxy=e.maxy+t},Oo.prototype.setExpandPoint=function(e,t){e<this.minx&&(this.minx=e),e>this.maxx&&(this.maxx=e),t<this.miny&&(this.miny=t),t>this.maxy&&(this.maxy=t)},Oo.prototype.toString=function(){return"{ x: "+this.minx+" y: "+this.miny+" w: "+(this.maxx-this.minx)+" h: "+(this.maxy-this.miny)+" }"},Oo.prototype.__class__=Oo;var vt=zpp_nape.util.ZNPList_ZPP_Vec2=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};vt.__name__=["zpp_nape","util","ZNPList_ZPP_Vec2"],vt.prototype.head=null,vt.prototype.begin=function(){return this.head},vt.prototype.modified=null,vt.prototype.pushmod=null,vt.prototype.length=null,vt.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},vt.prototype.add=function(e){var t;null==on.zpp_pool?t=new on:(t=on.zpp_pool,on.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},vt.prototype.inlined_add=function(e){var t;null==on.zpp_pool?t=new on:(t=on.zpp_pool,on.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},vt.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},vt.prototype.insert=function(e,t){var i;null==on.zpp_pool?i=new on:(i=on.zpp_pool,on.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},vt.prototype.inlined_insert=function(e,t){var i;null==on.zpp_pool?i=new on:(i=on.zpp_pool,on.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},vt.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=on.zpp_pool,on.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},vt.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=on.zpp_pool,on.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},vt.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},vt.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},vt.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=on.zpp_pool,on.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},vt.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},vt.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=on.zpp_pool,on.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},vt.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=on.zpp_pool,on.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},vt.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=on.zpp_pool,on.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},vt.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=on.zpp_pool,on.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},vt.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},vt.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=on.zpp_pool,on.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},vt.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=on.zpp_pool,on.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},vt.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},vt.prototype.empty=function(){return null==this.head},vt.prototype.size=function(){return this.length},vt.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},vt.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},vt.prototype.front=function(){return this.head.elt},vt.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},vt.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},vt.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},vt.prototype.__class__=vt;var $s=zpp_nape.geom.ZPP_Collide=function(){};$s.__name__=["zpp_nape","geom","ZPP_Collide"],$s.circleContains=function(e,t){var i,n;return(i=t.x-e.worldCOMx)*i+(n=t.y-e.worldCOMy)*n<e.radius*e.radius},$s.polyContains=function(e,t){var i;i=!0;for(var n=e.edges.head;null!=n;){var r=n.elt;if(!(r.gnormx*t.x+r.gnormy*t.y<=r.gprojection)){i=!1;break}n=n.next}return i},$s.shapeContains=function(e,t){return 0==e.type?$s.circleContains(e.circle,t):$s.polyContains(e.polygon,t)},$s.bodyContains=function(e,t){var i;i=!1;for(var n=e.shapes.head;null!=n;){if($s.shapeContains(n.elt,t)){i=!0;break}n=n.next}return i},$s.containTest=function(e,t){var i=e.aabb,n=t.aabb;if(n.minx>=i.minx&&n.miny>=i.miny&&n.maxx<=i.maxx&&n.maxy<=i.maxy){if(0==e.type){if(0==t.type){var r,o,a=e.circle.radius+-t.circle.radius;return(r=t.circle.worldCOMx-e.circle.worldCOMx)*r+(o=t.circle.worldCOMy-e.circle.worldCOMy)*o<=a*a}var s;s=!0;for(var p=t.polygon.gverts.next;null!=p;){var l,h,u=p,d=e.circle.radius;if(!((l=u.x-e.circle.worldCOMx)*l+(h=u.y-e.circle.worldCOMy)*h<=d*d)){s=!1;break}p=p.next}return s}if(0==t.type){var c;c=!0;for(var _=e.polygon.edges.head;null!=_;){var y=_.elt;if(!(y.gnormx*t.circle.worldCOMx+y.gnormy*t.circle.worldCOMy+t.circle.radius<=y.gprojection)){c=!1;break}_=_.next}return c}var x;x=!0;for(var m=e.polygon.edges.head;null!=m;){for(var g=m.elt,f=-1e100,v=t.polygon.gverts.next;null!=v;){var z=v,w=g.gnormx*z.x+g.gnormy*z.y;f<w&&(f=w),v=v.next}if(!(f<=g.gprojection)){x=!1;break}m=m.next}return x}return!1},$s.contactCollide=function(e,t,i,n){if(1==t.type){if(1==e.type){for(var r=!0,o=-1e100,a=-1,s=null,p=null,l=e.polygon.edges.head;null!=l;){for(var h=l.elt,u=1e100,d=t.polygon.gverts.next;null!=d;){var c=d,_=h.gnormx*c.x+h.gnormy*c.y;if(_<u&&(u=_),u-h.gprojection<=o)break;d=d.next}if(0<=(u-=h.gprojection)){r=!1;break}o<u&&(o=u,s=h,a=1),l=l.next}if(r){for(var y=t.polygon.edges.head;null!=y;){for(var x=y.elt,m=1e100,g=e.polygon.gverts.next;null!=g;){var f=g,v=x.gnormx*f.x+x.gnormy*f.y;if(v<m&&(m=v),m-x.gprojection<=o)break;g=g.next}if(0<=(m-=x.gprojection)){r=!1;break}o<m&&(o=m,p=x,a=2),y=y.next}if(r){var z,w,b;b=1==a?(z=t.polygon,w=s,1):(z=e.polygon,w=p,-1);for(var S=null,C=1e100,M=z.edges.head;null!=M;){var P=M.elt,k=w.gnormx*P.gnormx+w.gnormy*P.gnormy;k<C&&(C=k,S=P),M=M.next}var T=0,A=0;T=S.gp0.x,A=S.gp0.y;var O,E,G=0,D=0;O=(G=S.gp1.x)-T,E=(D=S.gp1.y)-A;var I=w.gnormy*T-w.gnormx*A,L=w.gnormy*G-w.gnormx*D,B=1/(L-I),R=(-w.tp1-I)*B;R>Qs.epsilon&&(T+=O*R,A+=E*R);var F=(-w.tp0-L)*B;F<-Qs.epsilon&&(G+=O*F,D+=E*F);var j=0,N=0,U=b;j=w.gnormx*U,N=w.gnormy*U,i.lnormx=w.lnormx,i.lnormy=w.lnormy,i.lproj=w.lprojection,i.radius=0,i.rev=n!=(-1==b),i.ptype=i.rev?1:0;var V=T*w.gnormx+A*w.gnormy-w.gprojection,H=G*w.gnormx+D*w.gnormy-w.gprojection;if(0<V&&0<H)return!1;n&&(j=-j,N=-N);for(var W=T-w.gnormx*V*.5,q=A-w.gnormy*V*.5,X=i.rev?1:0,Y=null,K=i.contacts.next;null!=K;){var Z=K;if(X==Z.hash){Y=Z;break}K=K.next}if(null==Y){null==qo.zpp_pool?Y=new qo:(Y=qo.zpp_pool,qo.zpp_pool=Y.next,Y.next=null);var J=Y.inner;J.jnAcc=J.jtAcc=0,Y.hash=X,Y.fresh=!0,(Y.arbiter=i).jrAcc=0;var Q=i.contacts;Y._inuse=!0;var $=Y;$.next=Q.next,Q.next=$,Q.modified=!0,Q.length++,i.innards.add(J)}else Y.fresh=!1;Y.px=W,Y.py=q,i.nx=j,i.ny=N,Y.dist=V,Y.stamp=i.stamp,Y.posOnly=0<V;var ee=Y;T-=z.body.posx,A-=z.body.posy,ee.inner.lr1x=T*z.body.axisy+A*z.body.axisx,ee.inner.lr1y=A*z.body.axisy-T*z.body.axisx;for(var te=G-w.gnormx*H*.5,ie=D-w.gnormy*H*.5,ne=i.rev?0:1,re=null,oe=i.contacts.next;null!=oe;){var ae=oe;if(ne==ae.hash){re=ae;break}oe=oe.next}if(null==re){null==qo.zpp_pool?re=new qo:(re=qo.zpp_pool,qo.zpp_pool=re.next,re.next=null);var se=re.inner;se.jnAcc=se.jtAcc=0,re.hash=ne,re.fresh=!0,(re.arbiter=i).jrAcc=0;var pe=i.contacts;re._inuse=!0;var le=re;le.next=pe.next,pe.next=le,pe.modified=!0,pe.length++,i.innards.add(se)}else re.fresh=!1;return re.px=te,re.py=ie,i.nx=j,i.ny=N,re.dist=H,re.stamp=i.stamp,re.posOnly=0<H,ee=re,G-=z.body.posx,D-=z.body.posy,ee.inner.lr1x=G*z.body.axisy+D*z.body.axisx,ee.inner.lr1y=D*z.body.axisy-G*z.body.axisx,1==a?(i.__ref_edge1=w,i.__ref_edge2=S):(i.__ref_edge2=w,i.__ref_edge1=S),!0}return!1}return!1}for(var he=-1e100,ue=!0,de=null,ce=null,_e=t.polygon.gverts.next,ye=t.polygon.edges.head;null!=ye;){var xe=ye.elt,me=xe.gnormx*e.circle.worldCOMx+xe.gnormy*e.circle.worldCOMy-xe.gprojection-e.circle.radius;if(0<me){ue=!1;break}he<me&&(he=me,de=xe,ce=_e),_e=_e.next,ye=ye.next}if(ue){var ge=ce,fe=null==ce.next?t.polygon.gverts.next:ce.next,ve=e.circle.worldCOMy*de.gnormx-e.circle.worldCOMx*de.gnormy;if(ve<=ge.y*de.gnormx-ge.x*de.gnormy){var ze,we,be,Se=e.circle.radius,Ce=(ze=ge.x-e.circle.worldCOMx)*ze+(we=ge.y-e.circle.worldCOMy)*we;if(Se*Se<Ce)be=null;else if(Ce<Qs.epsilon*Qs.epsilon){for(var Me=e.circle.worldCOMx,Pe=e.circle.worldCOMy,ke=null,Te=i.contacts.next;null!=Te;){var Ae=Te;if(0==Ae.hash){ke=Ae;break}Te=Te.next}if(null==ke){null==qo.zpp_pool?ke=new qo:(ke=qo.zpp_pool,qo.zpp_pool=ke.next,ke.next=null);var Oe=ke.inner;Oe.jnAcc=Oe.jtAcc=0,ke.hash=0,ke.fresh=!0,(ke.arbiter=i).jrAcc=0;var Ee=i.contacts;ke._inuse=!0;var Ge=ke;Ge.next=Ee.next,Ee.next=Ge,Ee.modified=!0,Ee.length++,i.innards.add(Oe)}else ke.fresh=!1;ke.px=Me,ke.py=Pe,i.nx=1,i.ny=0,ke.dist=-Se,ke.stamp=i.stamp,ke.posOnly=!1,be=ke}else{var De=1/Math.sqrt(Ce),Ie=De<Qs.epsilon?1e100:1/De,Le=.5+(e.circle.radius-.5*Se)*De;if(n){for(var Be=e.circle.worldCOMx+ze*Le,Re=e.circle.worldCOMy+we*Le,Fe=null,je=i.contacts.next;null!=je;){var Ne=je;if(0==Ne.hash){Fe=Ne;break}je=je.next}if(null==Fe){null==qo.zpp_pool?Fe=new qo:(Fe=qo.zpp_pool,qo.zpp_pool=Fe.next,Fe.next=null);var Ue=Fe.inner;Ue.jnAcc=Ue.jtAcc=0,Fe.hash=0,Fe.fresh=!0,(Fe.arbiter=i).jrAcc=0;var Ve=i.contacts;Fe._inuse=!0;var He=Fe;He.next=Ve.next,Ve.next=He,Ve.modified=!0,Ve.length++,i.innards.add(Ue)}else Fe.fresh=!1;Fe.px=Be,Fe.py=Re,i.nx=-ze*De,i.ny=-we*De,Fe.dist=Ie-Se,Fe.stamp=i.stamp,Fe.posOnly=!1,be=Fe}else{for(var We=e.circle.worldCOMx+ze*Le,qe=e.circle.worldCOMy+we*Le,Xe=null,Ye=i.contacts.next;null!=Ye;){var Ke=Ye;if(0==Ke.hash){Xe=Ke;break}Ye=Ye.next}if(null==Xe){null==qo.zpp_pool?Xe=new qo:(Xe=qo.zpp_pool,qo.zpp_pool=Xe.next,Xe.next=null);var Ze=Xe.inner;Ze.jnAcc=Ze.jtAcc=0,Xe.hash=0,Xe.fresh=!0,(Xe.arbiter=i).jrAcc=0;var Je=i.contacts;Xe._inuse=!0;var Qe=Xe;Qe.next=Je.next,Je.next=Qe,Je.modified=!0,Je.length++,i.innards.add(Ze)}else Xe.fresh=!1;Xe.px=We,Xe.py=qe,i.nx=ze*De,i.ny=we*De,Xe.dist=Ie-Se,Xe.stamp=i.stamp,Xe.posOnly=!1,be=Xe}}if(null!=be){var $e=be.inner;i.ptype=2;var et,tt;et=ge.x-t.polygon.body.posx,tt=ge.y-t.polygon.body.posy,i.__ref_edge1=de,i.__ref_vertex=-1,n?($e.lr1x=et*t.polygon.body.axisy+tt*t.polygon.body.axisx,$e.lr1y=tt*t.polygon.body.axisy-et*t.polygon.body.axisx,$e.lr2x=e.circle.localCOMx,$e.lr2y=e.circle.localCOMy):($e.lr2x=et*t.polygon.body.axisy+tt*t.polygon.body.axisx,$e.lr2y=tt*t.polygon.body.axisy-et*t.polygon.body.axisx,$e.lr1x=e.circle.localCOMx,$e.lr1y=e.circle.localCOMy),i.radius=e.circle.radius}return null!=be}if(ve>=fe.y*de.gnormx-fe.x*de.gnormy){var it,nt,rt,ot=e.circle.radius,at=(it=fe.x-e.circle.worldCOMx)*it+(nt=fe.y-e.circle.worldCOMy)*nt;if(ot*ot<at)rt=null;else if(at<Qs.epsilon*Qs.epsilon){for(var st=e.circle.worldCOMx,pt=e.circle.worldCOMy,lt=null,ht=i.contacts.next;null!=ht;){var ut=ht;if(0==ut.hash){lt=ut;break}ht=ht.next}if(null==lt){null==qo.zpp_pool?lt=new qo:(lt=qo.zpp_pool,qo.zpp_pool=lt.next,lt.next=null);var dt=lt.inner;dt.jnAcc=dt.jtAcc=0,lt.hash=0,lt.fresh=!0,(lt.arbiter=i).jrAcc=0;var ct=i.contacts;lt._inuse=!0;var _t=lt;_t.next=ct.next,ct.next=_t,ct.modified=!0,ct.length++,i.innards.add(dt)}else lt.fresh=!1;lt.px=st,lt.py=pt,i.nx=1,i.ny=0,lt.dist=-ot,lt.stamp=i.stamp,lt.posOnly=!1,rt=lt}else{var yt=1/Math.sqrt(at),xt=yt<Qs.epsilon?1e100:1/yt,mt=.5+(e.circle.radius-.5*ot)*yt;if(n){for(var gt=e.circle.worldCOMx+it*mt,ft=e.circle.worldCOMy+nt*mt,vt=null,zt=i.contacts.next;null!=zt;){var wt=zt;if(0==wt.hash){vt=wt;break}zt=zt.next}if(null==vt){null==qo.zpp_pool?vt=new qo:(vt=qo.zpp_pool,qo.zpp_pool=vt.next,vt.next=null);var bt=vt.inner;bt.jnAcc=bt.jtAcc=0,vt.hash=0,vt.fresh=!0,(vt.arbiter=i).jrAcc=0;var St=i.contacts;vt._inuse=!0;var Ct=vt;Ct.next=St.next,St.next=Ct,St.modified=!0,St.length++,i.innards.add(bt)}else vt.fresh=!1;vt.px=gt,vt.py=ft,i.nx=-it*yt,i.ny=-nt*yt,vt.dist=xt-ot,vt.stamp=i.stamp,vt.posOnly=!1,rt=vt}else{for(var Mt=e.circle.worldCOMx+it*mt,Pt=e.circle.worldCOMy+nt*mt,kt=null,Tt=i.contacts.next;null!=Tt;){var At=Tt;if(0==At.hash){kt=At;break}Tt=Tt.next}if(null==kt){null==qo.zpp_pool?kt=new qo:(kt=qo.zpp_pool,qo.zpp_pool=kt.next,kt.next=null);var Ot=kt.inner;Ot.jnAcc=Ot.jtAcc=0,kt.hash=0,kt.fresh=!0,(kt.arbiter=i).jrAcc=0;var Et=i.contacts;kt._inuse=!0;var Gt=kt;Gt.next=Et.next,Et.next=Gt,Et.modified=!0,Et.length++,i.innards.add(Ot)}else kt.fresh=!1;kt.px=Mt,kt.py=Pt,i.nx=it*yt,i.ny=nt*yt,kt.dist=xt-ot,kt.stamp=i.stamp,kt.posOnly=!1,rt=kt}}if(null!=rt){var Dt=rt.inner;i.ptype=2;var It,Lt;It=fe.x-t.polygon.body.posx,Lt=fe.y-t.polygon.body.posy,i.__ref_edge1=de,i.__ref_vertex=1,n?(Dt.lr1x=It*t.polygon.body.axisy+Lt*t.polygon.body.axisx,Dt.lr1y=Lt*t.polygon.body.axisy-It*t.polygon.body.axisx,Dt.lr2x=e.circle.localCOMx,Dt.lr2y=e.circle.localCOMy):(Dt.lr2x=It*t.polygon.body.axisy+Lt*t.polygon.body.axisx,Dt.lr2y=Lt*t.polygon.body.axisy-It*t.polygon.body.axisx,Dt.lr1x=e.circle.localCOMx,Dt.lr1y=e.circle.localCOMy),i.radius=e.circle.radius}return null!=rt}var Bt,Rt,Ft=e.circle.radius+.5*he;Bt=de.gnormx*Ft,Rt=de.gnormy*Ft;var jt,Nt,Ut;if(jt=e.circle.worldCOMx-Bt,Nt=e.circle.worldCOMy-Rt,n){for(var Vt=de.gnormx,Ht=de.gnormy,Wt=null,qt=i.contacts.next;null!=qt;){var Xt=qt;if(0==Xt.hash){Wt=Xt;break}qt=qt.next}if(null==Wt){null==qo.zpp_pool?Wt=new qo:(Wt=qo.zpp_pool,qo.zpp_pool=Wt.next,Wt.next=null);var Yt=Wt.inner;Yt.jnAcc=Yt.jtAcc=0,Wt.hash=0,Wt.fresh=!0,(Wt.arbiter=i).jrAcc=0;var Kt=i.contacts;Wt._inuse=!0;var Zt=Wt;Zt.next=Kt.next,Kt.next=Zt,Kt.modified=!0,Kt.length++,i.innards.add(Yt)}else Wt.fresh=!1;Wt.px=jt,Wt.py=Nt,i.nx=Vt,i.ny=Ht,Wt.dist=he,Wt.stamp=i.stamp,Wt.posOnly=!1,Ut=Wt}else{for(var Jt=-de.gnormx,Qt=-de.gnormy,$t=null,ei=i.contacts.next;null!=ei;){var ti=ei;if(0==ti.hash){$t=ti;break}ei=ei.next}if(null==$t){null==qo.zpp_pool?$t=new qo:($t=qo.zpp_pool,qo.zpp_pool=$t.next,$t.next=null);var ii=$t.inner;ii.jnAcc=ii.jtAcc=0,$t.hash=0,$t.fresh=!0,($t.arbiter=i).jrAcc=0;var ni=i.contacts;$t._inuse=!0;var ri=$t;ri.next=ni.next,ni.next=ri,ni.modified=!0,ni.length++,i.innards.add(ii)}else $t.fresh=!1;$t.px=jt,$t.py=Nt,i.nx=Jt,i.ny=Qt,$t.dist=he,$t.stamp=i.stamp,$t.posOnly=!1,Ut=$t}return i.ptype=n?0:1,i.lnormx=de.lnormx,i.lnormy=de.lnormy,i.rev=!n,i.lproj=de.lprojection,i.radius=e.circle.radius,Ut.inner.lr1x=e.circle.localCOMx,Ut.inner.lr1y=e.circle.localCOMy,i.__ref_edge1=de,!(i.__ref_vertex=0)}return!1}var oi,ai,si,pi=e.circle.radius+t.circle.radius,li=(oi=t.circle.worldCOMx-e.circle.worldCOMx)*oi+(ai=t.circle.worldCOMy-e.circle.worldCOMy)*ai;if(pi*pi<li)si=null;else if(li<Qs.epsilon*Qs.epsilon){for(var hi=e.circle.worldCOMx,ui=e.circle.worldCOMy,di=null,ci=i.contacts.next;null!=ci;){var _i=ci;if(0==_i.hash){di=_i;break}ci=ci.next}if(null==di){null==qo.zpp_pool?di=new qo:(di=qo.zpp_pool,qo.zpp_pool=di.next,di.next=null);var yi=di.inner;yi.jnAcc=yi.jtAcc=0,di.hash=0,di.fresh=!0,(di.arbiter=i).jrAcc=0;var xi=i.contacts;di._inuse=!0;var mi=di;mi.next=xi.next,xi.next=mi,xi.modified=!0,xi.length++,i.innards.add(yi)}else di.fresh=!1;di.px=hi,di.py=ui,i.nx=1,i.ny=0,di.dist=-pi,di.stamp=i.stamp,di.posOnly=!1,si=di}else{var gi=1/Math.sqrt(li),fi=gi<Qs.epsilon?1e100:1/gi,vi=.5+(e.circle.radius-.5*pi)*gi;if(n){for(var zi=e.circle.worldCOMx+oi*vi,wi=e.circle.worldCOMy+ai*vi,bi=null,Si=i.contacts.next;null!=Si;){var Ci=Si;if(0==Ci.hash){bi=Ci;break}Si=Si.next}if(null==bi){null==qo.zpp_pool?bi=new qo:(bi=qo.zpp_pool,qo.zpp_pool=bi.next,bi.next=null);var Mi=bi.inner;Mi.jnAcc=Mi.jtAcc=0,bi.hash=0,bi.fresh=!0,(bi.arbiter=i).jrAcc=0;var Pi=i.contacts;bi._inuse=!0;var ki=bi;ki.next=Pi.next,Pi.next=ki,Pi.modified=!0,Pi.length++,i.innards.add(Mi)}else bi.fresh=!1;bi.px=zi,bi.py=wi,i.nx=-oi*gi,i.ny=-ai*gi,bi.dist=fi-pi,bi.stamp=i.stamp,bi.posOnly=!1,si=bi}else{for(var Ti=e.circle.worldCOMx+oi*vi,Ai=e.circle.worldCOMy+ai*vi,Oi=null,Ei=i.contacts.next;null!=Ei;){var Gi=Ei;if(0==Gi.hash){Oi=Gi;break}Ei=Ei.next}if(null==Oi){null==qo.zpp_pool?Oi=new qo:(Oi=qo.zpp_pool,qo.zpp_pool=Oi.next,Oi.next=null);var Di=Oi.inner;Di.jnAcc=Di.jtAcc=0,Oi.hash=0,Oi.fresh=!0,(Oi.arbiter=i).jrAcc=0;var Ii=i.contacts;Oi._inuse=!0;var Li=Oi;Li.next=Ii.next,Ii.next=Li,Ii.modified=!0,Ii.length++,i.innards.add(Di)}else Oi.fresh=!1;Oi.px=Ti,Oi.py=Ai,i.nx=oi*gi,i.ny=ai*gi,Oi.dist=fi-pi,Oi.stamp=i.stamp,Oi.posOnly=!1,si=Oi}}if(null==si)return!1;var Bi=si.inner;return n?(Bi.lr1x=t.circle.localCOMx,Bi.lr1y=t.circle.localCOMy,Bi.lr2x=e.circle.localCOMx,Bi.lr2y=e.circle.localCOMy):(Bi.lr1x=e.circle.localCOMx,Bi.lr1y=e.circle.localCOMy,Bi.lr2x=t.circle.localCOMx,Bi.lr2y=t.circle.localCOMy),i.radius=e.circle.radius+t.circle.radius,i.ptype=2,!0},$s.testCollide_safe=function(e,t){if(0==t.type){var i=e;e=t,t=i}return $s.testCollide(e,t)},$s.testCollide=function(e,t){if(1==t.type){if(1==e.type){for(var i=!0,n=e.polygon.edges.head;null!=n;){for(var r=n.elt,o=1e100,a=t.polygon.gverts.next;null!=a;){var s=a,p=r.gnormx*s.x+r.gnormy*s.y;p<o&&(o=p),a=a.next}if(0<(o-=r.gprojection)){i=!1;break}n=n.next}if(i){for(var l=t.polygon.edges.head;null!=l;){for(var h=l.elt,u=1e100,d=e.polygon.gverts.next;null!=d;){var c=d,_=h.gnormx*c.x+h.gnormy*c.y;_<u&&(u=_),d=d.next}if(0<(u-=h.gprojection)){i=!1;break}l=l.next}return i}return!1}for(var y=null,x=null,m=!0,g=-1e100,f=t.polygon.gverts.next,v=t.polygon.edges.head;null!=v;){var z=v.elt,w=z.gnormx*e.circle.worldCOMx+z.gnormy*e.circle.worldCOMy-z.gprojection-e.circle.radius;if(0<w){m=!1;break}g<w&&(g=w,y=z,x=f),f=f.next,v=v.next}if(m){var b=x,S=null==x.next?t.polygon.gverts.next:x.next,C=e.circle.worldCOMy*y.gnormx-e.circle.worldCOMx*y.gnormy;if(C<=b.y*y.gnormx-b.x*y.gnormy){var M,P,k=e.circle.radius;return(M=b.x-e.circle.worldCOMx)*M+(P=b.y-e.circle.worldCOMy)*P<=k*k}if(C>=S.y*y.gnormx-S.x*y.gnormy){var T,A,O=e.circle.radius;return(T=S.x-e.circle.worldCOMx)*T+(A=S.y-e.circle.worldCOMy)*A<=O*O}return!0}return!1}var E,G,D=e.circle.radius+t.circle.radius;return(E=t.circle.worldCOMx-e.circle.worldCOMx)*E+(G=t.circle.worldCOMy-e.circle.worldCOMy)*G<=D*D},$s.flowCollide=function(e,t,i){if(1==t.type){if(1==e.type){for(var n=[],r=[],o=!0,a=!0,s=e.polygon.edges.head;null!=s;){for(var p=s.elt,l=1e100,h=0,u=t.polygon.gverts.next;null!=u;){var d=u,c=p.gnormx*d.x+p.gnormy*d.y;c<l&&(l=c),c>=p.gprojection+Qs.epsilon&&(a=!(r[h]=!0)),++h,u=u.next}if(0<(l-=p.gprojection)){o=!1;break}s=s.next}if(a){var _=t.polygon;if(_.zip_worldCOM&&null!=_.body){if(_.zip_worldCOM=!1,_.zip_localCOM){if(_.zip_localCOM=!1,1==_.type){var y=_.polygon;if(null==y.lverts.next.next)y.localCOMx=y.lverts.next.x,y.localCOMy=y.lverts.next.y;else if(null==y.lverts.next.next.next)y.localCOMx=y.lverts.next.x,y.localCOMy=y.lverts.next.y,y.localCOMx+=y.lverts.next.next.x,y.localCOMy+=y.lverts.next.next.y,y.localCOMx*=.5,y.localCOMy*=.5;else{y.localCOMx=0;var x=y.localCOMy=0,m=y.lverts.next,g=m,f=m=m.next;for(m=m.next;null!=m;){var v=m;x+=f.x*(v.y-g.y);var z=v.y*f.x-v.x*f.y;y.localCOMx+=(f.x+v.x)*z,y.localCOMy+=(f.y+v.y)*z,g=f,f=v,m=m.next}var w=m=y.lverts.next;x+=f.x*(w.y-g.y);var b=w.y*f.x-w.x*f.y;y.localCOMx+=(f.x+w.x)*b,y.localCOMy+=(f.y+w.y)*b,g=f;var S=m=m.next;x+=w.x*(S.y-g.y);var C=S.y*w.x-S.x*w.y;y.localCOMx+=(w.x+S.x)*C,y.localCOMy+=(w.y+S.y)*C;var M=x=1/(3*x);y.localCOMx*=M,y.localCOMy*=M}}null!=_.wrap_localCOM&&(_.wrap_localCOM.zpp_inner.x=_.localCOMx,_.wrap_localCOM.zpp_inner.y=_.localCOMy)}var P=_.body;P.zip_axis&&(P.zip_axis=!1,P.axisx=Math.sin(P.rot),P.axisy=Math.cos(P.rot)),_.worldCOMx=_.body.posx+(_.body.axisy*_.localCOMx-_.body.axisx*_.localCOMy),_.worldCOMy=_.body.posy+(_.localCOMx*_.body.axisx+_.localCOMy*_.body.axisy)}var k=t.polygon.area,T=t.polygon.worldCOMx,A=t.polygon.worldCOMy;return i.overlap=k,i.centroidx=T,i.centroidy=A,!0}if(o){a=!0;for(var O=t.polygon.edges.head;null!=O;){for(var E=O.elt,G=1e100,D=0,I=e.polygon.gverts.next;null!=I;){var L=I,B=E.gnormx*L.x+E.gnormy*L.y;B<G&&(G=B),B>=E.gprojection+Qs.epsilon&&(a=!(n[D]=!0)),++D,I=I.next}if(0<(G-=E.gprojection)){o=!1;break}O=O.next}if(a){var R=e.polygon;if(R.zip_worldCOM&&null!=R.body){if(R.zip_worldCOM=!1,R.zip_localCOM){if(R.zip_localCOM=!1,1==R.type){var F=R.polygon;if(null==F.lverts.next.next)F.localCOMx=F.lverts.next.x,F.localCOMy=F.lverts.next.y;else if(null==F.lverts.next.next.next)F.localCOMx=F.lverts.next.x,F.localCOMy=F.lverts.next.y,F.localCOMx+=F.lverts.next.next.x,F.localCOMy+=F.lverts.next.next.y,F.localCOMx*=.5,F.localCOMy*=.5;else{F.localCOMx=0;var j=F.localCOMy=0,N=F.lverts.next,U=N,V=N=N.next;for(N=N.next;null!=N;){var H=N;j+=V.x*(H.y-U.y);var W=H.y*V.x-H.x*V.y;F.localCOMx+=(V.x+H.x)*W,F.localCOMy+=(V.y+H.y)*W,U=V,V=H,N=N.next}var q=N=F.lverts.next;j+=V.x*(q.y-U.y);var X=q.y*V.x-q.x*V.y;F.localCOMx+=(V.x+q.x)*X,F.localCOMy+=(V.y+q.y)*X,U=V;var Y=N=N.next;j+=q.x*(Y.y-U.y);var K=Y.y*q.x-Y.x*q.y;F.localCOMx+=(q.x+Y.x)*K,F.localCOMy+=(q.y+Y.y)*K;var Z=j=1/(3*j);F.localCOMx*=Z,F.localCOMy*=Z}}null!=R.wrap_localCOM&&(R.wrap_localCOM.zpp_inner.x=R.localCOMx,R.wrap_localCOM.zpp_inner.y=R.localCOMy)}var J=R.body;J.zip_axis&&(J.zip_axis=!1,J.axisx=Math.sin(J.rot),J.axisy=Math.cos(J.rot)),R.worldCOMx=R.body.posx+(R.body.axisy*R.localCOMx-R.body.axisx*R.localCOMy),R.worldCOMy=R.body.posy+(R.localCOMx*R.body.axisx+R.localCOMy*R.body.axisy)}var Q=e.polygon.area,$=e.polygon.worldCOMx,ee=e.polygon.worldCOMy;return i.overlap=Q,i.centroidx=$,i.centroidy=ee,!0}if(o){for(;null!=$s.flowpoly.head;){var te=$s.flowpoly.pop_unsafe();te._inuse||(null!=te.outer&&(te.outer.zpp_inner=null,te.outer=null),te._isimmutable=null,te._validate=null,te._invalidate=null,te.next=ep.zpp_pool,ep.zpp_pool=te)}for(var ie=null,ne=!1,re=e.polygon.gverts.next,oe=0,ae=t.polygon.gverts.next,se=0,pe=0,le=t.polygon.edgeCnt;pe<le;){var he=pe++;if(!r[he]){se=he;break}ae=ae.next}if(null==ae){ae=t.polygon.gverts.next,ne=!0;for(var ue=0,de=e.polygon.edgeCnt;ue<de;){var ce=ue++;if(!n[ce]){oe=ce;break}re=re.next}null==re?re=e.polygon.gverts.next:($s.flowpoly.add(re),ie=$s.flowpoly.head.elt)}else $s.flowpoly.add(ae),ie=$s.flowpoly.head.elt;var _e=1;if(null==$s.flowpoly.head){for(var ye=!0,xe=e.polygon.gverts.next,me=xe,ge=xe.next;null!=ge;){for(var fe=ge,ve=2,ze=t.polygon.gverts.next,we=ze,be=ze.next;null!=be;){var Se,Ce,Me=be,Pe=0;Se=me.x-we.x,Ce=me.y-we.y;var ke,Te;ke=fe.x-me.x;var Ae,Oe,Ee,Ge=(Te=fe.y-me.y)*(Ae=Me.x-we.x)-ke*(Oe=Me.y-we.y);if(Ge*Ge>Qs.epsilon*Qs.epsilon){var De=(Oe*Se-Ae*Ce)*(Ge=1/Ge);if(De>Qs.epsilon&&De<1-Qs.epsilon){var Ie=(Te*Se-ke*Ce)*Ge;Ee=Ie>Qs.epsilon&&Ie<1-Qs.epsilon&&(Pe=De,!0)}else Ee=!1}else Ee=!1;Ee&&Pe<ve&&(ve=Pe,ae=ze),we=Me,be=(ze=be).next}for(;;){var Le,Be,Re=be=t.polygon.gverts.next,Fe=0;Le=me.x-we.x,Be=me.y-we.y;var je,Ne;je=fe.x-me.x;var Ue,Ve,He,We=(Ne=fe.y-me.y)*(Ue=Re.x-we.x)-je*(Ve=Re.y-we.y);if(We*We>Qs.epsilon*Qs.epsilon){var qe=(Ve*Le-Ue*Be)*(We=1/We);if(qe>Qs.epsilon&&qe<1-Qs.epsilon){var Xe=(Ne*Le-je*Be)*We;He=Xe>Qs.epsilon&&Xe<1-Qs.epsilon&&(Fe=qe,!0)}else He=!1}else He=!1;He&&Fe<ve&&(ve=Fe,ae=ze);break}if(2!=ve){var Ye,Ke,Ze,Je=ve;Ye=me.x+(fe.x-me.x)*Je,Ke=me.y+(fe.y-me.y)*Je,null==ep.zpp_pool?Ze=new ep:(Ze=ep.zpp_pool,ep.zpp_pool=Ze.next,Ze.next=null),Ze.weak=!1,Ze._immutable=!1,Ze.x=Ye,Ze.y=Ke,ie=Ze,$s.flowpoly.add(ie),re=xe,ye=!(ne=!0);break}me=fe,ge=(xe=ge).next}if(ye)for(;;){for(var Qe=ge=e.polygon.gverts.next,$e=2,et=t.polygon.gverts.next,tt=et,it=et.next;null!=it;){var nt,rt,ot=it,at=0;nt=me.x-tt.x,rt=me.y-tt.y;var st,pt;st=Qe.x-me.x;var lt,ht,ut,dt=(pt=Qe.y-me.y)*(lt=ot.x-tt.x)-st*(ht=ot.y-tt.y);if(dt*dt>Qs.epsilon*Qs.epsilon){var ct=(ht*nt-lt*rt)*(dt=1/dt);if(ct>Qs.epsilon&&ct<1-Qs.epsilon){var _t=(pt*nt-st*rt)*dt;ut=_t>Qs.epsilon&&_t<1-Qs.epsilon&&(at=ct,!0)}else ut=!1}else ut=!1;ut&&at<$e&&($e=at,ae=et),tt=ot,it=(et=it).next}for(;;){var yt,xt,mt=it=t.polygon.gverts.next,gt=0;yt=me.x-tt.x,xt=me.y-tt.y;var ft,vt;ft=Qe.x-me.x;var zt,wt,bt,St=(vt=Qe.y-me.y)*(zt=mt.x-tt.x)-ft*(wt=mt.y-tt.y);if(St*St>Qs.epsilon*Qs.epsilon){var Ct=(wt*yt-zt*xt)*(St=1/St);if(Ct>Qs.epsilon&&Ct<1-Qs.epsilon){var Mt=(vt*yt-ft*xt)*St;bt=Mt>Qs.epsilon&&Mt<1-Qs.epsilon&&(gt=Ct,!0)}else bt=!1}else bt=!1;bt&&gt<$e&&($e=gt,ae=et);break}if(2==$e)break;var Pt,kt,Tt,At=$e;Pt=me.x+(Qe.x-me.x)*At,kt=me.y+(Qe.y-me.y)*At,null==ep.zpp_pool?Tt=new ep:(Tt=ep.zpp_pool,ep.zpp_pool=Tt.next,Tt.next=null),Tt.weak=!1,Tt._immutable=!1,Tt.x=Pt,Tt.y=kt,ie=Tt,$s.flowpoly.add(ie),ne=!0,re=xe;break}_e=2}for(;;)if(ne)if(++oe,null==(re=re.next)&&(re=e.polygon.gverts.next,oe=0),n[oe]){var Ot=$s.flowpoly.head.elt,Et=re,Gt=ae,Dt=ae.next;null==Dt&&(Dt=t.polygon.gverts.next);for(var It=-1,Lt=null,Bt=0,Rt=0,Ft=Dt,jt=Dt;;){var Nt,Ut,Vt=jt,Ht=0;Nt=Gt.x-Ot.x,Ut=Gt.y-Ot.y;var Wt,qt;Wt=Vt.x-Gt.x;var Xt,Yt,Kt,Zt=(qt=Vt.y-Gt.y)*(Xt=Et.x-Ot.x)-Wt*(Yt=Et.y-Ot.y);if(Zt*Zt>Qs.epsilon*Qs.epsilon){var Jt=(Yt*Nt-Xt*Ut)*(Zt=1/Zt);if(Jt>Qs.epsilon&&Jt<1-Qs.epsilon){var Qt=(qt*Nt-Wt*Ut)*Zt;Kt=Qt>Qs.epsilon&&Qt<1-Qs.epsilon&&(Ht=Jt,!0)}else Kt=!1}else Kt=!1;if(Kt&&-1<=Ht){if(Lt=ae,Bt=se,(Rt=1)==_e){It=Ht,jt=Ft;break}It=Ht}Gt=Vt,ae=jt,++se>=t.polygon.edgeCnt&&(se=0),null==(jt=jt.next)&&(jt=t.polygon.gverts.next);break}for(;jt!=Ft;){var $t,ei,ti=jt,ii=0;$t=Gt.x-Ot.x,ei=Gt.y-Ot.y;var ni,ri;ni=ti.x-Gt.x;var oi,ai,si,pi=(ri=ti.y-Gt.y)*(oi=Et.x-Ot.x)-ni*(ai=Et.y-Ot.y);if(pi*pi>Qs.epsilon*Qs.epsilon){var li=(ai*$t-oi*ei)*(pi=1/pi);if(li>Qs.epsilon&&li<1-Qs.epsilon){var hi=(ri*$t-ni*ei)*pi;si=hi>Qs.epsilon&&hi<1-Qs.epsilon&&(ii=li,!0)}else si=!1}else si=!1;if(si&&It<=ii){if(Lt=ae,Bt=se,++Rt==_e){It=ii;break}It=ii}Gt=ti,ae=jt,++se>=t.polygon.edgeCnt&&(se=0),null==(jt=jt.next)&&(jt=t.polygon.gverts.next)}if(null==Lt)break;var ui=Lt,di=Lt.next;null==di&&(di=t.polygon.gverts.next);var ci,_i,yi,xi,mi=di,gi=It;if(ci=ui.x+(mi.x-ui.x)*gi,_i=ui.y+(mi.y-ui.y)*gi,null!=ie){var fi,vi;yi=(fi=ci-ie.x)*fi+(vi=_i-ie.y)*vi<Qs.epsilon}else yi=!1;if(yi)break;null==ep.zpp_pool?xi=new ep:(xi=ep.zpp_pool,ep.zpp_pool=xi.next,xi.next=null),xi.weak=!1,xi._immutable=!1,xi.x=ci,xi.y=_i,$s.flowpoly.add(xi),null==ie&&(ie=$s.flowpoly.head.elt),ae=Lt,se=Bt,ne=!ne,_e=2}else{var zi,wi=re;if(null!=ie){var bi,Si,Ci=wi.x,Mi=wi.y;zi=(bi=Ci-ie.x)*bi+(Si=Mi-ie.y)*Si<Qs.epsilon}else zi=!1;if(zi)break;$s.flowpoly.add(wi),null==ie&&(ie=$s.flowpoly.head.elt),_e=1}else if(++se,null==(ae=ae.next)&&(ae=t.polygon.gverts.next,se=0),r[se]){var Pi=$s.flowpoly.head.elt,ki=ae,Ti=re,Ai=re.next;null==Ai&&(Ai=e.polygon.gverts.next);for(var Oi=-1,Ei=null,Gi=0,Di=0,Ii=Ai,Li=Ai;;){var Bi,Ri,Fi=Li,ji=0;Bi=Ti.x-Pi.x,Ri=Ti.y-Pi.y;var Ni,Ui;Ni=Fi.x-Ti.x;var Vi,Hi,Wi,qi=(Ui=Fi.y-Ti.y)*(Vi=ki.x-Pi.x)-Ni*(Hi=ki.y-Pi.y);if(qi*qi>Qs.epsilon*Qs.epsilon){var Xi=(Hi*Bi-Vi*Ri)*(qi=1/qi);if(Xi>Qs.epsilon&&Xi<1-Qs.epsilon){var Yi=(Ui*Bi-Ni*Ri)*qi;Wi=Yi>Qs.epsilon&&Yi<1-Qs.epsilon&&(ji=Xi,!0)}else Wi=!1}else Wi=!1;if(Wi&&-1<=ji){if(Ei=re,Gi=oe,(Di=1)==_e){Oi=ji,Li=Ii;break}Oi=ji}Ti=Fi,re=Li,++oe>=e.polygon.edgeCnt&&(oe=0),null==(Li=Li.next)&&(Li=e.polygon.gverts.next);break}for(;Li!=Ii;){var Ki,Zi,Ji=Li,Qi=0;Ki=Ti.x-Pi.x,Zi=Ti.y-Pi.y;var $i,en;$i=Ji.x-Ti.x;var tn,nn,rn,on=(en=Ji.y-Ti.y)*(tn=ki.x-Pi.x)-$i*(nn=ki.y-Pi.y);if(on*on>Qs.epsilon*Qs.epsilon){var an=(nn*Ki-tn*Zi)*(on=1/on);if(an>Qs.epsilon&&an<1-Qs.epsilon){var sn=(en*Ki-$i*Zi)*on;rn=sn>Qs.epsilon&&sn<1-Qs.epsilon&&(Qi=an,!0)}else rn=!1}else rn=!1;if(rn&&Oi<=Qi){if(Ei=re,Gi=oe,++Di==_e){Oi=Qi;break}Oi=Qi}Ti=Ji,re=Li,++oe>=e.polygon.edgeCnt&&(oe=0),null==(Li=Li.next)&&(Li=e.polygon.gverts.next)}if(null==Ei)break;var pn=Ei,ln=Ei.next;null==ln&&(ln=e.polygon.gverts.next);var hn,un,dn,cn,_n=ln,yn=Oi;if(hn=pn.x+(_n.x-pn.x)*yn,un=pn.y+(_n.y-pn.y)*yn,null!=ie){var xn,mn;dn=(xn=hn-ie.x)*xn+(mn=un-ie.y)*mn<Qs.epsilon}else dn=!1;if(dn)break;null==ep.zpp_pool?cn=new ep:(cn=ep.zpp_pool,ep.zpp_pool=cn.next,cn.next=null),cn.weak=!1,cn._immutable=!1,cn.x=hn,cn.y=un,$s.flowpoly.add(cn),null==ie&&(ie=$s.flowpoly.head.elt),re=Ei,oe=Gi,ne=!ne,_e=2}else{var gn,fn=ae;if(null!=ie){var vn,zn,wn=fn.x,bn=fn.y;gn=(vn=wn-ie.x)*vn+(zn=bn-ie.y)*zn<Qs.epsilon}else gn=!1;if(gn)break;$s.flowpoly.add(fn),null==ie&&(ie=$s.flowpoly.head.elt),_e=1}if(null==$s.flowpoly.head||null==$s.flowpoly.head.next||null==$s.flowpoly.head.next.next)return!1;var Sn=0,Cn=0,Mn=0;Sn=Mn=Cn=0;var Pn=$s.flowpoly.head,kn=Pn.elt,Tn=(Pn=Pn.next).elt;for(Pn=Pn.next;null!=Pn;){var An=Pn.elt;Sn+=Tn.x*(An.y-kn.y);var On=An.y*Tn.x-An.x*Tn.y;Cn+=(Tn.x+An.x)*On,Mn+=(Tn.y+An.y)*On,kn=Tn,Tn=An,Pn=Pn.next}var En=(Pn=$s.flowpoly.head).elt;Sn+=Tn.x*(En.y-kn.y);var Gn=En.y*Tn.x-En.x*Tn.y;Cn+=(Tn.x+En.x)*Gn,Mn+=(Tn.y+En.y)*Gn,kn=Tn;var Dn=(Pn=Pn.next).elt;Sn+=En.x*(Dn.y-kn.y);var In=Dn.y*En.x-Dn.x*En.y;Cn+=(En.x+Dn.x)*In,Mn+=(En.y+Dn.y)*In;var Ln=1/(6*(Sn*=.5));return Cn*=Ln,Mn*=Ln,i.overlap=-Sn,i.centroidx=Cn,i.centroidy=Mn,!0}return!1}return!1}for(var Bn=[],Rn=!0,Fn=null,jn=null,Nn=-1e100,Un=!0,Vn=t.polygon.gverts.next,Hn=0,Wn=t.polygon.edges.head;null!=Wn;){var qn=Wn.elt,Xn=qn.gnormx*e.circle.worldCOMx+qn.gnormy*e.circle.worldCOMy;if(Xn>qn.gprojection+e.circle.radius){Un=!1;break}Xn+e.circle.radius>qn.gprojection+Qs.epsilon&&(Rn=!1,Bn[Hn]=!0),Nn<(Xn-=qn.gprojection+e.circle.radius)&&(Nn=Xn,Fn=qn,jn=Vn),Vn=Vn.next,++Hn,Wn=Wn.next}if(Un){if(Rn){var Yn=e.circle.area,Kn=e.circle.worldCOMx,Zn=e.circle.worldCOMy;return i.overlap=Yn,i.centroidx=Kn,i.centroidy=Zn,!0}var Jn,Qn=jn,$n=null==jn.next?t.polygon.gverts.next:jn.next,er=e.circle.worldCOMy*Fn.gnormx-e.circle.worldCOMx*Fn.gnormy;if(er<=Qn.y*Fn.gnormx-Qn.x*Fn.gnormy){var tr,ir,nr=e.circle.radius;Jn=(tr=Qn.x-e.circle.worldCOMx)*tr+(ir=Qn.y-e.circle.worldCOMy)*ir<=nr*nr}else if(er>=$n.y*Fn.gnormx-$n.x*Fn.gnormy){var rr,or,ar=e.circle.radius;Jn=(rr=$n.x-e.circle.worldCOMx)*rr+(or=$n.y-e.circle.worldCOMy)*or<=ar*ar}else Jn=!0;if(Jn){for(var sr=[],pr=0,lr=!0,hr=null,ur=0,dr=t.polygon.gverts.next;null!=dr;){var cr,_r,yr=dr,xr=yr.x,mr=yr.y;cr=xr-e.circle.worldCOMx,_r=mr-e.circle.worldCOMy,(sr[pr]=cr*cr+_r*_r<=e.circle.radius*e.circle.radius)?(ur=pr,hr=dr):lr=!1,++pr,dr=dr.next}if(lr){var gr=t.polygon;if(gr.zip_worldCOM&&null!=gr.body){if(gr.zip_worldCOM=!1,gr.zip_localCOM){if(gr.zip_localCOM=!1,1==gr.type){var fr=gr.polygon;if(null==fr.lverts.next.next)fr.localCOMx=fr.lverts.next.x,fr.localCOMy=fr.lverts.next.y;else if(null==fr.lverts.next.next.next)fr.localCOMx=fr.lverts.next.x,fr.localCOMy=fr.lverts.next.y,fr.localCOMx+=fr.lverts.next.next.x,fr.localCOMy+=fr.lverts.next.next.y,fr.localCOMx*=.5,fr.localCOMy*=.5;else{fr.localCOMx=0;var vr=fr.localCOMy=0,zr=fr.lverts.next,wr=zr,br=zr=zr.next;for(zr=zr.next;null!=zr;){var Sr=zr;vr+=br.x*(Sr.y-wr.y);var Cr=Sr.y*br.x-Sr.x*br.y;fr.localCOMx+=(br.x+Sr.x)*Cr,fr.localCOMy+=(br.y+Sr.y)*Cr,wr=br,br=Sr,zr=zr.next}var Mr=zr=fr.lverts.next;vr+=br.x*(Mr.y-wr.y);var Pr=Mr.y*br.x-Mr.x*br.y;fr.localCOMx+=(br.x+Mr.x)*Pr,fr.localCOMy+=(br.y+Mr.y)*Pr,wr=br;var kr=zr=zr.next;vr+=Mr.x*(kr.y-wr.y);var Tr=kr.y*Mr.x-kr.x*Mr.y;fr.localCOMx+=(Mr.x+kr.x)*Tr,fr.localCOMy+=(Mr.y+kr.y)*Tr;var Ar=vr=1/(3*vr);fr.localCOMx*=Ar,fr.localCOMy*=Ar}}null!=gr.wrap_localCOM&&(gr.wrap_localCOM.zpp_inner.x=gr.localCOMx,gr.wrap_localCOM.zpp_inner.y=gr.localCOMy)}var Or=gr.body;Or.zip_axis&&(Or.zip_axis=!1,Or.axisx=Math.sin(Or.rot),Or.axisy=Math.cos(Or.rot)),gr.worldCOMx=gr.body.posx+(gr.body.axisy*gr.localCOMx-gr.body.axisx*gr.localCOMy),gr.worldCOMy=gr.body.posy+(gr.localCOMx*gr.body.axisx+gr.localCOMy*gr.body.axisy)}var Er=t.polygon.area,Gr=t.polygon.worldCOMx,Dr=t.polygon.worldCOMy;return i.overlap=Er,i.centroidx=Gr,i.centroidy=Dr,!0}for(;null!=$s.flowpoly.head;){var Ir=$s.flowpoly.pop_unsafe();Ir._inuse||(null!=Ir.outer&&(Ir.outer.zpp_inner=null,Ir.outer=null),Ir._isimmutable=null,Ir._validate=null,Ir._invalidate=null,Ir.next=ep.zpp_pool,ep.zpp_pool=Ir)}$s.flowsegs.clear();var Lr=null,Br=1;for(null==hr?(hr=t.polygon.gverts.next,Br=2):(Lr=hr,$s.flowpoly.add(Lr));0!=Br;)if(1==Br)if(null==(hr=hr.next)&&(hr=t.polygon.gverts.next),++ur>=t.polygon.edgeCnt&&(ur=0),sr[ur]){var Rr,Fr,jr=Lr.x,Nr=Lr.y;if((Rr=jr-hr.x)*Rr+(Fr=Nr-hr.y)*Fr<Qs.epsilon)break;$s.flowpoly.add(hr)}else{var Ur,Vr,Hr,Wr,qr,Xr,Yr=$s.flowpoly.head.elt,Kr=hr,Zr=(Ur=Kr.x-Yr.x)*Ur+(Vr=Kr.y-Yr.y)*Vr,Jr=2*((Hr=Yr.x-e.circle.worldCOMx)*Ur+(Wr=Yr.y-e.circle.worldCOMy)*Vr),Qr=Math.sqrt(Jr*Jr-4*Zr*(Hr*Hr+Wr*Wr-e.circle.radius*e.circle.radius)),$r=(-Jr-Qr)*(Zr=1/(2*Zr)),eo=$r<Qs.epsilon?(-Jr+Qr)*Zr:$r;qr=Yr.x+(Kr.x-Yr.x)*eo,Xr=Yr.y+(Kr.y-Yr.y)*eo;var to,io,no;if((to=Lr.x-qr)*to+(io=Lr.y-Xr)*io<Qs.epsilon)break;null==ep.zpp_pool?no=new ep:(no=ep.zpp_pool,ep.zpp_pool=no.next,no.next=null),no.weak=!1,no._immutable=!1,no.x=qr,no.y=Xr,$s.flowpoly.add(no),Br=2}else if(2==Br){var ro=hr.next;null==ro&&(ro=t.polygon.gverts.next);var oo=hr;Br=0;for(var ao=ro,so=ro;;){var po=so,lo=ur+1;if(lo==t.polygon.edgeCnt&&(lo=0),Bn[ur]){if(sr[lo]){var ho,uo,co,_o,yo,xo,mo=(ho=po.x-oo.x)*ho+(uo=po.y-oo.y)*uo,go=2*((co=oo.x-e.circle.worldCOMx)*ho+(_o=oo.y-e.circle.worldCOMy)*uo),fo=Math.sqrt(go*go-4*mo*(co*co+_o*_o-e.circle.radius*e.circle.radius)),vo=(-go-fo)*(mo=1/(2*mo)),zo=vo<Qs.epsilon?(-go+fo)*mo:vo;yo=oo.x+(po.x-oo.x)*zo,xo=oo.y+(po.y-oo.y)*zo;var wo,bo,So;if((wo=Lr.x-yo)*wo+(bo=Lr.y-xo)*bo<Qs.epsilon){Br=0,so=ao;break}null==ep.zpp_pool?So=new ep:(So=ep.zpp_pool,ep.zpp_pool=So.next,So.next=null),So.weak=!1,So._immutable=!1,So.x=yo,So.y=xo;var Co=So;$s.flowsegs.add($s.flowpoly.head.elt),$s.flowsegs.add(Co),$s.flowpoly.add(Co),Br=1,so=ao;break}var Mo,Po,ko,To,Ao,Oo=0,Eo=0,Go=(Mo=po.x-oo.x)*Mo+(Po=po.y-oo.y)*Po,Do=2*((ko=oo.x-e.circle.worldCOMx)*Mo+(To=oo.y-e.circle.worldCOMy)*Po),Io=Do*Do-4*Go*(ko*ko+To*To-e.circle.radius*e.circle.radius);if(Ao=Io*Io<Qs.epsilon?(Oo=Io<0?10:Eo=-Do/(2*Go),!1):(Oo=(-Do-(Io=Math.sqrt(Io)))*(Go=1/(2*Go)),Eo=(-Do+Io)*Go,!0),Oo<1-Qs.epsilon&&Eo>Qs.epsilon){var Lo,Bo,Ro,Fo,jo=Oo;if(Lo=oo.x+(po.x-oo.x)*jo,Bo=oo.y+(po.y-oo.y)*jo,null!=Lr){var No,Uo;Ro=(No=Lr.x-Lo)*No+(Uo=Lr.y-Bo)*Uo<Qs.epsilon}else Ro=!1;if(Ro){Br=0,so=ao;break}null==ep.zpp_pool?Fo=new ep:(Fo=ep.zpp_pool,ep.zpp_pool=Fo.next,Fo.next=null),Fo.weak=!1,Fo._immutable=!1,Fo.x=Lo,Fo.y=Bo;var Vo=Fo;if(null!=$s.flowpoly.head&&($s.flowsegs.add($s.flowpoly.head.elt),$s.flowsegs.add(Vo)),$s.flowpoly.add(Vo),null==Lr&&(Lr=$s.flowpoly.head.elt),Ao){var Ho,Wo,qo,Xo=Eo;Ho=oo.x+(po.x-oo.x)*Xo,Wo=oo.y+(po.y-oo.y)*Xo,null==ep.zpp_pool?qo=new ep:(qo=ep.zpp_pool,ep.zpp_pool=qo.next,qo.next=null),qo.weak=!1,qo._immutable=!1,qo.x=Ho,qo.y=Wo,$s.flowpoly.add(qo)}}}oo=po,ur=lo,null==(so=(hr=so).next)&&(so=t.polygon.gverts.next);break}for(;so!=ao;){var Yo=so,Ko=ur+1;if(Ko==t.polygon.edgeCnt&&(Ko=0),Bn[ur]){if(sr[Ko]){var Zo,Jo,Qo,$o,ea,ta,ia=(Zo=Yo.x-oo.x)*Zo+(Jo=Yo.y-oo.y)*Jo,na=2*((Qo=oo.x-e.circle.worldCOMx)*Zo+($o=oo.y-e.circle.worldCOMy)*Jo),ra=Math.sqrt(na*na-4*ia*(Qo*Qo+$o*$o-e.circle.radius*e.circle.radius)),oa=(-na-ra)*(ia=1/(2*ia)),aa=oa<Qs.epsilon?(-na+ra)*ia:oa;ea=oo.x+(Yo.x-oo.x)*aa,ta=oo.y+(Yo.y-oo.y)*aa;var sa,pa,la;if((sa=Lr.x-ea)*sa+(pa=Lr.y-ta)*pa<Qs.epsilon){Br=0;break}null==ep.zpp_pool?la=new ep:(la=ep.zpp_pool,ep.zpp_pool=la.next,la.next=null),la.weak=!1,la._immutable=!1,la.x=ea,la.y=ta;var ha=la;$s.flowsegs.add($s.flowpoly.head.elt),$s.flowsegs.add(ha),$s.flowpoly.add(ha),Br=1;break}var ua,da,ca,_a,ya,xa=0,ma=0,ga=(ua=Yo.x-oo.x)*ua+(da=Yo.y-oo.y)*da,fa=2*((ca=oo.x-e.circle.worldCOMx)*ua+(_a=oo.y-e.circle.worldCOMy)*da),va=fa*fa-4*ga*(ca*ca+_a*_a-e.circle.radius*e.circle.radius);if(ya=va*va<Qs.epsilon?(xa=va<0?10:ma=-fa/(2*ga),!1):(xa=(-fa-(va=Math.sqrt(va)))*(ga=1/(2*ga)),ma=(-fa+va)*ga,!0),xa<1-Qs.epsilon&&ma>Qs.epsilon){var za,wa,ba,Sa,Ca=xa;if(za=oo.x+(Yo.x-oo.x)*Ca,wa=oo.y+(Yo.y-oo.y)*Ca,null!=Lr){var Ma,Pa;ba=(Ma=Lr.x-za)*Ma+(Pa=Lr.y-wa)*Pa<Qs.epsilon}else ba=!1;if(ba){Br=0;break}null==ep.zpp_pool?Sa=new ep:(Sa=ep.zpp_pool,ep.zpp_pool=Sa.next,Sa.next=null),Sa.weak=!1,Sa._immutable=!1,Sa.x=za,Sa.y=wa;var ka=Sa;if(null!=$s.flowpoly.head&&($s.flowsegs.add($s.flowpoly.head.elt),$s.flowsegs.add(ka)),$s.flowpoly.add(ka),null==Lr&&(Lr=$s.flowpoly.head.elt),ya){var Ta,Aa,Oa,Ea=ma;Ta=oo.x+(Yo.x-oo.x)*Ea,Aa=oo.y+(Yo.y-oo.y)*Ea,null==ep.zpp_pool?Oa=new ep:(Oa=ep.zpp_pool,ep.zpp_pool=Oa.next,Oa.next=null),Oa.weak=!1,Oa._immutable=!1,Oa.x=Ta,Oa.y=Aa,$s.flowpoly.add(Oa)}}}oo=Yo,ur=Ko,null==(so=(hr=so).next)&&(so=t.polygon.gverts.next)}}if(null==$s.flowpoly.head)return!1;if(null==$s.flowpoly.head.next){for(var Ga=!0,Da=t.polygon.edges.head;null!=Da;){var Ia=Da.elt;if(Ia.gnormx*e.circle.worldCOMx+Ia.gnormy*e.circle.worldCOMy>Ia.gprojection){Ga=!1;break}Da=Da.next}if(Ga){var La=e.circle.area,Ba=e.circle.worldCOMx,Ra=e.circle.worldCOMy;return i.overlap=La,i.centroidx=Ba,i.centroidy=Ra,!0}return!1}var Fa=0,ja=0,Na=0;if(null!=$s.flowpoly.head.next.next){var Ua=0,Va=0,Ha=0;Ua=Ha=Va=0;var Wa=$s.flowpoly.head,qa=Wa.elt,Xa=(Wa=Wa.next).elt;for(Wa=Wa.next;null!=Wa;){var Ya=Wa.elt;Ua+=Xa.x*(Ya.y-qa.y);var Ka=Ya.y*Xa.x-Ya.x*Xa.y;Va+=(Xa.x+Ya.x)*Ka,Ha+=(Xa.y+Ya.y)*Ka,qa=Xa,Xa=Ya,Wa=Wa.next}var Za=(Wa=$s.flowpoly.head).elt;Ua+=Xa.x*(Za.y-qa.y);var Ja=Za.y*Xa.x-Za.x*Xa.y;Va+=(Xa.x+Za.x)*Ja,Ha+=(Xa.y+Za.y)*Ja,qa=Xa;var Qa=(Wa=Wa.next).elt;Ua+=Za.x*(Qa.y-qa.y);var $a=Qa.y*Za.x-Qa.x*Za.y;Va+=(Za.x+Qa.x)*$a,Ha+=(Za.y+Qa.y)*$a;var es=1/(6*(Ua*=.5)),ts=-Ua;Fa+=(Va*=es)*ts,ja+=(Ha*=es)*ts,Na=0-Ua}else $s.flowsegs.add($s.flowpoly.head.elt),$s.flowsegs.add($s.flowpoly.head.next.elt);for(;null!=$s.flowsegs.head;){var is=$s.flowsegs.pop_unsafe(),ns=$s.flowsegs.pop_unsafe(),rs=0,os=0;rs=ns.x-is.x,os=ns.y-is.y;var as=1/Math.sqrt(rs*rs+os*os),ss=rs*=as;rs=-(os*=as),os=ss;var ps=0,ls=0;ps=is.x+ns.x,ls=is.y+ns.y,ps*=.5,ls*=.5;var hs,us,ds=rs*(ps-=e.circle.worldCOMx)+os*(ls-=e.circle.worldCOMy),cs=ds/e.circle.radius,_s=Math.sqrt(1-cs*cs),ys=Math.acos(cs);hs=e.circle.radius*(e.circle.radius*ys-ds*_s),us=.6666666666666666*e.circle.radius*_s*_s*_s/(ys-cs*_s),ps=e.circle.worldCOMx,ls=e.circle.worldCOMy;Fa+=(ps+=rs*us)*hs,ja+=(ls+=os*us)*hs,Na+=hs}var xs=1/Na;return Fa*=xs,ja*=xs,i.overlap=Na,i.centroidx=Fa,i.centroidy=ja,!0}return!1}return!1}var ms,gs,fs=e.circle,vs=t.circle;ms=vs.worldCOMx-fs.worldCOMx,gs=vs.worldCOMy-fs.worldCOMy;var zs=fs.radius+vs.radius,ws=ms*ms+gs*gs;if(zs*zs<ws)return!1;if(ws<Qs.epsilon*Qs.epsilon){if(fs.radius<vs.radius){var bs=fs.area,Ss=fs.worldCOMx,Cs=fs.worldCOMy;i.overlap=bs,i.centroidx=Ss,i.centroidy=Cs}else{var Ms=vs.area,Ps=vs.worldCOMx,ks=vs.worldCOMy;i.overlap=Ms,i.centroidx=Ps,i.centroidy=ks}return!0}var Ts=Math.sqrt(ws),As=1/Ts,Os=.5*(Ts-(vs.radius*vs.radius-fs.radius*fs.radius)*As);if(Os<=-fs.radius){var Es=fs.area,Gs=fs.worldCOMx,Ds=fs.worldCOMy;i.overlap=Es,i.centroidx=Gs,i.centroidy=Ds}else{var Is=Ts-Os;if(Is<=-vs.radius){var Ls=vs.area,Bs=vs.worldCOMx,Rs=vs.worldCOMy;i.overlap=Ls,i.centroidx=Bs,i.centroidy=Rs}else{var Fs,js,Ns,Us=Os/fs.radius,Vs=Math.sqrt(1-Us*Us),Hs=Math.acos(Us);Fs=fs.radius*(fs.radius*Hs-Os*Vs),js=.6666666666666666*fs.radius*Vs*Vs*Vs/(Hs-Us*Vs);var Ws=Is/vs.radius,qs=Math.sqrt(1-Ws*Ws),Xs=Math.acos(Ws),Ys=Fs+(Ns=vs.radius*(vs.radius*Xs-Is*qs)),Ks=(js*Fs+(Ts-.6666666666666666*vs.radius*qs*qs*qs/(Xs-Ws*qs))*Ns)/Ys*As,Zs=fs.worldCOMx+ms*Ks,Js=fs.worldCOMy+gs*Ks;i.overlap=Ys,i.centroidx=Zs,i.centroidy=Js}}return!0},$s.prototype.__class__=$s;var zt=zpp_nape.geom.ZPP_Convex=function(){};zt.__name__=["zpp_nape","geom","ZPP_Convex"],zt.isinner=function(e,t,i){var n,r;n=e.x-t.x,r=e.y-t.y;var o;return o=i.x-t.x,0<=(i.y-t.y)*n-o*r},zt.optimise=function(e){var t=e.vertices,i=e.vertices;if(null!=t)for(var n=t;n.sort(),(n=n.next)!=i;);var r=e.vertices,o=e.vertices;if(null!=r)for(var a=r;;){for(var s=a,p=s.prev,l=null,h=s.diagonals.head;null!=h;){var u=h.elt;if(zt.isinner(null==h.next?s.next:h.next.elt,s,p)){for(var d=!0,c=u.prev,_=null,y=u.diagonals.head;null!=y;){var x=y.elt;if(x==s){d=zt.isinner(null==y.next?u.next:y.next.elt,u,c);break}c=x,y=(_=y).next}d?(h=s.diagonals.erase(l),u.diagonals.erase(_)):(p=u,h=(l=h).next)}else p=u,h=(l=h).next}if((a=a.next)==o)break}},zt.prototype.__class__=zt;var wt=zpp_nape.geom.ZPP_ConvexRayResult=function(){this.toiDistance=0,this.next=null,this.inner=!1,this.ray=null,this.position=null,this.convex=null,this.shape=null,this.normal=null};wt.__name__=["zpp_nape","geom","ZPP_ConvexRayResult"],wt.getRay=function(e,t,i,n){var r;null==wt.rayPool?(wt.internal=!0,(r=new Y).zpp_inner=new wt,r.zpp_inner.ray=r,wt.internal=!1):(r=wt.rayPool.ray,wt.rayPool=wt.rayPool.next,r.zpp_inner.next=null);var o=r.zpp_inner;return(o.normal=e).zpp_inner._immutable=!0,o.toiDistance=t,o.inner=i,o.shape=n,r},wt.getConvex=function(e,t,i,n){var r;null==wt.convexPool?(wt.internal=!0,(r=new U).zpp_inner=new wt,r.zpp_inner.convex=r,wt.internal=!1):(r=wt.convexPool.convex,wt.convexPool=wt.convexPool.next,r.zpp_inner.next=null);var o=r.zpp_inner;return o.normal=e,o.position=t,e.zpp_inner._immutable=!0,t.zpp_inner._immutable=!0,o.toiDistance=i,o.shape=n,r},wt.prototype.normal=null,wt.prototype.shape=null,wt.prototype.convex=null,wt.prototype.position=null,wt.prototype.ray=null,wt.prototype.inner=null,wt.prototype.next=null,wt.prototype.toiDistance=null,wt.prototype.disposed=function(){},wt.prototype.free=function(){this.normal.zpp_inner._immutable=!1;var e=this.normal,t=e.zpp_inner;if(e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=t.outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=ep.zpp_pool,ep.zpp_pool=t,null!=this.position){this.position.zpp_inner._immutable=!1;var i=this.position,n=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,i.zpp_pool=jn.poolVec2,jn.poolVec2=i,null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n._isimmutable=null,n._validate=null,n._invalidate=null,n.next=ep.zpp_pool,ep.zpp_pool=n}this.shape=null,this.toiDistance=0,null!=this.convex?(this.next=wt.convexPool,wt.convexPool=this):(this.next=wt.rayPool,wt.rayPool=this)},wt.prototype.__class__=wt;var Sn=zpp_nape.geom.ZPP_CutVert=function(){this.used=!1,this.rank=0,this.parent=null,this.positive=!1,this.value=0,this.vert=null,this.posy=0,this.posx=0,this.next=null,this.prev=null};Sn.__name__=["zpp_nape","geom","ZPP_CutVert"],Sn.path=function(e){var t;return null==Sn.zpp_pool?t=new Sn:(t=Sn.zpp_pool,Sn.zpp_pool=t.next,t.next=null),t.vert=e,(t.parent=t).rank=0,t.used=!1,t},Sn.prototype.prev=null,Sn.prototype.next=null,Sn.prototype.posx=null,Sn.prototype.posy=null,Sn.prototype.vert=null,Sn.prototype.value=null,Sn.prototype.positive=null,Sn.prototype.parent=null,Sn.prototype.rank=null,Sn.prototype.used=null,Sn.prototype.alloc=function(){},Sn.prototype.free=function(){this.vert=null,this.parent=null},Sn.prototype.__class__=Sn;var Cn=zpp_nape.geom.ZPP_CutInt=function(){this.path1=null,this.start=null,this.end=null,this.path0=null,this.vertex=!1,this.virtualint=!1,this.time=0,this.next=null};Cn.__name__=["zpp_nape","geom","ZPP_CutInt"],Cn.get=function(e,t,i,n,r,o,a){var s;return null==a&&(a=!1),null==o&&(o=!1),null==Cn.zpp_pool?s=new Cn:(s=Cn.zpp_pool,Cn.zpp_pool=s.next,s.next=null),s.virtualint=o,s.end=t,s.start=i,s.path0=n,s.path1=r,s.time=e,s.vertex=a,s},Cn.prototype.next=null,Cn.prototype.time=null,Cn.prototype.virtualint=null,Cn.prototype.vertex=null,Cn.prototype.path0=null,Cn.prototype.end=null,Cn.prototype.start=null,Cn.prototype.path1=null,Cn.prototype.alloc=function(){},Cn.prototype.free=function(){this.end=this.start=null,this.path0=this.path1=null},Cn.prototype.__class__=Cn;var Mn=zpp_nape.geom.ZPP_Cutter=function(){};Mn.__name__=["zpp_nape","geom","ZPP_Cutter"],Mn.run=function(e,t,i,n,r,o){var a,s,p=t.zpp_inner;null!=p._validate&&p._validate(),a=t.zpp_inner.x;var l=t.zpp_inner;null!=l._validate&&l._validate(),s=t.zpp_inner.y;var h,u,d=i.zpp_inner;null!=d._validate&&d._validate(),h=i.zpp_inner.x-a;var c=i.zpp_inner;null!=c._validate&&c._validate();for(var _=n?0:-1/0,y=r?1:1/0,x=-(s*h-a*(u=i.zpp_inner.y-s)),m=null,g=!1,f=e;;){var v;null==Sn.zpp_pool?v=new Sn:(v=Sn.zpp_pool,Sn.zpp_pool=v.next,v.next=null),v.vert=f,v.posx=v.vert.x,v.posy=v.vert.y,v.value=v.posy*h-v.posx*u+x,v.positive=0<v.value,0==v.value&&(g=!0);var z=v;if(null==m?m=z.prev=z.next=z:(z.prev=m,z.next=m.next,m.next.prev=z,m.next=z),m=z,(f=f.next)==e)break}if(g){var w=null,b=m;if(null!=m)for(var S=m;;){var C=S;if(0!=C.value){w=C;break}if((S=S.next)==b)break}var M=0,P=0;M=h,P=u;var k=1/Math.sqrt(M*M+P*P),T=M*=k;M=-(P*=k),P=T;for(var A=null,O=w;;)if(0==O.value||null!=A&&O!=A.next){var E=A.value*O.value;if(0!=E){var G,D=A.next;if(0<E)G=A.positive;else{var I=D.next,L=0,B=0;L=D.posx+I.posx,B=D.posy+I.posy;var R=(L*=.5)+1e-8*M,F=(B*=.5)+1e-8*P,j=!1;if(null!=e)for(var N=e;;){var U=N,V=U.prev;if((U.y<F&&V.y>=F||V.y<F&&U.y>=F)&&(U.x<=R||V.x<=R)&&U.x+(F-U.y)/(V.y-U.y)*(V.x-U.x)<R&&(j=!j),(N=N.next)==e)break}G=j}var H=O;if(null!=D)for(var W=D;W.positive=G,(W=W.next)!=H;);if((O=(A=O).next)==w)break}else if((O=O.next)==w)break}else if((O=(A=O).next)==w)break;for(;;){if(0!=O.value&&(null==A||O==A.next)){O=(A=O).next;break}var q=A.value*O.value;if(0==q){O=O.next;break}var X,Y=A.next;if(0<q)X=A.positive;else{var K=Y.next,Z=0,J=0;Z=Y.posx+K.posx,J=Y.posy+K.posy;var Q=(Z*=.5)+1e-8*M,$=(J*=.5)+1e-8*P,ee=!1;if(null!=e)for(var te=e;;){var ie=te,ne=ie.prev;if((ie.y<$&&ne.y>=$||ne.y<$&&ie.y>=$)&&(ie.x<=Q||ne.x<=Q)&&ie.x+($-ie.y)/(ne.y-ie.y)*(ne.x-ie.x)<Q&&(ee=!ee),(te=te.next)==e)break}X=ee}var re=O;if(null!=Y)for(var oe=Y;oe.positive=X,(oe=oe.next)!=re;);O=(A=O).next;break}}null==Mn.ints&&(Mn.ints=new Pn),null==Mn.paths&&(Mn.paths=new kn);var ae,se=null,pe=m.posx,le=m.posy;null==cr.zpp_pool?ae=new cr:(ae=cr.zpp_pool,cr.zpp_pool=ae.next,ae.next=null),ae.forced=!1,ae.x=pe,ae.y=le;var he=ae;null==se?se=he.prev=he.next=he:(he.next=se,he.prev=se.prev,se.prev.next=he,se.prev=he);var ue,de=se;null==Sn.zpp_pool?ue=new Sn:(ue=Sn.zpp_pool,Sn.zpp_pool=ue.next,ue.next=null),ue.vert=se,(ue.parent=ue).rank=0,ue.used=!1;var ce=ue;Mn.paths.add(ce);for(var _e=m;;){var ye,xe=_e.next,me=xe.posx,ge=xe.posy;null==cr.zpp_pool?ye=new cr:(ye=cr.zpp_pool,cr.zpp_pool=ye.next,ye.next=null),ye.forced=!1,ye.x=me,ye.y=ge;var fe=ye;if(_e.positive==xe.positive)null==se?se=fe.prev=fe.next=fe:(fe.next=se,fe.prev=se.prev,se.prev.next=fe,se.prev=fe);else{var ve,ze,we=u*(ve=xe.posx-_e.posx)-h*(ze=xe.posy-_e.posy);we=1/we;var be,Se,Ce,Me=(ze*(be=a-_e.posx)-ve*(Se=s-_e.posy))*we;if(Me<_||y<Me)null==Cn.zpp_pool?Ce=new Cn:(Ce=Cn.zpp_pool,Cn.zpp_pool=Ce.next,Ce.next=null),Ce.virtualint=!0,Ce.end=null,Ce.start=null,Ce.path0=null,Ce.path1=null,Ce.time=Me,Ce.vertex=!1,Mn.ints.add(Ce),null==se?se=fe.prev=fe.next=fe:(fe.next=se,fe.prev=se.prev,se.prev.next=fe,se.prev=fe);else if(0==_e.value){var Pe=se.prev;se=null;var ke,Te=Pe.x,Ae=Pe.y;null==cr.zpp_pool?ke=new cr:(ke=cr.zpp_pool,cr.zpp_pool=ke.next,ke.next=null),ke.forced=!1,ke.x=Te,ke.y=Ae;var Oe=ke;null==se?se=Oe.prev=Oe.next=Oe:(Oe.next=se,Oe.prev=se.prev,se.prev.next=Oe,se.prev=Oe),null==se?se=fe.prev=fe.next=fe:(fe.next=se,fe.prev=se.prev,se.prev.next=fe,se.prev=fe);var Ee,Ge=Mn.paths.head.elt;null==Sn.zpp_pool?Ee=new Sn:(Ee=Sn.zpp_pool,Sn.zpp_pool=Ee.next,Ee.next=null),Ee.vert=se,(Ee.parent=Ee).rank=0,Ee.used=!1,Mn.paths.add(Ee);var De,Ie=Mn.paths.head.elt;null==Cn.zpp_pool?De=new Cn:(De=Cn.zpp_pool,Cn.zpp_pool=De.next,De.next=null),De.virtualint=!0,De.end=Pe,De.start=se,De.path0=Ge,De.path1=Ie,De.time=Me,De.vertex=!1,Mn.ints.add(De)}else if(0==xe.value){null==se?se=fe.prev=fe.next=fe:(fe.next=se,fe.prev=se.prev,se.prev.next=fe,se.prev=fe);var Le=se.prev;se=null;var Be,Re=xe.posx,Fe=xe.posy;null==cr.zpp_pool?Be=new cr:(Be=cr.zpp_pool,cr.zpp_pool=Be.next,Be.next=null),Be.forced=!1,Be.x=Re,Be.y=Fe;var je=Be;null==se?se=je.prev=je.next=je:(je.next=se,je.prev=se.prev,se.prev.next=je,se.prev=je);var Ne,Ue=Mn.paths.head.elt;null==Sn.zpp_pool?Ne=new Sn:(Ne=Sn.zpp_pool,Sn.zpp_pool=Ne.next,Ne.next=null),Ne.vert=se,(Ne.parent=Ne).rank=0,Ne.used=!1,Mn.paths.add(Ne);var Ve,He=Mn.paths.head.elt;null==Cn.zpp_pool?Ve=new Cn:(Ve=Cn.zpp_pool,Cn.zpp_pool=Ve.next,Ve.next=null),Ve.virtualint=!0,Ve.end=Le,Ve.start=se,Ve.path0=Ue,Ve.path1=He,Ve.time=Me,Ve.vertex=!1,Mn.ints.add(Ve)}else{var We,qe=(u*be-h*Se)*we,Xe=0,Ye=0;Xe=_e.posx,Ye=_e.posy,Xe+=ve*qe,Ye+=ze*qe,null==cr.zpp_pool?We=new cr:(We=cr.zpp_pool,cr.zpp_pool=We.next,We.next=null),We.forced=!1,We.x=Xe,We.y=Ye;var Ke=We;null==se?se=Ke.prev=Ke.next=Ke:(Ke.next=se,Ke.prev=se.prev,se.prev.next=Ke,se.prev=Ke);var Ze,Je=se.prev;(se=null)==cr.zpp_pool?Ze=new cr:(Ze=cr.zpp_pool,cr.zpp_pool=Ze.next,Ze.next=null),Ze.forced=!1,Ze.x=Xe,Ze.y=Ye;var Qe=Ze;null==se?se=Qe.prev=Qe.next=Qe:(Qe.next=se,Qe.prev=se.prev,se.prev.next=Qe,se.prev=Qe),null==se?se=fe.prev=fe.next=fe:(fe.next=se,fe.prev=se.prev,se.prev.next=fe,se.prev=fe);var $e,et=Mn.paths.head.elt;null==Sn.zpp_pool?$e=new Sn:($e=Sn.zpp_pool,Sn.zpp_pool=$e.next,$e.next=null),$e.vert=se,($e.parent=$e).rank=0,$e.used=!1,Mn.paths.add($e);var tt,it=Mn.paths.head.elt;null==Cn.zpp_pool?tt=new Cn:(tt=Cn.zpp_pool,Cn.zpp_pool=tt.next,tt.next=null),tt.virtualint=!1,tt.end=Je,tt.start=se,tt.path0=et,tt.path1=it,tt.time=Me,tt.vertex=!1,Mn.ints.add(tt)}}if((_e=_e.next)==m)break}var nt=se.prev;nt.next.prev=de.prev,de.prev.next=nt.next,(nt.next=de).prev=nt;var rt,ot,at=Mn.paths.head.elt;if(ce==ce.parent)rt=ce;else{for(var st=ce,pt=null;st!=st.parent;){var lt=st.parent;st.parent=pt,pt=st,st=lt}for(;null!=pt;){var ht=pt.parent;pt.parent=st,pt=ht}rt=st}if(at==at.parent)ot=at;else{for(var ut=at,dt=null;ut!=ut.parent;){var ct=ut.parent;ut.parent=dt,dt=ut,ut=ct}for(;null!=dt;){var _t=dt.parent;dt.parent=ut,dt=_t}ot=ut}rt!=ot&&(rt.rank<ot.rank?rt.parent=ot:rt.rank>ot.rank?ot.parent=rt:(ot.parent=rt).rank++);var yt=Mn.ints;if(null!=yt.head&&null!=yt.head.next){for(var xt,mt,gt,ft=yt.head,vt=null,zt=null,wt=null,bt=null,St=1;;){for(xt=0,zt=ft,vt=ft=null;null!=zt;){for(++xt,wt=zt,mt=0,gt=St;null!=wt&&mt<St;)++mt,wt=wt.next;for(;0<mt||0<gt&&null!=wt;)0==mt?(wt=(bt=wt).next,--gt):0==gt||null==wt?(zt=(bt=zt).next,--mt):zt.elt.time<wt.elt.time?(zt=(bt=zt).next,--mt):(wt=(bt=wt).next,--gt),null!=vt?vt.next=bt:ft=bt,vt=bt;zt=wt}if(vt.next=null,St<<=1,!(1<xt))break}yt.head=ft,yt.modified=!0,yt.pushmod=!0}for(;null!=Mn.ints.head;){var Ct=Mn.ints.pop_unsafe(),Mt=Mn.ints.pop_unsafe();if(Ct.virtualint||Mt.virtualint){if(Ct.virtualint&&!Mt.virtualint){var Pt,kt,Tt;if(null!=Mt.end&&Mt.end.prev==Mt.end){Mt.end.next=Mt.end.prev=null;var At=Mt.end;if(null!=At.wrap){At.wrap.zpp_inner._inuse=!1;var Ot=At.wrap,Et=Ot.zpp_inner;Ot.zpp_inner.outer=null,Ot.zpp_inner=null,Ot.zpp_pool=jn.poolVec2,jn.poolVec2=Ot,null!=Et.outer&&(Et.outer.zpp_inner=null,Et.outer=null),Et._isimmutable=null,Et._validate=null,Et._invalidate=null,Et.next=ep.zpp_pool,ep.zpp_pool=Et,At.wrap=null}At.prev=At.next=null,At.next=cr.zpp_pool,cr.zpp_pool=At,Pt=null}else{var Gt=Mt.end.prev;Mt.end.prev.next=Mt.end.next,Mt.end.next.prev=Mt.end.prev,Mt.end.next=Mt.end.prev=null;var Dt=Mt.end;if(null!=Dt.wrap){Dt.wrap.zpp_inner._inuse=!1;var It=Dt.wrap,Lt=It.zpp_inner;It.zpp_inner.outer=null,It.zpp_inner=null,It.zpp_pool=jn.poolVec2,jn.poolVec2=It,null!=Lt.outer&&(Lt.outer.zpp_inner=null,Lt.outer=null),Lt._isimmutable=null,Lt._validate=null,Lt._invalidate=null,Lt.next=ep.zpp_pool,ep.zpp_pool=Lt,Dt.wrap=null}Dt.prev=Dt.next=null,Dt.next=cr.zpp_pool,cr.zpp_pool=Dt,Mt.end=null,Pt=Gt}if(Mt.end=Pt,!Mt.vertex)if(Mt.end!=Mt.path0.vert){var Bt;if(Mt.start.x=Mt.end.x,Mt.start.y=Mt.end.y,null!=Mt.end&&Mt.end.prev==Mt.end){Mt.end.next=Mt.end.prev=null;var Rt=Mt.end;if(null!=Rt.wrap){Rt.wrap.zpp_inner._inuse=!1;var Ft=Rt.wrap,jt=Ft.zpp_inner;Ft.zpp_inner.outer=null,Ft.zpp_inner=null,Ft.zpp_pool=jn.poolVec2,jn.poolVec2=Ft,null!=jt.outer&&(jt.outer.zpp_inner=null,jt.outer=null),jt._isimmutable=null,jt._validate=null,jt._invalidate=null,jt.next=ep.zpp_pool,ep.zpp_pool=jt,Rt.wrap=null}Rt.prev=Rt.next=null,Rt.next=cr.zpp_pool,cr.zpp_pool=Rt,Bt=null}else{var Nt=Mt.end.prev;Mt.end.prev.next=Mt.end.next,Mt.end.next.prev=Mt.end.prev,Mt.end.next=Mt.end.prev=null;var Ut=Mt.end;if(null!=Ut.wrap){Ut.wrap.zpp_inner._inuse=!1;var Vt=Ut.wrap,Ht=Vt.zpp_inner;Vt.zpp_inner.outer=null,Vt.zpp_inner=null,Vt.zpp_pool=jn.poolVec2,jn.poolVec2=Vt,null!=Ht.outer&&(Ht.outer.zpp_inner=null,Ht.outer=null),Ht._isimmutable=null,Ht._validate=null,Ht._invalidate=null,Ht.next=ep.zpp_pool,ep.zpp_pool=Ht,Ut.wrap=null}Ut.prev=Ut.next=null,Ut.next=cr.zpp_pool,cr.zpp_pool=Ut,Mt.end=null,Bt=Nt}Mt.end=Bt}else{var Wt=Mt.start.next;if(Mt.start.x=Wt.x,Mt.start.y=Wt.y,null!=Wt&&Wt.prev==Wt){Wt.next=Wt.prev=null;var qt=Wt;if(null!=qt.wrap){qt.wrap.zpp_inner._inuse=!1;var Xt=qt.wrap,Yt=Xt.zpp_inner;Xt.zpp_inner.outer=null,Xt.zpp_inner=null,Xt.zpp_pool=jn.poolVec2,jn.poolVec2=Xt,null!=Yt.outer&&(Yt.outer.zpp_inner=null,Yt.outer=null),Yt._isimmutable=null,Yt._validate=null,Yt._invalidate=null,Yt.next=ep.zpp_pool,ep.zpp_pool=Yt,qt.wrap=null}qt.prev=qt.next=null,qt.next=cr.zpp_pool,cr.zpp_pool=qt,Wt=null}else{Wt.prev.next=Wt.next,Wt.next.prev=Wt.prev,Wt.next=Wt.prev=null;var Kt=Wt;if(null!=Kt.wrap){Kt.wrap.zpp_inner._inuse=!1;var Zt=Kt.wrap,Jt=Zt.zpp_inner;Zt.zpp_inner.outer=null,Zt.zpp_inner=null,Zt.zpp_pool=jn.poolVec2,jn.poolVec2=Zt,null!=Jt.outer&&(Jt.outer.zpp_inner=null,Jt.outer=null),Jt._isimmutable=null,Jt._validate=null,Jt._invalidate=null,Jt.next=ep.zpp_pool,ep.zpp_pool=Jt,Kt.wrap=null}Kt.prev=Kt.next=null,Kt.next=cr.zpp_pool,cr.zpp_pool=Kt}}if(Mt.end.next.prev=Mt.start.prev,Mt.start.prev.next=Mt.end.next,Mt.end.next=Mt.start,Mt.start.prev=Mt.end,Mt.path0==Mt.path0.parent)kt=Mt.path0;else{for(var Qt=Mt.path0,$t=null;Qt!=Qt.parent;){var ei=Qt.parent;Qt.parent=$t,$t=Qt,Qt=ei}for(;null!=$t;){var ti=$t.parent;$t.parent=Qt,$t=ti}kt=Qt}if(Mt.path1==Mt.path1.parent)Tt=Mt.path1;else{for(var ii=Mt.path1,ni=null;ii!=ii.parent;){var ri=ii.parent;ii.parent=ni,ni=ii,ii=ri}for(;null!=ni;){var oi=ni.parent;ni.parent=ii,ni=oi}Tt=ii}kt!=Tt&&(kt.rank<Tt.rank?kt.parent=Tt:kt.rank>Tt.rank?Tt.parent=kt:(Tt.parent=kt).rank++)}else if(Mt.virtualint&&!Ct.virtualint){var ai,si,pi;if(null!=Ct.end&&Ct.end.prev==Ct.end){Ct.end.next=Ct.end.prev=null;var li=Ct.end;if(null!=li.wrap){li.wrap.zpp_inner._inuse=!1;var hi=li.wrap,ui=hi.zpp_inner;hi.zpp_inner.outer=null,hi.zpp_inner=null,hi.zpp_pool=jn.poolVec2,jn.poolVec2=hi,null!=ui.outer&&(ui.outer.zpp_inner=null,ui.outer=null),ui._isimmutable=null,ui._validate=null,ui._invalidate=null,ui.next=ep.zpp_pool,ep.zpp_pool=ui,li.wrap=null}li.prev=li.next=null,li.next=cr.zpp_pool,cr.zpp_pool=li,ai=null}else{var di=Ct.end.prev;Ct.end.prev.next=Ct.end.next,Ct.end.next.prev=Ct.end.prev,Ct.end.next=Ct.end.prev=null;var ci=Ct.end;if(null!=ci.wrap){ci.wrap.zpp_inner._inuse=!1;var _i=ci.wrap,yi=_i.zpp_inner;_i.zpp_inner.outer=null,_i.zpp_inner=null,_i.zpp_pool=jn.poolVec2,jn.poolVec2=_i,null!=yi.outer&&(yi.outer.zpp_inner=null,yi.outer=null),yi._isimmutable=null,yi._validate=null,yi._invalidate=null,yi.next=ep.zpp_pool,ep.zpp_pool=yi,ci.wrap=null}ci.prev=ci.next=null,ci.next=cr.zpp_pool,cr.zpp_pool=ci,Ct.end=null,ai=di}if(Ct.end=ai,!Ct.vertex)if(Ct.end!=Ct.path0.vert){var xi;if(Ct.start.x=Ct.end.x,Ct.start.y=Ct.end.y,null!=Ct.end&&Ct.end.prev==Ct.end){Ct.end.next=Ct.end.prev=null;var mi=Ct.end;if(null!=mi.wrap){mi.wrap.zpp_inner._inuse=!1;var gi=mi.wrap,fi=gi.zpp_inner;gi.zpp_inner.outer=null,gi.zpp_inner=null,gi.zpp_pool=jn.poolVec2,jn.poolVec2=gi,null!=fi.outer&&(fi.outer.zpp_inner=null,fi.outer=null),fi._isimmutable=null,fi._validate=null,fi._invalidate=null,fi.next=ep.zpp_pool,ep.zpp_pool=fi,mi.wrap=null}mi.prev=mi.next=null,mi.next=cr.zpp_pool,cr.zpp_pool=mi,xi=null}else{var vi=Ct.end.prev;Ct.end.prev.next=Ct.end.next,Ct.end.next.prev=Ct.end.prev,Ct.end.next=Ct.end.prev=null;var zi=Ct.end;if(null!=zi.wrap){zi.wrap.zpp_inner._inuse=!1;var wi=zi.wrap,bi=wi.zpp_inner;wi.zpp_inner.outer=null,wi.zpp_inner=null,wi.zpp_pool=jn.poolVec2,jn.poolVec2=wi,null!=bi.outer&&(bi.outer.zpp_inner=null,bi.outer=null),bi._isimmutable=null,bi._validate=null,bi._invalidate=null,bi.next=ep.zpp_pool,ep.zpp_pool=bi,zi.wrap=null}zi.prev=zi.next=null,zi.next=cr.zpp_pool,cr.zpp_pool=zi,Ct.end=null,xi=vi}Ct.end=xi}else{var Si=Ct.start.next;if(Ct.start.x=Si.x,Ct.start.y=Si.y,null!=Si&&Si.prev==Si){Si.next=Si.prev=null;var Ci=Si;if(null!=Ci.wrap){Ci.wrap.zpp_inner._inuse=!1;var Mi=Ci.wrap,Pi=Mi.zpp_inner;Mi.zpp_inner.outer=null,Mi.zpp_inner=null,Mi.zpp_pool=jn.poolVec2,jn.poolVec2=Mi,null!=Pi.outer&&(Pi.outer.zpp_inner=null,Pi.outer=null),Pi._isimmutable=null,Pi._validate=null,Pi._invalidate=null,Pi.next=ep.zpp_pool,ep.zpp_pool=Pi,Ci.wrap=null}Ci.prev=Ci.next=null,Ci.next=cr.zpp_pool,cr.zpp_pool=Ci,Si=null}else{Si.prev.next=Si.next,Si.next.prev=Si.prev,Si.next=Si.prev=null;var ki=Si;if(null!=ki.wrap){ki.wrap.zpp_inner._inuse=!1;var Ti=ki.wrap,Ai=Ti.zpp_inner;Ti.zpp_inner.outer=null,Ti.zpp_inner=null,Ti.zpp_pool=jn.poolVec2,jn.poolVec2=Ti,null!=Ai.outer&&(Ai.outer.zpp_inner=null,Ai.outer=null),Ai._isimmutable=null,Ai._validate=null,Ai._invalidate=null,Ai.next=ep.zpp_pool,ep.zpp_pool=Ai,ki.wrap=null}ki.prev=ki.next=null,ki.next=cr.zpp_pool,cr.zpp_pool=ki}}if(Ct.end.next.prev=Ct.start.prev,Ct.start.prev.next=Ct.end.next,Ct.end.next=Ct.start,Ct.start.prev=Ct.end,Ct.path0==Ct.path0.parent)si=Ct.path0;else{for(var Oi=Ct.path0,Ei=null;Oi!=Oi.parent;){var Gi=Oi.parent;Oi.parent=Ei,Ei=Oi,Oi=Gi}for(;null!=Ei;){var Di=Ei.parent;Ei.parent=Oi,Ei=Di}si=Oi}if(Ct.path1==Ct.path1.parent)pi=Ct.path1;else{for(var Ii=Ct.path1,Li=null;Ii!=Ii.parent;){var Bi=Ii.parent;Ii.parent=Li,Li=Ii,Ii=Bi}for(;null!=Li;){var Ri=Li.parent;Li.parent=Ii,Li=Ri}pi=Ii}si!=pi&&(si.rank<pi.rank?si.parent=pi:si.rank>pi.rank?pi.parent=si:(pi.parent=si).rank++)}}else{var Fi,ji,Ni,Ui;if(Ct.end.next.prev=Mt.start.prev,Mt.start.prev.next=Ct.end.next,Ct.end.next=Mt.start,Mt.start.prev=Ct.end,Mt.end.next.prev=Ct.start.prev,Ct.start.prev.next=Mt.end.next,Mt.end.next=Ct.start,Ct.start.prev=Mt.end,Ct.path0==Ct.path0.parent)Fi=Ct.path0;else{for(var Vi=Ct.path0,Hi=null;Vi!=Vi.parent;){var Wi=Vi.parent;Vi.parent=Hi,Hi=Vi,Vi=Wi}for(;null!=Hi;){var qi=Hi.parent;Hi.parent=Vi,Hi=qi}Fi=Vi}if(Mt.path1==Mt.path1.parent)ji=Mt.path1;else{for(var Xi=Mt.path1,Yi=null;Xi!=Xi.parent;){var Ki=Xi.parent;Xi.parent=Yi,Yi=Xi,Xi=Ki}for(;null!=Yi;){var Zi=Yi.parent;Yi.parent=Xi,Yi=Zi}ji=Xi}if(Fi!=ji&&(Fi.rank<ji.rank?Fi.parent=ji:Fi.rank>ji.rank?ji.parent=Fi:(ji.parent=Fi).rank++),Ct.path1==Ct.path1.parent)Ni=Ct.path1;else{for(var Ji=Ct.path1,Qi=null;Ji!=Ji.parent;){var $i=Ji.parent;Ji.parent=Qi,Qi=Ji,Ji=$i}for(;null!=Qi;){var en=Qi.parent;Qi.parent=Ji,Qi=en}Ni=Ji}if(Mt.path0==Mt.path0.parent)Ui=Mt.path0;else{for(var tn=Mt.path0,nn=null;tn!=tn.parent;){var rn=tn.parent;tn.parent=nn,nn=tn,tn=rn}for(;null!=nn;){var on=nn.parent;nn.parent=tn,nn=on}Ui=tn}Ni!=Ui&&(Ni.rank<Ui.rank?Ni.parent=Ui:Ni.rank>Ui.rank?Ui.parent=Ni:(Ui.parent=Ni).rank++)}Ct.end=Ct.start=null,Ct.path0=Ct.path1=null,Ct.next=Cn.zpp_pool,Cn.zpp_pool=Ct,Mt.end=Mt.start=null,Mt.path0=Mt.path1=null,Mt.next=Cn.zpp_pool,Cn.zpp_pool=Mt}for(var an=null==o?new bn:o,sn=Mn.paths.head;null!=sn;){var pn,ln=sn.elt;if(ln==ln.parent)pn=ln;else{for(var hn=ln,un=null;hn!=hn.parent;){var dn=hn.parent;hn.parent=un,un=hn,hn=dn}for(;null!=un;){var cn=un.parent;un.parent=hn,un=cn}pn=hn}if(pn.used)sn=sn.next;else{pn.used=!0;for(var _n=pn.vert,yn=!0;null!=pn.vert&&(yn||_n!=pn.vert);)if(yn=!1,_n.x==_n.next.x&&_n.y==_n.next.y)if(_n==pn.vert&&(pn.vert=_n.next==_n?null:_n.next,yn=!0),null!=_n&&_n.prev==_n)_n.next=_n.prev=null,_n=_n=null;else{var xn=_n.next;_n.prev.next=_n.next,_n.next.prev=_n.prev,_n.next=_n.prev=null,_n=null,_n=xn}else _n=_n.next;if(null!=pn.vert){var mn=wn.get();mn.zpp_inner.vertices=pn.vert,an.zpp_inner.reverse_flag?an.push(mn):an.unshift(mn)}sn=sn.next}}for(;null!=Mn.paths.head;){var gn=Mn.paths.pop_unsafe();gn.vert=null,gn.parent=null,gn.next=Sn.zpp_pool,Sn.zpp_pool=gn}for(;null!=m;)if(null!=m&&m.prev==m){m.next=m.prev=null;var fn=m;fn.vert=null,fn.parent=null,fn.next=Sn.zpp_pool,Sn.zpp_pool=fn,m=m=null}else{var vn=m.next;m.prev.next=m.next,m.next.prev=m.prev,m.next=m.prev=null;var zn=m;zn.vert=null,zn.parent=null,zn.next=Sn.zpp_pool,Sn.zpp_pool=zn,m=null,m=vn}return an},Mn.prototype.__class__=Mn;var bt=zpp_nape.geom.ZPP_Geom=function(){};bt.__name__=["zpp_nape","geom","ZPP_Geom"],bt.validateShape=function(e){if(1==e.type){var t=e.polygon;if(t.zip_gaxi&&null!=t.body){t.zip_gaxi=!1,t.validate_laxi();var i=t.body;if(i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot)),t.zip_gverts&&null!=t.body){t.zip_gverts=!1,t.validate_lverts();var n=t.body;n.zip_axis&&(n.zip_axis=!1,n.axisx=Math.sin(n.rot),n.axisy=Math.cos(n.rot));for(var r=t.lverts.next,o=t.gverts.next;null!=o;){var a=o,s=r;r=r.next,a.x=t.body.posx+(t.body.axisy*s.x-t.body.axisx*s.y),a.y=t.body.posy+(s.x*t.body.axisx+s.y*t.body.axisy),o=o.next}}var p=t.edges.head,l=t.gverts.next,h=l;for(l=l.next;null!=l;){var u=l,d=p.elt;p=p.next,d.gp0=h,d.gp1=u,d.gnormx=t.body.axisy*d.lnormx-t.body.axisx*d.lnormy,d.gnormy=d.lnormx*t.body.axisx+d.lnormy*t.body.axisy,d.gprojection=t.body.posx*d.gnormx+t.body.posy*d.gnormy+d.lprojection,null!=d.wrap_gnorm&&(d.wrap_gnorm.zpp_inner.x=d.gnormx,d.wrap_gnorm.zpp_inner.y=d.gnormy),d.tp0=d.gp0.y*d.gnormx-d.gp0.x*d.gnormy,d.tp1=d.gp1.y*d.gnormx-d.gp1.x*d.gnormy,h=u,l=l.next}var c=p.elt;c.gp0=h,c.gp1=t.gverts.next,c.gnormx=t.body.axisy*c.lnormx-t.body.axisx*c.lnormy,c.gnormy=c.lnormx*t.body.axisx+c.lnormy*t.body.axisy,c.gprojection=t.body.posx*c.gnormx+t.body.posy*c.gnormy+c.lprojection,null!=c.wrap_gnorm&&(c.wrap_gnorm.zpp_inner.x=c.gnormx,c.wrap_gnorm.zpp_inner.y=c.gnormy),c.tp0=c.gp0.y*c.gnormx-c.gp0.x*c.gnormy,c.tp1=c.gp1.y*c.gnormx-c.gp1.x*c.gnormy}}if(e.zip_aabb&&null!=e.body)if(e.zip_aabb=!1,0==e.type){var _=e.circle;if(_.zip_worldCOM&&null!=_.body){if(_.zip_worldCOM=!1,_.zip_localCOM){if(_.zip_localCOM=!1,1==_.type){var y=_.polygon;if(null==y.lverts.next.next)y.localCOMx=y.lverts.next.x,y.localCOMy=y.lverts.next.y;else if(null==y.lverts.next.next.next)y.localCOMx=y.lverts.next.x,y.localCOMy=y.lverts.next.y,y.localCOMx+=y.lverts.next.next.x,y.localCOMy+=y.lverts.next.next.y,y.localCOMx*=.5,y.localCOMy*=.5;else{y.localCOMx=0;var x=y.localCOMy=0,m=y.lverts.next,g=m,f=m=m.next;for(m=m.next;null!=m;){var v=m;x+=f.x*(v.y-g.y);var z=v.y*f.x-v.x*f.y;y.localCOMx+=(f.x+v.x)*z,y.localCOMy+=(f.y+v.y)*z,g=f,f=v,m=m.next}var w=m=y.lverts.next;x+=f.x*(w.y-g.y);var b=w.y*f.x-w.x*f.y;y.localCOMx+=(f.x+w.x)*b,y.localCOMy+=(f.y+w.y)*b,g=f;var S=m=m.next;x+=w.x*(S.y-g.y);var C=S.y*w.x-S.x*w.y;y.localCOMx+=(w.x+S.x)*C,y.localCOMy+=(w.y+S.y)*C;var M=x=1/(3*x);y.localCOMx*=M,y.localCOMy*=M}}null!=_.wrap_localCOM&&(_.wrap_localCOM.zpp_inner.x=_.localCOMx,_.wrap_localCOM.zpp_inner.y=_.localCOMy)}var P=_.body;P.zip_axis&&(P.zip_axis=!1,P.axisx=Math.sin(P.rot),P.axisy=Math.cos(P.rot)),_.worldCOMx=_.body.posx+(_.body.axisy*_.localCOMx-_.body.axisx*_.localCOMy),_.worldCOMy=_.body.posy+(_.localCOMx*_.body.axisx+_.localCOMy*_.body.axisy)}var k=_.radius,T=_.radius;_.aabb.minx=_.worldCOMx-k,_.aabb.miny=_.worldCOMy-T,_.aabb.maxx=_.worldCOMx+k,_.aabb.maxy=_.worldCOMy+T}else{var A=e.polygon;if(A.zip_gverts&&null!=A.body){A.zip_gverts=!1,A.validate_lverts();var O=A.body;O.zip_axis&&(O.zip_axis=!1,O.axisx=Math.sin(O.rot),O.axisy=Math.cos(O.rot));for(var E=A.lverts.next,G=A.gverts.next;null!=G;){var D=G,I=E;E=E.next,D.x=A.body.posx+(A.body.axisy*I.x-A.body.axisx*I.y),D.y=A.body.posy+(I.x*A.body.axisx+I.y*A.body.axisy),G=G.next}}var L=A.gverts.next;A.aabb.minx=L.x,A.aabb.miny=L.y,A.aabb.maxx=L.x,A.aabb.maxy=L.y;for(var B=A.gverts.next.next;null!=B;){var R=B;R.x<A.aabb.minx&&(A.aabb.minx=R.x),R.x>A.aabb.maxx&&(A.aabb.maxx=R.x),R.y<A.aabb.miny&&(A.aabb.miny=R.y),R.y>A.aabb.maxy&&(A.aabb.maxy=R.y),B=B.next}}if(e.zip_worldCOM&&null!=e.body){if(e.zip_worldCOM=!1,e.zip_localCOM){if(e.zip_localCOM=!1,1==e.type){var F=e.polygon;if(null==F.lverts.next.next)F.localCOMx=F.lverts.next.x,F.localCOMy=F.lverts.next.y;else if(null==F.lverts.next.next.next)F.localCOMx=F.lverts.next.x,F.localCOMy=F.lverts.next.y,F.localCOMx+=F.lverts.next.next.x,F.localCOMy+=F.lverts.next.next.y,F.localCOMx*=.5,F.localCOMy*=.5;else{F.localCOMx=0;var j=F.localCOMy=0,N=F.lverts.next,U=N,V=N=N.next;for(N=N.next;null!=N;){var H=N;j+=V.x*(H.y-U.y);var W=H.y*V.x-H.x*V.y;F.localCOMx+=(V.x+H.x)*W,F.localCOMy+=(V.y+H.y)*W,U=V,V=H,N=N.next}var q=N=F.lverts.next;j+=V.x*(q.y-U.y);var X=q.y*V.x-q.x*V.y;F.localCOMx+=(V.x+q.x)*X,F.localCOMy+=(V.y+q.y)*X,U=V;var Y=N=N.next;j+=q.x*(Y.y-U.y);var K=Y.y*q.x-Y.x*q.y;F.localCOMx+=(q.x+Y.x)*K,F.localCOMy+=(q.y+Y.y)*K;var Z=j=1/(3*j);F.localCOMx*=Z,F.localCOMy*=Z}}null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy)}var J=e.body;J.zip_axis&&(J.zip_axis=!1,J.axisx=Math.sin(J.rot),J.axisy=Math.cos(J.rot)),e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy),e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy)}},bt.prototype.__class__=bt;var cr=zpp_nape.geom.ZPP_GeomVert=function(){this.forced=!1,this.wrap=null,this.next=null,this.prev=null,this.y=0,this.x=0};cr.__name__=["zpp_nape","geom","ZPP_GeomVert"],cr.get=function(e,t){var i;return null==cr.zpp_pool?i=new cr:(i=cr.zpp_pool,cr.zpp_pool=i.next,i.next=null),i.forced=!1,i.x=e,i.y=t,i},cr.prototype.x=null,cr.prototype.y=null,cr.prototype.prev=null,cr.prototype.next=null,cr.prototype.wrap=null,cr.prototype.forced=null,cr.prototype.free=function(){if(null!=this.wrap){this.wrap.zpp_inner._inuse=!1;var e=this.wrap,t=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=t.outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=ep.zpp_pool,ep.zpp_pool=t,this.wrap=null}this.prev=this.next=null},cr.prototype.alloc=function(){this.forced=!1},cr.prototype.wrapper=function(){if(null==this.wrap){var e,t=this.x,i=this.y;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap=e,this.wrap.zpp_inner._inuse=!0,this.wrap.zpp_inner._invalidate=$(this,this.modwrap),this.wrap.zpp_inner._validate=$(this,this.getwrap)}return this.wrap},cr.prototype.modwrap=function(e){this.x=e.x,this.y=e.y},cr.prototype.getwrap=function(){this.wrap.zpp_inner.x=this.x,this.wrap.zpp_inner.y=this.y},cr.prototype.__class__=cr;var St=zpp_nape.geom.ZPP_GeomPoly=function(e){this.vertices=null,this.outer=null,this.outer=e};St.__name__=["zpp_nape","geom","ZPP_GeomPoly"],St.prototype.outer=null,St.prototype.vertices=null,St.prototype.__class__=St;var Ct=zpp_nape.geom.ZPP_GeomVertexIterator=function(){this.next=null,this.outer=null,this.forward=!1,this.first=!1,this.start=null,this.ptr=null,this.outer=new H};Ct.__name__=["zpp_nape","geom","ZPP_GeomVertexIterator"],Ct.get=function(e,t){var i;return null==Ct.zpp_pool?i=new Ct:(i=Ct.zpp_pool,Ct.zpp_pool=i.next,i.next=null),(i.outer.zpp_inner=i).ptr=e,i.forward=t,i.start=e,i.first=null!=e,i.outer},Ct.prototype.ptr=null,Ct.prototype.start=null,Ct.prototype.first=null,Ct.prototype.forward=null,Ct.prototype.outer=null,Ct.prototype.next=null,Ct.prototype.free=function(){this.outer.zpp_inner=null,this.ptr=this.start=null},Ct.prototype.alloc=function(){},Ct.prototype.__class__=Ct;var Mt=zpp_nape.geom.ZPP_MarchSpan=function(){this.next=null,this.out=!1,this.rank=0,this.parent=null,this.parent=this};Mt.__name__=["zpp_nape","geom","ZPP_MarchSpan"],Mt.prototype.parent=null,Mt.prototype.rank=null,Mt.prototype.out=null,Mt.prototype.next=null,Mt.prototype.free=function(){this.parent=this},Mt.prototype.alloc=function(){this.out=!1,this.rank=0},Mt.prototype.__class__=Mt;var _r=zpp_nape.geom.ZPP_MarchPair=function(){this.next=null,this.spanr=null,this.span2=null,this.span1=null,this.pd=null,this.okeyr=0,this.keyr=0,this.pr=null,this.okey2=0,this.key2=0,this.p2=null,this.okey1=0,this.key1=0,this.p1=null};_r.__name__=["zpp_nape","geom","ZPP_MarchPair"],_r.prototype.p1=null,_r.prototype.key1=null,_r.prototype.okey1=null,_r.prototype.p2=null,_r.prototype.key2=null,_r.prototype.okey2=null,_r.prototype.pr=null,_r.prototype.keyr=null,_r.prototype.okeyr=null,_r.prototype.pd=null,_r.prototype.span1=null,_r.prototype.span2=null,_r.prototype.spanr=null,_r.prototype.next=null,_r.prototype.free=function(){this.p1=this.p2=this.pr=this.pd=null,this.span1=this.span2=this.spanr=null},_r.prototype.alloc=function(){},_r.prototype.__class__=_r;var yr=zpp_nape.geom.ZPP_MarchingSquares=function(){};yr.__name__=["zpp_nape","geom","ZPP_MarchingSquares"],yr.isos=null,yr.ints=null,yr.map=null,yr.run=function(e,t,i,n,r,o,a,s,p){var l=n-t,h=o.zpp_inner;null!=h._validate&&h._validate();var u=l/o.zpp_inner.x,d=0|u,c=r-i,_=o.zpp_inner;null!=_._validate&&_._validate();var y=c/o.zpp_inner.y,x=0|y;u!=d&&++d,y!=x&&++x,s&&(null==yr.map?yr.map=new di(d,x):yr.map.resize(d,x,null)),null==yr.isos?yr.isos=new hi(d+1,x+1):yr.isos.resize(d+1,x+1,0);for(var m=0,g=x+1;m<g;){var f,v=m++;if(0==v)f=i;else if(v<=x){var z=o.zpp_inner;null!=z._validate&&z._validate(),f=i+o.zpp_inner.y*v}else f=r;for(var w=0,b=d+1;w<b;){var S,C=w++;if(0==C)S=t;else if(C<=d){var M=o.zpp_inner;null!=M._validate&&M._validate(),S=t+o.zpp_inner.x*C}else S=n;var P=yr.isos,k=e(S,f);P.list[v*P.width+C]=k}}null==yr.ints?yr.ints=new ui(d+1,1+(x<<1)):yr.ints.resize(d+1,1+(x<<1),null);var T=null;s&&(null==Mt.zpp_pool?T=new Mt:(T=Mt.zpp_pool,Mt.zpp_pool=T.next,T.next=null),T.out=!1,T.rank=0);for(var A=i,O=0,E=x;O<E;){var G,D=O++,I=A;if(D==x-1)G=r;else{var L=o.zpp_inner;null!=L._validate&&L._validate(),G=i+o.zpp_inner.y*(D+1)}A=G;for(var B=t,R=null,F=0,j=d;F<j;){var N,U=F++,V=B;if(U==d-1)N=n;else{var H=o.zpp_inner;null!=H._validate&&H._validate(),N=t+o.zpp_inner.x*(U+1)}B=N;var W=yr.me.marchSquare(e,yr.isos,yr.ints,V,I,N,G,U,D,0==U||!s,0==D||!s,U==d-1||!s,D==x-1||!s,a);if(null!=W)if(s){var q=null!=W.p2&&14!=W.okey2?W.p2:W.p1;W.pd=0==(128&(q==W.p2?W.okey2:W.okey1))?q.prev:q.prev.prev;var X,Y=yr.map;if(Y.list[D*Y.width+U]=W,null!=R){var K=W.key1,Z=1&K|(192&K)>>5,J=0;0!=(1&Z)&&(J=1),0!=(2&Z)&&++J,0!=(4&Z)&&++J,X=2<=J}else X=!1;if(X)yr.me.combLR(R,W),W.span1=R.spanr;else{null==Mt.zpp_pool?W.span1=new Mt:(W.span1=Mt.zpp_pool,Mt.zpp_pool=W.span1.next,W.span1.next=null);var Q=W.span1;Q.out=!1,Q.rank=0,W.span1.next=T,T=W.span1}if(null!=W.p2){null==Mt.zpp_pool?W.span2=new Mt:(W.span2=Mt.zpp_pool,Mt.zpp_pool=W.span2.next,W.span2.next=null);var $=W.span2;$.out=!1,$.rank=0,W.span2.next=T,T=W.span2,W.spanr=W.span2}else W.spanr=W.span1;var ee=(28&W.keyr)>>2,te=0;0!=(1&ee)&&(te=1),0!=(2&ee)&&++te,0!=(4&ee)&&++te,R=2<=te?W:null}else yr.me.output(p,W.p1),null!=W.p2&&yr.me.output(p,W.p2),W.p1=W.p2=W.pr=W.pd=null,W.span1=W.span2=W.spanr=null,W.next=_r.zpp_pool,_r.zpp_pool=W;else R=null}}if(s){for(var ie=1,ne=x;ie<ne;)for(var re=ie++,oe=null,ae=0,se=d;ae<se;){var pe=ae++,le=yr.map,he=le.list[re*le.width+pe];if(null!=he){var ue=7&(null!=he.p2&&14==he.okey2?he.okey2:he.okey1),de=0;if(0!=(1&ue)&&(de=1),0!=(2&ue)&&++de,0!=(4&ue)&&++de,de<2)oe=null;else{var ce=yr.map,_e=ce.list[(re-1)*ce.width+pe];if(null!=_e){var ye=(112&(null!=_e.p2&&56==_e.okey2?_e.okey2:_e.okey1))>>4,xe=0;if(0!=(1&ye)&&(xe=1),0!=(2&ye)&&++xe,0!=(4&ye)&&++xe,xe<2)oe=null;else{var me,ge,fe=null!=_e.p2&&56==_e.okey2?_e.span2:_e.span1,ve=null!=he.p2&&14==he.okey2?he.span2:he.span1;if(fe==fe.parent)me=fe;else{for(var ze=fe,we=null;ze!=ze.parent;){var be=ze.parent;ze.parent=we,we=ze,ze=be}for(;null!=we;){var Se=we.parent;we.parent=ze,we=Se}me=ze}if(ve==ve.parent)ge=ve;else{for(var Ce=ve,Me=null;Ce!=Ce.parent;){var Pe=Ce.parent;Ce.parent=Me,Me=Ce,Ce=Pe}for(;null!=Me;){var ke=Me.parent;Me.parent=Ce,Me=ke}ge=Ce}if(me==ge)oe!=ve&&yr.me.combUD_virtual(_e,he);else{var Te,Ae;if(fe==fe.parent)Te=fe;else{for(var Oe=fe,Ee=null;Oe!=Oe.parent;){var Ge=Oe.parent;Oe.parent=Ee,Ee=Oe,Oe=Ge}for(;null!=Ee;){var De=Ee.parent;Ee.parent=Oe,Ee=De}Te=Oe}if(ve==ve.parent)Ae=ve;else{for(var Ie=ve,Le=null;Ie!=Ie.parent;){var Be=Ie.parent;Ie.parent=Le,Le=Ie,Ie=Be}for(;null!=Le;){var Re=Le.parent;Le.parent=Ie,Le=Re}Ae=Ie}Te!=Ae&&(Te.rank<Ae.rank?Te.parent=Ae:Te.rank>Ae.rank?Ae.parent=Te:(Ae.parent=Te).rank++),yr.me.combUD(_e,he)}oe=0!=(4&(ve==he.span2?he.okey2:he.okey1))?ve:null}}else oe=null}}else oe=null}for(var Fe=0,je=x;Fe<je;)for(var Ne=Fe++,Ue=0,Ve=d;Ue<Ve;){var He=Ue++,We=yr.map,qe=We.list[Ne*We.width+He];if(null!=qe){var Xe;if(qe.span1==qe.span1.parent)Xe=qe.span1;else{for(var Ye=qe.span1,Ke=null;Ye!=Ye.parent;){var Ze=Ye.parent;Ye.parent=Ke,Ke=Ye,Ye=Ze}for(;null!=Ke;){var Je=Ke.parent;Ke.parent=Ye,Ke=Je}Xe=Ye}if(Xe.out||(Xe.out=!0,yr.me.output(p,qe.p1)),null!=qe.p2){if(qe.span2==qe.span2.parent)Xe=qe.span2;else{for(var Qe=qe.span2,$e=null;Qe!=Qe.parent;){var et=Qe.parent;Qe.parent=$e,$e=Qe,Qe=et}for(;null!=$e;){var tt=$e.parent;$e.parent=Qe,$e=tt}Xe=Qe}Xe.out||(Xe.out=!0,yr.me.output(p,qe.p2))}qe.p1=qe.p2=qe.pr=qe.pd=null,qe.span1=qe.span2=qe.spanr=null,qe.next=_r.zpp_pool,_r.zpp_pool=qe;var it=yr.map;it.list[Ne*it.width+He]=null}}for(;null!=T;){var nt=T;T=nt.next,(nt.parent=nt).next=Mt.zpp_pool,Mt.zpp_pool=nt}}},yr.ISO=function(e,t,i){return e(t,i)},yr.prototype.output=function(e,t){var i;if(null==t||t.next==t||t.next==t.prev)i=!0;else{var n=0,r=t;if(null!=t)for(var o=t;;){var a=o;if(n+=a.x*(a.next.y-a.prev.y),(o=o.next)==r)break}var s=.5*n;i=s*s<Qs.epsilon*Qs.epsilon}if(i)for(;null!=t;)if(null!=t&&t.prev==t)t.next=t.prev=null,t=t=null;else{var p=t.next;t.prev.next=t.next,t.next.prev=t.prev,t.next=t.prev=null,t=null,t=p}else{var l=wn.get();l.zpp_inner.vertices=t,e.zpp_inner.reverse_flag?e.push(l):e.unshift(l)}},yr.prototype.linkright=function(e,t){var i=7&t;return 0==i?e:3==i?e.next.next:e.next},yr.prototype.linkleft=function(e,t){return 0==(1&t)?e.prev:e},yr.prototype.linkdown=function(e,t){return 0==(128&t)?e.prev:e.prev.prev},yr.prototype.linkup=function(e,t){return e},yr.prototype.combLR=function(e,t){var i=e.pr,n=7&e.okeyr,r=0==n?i:3==n?i.next.next:i.next,o=t.p1,a=0==(1&t.okey1)?o.prev:o,s=r.next,p=a.prev;if(0!=(4&e.keyr)){t.pr==t.p1&&(t.pr=r.prev),t.p1=r.prev,r.prev.next=a.next,a.next.prev=r.prev;var l=r;if(null!=l.wrap){l.wrap.zpp_inner._inuse=!1;var h=l.wrap,u=h.zpp_inner;h.zpp_inner.outer=null,h.zpp_inner=null,h.zpp_pool=jn.poolVec2,jn.poolVec2=h,null!=u.outer&&(u.outer.zpp_inner=null,u.outer=null),u._isimmutable=null,u._validate=null,u._invalidate=null,u.next=ep.zpp_pool,ep.zpp_pool=u,l.wrap=null}l.prev=l.next=null,l.next=cr.zpp_pool,cr.zpp_pool=l}else r.next=a.next,a.next.prev=r;var d=a;if(null!=d.wrap){d.wrap.zpp_inner._inuse=!1;var c=d.wrap,_=c.zpp_inner;c.zpp_inner.outer=null,c.zpp_inner=null,c.zpp_pool=jn.poolVec2,jn.poolVec2=c,null!=_.outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=ep.zpp_pool,ep.zpp_pool=_,d.wrap=null}if(d.prev=d.next=null,d.next=cr.zpp_pool,cr.zpp_pool=d,0!=(16&e.keyr)){if(t.pd=s.next,s.next.prev=p.prev,p.prev.next=s.next,null!=s.wrap){s.wrap.zpp_inner._inuse=!1;var y=s.wrap,x=y.zpp_inner;y.zpp_inner.outer=null,y.zpp_inner=null,y.zpp_pool=jn.poolVec2,jn.poolVec2=y,null!=x.outer&&(x.outer.zpp_inner=null,x.outer=null),x._isimmutable=null,x._validate=null,x._invalidate=null,x.next=ep.zpp_pool,ep.zpp_pool=x,s.wrap=null}s.prev=s.next=null,s.next=cr.zpp_pool,cr.zpp_pool=s}else s.prev=p.prev,p.prev.next=s;if(null!=p.wrap){p.wrap.zpp_inner._inuse=!1;var m=p.wrap,g=m.zpp_inner;m.zpp_inner.outer=null,m.zpp_inner=null,m.zpp_pool=jn.poolVec2,jn.poolVec2=m,null!=g.outer&&(g.outer.zpp_inner=null,g.outer=null),g._isimmutable=null,g._validate=null,g._invalidate=null,g.next=ep.zpp_pool,ep.zpp_pool=g,p.wrap=null}p.prev=p.next=null,p.next=cr.zpp_pool,cr.zpp_pool=p},yr.prototype.combUD=function(e,t){null!=e.p2&&e.key2;var i=null!=t.p2&&14==t.key2?t.p2:t.p1,n=e.pd,r=i,o=n.prev,a=r.next;if(r.next=n.next,n.next.prev=r,null!=n.wrap){n.wrap.zpp_inner._inuse=!1;var s=n.wrap,p=s.zpp_inner;s.zpp_inner.outer=null,s.zpp_inner=null,s.zpp_pool=jn.poolVec2,jn.poolVec2=s,null!=p.outer&&(p.outer.zpp_inner=null,p.outer=null),p._isimmutable=null,p._validate=null,p._invalidate=null,p.next=ep.zpp_pool,ep.zpp_pool=p,n.wrap=null}if(n.prev=n.next=null,n.next=cr.zpp_pool,cr.zpp_pool=n,a.prev=o.prev,o.prev.next=a,o==e.p1&&(e.p1=a),null!=o.wrap){o.wrap.zpp_inner._inuse=!1;var l=o.wrap,h=l.zpp_inner;l.zpp_inner.outer=null,l.zpp_inner=null,l.zpp_pool=jn.poolVec2,jn.poolVec2=l,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=ep.zpp_pool,ep.zpp_pool=h,o.wrap=null}o.prev=o.next=null,o.next=cr.zpp_pool,cr.zpp_pool=o},yr.prototype.combUD_virtual=function(e,t){null!=e.p2&&e.key2;var i=null!=t.p2&&14==t.key2?t.p2:t.p1,n=e.pd,r=i;n.forced=r.forced=n.prev.forced=r.next.forced=!0},yr.prototype.combLeft=function(e){var t=1&e|(192&e)>>5,i=0;return 0!=(1&t)&&(i=1),0!=(2&t)&&++i,0!=(4&t)&&++i,2<=i},yr.prototype.combRight=function(e){var t=(28&e)>>2,i=0;return 0!=(1&t)&&(i=1),0!=(2&t)&&++i,0!=(4&t)&&++i,2<=i},yr.prototype.combUp=function(e){var t=7&e,i=0;return 0!=(1&t)&&(i=1),0!=(2&t)&&++i,0!=(4&t)&&++i,2<=i},yr.prototype.combDown=function(e){var t=(112&e)>>4,i=0;return 0!=(1&t)&&(i=1),0!=(2&t)&&++i,0!=(4&t)&&++i,2<=i},yr.prototype.comb=function(e){var t=0;return 0!=(1&e)&&(t=1),0!=(2&e)&&++t,0!=(4&e)&&++t,2<=t},yr.prototype.marchSquare=function(e,t,i,n,r,o,a,s,p,l,h,u,d,c){var _=0,y=t.list[p*t.width+s];y<0&&(_=8);var x=t.list[p*t.width+(s+1)];x<0&&(_|=4);var m=t.list[(p+1)*t.width+(s+1)];m<0&&(_|=2);var g,f=t.list[(p+1)*t.width+s];if(f<0&&(_|=1),0==_)return null;if(null==_r.zpp_pool?g=new _r:(g=_r.zpp_pool,_r.zpp_pool=g.next,g.next=null),10!=_&&5!=_){var v=yr.look_march[_];g.okey1=v;for(var z=0;z<8;){var w=z++;if(0!=(v&1<<w)){var b,S,C,M,P=null;if(0==w)null==cr.zpp_pool?b=new cr:(b=cr.zpp_pool,cr.zpp_pool=b.next,b.next=null),b.forced=!1,b.x=n,b.y=r,P=b,(l||h)&&(P.forced=!0);else if(2==w)null==cr.zpp_pool?S=new cr:(S=cr.zpp_pool,cr.zpp_pool=S.next,S.next=null),S.forced=!1,S.x=o,S.y=r,P=S,(u||h)&&(P.forced=!0);else if(4==w)null==cr.zpp_pool?C=new cr:(C=cr.zpp_pool,cr.zpp_pool=C.next,C.next=null),C.forced=!1,C.x=o,C.y=a,P=C,(u||d)&&(P.forced=!0);else if(6==w)null==cr.zpp_pool?M=new cr:(M=cr.zpp_pool,cr.zpp_pool=M.next,M.next=null),M.forced=!1,M.x=n,M.y=a,P=M,(l||d)&&(P.forced=!0);else if(1==w){if(null==(P=i.list[(p<<1)*i.width+s])){var k,T=this.xlerp(n,o,r,y,x,e,c);null==cr.zpp_pool?k=new cr:(k=cr.zpp_pool,cr.zpp_pool=k.next,k.next=null),k.forced=!1,k.x=T,k.y=r,P=k,i.list[(p<<1)*i.width+s]=P}else{var A,O=P.x,E=P.y;null==cr.zpp_pool?A=new cr:(A=cr.zpp_pool,cr.zpp_pool=A.next,A.next=null),A.forced=!1,A.x=O,A.y=E,P=A}h&&(P.forced=!0),P.x!=n&&P.x!=o||(P.x==n&&0!=(1&v)||P.x==o&&0!=(4&v))&&(v^=2)}else if(5==w){if(null==(P=i.list[(2+(p<<1))*i.width+s])){var G,D=this.xlerp(n,o,a,f,m,e,c);null==cr.zpp_pool?G=new cr:(G=cr.zpp_pool,cr.zpp_pool=G.next,G.next=null),G.forced=!1,G.x=D,G.y=a,P=G,i.list[(2+(p<<1))*i.width+s]=P}else{var I,L=P.x,B=P.y;null==cr.zpp_pool?I=new cr:(I=cr.zpp_pool,cr.zpp_pool=I.next,I.next=null),I.forced=!1,I.x=L,I.y=B,P=I}d&&(P.forced=!0),P.x!=n&&P.x!=o||(P.x==n&&0!=(64&v)||P.x==o&&0!=(16&v))&&(v^=32)}else if(3==w){if(null==(P=i.list[(1+(p<<1))*i.width+(s+1)])){var R,F=this.ylerp(r,a,o,x,m,e,c);null==cr.zpp_pool?R=new cr:(R=cr.zpp_pool,cr.zpp_pool=R.next,R.next=null),R.forced=!1,R.x=o,R.y=F,P=R,i.list[(1+(p<<1))*i.width+(s+1)]=P}else{var j,N=P.x,U=P.y;null==cr.zpp_pool?j=new cr:(j=cr.zpp_pool,cr.zpp_pool=j.next,j.next=null),j.forced=!1,j.x=N,j.y=U,P=j}u&&(P.forced=!0),P.y!=r&&P.y!=a||(P.y==r&&0!=(4&v)||P.y==a&&0!=(16&v))&&(v^=8)}else{if(null==(P=i.list[(1+(p<<1))*i.width+s])){var V,H=this.ylerp(r,a,n,y,f,e,c);null==cr.zpp_pool?V=new cr:(V=cr.zpp_pool,cr.zpp_pool=V.next,V.next=null),V.forced=!1,V.x=n,V.y=H,P=V,i.list[(1+(p<<1))*i.width+s]=P}else{var W,q=P.x,X=P.y;null==cr.zpp_pool?W=new cr:(W=cr.zpp_pool,cr.zpp_pool=W.next,W.next=null),W.forced=!1,W.x=q,W.y=X,P=W}l&&(P.forced=!0),P.y!=r&&P.y!=a||(P.y==r&&0!=(1&v)||P.y==a&&0!=(64&v))&&(v^=128)}var Y=P;null==g.p1?g.p1=Y.prev=Y.next=Y:(Y.prev=g.p1,Y.next=g.p1.next,g.p1.next.prev=Y,g.p1.next=Y),g.p1=Y}}g.p1=g.p1.next,1!=(g.key1=v)&&4!=v&&16!=v&&64!=v&&3!=v&&12!=v&&48!=v&&192!=v&&129!=v&&6!=v&&24!=v&&96!=v&&5!=v&&20!=v&&80!=v&&65!=v&&17!=v&&68!=v||(v=0,g.key1=0,g.p1=null),0==v?g=null:(g.pr=g.p1,g.okeyr=g.okey1,g.keyr=g.key1)}else{var K=e(.5*(n+o),.5*(r+a))<0;if(10==_)if(K){var Z=187;g.okey1=187;for(var J=0;J<8;){var Q=J++;if(0!=(Z&1<<Q)){var $,ee,te,ie,ne=null;if(0==Q)null==cr.zpp_pool?$=new cr:($=cr.zpp_pool,cr.zpp_pool=$.next,$.next=null),$.forced=!1,$.x=n,$.y=r,ne=$,(l||h)&&(ne.forced=!0);else if(2==Q)null==cr.zpp_pool?ee=new cr:(ee=cr.zpp_pool,cr.zpp_pool=ee.next,ee.next=null),ee.forced=!1,ee.x=o,ee.y=r,ne=ee,(u||h)&&(ne.forced=!0);else if(4==Q)null==cr.zpp_pool?te=new cr:(te=cr.zpp_pool,cr.zpp_pool=te.next,te.next=null),te.forced=!1,te.x=o,te.y=a,ne=te,(u||d)&&(ne.forced=!0);else if(6==Q)null==cr.zpp_pool?ie=new cr:(ie=cr.zpp_pool,cr.zpp_pool=ie.next,ie.next=null),ie.forced=!1,ie.x=n,ie.y=a,ne=ie,(l||d)&&(ne.forced=!0);else if(1==Q){if(null==(ne=i.list[(p<<1)*i.width+s])){var re,oe=this.xlerp(n,o,r,y,x,e,c);null==cr.zpp_pool?re=new cr:(re=cr.zpp_pool,cr.zpp_pool=re.next,re.next=null),re.forced=!1,re.x=oe,re.y=r,ne=re,i.list[(p<<1)*i.width+s]=ne}else{var ae,se=ne.x,pe=ne.y;null==cr.zpp_pool?ae=new cr:(ae=cr.zpp_pool,cr.zpp_pool=ae.next,ae.next=null),ae.forced=!1,ae.x=se,ae.y=pe,ne=ae}h&&(ne.forced=!0),ne.x!=n&&ne.x!=o||(ne.x==n&&0!=(1&Z)||ne.x==o&&0!=(4&Z))&&(Z^=2)}else if(5==Q){if(null==(ne=i.list[(2+(p<<1))*i.width+s])){var le,he=this.xlerp(n,o,a,f,m,e,c);null==cr.zpp_pool?le=new cr:(le=cr.zpp_pool,cr.zpp_pool=le.next,le.next=null),le.forced=!1,le.x=he,le.y=a,ne=le,i.list[(2+(p<<1))*i.width+s]=ne}else{var ue,de=ne.x,ce=ne.y;null==cr.zpp_pool?ue=new cr:(ue=cr.zpp_pool,cr.zpp_pool=ue.next,ue.next=null),ue.forced=!1,ue.x=de,ue.y=ce,ne=ue}d&&(ne.forced=!0),ne.x!=n&&ne.x!=o||(ne.x==n&&0!=(64&Z)||ne.x==o&&0!=(16&Z))&&(Z^=32)}else if(3==Q){if(null==(ne=i.list[(1+(p<<1))*i.width+(s+1)])){var _e,ye=this.ylerp(r,a,o,x,m,e,c);null==cr.zpp_pool?_e=new cr:(_e=cr.zpp_pool,cr.zpp_pool=_e.next,_e.next=null),_e.forced=!1,_e.x=o,_e.y=ye,ne=_e,i.list[(1+(p<<1))*i.width+(s+1)]=ne}else{var xe,me=ne.x,ge=ne.y;null==cr.zpp_pool?xe=new cr:(xe=cr.zpp_pool,cr.zpp_pool=xe.next,xe.next=null),xe.forced=!1,xe.x=me,xe.y=ge,ne=xe}u&&(ne.forced=!0),ne.y!=r&&ne.y!=a||(ne.y==r&&0!=(4&Z)||ne.y==a&&0!=(16&Z))&&(Z^=8)}else{if(null==(ne=i.list[(1+(p<<1))*i.width+s])){var fe,ve=this.ylerp(r,a,n,y,f,e,c);null==cr.zpp_pool?fe=new cr:(fe=cr.zpp_pool,cr.zpp_pool=fe.next,fe.next=null),fe.forced=!1,fe.x=n,fe.y=ve,ne=fe,i.list[(1+(p<<1))*i.width+s]=ne}else{var ze,we=ne.x,be=ne.y;null==cr.zpp_pool?ze=new cr:(ze=cr.zpp_pool,cr.zpp_pool=ze.next,ze.next=null),ze.forced=!1,ze.x=we,ze.y=be,ne=ze}l&&(ne.forced=!0),ne.y!=r&&ne.y!=a||(ne.y==r&&0!=(1&Z)||ne.y==a&&0!=(64&Z))&&(Z^=128)}var Se=ne;null==g.p1?g.p1=Se.prev=Se.next=Se:(Se.prev=g.p1,Se.next=g.p1.next,g.p1.next.prev=Se,g.p1.next=Se),g.p1=Se}}g.p1=g.p1.next,1!=(g.key1=Z)&&4!=Z&&16!=Z&&64!=Z&&3!=Z&&12!=Z&&48!=Z&&192!=Z&&129!=Z&&6!=Z&&24!=Z&&96!=Z&&5!=Z&&20!=Z&&80!=Z&&65!=Z&&17!=Z&&68!=Z||(Z=0,g.key1=0,g.p1=null),0==Z?g=null:(g.pr=g.p1,g.okeyr=g.okey1,g.keyr=g.key1)}else{var Ce=131;g.okey1=131;for(var Me=0;Me<8;){var Pe=Me++;if(0!=(Ce&1<<Pe)){var ke,Te,Ae,Oe,Ee=null;if(0==Pe)null==cr.zpp_pool?ke=new cr:(ke=cr.zpp_pool,cr.zpp_pool=ke.next,ke.next=null),ke.forced=!1,ke.x=n,ke.y=r,Ee=ke,(l||h)&&(Ee.forced=!0);else if(2==Pe)null==cr.zpp_pool?Te=new cr:(Te=cr.zpp_pool,cr.zpp_pool=Te.next,Te.next=null),Te.forced=!1,Te.x=o,Te.y=r,Ee=Te,(u||h)&&(Ee.forced=!0);else if(4==Pe)null==cr.zpp_pool?Ae=new cr:(Ae=cr.zpp_pool,cr.zpp_pool=Ae.next,Ae.next=null),Ae.forced=!1,Ae.x=o,Ae.y=a,Ee=Ae,(u||d)&&(Ee.forced=!0);else if(6==Pe)null==cr.zpp_pool?Oe=new cr:(Oe=cr.zpp_pool,cr.zpp_pool=Oe.next,Oe.next=null),Oe.forced=!1,Oe.x=n,Oe.y=a,Ee=Oe,(l||d)&&(Ee.forced=!0);else if(1==Pe){if(null==(Ee=i.list[(p<<1)*i.width+s])){var Ge,De=this.xlerp(n,o,r,y,x,e,c);null==cr.zpp_pool?Ge=new cr:(Ge=cr.zpp_pool,cr.zpp_pool=Ge.next,Ge.next=null),Ge.forced=!1,Ge.x=De,Ge.y=r,Ee=Ge,i.list[(p<<1)*i.width+s]=Ee}else{var Ie,Le=Ee.x,Be=Ee.y;null==cr.zpp_pool?Ie=new cr:(Ie=cr.zpp_pool,cr.zpp_pool=Ie.next,Ie.next=null),Ie.forced=!1,Ie.x=Le,Ie.y=Be,Ee=Ie}h&&(Ee.forced=!0),Ee.x!=n&&Ee.x!=o||(Ee.x==n&&0!=(1&Ce)||Ee.x==o&&0!=(4&Ce))&&(Ce^=2)}else if(5==Pe){if(null==(Ee=i.list[(2+(p<<1))*i.width+s])){var Re,Fe=this.xlerp(n,o,a,f,m,e,c);null==cr.zpp_pool?Re=new cr:(Re=cr.zpp_pool,cr.zpp_pool=Re.next,Re.next=null),Re.forced=!1,Re.x=Fe,Re.y=a,Ee=Re,i.list[(2+(p<<1))*i.width+s]=Ee}else{var je,Ne=Ee.x,Ue=Ee.y;null==cr.zpp_pool?je=new cr:(je=cr.zpp_pool,cr.zpp_pool=je.next,je.next=null),je.forced=!1,je.x=Ne,je.y=Ue,Ee=je}d&&(Ee.forced=!0),Ee.x!=n&&Ee.x!=o||(Ee.x==n&&0!=(64&Ce)||Ee.x==o&&0!=(16&Ce))&&(Ce^=32)}else if(3==Pe){if(null==(Ee=i.list[(1+(p<<1))*i.width+(s+1)])){var Ve,He=this.ylerp(r,a,o,x,m,e,c);null==cr.zpp_pool?Ve=new cr:(Ve=cr.zpp_pool,cr.zpp_pool=Ve.next,Ve.next=null),Ve.forced=!1,Ve.x=o,Ve.y=He,Ee=Ve,i.list[(1+(p<<1))*i.width+(s+1)]=Ee}else{var We,qe=Ee.x,Xe=Ee.y;null==cr.zpp_pool?We=new cr:(We=cr.zpp_pool,cr.zpp_pool=We.next,We.next=null),We.forced=!1,We.x=qe,We.y=Xe,Ee=We}u&&(Ee.forced=!0),Ee.y!=r&&Ee.y!=a||(Ee.y==r&&0!=(4&Ce)||Ee.y==a&&0!=(16&Ce))&&(Ce^=8)}else{if(null==(Ee=i.list[(1+(p<<1))*i.width+s])){var Ye,Ke=this.ylerp(r,a,n,y,f,e,c);null==cr.zpp_pool?Ye=new cr:(Ye=cr.zpp_pool,cr.zpp_pool=Ye.next,Ye.next=null),Ye.forced=!1,Ye.x=n,Ye.y=Ke,Ee=Ye,i.list[(1+(p<<1))*i.width+s]=Ee}else{var Ze,Je=Ee.x,Qe=Ee.y;null==cr.zpp_pool?Ze=new cr:(Ze=cr.zpp_pool,cr.zpp_pool=Ze.next,Ze.next=null),Ze.forced=!1,Ze.x=Je,Ze.y=Qe,Ee=Ze}l&&(Ee.forced=!0),Ee.y!=r&&Ee.y!=a||(Ee.y==r&&0!=(1&Ce)||Ee.y==a&&0!=(64&Ce))&&(Ce^=128)}var $e=Ee;null==g.p1?g.p1=$e.prev=$e.next=$e:($e.prev=g.p1,$e.next=g.p1.next,g.p1.next.prev=$e,g.p1.next=$e),g.p1=$e}}if(g.p1=g.p1.next,1!=(g.key1=Ce)&&4!=Ce&&16!=Ce&&64!=Ce&&3!=Ce&&12!=Ce&&48!=Ce&&192!=Ce&&129!=Ce&&6!=Ce&&24!=Ce&&96!=Ce&&5!=Ce&&20!=Ce&&80!=Ce&&65!=Ce&&17!=Ce&&68!=Ce||(Ce=0,g.key1=0,g.p1=null),0!=Ce){var et=56;g.okey2=56;for(var tt=0;tt<8;){var it=tt++;if(0!=(et&1<<it)){var nt,rt,ot,at,st=null;if(0==it)null==cr.zpp_pool?nt=new cr:(nt=cr.zpp_pool,cr.zpp_pool=nt.next,nt.next=null),nt.forced=!1,nt.x=n,nt.y=r,st=nt,(l||h)&&(st.forced=!0);else if(2==it)null==cr.zpp_pool?rt=new cr:(rt=cr.zpp_pool,cr.zpp_pool=rt.next,rt.next=null),rt.forced=!1,rt.x=o,rt.y=r,st=rt,(u||h)&&(st.forced=!0);else if(4==it)null==cr.zpp_pool?ot=new cr:(ot=cr.zpp_pool,cr.zpp_pool=ot.next,ot.next=null),ot.forced=!1,ot.x=o,ot.y=a,st=ot,(u||d)&&(st.forced=!0);else if(6==it)null==cr.zpp_pool?at=new cr:(at=cr.zpp_pool,cr.zpp_pool=at.next,at.next=null),at.forced=!1,at.x=n,at.y=a,st=at,(l||d)&&(st.forced=!0);else if(1==it){if(null==(st=i.list[(p<<1)*i.width+s])){var pt,lt=this.xlerp(n,o,r,y,x,e,c);null==cr.zpp_pool?pt=new cr:(pt=cr.zpp_pool,cr.zpp_pool=pt.next,pt.next=null),pt.forced=!1,pt.x=lt,pt.y=r,st=pt,i.list[(p<<1)*i.width+s]=st}else{var ht,ut=st.x,dt=st.y;null==cr.zpp_pool?ht=new cr:(ht=cr.zpp_pool,cr.zpp_pool=ht.next,ht.next=null),ht.forced=!1,ht.x=ut,ht.y=dt,st=ht}h&&(st.forced=!0),st.x!=n&&st.x!=o||(st.x==n&&0!=(1&et)||st.x==o&&0!=(4&et))&&(et^=2)}else if(5==it){if(null==(st=i.list[(2+(p<<1))*i.width+s])){var ct,_t=this.xlerp(n,o,a,f,m,e,c);null==cr.zpp_pool?ct=new cr:(ct=cr.zpp_pool,cr.zpp_pool=ct.next,ct.next=null),ct.forced=!1,ct.x=_t,ct.y=a,st=ct,i.list[(2+(p<<1))*i.width+s]=st}else{var yt,xt=st.x,mt=st.y;null==cr.zpp_pool?yt=new cr:(yt=cr.zpp_pool,cr.zpp_pool=yt.next,yt.next=null),yt.forced=!1,yt.x=xt,yt.y=mt,st=yt}d&&(st.forced=!0),st.x!=n&&st.x!=o||(st.x==n&&0!=(64&et)||st.x==o&&0!=(16&et))&&(et^=32)}else if(3==it){if(null==(st=i.list[(1+(p<<1))*i.width+(s+1)])){var gt,ft=this.ylerp(r,a,o,x,m,e,c);null==cr.zpp_pool?gt=new cr:(gt=cr.zpp_pool,cr.zpp_pool=gt.next,gt.next=null),gt.forced=!1,gt.x=o,gt.y=ft,st=gt,i.list[(1+(p<<1))*i.width+(s+1)]=st}else{var vt,zt=st.x,wt=st.y;null==cr.zpp_pool?vt=new cr:(vt=cr.zpp_pool,cr.zpp_pool=vt.next,vt.next=null),vt.forced=!1,vt.x=zt,vt.y=wt,st=vt}u&&(st.forced=!0),st.y!=r&&st.y!=a||(st.y==r&&0!=(4&et)||st.y==a&&0!=(16&et))&&(et^=8)}else{if(null==(st=i.list[(1+(p<<1))*i.width+s])){var bt,St=this.ylerp(r,a,n,y,f,e,c);null==cr.zpp_pool?bt=new cr:(bt=cr.zpp_pool,cr.zpp_pool=bt.next,bt.next=null),bt.forced=!1,bt.x=n,bt.y=St,st=bt,i.list[(1+(p<<1))*i.width+s]=st}else{var Ct,Mt=st.x,Pt=st.y;null==cr.zpp_pool?Ct=new cr:(Ct=cr.zpp_pool,cr.zpp_pool=Ct.next,Ct.next=null),Ct.forced=!1,Ct.x=Mt,Ct.y=Pt,st=Ct}l&&(st.forced=!0),st.y!=r&&st.y!=a||(st.y==r&&0!=(1&et)||st.y==a&&0!=(64&et))&&(et^=128)}var kt=st;null==g.p2?g.p2=kt.prev=kt.next=kt:(kt.prev=g.p2,kt.next=g.p2.next,g.p2.next.prev=kt,g.p2.next=kt),g.p2=kt}}g.p2=g.p2.next,1!=(g.key2=et)&&4!=et&&16!=et&&64!=et&&3!=et&&12!=et&&48!=et&&192!=et&&129!=et&&6!=et&&24!=et&&96!=et&&5!=et&&20!=et&&80!=et&&65!=et&&17!=et&&68!=et||(et=0,g.key2=0,g.p2=null),0==et?(g.pr=g.p1,g.okeyr=g.okey1,g.keyr=g.key1):(g.pr=g.p2,g.okeyr=g.okey2,g.keyr=g.key2)}else{var Tt=56;g.okey1=56;for(var At=0;At<8;){var Ot=At++;if(0!=(Tt&1<<Ot)){var Et,Gt,Dt,It,Lt=null;if(0==Ot)null==cr.zpp_pool?Et=new cr:(Et=cr.zpp_pool,cr.zpp_pool=Et.next,Et.next=null),Et.forced=!1,Et.x=n,Et.y=r,Lt=Et,(l||h)&&(Lt.forced=!0);else if(2==Ot)null==cr.zpp_pool?Gt=new cr:(Gt=cr.zpp_pool,cr.zpp_pool=Gt.next,Gt.next=null),Gt.forced=!1,Gt.x=o,Gt.y=r,Lt=Gt,(u||h)&&(Lt.forced=!0);else if(4==Ot)null==cr.zpp_pool?Dt=new cr:(Dt=cr.zpp_pool,cr.zpp_pool=Dt.next,Dt.next=null),Dt.forced=!1,Dt.x=o,Dt.y=a,Lt=Dt,(u||d)&&(Lt.forced=!0);else if(6==Ot)null==cr.zpp_pool?It=new cr:(It=cr.zpp_pool,cr.zpp_pool=It.next,It.next=null),It.forced=!1,It.x=n,It.y=a,Lt=It,(l||d)&&(Lt.forced=!0);else if(1==Ot){if(null==(Lt=i.list[(p<<1)*i.width+s])){var Bt,Rt=this.xlerp(n,o,r,y,x,e,c);null==cr.zpp_pool?Bt=new cr:(Bt=cr.zpp_pool,cr.zpp_pool=Bt.next,Bt.next=null),Bt.forced=!1,Bt.x=Rt,Bt.y=r,Lt=Bt,i.list[(p<<1)*i.width+s]=Lt}else{var Ft,jt=Lt.x,Nt=Lt.y;null==cr.zpp_pool?Ft=new cr:(Ft=cr.zpp_pool,cr.zpp_pool=Ft.next,Ft.next=null),Ft.forced=!1,Ft.x=jt,Ft.y=Nt,Lt=Ft}h&&(Lt.forced=!0),Lt.x!=n&&Lt.x!=o||(Lt.x==n&&0!=(1&Tt)||Lt.x==o&&0!=(4&Tt))&&(Tt^=2)}else if(5==Ot){if(null==(Lt=i.list[(2+(p<<1))*i.width+s])){var Ut,Vt=this.xlerp(n,o,a,f,m,e,c);null==cr.zpp_pool?Ut=new cr:(Ut=cr.zpp_pool,cr.zpp_pool=Ut.next,Ut.next=null),Ut.forced=!1,Ut.x=Vt,Ut.y=a,Lt=Ut,i.list[(2+(p<<1))*i.width+s]=Lt}else{var Ht,Wt=Lt.x,qt=Lt.y;null==cr.zpp_pool?Ht=new cr:(Ht=cr.zpp_pool,cr.zpp_pool=Ht.next,Ht.next=null),Ht.forced=!1,Ht.x=Wt,Ht.y=qt,Lt=Ht}d&&(Lt.forced=!0),Lt.x!=n&&Lt.x!=o||(Lt.x==n&&0!=(64&Tt)||Lt.x==o&&0!=(16&Tt))&&(Tt^=32)}else if(3==Ot){if(null==(Lt=i.list[(1+(p<<1))*i.width+(s+1)])){var Xt,Yt=this.ylerp(r,a,o,x,m,e,c);null==cr.zpp_pool?Xt=new cr:(Xt=cr.zpp_pool,cr.zpp_pool=Xt.next,Xt.next=null),Xt.forced=!1,Xt.x=o,Xt.y=Yt,Lt=Xt,i.list[(1+(p<<1))*i.width+(s+1)]=Lt}else{var Kt,Zt=Lt.x,Jt=Lt.y;null==cr.zpp_pool?Kt=new cr:(Kt=cr.zpp_pool,cr.zpp_pool=Kt.next,Kt.next=null),Kt.forced=!1,Kt.x=Zt,Kt.y=Jt,Lt=Kt}u&&(Lt.forced=!0),Lt.y!=r&&Lt.y!=a||(Lt.y==r&&0!=(4&Tt)||Lt.y==a&&0!=(16&Tt))&&(Tt^=8)}else{if(null==(Lt=i.list[(1+(p<<1))*i.width+s])){var Qt,$t=this.ylerp(r,a,n,y,f,e,c);null==cr.zpp_pool?Qt=new cr:(Qt=cr.zpp_pool,cr.zpp_pool=Qt.next,Qt.next=null),Qt.forced=!1,Qt.x=n,Qt.y=$t,Lt=Qt,i.list[(1+(p<<1))*i.width+s]=Lt}else{var ei,ti=Lt.x,ii=Lt.y;null==cr.zpp_pool?ei=new cr:(ei=cr.zpp_pool,cr.zpp_pool=ei.next,ei.next=null),ei.forced=!1,ei.x=ti,ei.y=ii,Lt=ei}l&&(Lt.forced=!0),Lt.y!=r&&Lt.y!=a||(Lt.y==r&&0!=(1&Tt)||Lt.y==a&&0!=(64&Tt))&&(Tt^=128)}var ni=Lt;null==g.p1?g.p1=ni.prev=ni.next=ni:(ni.prev=g.p1,ni.next=g.p1.next,g.p1.next.prev=ni,g.p1.next=ni),g.p1=ni}}g.p1=g.p1.next,1!=(g.key1=Tt)&&4!=Tt&&16!=Tt&&64!=Tt&&3!=Tt&&12!=Tt&&48!=Tt&&192!=Tt&&129!=Tt&&6!=Tt&&24!=Tt&&96!=Tt&&5!=Tt&&20!=Tt&&80!=Tt&&65!=Tt&&17!=Tt&&68!=Tt||(Tt=0,g.key1=0,g.p1=null),0==Tt?g=null:(g.pr=g.p1,g.okeyr=g.okey1,g.keyr=g.key1)}}else if(K){var ri=238;g.okey1=238;for(var oi=0;oi<8;){var ai=oi++;if(0!=(ri&1<<ai)){var si,pi,li,hi,ui=null;if(0==ai)null==cr.zpp_pool?si=new cr:(si=cr.zpp_pool,cr.zpp_pool=si.next,si.next=null),si.forced=!1,si.x=n,si.y=r,ui=si,(l||h)&&(ui.forced=!0);else if(2==ai)null==cr.zpp_pool?pi=new cr:(pi=cr.zpp_pool,cr.zpp_pool=pi.next,pi.next=null),pi.forced=!1,pi.x=o,pi.y=r,ui=pi,(u||h)&&(ui.forced=!0);else if(4==ai)null==cr.zpp_pool?li=new cr:(li=cr.zpp_pool,cr.zpp_pool=li.next,li.next=null),li.forced=!1,li.x=o,li.y=a,ui=li,(u||d)&&(ui.forced=!0);else if(6==ai)null==cr.zpp_pool?hi=new cr:(hi=cr.zpp_pool,cr.zpp_pool=hi.next,hi.next=null),hi.forced=!1,hi.x=n,hi.y=a,ui=hi,(l||d)&&(ui.forced=!0);else if(1==ai){if(null==(ui=i.list[(p<<1)*i.width+s])){var di,ci=this.xlerp(n,o,r,y,x,e,c);null==cr.zpp_pool?di=new cr:(di=cr.zpp_pool,cr.zpp_pool=di.next,di.next=null),di.forced=!1,di.x=ci,di.y=r,ui=di,i.list[(p<<1)*i.width+s]=ui}else{var _i,yi=ui.x,xi=ui.y;null==cr.zpp_pool?_i=new cr:(_i=cr.zpp_pool,cr.zpp_pool=_i.next,_i.next=null),_i.forced=!1,_i.x=yi,_i.y=xi,ui=_i}h&&(ui.forced=!0),ui.x!=n&&ui.x!=o||(ui.x==n&&0!=(1&ri)||ui.x==o&&0!=(4&ri))&&(ri^=2)}else if(5==ai){if(null==(ui=i.list[(2+(p<<1))*i.width+s])){var mi,gi=this.xlerp(n,o,a,f,m,e,c);null==cr.zpp_pool?mi=new cr:(mi=cr.zpp_pool,cr.zpp_pool=mi.next,mi.next=null),mi.forced=!1,mi.x=gi,mi.y=a,ui=mi,i.list[(2+(p<<1))*i.width+s]=ui}else{var fi,vi=ui.x,zi=ui.y;null==cr.zpp_pool?fi=new cr:(fi=cr.zpp_pool,cr.zpp_pool=fi.next,fi.next=null),fi.forced=!1,fi.x=vi,fi.y=zi,ui=fi}d&&(ui.forced=!0),ui.x!=n&&ui.x!=o||(ui.x==n&&0!=(64&ri)||ui.x==o&&0!=(16&ri))&&(ri^=32)}else if(3==ai){if(null==(ui=i.list[(1+(p<<1))*i.width+(s+1)])){var wi,bi=this.ylerp(r,a,o,x,m,e,c);null==cr.zpp_pool?wi=new cr:(wi=cr.zpp_pool,cr.zpp_pool=wi.next,wi.next=null),wi.forced=!1,wi.x=o,wi.y=bi,ui=wi,i.list[(1+(p<<1))*i.width+(s+1)]=ui}else{var Si,Ci=ui.x,Mi=ui.y;null==cr.zpp_pool?Si=new cr:(Si=cr.zpp_pool,cr.zpp_pool=Si.next,Si.next=null),Si.forced=!1,Si.x=Ci,Si.y=Mi,ui=Si}u&&(ui.forced=!0),ui.y!=r&&ui.y!=a||(ui.y==r&&0!=(4&ri)||ui.y==a&&0!=(16&ri))&&(ri^=8)}else{if(null==(ui=i.list[(1+(p<<1))*i.width+s])){var Pi,ki=this.ylerp(r,a,n,y,f,e,c);null==cr.zpp_pool?Pi=new cr:(Pi=cr.zpp_pool,cr.zpp_pool=Pi.next,Pi.next=null),Pi.forced=!1,Pi.x=n,Pi.y=ki,ui=Pi,i.list[(1+(p<<1))*i.width+s]=ui}else{var Ti,Ai=ui.x,Oi=ui.y;null==cr.zpp_pool?Ti=new cr:(Ti=cr.zpp_pool,cr.zpp_pool=Ti.next,Ti.next=null),Ti.forced=!1,Ti.x=Ai,Ti.y=Oi,ui=Ti}l&&(ui.forced=!0),ui.y!=r&&ui.y!=a||(ui.y==r&&0!=(1&ri)||ui.y==a&&0!=(64&ri))&&(ri^=128)}var Ei=ui;null==g.p1?g.p1=Ei.prev=Ei.next=Ei:(Ei.prev=g.p1,Ei.next=g.p1.next,g.p1.next.prev=Ei,g.p1.next=Ei),g.p1=Ei}}g.p1=g.p1.next,1!=(g.key1=ri)&&4!=ri&&16!=ri&&64!=ri&&3!=ri&&12!=ri&&48!=ri&&192!=ri&&129!=ri&&6!=ri&&24!=ri&&96!=ri&&5!=ri&&20!=ri&&80!=ri&&65!=ri&&17!=ri&&68!=ri||(ri=0,g.key1=0,g.p1=null),0==ri?g=null:(g.pr=g.p1,g.okeyr=g.okey1,g.keyr=g.key1)}else{var Gi=224;g.okey1=224;for(var Di=0;Di<8;){var Ii=Di++;if(0!=(Gi&1<<Ii)){var Li,Bi,Ri,Fi,ji=null;if(0==Ii)null==cr.zpp_pool?Li=new cr:(Li=cr.zpp_pool,cr.zpp_pool=Li.next,Li.next=null),Li.forced=!1,Li.x=n,Li.y=r,ji=Li,(l||h)&&(ji.forced=!0);else if(2==Ii)null==cr.zpp_pool?Bi=new cr:(Bi=cr.zpp_pool,cr.zpp_pool=Bi.next,Bi.next=null),Bi.forced=!1,Bi.x=o,Bi.y=r,ji=Bi,(u||h)&&(ji.forced=!0);else if(4==Ii)null==cr.zpp_pool?Ri=new cr:(Ri=cr.zpp_pool,cr.zpp_pool=Ri.next,Ri.next=null),Ri.forced=!1,Ri.x=o,Ri.y=a,ji=Ri,(u||d)&&(ji.forced=!0);else if(6==Ii)null==cr.zpp_pool?Fi=new cr:(Fi=cr.zpp_pool,cr.zpp_pool=Fi.next,Fi.next=null),Fi.forced=!1,Fi.x=n,Fi.y=a,ji=Fi,(l||d)&&(ji.forced=!0);else if(1==Ii){if(null==(ji=i.list[(p<<1)*i.width+s])){var Ni,Ui=this.xlerp(n,o,r,y,x,e,c);null==cr.zpp_pool?Ni=new cr:(Ni=cr.zpp_pool,cr.zpp_pool=Ni.next,Ni.next=null),Ni.forced=!1,Ni.x=Ui,Ni.y=r,ji=Ni,i.list[(p<<1)*i.width+s]=ji}else{var Vi,Hi=ji.x,Wi=ji.y;null==cr.zpp_pool?Vi=new cr:(Vi=cr.zpp_pool,cr.zpp_pool=Vi.next,Vi.next=null),Vi.forced=!1,Vi.x=Hi,Vi.y=Wi,ji=Vi}h&&(ji.forced=!0),ji.x!=n&&ji.x!=o||(ji.x==n&&0!=(1&Gi)||ji.x==o&&0!=(4&Gi))&&(Gi^=2)}else if(5==Ii){if(null==(ji=i.list[(2+(p<<1))*i.width+s])){var qi,Xi=this.xlerp(n,o,a,f,m,e,c);null==cr.zpp_pool?qi=new cr:(qi=cr.zpp_pool,cr.zpp_pool=qi.next,qi.next=null),qi.forced=!1,qi.x=Xi,qi.y=a,ji=qi,i.list[(2+(p<<1))*i.width+s]=ji}else{var Yi,Ki=ji.x,Zi=ji.y;null==cr.zpp_pool?Yi=new cr:(Yi=cr.zpp_pool,cr.zpp_pool=Yi.next,Yi.next=null),Yi.forced=!1,Yi.x=Ki,Yi.y=Zi,ji=Yi}d&&(ji.forced=!0),ji.x!=n&&ji.x!=o||(ji.x==n&&0!=(64&Gi)||ji.x==o&&0!=(16&Gi))&&(Gi^=32)}else if(3==Ii){if(null==(ji=i.list[(1+(p<<1))*i.width+(s+1)])){var Ji,Qi=this.ylerp(r,a,o,x,m,e,c);null==cr.zpp_pool?Ji=new cr:(Ji=cr.zpp_pool,cr.zpp_pool=Ji.next,Ji.next=null),Ji.forced=!1,Ji.x=o,Ji.y=Qi,ji=Ji,i.list[(1+(p<<1))*i.width+(s+1)]=ji}else{var $i,en=ji.x,tn=ji.y;null==cr.zpp_pool?$i=new cr:($i=cr.zpp_pool,cr.zpp_pool=$i.next,$i.next=null),$i.forced=!1,$i.x=en,$i.y=tn,ji=$i}u&&(ji.forced=!0),ji.y!=r&&ji.y!=a||(ji.y==r&&0!=(4&Gi)||ji.y==a&&0!=(16&Gi))&&(Gi^=8)}else{if(null==(ji=i.list[(1+(p<<1))*i.width+s])){var nn,rn=this.ylerp(r,a,n,y,f,e,c);null==cr.zpp_pool?nn=new cr:(nn=cr.zpp_pool,cr.zpp_pool=nn.next,nn.next=null),nn.forced=!1,nn.x=n,nn.y=rn,ji=nn,i.list[(1+(p<<1))*i.width+s]=ji}else{var on,an=ji.x,sn=ji.y;null==cr.zpp_pool?on=new cr:(on=cr.zpp_pool,cr.zpp_pool=on.next,on.next=null),on.forced=!1,on.x=an,on.y=sn,ji=on}l&&(ji.forced=!0),ji.y!=r&&ji.y!=a||(ji.y==r&&0!=(1&Gi)||ji.y==a&&0!=(64&Gi))&&(Gi^=128)}var pn=ji;null==g.p1?g.p1=pn.prev=pn.next=pn:(pn.prev=g.p1,pn.next=g.p1.next,g.p1.next.prev=pn,g.p1.next=pn),g.p1=pn}}if(g.p1=g.p1.next,1!=(g.key1=Gi)&&4!=Gi&&16!=Gi&&64!=Gi&&3!=Gi&&12!=Gi&&48!=Gi&&192!=Gi&&129!=Gi&&6!=Gi&&24!=Gi&&96!=Gi&&5!=Gi&&20!=Gi&&80!=Gi&&65!=Gi&&17!=Gi&&68!=Gi||(Gi=0,g.key1=0,g.p1=null),0!=Gi){var ln=14;g.okey2=14;for(var hn=0;hn<8;){var un=hn++;if(0!=(ln&1<<un)){var dn,cn,_n,yn,xn=null;if(0==un)null==cr.zpp_pool?dn=new cr:(dn=cr.zpp_pool,cr.zpp_pool=dn.next,dn.next=null),dn.forced=!1,dn.x=n,dn.y=r,xn=dn,(l||h)&&(xn.forced=!0);else if(2==un)null==cr.zpp_pool?cn=new cr:(cn=cr.zpp_pool,cr.zpp_pool=cn.next,cn.next=null),cn.forced=!1,cn.x=o,cn.y=r,xn=cn,(u||h)&&(xn.forced=!0);else if(4==un)null==cr.zpp_pool?_n=new cr:(_n=cr.zpp_pool,cr.zpp_pool=_n.next,_n.next=null),_n.forced=!1,_n.x=o,_n.y=a,xn=_n,(u||d)&&(xn.forced=!0);else if(6==un)null==cr.zpp_pool?yn=new cr:(yn=cr.zpp_pool,cr.zpp_pool=yn.next,yn.next=null),yn.forced=!1,yn.x=n,yn.y=a,xn=yn,(l||d)&&(xn.forced=!0);else if(1==un){if(null==(xn=i.list[(p<<1)*i.width+s])){var mn,gn=this.xlerp(n,o,r,y,x,e,c);null==cr.zpp_pool?mn=new cr:(mn=cr.zpp_pool,cr.zpp_pool=mn.next,mn.next=null),mn.forced=!1,mn.x=gn,mn.y=r,xn=mn,i.list[(p<<1)*i.width+s]=xn}else{var fn,vn=xn.x,zn=xn.y;null==cr.zpp_pool?fn=new cr:(fn=cr.zpp_pool,cr.zpp_pool=fn.next,fn.next=null),fn.forced=!1,fn.x=vn,fn.y=zn,xn=fn}h&&(xn.forced=!0),xn.x!=n&&xn.x!=o||(xn.x==n&&0!=(1&ln)||xn.x==o&&0!=(4&ln))&&(ln^=2)}else if(5==un){if(null==(xn=i.list[(2+(p<<1))*i.width+s])){var wn,bn=this.xlerp(n,o,a,f,m,e,c);null==cr.zpp_pool?wn=new cr:(wn=cr.zpp_pool,cr.zpp_pool=wn.next,wn.next=null),wn.forced=!1,wn.x=bn,wn.y=a,xn=wn,i.list[(2+(p<<1))*i.width+s]=xn}else{var Sn,Cn=xn.x,Mn=xn.y;null==cr.zpp_pool?Sn=new cr:(Sn=cr.zpp_pool,cr.zpp_pool=Sn.next,Sn.next=null),Sn.forced=!1,Sn.x=Cn,Sn.y=Mn,xn=Sn}d&&(xn.forced=!0),xn.x!=n&&xn.x!=o||(xn.x==n&&0!=(64&ln)||xn.x==o&&0!=(16&ln))&&(ln^=32)}else if(3==un){if(null==(xn=i.list[(1+(p<<1))*i.width+(s+1)])){var Pn,kn=this.ylerp(r,a,o,x,m,e,c);null==cr.zpp_pool?Pn=new cr:(Pn=cr.zpp_pool,cr.zpp_pool=Pn.next,Pn.next=null),Pn.forced=!1,Pn.x=o,Pn.y=kn,xn=Pn,i.list[(1+(p<<1))*i.width+(s+1)]=xn}else{var Tn,An=xn.x,On=xn.y;null==cr.zpp_pool?Tn=new cr:(Tn=cr.zpp_pool,cr.zpp_pool=Tn.next,Tn.next=null),Tn.forced=!1,Tn.x=An,Tn.y=On,xn=Tn}u&&(xn.forced=!0),xn.y!=r&&xn.y!=a||(xn.y==r&&0!=(4&ln)||xn.y==a&&0!=(16&ln))&&(ln^=8)}else{if(null==(xn=i.list[(1+(p<<1))*i.width+s])){var En,Gn=this.ylerp(r,a,n,y,f,e,c);null==cr.zpp_pool?En=new cr:(En=cr.zpp_pool,cr.zpp_pool=En.next,En.next=null),En.forced=!1,En.x=n,En.y=Gn,xn=En,i.list[(1+(p<<1))*i.width+s]=xn}else{var Dn,In=xn.x,Ln=xn.y;null==cr.zpp_pool?Dn=new cr:(Dn=cr.zpp_pool,cr.zpp_pool=Dn.next,Dn.next=null),Dn.forced=!1,Dn.x=In,Dn.y=Ln,xn=Dn}l&&(xn.forced=!0),xn.y!=r&&xn.y!=a||(xn.y==r&&0!=(1&ln)||xn.y==a&&0!=(64&ln))&&(ln^=128)}var Bn=xn;null==g.p2?g.p2=Bn.prev=Bn.next=Bn:(Bn.prev=g.p2,Bn.next=g.p2.next,g.p2.next.prev=Bn,g.p2.next=Bn),g.p2=Bn}}g.p2=g.p2.next,1!=(g.key2=ln)&&4!=ln&&16!=ln&&64!=ln&&3!=ln&&12!=ln&&48!=ln&&192!=ln&&129!=ln&&6!=ln&&24!=ln&&96!=ln&&5!=ln&&20!=ln&&80!=ln&&65!=ln&&17!=ln&&68!=ln||(ln=0,g.key2=0,g.p2=null),0==ln?(g.pr=g.p1,g.okeyr=g.okey1,g.keyr=g.key1):(g.pr=g.p2,g.okeyr=g.okey2,g.keyr=g.key2)}else{var Rn=14;g.okey1=14;for(var Fn=0;Fn<8;){var jn=Fn++;if(0!=(Rn&1<<jn)){var Nn,Un,Vn,Hn,Wn=null;if(0==jn)null==cr.zpp_pool?Nn=new cr:(Nn=cr.zpp_pool,cr.zpp_pool=Nn.next,Nn.next=null),Nn.forced=!1,Nn.x=n,Nn.y=r,Wn=Nn,(l||h)&&(Wn.forced=!0);else if(2==jn)null==cr.zpp_pool?Un=new cr:(Un=cr.zpp_pool,cr.zpp_pool=Un.next,Un.next=null),Un.forced=!1,Un.x=o,Un.y=r,Wn=Un,(u||h)&&(Wn.forced=!0);else if(4==jn)null==cr.zpp_pool?Vn=new cr:(Vn=cr.zpp_pool,cr.zpp_pool=Vn.next,Vn.next=null),Vn.forced=!1,Vn.x=o,Vn.y=a,Wn=Vn,(u||d)&&(Wn.forced=!0);else if(6==jn)null==cr.zpp_pool?Hn=new cr:(Hn=cr.zpp_pool,cr.zpp_pool=Hn.next,Hn.next=null),Hn.forced=!1,Hn.x=n,Hn.y=a,Wn=Hn,(l||d)&&(Wn.forced=!0);else if(1==jn){if(null==(Wn=i.list[(p<<1)*i.width+s])){var qn,Xn=this.xlerp(n,o,r,y,x,e,c);null==cr.zpp_pool?qn=new cr:(qn=cr.zpp_pool,cr.zpp_pool=qn.next,qn.next=null),qn.forced=!1,qn.x=Xn,qn.y=r,Wn=qn,i.list[(p<<1)*i.width+s]=Wn}else{var Yn,Kn=Wn.x,Zn=Wn.y;null==cr.zpp_pool?Yn=new cr:(Yn=cr.zpp_pool,cr.zpp_pool=Yn.next,Yn.next=null),Yn.forced=!1,Yn.x=Kn,Yn.y=Zn,Wn=Yn}h&&(Wn.forced=!0),Wn.x!=n&&Wn.x!=o||(Wn.x==n&&0!=(1&Rn)||Wn.x==o&&0!=(4&Rn))&&(Rn^=2)}else if(5==jn){if(null==(Wn=i.list[(2+(p<<1))*i.width+s])){var Jn,Qn=this.xlerp(n,o,a,f,m,e,c);null==cr.zpp_pool?Jn=new cr:(Jn=cr.zpp_pool,cr.zpp_pool=Jn.next,Jn.next=null),Jn.forced=!1,Jn.x=Qn,Jn.y=a,Wn=Jn,i.list[(2+(p<<1))*i.width+s]=Wn}else{var $n,er=Wn.x,tr=Wn.y;null==cr.zpp_pool?$n=new cr:($n=cr.zpp_pool,cr.zpp_pool=$n.next,$n.next=null),$n.forced=!1,$n.x=er,$n.y=tr,Wn=$n}d&&(Wn.forced=!0),Wn.x!=n&&Wn.x!=o||(Wn.x==n&&0!=(64&Rn)||Wn.x==o&&0!=(16&Rn))&&(Rn^=32)}else if(3==jn){if(null==(Wn=i.list[(1+(p<<1))*i.width+(s+1)])){var ir,nr=this.ylerp(r,a,o,x,m,e,c);null==cr.zpp_pool?ir=new cr:(ir=cr.zpp_pool,cr.zpp_pool=ir.next,ir.next=null),ir.forced=!1,ir.x=o,ir.y=nr,Wn=ir,i.list[(1+(p<<1))*i.width+(s+1)]=Wn}else{var rr,or=Wn.x,ar=Wn.y;null==cr.zpp_pool?rr=new cr:(rr=cr.zpp_pool,cr.zpp_pool=rr.next,rr.next=null),rr.forced=!1,rr.x=or,rr.y=ar,Wn=rr}u&&(Wn.forced=!0),Wn.y!=r&&Wn.y!=a||(Wn.y==r&&0!=(4&Rn)||Wn.y==a&&0!=(16&Rn))&&(Rn^=8)}else{if(null==(Wn=i.list[(1+(p<<1))*i.width+s])){var sr,pr=this.ylerp(r,a,n,y,f,e,c);null==cr.zpp_pool?sr=new cr:(sr=cr.zpp_pool,cr.zpp_pool=sr.next,sr.next=null),sr.forced=!1,sr.x=n,sr.y=pr,Wn=sr,i.list[(1+(p<<1))*i.width+s]=Wn}else{var lr,hr=Wn.x,ur=Wn.y;null==cr.zpp_pool?lr=new cr:(lr=cr.zpp_pool,cr.zpp_pool=lr.next,lr.next=null),lr.forced=!1,lr.x=hr,lr.y=ur,Wn=lr}l&&(Wn.forced=!0),Wn.y!=r&&Wn.y!=a||(Wn.y==r&&0!=(1&Rn)||Wn.y==a&&0!=(64&Rn))&&(Rn^=128)}var dr=Wn;null==g.p1?g.p1=dr.prev=dr.next=dr:(dr.prev=g.p1,dr.next=g.p1.next,g.p1.next.prev=dr,g.p1.next=dr),g.p1=dr}}g.p1=g.p1.next,1!=(g.key1=Rn)&&4!=Rn&&16!=Rn&&64!=Rn&&3!=Rn&&12!=Rn&&48!=Rn&&192!=Rn&&129!=Rn&&6!=Rn&&24!=Rn&&96!=Rn&&5!=Rn&&20!=Rn&&80!=Rn&&65!=Rn&&17!=Rn&&68!=Rn||(Rn=0,g.key1=0,g.p1=null),0==Rn?g=null:(g.pr=g.p1,g.okeyr=g.okey1,g.keyr=g.key1)}}}return g},yr.prototype.lerp=function(e,t,i,n){if(0==i)return e;if(0==n)return t;var r=i-n,o=r*r<Qs.epsilon*Qs.epsilon?.5:i/r;return o<0?o=0:1<o&&(o=1),e+o*(t-e)},yr.prototype.xlerp=function(e,t,i,n,r,o,a){var s;if(0==n)s=e;else if(0==r)s=t;else{var p=n-r,l=p*p<Qs.epsilon*Qs.epsilon?.5:n/p;l<0?l=0:1<l&&(l=1),s=e+l*(t-e)}for(;0!=a--&&e<s&&s<t;){var h=o(s,i);if(0==h)break;if(n*h<0?(t=s,r=h):(e=s,n=h),0==n)s=e;else if(0==r)s=t;else{var u=n-r,d=u*u<Qs.epsilon*Qs.epsilon?.5:n/u;d<0?d=0:1<d&&(d=1),s=e+d*(t-e)}}return s},yr.prototype.ylerp=function(e,t,i,n,r,o,a){var s;if(0==n)s=e;else if(0==r)s=t;else{var p=n-r,l=p*p<Qs.epsilon*Qs.epsilon?.5:n/p;l<0?l=0:1<l&&(l=1),s=e+l*(t-e)}for(;0!=a--&&e<s&&s<t;){var h=o(i,s);if(0==h)break;if(n*h<0?(t=s,r=h):(e=s,n=h),0==n)s=e;else if(0==r)s=t;else{var u=n-r,d=u*u<Qs.epsilon*Qs.epsilon?.5:n/u;d<0?d=0:1<d&&(d=1),s=e+d*(t-e)}}return s},yr.prototype.__class__=yr;var Pt=zpp_nape.geom.ZPP_Mat23=function(){this.next=null,this._invalidate=null,this.ty=0,this.tx=0,this.d=0,this.c=0,this.b=0,this.a=0,this.outer=null};Pt.__name__=["zpp_nape","geom","ZPP_Mat23"],Pt.get=function(){var e;return null==Pt.zpp_pool?e=new Pt:(e=Pt.zpp_pool,Pt.zpp_pool=e.next,e.next=null),e},Pt.identity=function(){var e=Pt.get();return e.setas(1,0,0,1,0,0),e},Pt.prototype.outer=null,Pt.prototype.wrapper=function(){if(null==this.outer){this.outer=new ne;var e=this.outer.zpp_inner;e.next=Pt.zpp_pool,Pt.zpp_pool=e,this.outer.zpp_inner=this}return this.outer},Pt.prototype.a=null,Pt.prototype.b=null,Pt.prototype.c=null,Pt.prototype.d=null,Pt.prototype.tx=null,Pt.prototype.ty=null,Pt.prototype._invalidate=null,Pt.prototype.invalidate=function(){null!=this._invalidate&&this._invalidate()},Pt.prototype.set=function(e){this.setas(e.a,e.b,e.c,e.d,e.tx,e.ty)},Pt.prototype.setas=function(e,t,i,n,r,o){this.tx=r,this.ty=o,this.a=e,this.b=t,this.c=i,this.d=n},Pt.prototype.next=null,Pt.prototype.free=function(){},Pt.prototype.alloc=function(){},Pt.prototype.__class__=Pt;var kt=zpp_nape.geom.ZPP_MatMN=function(e,t){this.x=null,this.n=0,this.m=0,this.outer=null,this.m=e,this.n=t,this.x=[];for(var i=0,n=e*t;i<n;)++i,this.x.push(0)};kt.__name__=["zpp_nape","geom","ZPP_MatMN"],kt.prototype.outer=null,kt.prototype.m=null,kt.prototype.n=null,kt.prototype.x=null,kt.prototype.__class__=kt;var Tt=zpp_nape.geom.ZPP_Monotone=function(){};Tt.__name__=["zpp_nape","geom","ZPP_Monotone"],Tt.bisector=function(e){var t,i,n=e.prev,r=e.next;t=e.x-n.x,i=e.y-n.y;var o,a,s;o=r.x-e.x,a=r.y-e.y,null==ep.zpp_pool?s=new ep:(s=ep.zpp_pool,ep.zpp_pool=s.next,s.next=null),s.weak=!1,s._immutable=!1,s.x=-i-a,s.y=t+o;var p=s,l=1/Math.sqrt(p.x*p.x+p.y*p.y);return p.x*=l,p.y*=l,a*t-o*i<0&&(p.x=-p.x,p.y=-p.y),p},Tt.below=function(e,t){if(e.y<t.y)return!0;if(e.y>t.y)return!1;if(e.x<t.x)return!0;if(e.x>t.x)return!1;var i=Tt.bisector(e),n=Tt.bisector(t);i.x+=e.x,i.y+=e.y,n.x+=t.x,n.y+=t.y;var r=i.x<n.x||i.x==n.x&&i.y<n.y;return null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=ep.zpp_pool,ep.zpp_pool=i,null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n._isimmutable=null,n._validate=null,n._invalidate=null,n.next=ep.zpp_pool,ep.zpp_pool=n,r},Tt.above=function(e,t){return Tt.below(t,e)},Tt.left_vertex=function(e){var t=e.prev;return t.y>e.y||t.y==e.y&&e.next.y<e.y},Tt.isMonotone=function(e){var t=e,i=e,n=e.next;if(null!=n)for(var r=n;;){var o=r;if(o.y<t.y&&(t=o),o.y>i.y&&(i=o),(r=r.next)==e)break}var a=!0,s=t;if(i!=t.next){var p=t.next,l=i;if(null!=p)for(var h=p;;){var u=h;if(u.y<s.y){a=!1;break}if(s=u,(h=h.next)==l)break}}if(!a)return!1;if(i!=(s=t).prev){var d=t.prev,c=i;if(null!=d)for(var _=d;;){var y=_;if(y.y<s.y){a=!1;break}if(s=y,(_=_.prev)==c)break}}return a},Tt.sharedPPoly=null,Tt.getShared=function(){return null==Tt.sharedPPoly&&(Tt.sharedPPoly=new Ot),Tt.sharedPPoly},Tt.decompose=function(e,t){if(null==t?t=new Ot(e):t.init(e),null==t.vertices)return t;null==Tt.queue&&(Tt.queue=new zi);var i=t.vertices,n=t.vertices;if(null!=i)for(var r=i;;){var o=r;Tt.queue.add(o);var a,s;a=o.next.x-o.x,s=o.next.y-o.y;var p;p=o.prev.x-o.x;var l=0<(o.prev.y-o.y)*a-p*s;if(o.type=Tt.below(o.prev,o)?Tt.below(o.next,o)?l?0:3:4:Tt.below(o,o.next)?l?1:2:4,(r=r.next)==n)break}var h=Tt.queue;if(null!=h.head&&null!=h.head.next){for(var u,d,c,_=h.head,y=null,x=null,m=null,g=null,f=1;;){for(u=0,x=_,y=_=null;null!=x;){for(++u,m=x,d=0,c=f;null!=m&&d<f;)++d,m=m.next;for(;0<d||0<c&&null!=m;)0==d?(m=(g=m).next,--c):0==c||null==m?(x=(g=x).next,--d):Tt.above(x.elt,m.elt)?(x=(g=x).next,--d):(m=(g=m).next,--c),null!=y?y.next=g:_=g,y=g;x=m}if(y.next=null,f<<=1,!(1<u))break}h.head=_,h.modified=!0,h.pushmod=!0}for(null==Tt.edges&&(null==Vn.zpp_pool?Tt.edges=new Vn:(Tt.edges=Vn.zpp_pool,Vn.zpp_pool=Tt.edges.next,Tt.edges.next=null),Tt.edges.lt=At.edge_lt,Tt.edges.swapped=At.edge_swap);null!=Tt.queue.head;){var v=Tt.queue.pop_unsafe();switch(v.type){case 0:(v.helper=v).node=Tt.edges.insert(v);break;case 1:var z=v.prev;2==z.helper.type&&t.add_diagonal(v,z.helper),Tt.edges.remove_node(z.node);break;case 2:var w=v.prev;2==w.helper.type&&t.add_diagonal(v,w.helper),Tt.edges.remove_node(w.node);var b=null;if(!Tt.edges.empty()){for(var S=Tt.edges.parent;null!=S.prev;)S=S.prev;for(;null!=S;){var C=S.data;if(!At.vert_lt(C,v)){b=C;break}if(null!=S.next)for(S=S.next;null!=S.prev;)S=S.prev;else{for(;null!=S.parent&&S==S.parent.next;)S=S.parent;S=S.parent}}}var M=b;null!=M&&(2==M.helper.type&&t.add_diagonal(v,M.helper),M.helper=v);break;case 3:var P=null;if(!Tt.edges.empty()){for(var k=Tt.edges.parent;null!=k.prev;)k=k.prev;for(;null!=k;){var T=k.data;if(!At.vert_lt(T,v)){P=T;break}if(null!=k.next)for(k=k.next;null!=k.prev;)k=k.prev;else{for(;null!=k.parent&&k==k.parent.next;)k=k.parent;k=k.parent}}}var A=P;null!=A&&(t.add_diagonal(v,A.helper),A.helper=v),v.node=Tt.edges.insert(v),v.helper=v;break;case 4:var O=v.prev;if(Tt.left_vertex(v))2==O.helper.type&&t.add_diagonal(v,O.helper),Tt.edges.remove_node(O.node),v.node=Tt.edges.insert(v),v.helper=v;else{var E=null;if(!Tt.edges.empty()){for(var G=Tt.edges.parent;null!=G.prev;)G=G.prev;for(;null!=G;){var D=G.data;if(!At.vert_lt(D,v)){E=D;break}if(null!=G.next)for(G=G.next;null!=G.prev;)G=G.prev;else{for(;null!=G.parent&&G==G.parent.next;)G=G.parent;G=G.parent}}}var I=E;2==I.helper.type&&t.add_diagonal(v,I.helper),I.helper=v}}}return t},Tt.prototype.__class__=Tt;var At=zpp_nape.geom.ZPP_PartitionVertex=function(){this.node=null,this.prev=null,this.next=null,this.rightchain=!1,this.helper=null,this.type=0,this.diagonals=null,this.forced=!1,this.y=0,this.x=0,this.mag=0,this.id=0,this.id=At.nextId++,this.diagonals=new zi};At.__name__=["zpp_nape","geom","ZPP_PartitionVertex"],At.get=function(e){var t;return null==At.zpp_pool?t=new At:(t=At.zpp_pool,At.zpp_pool=t.next,t.next=null),t.x=e.x,t.y=e.y,t},At.rightdistance=function(e,t){var i,n,r=e.next.y>e.y;i=e.next.x-e.x,n=e.next.y-e.y;var o;return o=t.x-e.x,(r?-1:1)*((t.y-e.y)*i-o*n)},At.vert_lt=function(e,t){if(t==e||t==e.next)return!0;if(e.y!=e.next.y)return At.rightdistance(e,t)<=0;var i=e.x,n=e.next.x;return(i<n?i:n)<=t.x},At.edge_swap=function(e,t){var i=e.node;e.node=t.node,t.node=i},At.edge_lt=function(e,t){if(e==t&&e.next==t.next)return!1;if(e==t.next)return!At.vert_lt(e,t);if(t==e.next)return At.vert_lt(t,e);if(e.y==e.next.y){if(t.y!=t.next.y)return 0<At.rightdistance(t,e)||0<At.rightdistance(t,e.next);var i=e.x,n=e.next.x,r=n<i?i:n,o=t.x,a=t.next.x;return(a<o?o:a)<r}var s=At.rightdistance(e,t),p=At.rightdistance(e,t.next);if(0==s&&0==p){var l=e.x,h=e.next.x,u=h<l?l:h,d=t.x,c=t.next.x;return(c<d?d:c)<u}if(0<=s*p)return s<0||p<0;var _=At.rightdistance(t,e),y=At.rightdistance(t,e.next);return 0<=_*y&&(0<_||0<y)},At.prototype.id=null,At.prototype.mag=null,At.prototype.x=null,At.prototype.y=null,At.prototype.forced=null,At.prototype.diagonals=null,At.prototype.type=null,At.prototype.helper=null,At.prototype.rightchain=null,At.prototype.next=null,At.prototype.prev=null,At.prototype.alloc=function(){},At.prototype.free=function(){this.helper=null},At.prototype.copy=function(){var e;return null==At.zpp_pool?e=new At:(e=At.zpp_pool,At.zpp_pool=e.next,e.next=null),e.x=this.x,e.y=this.y,e.forced=this.forced,e},At.prototype.sort=function(){var e=0,t=0,i=0;e=this.prev.x-this.x,t=this.prev.y-this.y,i=this.next.x-this.x;var n=(this.next.y-this.y)*e-i*t,r=0<n?-1:0==n?0:1,o=this.diagonals;if(null!=o.head&&null!=o.head.next){for(var a,s,p,l=o.head,h=null,u=null,d=null,c=null,_=1;;){for(a=0,u=l,h=l=null;null!=u;){for(++a,d=u,s=0,p=_;null!=d&&s<_;)++s,d=d.next;for(;0<s||0<p&&null!=d;){if(0==s)d=(c=d).next,--p;else if(0==p||null==d)u=(c=u).next,--s;else{var y;if(1==r){e=u.elt.x-this.x,t=u.elt.y-this.y,i=d.elt.x-this.x;var x=(d.elt.y-this.y)*e-i*t;y=1==(0<x?-1:0==x?0:1)}else{e=this.prev.x-this.x,t=this.prev.y-this.y,i=u.elt.x-this.x;var m=(u.elt.y-this.y)*e-i*t,g=0<m?-1:0==m?0:1;e=this.prev.x-this.x,t=this.prev.y-this.y,i=d.elt.x-this.x;var f=(d.elt.y-this.y)*e-i*t,v=0<f?-1:0==f?0:1;if(g*v==1||g*v==0&&(1==g||1==v)){e=u.elt.x-this.x,t=u.elt.y-this.y,i=d.elt.x-this.x;var z=(d.elt.y-this.y)*e-i*t;y=1==(0<z?-1:0==z?0:1)}else if(-1==g||-1==v)y=-1==v;else if(0==g&&0==v){e=this.x-this.prev.x,t=this.y-this.prev.y;var w=e*(i=u.elt.x-this.x)+t*(u.elt.y-this.y),b=e*(i=d.elt.x-this.x)+t*(d.elt.y-this.y);y=w<0&&0<b||!(b<0&&0<w)}else y=!0}y?(u=(c=u).next,--s):(d=(c=d).next,--p)}null!=h?h.next=c:l=c,h=c}u=d}if(h.next=null,_<<=1,!(1<a))break}o.head=l,o.modified=!0,o.pushmod=!0}},At.prototype.node=null,At.prototype.__class__=At;var Ot=zpp_nape.geom.ZPP_PartitionedPoly=function(e){this.next=null,this.vertices=null,this.init(e)};Ot.__name__=["zpp_nape","geom","ZPP_PartitionedPoly"],Ot.sharedPPList=null,Ot.getSharedPP=function(){return null==Ot.sharedPPList&&(Ot.sharedPPList=new bi),Ot.sharedPPList},Ot.sharedGVList=null,Ot.getShared=function(){return null==Ot.sharedGVList&&(Ot.sharedGVList=new Si),Ot.sharedGVList},Ot.prototype.vertices=null,Ot.prototype.eq=function(e,t){var i,n,r=e.x,o=e.y;return(i=r-t.x)*i+(n=o-t.y)*n<Qs.epsilon*Qs.epsilon},Ot.prototype.next=null,Ot.prototype.alloc=function(){},Ot.prototype.free=function(){},Ot.prototype.init=function(e){if(null!=e){var t=0;if(null!=e)for(var i=e;;){var n=i;if(t+=n.x*(n.next.y-n.prev.y),(i=i.next)==e)break}for(var r=0<.5*t,o=e;;){var a;if(r){var s;null==At.zpp_pool?s=new At:(s=At.zpp_pool,At.zpp_pool=s.next,s.next=null),s.x=o.x,s.y=o.y;var p=s;null==this.vertices?this.vertices=p.prev=p.next=p:(p.prev=this.vertices,p.next=this.vertices.next,this.vertices.next.prev=p,this.vertices.next=p),a=p}else{var l;null==At.zpp_pool?l=new At:(l=At.zpp_pool,At.zpp_pool=l.next,l.next=null),l.x=o.x,l.y=o.y;var h=l;null==this.vertices?this.vertices=h.prev=h.next=h:(h.next=this.vertices,h.prev=this.vertices.prev,this.vertices.prev.next=h,this.vertices.prev=h),a=h}if(this.vertices=a,this.vertices.forced=o.forced,(o=o.next)==e)break}this.remove_collinear_vertices()}},Ot.prototype.remove_collinear_vertices=function(){for(var e,t=this.vertices,i=!0;i||t!=this.vertices;)if(i=!1,this.eq(t,t.next)){if(t==this.vertices&&(this.vertices=t.next,i=!0),t.forced&&(t.next.forced=!0),null!=t&&t.prev==t){t.next=t.prev=null;var n=t;n.helper=null,n.next=At.zpp_pool,At.zpp_pool=n,t=t=null}else{var r=t.next;t.prev.next=t.next,t.next.prev=t.prev,t.next=t.prev=null;var o=t;o.helper=null,o.next=At.zpp_pool,At.zpp_pool=o,t=null,t=r}if(null==t){this.vertices=null;break}}else t=t.next;if(null==this.vertices)return!0;for(;;){for(e=!1,t=this.vertices,i=!0;i||t!=this.vertices;){i=!1;var a,s,p=t.prev;a=t.x-p.x,s=t.y-p.y;var l;l=t.next.x-t.x;var h=(t.next.y-t.y)*a-l*s;if(h*h>=Qs.epsilon*Qs.epsilon)t=t.next;else{if(t==this.vertices&&(this.vertices=t.next,i=!0),null!=t&&t.prev==t){t.next=t.prev=null;var u=t;u.helper=null,u.next=At.zpp_pool,At.zpp_pool=u,t=t=null}else{var d=t.next;t.prev.next=t.next,t.next.prev=t.prev,t.next=t.prev=null;var c=t;c.helper=null,c.next=At.zpp_pool,At.zpp_pool=c,t=null,t=d}if(e=!0,null==t){e=!1,this.vertices=null;break}}}if(!e)break}return null==this.vertices},Ot.prototype.add_diagonal=function(e,t){e.diagonals.add(t),t.diagonals.add(e),e.forced=t.forced=!0},Ot.prototype.extract_partitions=function(e){if(null==e&&(e=new bi),null!=this.vertices){var t=this.vertices,i=this.vertices;if(null!=t)for(var n=t;n.sort(),(n=n.next)!=i;);for(this.pull_partitions(this.vertices,e);null!=this.vertices;){var r;if(null!=this.vertices&&this.vertices.prev==this.vertices){this.vertices.next=this.vertices.prev=null;var o=this.vertices;o.helper=null,o.next=At.zpp_pool,At.zpp_pool=o,r=this.vertices=null}else{var a=this.vertices.next;this.vertices.prev.next=this.vertices.next,this.vertices.next.prev=this.vertices.prev,this.vertices.next=this.vertices.prev=null;var s=this.vertices;s.helper=null,s.next=At.zpp_pool,At.zpp_pool=s,this.vertices=null,r=a}this.vertices=r}for(var p=null,l=e.head;null!=l;)l.elt.remove_collinear_vertices()?e.erase(p):l=(p=l).next}return e},Ot.prototype.pull_partitions=function(e,t){var i;null==Ot.zpp_pool?i=new Ot:(i=Ot.zpp_pool,Ot.zpp_pool=i.next,i.next=null);for(var n=e;;){var r;null==At.zpp_pool?r=new At:(r=At.zpp_pool,At.zpp_pool=r.next,r.next=null),r.x=n.x,r.y=n.y,r.forced=n.forced;var o=r;if(null==i.vertices?i.vertices=o.prev=o.next=o:(o.prev=i.vertices,o.next=i.vertices.next,i.vertices.next.prev=o,i.vertices.next=o),i.vertices=o,i.vertices.forced=n.forced,null!=n.diagonals.head){var a=n.diagonals,s=a.head.elt;if(a.pop(),s==e)break;n=this.pull_partitions(n,t)}else n=n.next;if(n==e)break}var p=0,l=i.vertices,h=i.vertices;if(null!=l)for(var u=l;;){var d=u;if(p+=d.x*(d.next.y-d.prev.y),(u=u.next)==h)break}return.5*p!=0&&t.add(i),n},Ot.prototype.extract=function(e){if(null==e&&(e=new Si),null!=this.vertices){var t=this.vertices,i=this.vertices;if(null!=t)for(var n=t;n.sort(),(n=n.next)!=i;);for(this.pull(this.vertices,e);null!=this.vertices;){var r;if(null!=this.vertices&&this.vertices.prev==this.vertices){this.vertices.next=this.vertices.prev=null;var o=this.vertices;o.helper=null,o.next=At.zpp_pool,At.zpp_pool=o,r=this.vertices=null}else{var a=this.vertices.next;this.vertices.prev.next=this.vertices.next,this.vertices.next.prev=this.vertices.prev,this.vertices.next=this.vertices.prev=null;var s=this.vertices;s.helper=null,s.next=At.zpp_pool,At.zpp_pool=s,this.vertices=null,r=a}this.vertices=r}}return e},Ot.prototype.pull=function(e,t){for(var i=null,n=e;;){var r,o=n.x,a=n.y;null==cr.zpp_pool?r=new cr:(r=cr.zpp_pool,cr.zpp_pool=r.next,r.next=null),r.forced=!1,r.x=o,r.y=a;var s=r;if(null==i?i=s.prev=s.next=s:(s.prev=i,s.next=i.next,i.next.prev=s,i.next=s),(i=s).forced=n.forced,null!=n.diagonals.head){var p=n.diagonals,l=p.head.elt;if(p.pop(),l==e)break;n=this.pull(n,t)}else n=n.next;if(n==e)break}var h=0,u=i;if(null!=i)for(var d=i;;){var c=d;if(h+=c.x*(c.next.y-c.prev.y),(d=d.next)==u)break}var _=.5*h;if(_*_>=Qs.epsilon*Qs.epsilon){for(var y=i,x=!0;x||y!=i;){x=!1;var m,g,f=y.x,v=y.y;if((m=f-y.next.x)*m+(g=v-y.next.y)*g<Qs.epsilon*Qs.epsilon){if(y==i&&(i=y.next,x=!0),y.forced&&(y.next.forced=!0),null!=y&&y.prev==y)y.next=y.prev=null,y=y=null;else{var z=y.next;y.prev.next=y.next,y.next.prev=y.prev,y.next=y.prev=null,y=null,y=z}if(null==y){i=null;break}}else y=y.next}if(null!=i)for(var w;;){for(y=i,x=!(w=!1);x||y!=i;){x=!1;var b,S,C=y.prev;b=y.x-C.x,S=y.y-C.y;var M;M=y.next.x-y.x;var P=(y.next.y-y.y)*b-M*S;if(P*P>=Qs.epsilon*Qs.epsilon)y=y.next;else{if(y==i&&(i=y.next,x=!0),null!=y&&y.prev==y)y.next=y.prev=null,y=y=null;else{var k=y.next;y.prev.next=y.next,y.next.prev=y.prev,y.next=y.prev=null,y=null,y=k}if(w=!0,null==y){w=!1,i=null;break}}}if(!w)break}null!=i&&t.add(i)}return n},Ot.prototype.__class__=Ot;var Et=zpp_nape.geom.ZPP_Ray=function(){var e,t;if(this.zip_dir=!1,this.absnormaly=0,this.absnormalx=0,this.normaly=0,this.normalx=0,this.idiry=0,this.idirx=0,this.diry=0,this.dirx=0,this.originy=0,this.originx=0,this.userData=null,this.maxdist=0,this.direction=null,(this.origin=null)==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var i;null==ep.zpp_pool?i=new ep:(i=ep.zpp_pool,ep.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=0,i.y=0,e.zpp_inner=i,e.zpp_inner.outer=e}else{var n,r=e.zpp_inner;if(null!=r._validate&&r._validate(),0==e.zpp_inner.x){var o=e.zpp_inner;null!=o._validate&&o._validate(),n=0==e.zpp_inner.y}else n=!1;if(!n){e.zpp_inner.x=0,e.zpp_inner.y=0;var a=e.zpp_inner;null!=a._invalidate&&a._invalidate(a)}}if(e.zpp_inner.weak=!1,this.origin=e,this.origin.zpp_inner._invalidate=$(this,this.origin_invalidate),null==jn.poolVec2?t=new lt:(t=jn.poolVec2,jn.poolVec2=t.zpp_pool,t.zpp_pool=null),null==t.zpp_inner){var s;null==ep.zpp_pool?s=new ep:(s=ep.zpp_pool,ep.zpp_pool=s.next,s.next=null),s.weak=!1,s._immutable=!1,s.x=0,s.y=0,t.zpp_inner=s,t.zpp_inner.outer=t}else{var p,l=t.zpp_inner;if(null!=l._validate&&l._validate(),0==t.zpp_inner.x){var h=t.zpp_inner;null!=h._validate&&h._validate(),p=0==t.zpp_inner.y}else p=!1;if(!p){t.zpp_inner.x=0,t.zpp_inner.y=0;var u=t.zpp_inner;null!=u._invalidate&&u._invalidate(u)}}t.zpp_inner.weak=!1,this.direction=t,this.direction.zpp_inner._invalidate=$(this,this.direction_invalidate),this.originx=0,this.originy=0,this.dirx=0,this.diry=0,this.zip_dir=!1};Et.__name__=["zpp_nape","geom","ZPP_Ray"],Et.prototype.origin=null,Et.prototype.direction=null,Et.prototype.maxdist=null,Et.prototype.userData=null,Et.prototype.originx=null,Et.prototype.originy=null,Et.prototype.dirx=null,Et.prototype.diry=null,Et.prototype.idirx=null,Et.prototype.idiry=null,Et.prototype.normalx=null,Et.prototype.normaly=null,Et.prototype.absnormalx=null,Et.prototype.absnormaly=null,Et.prototype.origin_invalidate=function(e){this.originx=e.x,this.originy=e.y},Et.prototype.direction_invalidate=function(e){this.dirx=e.x,this.diry=e.y,this.zip_dir=!0},Et.prototype.zip_dir=null,Et.prototype.invalidate_dir=function(){this.zip_dir=!0},Et.prototype.validate_dir=function(){if(this.zip_dir){this.zip_dir=!1;var e=1/Math.sqrt(this.dirx*this.dirx+this.diry*this.diry);this.dirx*=e,this.diry*=e,this.idirx=1/this.dirx,this.idiry=1/this.diry,this.normalx=-this.diry,this.normaly=this.dirx;var t=this.normalx;this.absnormalx=t<0?-t:t;var i=this.normaly;this.absnormaly=i<0?-i:i}},Et.prototype.rayAABB=function(){var e,t=this.originx,i=t,n=this.originy,r=n;if(this.maxdist>=1/0?(0<this.dirx?i=1/0:this.dirx<0&&(i=-1/0),0<this.diry?r=1/0:this.diry<0&&(r=-1/0)):(i+=this.maxdist*this.dirx,r+=this.maxdist*this.diry),i<t){var o=t;t=i,i=o}if(r<n){var a=n;n=r,r=a}return null==Oo.zpp_pool?e=new Oo:(e=Oo.zpp_pool,Oo.zpp_pool=e.next,e.next=null),e.minx=t,e.miny=n,e.maxx=i,e.maxy=r,e},Et.prototype.aabbtest=function(e){var t=this.normalx*(this.originx-.5*(e.minx+e.maxx))+this.normaly*(this.originy-.5*(e.miny+e.maxy));return(t<0?-t:t)<.5*this.absnormalx*(e.maxx-e.minx)+.5*this.absnormaly*(e.maxy-e.miny)},Et.prototype.aabbsect=function(e){var t=this.originx>=e.minx&&this.originx<=e.maxx,i=this.originy>=e.miny&&this.originy<=e.maxy;if(t&&i)return 0;for(var n=-1;!(0<=this.dirx&&this.originx>=e.maxx||this.dirx<=0&&this.originx<=e.minx||0<=this.diry&&this.originy>=e.maxy||this.diry<=0&&this.originy<=e.miny);){if(0<this.dirx){var r=(e.minx-this.originx)*this.idirx;if(0<=r&&r<=this.maxdist){var o=this.originy+r*this.diry;if(o>=e.miny&&o<=e.maxy){n=r;break}}}else if(this.dirx<0){var a=(e.maxx-this.originx)*this.idirx;if(0<=a&&a<=this.maxdist){var s=this.originy+a*this.diry;if(s>=e.miny&&s<=e.maxy){n=a;break}}}if(0<this.diry){var p=(e.miny-this.originy)*this.idiry;if(0<=p&&p<=this.maxdist){var l=this.originx+p*this.dirx;if(l>=e.minx&&l<=e.maxx){n=p;break}}}else if(this.diry<0){var h=(e.maxy-this.originy)*this.idiry;if(0<=h&&h<=this.maxdist){var u=this.originx+h*this.dirx;if(u>=e.minx&&u<=e.maxx){n=h;break}}}break}return n},Et.prototype.circlesect=function(e,t,i){if(e.zip_worldCOM&&null!=e.body){if(e.zip_worldCOM=!1,e.zip_localCOM){if(e.zip_localCOM=!1,1==e.type){var n=e.polygon;if(null==n.lverts.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y;else if(null==n.lverts.next.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y,n.localCOMx+=n.lverts.next.next.x,n.localCOMy+=n.lverts.next.next.y,n.localCOMx*=.5,n.localCOMy*=.5;else{n.localCOMx=0;var r=n.localCOMy=0,o=n.lverts.next,a=o,s=o=o.next;for(o=o.next;null!=o;){var p=o;r+=s.x*(p.y-a.y);var l=p.y*s.x-p.x*s.y;n.localCOMx+=(s.x+p.x)*l,n.localCOMy+=(s.y+p.y)*l,a=s,s=p,o=o.next}var h=o=n.lverts.next;r+=s.x*(h.y-a.y);var u=h.y*s.x-h.x*s.y;n.localCOMx+=(s.x+h.x)*u,n.localCOMy+=(s.y+h.y)*u,a=s;var d=o=o.next;r+=h.x*(d.y-a.y);var c=d.y*h.x-d.x*h.y;n.localCOMx+=(h.x+d.x)*c,n.localCOMy+=(h.y+d.y)*c;var _=r=1/(3*r);n.localCOMx*=_,n.localCOMy*=_}}null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy)}var y=e.body;y.zip_axis&&(y.zip_axis=!1,y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot)),e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy),e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy)}var x,m;x=this.originx-e.worldCOMx,m=this.originy-e.worldCOMy;var g=this.dirx*this.dirx+this.diry*this.diry,f=2*(x*this.dirx+m*this.diry),v=x*x+m*m-e.radius*e.radius,z=f*f-4*g*v;if(0==z){var w=-f/2*g;if((!t||0<v)&&0<w&&w<i&&w<=this.maxdist){var b=0,S=0;b=this.originx,S=this.originy,b+=this.dirx*w,S+=this.diry*w,b-=e.worldCOMx,S-=e.worldCOMy;var C,M=1/Math.sqrt(b*b+S*S);if(b*=M,S*=M,v<=0&&(b=-b,S=-S),null==jn.poolVec2?C=new lt:(C=jn.poolVec2,jn.poolVec2=C.zpp_pool,C.zpp_pool=null),null==C.zpp_inner){var P;null==ep.zpp_pool?P=new ep:(P=ep.zpp_pool,ep.zpp_pool=P.next,P.next=null),P.weak=!1,P._immutable=!1,P.x=b,P.y=S,C.zpp_inner=P,C.zpp_inner.outer=C}else{var k,T=C.zpp_inner;if(null!=T._validate&&T._validate(),C.zpp_inner.x==b){var A=C.zpp_inner;null!=A._validate&&A._validate(),k=C.zpp_inner.y==S}else k=!1;if(!k){C.zpp_inner.x=b,C.zpp_inner.y=S;var O=C.zpp_inner;null!=O._invalidate&&O._invalidate(O)}}return C.zpp_inner.weak=!1,wt.getRay(C,w,v<=0,e.outer)}return null}var E=(-f-(z=Math.sqrt(z)))*(g=1/(2*g)),G=(-f+z)*g;if(0<E){if(E<i&&E<=this.maxdist){var D=0,I=0;D=this.originx,I=this.originy,D+=this.dirx*E,I+=this.diry*E,D-=e.worldCOMx,I-=e.worldCOMy;var L,B=1/Math.sqrt(D*D+I*I);if(D*=B,I*=B,null==jn.poolVec2?L=new lt:(L=jn.poolVec2,jn.poolVec2=L.zpp_pool,L.zpp_pool=null),null==L.zpp_inner){var R;null==ep.zpp_pool?R=new ep:(R=ep.zpp_pool,ep.zpp_pool=R.next,R.next=null),R.weak=!1,R._immutable=!1,R.x=D,R.y=I,L.zpp_inner=R,L.zpp_inner.outer=L}else{var F,j=L.zpp_inner;if(null!=j._validate&&j._validate(),L.zpp_inner.x==D){var N=L.zpp_inner;null!=N._validate&&N._validate(),F=L.zpp_inner.y==I}else F=!1;if(!F){L.zpp_inner.x=D,L.zpp_inner.y=I;var U=L.zpp_inner;null!=U._invalidate&&U._invalidate(U)}}return L.zpp_inner.weak=!1,wt.getRay(L,E,!1,e.outer)}return null}if(0<G&&t){if(G<i&&G<=this.maxdist){var V=0,H=0;V=this.originx,H=this.originy,V+=this.dirx*G,H+=this.diry*G,V-=e.worldCOMx,H-=e.worldCOMy;var W,q=1/Math.sqrt(V*V+H*H);if(V=-(V*=q),H=-(H*=q),null==jn.poolVec2?W=new lt:(W=jn.poolVec2,jn.poolVec2=W.zpp_pool,W.zpp_pool=null),null==W.zpp_inner){var X;null==ep.zpp_pool?X=new ep:(X=ep.zpp_pool,ep.zpp_pool=X.next,X.next=null),X.weak=!1,X._immutable=!1,X.x=V,X.y=H,W.zpp_inner=X,W.zpp_inner.outer=W}else{var Y,K=W.zpp_inner;if(null!=K._validate&&K._validate(),W.zpp_inner.x==V){var Z=W.zpp_inner;null!=Z._validate&&Z._validate(),Y=W.zpp_inner.y==H}else Y=!1;if(!Y){W.zpp_inner.x=V,W.zpp_inner.y=H;var J=W.zpp_inner;null!=J._invalidate&&J._invalidate(J)}}return W.zpp_inner.weak=!1,wt.getRay(W,G,!0,e.outer)}return null}return null},Et.prototype.circlesect2=function(e,t,i){if(e.zip_worldCOM&&null!=e.body){if(e.zip_worldCOM=!1,e.zip_localCOM){if(e.zip_localCOM=!1,1==e.type){var n=e.polygon;if(null==n.lverts.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y;else if(null==n.lverts.next.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y,n.localCOMx+=n.lverts.next.next.x,n.localCOMy+=n.lverts.next.next.y,n.localCOMx*=.5,n.localCOMy*=.5;else{n.localCOMx=0;var r=n.localCOMy=0,o=n.lverts.next,a=o,s=o=o.next;for(o=o.next;null!=o;){var p=o;r+=s.x*(p.y-a.y);var l=p.y*s.x-p.x*s.y;n.localCOMx+=(s.x+p.x)*l,n.localCOMy+=(s.y+p.y)*l,a=s,s=p,o=o.next}var h=o=n.lverts.next;r+=s.x*(h.y-a.y);var u=h.y*s.x-h.x*s.y;n.localCOMx+=(s.x+h.x)*u,n.localCOMy+=(s.y+h.y)*u,a=s;var d=o=o.next;r+=h.x*(d.y-a.y);var c=d.y*h.x-d.x*h.y;n.localCOMx+=(h.x+d.x)*c,n.localCOMy+=(h.y+d.y)*c;var _=r=1/(3*r);n.localCOMx*=_,n.localCOMy*=_}}null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy)}var y=e.body;y.zip_axis&&(y.zip_axis=!1,y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot)),e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy),e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy)}var x,m;x=this.originx-e.worldCOMx,m=this.originy-e.worldCOMy;var g=this.dirx*this.dirx+this.diry*this.diry,f=2*(x*this.dirx+m*this.diry),v=x*x+m*m-e.radius*e.radius,z=f*f-4*g*v;if(0==z){var w=-f/2*g;if((!t||0<v)&&0<w&&w<=this.maxdist){var b=0,S=0;b=this.originx,S=this.originy,b+=this.dirx*w,S+=this.diry*w,b-=e.worldCOMx,S-=e.worldCOMy;var C,M=1/Math.sqrt(b*b+S*S);if(b*=M,S*=M,v<=0&&(b=-b,S=-S),null==jn.poolVec2?C=new lt:(C=jn.poolVec2,jn.poolVec2=C.zpp_pool,C.zpp_pool=null),null==C.zpp_inner){var P;null==ep.zpp_pool?P=new ep:(P=ep.zpp_pool,ep.zpp_pool=P.next,P.next=null),P.weak=!1,P._immutable=!1,P.x=b,P.y=S,C.zpp_inner=P,C.zpp_inner.outer=C}else{var k,T=C.zpp_inner;if(null!=T._validate&&T._validate(),C.zpp_inner.x==b){var A=C.zpp_inner;null!=A._validate&&A._validate(),k=C.zpp_inner.y==S}else k=!1;if(!k){C.zpp_inner.x=b,C.zpp_inner.y=S;var O=C.zpp_inner;null!=O._invalidate&&O._invalidate(O)}}C.zpp_inner.weak=!1;for(var E=wt.getRay(C,w,v<=0,e.outer),G=null,D=i.zpp_inner.inner.head;null!=D&&!(E.zpp_inner.toiDistance<D.elt.zpp_inner.toiDistance);)D=(G=D).next;var I,L=i.zpp_inner.inner;null==yn.zpp_pool?I=new yn:(I=yn.zpp_pool,yn.zpp_pool=I.next,I.next=null),I.elt=E;var B=I;null==G?(B.next=L.head,L.head=B):(B.next=G.next,G.next=B),L.pushmod=L.modified=!0,L.length++}}else{var R=(-f-(z=Math.sqrt(z)))*(g=1/(2*g)),F=(-f+z)*g;if(0<R&&R<=this.maxdist){var j=0,N=0;j=this.originx,N=this.originy,j+=this.dirx*R,N+=this.diry*R,j-=e.worldCOMx,N-=e.worldCOMy;var U,V=1/Math.sqrt(j*j+N*N);if(j*=V,N*=V,null==jn.poolVec2?U=new lt:(U=jn.poolVec2,jn.poolVec2=U.zpp_pool,U.zpp_pool=null),null==U.zpp_inner){var H;null==ep.zpp_pool?H=new ep:(H=ep.zpp_pool,ep.zpp_pool=H.next,H.next=null),H.weak=!1,H._immutable=!1,H.x=j,H.y=N,U.zpp_inner=H,U.zpp_inner.outer=U}else{var W,q=U.zpp_inner;if(null!=q._validate&&q._validate(),U.zpp_inner.x==j){var X=U.zpp_inner;null!=X._validate&&X._validate(),W=U.zpp_inner.y==N}else W=!1;if(!W){U.zpp_inner.x=j,U.zpp_inner.y=N;var Y=U.zpp_inner;null!=Y._invalidate&&Y._invalidate(Y)}}U.zpp_inner.weak=!1;for(var K=wt.getRay(U,R,!1,e.outer),Z=null,J=i.zpp_inner.inner.head;null!=J&&!(K.zpp_inner.toiDistance<J.elt.zpp_inner.toiDistance);)J=(Z=J).next;var Q,$=i.zpp_inner.inner;null==yn.zpp_pool?Q=new yn:(Q=yn.zpp_pool,yn.zpp_pool=Q.next,Q.next=null),Q.elt=K;var ee=Q;null==Z?(ee.next=$.head,$.head=ee):(ee.next=Z.next,Z.next=ee),$.pushmod=$.modified=!0,$.length++}if(0<F&&F<=this.maxdist&&t){var te=0,ie=0;te=this.originx,ie=this.originy,te+=this.dirx*F,ie+=this.diry*F,te-=e.worldCOMx,ie-=e.worldCOMy;var ne,re=1/Math.sqrt(te*te+ie*ie);if(te=-(te*=re),ie=-(ie*=re),null==jn.poolVec2?ne=new lt:(ne=jn.poolVec2,jn.poolVec2=ne.zpp_pool,ne.zpp_pool=null),null==ne.zpp_inner){var oe;null==ep.zpp_pool?oe=new ep:(oe=ep.zpp_pool,ep.zpp_pool=oe.next,oe.next=null),oe.weak=!1,oe._immutable=!1,oe.x=te,oe.y=ie,ne.zpp_inner=oe,ne.zpp_inner.outer=ne}else{var ae,se=ne.zpp_inner;if(null!=se._validate&&se._validate(),ne.zpp_inner.x==te){var pe=ne.zpp_inner;null!=pe._validate&&pe._validate(),ae=ne.zpp_inner.y==ie}else ae=!1;if(!ae){ne.zpp_inner.x=te,ne.zpp_inner.y=ie;var le=ne.zpp_inner;null!=le._invalidate&&le._invalidate(le)}}ne.zpp_inner.weak=!1;for(var he=wt.getRay(ne,F,!0,e.outer),ue=null,de=i.zpp_inner.inner.head;null!=de&&!(he.zpp_inner.toiDistance<de.elt.zpp_inner.toiDistance);)de=(ue=de).next;var ce,_e=i.zpp_inner.inner;null==yn.zpp_pool?ce=new yn:(ce=yn.zpp_pool,yn.zpp_pool=ce.next,ce.next=null),ce.elt=he;var ye=ce;null==ue?(ye.next=_e.head,_e.head=ye):(ye.next=ue.next,ue.next=ye),_e.pushmod=_e.modified=!0,_e.length++}}},Et.prototype.polysect=function(e,t,i){for(var n=i,r=null,o=e.edges.head,a=e.gverts.next,s=a,p=a.next;null!=p;){var l=p,h=o.elt;if(t||h.gnormx*this.dirx+h.gnormy*this.diry<0){var u,d;u=l.x-s.x,d=l.y-s.y;var c,_;c=s.x-this.originx,_=s.y-this.originy;var y=d*this.dirx-u*this.diry;if(y*y>Qs.epsilon){var x=(d*c-u*_)*(y=1/y);if(0<x&&x<n&&x<=this.maxdist){var m=(this.diry*c-this.dirx*_)*y;m>-Qs.epsilon&&m<1+Qs.epsilon&&(n=x,r=o.elt)}}}o=o.next,s=l,p=(a=p).next}for(;;){var g=p=e.gverts.next,f=o.elt;if(t||f.gnormx*this.dirx+f.gnormy*this.diry<0){var v,z;v=g.x-s.x,z=g.y-s.y;var w,b;w=s.x-this.originx,b=s.y-this.originy;var S=z*this.dirx-v*this.diry;if(S*S>Qs.epsilon){var C=(z*w-v*b)*(S=1/S);if(0<C&&C<n&&C<=this.maxdist){var M=(this.diry*w-this.dirx*b)*S;M>-Qs.epsilon&&M<1+Qs.epsilon&&(n=C,r=o.elt)}}}o=o.next;break}if(null==r)return null;var P=0,k=0;P=r.gnormx,k=r.gnormy;var T,A=0<P*this.dirx+k*this.diry;if(A&&(P=-P,k=-k),null==jn.poolVec2?T=new lt:(T=jn.poolVec2,jn.poolVec2=T.zpp_pool,T.zpp_pool=null),null==T.zpp_inner){var O;null==ep.zpp_pool?O=new ep:(O=ep.zpp_pool,ep.zpp_pool=O.next,O.next=null),O.weak=!1,O._immutable=!1,O.x=P,O.y=k,T.zpp_inner=O,T.zpp_inner.outer=T}else{var E,G=T.zpp_inner;if(null!=G._validate&&G._validate(),T.zpp_inner.x==P){var D=T.zpp_inner;null!=D._validate&&D._validate(),E=T.zpp_inner.y==k}else E=!1;if(!E){T.zpp_inner.x=P,T.zpp_inner.y=k;var I=T.zpp_inner;null!=I._invalidate&&I._invalidate(I)}}return T.zpp_inner.weak=!1,wt.getRay(T,n,A,e.outer)},Et.prototype.polysect2=function(e,t,i){for(var n=1/0,r=-1,o=null,a=null,s=e.edges.head,p=e.gverts.next,l=p,h=p.next;null!=h;){var u=h,d=s.elt;if(t||d.gnormx*this.dirx+d.gnormy*this.diry<0){var c,_;c=u.x-l.x,_=u.y-l.y;var y,x;y=l.x-this.originx,x=l.y-this.originy;var m=_*this.dirx-c*this.diry;if(m*m>Qs.epsilon){var g=(_*y-c*x)*(m=1/m);if(0<g&&g<=this.maxdist&&(g<n||r<g)){var f=(this.diry*y-this.dirx*x)*m;f>-Qs.epsilon&&f<1+Qs.epsilon&&(g<n&&(n=g,o=s.elt),r<g&&(r=g,a=s.elt))}}}s=s.next,l=u,h=(p=h).next}for(;;){var v=h=e.gverts.next,z=s.elt;if(t||z.gnormx*this.dirx+z.gnormy*this.diry<0){var w,b;w=v.x-l.x,b=v.y-l.y;var S,C;S=l.x-this.originx,C=l.y-this.originy;var M=b*this.dirx-w*this.diry;if(M*M>Qs.epsilon){var P=(b*S-w*C)*(M=1/M);if(0<P&&P<=this.maxdist&&(P<n||r<P)){var k=(this.diry*S-this.dirx*C)*M;k>-Qs.epsilon&&k<1+Qs.epsilon&&(P<n&&(n=P,o=s.elt),r<P&&(r=P,a=s.elt))}}}s=s.next;break}if(null!=o){var T=0,A=0;T=o.gnormx,A=o.gnormy;var O,E=0<T*this.dirx+A*this.diry;if(E&&(T=-T,A=-A),null==jn.poolVec2?O=new lt:(O=jn.poolVec2,jn.poolVec2=O.zpp_pool,O.zpp_pool=null),null==O.zpp_inner){var G;null==ep.zpp_pool?G=new ep:(G=ep.zpp_pool,ep.zpp_pool=G.next,G.next=null),G.weak=!1,G._immutable=!1,G.x=T,G.y=A,O.zpp_inner=G,O.zpp_inner.outer=O}else{var D,I=O.zpp_inner;if(null!=I._validate&&I._validate(),O.zpp_inner.x==T){var L=O.zpp_inner;null!=L._validate&&L._validate(),D=O.zpp_inner.y==A}else D=!1;if(!D){O.zpp_inner.x=T,O.zpp_inner.y=A;var B=O.zpp_inner;null!=B._invalidate&&B._invalidate(B)}}O.zpp_inner.weak=!1;for(var R=wt.getRay(O,n,E,e.outer),F=null,j=i.zpp_inner.inner.head;null!=j&&!(R.zpp_inner.toiDistance<j.elt.zpp_inner.toiDistance);)j=(F=j).next;var N,U=i.zpp_inner.inner;null==yn.zpp_pool?N=new yn:(N=yn.zpp_pool,yn.zpp_pool=N.next,N.next=null),N.elt=R;var V=N;null==F?(V.next=U.head,U.head=V):(V.next=F.next,F.next=V),U.pushmod=U.modified=!0,U.length++}if(null!=a&&o!=a){var H=0,W=0;H=a.gnormx,W=a.gnormy;var q,X=0<H*this.dirx+W*this.diry;if(X&&(H=-H,W=-W),null==jn.poolVec2?q=new lt:(q=jn.poolVec2,jn.poolVec2=q.zpp_pool,q.zpp_pool=null),null==q.zpp_inner){var Y;null==ep.zpp_pool?Y=new ep:(Y=ep.zpp_pool,ep.zpp_pool=Y.next,Y.next=null),Y.weak=!1,Y._immutable=!1,Y.x=H,Y.y=W,q.zpp_inner=Y,q.zpp_inner.outer=q}else{var K,Z=q.zpp_inner;if(null!=Z._validate&&Z._validate(),q.zpp_inner.x==H){var J=q.zpp_inner;null!=J._validate&&J._validate(),K=q.zpp_inner.y==W}else K=!1;if(!K){q.zpp_inner.x=H,q.zpp_inner.y=W;var Q=q.zpp_inner;null!=Q._invalidate&&Q._invalidate(Q)}}q.zpp_inner.weak=!1;for(var $=wt.getRay(q,r,X,e.outer),ee=null,te=i.zpp_inner.inner.head;null!=te&&!($.zpp_inner.toiDistance<te.elt.zpp_inner.toiDistance);)te=(ee=te).next;var ie,ne=i.zpp_inner.inner;null==yn.zpp_pool?ie=new yn:(ie=yn.zpp_pool,yn.zpp_pool=ie.next,ie.next=null),ie.elt=$;var re=ie;null==ee?(re.next=ne.head,ne.head=re):(re.next=ee.next,ee.next=re),ne.pushmod=ne.modified=!0,ne.length++}},Et.prototype.__class__=Et;var Gt=zpp_nape.geom.ZPP_SimpleVert=function(){this.node=null,this.next=null,this.id=0,this.links=null,this.y=0,this.x=0,this.forced=!1,this.id=ke.ZPP_SimpleVert(),null==Wn.zpp_pool?this.links=new Wn:(this.links=Wn.zpp_pool,Wn.zpp_pool=this.links.next,this.links.next=null),this.links.lt=Gt.less_xy};Gt.__name__=["zpp_nape","geom","ZPP_SimpleVert"],Gt.less_xy=function(e,t){return e.y<t.y||e.y==t.y&&e.x<t.x},Gt.swap_nodes=function(e,t){var i=e.node;e.node=t.node,t.node=i},Gt.get=function(e,t){var i;return null==Gt.zpp_pool?i=new Gt:(i=Gt.zpp_pool,Gt.zpp_pool=i.next,i.next=null),i.x=e,i.y=t,i},Gt.prototype.forced=null,Gt.prototype.x=null,Gt.prototype.y=null,Gt.prototype.links=null,Gt.prototype.id=null,Gt.prototype.next=null,Gt.prototype.node=null,Gt.prototype.free=function(){this.links.clear(),this.node=null,this.forced=!1},Gt.prototype.alloc=function(){},Gt.prototype.__class__=Gt;var Dt=zpp_nape.geom.ZPP_SimpleSeg=function(){this.node=null,this.prev=null,this.next=null,this.id=0,this.vertices=null,this.right=null,this.left=null,this.id=ke.ZPP_SimpleSeg(),null==Wn.zpp_pool?this.vertices=new Wn:(this.vertices=Wn.zpp_pool,Wn.zpp_pool=this.vertices.next,this.vertices.next=null),this.vertices.lt=$(this,this.less_xy)};Dt.__name__=["zpp_nape","geom","ZPP_SimpleSeg"],Dt.get=function(e,t){var i;return null==Dt.zpp_pool?i=new Dt:(i=Dt.zpp_pool,Dt.zpp_pool=i.next,i.next=null),i.left=e,i.right=t,i.vertices.insert(e),i.vertices.insert(t),i},Dt.prototype.left=null,Dt.prototype.right=null,Dt.prototype.vertices=null,Dt.prototype.id=null,Dt.prototype.next=null,Dt.prototype.free=function(){this.left=this.right=null,this.prev=null,this.node=null,this.vertices.clear()},Dt.prototype.alloc=function(){},Dt.prototype.prev=null,Dt.prototype.node=null,Dt.prototype.less_xy=function(e,t){return e.x<t.x||e.x==t.x&&e.y<t.y},Dt.prototype.__class__=Dt;var It=zpp_nape.geom.ZPP_SimpleEvent=function(){this.next=null,this.node=null,this.segment2=null,this.segment=null,this.vertex=null,this.type=0};It.__name__=["zpp_nape","geom","ZPP_SimpleEvent"],It.swap_nodes=function(e,t){var i=e.node;e.node=t.node,t.node=i},It.less_xy=function(e,t){return e.vertex.x<t.vertex.x||!(e.vertex.x>t.vertex.x)&&(e.vertex.y<t.vertex.y||!(e.vertex.y>t.vertex.y)&&e.type<t.type)},It.get=function(e){var t;return null==It.zpp_pool?t=new It:(t=It.zpp_pool,It.zpp_pool=t.next,t.next=null),t.vertex=e,t},It.prototype.type=null,It.prototype.vertex=null,It.prototype.segment=null,It.prototype.segment2=null,It.prototype.node=null,It.prototype.next=null,It.prototype.free=function(){this.vertex=null,this.segment=this.segment2=null,this.node=null},It.prototype.alloc=function(){},It.prototype.__class__=It;var Lt=zpp_nape.geom.ZPP_SimpleSweep=function(){this.tree=null,this.sweepx=0,null==qn.zpp_pool?this.tree=new qn:(this.tree=qn.zpp_pool,qn.zpp_pool=this.tree.next,this.tree.next=null),this.tree.lt=$(this,this.edge_lt),this.tree.swapped=$(this,this.swap_nodes)};Lt.__name__=["zpp_nape","geom","ZPP_SimpleSweep"],Lt.prototype.sweepx=null,Lt.prototype.tree=null,Lt.prototype.swap_nodes=function(e,t){var i=e.node;e.node=t.node,t.node=i},Lt.prototype.edge_lt=function(e,t){var i,n=0,r=0,o=0,a=0;if(e.left==t.left&&e.right==t.right)return!1;if(e.left==t.right)return e.left.x==e.right.x?e.left.y<e.right.y?e.left.y>t.left.y:e.right.y>t.left.y:(i=e.right.x<e.left.x,n=e.right.x-e.left.x,r=e.right.y-e.left.y,o=t.left.x-e.left.x,a=t.left.y-e.left.y,(i?r*o-n*a:a*n-o*r)<0);if(e.right==t.left)return!(t.left.x==t.right.x?t.left.y<t.right.y?t.left.y>e.left.y:t.right.y>e.left.y:(i=t.right.x<t.left.x,n=t.right.x-t.left.x,r=t.right.y-t.left.y,o=e.left.x-t.left.x,a=e.left.y-t.left.y,(i?r*o-n*a:a*n-o*r)<0));if(e.left==t.left)return e.left.x==e.right.x?e.left.y<e.right.y?e.left.y>t.right.y:e.right.y>t.right.y:(i=e.right.x<e.left.x,n=e.right.x-e.left.x,r=e.right.y-e.left.y,o=t.right.x-e.left.x,a=t.right.y-e.left.y,(i?r*o-n*a:a*n-o*r)<0);if(e.right==t.right)return e.left.x==e.right.x?e.left.y<e.right.y?e.left.y>t.left.y:e.right.y>t.left.y:(i=e.right.x<e.left.x,n=e.right.x-e.left.x,r=e.right.y-e.left.y,o=t.left.x-e.left.x,a=t.left.y-e.left.y,(i?r*o-n*a:a*n-o*r)<0);if(e.left.x==e.right.x){if(t.left.x==t.right.x)return(e.left.y<e.right.y?e.right:e.left).y>(t.left.y<t.right.y?t.right:t.left).y;i=t.right.x<t.left.x,n=t.right.x-t.left.x,r=t.right.y-t.left.y,o=e.left.x-t.left.x,a=e.left.y-t.left.y;var s=i?r*o-n*a:a*n-o*r;return i=t.right.x<t.left.x,n=t.right.x-t.left.x,r=t.right.y-t.left.y,o=e.right.x-t.left.x,a=e.right.y-t.left.y,0<=s*(i?r*o-n*a:a*n-o*r)?0<=s:this.sweepx>=e.left.x}if(t.left.x==t.right.x){i=e.right.x<e.left.x,n=e.right.x-e.left.x,r=e.right.y-e.left.y,o=t.left.x-e.left.x,a=t.left.y-e.left.y;var p=i?r*o-n*a:a*n-o*r;return i=e.right.x<e.left.x,n=e.right.x-e.left.x,r=e.right.y-e.left.y,o=t.right.x-e.left.x,a=t.right.y-e.left.y,0<=p*(i?r*o-n*a:a*n-o*r)?p<0:this.sweepx<t.left.x}i=e.right.x<e.left.x,n=e.right.x-e.left.x,r=e.right.y-e.left.y,o=t.left.x-e.left.x,a=t.left.y-e.left.y;var l=(i?r*o-n*a:a*n-o*r)<0;if(i=e.right.x<e.left.x,n=e.right.x-e.left.x,r=e.right.y-e.left.y,o=t.right.x-e.left.x,a=t.right.y-e.left.y,l==(i?r*o-n*a:a*n-o*r)<0)return l;i=t.right.x<t.left.x,n=t.right.x-t.left.x,r=t.right.y-t.left.y,o=e.left.x-t.left.x,a=e.left.y-t.left.y;var h=0<=(i?r*o-n*a:a*n-o*r);return i=t.right.x<t.left.x,n=t.right.x-t.left.x,r=t.right.y-t.left.y,o=e.right.x-t.left.x,a=e.right.y-t.left.y,h==0<=(i?r*o-n*a:a*n-o*r)?h:(this.sweepx-e.left.x)/(e.right.x-e.left.x)*(e.right.y-e.left.y)+e.left.y>(this.sweepx-t.left.x)/(t.right.x-t.left.x)*(t.right.y-t.left.y)+t.left.y},Lt.prototype.clear=function(){this.tree.clear()},Lt.prototype.add=function(e){e.node=this.tree.insert(e);var t=this.tree.successor_node(e.node),i=this.tree.predecessor_node(e.node);return null!=t&&(e.next=t.data,t.data.prev=e),null!=i&&(e.prev=i.data,i.data.next=e),e},Lt.prototype.remove=function(e){var t=this.tree.successor_node(e.node),i=this.tree.predecessor_node(e.node);null!=t&&(t.data.prev=e.prev),null!=i&&(i.data.next=e.next),this.tree.remove_node(e.node),e.node=null},Lt.prototype.intersect=function(e,t){if(null==e||null==t)return!1;if(e.left==t.left||e.left==t.right||e.right==t.left||e.right==t.right)return!1;var i=(t.left.x-e.left.x)*(e.right.y-e.left.y)-(e.right.x-e.left.x)*(t.left.y-e.left.y),n=(t.right.x-e.left.x)*(e.right.y-e.left.y)-(e.right.x-e.left.x)*(t.right.y-e.left.y);if(0<i*n)return!1;var r=(e.left.x-t.left.x)*(t.right.y-t.left.y)-(t.right.x-t.left.x)*(e.left.y-t.left.y),o=(e.right.x-t.left.x)*(t.right.y-t.left.y)-(t.right.x-t.left.x)*(e.right.y-t.left.y);return!(0<r*o)},Lt.prototype.intersection=function(e,t){if(null==e||null==t)return null;if(e.left==t.left||e.left==t.right||e.right==t.left||e.right==t.right)return null;var i,n;i=e.right.x-e.left.x,n=e.right.y-e.left.y;var r,o;r=t.right.x-t.left.x;var a=(o=t.right.y-t.left.y)*i-r*n;if(0==a)return null;a=1/a;var s,p,l=(o*(s=t.left.x-e.left.x)-r*(p=t.left.y-e.left.y))*a;if(l<0||1<l)return null;var h,u,d=(n*s-i*p)*a;if(d<0||1<d)return null;if(0==d||1==d||0==l||1==l)h=0==d?t.left:1==d?t.right:0==l?e.left:e.right;else{var c,_=.5*(e.left.x+i*l+t.left.x+r*d),y=.5*(e.left.y+n*l+t.left.y+o*d);null==Gt.zpp_pool?c=new Gt:(c=Gt.zpp_pool,Gt.zpp_pool=c.next,c.next=null),c.x=_,c.y=y,h=c}null==It.zpp_pool?u=new It:(u=It.zpp_pool,It.zpp_pool=u.next,u.next=null),u.vertex=h;var x=u;return x.type=0,x.segment=e,x.segment2=t,x},Lt.prototype.__class__=Lt;var Bt=zpp_nape.geom.ZPP_Simple=function(){};Bt.__name__=["zpp_nape","geom","ZPP_Simple"],Bt.decompose=function(e,t){null==Bt.sweep&&(Bt.sweep=new Lt,Bt.inthash=new _i),null==Bt.vertices&&(null==Wn.zpp_pool?Bt.vertices=new Wn:(Bt.vertices=Wn.zpp_pool,Wn.zpp_pool=Bt.vertices.next,Bt.vertices.next=null),Bt.vertices.lt=Gt.less_xy,Bt.vertices.swapped=Gt.swap_nodes),null==Bt.queue&&(null==Xn.zpp_pool?Bt.queue=new Xn:(Bt.queue=Xn.zpp_pool,Xn.zpp_pool=Bt.queue.next,Bt.queue.next=null),Bt.queue.lt=It.less_xy,Bt.queue.swapped=It.swap_nodes);var i,n=null,r=null;if(null!=e)for(var o=e;;){var a,s=o,p=s.x,l=s.y;null==Gt.zpp_pool?a=new Gt:(a=Gt.zpp_pool,Gt.zpp_pool=a.next,a.next=null),a.x=p,a.y=l;for(var h=a,u=Bt.vertices.parent;null!=u;)if(Bt.vertices.lt(h,u.data))u=u.prev;else{if(!Bt.vertices.lt(u.data,h))break;u=u.next}var d=u;if(null!=d){var c=h;c.links.clear(),c.node=null,c.forced=!1,c.next=Gt.zpp_pool,Gt.zpp_pool=c,h=d.data}else h.node=Bt.vertices.insert(h);if(null!=r){var _;null==It.zpp_pool?_=new It:(_=It.zpp_pool,It.zpp_pool=_.next,_.next=null),_.vertex=r;var y,x=_;null==It.zpp_pool?y=new It:(y=It.zpp_pool,It.zpp_pool=y.next,y.next=null),y.vertex=h;var m,g=y;m=It.less_xy(x,g)?(x.type=1,g.type=2,Dt.get(r,h)):(x.type=2,g.type=1,Dt.get(h,r)),x.segment=g.segment=m,Bt.queue.insert(x),Bt.queue.insert(g),r.links.insert(h),h.links.insert(r)}if(r=h,null==n&&(n=h),(o=o.next)==e)break}null==It.zpp_pool?i=new It:(i=It.zpp_pool,It.zpp_pool=i.next,i.next=null),i.vertex=r;var f,v=i;null==It.zpp_pool?f=new It:(f=It.zpp_pool,It.zpp_pool=f.next,f.next=null),f.vertex=n;var z,w=f;for(z=It.less_xy(v,w)?(v.type=1,w.type=2,Dt.get(r,n)):(v.type=2,w.type=1,Dt.get(n,r)),v.segment=w.segment=z,Bt.queue.insert(v),Bt.queue.insert(w),r.links.insert(n),n.links.insert(r),null==Bt.ints&&(null==Xn.zpp_pool?Bt.ints=new Xn:(Bt.ints=Xn.zpp_pool,Xn.zpp_pool=Bt.ints.next,Bt.ints.next=null),Bt.ints.lt=It.less_xy);!Bt.queue.empty();){var b=Bt.queue.pop_front();if(Bt.sweep.sweepx=b.vertex.x,1==b.type){var S=b.segment;if(Bt.sweep.add(S),null!=S.next&&null!=S&&!(S.next.id<S.id?Bt.inthash.has(S.next.id,S.id):Bt.inthash.has(S.id,S.next.id))){var C=Bt.sweep.intersection(S.next,S);if(null!=C)if(C.vertex.x>=Bt.sweep.sweepx){for(var M=Bt.queue.parent;null!=M;)if(Bt.queue.lt(C,M.data))M=M.prev;else{if(!Bt.queue.lt(M.data,C))break;M=M.next}if(null==M){for(var P=Bt.ints.parent;null!=P;)if(Bt.ints.lt(C,P.data))P=P.prev;else{if(!Bt.ints.lt(P.data,C))break;P=P.next}var k=P;if(null!=k){var T=C.vertex;T.links.clear(),T.node=null,T.forced=!1,T.next=Gt.zpp_pool,Gt.zpp_pool=T,C.vertex=k.data.vertex,k.data=C,Bt.queue.insert(C)}else Bt.queue.insert(C),Bt.ints.insert(C);if(S.next.id<S.id){var A,O=S.next.id,E=S.id;null==ci.zpp_pool?A=new ci:(A=ci.zpp_pool,ci.zpp_pool=A.next,A.next=null),A.id=O,A.di=E;var G=A;G.value=!0,Bt.inthash.add(G)}else{var D,I=S.id,L=S.next.id;null==ci.zpp_pool?D=new ci:(D=ci.zpp_pool,ci.zpp_pool=D.next,D.next=null),D.id=I,D.di=L;var B=D;B.value=!0,Bt.inthash.add(B)}}else{var R=C.vertex;R.links.clear(),R.node=null,R.forced=!1,R.next=Gt.zpp_pool,Gt.zpp_pool=R,C.vertex=null,C.segment=C.segment2=null,C.node=null,C.next=It.zpp_pool,It.zpp_pool=C}}else{var F=C.vertex;F.links.clear(),F.node=null,F.forced=!1,F.next=Gt.zpp_pool,Gt.zpp_pool=F,C.vertex=null,C.segment=C.segment2=null,C.node=null,C.next=It.zpp_pool,It.zpp_pool=C}}if(null!=S&&null!=S.prev&&!(S.id<S.prev.id?Bt.inthash.has(S.id,S.prev.id):Bt.inthash.has(S.prev.id,S.id))){var j=Bt.sweep.intersection(S,S.prev);if(null!=j)if(j.vertex.x>=Bt.sweep.sweepx){for(var N=Bt.queue.parent;null!=N;)if(Bt.queue.lt(j,N.data))N=N.prev;else{if(!Bt.queue.lt(N.data,j))break;N=N.next}if(null==N){for(var U=Bt.ints.parent;null!=U;)if(Bt.ints.lt(j,U.data))U=U.prev;else{if(!Bt.ints.lt(U.data,j))break;U=U.next}var V=U;if(null!=V){var H=j.vertex;H.links.clear(),H.node=null,H.forced=!1,H.next=Gt.zpp_pool,Gt.zpp_pool=H,j.vertex=V.data.vertex,V.data=j,Bt.queue.insert(j)}else Bt.queue.insert(j),Bt.ints.insert(j);if(S.id<S.prev.id){var W,q=S.id,X=S.prev.id;null==ci.zpp_pool?W=new ci:(W=ci.zpp_pool,ci.zpp_pool=W.next,W.next=null),W.id=q,W.di=X;var Y=W;Y.value=!0,Bt.inthash.add(Y)}else{var K,Z=S.prev.id,J=S.id;null==ci.zpp_pool?K=new ci:(K=ci.zpp_pool,ci.zpp_pool=K.next,K.next=null),K.id=Z,K.di=J;var Q=K;Q.value=!0,Bt.inthash.add(Q)}}else{var $=j.vertex;$.links.clear(),$.node=null,$.forced=!1,$.next=Gt.zpp_pool,Gt.zpp_pool=$,j.vertex=null,j.segment=j.segment2=null,j.node=null,j.next=It.zpp_pool,It.zpp_pool=j}}else{var ee=j.vertex;ee.links.clear(),ee.node=null,ee.forced=!1,ee.next=Gt.zpp_pool,Gt.zpp_pool=ee,j.vertex=null,j.segment=j.segment2=null,j.node=null,j.next=It.zpp_pool,It.zpp_pool=j}}}else if(2==b.type){var te=b.segment;if(null!=te.node){var ie=te.next,ne=te.prev;if(Bt.sweep.remove(te),te.left=te.right=null,te.prev=null,te.node=null,te.vertices.clear(),te.next=Dt.zpp_pool,Dt.zpp_pool=te,null!=ie&&null!=ne&&!(ie.id<ne.id?Bt.inthash.has(ie.id,ne.id):Bt.inthash.has(ne.id,ie.id))){var re=Bt.sweep.intersection(ie,ne);if(null!=re)if(re.vertex.x>=Bt.sweep.sweepx){for(var oe=Bt.queue.parent;null!=oe;)if(Bt.queue.lt(re,oe.data))oe=oe.prev;else{if(!Bt.queue.lt(oe.data,re))break;oe=oe.next}if(null==oe){for(var ae=Bt.ints.parent;null!=ae;)if(Bt.ints.lt(re,ae.data))ae=ae.prev;else{if(!Bt.ints.lt(ae.data,re))break;ae=ae.next}var se=ae;if(null!=se){var pe=re.vertex;pe.links.clear(),pe.node=null,pe.forced=!1,pe.next=Gt.zpp_pool,Gt.zpp_pool=pe,re.vertex=se.data.vertex,se.data=re,Bt.queue.insert(re)}else Bt.queue.insert(re),Bt.ints.insert(re);if(ie.id<ne.id){var le,he=ie.id,ue=ne.id;null==ci.zpp_pool?le=new ci:(le=ci.zpp_pool,ci.zpp_pool=le.next,le.next=null),le.id=he,le.di=ue;var de=le;de.value=!0,Bt.inthash.add(de)}else{var ce,_e=ne.id,ye=ie.id;null==ci.zpp_pool?ce=new ci:(ce=ci.zpp_pool,ci.zpp_pool=ce.next,ce.next=null),ce.id=_e,ce.di=ye;var xe=ce;xe.value=!0,Bt.inthash.add(xe)}}else{var me=re.vertex;me.links.clear(),me.node=null,me.forced=!1,me.next=Gt.zpp_pool,Gt.zpp_pool=me,re.vertex=null,re.segment=re.segment2=null,re.node=null,re.next=It.zpp_pool,It.zpp_pool=re}}else{var ge=re.vertex;ge.links.clear(),ge.node=null,ge.forced=!1,ge.next=Gt.zpp_pool,Gt.zpp_pool=ge,re.vertex=null,re.segment=re.segment2=null,re.node=null,re.next=It.zpp_pool,It.zpp_pool=re}}}}else{var fe=b.vertex,ve=null==fe.node,ze=b.segment,we=b.segment2;if(we.next!=ze){var be=ze;ze=we,we=be}for(var Se=ze.vertices.parent;null!=Se;)if(ze.vertices.lt(fe,Se.data))Se=Se.prev;else{if(!ze.vertices.lt(Se.data,fe))break;Se=Se.next}for(var Ce=null==Se,Me=we.vertices.parent;null!=Me;)if(we.vertices.lt(fe,Me.data))Me=Me.prev;else{if(!we.vertices.lt(Me.data,fe))break;Me=Me.next}var Pe=null==Me;if(Ce){var ke=ze.vertices.insert(fe),Te=fe==ze.left?fe:ze.vertices.predecessor_node(ke).data,Ae=fe==ze.right?fe:ze.vertices.successor_node(ke).data;Te.links.remove(Ae),fe!=Te&&Te.links.insert(fe),Ae.links.remove(Te),fe!=Ae&&Ae.links.insert(fe),fe!=Te&&fe.links.insert(Te),fe!=Ae&&fe.links.insert(Ae)}if(Pe){var Oe=we.vertices.insert(fe),Ee=fe==we.left?fe:we.vertices.predecessor_node(Oe).data,Ge=fe==we.right?fe:we.vertices.successor_node(Oe).data;Ee.links.remove(Ge),fe!=Ee&&Ee.links.insert(fe),Ge.links.remove(Ee),fe!=Ge&&Ge.links.insert(fe),fe!=Ee&&fe.links.insert(Ee),fe!=Ge&&fe.links.insert(Ge)}if(ve&&(fe.node=Bt.vertices.insert(fe)),fe.forced=!0,ve){var De=ze.node,Ie=we.node;De.data=we,(Ie.data=ze).node=Ie,we.node=De,we.next=ze.next,ze.next=we,ze.prev=we.prev,null!=(we.prev=ze).prev&&(ze.prev.next=ze),null!=we.next&&(we.next.prev=we)}if(null!=we.next&&null!=we&&!(we.next.id<we.id?Bt.inthash.has(we.next.id,we.id):Bt.inthash.has(we.id,we.next.id))){var Le=Bt.sweep.intersection(we.next,we);if(null!=Le)if(Le.vertex.x>=Bt.sweep.sweepx){for(var Be=Bt.queue.parent;null!=Be;)if(Bt.queue.lt(Le,Be.data))Be=Be.prev;else{if(!Bt.queue.lt(Be.data,Le))break;Be=Be.next}if(null==Be){for(var Re=Bt.ints.parent;null!=Re;)if(Bt.ints.lt(Le,Re.data))Re=Re.prev;else{if(!Bt.ints.lt(Re.data,Le))break;Re=Re.next}var Fe=Re;if(null!=Fe){var je=Le.vertex;je.links.clear(),je.node=null,je.forced=!1,je.next=Gt.zpp_pool,Gt.zpp_pool=je,Le.vertex=Fe.data.vertex,Fe.data=Le,Bt.queue.insert(Le)}else Bt.queue.insert(Le),Bt.ints.insert(Le);if(we.next.id<we.id){var Ne,Ue=we.next.id,Ve=we.id;null==ci.zpp_pool?Ne=new ci:(Ne=ci.zpp_pool,ci.zpp_pool=Ne.next,Ne.next=null),Ne.id=Ue,Ne.di=Ve;var He=Ne;He.value=!0,Bt.inthash.add(He)}else{var We,qe=we.id,Xe=we.next.id;null==ci.zpp_pool?We=new ci:(We=ci.zpp_pool,ci.zpp_pool=We.next,We.next=null),We.id=qe,We.di=Xe;var Ye=We;Ye.value=!0,Bt.inthash.add(Ye)}}else{var Ke=Le.vertex;Ke.links.clear(),Ke.node=null,Ke.forced=!1,Ke.next=Gt.zpp_pool,Gt.zpp_pool=Ke,Le.vertex=null,Le.segment=Le.segment2=null,Le.node=null,Le.next=It.zpp_pool,It.zpp_pool=Le}}else{var Ze=Le.vertex;Ze.links.clear(),Ze.node=null,Ze.forced=!1,Ze.next=Gt.zpp_pool,Gt.zpp_pool=Ze,Le.vertex=null,Le.segment=Le.segment2=null,Le.node=null,Le.next=It.zpp_pool,It.zpp_pool=Le}}if(null!=ze&&null!=ze.prev&&!(ze.id<ze.prev.id?Bt.inthash.has(ze.id,ze.prev.id):Bt.inthash.has(ze.prev.id,ze.id))){var Je=Bt.sweep.intersection(ze,ze.prev);if(null!=Je)if(Je.vertex.x>=Bt.sweep.sweepx){for(var Qe=Bt.queue.parent;null!=Qe;)if(Bt.queue.lt(Je,Qe.data))Qe=Qe.prev;else{if(!Bt.queue.lt(Qe.data,Je))break;Qe=Qe.next}if(null==Qe){for(var $e=Bt.ints.parent;null!=$e;)if(Bt.ints.lt(Je,$e.data))$e=$e.prev;else{if(!Bt.ints.lt($e.data,Je))break;$e=$e.next}var et=$e;if(null!=et){var tt=Je.vertex;tt.links.clear(),tt.node=null,tt.forced=!1,tt.next=Gt.zpp_pool,Gt.zpp_pool=tt,Je.vertex=et.data.vertex,et.data=Je,Bt.queue.insert(Je)}else Bt.queue.insert(Je),Bt.ints.insert(Je);if(ze.id<ze.prev.id){var it,nt=ze.id,rt=ze.prev.id;null==ci.zpp_pool?it=new ci:(it=ci.zpp_pool,ci.zpp_pool=it.next,it.next=null),it.id=nt,it.di=rt;var ot=it;ot.value=!0,Bt.inthash.add(ot)}else{var at,st=ze.prev.id,pt=ze.id;null==ci.zpp_pool?at=new ci:(at=ci.zpp_pool,ci.zpp_pool=at.next,at.next=null),at.id=st,at.di=pt;var lt=at;lt.value=!0,Bt.inthash.add(lt)}}else{var ht=Je.vertex;ht.links.clear(),ht.node=null,ht.forced=!1,ht.next=Gt.zpp_pool,Gt.zpp_pool=ht,Je.vertex=null,Je.segment=Je.segment2=null,Je.node=null,Je.next=It.zpp_pool,It.zpp_pool=Je}}else{var ut=Je.vertex;ut.links.clear(),ut.node=null,ut.forced=!1,ut.next=Gt.zpp_pool,Gt.zpp_pool=ut,Je.vertex=null,Je.segment=Je.segment2=null,Je.node=null,Je.next=It.zpp_pool,It.zpp_pool=Je}}Bt.ints.remove(b)}b.vertex=null,b.segment=b.segment2=null,b.node=null,b.next=It.zpp_pool,It.zpp_pool=b}for(var dt=0,ct=Bt.inthash.table.length;dt<ct;){var _t=dt++,yt=Bt.inthash.table[_t];if(null!=yt){for(;null!=yt;){var xt=yt.hnext;yt.hnext=null;var mt=yt;mt.next=ci.zpp_pool,ci.zpp_pool=mt,yt=xt}Bt.inthash.table[_t]=null}}for(null==t&&(t=new Si);!Bt.vertices.empty();)Bt.clip_polygon(Bt.vertices,t);return t},Bt.clip_polygon=function(e,t){var i,n,r=null,o=e.first(),a=o,s=o.links.parent,p=null==s.prev?s.next:s.prev,l=s.data,h=p.data;i=o.x-l.x,n=o.y-l.y;var u;u=h.x-o.x,(h.y-o.y)*i-u*n<0&&(h=l);var d,c=o.x,_=o.y;null==cr.zpp_pool?d=new cr:(d=cr.zpp_pool,cr.zpp_pool=d.next,d.next=null),d.forced=!1,d.x=c,d.y=_;var y=d;for(null==r?r=y.prev=y.next=y:(y.prev=r,y.next=r.next,r.next.prev=y,r.next=y),(r=y).forced=o.forced;;){if(o.links.remove(h),h.links.remove(o),h==a){if(o.links.empty()){e.remove(o);var x=o;x.links.clear(),x.node=null,x.forced=!1,x.next=Gt.zpp_pool,Gt.zpp_pool=x}break}var m,g=h.x,f=h.y;null==cr.zpp_pool?m=new cr:(m=cr.zpp_pool,cr.zpp_pool=m.next,m.next=null),m.forced=!1,m.x=g,m.y=f;var v=m;if(null==r?r=v.prev=v.next=v:(v.prev=r,v.next=r.next,r.next.prev=v,r.next=v),(r=v).forced=h.forced,h.links.singular()){if(o.links.empty()){e.remove(o);var z=o;z.links.clear(),z.node=null,z.forced=!1,z.next=Gt.zpp_pool,Gt.zpp_pool=z}h=(o=h).links.parent.data}else{var w=null,b=0;if(!h.links.empty()){for(var S=h.links.parent;null!=S.prev;)S=S.prev;for(;null!=S;){var C=S.data;if(null==w){w=C;var M,P;M=h.x-o.x,P=h.y-o.y;var k;k=C.x-h.x,b=(C.y-h.y)*M-k*P}else{var T,A;T=h.x-o.x,A=h.y-o.y;var O;O=C.x-h.x;var E=(C.y-h.y)*T-O*A;if(0<E&&b<=0)w=C,b=E;else if(0<=b*E){var G,D;G=h.x-C.x,D=h.y-C.y;var I;I=w.x-h.x,0<(w.y-h.y)*G-I*D&&(w=C,b=E)}}if(null!=S.next)for(S=S.next;null!=S.prev;)S=S.prev;else{for(;null!=S.parent&&S==S.parent.next;)S=S.parent;S=S.parent}}}if(o.links.empty()){e.remove(o);var L=o;L.links.clear(),L.node=null,L.forced=!1,L.next=Gt.zpp_pool,Gt.zpp_pool=L}o=h,h=w}}e.remove(a),a.links.clear(),a.node=null,a.forced=!1,a.next=Gt.zpp_pool,Gt.zpp_pool=a,t.add(r)},Bt.isSimple=function(e){null==Bt.sweep&&(Bt.sweep=new Lt,Bt.inthash=new _i);var t=Bt.list_vertices;if(null==t&&(t=Bt.list_vertices=new Ci),null!=e)for(var i=e;;){var n,r=i,o=r.x,a=r.y;if(null==Gt.zpp_pool?n=new Gt:(n=Gt.zpp_pool,Gt.zpp_pool=n.next,n.next=null),n.x=o,n.y=a,t.add(n),(i=i.next)==e)break}var s=Bt.list_queue;null==s&&(s=Bt.list_queue=new Mi);var p=t.head,l=p.elt;for(p=p.next;null!=p;){var h,u=p.elt;null==It.zpp_pool?h=new It:(h=It.zpp_pool,It.zpp_pool=h.next,h.next=null),h.vertex=l;var d,c=s.add(h);null==It.zpp_pool?d=new It:(d=It.zpp_pool,It.zpp_pool=d.next,d.next=null),d.vertex=u;var _,y=s.add(d);_=It.less_xy(c,y)?(c.type=1,y.type=2,Dt.get(l,u)):(c.type=2,y.type=1,Dt.get(u,l)),c.segment=y.segment=_,l=u,p=p.next}var x,m=t.head.elt;null==It.zpp_pool?x=new It:(x=It.zpp_pool,It.zpp_pool=x.next,x.next=null),x.vertex=l;var g,f=s.add(x);null==It.zpp_pool?g=new It:(g=It.zpp_pool,It.zpp_pool=g.next,g.next=null),g.vertex=m;var v,z=s.add(g);v=It.less_xy(f,z)?(f.type=1,z.type=2,Dt.get(l,m)):(f.type=2,z.type=1,Dt.get(m,l)),f.segment=z.segment=v;var w=s;if(null!=w.head&&null!=w.head.next){for(var b,S,C,M=w.head,P=null,k=null,T=null,A=null,O=1;;){for(b=0,k=M,P=M=null;null!=k;){for(++b,T=k,S=0,C=O;null!=T&&S<O;)++S,T=T.next;for(;0<S||0<C&&null!=T;)0==S?(T=(A=T).next,--C):0==C||null==T?(k=(A=k).next,--S):It.less_xy(k.elt,T.elt)?(k=(A=k).next,--S):(T=(A=T).next,--C),null!=P?P.next=A:M=A,P=A;k=T}if(P.next=null,O<<=1,!(1<b))break}w.head=M,w.modified=!0,w.pushmod=!0}for(var E=!0;null!=s.head;){var G=s.pop_unsafe(),D=G.segment;if(1==G.type){if(Bt.sweep.add(D),Bt.sweep.intersect(D,D.next)||Bt.sweep.intersect(D,D.prev)){E=!1;break}}else if(2==G.type){if(Bt.sweep.intersect(D.prev,D.next)){E=!1;break}Bt.sweep.remove(D),D.left=D.right=null,D.prev=null,D.node=null,D.vertices.clear(),D.next=Dt.zpp_pool,Dt.zpp_pool=D}G.vertex=null,G.segment=G.segment2=null,G.node=null,G.next=It.zpp_pool,It.zpp_pool=G}for(;null!=s.head;){var I=s.pop_unsafe();if(2==I.type){var L=I.segment;L.left=L.right=null,L.prev=null,L.node=null,L.vertices.clear(),L.next=Dt.zpp_pool,Dt.zpp_pool=L}I.vertex=null,I.segment=I.segment2=null,I.node=null,I.next=It.zpp_pool,It.zpp_pool=I}for(Bt.sweep.clear();null!=t.head;){var B=t.pop_unsafe();B.links.clear(),B.node=null,B.forced=!1,B.next=Gt.zpp_pool,Gt.zpp_pool=B}return E},Bt.prototype.__class__=Bt;var Rt=zpp_nape.geom.ZPP_SimplifyV=function(){this.forced=!1,this.flag=!1,this.prev=null,this.next=null,this.y=0,this.x=0};Rt.__name__=["zpp_nape","geom","ZPP_SimplifyV"],Rt.get=function(e){var t;return null==Rt.zpp_pool?t=new Rt:(t=Rt.zpp_pool,Rt.zpp_pool=t.next,t.next=null),t.x=e.x,t.y=e.y,t.flag=!1,t},Rt.prototype.x=null,Rt.prototype.y=null,Rt.prototype.next=null,Rt.prototype.prev=null,Rt.prototype.flag=null,Rt.prototype.forced=null,Rt.prototype.free=function(){},Rt.prototype.alloc=function(){},Rt.prototype.__class__=Rt;var Ft=zpp_nape.geom.ZPP_SimplifyP=function(){this.max=null,this.min=null,this.next=null};Ft.__name__=["zpp_nape","geom","ZPP_SimplifyP"],Ft.get=function(e,t){var i;return null==Ft.zpp_pool?i=new Ft:(i=Ft.zpp_pool,Ft.zpp_pool=i.next,i.next=null),i.min=e,i.max=t,i},Ft.prototype.next=null,Ft.prototype.min=null,Ft.prototype.max=null,Ft.prototype.free=function(){this.min=this.max=null},Ft.prototype.alloc=function(){},Ft.prototype.__class__=Ft;var jt=zpp_nape.geom.ZPP_Simplify=function(){};jt.__name__=["zpp_nape","geom","ZPP_Simplify"],jt.lessval=function(e,t){return e.x-t.x+(e.y-t.y)},jt.less=function(e,t){return e.x-t.x+(e.y-t.y)<0},jt.distance=function(e,t,i){var n,r;n=i.x-t.x,r=i.y-t.y;var o=0,a=0;if(o=e.x-t.x,a=e.y-t.y,n*n+r*r==0)return o*o+a*a;var s=(o*n+a*r)/(n*n+r*r);if(s<=0)return o*o+a*a;if(1<=s){var p,l,h=e.x,u=e.y;return(p=h-i.x)*p+(l=u-i.y)*l}return(o-=n*s)*o+(a-=r*s)*a},jt.simplify=function(e,t){var i=null,n=null,r=null;t*=t,null==jt.stack&&(jt.stack=new wi);for(var o,a=null,s=null,p=e;;){var l;null==Rt.zpp_pool?l=new Rt:(l=Rt.zpp_pool,Rt.zpp_pool=l.next,l.next=null),l.x=p.x,l.y=p.y,l.flag=!1;var h=l;if(h.forced=p.forced,h.forced){var u;if(h.flag=!0,null!=a)null==Ft.zpp_pool?u=new Ft:(u=Ft.zpp_pool,Ft.zpp_pool=u.next,u.next=null),u.min=a,u.max=h,jt.stack.add(u);else s=h;a=h}if(null==i?i=h.prev=h.next=h:(h.prev=i,h.next=i.next,i.next.prev=h,i.next=h),i=h,null==n?r=n=h:(h.x-n.x+(h.y-n.y)<0&&(n=h),r.x-h.x+(r.y-h.y)<0&&(r=h)),(p=p.next)==e)break}if(null==jt.stack.head)if(null==s){var d,c;n.flag=r.flag=!0,null==Ft.zpp_pool?d=new Ft:(d=Ft.zpp_pool,Ft.zpp_pool=d.next,d.next=null),d.min=n,d.max=r,jt.stack.add(d),null==Ft.zpp_pool?c=new Ft:(c=Ft.zpp_pool,Ft.zpp_pool=c.next,c.next=null),c.min=r,c.max=n,jt.stack.add(c)}else{var _=n.x-s.x+(n.y-s.y);_<0&&(_=-_);var y,x,m,g,f=r.x-s.x+(r.y-s.y);if(f<0&&(f=-f),f<_)n.flag=s.flag=!0,null==Ft.zpp_pool?y=new Ft:(y=Ft.zpp_pool,Ft.zpp_pool=y.next,y.next=null),y.min=n,y.max=s,jt.stack.add(y),null==Ft.zpp_pool?x=new Ft:(x=Ft.zpp_pool,Ft.zpp_pool=x.next,x.next=null),x.min=s,x.max=n,jt.stack.add(x);else r.flag=s.flag=!0,null==Ft.zpp_pool?m=new Ft:(m=Ft.zpp_pool,Ft.zpp_pool=m.next,m.next=null),m.min=r,m.max=s,jt.stack.add(m),null==Ft.zpp_pool?g=new Ft:(g=Ft.zpp_pool,Ft.zpp_pool=g.next,g.next=null),g.min=s,g.max=r,jt.stack.add(g)}else null==Ft.zpp_pool?o=new Ft:(o=Ft.zpp_pool,Ft.zpp_pool=o.next,o.next=null),o.min=a,o.max=s,jt.stack.add(o);for(;null!=jt.stack.head;){var v=jt.stack.pop_unsafe(),z=v.min,w=v.max;v.min=v.max=null,v.next=Ft.zpp_pool,Ft.zpp_pool=v;for(var b,S,C=t,M=null,P=z.next;P!=w;){var k=jt.distance(P,z,w);C<k&&(C=k,M=P),P=P.next}if(null!=M)M.flag=!0,null==Ft.zpp_pool?b=new Ft:(b=Ft.zpp_pool,Ft.zpp_pool=b.next,b.next=null),b.min=z,b.max=M,jt.stack.add(b),null==Ft.zpp_pool?S=new Ft:(S=Ft.zpp_pool,Ft.zpp_pool=S.next,S.next=null),S.min=M,S.max=w,jt.stack.add(S)}for(var T=null;null!=i;){if(i.flag){var A,O=i.x,E=i.y;null==cr.zpp_pool?A=new cr:(A=cr.zpp_pool,cr.zpp_pool=A.next,A.next=null),A.forced=!1,A.x=O,A.y=E;var G=A;null==T?T=G.prev=G.next=G:(G.prev=T,G.next=T.next,T.next.prev=G,T.next=G),(T=G).forced=i.forced}if(null!=i&&i.prev==i){i.next=i.prev=null;var D=i;D.next=Rt.zpp_pool,Rt.zpp_pool=D,i=i=null}else{var I=i.next;i.prev.next=i.next,i.next.prev=i.prev,i.next=i.prev=null;var L=i;L.next=Rt.zpp_pool,Rt.zpp_pool=L,i=null,i=I}}return T},jt.prototype.__class__=jt;var Vt=zpp_nape.geom.ZPP_ToiEvent=function(){this.kinematic=!1,this.failed=!1,this.slipped=!1,this.axis=null,this.c2=null,this.c1=null,this.frozen2=!1,this.frozen1=!1,this.arbiter=null,this.s2=null,this.s1=null,this.toi=0,this.next=null,this.c1=new ep,this.c2=new ep,this.axis=new ep};Vt.__name__=["zpp_nape","geom","ZPP_ToiEvent"],Vt.prototype.next=null,Vt.prototype.alloc=function(){this.failed=!1,this.s1=this.s2=null,this.arbiter=null},Vt.prototype.free=function(){},Vt.prototype.toi=null,Vt.prototype.s1=null,Vt.prototype.s2=null,Vt.prototype.arbiter=null,Vt.prototype.frozen1=null,Vt.prototype.frozen2=null,Vt.prototype.c1=null,Vt.prototype.c2=null,Vt.prototype.axis=null,Vt.prototype.slipped=null,Vt.prototype.failed=null,Vt.prototype.kinematic=null,Vt.prototype.__class__=Vt;var Ht=zpp_nape.geom.ZPP_SweepDistance=function(){};Ht.__name__=["zpp_nape","geom","ZPP_SweepDistance"],Ht.dynamicSweep=function(e,t,i,n,r){null==r&&(r=!1);var o,a,s=e.s1,p=e.s2,l=s.body,h=p.body;o=h.velx-l.velx,a=h.vely-l.vely;var u=l.angvel;u<0&&(u=-u);var d=h.angvel;d<0&&(d=-d);var c=s.sweepCoef*u+p.sweepCoef*d;if(!r&&!e.kinematic&&o*o+a*a<Qs.dynamicSweepLinearThreshold*Qs.dynamicSweepLinearThreshold&&c<Qs.dynamicSweepAngularThreshold)return e.toi=-1,void(e.failed=!0);for(var _=e.c1,y=e.c2,x=e.axis,m=i,g=0;;){var f=m*t,v=f-l.sweepTime;if(0!=v&&(l.sweepTime=f,l.posx+=l.velx*v,l.posy+=l.vely*v,0!=l.angvel)){var z=l.sweep_angvel*v;if(l.rot+=z,1e-4<z*z)l.axisx=Math.sin(l.rot),l.axisy=Math.cos(l.rot);else{var w=z*z,b=1-.5*w,S=1-w*w/8,C=(b*l.axisx+z*l.axisy)*S;l.axisy=(b*l.axisy-z*l.axisx)*S,l.axisx=C}}if(0==s.type)s.worldCOMx=l.posx+(l.axisy*s.localCOMx-l.axisx*s.localCOMy),s.worldCOMy=l.posy+(s.localCOMx*l.axisx+s.localCOMy*l.axisy);else{for(var M=s.polygon,P=M.lverts.next,k=M.gverts.next;null!=k;){var T=k,A=P;P=P.next,T.x=l.posx+(l.axisy*A.x-l.axisx*A.y),T.y=l.posy+(A.x*l.axisx+A.y*l.axisy),k=k.next}var O=M.edges.head,E=M.gverts.next,G=E;for(E=E.next;null!=E;){var D=E,I=O.elt;O=O.next,I.gnormx=l.axisy*I.lnormx-l.axisx*I.lnormy,I.gnormy=I.lnormx*l.axisx+I.lnormy*l.axisy,I.gprojection=l.posx*I.gnormx+l.posy*I.gnormy+I.lprojection,I.tp0=G.y*I.gnormx-G.x*I.gnormy,I.tp1=D.y*I.gnormx-D.x*I.gnormy,G=D,E=E.next}var L=M.gverts.next,B=O.elt;B.gnormx=l.axisy*B.lnormx-l.axisx*B.lnormy,B.gnormy=B.lnormx*l.axisx+B.lnormy*l.axisy,B.gprojection=l.posx*B.gnormx+l.posy*B.gnormy+B.lprojection,B.tp0=G.y*B.gnormx-G.x*B.gnormy,B.tp1=L.y*B.gnormx-L.x*B.gnormy}var R=m*t,F=R-h.sweepTime;if(0!=F&&(h.sweepTime=R,h.posx+=h.velx*F,h.posy+=h.vely*F,0!=h.angvel)){var j=h.sweep_angvel*F;if(h.rot+=j,1e-4<j*j)h.axisx=Math.sin(h.rot),h.axisy=Math.cos(h.rot);else{var N=j*j,U=1-.5*N,V=1-N*N/8,H=(U*h.axisx+j*h.axisy)*V;h.axisy=(U*h.axisy-j*h.axisx)*V,h.axisx=H}}if(0==p.type)p.worldCOMx=h.posx+(h.axisy*p.localCOMx-h.axisx*p.localCOMy),p.worldCOMy=h.posy+(p.localCOMx*h.axisx+p.localCOMy*h.axisy);else{for(var W=p.polygon,q=W.lverts.next,X=W.gverts.next;null!=X;){var Y=X,K=q;q=q.next,Y.x=h.posx+(h.axisy*K.x-h.axisx*K.y),Y.y=h.posy+(K.x*h.axisx+K.y*h.axisy),X=X.next}var Z=W.edges.head,J=W.gverts.next,Q=J;for(J=J.next;null!=J;){var $=J,ee=Z.elt;Z=Z.next,ee.gnormx=h.axisy*ee.lnormx-h.axisx*ee.lnormy,ee.gnormy=ee.lnormx*h.axisx+ee.lnormy*h.axisy,ee.gprojection=h.posx*ee.gnormx+h.posy*ee.gnormy+ee.lprojection,ee.tp0=Q.y*ee.gnormx-Q.x*ee.gnormy,ee.tp1=$.y*ee.gnormx-$.x*ee.gnormy,Q=$,J=J.next}var te=W.gverts.next,ie=Z.elt;ie.gnormx=h.axisy*ie.lnormx-h.axisx*ie.lnormy,ie.gnormy=ie.lnormx*h.axisx+ie.lnormy*h.axisy,ie.gprojection=h.posx*ie.gnormx+h.posy*ie.gnormy+ie.lprojection,ie.tp0=Q.y*ie.gnormx-Q.x*ie.gnormy,ie.tp1=te.y*ie.gnormx-te.x*ie.gnormy}var ne,re=s,oe=p,ae=_,se=y;if(0==s.type&&0==p.type){var pe,le=s.circle,he=p.circle,ue=0,de=0;ue=he.worldCOMx-le.worldCOMx,de=he.worldCOMy-le.worldCOMy;var ce=Math.sqrt(ue*ue+de*de);if((pe=ce-(le.radius+he.radius))<1e100){if(0==ce)ue=1,de=0;else{var _e=1/ce;ue*=_e,de*=_e}var ye=le.radius;_.x=le.worldCOMx+ue*ye,_.y=le.worldCOMy+de*ye;var xe=-he.radius;y.x=he.worldCOMx+ue*xe,y.y=he.worldCOMy+de*xe,x.x=ue,x.y=de}ne=pe}else{var me=!1;if(0==s.type&&1==p.type)re=p,oe=s,ae=y,se=_,me=!0;if(1==re.type&&0==oe.type){for(var ge=re.polygon,fe=oe.circle,ve=-1e100,ze=null,we=ge.edges.head;null!=we;){var be=we.elt,Se=be.gnormx*fe.worldCOMx+be.gnormy*fe.worldCOMy-be.gprojection-fe.radius;if(1e100<Se){ve=Se;break}0<Se?ve<Se&&(ve=Se,ze=be):ve<0&&ve<Se&&(ve=Se,ze=be),we=we.next}if(ve<1e100){var Ce=ze.gp0,Me=ze.gp1,Pe=fe.worldCOMy*ze.gnormx-fe.worldCOMx*ze.gnormy;if(Pe<=Ce.y*ze.gnormx-Ce.x*ze.gnormy){var ke=0,Te=0;ke=fe.worldCOMx-Ce.x,Te=fe.worldCOMy-Ce.y;var Ae=Math.sqrt(ke*ke+Te*Te);if((ve=Ae-fe.radius)<1e100){if(0==Ae)ke=1,Te=0;else{var Oe=1/Ae;ke*=Oe,Te*=Oe}ae.x=Ce.x+0*ke,ae.y=Ce.y+0*Te;var Ee=-fe.radius;se.x=fe.worldCOMx+ke*Ee,se.y=fe.worldCOMy+Te*Ee,x.x=ke,x.y=Te}}else if(Pe>=Me.y*ze.gnormx-Me.x*ze.gnormy){var Ge=0,De=0;Ge=fe.worldCOMx-Me.x,De=fe.worldCOMy-Me.y;var Ie=Math.sqrt(Ge*Ge+De*De);if((ve=Ie-fe.radius)<1e100){if(0==Ie)Ge=1,De=0;else{var Le=1/Ie;Ge*=Le,De*=Le}ae.x=Me.x+0*Ge,ae.y=Me.y+0*De;var Be=-fe.radius;se.x=fe.worldCOMx+Ge*Be,se.y=fe.worldCOMy+De*Be,x.x=Ge,x.y=De}}else{var Re=-fe.radius;se.x=fe.worldCOMx+ze.gnormx*Re,se.y=fe.worldCOMy+ze.gnormy*Re;var Fe=-ve;ae.x=se.x+ze.gnormx*Fe,ae.y=se.y+ze.gnormy*Fe,x.x=ze.gnormx,x.y=ze.gnormy}}me&&(x.x=-x.x,x.y=-x.y),ne=ve}else{for(var je=re.polygon,Ne=oe.polygon,Ue=-1e100,Ve=null,He=null,We=0,qe=je.edges.head;null!=qe;){for(var Xe=qe.elt,Ye=1e100,Ke=Ne.gverts.next;null!=Ke;){var Ze=Ke,Je=Xe.gnormx*Ze.x+Xe.gnormy*Ze.y;Je<Ye&&(Ye=Je),Ke=Ke.next}if(1e100<(Ye-=Xe.gprojection)){Ue=Ye;break}0<Ye?Ue<Ye&&(Ue=Ye,Ve=Xe,We=1):Ue<0&&Ue<Ye&&(Ue=Ye,Ve=Xe,We=1),qe=qe.next}if(Ue<1e100){for(var Qe=Ne.edges.head;null!=Qe;){for(var $e=Qe.elt,et=1e100,tt=je.gverts.next;null!=tt;){var it=tt,nt=$e.gnormx*it.x+$e.gnormy*it.y;nt<et&&(et=nt),tt=tt.next}if(1e100<(et-=$e.gprojection)){Ue=et;break}0<et?Ue<et&&(Ue=et,He=$e,We=2):Ue<0&&Ue<et&&(Ue=et,He=$e,We=2),Qe=Qe.next}if(Ue<1e100){var rt,ot;if(1==We)rt=Ne,ot=Ve;else{rt=je,ot=He;var at=ae;ae=se,se=at,me=!me}for(var st=null,pt=1e100,lt=rt.edges.head;null!=lt;){var ht=lt.elt,ut=ot.gnormx*ht.gnormx+ot.gnormy*ht.gnormy;ut<pt&&(pt=ut,st=ht),lt=lt.next}if(me?(x.x=-ot.gnormx,x.y=-ot.gnormy):(x.x=ot.gnormx,x.y=ot.gnormy),0<=Ue){var dt,ct,_t,yt,xt=ot.gp0,mt=ot.gp1,gt=st.gp0,ft=st.gp1,vt=1/((dt=mt.x-xt.x)*dt+(ct=mt.y-xt.y)*ct),zt=1/((_t=ft.x-gt.x)*_t+(yt=ft.y-gt.y)*yt),wt=-(dt*(xt.x-gt.x)+ct*(xt.y-gt.y))*vt,bt=-(dt*(xt.x-ft.x)+ct*(xt.y-ft.y))*vt,St=-(_t*(gt.x-xt.x)+yt*(gt.y-xt.y))*zt,Ct=-(_t*(gt.x-mt.x)+yt*(gt.y-mt.y))*zt;wt<0?wt=0:1<wt&&(wt=1),bt<0?bt=0:1<bt&&(bt=1),St<0?St=0:1<St&&(St=1),Ct<0?Ct=0:1<Ct&&(Ct=1);var Mt,Pt,kt=wt;Mt=xt.x+dt*kt,Pt=xt.y+ct*kt;var Tt,At,Ot=bt;Tt=xt.x+dt*Ot,At=xt.y+ct*Ot;var Et,Gt,Dt=St;Et=gt.x+_t*Dt,Gt=gt.y+yt*Dt;var It,Lt,Bt=Ct;It=gt.x+_t*Bt,Lt=gt.y+yt*Bt;var Rt,Ft,jt,Nt,Ut,Vt,Ht,Wt,qt=(Rt=Mt-gt.x)*Rt+(Ft=Pt-gt.y)*Ft,Xt=(jt=Tt-ft.x)*jt+(Nt=At-ft.y)*Nt,Yt=(Ut=Et-xt.x)*Ut+(Vt=Gt-xt.y)*Vt,Kt=(Ht=It-mt.x)*Ht+(Wt=Lt-mt.y)*Wt,Zt=0,Jt=0,Qt=null;qt<Xt?(Zt=Mt,Jt=Pt,Qt=gt):(Zt=Tt,Jt=At,Qt=ft,qt=Xt);var $t=0,ei=0,ti=null;if(Yt<Kt?($t=Et,ei=Gt,ti=xt):($t=It,ei=Lt,ti=mt,Yt=Kt),0!=(Ue=qt<Yt?(ae.x=Zt,ae.y=Jt,se.x=Qt.x,se.y=Qt.y,Math.sqrt(qt)):(se.x=$t,se.y=ei,ae.x=ti.x,ae.y=ti.y,Math.sqrt(Yt)))){x.x=se.x-ae.x,x.y=se.y-ae.y;var ii=1/Ue;x.x*=ii,x.y*=ii,me&&(x.x=-x.x,x.y=-x.y)}ne=Ue}else{var ni=0,ri=0;ni=st.gp0.x,ri=st.gp0.y;var oi,ai,si=0,pi=0;oi=(si=st.gp1.x)-ni,ai=(pi=st.gp1.y)-ri;var li=ot.gnormy*ni-ot.gnormx*ri,hi=ot.gnormy*si-ot.gnormx*pi,ui=1/(hi-li),di=(-ot.tp1-li)*ui;di>Qs.epsilon&&(ni+=oi*di,ri+=ai*di);var ci=(-ot.tp0-hi)*ui;ci<-Qs.epsilon&&(si+=oi*ci,pi+=ai*ci);var _i=ni*ot.gnormx+ri*ot.gnormy-ot.gprojection,yi=si*ot.gnormx+pi*ot.gnormy-ot.gprojection;if(_i<yi){se.x=ni,se.y=ri;var xi=-_i;ae.x=se.x+ot.gnormx*xi,ae.y=se.y+ot.gnormy*xi,ne=_i}else{se.x=si,se.y=pi;var mi=-yi;ae.x=se.x+ot.gnormx*mi,ae.y=se.y+ot.gnormy*mi,ne=yi}}}else ne=1e100}else ne=1e100}}var gi=ne+n,fi=o*x.x+a*x.y;if(gi<Qs.distanceThresholdCCD){if(r)break;var vi,zi;vi=_.x-l.posx,zi=_.y-l.posy;var wi,bi;wi=y.x-h.posx,bi=y.y-h.posy;var Si=fi-l.sweep_angvel*(x.y*vi-x.x*zi)+h.sweep_angvel*(x.y*wi-x.x*bi);if(0<Si&&(e.slipped=!0),Si<=0||gi<.5*Qs.distanceThresholdCCD)break}var Ci=(c-fi)*t;if(Ci<=0){m=-1;break}var Mi=gi/Ci;if(Mi<1e-6&&(Mi=1e-6),1<=(m+=Mi)){var Pi=(m=1)*t,ki=Pi-l.sweepTime;if(0!=ki&&(l.sweepTime=Pi,l.posx+=l.velx*ki,l.posy+=l.vely*ki,0!=l.angvel)){var Ti=l.sweep_angvel*ki;if(l.rot+=Ti,1e-4<Ti*Ti)l.axisx=Math.sin(l.rot),l.axisy=Math.cos(l.rot);else{var Ai=Ti*Ti,Oi=1-.5*Ai,Ei=1-Ai*Ai/8,Gi=(Oi*l.axisx+Ti*l.axisy)*Ei;l.axisy=(Oi*l.axisy-Ti*l.axisx)*Ei,l.axisx=Gi}}if(0==s.type)s.worldCOMx=l.posx+(l.axisy*s.localCOMx-l.axisx*s.localCOMy),s.worldCOMy=l.posy+(s.localCOMx*l.axisx+s.localCOMy*l.axisy);else{for(var Di=s.polygon,Ii=Di.lverts.next,Li=Di.gverts.next;null!=Li;){var Bi=Li,Ri=Ii;Ii=Ii.next,Bi.x=l.posx+(l.axisy*Ri.x-l.axisx*Ri.y),Bi.y=l.posy+(Ri.x*l.axisx+Ri.y*l.axisy),Li=Li.next}var Fi=Di.edges.head,ji=Di.gverts.next,Ni=ji;for(ji=ji.next;null!=ji;){var Ui=ji,Vi=Fi.elt;Fi=Fi.next,Vi.gnormx=l.axisy*Vi.lnormx-l.axisx*Vi.lnormy,Vi.gnormy=Vi.lnormx*l.axisx+Vi.lnormy*l.axisy,Vi.gprojection=l.posx*Vi.gnormx+l.posy*Vi.gnormy+Vi.lprojection,Vi.tp0=Ni.y*Vi.gnormx-Ni.x*Vi.gnormy,Vi.tp1=Ui.y*Vi.gnormx-Ui.x*Vi.gnormy,Ni=Ui,ji=ji.next}var Hi=Di.gverts.next,Wi=Fi.elt;Wi.gnormx=l.axisy*Wi.lnormx-l.axisx*Wi.lnormy,Wi.gnormy=Wi.lnormx*l.axisx+Wi.lnormy*l.axisy,Wi.gprojection=l.posx*Wi.gnormx+l.posy*Wi.gnormy+Wi.lprojection,Wi.tp0=Ni.y*Wi.gnormx-Ni.x*Wi.gnormy,Wi.tp1=Hi.y*Wi.gnormx-Hi.x*Wi.gnormy}var qi=m*t,Xi=qi-h.sweepTime;if(0!=Xi&&(h.sweepTime=qi,h.posx+=h.velx*Xi,h.posy+=h.vely*Xi,0!=h.angvel)){var Yi=h.sweep_angvel*Xi;if(h.rot+=Yi,1e-4<Yi*Yi)h.axisx=Math.sin(h.rot),h.axisy=Math.cos(h.rot);else{var Ki=Yi*Yi,Zi=1-.5*Ki,Ji=1-Ki*Ki/8,Qi=(Zi*h.axisx+Yi*h.axisy)*Ji;h.axisy=(Zi*h.axisy-Yi*h.axisx)*Ji,h.axisx=Qi}}if(0==p.type)p.worldCOMx=h.posx+(h.axisy*p.localCOMx-h.axisx*p.localCOMy),p.worldCOMy=h.posy+(p.localCOMx*h.axisx+p.localCOMy*h.axisy);else{for(var $i=p.polygon,en=$i.lverts.next,tn=$i.gverts.next;null!=tn;){var nn=tn,rn=en;en=en.next,nn.x=h.posx+(h.axisy*rn.x-h.axisx*rn.y),nn.y=h.posy+(rn.x*h.axisx+rn.y*h.axisy),tn=tn.next}var on=$i.edges.head,an=$i.gverts.next,sn=an;for(an=an.next;null!=an;){var pn=an,ln=on.elt;on=on.next,ln.gnormx=h.axisy*ln.lnormx-h.axisx*ln.lnormy,ln.gnormy=ln.lnormx*h.axisx+ln.lnormy*h.axisy,ln.gprojection=h.posx*ln.gnormx+h.posy*ln.gnormy+ln.lprojection,ln.tp0=sn.y*ln.gnormx-sn.x*ln.gnormy,ln.tp1=pn.y*ln.gnormx-pn.x*ln.gnormy,sn=pn,an=an.next}var hn=$i.gverts.next,un=on.elt;un.gnormx=h.axisy*un.lnormx-h.axisx*un.lnormy,un.gnormy=un.lnormx*h.axisx+un.lnormy*h.axisy,un.gprojection=h.posx*un.gnormx+h.posy*un.gnormy+un.lprojection,un.tp0=sn.y*un.gnormx-sn.x*un.gnormy,un.tp1=hn.y*un.gnormx-hn.x*un.gnormy}var dn,cn=s,_n=p,yn=_,xn=y;if(0==s.type&&0==p.type){var mn,gn=s.circle,fn=p.circle,vn=0,zn=0;vn=fn.worldCOMx-gn.worldCOMx,zn=fn.worldCOMy-gn.worldCOMy;var wn=Math.sqrt(vn*vn+zn*zn);if((mn=wn-(gn.radius+fn.radius))<1e100){if(0==wn)vn=1,zn=0;else{var bn=1/wn;vn*=bn,zn*=bn}var Sn=gn.radius;_.x=gn.worldCOMx+vn*Sn,_.y=gn.worldCOMy+zn*Sn;var Cn=-fn.radius;y.x=fn.worldCOMx+vn*Cn,y.y=fn.worldCOMy+zn*Cn,x.x=vn,x.y=zn}dn=mn}else{var Mn=!1;if(0==s.type&&1==p.type)cn=p,_n=s,yn=y,xn=_,Mn=!0;if(1==cn.type&&0==_n.type){for(var Pn=cn.polygon,kn=_n.circle,Tn=-1e100,An=null,On=Pn.edges.head;null!=On;){var En=On.elt,Gn=En.gnormx*kn.worldCOMx+En.gnormy*kn.worldCOMy-En.gprojection-kn.radius;if(1e100<Gn){Tn=Gn;break}0<Gn?Tn<Gn&&(Tn=Gn,An=En):Tn<0&&Tn<Gn&&(Tn=Gn,An=En),On=On.next}if(Tn<1e100){var Dn=An.gp0,In=An.gp1,Ln=kn.worldCOMy*An.gnormx-kn.worldCOMx*An.gnormy;if(Ln<=Dn.y*An.gnormx-Dn.x*An.gnormy){var Bn=0,Rn=0;Bn=kn.worldCOMx-Dn.x,Rn=kn.worldCOMy-Dn.y;var Fn=Math.sqrt(Bn*Bn+Rn*Rn);if((Tn=Fn-kn.radius)<1e100){if(0==Fn)Bn=1,Rn=0;else{var jn=1/Fn;Bn*=jn,Rn*=jn}yn.x=Dn.x+0*Bn,yn.y=Dn.y+0*Rn;var Nn=-kn.radius;xn.x=kn.worldCOMx+Bn*Nn,xn.y=kn.worldCOMy+Rn*Nn,x.x=Bn,x.y=Rn}}else if(Ln>=In.y*An.gnormx-In.x*An.gnormy){var Un=0,Vn=0;Un=kn.worldCOMx-In.x,Vn=kn.worldCOMy-In.y;var Hn=Math.sqrt(Un*Un+Vn*Vn);if((Tn=Hn-kn.radius)<1e100){if(0==Hn)Un=1,Vn=0;else{var Wn=1/Hn;Un*=Wn,Vn*=Wn}yn.x=In.x+0*Un,yn.y=In.y+0*Vn;var qn=-kn.radius;xn.x=kn.worldCOMx+Un*qn,xn.y=kn.worldCOMy+Vn*qn,x.x=Un,x.y=Vn}}else{var Xn=-kn.radius;xn.x=kn.worldCOMx+An.gnormx*Xn,xn.y=kn.worldCOMy+An.gnormy*Xn;var Yn=-Tn;yn.x=xn.x+An.gnormx*Yn,yn.y=xn.y+An.gnormy*Yn,x.x=An.gnormx,x.y=An.gnormy}}Mn&&(x.x=-x.x,x.y=-x.y),dn=Tn}else{for(var Kn=cn.polygon,Zn=_n.polygon,Jn=-1e100,Qn=null,$n=null,er=0,tr=Kn.edges.head;null!=tr;){for(var ir=tr.elt,nr=1e100,rr=Zn.gverts.next;null!=rr;){var or=rr,ar=ir.gnormx*or.x+ir.gnormy*or.y;ar<nr&&(nr=ar),rr=rr.next}if(1e100<(nr-=ir.gprojection)){Jn=nr;break}0<nr?Jn<nr&&(Jn=nr,Qn=ir,er=1):Jn<0&&Jn<nr&&(Jn=nr,Qn=ir,er=1),tr=tr.next}if(Jn<1e100){for(var sr=Zn.edges.head;null!=sr;){for(var pr=sr.elt,lr=1e100,hr=Kn.gverts.next;null!=hr;){var ur=hr,dr=pr.gnormx*ur.x+pr.gnormy*ur.y;dr<lr&&(lr=dr),hr=hr.next}if(1e100<(lr-=pr.gprojection)){Jn=lr;break}0<lr?Jn<lr&&(Jn=lr,$n=pr,er=2):Jn<0&&Jn<lr&&(Jn=lr,$n=pr,er=2),sr=sr.next}if(Jn<1e100){var cr,_r;if(1==er)cr=Zn,_r=Qn;else{cr=Kn,_r=$n;var yr=yn;yn=xn,xn=yr,Mn=!Mn}for(var xr=null,mr=1e100,gr=cr.edges.head;null!=gr;){var fr=gr.elt,vr=_r.gnormx*fr.gnormx+_r.gnormy*fr.gnormy;vr<mr&&(mr=vr,xr=fr),gr=gr.next}if(Mn?(x.x=-_r.gnormx,x.y=-_r.gnormy):(x.x=_r.gnormx,x.y=_r.gnormy),0<=Jn){var zr,wr,br,Sr,Cr=_r.gp0,Mr=_r.gp1,Pr=xr.gp0,kr=xr.gp1,Tr=1/((zr=Mr.x-Cr.x)*zr+(wr=Mr.y-Cr.y)*wr),Ar=1/((br=kr.x-Pr.x)*br+(Sr=kr.y-Pr.y)*Sr),Or=-(zr*(Cr.x-Pr.x)+wr*(Cr.y-Pr.y))*Tr,Er=-(zr*(Cr.x-kr.x)+wr*(Cr.y-kr.y))*Tr,Gr=-(br*(Pr.x-Cr.x)+Sr*(Pr.y-Cr.y))*Ar,Dr=-(br*(Pr.x-Mr.x)+Sr*(Pr.y-Mr.y))*Ar;Or<0?Or=0:1<Or&&(Or=1),Er<0?Er=0:1<Er&&(Er=1),Gr<0?Gr=0:1<Gr&&(Gr=1),Dr<0?Dr=0:1<Dr&&(Dr=1);var Ir,Lr,Br=Or;Ir=Cr.x+zr*Br,Lr=Cr.y+wr*Br;var Rr,Fr,jr=Er;Rr=Cr.x+zr*jr,Fr=Cr.y+wr*jr;var Nr,Ur,Vr=Gr;Nr=Pr.x+br*Vr,Ur=Pr.y+Sr*Vr;var Hr,Wr,qr=Dr;Hr=Pr.x+br*qr,Wr=Pr.y+Sr*qr;var Xr,Yr,Kr,Zr,Jr,Qr,$r,eo,to=(Xr=Ir-Pr.x)*Xr+(Yr=Lr-Pr.y)*Yr,io=(Kr=Rr-kr.x)*Kr+(Zr=Fr-kr.y)*Zr,no=(Jr=Nr-Cr.x)*Jr+(Qr=Ur-Cr.y)*Qr,ro=($r=Hr-Mr.x)*$r+(eo=Wr-Mr.y)*eo,oo=0,ao=0,so=null;to<io?(oo=Ir,ao=Lr,so=Pr):(oo=Rr,ao=Fr,so=kr,to=io);var po=0,lo=0,ho=null;if(no<ro?(po=Nr,lo=Ur,ho=Cr):(po=Hr,lo=Wr,ho=Mr,no=ro),0!=(Jn=to<no?(yn.x=oo,yn.y=ao,xn.x=so.x,xn.y=so.y,Math.sqrt(to)):(xn.x=po,xn.y=lo,yn.x=ho.x,yn.y=ho.y,Math.sqrt(no)))){x.x=xn.x-yn.x,x.y=xn.y-yn.y;var uo=1/Jn;x.x*=uo,x.y*=uo,Mn&&(x.x=-x.x,x.y=-x.y)}dn=Jn}else{var co=0,_o=0;co=xr.gp0.x,_o=xr.gp0.y;var yo,xo,mo=0,go=0;yo=(mo=xr.gp1.x)-co,xo=(go=xr.gp1.y)-_o;var fo=_r.gnormy*co-_r.gnormx*_o,vo=_r.gnormy*mo-_r.gnormx*go,zo=1/(vo-fo),wo=(-_r.tp1-fo)*zo;wo>Qs.epsilon&&(co+=yo*wo,_o+=xo*wo);var bo=(-_r.tp0-vo)*zo;bo<-Qs.epsilon&&(mo+=yo*bo,go+=xo*bo);var So=co*_r.gnormx+_o*_r.gnormy-_r.gprojection,Co=mo*_r.gnormx+go*_r.gnormy-_r.gprojection;if(So<Co){xn.x=co,xn.y=_o;var Mo=-So;yn.x=xn.x+_r.gnormx*Mo,yn.y=xn.y+_r.gnormy*Mo,dn=So}else{xn.x=mo,xn.y=go;var Po=-Co;yn.x=xn.x+_r.gnormx*Po,yn.y=xn.y+_r.gnormy*Po,dn=Co}}}else dn=1e100}else dn=1e100}}var ko=dn+n,To=o*x.x+a*x.y;if(ko<Qs.distanceThresholdCCD){if(r)break;var Ao,Oo;Ao=_.x-l.posx,Oo=_.y-l.posy;var Eo,Go;Eo=y.x-h.posx,Go=y.y-h.posy;var Do=To-l.sweep_angvel*(x.y*Ao-x.x*Oo)+h.sweep_angvel*(x.y*Eo-x.x*Go);if(0<Do&&(e.slipped=!0),Do<=0||ko<.5*Qs.distanceThresholdCCD)break}m=-1;break}if(40<=++g){n<gi&&(e.failed=!0);break}}e.toi=m},Ht.staticSweep=function(e,t,i,n){var r,o,a=e.s1,s=e.s2,p=a.body;r=-p.velx,o=-p.vely;var l=p.sweep_angvel;l<0&&(l=-l);for(var h=a.sweepCoef*l,u=e.c1,d=e.c2,c=e.axis,_=i,y=0;;){var x=_*t,m=x-p.sweepTime;if(0!=m&&(p.sweepTime=x,p.posx+=p.velx*m,p.posy+=p.vely*m,0!=p.angvel)){var g=p.sweep_angvel*m;if(p.rot+=g,1e-4<g*g)p.axisx=Math.sin(p.rot),p.axisy=Math.cos(p.rot);else{var f=g*g,v=1-.5*f,z=1-f*f/8,w=(v*p.axisx+g*p.axisy)*z;p.axisy=(v*p.axisy-g*p.axisx)*z,p.axisx=w}}if(0==a.type)a.worldCOMx=p.posx+(p.axisy*a.localCOMx-p.axisx*a.localCOMy),a.worldCOMy=p.posy+(a.localCOMx*p.axisx+a.localCOMy*p.axisy);else{for(var b=a.polygon,S=b.lverts.next,C=b.gverts.next;null!=C;){var M=C,P=S;S=S.next,M.x=p.posx+(p.axisy*P.x-p.axisx*P.y),M.y=p.posy+(P.x*p.axisx+P.y*p.axisy),C=C.next}var k=b.edges.head,T=b.gverts.next,A=T;for(T=T.next;null!=T;){var O=T,E=k.elt;k=k.next,E.gnormx=p.axisy*E.lnormx-p.axisx*E.lnormy,E.gnormy=E.lnormx*p.axisx+E.lnormy*p.axisy,E.gprojection=p.posx*E.gnormx+p.posy*E.gnormy+E.lprojection,E.tp0=A.y*E.gnormx-A.x*E.gnormy,E.tp1=O.y*E.gnormx-O.x*E.gnormy,A=O,T=T.next}var G=b.gverts.next,D=k.elt;D.gnormx=p.axisy*D.lnormx-p.axisx*D.lnormy,D.gnormy=D.lnormx*p.axisx+D.lnormy*p.axisy,D.gprojection=p.posx*D.gnormx+p.posy*D.gnormy+D.lprojection,D.tp0=A.y*D.gnormx-A.x*D.gnormy,D.tp1=G.y*D.gnormx-G.x*D.gnormy}var I,L=a,B=s,R=u,F=d;if(0==a.type&&0==s.type){var j,N=a.circle,U=s.circle,V=0,H=0;V=U.worldCOMx-N.worldCOMx,H=U.worldCOMy-N.worldCOMy;var W=Math.sqrt(V*V+H*H);if((j=W-(N.radius+U.radius))<1e100){if(0==W)V=1,H=0;else{var q=1/W;V*=q,H*=q}var X=N.radius;u.x=N.worldCOMx+V*X,u.y=N.worldCOMy+H*X;var Y=-U.radius;d.x=U.worldCOMx+V*Y,d.y=U.worldCOMy+H*Y,c.x=V,c.y=H}I=j}else{var K=!1;if(0==a.type&&1==s.type)L=s,B=a,R=d,F=u,K=!0;if(1==L.type&&0==B.type){for(var Z=L.polygon,J=B.circle,Q=-1e100,$=null,ee=Z.edges.head;null!=ee;){var te=ee.elt,ie=te.gnormx*J.worldCOMx+te.gnormy*J.worldCOMy-te.gprojection-J.radius;if(1e100<ie){Q=ie;break}0<ie?Q<ie&&(Q=ie,$=te):Q<0&&Q<ie&&(Q=ie,$=te),ee=ee.next}if(Q<1e100){var ne=$.gp0,re=$.gp1,oe=J.worldCOMy*$.gnormx-J.worldCOMx*$.gnormy;if(oe<=ne.y*$.gnormx-ne.x*$.gnormy){var ae=0,se=0;ae=J.worldCOMx-ne.x,se=J.worldCOMy-ne.y;var pe=Math.sqrt(ae*ae+se*se);if((Q=pe-J.radius)<1e100){if(0==pe)ae=1,se=0;else{var le=1/pe;ae*=le,se*=le}R.x=ne.x+0*ae,R.y=ne.y+0*se;var he=-J.radius;F.x=J.worldCOMx+ae*he,F.y=J.worldCOMy+se*he,c.x=ae,c.y=se}}else if(oe>=re.y*$.gnormx-re.x*$.gnormy){var ue=0,de=0;ue=J.worldCOMx-re.x,de=J.worldCOMy-re.y;var ce=Math.sqrt(ue*ue+de*de);if((Q=ce-J.radius)<1e100){if(0==ce)ue=1,de=0;else{var _e=1/ce;ue*=_e,de*=_e}R.x=re.x+0*ue,R.y=re.y+0*de;var ye=-J.radius;F.x=J.worldCOMx+ue*ye,F.y=J.worldCOMy+de*ye,c.x=ue,c.y=de}}else{var xe=-J.radius;F.x=J.worldCOMx+$.gnormx*xe,F.y=J.worldCOMy+$.gnormy*xe;var me=-Q;R.x=F.x+$.gnormx*me,R.y=F.y+$.gnormy*me,c.x=$.gnormx,c.y=$.gnormy}}K&&(c.x=-c.x,c.y=-c.y),I=Q}else{for(var ge=L.polygon,fe=B.polygon,ve=-1e100,ze=null,we=null,be=0,Se=ge.edges.head;null!=Se;){for(var Ce=Se.elt,Me=1e100,Pe=fe.gverts.next;null!=Pe;){var ke=Pe,Te=Ce.gnormx*ke.x+Ce.gnormy*ke.y;Te<Me&&(Me=Te),Pe=Pe.next}if(1e100<(Me-=Ce.gprojection)){ve=Me;break}0<Me?ve<Me&&(ve=Me,ze=Ce,be=1):ve<0&&ve<Me&&(ve=Me,ze=Ce,be=1),Se=Se.next}if(ve<1e100){for(var Ae=fe.edges.head;null!=Ae;){for(var Oe=Ae.elt,Ee=1e100,Ge=ge.gverts.next;null!=Ge;){var De=Ge,Ie=Oe.gnormx*De.x+Oe.gnormy*De.y;Ie<Ee&&(Ee=Ie),Ge=Ge.next}if(1e100<(Ee-=Oe.gprojection)){ve=Ee;break}0<Ee?ve<Ee&&(ve=Ee,we=Oe,be=2):ve<0&&ve<Ee&&(ve=Ee,we=Oe,be=2),Ae=Ae.next}if(ve<1e100){var Le,Be;if(1==be)Le=fe,Be=ze;else{Le=ge,Be=we;var Re=R;R=F,F=Re,K=!K}for(var Fe=null,je=1e100,Ne=Le.edges.head;null!=Ne;){var Ue=Ne.elt,Ve=Be.gnormx*Ue.gnormx+Be.gnormy*Ue.gnormy;Ve<je&&(je=Ve,Fe=Ue),Ne=Ne.next}if(K?(c.x=-Be.gnormx,c.y=-Be.gnormy):(c.x=Be.gnormx,c.y=Be.gnormy),0<=ve){var He,We,qe,Xe,Ye=Be.gp0,Ke=Be.gp1,Ze=Fe.gp0,Je=Fe.gp1,Qe=1/((He=Ke.x-Ye.x)*He+(We=Ke.y-Ye.y)*We),$e=1/((qe=Je.x-Ze.x)*qe+(Xe=Je.y-Ze.y)*Xe),et=-(He*(Ye.x-Ze.x)+We*(Ye.y-Ze.y))*Qe,tt=-(He*(Ye.x-Je.x)+We*(Ye.y-Je.y))*Qe,it=-(qe*(Ze.x-Ye.x)+Xe*(Ze.y-Ye.y))*$e,nt=-(qe*(Ze.x-Ke.x)+Xe*(Ze.y-Ke.y))*$e;et<0?et=0:1<et&&(et=1),tt<0?tt=0:1<tt&&(tt=1),it<0?it=0:1<it&&(it=1),nt<0?nt=0:1<nt&&(nt=1);var rt,ot,at=et;rt=Ye.x+He*at,ot=Ye.y+We*at;var st,pt,lt=tt;st=Ye.x+He*lt,pt=Ye.y+We*lt;var ht,ut,dt=it;ht=Ze.x+qe*dt,ut=Ze.y+Xe*dt;var ct,_t,yt=nt;ct=Ze.x+qe*yt,_t=Ze.y+Xe*yt;var xt,mt,gt,ft,vt,zt,wt,bt,St=(xt=rt-Ze.x)*xt+(mt=ot-Ze.y)*mt,Ct=(gt=st-Je.x)*gt+(ft=pt-Je.y)*ft,Mt=(vt=ht-Ye.x)*vt+(zt=ut-Ye.y)*zt,Pt=(wt=ct-Ke.x)*wt+(bt=_t-Ke.y)*bt,kt=0,Tt=0,At=null;St<Ct?(kt=rt,Tt=ot,At=Ze):(kt=st,Tt=pt,At=Je,St=Ct);var Ot=0,Et=0,Gt=null;if(Mt<Pt?(Ot=ht,Et=ut,Gt=Ye):(Ot=ct,Et=_t,Gt=Ke,Mt=Pt),0!=(ve=St<Mt?(R.x=kt,R.y=Tt,F.x=At.x,F.y=At.y,Math.sqrt(St)):(F.x=Ot,F.y=Et,R.x=Gt.x,R.y=Gt.y,Math.sqrt(Mt)))){c.x=F.x-R.x,c.y=F.y-R.y;var Dt=1/ve;c.x*=Dt,c.y*=Dt,K&&(c.x=-c.x,c.y=-c.y)}I=ve}else{var It=0,Lt=0;It=Fe.gp0.x,Lt=Fe.gp0.y;var Bt,Rt,Ft=0,jt=0;Bt=(Ft=Fe.gp1.x)-It,Rt=(jt=Fe.gp1.y)-Lt;var Nt=Be.gnormy*It-Be.gnormx*Lt,Ut=Be.gnormy*Ft-Be.gnormx*jt,Vt=1/(Ut-Nt),Ht=(-Be.tp1-Nt)*Vt;Ht>Qs.epsilon&&(It+=Bt*Ht,Lt+=Rt*Ht);var Wt=(-Be.tp0-Ut)*Vt;Wt<-Qs.epsilon&&(Ft+=Bt*Wt,jt+=Rt*Wt);var qt=It*Be.gnormx+Lt*Be.gnormy-Be.gprojection,Xt=Ft*Be.gnormx+jt*Be.gnormy-Be.gprojection;if(qt<Xt){F.x=It,F.y=Lt;var Yt=-qt;R.x=F.x+Be.gnormx*Yt,R.y=F.y+Be.gnormy*Yt,I=qt}else{F.x=Ft,F.y=jt;var Kt=-Xt;R.x=F.x+Be.gnormx*Kt,R.y=F.y+Be.gnormy*Kt,I=Xt}}}else I=1e100}else I=1e100}}var Zt=I+n,Jt=r*c.x+o*c.y;if(Zt<Qs.distanceThresholdCCD){var Qt,$t;Qt=u.x-p.posx,$t=u.y-p.posy;var ei=Jt-p.sweep_angvel*(c.y*Qt-c.x*$t);if(0<ei&&(e.slipped=!0),ei<=0||Zt<.5*Qs.distanceThresholdCCD)break}var ti=(h-Jt)*t;if(ti<=0){_=-1;break}var ii=Zt/ti;if(ii<1e-6&&(ii=1e-6),1<=(_+=ii)){var ni=(_=1)*t,ri=ni-p.sweepTime;if(0!=ri&&(p.sweepTime=ni,p.posx+=p.velx*ri,p.posy+=p.vely*ri,0!=p.angvel)){var oi=p.sweep_angvel*ri;if(p.rot+=oi,1e-4<oi*oi)p.axisx=Math.sin(p.rot),p.axisy=Math.cos(p.rot);else{var ai=oi*oi,si=1-.5*ai,pi=1-ai*ai/8,li=(si*p.axisx+oi*p.axisy)*pi;p.axisy=(si*p.axisy-oi*p.axisx)*pi,p.axisx=li}}if(0==a.type)a.worldCOMx=p.posx+(p.axisy*a.localCOMx-p.axisx*a.localCOMy),a.worldCOMy=p.posy+(a.localCOMx*p.axisx+a.localCOMy*p.axisy);else{for(var hi=a.polygon,ui=hi.lverts.next,di=hi.gverts.next;null!=di;){var ci=di,_i=ui;ui=ui.next,ci.x=p.posx+(p.axisy*_i.x-p.axisx*_i.y),ci.y=p.posy+(_i.x*p.axisx+_i.y*p.axisy),di=di.next}var yi=hi.edges.head,xi=hi.gverts.next,mi=xi;for(xi=xi.next;null!=xi;){var gi=xi,fi=yi.elt;yi=yi.next,fi.gnormx=p.axisy*fi.lnormx-p.axisx*fi.lnormy,fi.gnormy=fi.lnormx*p.axisx+fi.lnormy*p.axisy,fi.gprojection=p.posx*fi.gnormx+p.posy*fi.gnormy+fi.lprojection,fi.tp0=mi.y*fi.gnormx-mi.x*fi.gnormy,fi.tp1=gi.y*fi.gnormx-gi.x*fi.gnormy,mi=gi,xi=xi.next}var vi=hi.gverts.next,zi=yi.elt;zi.gnormx=p.axisy*zi.lnormx-p.axisx*zi.lnormy,zi.gnormy=zi.lnormx*p.axisx+zi.lnormy*p.axisy,zi.gprojection=p.posx*zi.gnormx+p.posy*zi.gnormy+zi.lprojection,zi.tp0=mi.y*zi.gnormx-mi.x*zi.gnormy,zi.tp1=vi.y*zi.gnormx-vi.x*zi.gnormy}var wi,bi=a,Si=s,Ci=u,Mi=d;if(0==a.type&&0==s.type){var Pi,ki=a.circle,Ti=s.circle,Ai=0,Oi=0;Ai=Ti.worldCOMx-ki.worldCOMx,Oi=Ti.worldCOMy-ki.worldCOMy;var Ei=Math.sqrt(Ai*Ai+Oi*Oi);if((Pi=Ei-(ki.radius+Ti.radius))<1e100){if(0==Ei)Ai=1,Oi=0;else{var Gi=1/Ei;Ai*=Gi,Oi*=Gi}var Di=ki.radius;u.x=ki.worldCOMx+Ai*Di,u.y=ki.worldCOMy+Oi*Di;var Ii=-Ti.radius;d.x=Ti.worldCOMx+Ai*Ii,d.y=Ti.worldCOMy+Oi*Ii,c.x=Ai,c.y=Oi}wi=Pi}else{var Li=!1;if(0==a.type&&1==s.type)bi=s,Si=a,Ci=d,Mi=u,Li=!0;if(1==bi.type&&0==Si.type){for(var Bi=bi.polygon,Ri=Si.circle,Fi=-1e100,ji=null,Ni=Bi.edges.head;null!=Ni;){var Ui=Ni.elt,Vi=Ui.gnormx*Ri.worldCOMx+Ui.gnormy*Ri.worldCOMy-Ui.gprojection-Ri.radius;if(1e100<Vi){Fi=Vi;break}0<Vi?Fi<Vi&&(Fi=Vi,ji=Ui):Fi<0&&Fi<Vi&&(Fi=Vi,ji=Ui),Ni=Ni.next}if(Fi<1e100){var Hi=ji.gp0,Wi=ji.gp1,qi=Ri.worldCOMy*ji.gnormx-Ri.worldCOMx*ji.gnormy;if(qi<=Hi.y*ji.gnormx-Hi.x*ji.gnormy){var Xi=0,Yi=0;Xi=Ri.worldCOMx-Hi.x,Yi=Ri.worldCOMy-Hi.y;var Ki=Math.sqrt(Xi*Xi+Yi*Yi);if((Fi=Ki-Ri.radius)<1e100){if(0==Ki)Xi=1,Yi=0;else{var Zi=1/Ki;Xi*=Zi,Yi*=Zi}Ci.x=Hi.x+0*Xi,Ci.y=Hi.y+0*Yi;var Ji=-Ri.radius;Mi.x=Ri.worldCOMx+Xi*Ji,Mi.y=Ri.worldCOMy+Yi*Ji,c.x=Xi,c.y=Yi}}else if(qi>=Wi.y*ji.gnormx-Wi.x*ji.gnormy){var Qi=0,$i=0;Qi=Ri.worldCOMx-Wi.x,$i=Ri.worldCOMy-Wi.y;var en=Math.sqrt(Qi*Qi+$i*$i);if((Fi=en-Ri.radius)<1e100){if(0==en)Qi=1,$i=0;else{var tn=1/en;Qi*=tn,$i*=tn}Ci.x=Wi.x+0*Qi,Ci.y=Wi.y+0*$i;var nn=-Ri.radius;Mi.x=Ri.worldCOMx+Qi*nn,Mi.y=Ri.worldCOMy+$i*nn,c.x=Qi,c.y=$i}}else{var rn=-Ri.radius;Mi.x=Ri.worldCOMx+ji.gnormx*rn,Mi.y=Ri.worldCOMy+ji.gnormy*rn;var on=-Fi;Ci.x=Mi.x+ji.gnormx*on,Ci.y=Mi.y+ji.gnormy*on,c.x=ji.gnormx,c.y=ji.gnormy}}Li&&(c.x=-c.x,c.y=-c.y),wi=Fi}else{for(var an=bi.polygon,sn=Si.polygon,pn=-1e100,ln=null,hn=null,un=0,dn=an.edges.head;null!=dn;){for(var cn=dn.elt,_n=1e100,yn=sn.gverts.next;null!=yn;){var xn=yn,mn=cn.gnormx*xn.x+cn.gnormy*xn.y;mn<_n&&(_n=mn),yn=yn.next}if(1e100<(_n-=cn.gprojection)){pn=_n;break}0<_n?pn<_n&&(pn=_n,ln=cn,un=1):pn<0&&pn<_n&&(pn=_n,ln=cn,un=1),dn=dn.next}if(pn<1e100){for(var gn=sn.edges.head;null!=gn;){for(var fn=gn.elt,vn=1e100,zn=an.gverts.next;null!=zn;){var wn=zn,bn=fn.gnormx*wn.x+fn.gnormy*wn.y;bn<vn&&(vn=bn),zn=zn.next}if(1e100<(vn-=fn.gprojection)){pn=vn;break}0<vn?pn<vn&&(pn=vn,hn=fn,un=2):pn<0&&pn<vn&&(pn=vn,hn=fn,un=2),gn=gn.next}if(pn<1e100){var Sn,Cn;if(1==un)Sn=sn,Cn=ln;else{Sn=an,Cn=hn;var Mn=Ci;Ci=Mi,Mi=Mn,Li=!Li}for(var Pn=null,kn=1e100,Tn=Sn.edges.head;null!=Tn;){var An=Tn.elt,On=Cn.gnormx*An.gnormx+Cn.gnormy*An.gnormy;On<kn&&(kn=On,Pn=An),Tn=Tn.next}if(Li?(c.x=-Cn.gnormx,c.y=-Cn.gnormy):(c.x=Cn.gnormx,c.y=Cn.gnormy),0<=pn){var En,Gn,Dn,In,Ln=Cn.gp0,Bn=Cn.gp1,Rn=Pn.gp0,Fn=Pn.gp1,jn=1/((En=Bn.x-Ln.x)*En+(Gn=Bn.y-Ln.y)*Gn),Nn=1/((Dn=Fn.x-Rn.x)*Dn+(In=Fn.y-Rn.y)*In),Un=-(En*(Ln.x-Rn.x)+Gn*(Ln.y-Rn.y))*jn,Vn=-(En*(Ln.x-Fn.x)+Gn*(Ln.y-Fn.y))*jn,Hn=-(Dn*(Rn.x-Ln.x)+In*(Rn.y-Ln.y))*Nn,Wn=-(Dn*(Rn.x-Bn.x)+In*(Rn.y-Bn.y))*Nn;Un<0?Un=0:1<Un&&(Un=1),Vn<0?Vn=0:1<Vn&&(Vn=1),Hn<0?Hn=0:1<Hn&&(Hn=1),Wn<0?Wn=0:1<Wn&&(Wn=1);var qn,Xn,Yn=Un;qn=Ln.x+En*Yn,Xn=Ln.y+Gn*Yn;var Kn,Zn,Jn=Vn;Kn=Ln.x+En*Jn,Zn=Ln.y+Gn*Jn;var Qn,$n,er=Hn;Qn=Rn.x+Dn*er,$n=Rn.y+In*er;var tr,ir,nr=Wn;tr=Rn.x+Dn*nr,ir=Rn.y+In*nr;var rr,or,ar,sr,pr,lr,hr,ur,dr=(rr=qn-Rn.x)*rr+(or=Xn-Rn.y)*or,cr=(ar=Kn-Fn.x)*ar+(sr=Zn-Fn.y)*sr,_r=(pr=Qn-Ln.x)*pr+(lr=$n-Ln.y)*lr,yr=(hr=tr-Bn.x)*hr+(ur=ir-Bn.y)*ur,xr=0,mr=0,gr=null;dr<cr?(xr=qn,mr=Xn,gr=Rn):(xr=Kn,mr=Zn,gr=Fn,dr=cr);var fr=0,vr=0,zr=null;if(_r<yr?(fr=Qn,vr=$n,zr=Ln):(fr=tr,vr=ir,zr=Bn,_r=yr),0!=(pn=dr<_r?(Ci.x=xr,Ci.y=mr,Mi.x=gr.x,Mi.y=gr.y,Math.sqrt(dr)):(Mi.x=fr,Mi.y=vr,Ci.x=zr.x,Ci.y=zr.y,Math.sqrt(_r)))){c.x=Mi.x-Ci.x,c.y=Mi.y-Ci.y;var wr=1/pn;c.x*=wr,c.y*=wr,Li&&(c.x=-c.x,c.y=-c.y)}wi=pn}else{var br=0,Sr=0;br=Pn.gp0.x,Sr=Pn.gp0.y;var Cr,Mr,Pr=0,kr=0;Cr=(Pr=Pn.gp1.x)-br,Mr=(kr=Pn.gp1.y)-Sr;var Tr=Cn.gnormy*br-Cn.gnormx*Sr,Ar=Cn.gnormy*Pr-Cn.gnormx*kr,Or=1/(Ar-Tr),Er=(-Cn.tp1-Tr)*Or;Er>Qs.epsilon&&(br+=Cr*Er,Sr+=Mr*Er);var Gr=(-Cn.tp0-Ar)*Or;Gr<-Qs.epsilon&&(Pr+=Cr*Gr,kr+=Mr*Gr);var Dr=br*Cn.gnormx+Sr*Cn.gnormy-Cn.gprojection,Ir=Pr*Cn.gnormx+kr*Cn.gnormy-Cn.gprojection;if(Dr<Ir){Mi.x=br,Mi.y=Sr;var Lr=-Dr;Ci.x=Mi.x+Cn.gnormx*Lr,Ci.y=Mi.y+Cn.gnormy*Lr,wi=Dr}else{Mi.x=Pr,Mi.y=kr;var Br=-Ir;Ci.x=Mi.x+Cn.gnormx*Br,Ci.y=Mi.y+Cn.gnormy*Br,wi=Ir}}}else wi=1e100}else wi=1e100}}var Rr=wi+n,Fr=r*c.x+o*c.y;if(Rr<Qs.distanceThresholdCCD){var jr,Nr;jr=u.x-p.posx,Nr=u.y-p.posy;var Ur=Fr-p.sweep_angvel*(c.y*jr-c.x*Nr);if(0<Ur&&(e.slipped=!0),Ur<=0||Rr<.5*Qs.distanceThresholdCCD)break}_=-1;break}if(40<=++y){n<Zt&&(e.failed=!0);break}}e.toi=_},Ht.distanceBody=function(e,t,i,n){var r,o,a;null==ep.zpp_pool?r=new ep:(r=ep.zpp_pool,ep.zpp_pool=r.next,r.next=null),r.weak=!1,null==ep.zpp_pool?o=new ep:(o=ep.zpp_pool,ep.zpp_pool=o.next,o.next=null),o.weak=!1,null==ep.zpp_pool?a=new ep:(a=ep.zpp_pool,ep.zpp_pool=a.next,a.next=null),a.weak=!1;for(var s=1e100,p=e.shapes.head;null!=p;){for(var l=p.elt,h=t.shapes.head;null!=h;){var u,d=h.elt,c=l,_=d,y=r,x=o;if(0==l.type&&0==d.type){var m,g=l.circle,f=d.circle,v=0,z=0;v=f.worldCOMx-g.worldCOMx,z=f.worldCOMy-g.worldCOMy;var w=Math.sqrt(v*v+z*z);if((m=w-(g.radius+f.radius))<s){if(0==w)v=1,z=0;else{var b=1/w;v*=b,z*=b}var S=g.radius;y.x=g.worldCOMx+v*S,y.y=g.worldCOMy+z*S;var C=-f.radius;x.x=f.worldCOMx+v*C,x.y=f.worldCOMy+z*C,a.x=v,a.y=z}u=m}else{var M=!1;if(0==l.type&&1==d.type){c=d,_=l;var P=y;y=x,x=P,M=!0}if(1==c.type&&0==_.type){for(var k=c.polygon,T=_.circle,A=-1e100,O=null,E=k.edges.head;null!=E;){var G=E.elt,D=G.gnormx*T.worldCOMx+G.gnormy*T.worldCOMy-G.gprojection-T.radius;if(s<D){A=D;break}0<D?A<D&&(A=D,O=G):A<0&&A<D&&(A=D,O=G),E=E.next}if(A<s){var I=O.gp0,L=O.gp1,B=T.worldCOMy*O.gnormx-T.worldCOMx*O.gnormy;if(B<=I.y*O.gnormx-I.x*O.gnormy){var R=0,F=0;R=T.worldCOMx-I.x,F=T.worldCOMy-I.y;var j=Math.sqrt(R*R+F*F);if((A=j-T.radius)<s){if(0==j)R=1,F=0;else{var N=1/j;R*=N,F*=N}y.x=I.x+0*R,y.y=I.y+0*F;var U=-T.radius;x.x=T.worldCOMx+R*U,x.y=T.worldCOMy+F*U,a.x=R,a.y=F}}else if(B>=L.y*O.gnormx-L.x*O.gnormy){var V=0,H=0;V=T.worldCOMx-L.x,H=T.worldCOMy-L.y;var W=Math.sqrt(V*V+H*H);if((A=W-T.radius)<s){if(0==W)V=1,H=0;else{var q=1/W;V*=q,H*=q}y.x=L.x+0*V,y.y=L.y+0*H;var X=-T.radius;x.x=T.worldCOMx+V*X,x.y=T.worldCOMy+H*X,a.x=V,a.y=H}}else{var Y=-T.radius;x.x=T.worldCOMx+O.gnormx*Y,x.y=T.worldCOMy+O.gnormy*Y;var K=-A;y.x=x.x+O.gnormx*K,y.y=x.y+O.gnormy*K,a.x=O.gnormx,a.y=O.gnormy}}M&&(a.x=-a.x,a.y=-a.y),u=A}else{for(var Z=c.polygon,J=_.polygon,Q=-1e100,$=null,ee=null,te=0,ie=Z.edges.head;null!=ie;){for(var ne=ie.elt,re=1e100,oe=J.gverts.next;null!=oe;){var ae=oe,se=ne.gnormx*ae.x+ne.gnormy*ae.y;se<re&&(re=se),oe=oe.next}if(s<(re-=ne.gprojection)){Q=re;break}0<re?Q<re&&(Q=re,$=ne,te=1):Q<0&&Q<re&&(Q=re,$=ne,te=1),ie=ie.next}if(Q<s){for(var pe=J.edges.head;null!=pe;){for(var le=pe.elt,he=1e100,ue=Z.gverts.next;null!=ue;){var de=ue,ce=le.gnormx*de.x+le.gnormy*de.y;ce<he&&(he=ce),ue=ue.next}if(s<(he-=le.gprojection)){Q=he;break}0<he?Q<he&&(Q=he,ee=le,te=2):Q<0&&Q<he&&(Q=he,ee=le,te=2),pe=pe.next}if(Q<s){var _e,ye;if(1==te)_e=J,ye=$;else{_e=Z,ye=ee;var xe=y;y=x,x=xe,M=!M}for(var me=null,ge=1e100,fe=_e.edges.head;null!=fe;){var ve=fe.elt,ze=ye.gnormx*ve.gnormx+ye.gnormy*ve.gnormy;ze<ge&&(ge=ze,me=ve),fe=fe.next}if(M?(a.x=-ye.gnormx,a.y=-ye.gnormy):(a.x=ye.gnormx,a.y=ye.gnormy),0<=Q){var we,be,Se,Ce,Me=ye.gp0,Pe=ye.gp1,ke=me.gp0,Te=me.gp1,Ae=1/((we=Pe.x-Me.x)*we+(be=Pe.y-Me.y)*be),Oe=1/((Se=Te.x-ke.x)*Se+(Ce=Te.y-ke.y)*Ce),Ee=-(we*(Me.x-ke.x)+be*(Me.y-ke.y))*Ae,Ge=-(we*(Me.x-Te.x)+be*(Me.y-Te.y))*Ae,De=-(Se*(ke.x-Me.x)+Ce*(ke.y-Me.y))*Oe,Ie=-(Se*(ke.x-Pe.x)+Ce*(ke.y-Pe.y))*Oe;Ee<0?Ee=0:1<Ee&&(Ee=1),Ge<0?Ge=0:1<Ge&&(Ge=1),De<0?De=0:1<De&&(De=1),Ie<0?Ie=0:1<Ie&&(Ie=1);var Le,Be,Re=Ee;Le=Me.x+we*Re,Be=Me.y+be*Re;var Fe,je,Ne=Ge;Fe=Me.x+we*Ne,je=Me.y+be*Ne;var Ue,Ve,He=De;Ue=ke.x+Se*He,Ve=ke.y+Ce*He;var We,qe,Xe=Ie;We=ke.x+Se*Xe,qe=ke.y+Ce*Xe;var Ye,Ke,Ze,Je,Qe,$e,et,tt,it=(Ye=Le-ke.x)*Ye+(Ke=Be-ke.y)*Ke,nt=(Ze=Fe-Te.x)*Ze+(Je=je-Te.y)*Je,rt=(Qe=Ue-Me.x)*Qe+($e=Ve-Me.y)*$e,ot=(et=We-Pe.x)*et+(tt=qe-Pe.y)*tt,at=0,st=0,pt=null;it<nt?(at=Le,st=Be,pt=ke):(at=Fe,st=je,pt=Te,it=nt);var lt=0,ht=0,ut=null;if(rt<ot?(lt=Ue,ht=Ve,ut=Me):(lt=We,ht=qe,ut=Pe,rt=ot),0!=(Q=it<rt?(y.x=at,y.y=st,x.x=pt.x,x.y=pt.y,Math.sqrt(it)):(x.x=lt,x.y=ht,y.x=ut.x,y.y=ut.y,Math.sqrt(rt)))){a.x=x.x-y.x,a.y=x.y-y.y;var dt=1/Q;a.x*=dt,a.y*=dt,M&&(a.x=-a.x,a.y=-a.y)}u=Q}else{var ct=0,_t=0;ct=me.gp0.x,_t=me.gp0.y;var yt,xt,mt=0,gt=0;yt=(mt=me.gp1.x)-ct,xt=(gt=me.gp1.y)-_t;var ft=ye.gnormy*ct-ye.gnormx*_t,vt=ye.gnormy*mt-ye.gnormx*gt,zt=1/(vt-ft),wt=(-ye.tp1-ft)*zt;wt>Qs.epsilon&&(ct+=yt*wt,_t+=xt*wt);var bt=(-ye.tp0-vt)*zt;bt<-Qs.epsilon&&(mt+=yt*bt,gt+=xt*bt);var St=ct*ye.gnormx+_t*ye.gnormy-ye.gprojection,Ct=mt*ye.gnormx+gt*ye.gnormy-ye.gprojection;if(St<Ct){x.x=ct,x.y=_t;var Mt=-St;y.x=x.x+ye.gnormx*Mt,y.y=x.y+ye.gnormy*Mt,u=St}else{x.x=mt,x.y=gt;var Pt=-Ct;y.x=x.x+ye.gnormx*Pt,y.y=x.y+ye.gnormy*Pt,u=Ct}}}else u=s}else u=s}}u<s&&(s=u,i.x=r.x,i.y=r.y,n.x=o.x,n.y=o.y),h=h.next}p=p.next}var kt=r;null!=kt.outer&&(kt.outer.zpp_inner=null,kt.outer=null),kt._isimmutable=null,kt._validate=null,kt._invalidate=null,kt.next=ep.zpp_pool,ep.zpp_pool=kt;var Tt=o;null!=Tt.outer&&(Tt.outer.zpp_inner=null,Tt.outer=null),Tt._isimmutable=null,Tt._validate=null,Tt._invalidate=null,Tt.next=ep.zpp_pool,ep.zpp_pool=Tt;var At=a;return null!=At.outer&&(At.outer.zpp_inner=null,At.outer=null),At._isimmutable=null,At._validate=null,At._invalidate=null,At.next=ep.zpp_pool,ep.zpp_pool=At,s},Ht.distance=function(e,t,i,n,r,o){if(null==o&&(o=1e100),0==e.type&&0==t.type){var a,s=e.circle,p=t.circle,l=0,h=0;l=p.worldCOMx-s.worldCOMx,h=p.worldCOMy-s.worldCOMy;var u=Math.sqrt(l*l+h*h);if((a=u-(s.radius+p.radius))<o){if(0==u)l=1,h=0;else{var d=1/u;l*=d,h*=d}var c=s.radius;i.x=s.worldCOMx+l*c,i.y=s.worldCOMy+h*c;var _=-p.radius;n.x=p.worldCOMx+l*_,n.y=p.worldCOMy+h*_,r.x=l,r.y=h}return a}var y=!1;if(0==e.type&&1==t.type){var x=e;e=t,t=x;var m=i;i=n,n=m,y=!0}if(1==e.type&&0==t.type){for(var g=e.polygon,f=t.circle,v=-1e100,z=null,w=g.edges.head;null!=w;){var b=w.elt,S=b.gnormx*f.worldCOMx+b.gnormy*f.worldCOMy-b.gprojection-f.radius;if(o<S){v=S;break}0<S?v<S&&(v=S,z=b):v<0&&v<S&&(v=S,z=b),w=w.next}if(v<o){var C=z.gp0,M=z.gp1,P=f.worldCOMy*z.gnormx-f.worldCOMx*z.gnormy;if(P<=C.y*z.gnormx-C.x*z.gnormy){var k=0,T=0;k=f.worldCOMx-C.x,T=f.worldCOMy-C.y;var A=Math.sqrt(k*k+T*T);if((v=A-f.radius)<o){if(0==A)k=1,T=0;else{var O=1/A;k*=O,T*=O}i.x=C.x+0*k,i.y=C.y+0*T;var E=-f.radius;n.x=f.worldCOMx+k*E,n.y=f.worldCOMy+T*E,r.x=k,r.y=T}}else if(P>=M.y*z.gnormx-M.x*z.gnormy){var G=0,D=0;G=f.worldCOMx-M.x,D=f.worldCOMy-M.y;var I=Math.sqrt(G*G+D*D);if((v=I-f.radius)<o){if(0==I)G=1,D=0;else{var L=1/I;G*=L,D*=L}i.x=M.x+0*G,i.y=M.y+0*D;var B=-f.radius;n.x=f.worldCOMx+G*B,n.y=f.worldCOMy+D*B,r.x=G,r.y=D}}else{var R=-f.radius;n.x=f.worldCOMx+z.gnormx*R,n.y=f.worldCOMy+z.gnormy*R;var F=-v;i.x=n.x+z.gnormx*F,i.y=n.y+z.gnormy*F,r.x=z.gnormx,r.y=z.gnormy}}return y&&(r.x=-r.x,r.y=-r.y),v}for(var j=e.polygon,N=t.polygon,U=-1e100,V=null,H=null,W=0,q=j.edges.head;null!=q;){for(var X=q.elt,Y=1e100,K=N.gverts.next;null!=K;){var Z=K,J=X.gnormx*Z.x+X.gnormy*Z.y;J<Y&&(Y=J),K=K.next}if(o<(Y-=X.gprojection)){U=Y;break}0<Y?U<Y&&(U=Y,V=X,W=1):U<0&&U<Y&&(U=Y,V=X,W=1),q=q.next}if(U<o){for(var Q=N.edges.head;null!=Q;){for(var $=Q.elt,ee=1e100,te=j.gverts.next;null!=te;){var ie=te,ne=$.gnormx*ie.x+$.gnormy*ie.y;ne<ee&&(ee=ne),te=te.next}if(o<(ee-=$.gprojection)){U=ee;break}0<ee?U<ee&&(U=ee,H=$,W=2):U<0&&U<ee&&(U=ee,H=$,W=2),Q=Q.next}if(U<o){var re,oe;if(1==W)re=N,oe=V;else{re=j,oe=H;var ae=i;i=n,n=ae,y=!y}for(var se=null,pe=1e100,le=re.edges.head;null!=le;){var he=le.elt,ue=oe.gnormx*he.gnormx+oe.gnormy*he.gnormy;ue<pe&&(pe=ue,se=he),le=le.next}if(y?(r.x=-oe.gnormx,r.y=-oe.gnormy):(r.x=oe.gnormx,r.y=oe.gnormy),0<=U){var de,ce,_e,ye,xe=oe.gp0,me=oe.gp1,ge=se.gp0,fe=se.gp1,ve=1/((de=me.x-xe.x)*de+(ce=me.y-xe.y)*ce),ze=1/((_e=fe.x-ge.x)*_e+(ye=fe.y-ge.y)*ye),we=-(de*(xe.x-ge.x)+ce*(xe.y-ge.y))*ve,be=-(de*(xe.x-fe.x)+ce*(xe.y-fe.y))*ve,Se=-(_e*(ge.x-xe.x)+ye*(ge.y-xe.y))*ze,Ce=-(_e*(ge.x-me.x)+ye*(ge.y-me.y))*ze;we<0?we=0:1<we&&(we=1),be<0?be=0:1<be&&(be=1),Se<0?Se=0:1<Se&&(Se=1),Ce<0?Ce=0:1<Ce&&(Ce=1);var Me,Pe,ke=we;Me=xe.x+de*ke,Pe=xe.y+ce*ke;var Te,Ae,Oe=be;Te=xe.x+de*Oe,Ae=xe.y+ce*Oe;var Ee,Ge,De=Se;Ee=ge.x+_e*De,Ge=ge.y+ye*De;var Ie,Le,Be=Ce;Ie=ge.x+_e*Be,Le=ge.y+ye*Be;var Re,Fe,je,Ne,Ue,Ve,He,We,qe=(Re=Me-ge.x)*Re+(Fe=Pe-ge.y)*Fe,Xe=(je=Te-fe.x)*je+(Ne=Ae-fe.y)*Ne,Ye=(Ue=Ee-xe.x)*Ue+(Ve=Ge-xe.y)*Ve,Ke=(He=Ie-me.x)*He+(We=Le-me.y)*We,Ze=0,Je=0,Qe=null;qe<Xe?(Ze=Me,Je=Pe,Qe=ge):(Ze=Te,Je=Ae,Qe=fe,qe=Xe);var $e=0,et=0,tt=null;if(Ye<Ke?($e=Ee,et=Ge,tt=xe):($e=Ie,et=Le,tt=me,Ye=Ke),0!=(U=qe<Ye?(i.x=Ze,i.y=Je,n.x=Qe.x,n.y=Qe.y,Math.sqrt(qe)):(n.x=$e,n.y=et,i.x=tt.x,i.y=tt.y,Math.sqrt(Ye)))){r.x=n.x-i.x,r.y=n.y-i.y;var it=1/U;r.x*=it,r.y*=it,y&&(r.x=-r.x,r.y=-r.y)}return U}var nt=0,rt=0;nt=se.gp0.x,rt=se.gp0.y;var ot,at,st=0,pt=0;ot=(st=se.gp1.x)-nt,at=(pt=se.gp1.y)-rt;var lt=oe.gnormy*nt-oe.gnormx*rt,ht=oe.gnormy*st-oe.gnormx*pt,ut=1/(ht-lt),dt=(-oe.tp1-lt)*ut;dt>Qs.epsilon&&(nt+=ot*dt,rt+=at*dt);var ct=(-oe.tp0-ht)*ut;ct<-Qs.epsilon&&(st+=ot*ct,pt+=at*ct);var _t=nt*oe.gnormx+rt*oe.gnormy-oe.gprojection,yt=st*oe.gnormx+pt*oe.gnormy-oe.gprojection;if(_t<yt){n.x=nt,n.y=rt;var xt=-_t;return i.x=n.x+oe.gnormx*xt,i.y=n.y+oe.gnormy*xt,_t}n.x=st,n.y=pt;var mt=-yt;return i.x=n.x+oe.gnormx*mt,i.y=n.y+oe.gnormy*mt,yt}return o}return o},Ht.prototype.__class__=Ht;var Nt=zpp_nape.geom.ZPP_PartitionPair=function(){this.node=null,this.di=0,this.id=0,this.b=null,this.a=null,this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null};Nt.__name__=["zpp_nape","geom","ZPP_PartitionPair"],Nt.get=function(e,t){var i;return null==Nt.zpp_pool?i=new Nt:(i=Nt.zpp_pool,Nt.zpp_pool=i.next,i.next=null),i.a=e,i.b=t,e.id<t.id?(i.id=e.id,i.di=t.id):(i.id=t.id,i.di=e.id),i},Nt.edge_swap=function(e,t){var i=e.node;e.node=t.node,t.node=i},Nt.edge_lt=function(e,t){return!(e.id>=t.id)||e.id==t.id&&e.di<t.di},Nt.prototype.next=null,Nt.prototype.elem=function(){return this},Nt.prototype.begin=function(){return this.next},Nt.prototype._inuse=null,Nt.prototype.modified=null,Nt.prototype.pushmod=null,Nt.prototype.length=null,Nt.prototype.setbegin=function(e){this.next=e,this.modified=!0,this.pushmod=!0},Nt.prototype.add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},Nt.prototype.inlined_add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},Nt.prototype.addAll=function(e){for(var t=e.next;null!=t;)this.add(t),t=t.next},Nt.prototype.insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},Nt.prototype.inlined_insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},Nt.prototype.pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},Nt.prototype.inlined_pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},Nt.prototype.pop_unsafe=function(){var e=this.next;return this.pop(),e},Nt.prototype.inlined_pop_unsafe=function(){var e=this.next;return this.pop(),e},Nt.prototype.remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Nt.prototype.try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Nt.prototype.inlined_remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Nt.prototype.inlined_try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){var r,o;null==t?(o=(r=this.next).next,this.next=o,null==this.next&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0)),r._inuse=!1,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Nt.prototype.erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},Nt.prototype.inlined_erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},Nt.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Nt.prototype.clear=function(){},Nt.prototype.inlined_clear=function(){},Nt.prototype.reverse=function(){for(var e=this.next,t=null;null!=e;){var i=e.next;e.next=t,t=this.next=e,e=i}this.modified=!0,this.pushmod=!0},Nt.prototype.empty=function(){return null==this.next},Nt.prototype.size=function(){return this.length},Nt.prototype.has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},Nt.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},Nt.prototype.front=function(){return this.next},Nt.prototype.back=function(){for(var e=this.next,t=e;null!=t;)t=(e=t).next;return e},Nt.prototype.iterator_at=function(e){for(var t=this.next;0<e--&&null!=t;)t=t.next;return t},Nt.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t:null},Nt.prototype.free=function(){this.a=this.b=null,this.node=null},Nt.prototype.alloc=function(){},Nt.prototype.a=null,Nt.prototype.b=null,Nt.prototype.id=null,Nt.prototype.di=null,Nt.prototype.node=null,Nt.prototype.__class__=Nt;var Ut=zpp_nape.geom.ZPP_Triangular=function(){};Ut.__name__=["zpp_nape","geom","ZPP_Triangular"],Ut.lt=function(e,t){return e.y<t.y||e.y==t.y&&e.x<t.x},Ut.right_turn=function(e,t,i){var n,r;n=i.x-t.x,r=i.y-t.y;var o;return o=t.x-e.x,(t.y-e.y)*n-o*r},Ut.delaunay=function(e,t,i,n){var r=0,o=0,a=0;return r=i.x-t.x,o=i.y-t.y,a=t.x-e.x,!!(!!(!!(0<=(t.y-e.y)*r-a*o||(r=n.x-i.x,o=n.y-i.y,a=i.x-t.x,0<=(i.y-t.y)*r-a*o))||(r=e.x-n.x,o=e.y-n.y,a=n.x-i.x,0<=(n.y-i.y)*r-a*o))||(r=t.x-e.x,o=t.y-e.y,a=e.x-n.x,0<=(e.y-n.y)*r-a*o))||0<t.x*(i.y*n.mag-i.mag*n.y)-i.x*(t.y*n.mag-t.mag*n.y)+n.x*(t.y*i.mag-t.mag*i.y)-(e.x*(i.y*n.mag-i.mag*n.y)-i.x*(e.y*n.mag-e.mag*n.y)+n.x*(e.y*i.mag-e.mag*i.y))+(e.x*(t.y*n.mag-t.mag*n.y)-t.x*(e.y*n.mag-e.mag*n.y)+n.x*(e.y*t.mag-e.mag*t.y))-(e.x*(t.y*i.mag-t.mag*i.y)-t.x*(e.y*i.mag-e.mag*i.y)+i.x*(e.y*t.mag-e.mag*t.y))},Ut.optimise=function(e){var t,i=e.vertices,n=e.vertices;if(null!=i)for(var r=i;;){var o=r;if(o.sort(),o.mag=o.x*o.x+o.y*o.y,(r=r.next)==n)break}null==Ut.edgeSet&&(null==Hn.zpp_pool?Ut.edgeSet=new Hn:(Ut.edgeSet=Hn.zpp_pool,Hn.zpp_pool=Ut.edgeSet.next,Ut.edgeSet.next=null),Ut.edgeSet.lt=Nt.edge_lt,Ut.edgeSet.swapped=Nt.edge_swap),null==Nt.zpp_pool?t=new Nt:(t=Nt.zpp_pool,Nt.zpp_pool=t.next,t.next=null);var a=e.vertices,s=e.vertices;if(null!=a)for(var p=a;;){var l=p,h=l.next;l.diagonals.reverse();for(var u=l.diagonals.head;null!=u;){var d=u.elt;if(d.id<l.id)h=d,u=u.next;else{if(!Ut.delaunay(l,h,d,null==u.next?l.prev:u.next.elt)){var c;null==Nt.zpp_pool?c=new Nt:(c=Nt.zpp_pool,Nt.zpp_pool=c.next,c.next=null),c.a=l,c.b=d,l.id<d.id?(c.id=l.id,c.di=d.id):(c.id=d.id,c.di=l.id);var _=c;t.add(_),_.node=Ut.edgeSet.insert(_)}h=d,u=u.next}}if((p=p.next)==s)break}for(;null!=t.next;){for(var y=t.pop_unsafe(),x=y.a,m=y.b,g=x.next,f=null,v=x.diagonals.head;null!=v;){var z=v.elt;if(z==m){f=null==(v=v.next)?x.prev:v.elt;break}g=z,v=v.next}if(x.diagonals.remove(m),m.diagonals.remove(x),m==g.next)g.diagonals.add(f);else for(var w=g.diagonals.head;null!=w;){if(w.elt==m){g.diagonals.insert(w,f);break}w=w.next}if(x==f.next)f.diagonals.add(g);else for(var b=f.diagonals.head;null!=b;){if(b.elt==x){f.diagonals.insert(b,g);break}b=b.next}Ut.edgeSet.remove_node(y.node),y.a=y.b=null,y.node=null,y.next=Nt.zpp_pool,Nt.zpp_pool=y}var S=t;S.a=S.b=null,S.node=null,S.next=Nt.zpp_pool,Nt.zpp_pool=S},Ut.triangulate=function(e){var t=e.vertices,i=e.vertices,n=e.vertices.next,r=e.vertices;if(null!=n)for(var o=n;;){var a=o;if((a.y<t.y||a.y==t.y&&a.x<t.x)&&(t=a),(i.y<a.y||i.y==a.y&&i.x<a.x)&&(i=a),(o=o.next)==r)break}null==Ut.queue&&(Ut.queue=new zi);var s=i.prev,p=i.next;for(Ut.queue.add(i);s!=t||p!=t;)s==t||p!=t&&(s.y<p.y||s.y==p.y&&s.x<p.x)?(Ut.queue.add(p),p.rightchain=!1,p=p.next):(Ut.queue.add(s),s.rightchain=!0,s=s.prev);Ut.queue.add(t),null==Ut.stack&&(Ut.stack=new zi),Ut.stack.add(Ut.queue.pop_unsafe());var l=Ut.queue.pop_unsafe();for(Ut.stack.add(l);;){var h=Ut.queue.pop_unsafe();if(null==Ut.queue.head)break;if(h.rightchain!=Ut.stack.head.elt.rightchain){for(;;){var u=Ut.stack.pop_unsafe();if(null==Ut.stack.head)break;e.add_diagonal(u,h)}Ut.stack.add(l)}else{for(var d=Ut.stack.pop_unsafe();null!=Ut.stack.head;){var c,_,y=Ut.stack.head.elt;c=h.x-d.x,_=h.y-d.y;var x;x=d.x-y.x;var m=(d.y-y.y)*c-x*_;if(h.rightchain&&0<=m||!h.rightchain&&m<=0)break;e.add_diagonal(y,h),d=y,Ut.stack.pop()}Ut.stack.add(d)}Ut.stack.add(h),l=h}if(null!=Ut.stack.head)for(Ut.stack.pop();null!=Ut.stack.head;){var g=Ut.stack.pop_unsafe();if(null==Ut.stack.head)break;e.add_diagonal(i,g)}return e},Ut.prototype.__class__=Ut;var ep=zpp_nape.geom.ZPP_Vec2=function(){this.y=0,this.x=0,this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.weak=!1,this.outer=null,this._isimmutable=null,this._immutable=!1,this._validate=null,this._invalidate=null};ep.__name__=["zpp_nape","geom","ZPP_Vec2"],ep.get=function(e,t,i){var n;return null==i&&(i=!1),null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=i,n.x=e,n.y=t,n},ep.prototype._invalidate=null,ep.prototype._validate=null,ep.prototype.validate=function(){null!=this._validate&&this._validate()},ep.prototype.invalidate=function(){null!=this._invalidate&&this._invalidate(this)},ep.prototype._immutable=null,ep.prototype._isimmutable=null,ep.prototype.immutable=function(){},ep.prototype.outer=null,ep.prototype.wrapper=function(){if(null==this.outer){this.outer=new lt;var e=this.outer.zpp_inner;null!=e.outer&&(e.outer.zpp_inner=null,e.outer=null),e._isimmutable=null,e._validate=null,e._invalidate=null,e.next=ep.zpp_pool,ep.zpp_pool=e,this.outer.zpp_inner=this}return this.outer},ep.prototype.weak=null,ep.prototype.free=function(){null!=this.outer&&(this.outer.zpp_inner=null,this.outer=null),this._isimmutable=null,this._validate=null,this._invalidate=null},ep.prototype.alloc=function(){this.weak=!1},ep.prototype.next=null,ep.prototype.elem=function(){return this},ep.prototype.begin=function(){return this.next},ep.prototype._inuse=null,ep.prototype.modified=null,ep.prototype.pushmod=null,ep.prototype.length=null,ep.prototype.setbegin=function(e){this.next=e,this.modified=!0,this.pushmod=!0},ep.prototype.add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},ep.prototype.inlined_add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},ep.prototype.addAll=function(e){for(var t=e.next;null!=t;)this.add(t),t=t.next},ep.prototype.insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},ep.prototype.inlined_insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},ep.prototype.pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},ep.prototype.inlined_pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},ep.prototype.pop_unsafe=function(){var e=this.next;return this.pop(),e},ep.prototype.inlined_pop_unsafe=function(){var e=this.next;return this.pop(),e},ep.prototype.remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},ep.prototype.try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){this.erase(t),n=!0;break}i=(t=i).next}return n},ep.prototype.inlined_remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},ep.prototype.inlined_try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){var r,o;null==t?(o=(r=this.next).next,this.next=o,null==this.next&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0)),r._inuse=!1,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},ep.prototype.erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},ep.prototype.inlined_erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},ep.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},ep.prototype.clear=function(){},ep.prototype.inlined_clear=function(){},ep.prototype.reverse=function(){for(var e=this.next,t=null;null!=e;){var i=e.next;e.next=t,t=this.next=e,e=i}this.modified=!0,this.pushmod=!0},ep.prototype.empty=function(){return null==this.next},ep.prototype.size=function(){return this.length},ep.prototype.has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},ep.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},ep.prototype.front=function(){return this.next},ep.prototype.back=function(){for(var e=this.next,t=e;null!=t;)t=(e=t).next;return e},ep.prototype.iterator_at=function(e){for(var t=this.next;0<e--&&null!=t;)t=t.next;return t},ep.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t:null},ep.prototype.x=null,ep.prototype.y=null,ep.prototype.copy=function(){var e,t=this.x,i=this.y;return null==ep.zpp_pool?e=new ep:(e=ep.zpp_pool,ep.zpp_pool=e.next,e.next=null),e.weak=!1,e._immutable=!1,e.x=t,e.y=i,e},ep.prototype.toString=function(){return"{ x: "+this.x+" y: "+this.y+" }"},ep.prototype.__class__=ep;var Wt=zpp_nape.geom.ZPP_Vec3=function(){this._validate=null,this.immutable=!1,this.z=0,this.y=0,this.x=0,this.outer=null,this.immutable=!1,this._validate=null};Wt.__name__=["zpp_nape","geom","ZPP_Vec3"],Wt.prototype.outer=null,Wt.prototype.x=null,Wt.prototype.y=null,Wt.prototype.z=null,Wt.prototype.immutable=null,Wt.prototype._validate=null,Wt.prototype.validate=function(){null!=this._validate&&this._validate()},Wt.prototype.__class__=Wt;var qt=zpp_nape.geom.ZPP_VecMath=function(){};qt.__name__=["zpp_nape","geom","ZPP_VecMath"],qt.vec_dsq=function(e,t,i,n){var r,o;return(r=e-i)*r+(o=t-n)*o},qt.vec_distance=function(e,t,i,n){var r,o;return r=e-i,o=t-n,Math.sqrt(r*r+o*o)},qt.prototype.__class__=qt;var Xo=zpp_nape.phys.ZPP_Interactor=function(){this.wrap_cbTypes=null,this.cbSet=null,this.cbTypes=null,this.group=null,this.cbsets=null,this.icompound=null,this.ibody=null,this.ishape=null,this.userData=null,this.id=0,this.outer_i=null,this.id=ke.Interactor(),this.cbsets=new yi,this.cbTypes=new Fe};Xo.__name__=["zpp_nape","phys","ZPP_Interactor"],Xo.get=function(e,t){for(var i=e.id<t.id?e.id:t.id,n=e.id<t.id?t.id:e.id,r=null,o=(e.cbsets.length<t.cbsets.length?e.cbsets:t.cbsets).head;null!=o;){var a=o.elt;if(a.id==i&&a.di==n){r=a;break}o=o.next}return r},Xo.int_callback=function(e,t,i){var n,r=e.int1,o=e.int2,a=t.options1,s=r.cbTypes;if(a.nonemptyintersection(s,a.includes)&&!a.nonemptyintersection(s,a.excludes)){var p=t.options2,l=o.cbTypes;n=!!p.nonemptyintersection(l,p.includes)&&!p.nonemptyintersection(l,p.excludes)}else n=!1;n?(i.int1=r,i.int2=o):(i.int1=o,i.int2=r)},Xo.prototype.outer_i=null,Xo.prototype.id=null,Xo.prototype.userData=null,Xo.prototype.ishape=null,Xo.prototype.ibody=null,Xo.prototype.icompound=null,Xo.prototype.isShape=function(){return null!=this.ishape},Xo.prototype.isBody=function(){return null!=this.ibody},Xo.prototype.isCompound=function(){return null!=this.icompound},Xo.prototype.__iaddedToSpace=function(){null!=this.group&&this.group.interactors.add(this);for(var e=this.cbTypes.head;null!=e;)e.elt.interactors.add(this),e=e.next;this.alloc_cbSet()},Xo.prototype.__iremovedFromSpace=function(){null!=this.group&&this.group.interactors.remove(this);for(var e=this.cbTypes.head;null!=e;)e.elt.interactors.remove(this),e=e.next;this.dealloc_cbSet()},Xo.prototype.wake=function(){if(null!=this.ishape){var e=this.ishape.body;null!=e&&null!=e.space&&e.space.non_inlined_wake(e)}else null!=this.ibody?null!=this.ibody.space&&this.ibody.space.non_inlined_wake(this.ibody):null!=this.icompound.space&&this.icompound.space.wakeCompound(this.icompound)},Xo.prototype.cbsets=null,Xo.prototype.getSpace=function(){return null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space},Xo.prototype.group=null,Xo.prototype.cbTypes=null,Xo.prototype.cbSet=null,Xo.prototype.wrap_cbTypes=null,Xo.prototype.setupcbTypes=function(){this.wrap_cbTypes=Tn.get(this.cbTypes),this.wrap_cbTypes.zpp_inner.adder=$(this,this.wrap_cbTypes_adder),this.wrap_cbTypes.zpp_inner.subber=$(this,this.wrap_cbTypes_subber),this.wrap_cbTypes.zpp_inner.dontremove=!0},Xo.prototype.wrap_cbTypes_subber=function(e){var t=e.zpp_inner;if(this.cbTypes.has(t)){var i=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=i&&(this.dealloc_cbSet(),t.interactors.remove(this)),this.cbTypes.remove(t),null!=i&&(this.alloc_cbSet(),this.wake())}},Xo.prototype.wrap_cbTypes_adder=function(e){return this.insert_cbtype(e.zpp_inner),!1},Xo.prototype.insert_cbtype=function(e){if(!this.cbTypes.has(e)){var t=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=t&&(this.dealloc_cbSet(),e.interactors.add(this));for(var i=null,n=this.cbTypes.head;null!=n&&!(e.id<n.elt.id);)n=(i=n).next;var r,o=this.cbTypes;null==ji.zpp_pool?r=new ji:(r=ji.zpp_pool,ji.zpp_pool=r.next,r.next=null),r.elt=e;var a=r;null==i?(a.next=o.head,o.head=a):(a.next=i.next,i.next=a),o.pushmod=o.modified=!0,o.length++,null!=t&&(this.alloc_cbSet(),this.wake())}},Xo.prototype.alloc_cbSet=function(){var e=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=(this.cbSet=e.cbsets.get(this.cbTypes))&&(this.cbSet.count++,this.cbSet.interactors.add(this),this.cbSet.validate(),e.freshInteractorType(this))},Xo.prototype.dealloc_cbSet=function(){var e=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;if(null!=this.cbSet){if(this.cbSet.interactors.remove(this),e.nullInteractorType(this),0==--this.cbSet.count){e.cbsets.remove(this.cbSet);var t=this.cbSet;for(t.listeners.clear(),t.zip_listeners=!0,t.bodylisteners.clear(),t.zip_bodylisteners=!0,t.conlisteners.clear(),t.zip_conlisteners=!0;null!=t.cbTypes.head;)t.cbTypes.pop_unsafe().cbsets.remove(t);t.next=jo.zpp_pool,jo.zpp_pool=t}this.cbSet=null}},Xo.prototype.setGroup=function(e){if(this.group!=e){var t=null!=(null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space);t&&null!=this.group&&this.group.interactors.remove(this),this.group=e,t&&null!=e&&e.interactors.add(this),t&&(null!=this.ishape?this.ishape.body.wake():null!=this.ibody?this.ibody.wake():this.icompound.wake())}},Xo.prototype.immutable_midstep=function(e){null==this.ibody&&(null!=this.ishape?this.ishape.__immutable_midstep(e):this.icompound.__imutable_midstep(e))},Xo.prototype.lookup_group=function(){for(var e=this;null!=e&&null==e.group;)e=null!=e.ishape?e.ishape.body:null!=e.icompound?e.icompound.compound:e.ibody.compound;return null==e?null:e.group},Xo.prototype.copyto=function(e){e.zpp_inner_i.group=this.group;var t=this.outer_i;null==t.zpp_inner_i.wrap_cbTypes&&t.zpp_inner_i.setupcbTypes();var i=t.zpp_inner_i.wrap_cbTypes;i.zpp_inner.valmod();for(var n=Ve.get(i);;){n.zpp_inner.zpp_inner.valmod();var r=n.zpp_inner;r.zpp_inner.valmod(),r.zpp_inner.zip_length&&(r.zpp_inner.zip_length=!1,r.zpp_inner.user_length=r.zpp_inner.inner.length);var o=r.zpp_inner.user_length;if(n.zpp_critical=!0,!(n.zpp_i<o||(n.zpp_next=Ve.zpp_pool,(Ve.zpp_pool=n).zpp_inner=null,!1)))break;n.zpp_critical=!1;var a=n.zpp_inner.at(n.zpp_i++);null==e.zpp_inner_i.wrap_cbTypes&&e.zpp_inner_i.setupcbTypes();var s=e.zpp_inner_i.wrap_cbTypes;s.zpp_inner.reverse_flag?s.push(a):s.unshift(a)}null!=this.userData&&(e.zpp_inner_i.userData=_.copy(this.userData))},Xo.prototype.__class__=Xo;var Xt=zpp_nape.phys.ZPP_Body=function(){var e;this.wrap_worldCOM=null,this.wrap_localCOM=null,this.zip_worldCOM=!1,this.worldCOMy=0,this.worldCOMx=0,this.zip_localCOM=!1,this.localCOMy=0,this.localCOMx=0,this.zip_aabb=!1,this.aabb=null,this.norotate=!1,this.sinertia=0,this.iinertia=0,this.cinertia=0,this.zip_inertia=!1,this.inertia=0,this.inertiaMode=0,this.zip_gravMassScale=!1,this.gravMassScale=0,this.gravMassMode=0,this.zip_gravMass=!1,this.gravMass=0,this.nomove=!1,this.cmass=0,this.smass=0,this.imass=0,this.massMode=0,this.zip_mass=!1,this.mass=0,this.zip_axis=!1,this.axisy=0,this.axisx=0,this.rot=0,this.pre_rot=0,this.kinangvel=0,this.torque=0,this.angvel=0,this.wrapcvel=null,this.wrap_svel=null,this.svely=0,this.svelx=0,this.wrap_kinvel=null,this.kinvely=0,this.kinvelx=0,this.wrap_force=null,this.forcey=0,this.forcex=0,this.wrap_vel=null,this.vely=0,this.velx=0,this.wrap_pos=null,this.posy=0,this.posx=0,this.pre_posy=0,this.pre_posx=0,this.disableCCD=!1,this.bulletEnabled=!1,this.bullet=!1,this.sweepRadius=0,this.sweepFrozen=!1,this.sweep_angvel=0,this.sweepTime=0,this.graph_depth=0,this.component=null,this.wrap_constraints=null,this.constraints=null,this.wrap_arbiters=null,this.arbiters=null,this.space=null,this.wrap_shapes=null,this.shapes=null,this.compound=null,this.type=0,this.world=!1,this.outer=null,Xo.call(this),(this.ibody=this).world=!1,this.bulletEnabled=!1,this.sweepTime=0,this.sweep_angvel=0,this.norotate=this.nomove=!1,this.disableCCD=!1,this.posx=0,this.posy=0,this.rot=0,this.axisx=0,this.axisy=1,this.svelx=0,this.svely=0,this.velx=0,this.vely=0,this.kinvelx=0,this.kinvely=0,this.forcex=0,this.forcey=0,this.torque=this.angvel=this.kinangvel=0,this.pre_posx=1/0,this.pre_posy=1/0,this.pre_rot=1/0,this.localCOMx=0,this.localCOMy=0,this.worldCOMx=0,this.worldCOMy=0,this.zip_aabb=!0,null==Oo.zpp_pool?e=new Oo:(e=Oo.zpp_pool,Oo.zpp_pool=e.next,e.next=null),e.minx=0,e.miny=0,e.maxx=0,e.maxy=0,this.aabb=e,this.aabb._immutable=!0,this.aabb._validate=$(this,this.aabb_validate),this.massMode=0,this.gravMassMode=0,this.gravMassScale=1,this.inertiaMode=0,this.arbiters=new fi,this.constraints=new Ee,this.shapes=new xi,this.wrap_shapes=In.get(this.shapes),this.wrap_shapes.zpp_inner.adder=$(this,this.shapes_adder),this.wrap_shapes.zpp_inner.subber=$(this,this.shapes_subber),this.wrap_shapes.zpp_inner._invalidate=$(this,this.shapes_invalidate),this.kinematicDelaySleep=!1};Xt.__name__=["zpp_nape","phys","ZPP_Body"],Xt.__super__=Xo,Xt.prototype=Object.create(Xo.prototype),Xt.bodysetlt=function(e,t){return e.id<t.id},Xt.__static=function(){null==Uo.BodyType_STATIC&&(Uo.internal=!0,Uo.BodyType_STATIC=new oe,Uo.internal=!1);var e=new re(Uo.BodyType_STATIC),t=e.zpp_inner;return t.world=!0,t.wrap_shapes.zpp_inner.immutable=!0,t.smass=t.imass=t.cmass=t.mass=t.gravMass=0,t.sinertia=t.iinertia=t.cinertia=t.inertia=0,t.cbTypes.clear(),e},Xt.prototype.outer=null,Xt.prototype.world=null,Xt.prototype.type=null,Xt.prototype.isStatic=function(){return 1==this.type},Xt.prototype.isDynamic=function(){return 2==this.type},Xt.prototype.isKinematic=function(){return 3==this.type},Xt.prototype.invalidate_type=function(){this.invalidate_mass(),this.invalidate_inertia()},Xt.prototype.compound=null,Xt.prototype.shapes=null,Xt.prototype.wrap_shapes=null,Xt.prototype.invalidate_shapes=function(){this.zip_aabb=!0,this.zip_localCOM=!0,this.zip_worldCOM=!0,this.invalidate_mass(),this.invalidate_inertia()},Xt.prototype.space=null,Xt.prototype.arbiters=null,Xt.prototype.wrap_arbiters=null,Xt.prototype.constraints=null,Xt.prototype.wrap_constraints=null,Xt.prototype.component=null,Xt.prototype.graph_depth=null,Xt.prototype.init_bodysetlist=function(){null==Xt.bodyset&&(Xt.bodyset=new Nn,Xt.bodyset.lt=Xt.bodysetlt,Xt.bodystack=new mi)},Xt.prototype.connectedBodies_cont=function(e){Xt.bodyset.try_insert_bool(e.zpp_inner)&&(Xt.bodystack.add(e.zpp_inner),e.zpp_inner.graph_depth=Xt.cur_graph_depth+1)},Xt.prototype.connectedBodies=function(e,t){null==Xt.bodyset&&(Xt.bodyset=new Nn,Xt.bodyset.lt=Xt.bodysetlt,Xt.bodystack=new mi);var i=null==t?new ee:t;for(Xt.bodystack.add(this),Xt.bodyset.insert(this),this.graph_depth=0;null!=Xt.bodystack.head;){var n=Xt.bodystack.pop_unsafe();if(n.graph_depth!=e){Xt.cur_graph_depth=n.graph_depth;for(var r=n.constraints.head;null!=r;)r.elt.outer.visitBodies($(this,this.connectedBodies_cont)),r=r.next}}var o=Xt.bodyset;if(null!=o.parent){for(var a=o.parent;null!=a;)if(null!=a.prev)a=a.prev;else if(null!=a.next)a=a.next;else{var s=a.data;if(s!=this){var p=s.outer;i.zpp_inner.reverse_flag?i.push(p):i.unshift(p)}var l=a.parent;null!=l&&(a==l.prev?l.prev=null:l.next=null,a.parent=null);var h=a;h.data=null,h.lt=null,h.swapped=null,h.next=Nn.zpp_pool,Nn.zpp_pool=h,a=l}o.parent=null}return i},Xt.prototype.interactingBodies=function(e,t,i){null==Xt.bodyset&&(Xt.bodyset=new Nn,Xt.bodyset.lt=Xt.bodysetlt,Xt.bodystack=new mi);var n=null==i?new ee:i;for(Xt.bodyset.insert(this),Xt.bodystack.add(this),this.graph_depth=0;null!=Xt.bodystack.head;){var r=Xt.bodystack.pop_unsafe();if(r.graph_depth!=t)for(var o=r.arbiters.head;null!=o;){var a=o.elt;if(0!=(a.type&e)){var s=a.b1==r?a.b2:a.b1;Xt.bodyset.try_insert_bool(s)&&(Xt.bodystack.add(s),s.graph_depth=r.graph_depth+1)}o=o.next}}var p=Xt.bodyset;if(null!=p.parent){for(var l=p.parent;null!=l;)if(null!=l.prev)l=l.prev;else if(null!=l.next)l=l.next;else{var h=l.data;if(h!=this){var u=h.outer;n.zpp_inner.reverse_flag?n.push(u):n.unshift(u)}var d=l.parent;null!=d&&(l==d.prev?d.prev=null:d.next=null,l.parent=null);var c=l;c.data=null,c.lt=null,c.swapped=null,c.next=Nn.zpp_pool,Nn.zpp_pool=c,l=d}p.parent=null}return n},Xt.prototype.atRest=function(e){if(2!=this.type)return this.component.sleeping;var t,i=Qs.linearSleepThreshold;if(i*=i,this.velx*this.velx+this.vely*this.vely>i)t=!1;else{var n,r,o=this.posx,a=this.posy;if(.25*i*e*e<(n=o-this.pre_posx)*n+(r=a-this.pre_posy)*r)t=!1;else{var s,p,l=(s=this.aabb.maxx-this.aabb.minx)*s+(p=this.aabb.maxy-this.aabb.miny)*p,h=Qs.angularSleepThreshold;if(h*=h,4*this.angvel*this.angvel*l>h)t=!1;else{var u=this.rot-this.pre_rot;t=!(h*e*e<u*u*l)}}}return t||(this.component.waket=this.space.stamp),this.component.waket+Qs.sleepDelay<this.space.stamp},Xt.prototype.refreshArbiters=function(){for(var e=this.arbiters.head;null!=e;)e.elt.invalidated=!0,e=e.next},Xt.prototype.sweepTime=null,Xt.prototype.sweep_angvel=null,Xt.prototype.sweepFrozen=null,Xt.prototype.sweepRadius=null,Xt.prototype.bullet=null,Xt.prototype.bulletEnabled=null,Xt.prototype.disableCCD=null,Xt.prototype.sweepIntegrate=function(e){var t=e-this.sweepTime;if(0!=t&&(this.sweepTime=e,this.posx+=this.velx*t,this.posy+=this.vely*t,0!=this.angvel)){var i=this.sweep_angvel*t;if(this.rot+=i,1e-4<i*i)this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot);else{var n=i*i,r=1-.5*n,o=1-n*n/8,a=(r*this.axisx+i*this.axisy)*o;this.axisy=(r*this.axisy-i*this.axisx)*o,this.axisx=a}}},Xt.prototype.sweepValidate=function(e){if(0==e.type)e.worldCOMx=this.posx+(this.axisy*e.localCOMx-this.axisx*e.localCOMy),e.worldCOMy=this.posy+(e.localCOMx*this.axisx+e.localCOMy*this.axisy);else{for(var t=e.polygon,i=t.lverts.next,n=t.gverts.next;null!=n;){var r=n,o=i;i=i.next,r.x=this.posx+(this.axisy*o.x-this.axisx*o.y),r.y=this.posy+(o.x*this.axisx+o.y*this.axisy),n=n.next}var a=t.edges.head,s=t.gverts.next,p=s;for(s=s.next;null!=s;){var l=s,h=a.elt;a=a.next,h.gnormx=this.axisy*h.lnormx-this.axisx*h.lnormy,h.gnormy=h.lnormx*this.axisx+h.lnormy*this.axisy,h.gprojection=this.posx*h.gnormx+this.posy*h.gnormy+h.lprojection,h.tp0=p.y*h.gnormx-p.x*h.gnormy,h.tp1=l.y*h.gnormx-l.x*h.gnormy,p=l,s=s.next}var u=t.gverts.next,d=a.elt;d.gnormx=this.axisy*d.lnormx-this.axisx*d.lnormy,d.gnormy=d.lnormx*this.axisx+d.lnormy*this.axisy,d.gprojection=this.posx*d.gnormx+this.posy*d.gnormy+d.lprojection,d.tp0=p.y*d.gnormx-p.x*d.gnormy,d.tp1=u.y*d.gnormx-u.x*d.gnormy}},Xt.prototype.pre_posx=null,Xt.prototype.pre_posy=null,Xt.prototype.posx=null,Xt.prototype.posy=null,Xt.prototype.wrap_pos=null,Xt.prototype.velx=null,Xt.prototype.vely=null,Xt.prototype.wrap_vel=null,Xt.prototype.forcex=null,Xt.prototype.forcey=null,Xt.prototype.wrap_force=null,Xt.prototype.kinvelx=null,Xt.prototype.kinvely=null,Xt.prototype.wrap_kinvel=null,Xt.prototype.svelx=null,Xt.prototype.svely=null,Xt.prototype.wrap_svel=null,Xt.prototype.invalidate_pos=function(){for(var e=this.shapes.head;null!=e;){var t=e.elt;1==t.type&&(t.polygon.invalidate_gverts(),t.polygon.invalidate_gaxi()),t.invalidate_worldCOM(),e=e.next}this.zip_worldCOM=!0},Xt.prototype.pos_invalidate=function(e){if(this.immutable_midstep("Body::position"),this.posx!=e.x||this.posy!=e.y){this.posx=e.x,this.posy=e.y;for(var t=this.shapes.head;null!=t;){var i=t.elt;1==i.type&&(i.polygon.invalidate_gverts(),i.polygon.invalidate_gaxi()),i.invalidate_worldCOM(),t=t.next}this.zip_worldCOM=!0,this.wake()}},Xt.prototype.pos_validate=function(){this.wrap_pos.zpp_inner.x=this.posx,this.wrap_pos.zpp_inner.y=this.posy},Xt.prototype.vel_invalidate=function(e){this.velx=e.x,this.vely=e.y,this.wake()},Xt.prototype.vel_validate=function(){this.wrap_vel.zpp_inner.x=this.velx,this.wrap_vel.zpp_inner.y=this.vely},Xt.prototype.kinvel_invalidate=function(e){this.kinvelx=e.x,this.kinvely=e.y,this.wake()},Xt.prototype.kinvel_validate=function(){this.wrap_kinvel.zpp_inner.x=this.kinvelx,this.wrap_kinvel.zpp_inner.y=this.kinvely},Xt.prototype.svel_invalidate=function(e){this.svelx=e.x,this.svely=e.y,this.wake()},Xt.prototype.svel_validate=function(){this.wrap_svel.zpp_inner.x=this.svelx,this.wrap_svel.zpp_inner.y=this.svely},Xt.prototype.force_invalidate=function(e){this.forcex=e.x,this.forcey=e.y,this.wake()},Xt.prototype.force_validate=function(){this.wrap_force.zpp_inner.x=this.forcex,this.wrap_force.zpp_inner.y=this.forcey},Xt.prototype.setupPosition=function(){var e,t=this.posx,i=this.posy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_pos=e,this.wrap_pos.zpp_inner._inuse=!0,this.world?this.wrap_pos.zpp_inner._immutable=!0:(this.wrap_pos.zpp_inner._invalidate=$(this,this.pos_invalidate),this.wrap_pos.zpp_inner._validate=$(this,this.pos_validate))},Xt.prototype.setupVelocity=function(){var e,t=this.velx,i=this.vely;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_vel=e,this.wrap_vel.zpp_inner._inuse=!0,this.world?this.wrap_vel.zpp_inner._immutable=!0:(this.wrap_vel.zpp_inner._invalidate=$(this,this.vel_invalidate),this.wrap_vel.zpp_inner._validate=$(this,this.vel_validate))},Xt.prototype.setupkinvel=function(){var e,t=this.kinvelx,i=this.kinvely;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_kinvel=e,this.wrap_kinvel.zpp_inner._inuse=!0,this.world?this.wrap_kinvel.zpp_inner._immutable=!0:(this.wrap_kinvel.zpp_inner._invalidate=$(this,this.kinvel_invalidate),this.wrap_kinvel.zpp_inner._validate=$(this,this.kinvel_validate))},Xt.prototype.setupsvel=function(){var e,t=this.svelx,i=this.svely;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_svel=e,this.wrap_svel.zpp_inner._inuse=!0,this.world?this.wrap_svel.zpp_inner._immutable=!0:(this.wrap_svel.zpp_inner._invalidate=$(this,this.svel_invalidate),this.wrap_svel.zpp_inner._validate=$(this,this.svel_validate))},Xt.prototype.setupForce=function(){var e,t=this.forcex,i=this.forcey;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_force=e,this.wrap_force.zpp_inner._inuse=!0,this.world?this.wrap_force.zpp_inner._immutable=!0:(this.wrap_force.zpp_inner._invalidate=$(this,this.force_invalidate),this.wrap_force.zpp_inner._validate=$(this,this.force_validate))},Xt.prototype.cvel_validate=function(){this.wrapcvel.zpp_inner.x=this.velx+this.kinvelx,this.wrapcvel.zpp_inner.y=this.vely+this.kinvely,this.wrapcvel.zpp_inner.z=this.angvel+this.kinangvel},Xt.prototype.wrapcvel=null,Xt.prototype.setup_cvel=function(){this.wrapcvel=Z.get(),this.wrapcvel.zpp_inner.immutable=!0,this.wrapcvel.zpp_inner._validate=$(this,this.cvel_validate)},Xt.prototype.angvel=null,Xt.prototype.torque=null,Xt.prototype.kinangvel=null,Xt.prototype.pre_rot=null,Xt.prototype.rot=null,Xt.prototype.invalidate_rot=function(){this.zip_axis=!0;for(var e=this.shapes.head;null!=e;){var t=e.elt;1==t.type&&(t.polygon.invalidate_gverts(),t.polygon.invalidate_gaxi()),t.invalidate_worldCOM(),e=e.next}this.zip_worldCOM=!0},Xt.prototype.axisx=null,Xt.prototype.axisy=null,Xt.prototype.zip_axis=null,Xt.prototype.validate_axis=function(){this.zip_axis&&(this.zip_axis=!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot))},Xt.prototype.quick_validate_axis=function(){this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot)},Xt.prototype.delta_rot=function(e){if(this.rot+=e,1e-4<e*e)this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot);else{var t=e*e,i=1-.5*t,n=1-t*t/8,r=(i*this.axisx+e*this.axisy)*n;this.axisy=(i*this.axisy-e*this.axisx)*n,this.axisx=r}},Xt.prototype.kinematicDelaySleep=null,Xt.prototype.mass=null,Xt.prototype.zip_mass=null,Xt.prototype.massMode=null,Xt.prototype.imass=null,Xt.prototype.smass=null,Xt.prototype.cmass=null,Xt.prototype.nomove=null,Xt.prototype.invalidate_mass=function(){this.zip_mass=!0,this.invalidate_gravMass()},Xt.prototype.validate_mass=function(){if(this.zip_mass||(this.massMode,0)){if(this.zip_mass=!1,0==this.massMode){this.cmass=0;for(var e=this.shapes.head;null!=e;){var t=e.elt;t.refmaterial.density=t.material.density,t.validate_area_inertia(),this.cmass+=t.area*t.material.density,e=e.next}}2!=this.type||this.nomove?(this.mass=1/0,this.imass=this.smass=0):(this.mass=this.cmass,this.imass=this.smass=1/this.mass)}},Xt.prototype.gravMass=null,Xt.prototype.zip_gravMass=null,Xt.prototype.gravMassMode=null,Xt.prototype.gravMassScale=null,Xt.prototype.zip_gravMassScale=null,Xt.prototype.invalidate_gravMass=function(){1!=this.gravMassMode&&(this.zip_gravMass=!0),2!=this.gravMassMode&&(this.zip_gravMassScale=!0),this.wake()},Xt.prototype.validate_gravMass=function(){this.zip_gravMass&&(this.zip_gravMass=!1,this.validate_mass(),0==this.gravMassMode?(this.validate_mass(),this.gravMass=this.cmass):2==this.gravMassMode&&(this.validate_mass(),this.gravMass=this.cmass*this.gravMassScale))},Xt.prototype.invalidate_gravMassScale=function(){2!=this.gravMassMode?this.zip_gravMassScale=!0:this.invalidate_gravMass()},Xt.prototype.validate_gravMassScale=function(){this.zip_gravMassScale&&(this.zip_gravMassScale=!1,0==this.gravMassMode?this.gravMassScale=1:1==this.gravMassMode&&(this.validate_mass(),this.gravMassScale=this.gravMass/this.cmass))},Xt.prototype.inertiaMode=null,Xt.prototype.inertia=null,Xt.prototype.zip_inertia=null,Xt.prototype.cinertia=null,Xt.prototype.iinertia=null,Xt.prototype.sinertia=null,Xt.prototype.norotate=null,Xt.prototype.invalidate_inertia=function(){this.zip_inertia=!0,this.wake()},Xt.prototype.validate_inertia=function(){if(this.zip_inertia||(this.inertiaMode,0)){if(this.zip_inertia=!1,0==this.inertiaMode){this.cinertia=0;for(var e=this.shapes.head;null!=e;){var t=e.elt;t.refmaterial.density=t.material.density,t.validate_area_inertia(),this.cinertia+=t.inertia*t.area*t.material.density,e=e.next}}2!=this.type||this.norotate?(this.inertia=1/0,this.sinertia=this.iinertia=0):(this.inertia=this.cinertia,this.sinertia=this.iinertia=1/this.inertia)}},Xt.prototype.invalidate_wake=function(){this.wake()},Xt.prototype.aabb=null,Xt.prototype.zip_aabb=null,Xt.prototype.validate_aabb=function(){if(this.zip_aabb){this.zip_aabb=!1,this.aabb.minx=1/0,this.aabb.miny=1/0,this.aabb.maxx=-1/0,this.aabb.maxy=-1/0;for(var e=this.shapes.head;null!=e;){var t=e.elt;if(t.zip_aabb&&null!=t.body)if(t.zip_aabb=!1,0==t.type){var i=t.circle;if(i.zip_worldCOM&&null!=i.body){if(i.zip_worldCOM=!1,i.zip_localCOM){if(i.zip_localCOM=!1,1==i.type){var n=i.polygon;if(null==n.lverts.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y;else if(null==n.lverts.next.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y,n.localCOMx+=n.lverts.next.next.x,n.localCOMy+=n.lverts.next.next.y,n.localCOMx*=.5,n.localCOMy*=.5;else{n.localCOMx=0;var r=n.localCOMy=0,o=n.lverts.next,a=o,s=o=o.next;for(o=o.next;null!=o;){var p=o;r+=s.x*(p.y-a.y);var l=p.y*s.x-p.x*s.y;n.localCOMx+=(s.x+p.x)*l,n.localCOMy+=(s.y+p.y)*l,a=s,s=p,o=o.next}var h=o=n.lverts.next;r+=s.x*(h.y-a.y);var u=h.y*s.x-h.x*s.y;n.localCOMx+=(s.x+h.x)*u,n.localCOMy+=(s.y+h.y)*u,a=s;var d=o=o.next;r+=h.x*(d.y-a.y);var c=d.y*h.x-d.x*h.y;n.localCOMx+=(h.x+d.x)*c,n.localCOMy+=(h.y+d.y)*c;var _=r=1/(3*r);n.localCOMx*=_,n.localCOMy*=_}}null!=i.wrap_localCOM&&(i.wrap_localCOM.zpp_inner.x=i.localCOMx,i.wrap_localCOM.zpp_inner.y=i.localCOMy)}var y=i.body;y.zip_axis&&(y.zip_axis=!1,y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot)),i.worldCOMx=i.body.posx+(i.body.axisy*i.localCOMx-i.body.axisx*i.localCOMy),i.worldCOMy=i.body.posy+(i.localCOMx*i.body.axisx+i.localCOMy*i.body.axisy)}var x=i.radius,m=i.radius;i.aabb.minx=i.worldCOMx-x,i.aabb.miny=i.worldCOMy-m,i.aabb.maxx=i.worldCOMx+x,i.aabb.maxy=i.worldCOMy+m}else{var g=t.polygon;if(g.zip_gverts&&null!=g.body){g.zip_gverts=!1,g.validate_lverts();var f=g.body;f.zip_axis&&(f.zip_axis=!1,f.axisx=Math.sin(f.rot),f.axisy=Math.cos(f.rot));for(var v=g.lverts.next,z=g.gverts.next;null!=z;){var w=z,b=v;v=v.next,w.x=g.body.posx+(g.body.axisy*b.x-g.body.axisx*b.y),w.y=g.body.posy+(b.x*g.body.axisx+b.y*g.body.axisy),z=z.next}}var S=g.gverts.next;g.aabb.minx=S.x,g.aabb.miny=S.y,g.aabb.maxx=S.x,g.aabb.maxy=S.y;for(var C=g.gverts.next.next;null!=C;){var M=C;M.x<g.aabb.minx&&(g.aabb.minx=M.x),M.x>g.aabb.maxx&&(g.aabb.maxx=M.x),M.y<g.aabb.miny&&(g.aabb.miny=M.y),M.y>g.aabb.maxy&&(g.aabb.maxy=M.y),C=C.next}}var P=this.aabb,k=t.aabb;k.minx<P.minx&&(P.minx=k.minx),k.maxx>P.maxx&&(P.maxx=k.maxx),k.miny<P.miny&&(P.miny=k.miny),k.maxy>P.maxy&&(P.maxy=k.maxy),e=e.next}}},Xt.prototype.invalidate_aabb=function(){this.zip_aabb=!0},Xt.prototype.localCOMx=null,Xt.prototype.localCOMy=null,Xt.prototype.zip_localCOM=null,Xt.prototype.worldCOMx=null,Xt.prototype.worldCOMy=null,Xt.prototype.zip_worldCOM=null,Xt.prototype.wrap_localCOM=null,Xt.prototype.wrap_worldCOM=null,Xt.prototype.invalidate_localCOM=function(){this.zip_localCOM=!0,this.zip_worldCOM=!0},Xt.prototype.invalidate_worldCOM=function(){this.zip_worldCOM=!0},Xt.prototype.validate_localCOM=function(){if(this.zip_localCOM){this.zip_localCOM=!1;for(var e=0,t=0,i=0,n=this.shapes.head;null!=n;){var r=n.elt;if(r.zip_localCOM){if(r.zip_localCOM=!1,1==r.type){var o=r.polygon;if(null==o.lverts.next.next)o.localCOMx=o.lverts.next.x,o.localCOMy=o.lverts.next.y;else if(null==o.lverts.next.next.next)o.localCOMx=o.lverts.next.x,o.localCOMy=o.lverts.next.y,o.localCOMx+=o.lverts.next.next.x,o.localCOMy+=o.lverts.next.next.y,o.localCOMx*=.5,o.localCOMy*=.5;else{o.localCOMx=0;var a=o.localCOMy=0,s=o.lverts.next,p=s,l=s=s.next;for(s=s.next;null!=s;){var h=s;a+=l.x*(h.y-p.y);var u=h.y*l.x-h.x*l.y;o.localCOMx+=(l.x+h.x)*u,o.localCOMy+=(l.y+h.y)*u,p=l,l=h,s=s.next}var d=s=o.lverts.next;a+=l.x*(d.y-p.y);var c=d.y*l.x-d.x*l.y;o.localCOMx+=(l.x+d.x)*c,o.localCOMy+=(l.y+d.y)*c,p=l;var _=s=s.next;a+=d.x*(_.y-p.y);var y=_.y*d.x-_.x*d.y;o.localCOMx+=(d.x+_.x)*y,o.localCOMy+=(d.y+_.y)*y;var x=a=1/(3*a);o.localCOMx*=x,o.localCOMy*=x}}null!=r.wrap_localCOM&&(r.wrap_localCOM.zpp_inner.x=r.localCOMx,r.wrap_localCOM.zpp_inner.y=r.localCOMy)}r.validate_area_inertia();var m=r.area*r.material.density;e+=r.localCOMx*m,t+=r.localCOMy*m,i+=r.area*r.material.density,n=n.next}if(0!=i){var g=1/i;this.localCOMx=e*g,this.localCOMy=t*g}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy),this.zip_mass&&0==this.massMode&&(this.zip_mass=!1,this.cmass=i,2==this.type?(this.mass=this.cmass,this.imass=this.smass=1/this.mass):(this.mass=1/0,this.imass=this.smass=0))}},Xt.prototype.validate_worldCOM=function(){this.zip_worldCOM&&(this.zip_worldCOM=!1,this.validate_localCOM(),this.zip_axis&&(this.zip_axis=!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot)),this.worldCOMx=this.posx+(this.axisy*this.localCOMx-this.axisx*this.localCOMy),this.worldCOMy=this.posy+(this.localCOMx*this.axisx+this.localCOMy*this.axisy),null!=this.wrap_worldCOM&&(this.wrap_worldCOM.zpp_inner.x=this.worldCOMx,this.wrap_worldCOM.zpp_inner.y=this.worldCOMy))},Xt.prototype.getlocalCOM=function(){this.validate_localCOM()},Xt.prototype.getworldCOM=function(){this.validate_worldCOM()},Xt.prototype.__immutable_midstep=function(e){},Xt.prototype.clear=function(){for(;null!=this.shapes.head;){var e=this.shapes.pop_unsafe();e.removedFromBody(),e.body=null}this.invalidate_shapes(),this.pre_posx=0,this.pre_posy=0,this.posx=0,this.posy=0,this.velx=0,this.vely=0,this.forcex=0,this.forcey=0,this.kinvelx=0,this.kinvely=0,this.svelx=0,this.svely=0,this.angvel=this.torque=this.kinangvel=this.pre_rot=this.rot=0;for(var t=this.shapes.head;null!=t;){var i=t.elt;1==i.type&&(i.polygon.invalidate_gverts(),i.polygon.invalidate_gaxi()),i.invalidate_worldCOM(),t=t.next}this.zip_worldCOM=!0,this.zip_axis=!0;for(var n=this.shapes.head;null!=n;){var r=n.elt;1==r.type&&(r.polygon.invalidate_gverts(),r.polygon.invalidate_gaxi()),r.invalidate_worldCOM(),n=n.next}this.zip_worldCOM=!0,this.axisx=0,this.axisy=1,this.zip_axis=!1,this.massMode=0,this.gravMassMode=0,this.gravMassScale=1,this.inertiaMode=0,this.norotate=!1,this.nomove=!1},Xt.prototype.aabb_validate=function(){if(this.zip_aabb){this.zip_aabb=!1,this.aabb.minx=1/0,this.aabb.miny=1/0,this.aabb.maxx=-1/0,this.aabb.maxy=-1/0;for(var e=this.shapes.head;null!=e;){var t=e.elt;if(t.zip_aabb&&null!=t.body)if(t.zip_aabb=!1,0==t.type){var i=t.circle;if(i.zip_worldCOM&&null!=i.body){if(i.zip_worldCOM=!1,i.zip_localCOM){if(i.zip_localCOM=!1,1==i.type){var n=i.polygon;if(null==n.lverts.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y;else if(null==n.lverts.next.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y,n.localCOMx+=n.lverts.next.next.x,n.localCOMy+=n.lverts.next.next.y,n.localCOMx*=.5,n.localCOMy*=.5;else{n.localCOMx=0;var r=n.localCOMy=0,o=n.lverts.next,a=o,s=o=o.next;for(o=o.next;null!=o;){var p=o;r+=s.x*(p.y-a.y);var l=p.y*s.x-p.x*s.y;n.localCOMx+=(s.x+p.x)*l,n.localCOMy+=(s.y+p.y)*l,a=s,s=p,o=o.next}var h=o=n.lverts.next;r+=s.x*(h.y-a.y);var u=h.y*s.x-h.x*s.y;n.localCOMx+=(s.x+h.x)*u,n.localCOMy+=(s.y+h.y)*u,a=s;var d=o=o.next;r+=h.x*(d.y-a.y);var c=d.y*h.x-d.x*h.y;n.localCOMx+=(h.x+d.x)*c,n.localCOMy+=(h.y+d.y)*c;var _=r=1/(3*r);n.localCOMx*=_,n.localCOMy*=_}}null!=i.wrap_localCOM&&(i.wrap_localCOM.zpp_inner.x=i.localCOMx,i.wrap_localCOM.zpp_inner.y=i.localCOMy)}var y=i.body;y.zip_axis&&(y.zip_axis=!1,y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot)),i.worldCOMx=i.body.posx+(i.body.axisy*i.localCOMx-i.body.axisx*i.localCOMy),i.worldCOMy=i.body.posy+(i.localCOMx*i.body.axisx+i.localCOMy*i.body.axisy)}var x=i.radius,m=i.radius;i.aabb.minx=i.worldCOMx-x,i.aabb.miny=i.worldCOMy-m,i.aabb.maxx=i.worldCOMx+x,i.aabb.maxy=i.worldCOMy+m}else{var g=t.polygon;if(g.zip_gverts&&null!=g.body){g.zip_gverts=!1,g.validate_lverts();var f=g.body;f.zip_axis&&(f.zip_axis=!1,f.axisx=Math.sin(f.rot),f.axisy=Math.cos(f.rot));for(var v=g.lverts.next,z=g.gverts.next;null!=z;){var w=z,b=v;v=v.next,w.x=g.body.posx+(g.body.axisy*b.x-g.body.axisx*b.y),w.y=g.body.posy+(b.x*g.body.axisx+b.y*g.body.axisy),z=z.next}}var S=g.gverts.next;g.aabb.minx=S.x,g.aabb.miny=S.y,g.aabb.maxx=S.x,g.aabb.maxy=S.y;for(var C=g.gverts.next.next;null!=C;){var M=C;M.x<g.aabb.minx&&(g.aabb.minx=M.x),M.x>g.aabb.maxx&&(g.aabb.maxx=M.x),M.y<g.aabb.miny&&(g.aabb.miny=M.y),M.y>g.aabb.maxy&&(g.aabb.maxy=M.y),C=C.next}}var P=this.aabb,k=t.aabb;k.minx<P.minx&&(P.minx=k.minx),k.maxx>P.maxx&&(P.maxx=k.maxx),k.miny<P.miny&&(P.miny=k.miny),k.maxy>P.maxy&&(P.maxy=k.maxy),e=e.next}}},Xt.prototype.shapes_adder=function(e){if(e.zpp_inner.body==this)return!1;if(null!=e.zpp_inner.body&&e.zpp_inner.body.wrap_shapes.remove(e),e.zpp_inner.body=this,e.zpp_inner.addedToBody(),null!=this.space){var t=this.space,i=e.zpp_inner,n=i.body;n.world||(n.component.waket=t.stamp+(t.midstep?0:1),3==n.type&&(n.kinematicDelaySleep=!0),n.component.sleeping&&t.really_wake(n,!1)),t.bphase.insert(i),i.addedToSpace()}return 1==e.zpp_inner.type&&(e.zpp_inner.polygon.invalidate_gaxi(),e.zpp_inner.polygon.invalidate_gverts()),!0},Xt.prototype.shapes_subber=function(e){null!=this.space&&this.space.removed_shape(e.zpp_inner),e.zpp_inner.body=null,e.zpp_inner.removedFromBody()},Xt.prototype.shapes_invalidate=function(e){this.invalidate_shapes()},Xt.prototype.addedToSpace=function(){null==oi.zpp_pool?this.component=new oi:(this.component=oi.zpp_pool,oi.zpp_pool=this.component.next,this.component.next=null),this.component.isBody=!0,(this.component.body=this).__iaddedToSpace()},Xt.prototype.removedFromSpace=function(){for(;null!=this.arbiters.head;){var e=this.arbiters.pop_unsafe();if(e.cleared=!0,e.b2==this)for(var t=e.b1.arbiters,i=null,n=t.head;null!=n;){if(n.elt==e){var r,o;null==i?(o=(r=t.head).next,t.head=o,null==t.head&&(t.pushmod=!0)):(o=(r=i.next).next,null==(i.next=o)&&(t.pushmod=!0));var a=r;a.elt=null,a.next=Ko.zpp_pool,Ko.zpp_pool=a,t.modified=!0,t.length--,t.pushmod=!0;break}n=(i=n).next}if(e.b1==this)for(var s=e.b2.arbiters,p=null,l=s.head;null!=l;){if(l.elt==e){var h,u;null==p?(u=(h=s.head).next,s.head=u,null==s.head&&(s.pushmod=!0)):(u=(h=p.next).next,null==(p.next=u)&&(s.pushmod=!0));var d=h;d.elt=null,d.next=Ko.zpp_pool,Ko.zpp_pool=d,s.modified=!0,s.length--,s.pushmod=!0;break}l=(p=l).next}null!=e.pair&&(e.pair.arb=null,e.pair=null),e.active=!1,this.space.f_arbiters.modified=!0}var c=this.component;c.body=null,c.constraint=null,c.next=oi.zpp_pool,oi.zpp_pool=c,this.component=null,this.__iremovedFromSpace()},Xt.prototype.copy=function(){var e=(new re).zpp_inner;e.type=this.type,e.bulletEnabled=this.bulletEnabled,e.disableCCD=this.disableCCD;for(var t=this.shapes.head;null!=t;){var i=e.outer.zpp_inner.wrap_shapes,n=t.elt.outer.copy();i.zpp_inner.reverse_flag?i.push(n):i.unshift(n),t=t.next}if(e.posx=this.posx,e.posy=this.posy,e.velx=this.velx,e.vely=this.vely,e.forcex=this.forcex,e.forcey=this.forcey,e.rot=this.rot,e.angvel=this.angvel,e.torque=this.torque,e.kinvelx=this.kinvelx,e.kinvely=this.kinvely,e.kinangvel=this.kinangvel,e.svelx=this.svelx,e.svely=this.svely,this.zip_axis){e.zip_axis=!0;for(var r=e.shapes.head;null!=r;){var o=r.elt;1==o.type&&(o.polygon.invalidate_gverts(),o.polygon.invalidate_gaxi()),o.invalidate_worldCOM(),r=r.next}e.zip_worldCOM=!0}else e.axisx=this.axisx,e.axisy=this.axisy;return e.rot=this.rot,e.massMode=this.massMode,e.gravMassMode=this.gravMassMode,e.inertiaMode=this.inertiaMode,e.norotate=this.norotate,e.nomove=this.nomove,e.cmass=this.cmass,e.cinertia=this.cinertia,this.zip_mass?e.invalidate_mass():e.mass=this.mass,this.zip_gravMass?e.invalidate_gravMass():e.gravMass=this.gravMass,this.zip_gravMassScale?e.invalidate_gravMassScale():e.gravMassScale=this.gravMassScale,this.zip_inertia?e.invalidate_inertia():e.inertia=this.inertia,this.zip_aabb?e.zip_aabb=!0:(e.aabb.minx=this.aabb.minx,e.aabb.miny=this.aabb.miny,e.aabb.maxx=this.aabb.maxx,e.aabb.maxy=this.aabb.maxy),this.zip_localCOM?(e.zip_localCOM=!0,e.zip_worldCOM=!0):(e.localCOMx=this.localCOMx,e.localCOMy=this.localCOMy),this.zip_worldCOM?e.zip_worldCOM=!0:(e.worldCOMx=this.worldCOMx,e.worldCOMy=this.worldCOMy),this.copyto(e.outer),e.outer},Xt.prototype.__class__=Xt;var Yt=zpp_nape.phys.ZPP_Compound=function(){this.space=null,this.compound=null,this.depth=0,this.wrap_compounds=null,this.wrap_constraints=null,this.wrap_bodies=null,this.compounds=null,this.constraints=null,this.bodies=null,this.outer=null,Xo.call(this),(this.icompound=this).depth=1,this.bodies=new mi,this.wrap_bodies=gn.get(this.bodies),this.wrap_bodies.zpp_inner.adder=$(this,this.bodies_adder),this.wrap_bodies.zpp_inner.subber=$(this,this.bodies_subber),this.constraints=new Ee,this.wrap_constraints=mn.get(this.constraints),this.wrap_constraints.zpp_inner.adder=$(this,this.constraints_adder),this.wrap_constraints.zpp_inner.subber=$(this,this.constraints_subber),this.compounds=new gi,this.wrap_compounds=vn.get(this.compounds),this.wrap_compounds.zpp_inner.adder=$(this,this.compounds_adder),this.wrap_compounds.zpp_inner.subber=$(this,this.compounds_subber)};Yt.__name__=["zpp_nape","phys","ZPP_Compound"],Yt.__super__=Xo,Yt.prototype=Object.create(Xo.prototype),Yt.prototype.outer=null,Yt.prototype.bodies=null,Yt.prototype.constraints=null,Yt.prototype.compounds=null,Yt.prototype.wrap_bodies=null,Yt.prototype.wrap_constraints=null,Yt.prototype.wrap_compounds=null,Yt.prototype.depth=null,Yt.prototype.compound=null,Yt.prototype.space=null,Yt.prototype.__imutable_midstep=function(e){},Yt.prototype.addedToSpace=function(){this.__iaddedToSpace()},Yt.prototype.removedFromSpace=function(){this.__iremovedFromSpace()},Yt.prototype.breakApart=function(){for(null!=this.space&&(this.__iremovedFromSpace(),this.space.nullInteractorType(this)),null!=this.compound?this.compound.compounds.remove(this):null!=this.space&&this.space.compounds.remove(this);null!=this.bodies.head;){var e=this.bodies.pop_unsafe();null!=(e.compound=this.compound)?this.compound.bodies.add(e):null!=this.space&&this.space.bodies.add(e),null!=this.space&&this.space.freshInteractorType(e)}for(;null!=this.constraints.head;){var t=this.constraints.pop_unsafe();null!=(t.compound=this.compound)?this.compound.constraints.add(t):null!=this.space&&this.space.constraints.add(t)}for(;null!=this.compounds.head;){var i=this.compounds.pop_unsafe();null!=(i.compound=this.compound)?this.compound.compounds.add(i):null!=this.space&&this.space.compounds.add(i),null!=this.space&&this.space.freshInteractorType(i)}this.compound=null,this.space=null},Yt.prototype.bodies_adder=function(e){return e.zpp_inner.compound!=this&&(null!=e.zpp_inner.compound?e.zpp_inner.compound.wrap_bodies.remove(e):null!=e.zpp_inner.space&&e.zpp_inner.space.wrap_bodies.remove(e),null!=(e.zpp_inner.compound=this).space&&this.space.addBody(e.zpp_inner),!0)},Yt.prototype.bodies_subber=function(e){(e.zpp_inner.compound=null)!=this.space&&this.space.remBody(e.zpp_inner)},Yt.prototype.constraints_adder=function(e){return e.zpp_inner.compound!=this&&(null!=e.zpp_inner.compound?e.zpp_inner.compound.wrap_constraints.remove(e):null!=e.zpp_inner.space&&e.zpp_inner.space.wrap_constraints.remove(e),null!=(e.zpp_inner.compound=this).space&&this.space.addConstraint(e.zpp_inner),!0)},Yt.prototype.constraints_subber=function(e){(e.zpp_inner.compound=null)!=this.space&&this.space.remConstraint(e.zpp_inner)},Yt.prototype.compounds_adder=function(e){return e.zpp_inner.compound!=this&&(null!=e.zpp_inner.compound?e.zpp_inner.compound.wrap_compounds.remove(e):null!=e.zpp_inner.space&&e.zpp_inner.space.wrap_compounds.remove(e),e.zpp_inner.compound=this,e.zpp_inner.depth=this.depth+1,null!=this.space&&this.space.addCompound(e.zpp_inner),!0)},Yt.prototype.compounds_subber=function(e){e.zpp_inner.compound=null,e.zpp_inner.depth=1,null!=this.space&&this.space.remCompound(e.zpp_inner)},Yt.prototype.copy=function(e,t){var i=null==e;null==e&&(e=[]),null==t&&(t=[]);for(var n=new ie,r=this.compounds.head;null!=r;){var o=r.elt.copy(e,t);if(o.zpp_inner.immutable_midstep("Compound::compound"),(null==o.zpp_inner.compound?null:o.zpp_inner.compound.outer)!=n&&(null!=(null==o.zpp_inner.compound?null:o.zpp_inner.compound.outer)&&(null==o.zpp_inner.compound?null:o.zpp_inner.compound.outer).zpp_inner.wrap_compounds.remove(o),null!=n)){var a=n.zpp_inner.wrap_compounds;a.zpp_inner.reverse_flag?a.push(o):a.unshift(o)}r=r.next}for(var s=this.bodies.head;null!=s;){var p=s.elt,l=p.outer.copy();if(e.push(rt.dict(p.id,l)),(null==l.zpp_inner.compound?null:l.zpp_inner.compound.outer)!=n&&(null!=(null==l.zpp_inner.compound?null:l.zpp_inner.compound.outer)&&(null==l.zpp_inner.compound?null:l.zpp_inner.compound.outer).zpp_inner.wrap_bodies.remove(l),null!=n)){var h=n.zpp_inner.wrap_bodies;h.zpp_inner.reverse_flag?h.push(l):h.unshift(l)}s=s.next}for(var u=this.constraints.head;null!=u;){var d=u.elt.copy(e,t);if((null==d.zpp_inner.compound?null:d.zpp_inner.compound.outer)!=n&&(null!=(null==d.zpp_inner.compound?null:d.zpp_inner.compound.outer)&&(null==d.zpp_inner.compound?null:d.zpp_inner.compound.outer).zpp_inner.wrap_constraints.remove(d),null!=n)){var c=n.zpp_inner.wrap_constraints;c.zpp_inner.reverse_flag?c.push(d):c.unshift(d)}u=u.next}if(i)for(;0<t.length;)for(var _=t.pop(),y=0;y<e.length;){var x=e[y];if(++y,x.id==_.id){_.cb(x.bc);break}}return this.copyto(n),n},Yt.prototype.__class__=Yt;var Kt=zpp_nape.phys.ZPP_FluidProperties=function(){this.wrap_gravity=null,this.gravityy=0,this.gravityx=0,this.density=0,this.viscosity=0,this.wrap_shapes=null,this.shapes=null,this.outer=null,this.userData=null,this.next=null,this.shapes=new xi,this.density=this.viscosity=1,this.wrap_gravity=null,this.gravityx=0,this.gravityy=0};Kt.__name__=["zpp_nape","phys","ZPP_FluidProperties"],Kt.prototype.next=null,Kt.prototype.userData=null,Kt.prototype.outer=null,Kt.prototype.wrapper=function(){if(null==this.outer){this.outer=new se;var e=this.outer.zpp_inner;e.outer=null,e.next=Kt.zpp_pool,Kt.zpp_pool=e,this.outer.zpp_inner=this}return this.outer},Kt.prototype.free=function(){this.outer=null},Kt.prototype.alloc=function(){},Kt.prototype.shapes=null,Kt.prototype.wrap_shapes=null,Kt.prototype.feature_cons=function(){this.shapes=new xi},Kt.prototype.addShape=function(e){this.shapes.add(e)},Kt.prototype.remShape=function(e){this.shapes.remove(e)},Kt.prototype.copy=function(){var e;return null==Kt.zpp_pool?e=new Kt:(e=Kt.zpp_pool,Kt.zpp_pool=e.next,e.next=null),e.viscosity=this.viscosity,e.density=this.density,e},Kt.prototype.viscosity=null,Kt.prototype.density=null,Kt.prototype.gravityx=null,Kt.prototype.gravityy=null,Kt.prototype.wrap_gravity=null,Kt.prototype.gravity_invalidate=function(e){this.gravityx=e.x,this.gravityy=e.y,this.invalidate()},Kt.prototype.gravity_validate=function(){this.wrap_gravity.zpp_inner.x=this.gravityx,this.wrap_gravity.zpp_inner.y=this.gravityy},Kt.prototype.getgravity=function(){var e,t=this.gravityx,i=this.gravityy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_gravity=e,this.wrap_gravity.zpp_inner._inuse=!0,this.wrap_gravity.zpp_inner._invalidate=$(this,this.gravity_invalidate),this.wrap_gravity.zpp_inner._validate=$(this,this.gravity_validate)},Kt.prototype.invalidate=function(){for(var e=this.shapes.head;null!=e;)e.elt.invalidate_fluidprops(),e=e.next},Kt.prototype.__class__=Kt;var Zt=zpp_nape.phys.ZPP_Material=function(){this.rollingFriction=0,this.elasticity=0,this.density=0,this.staticFriction=0,this.dynamicFriction=0,this.wrap_shapes=null,this.shapes=null,this.outer=null,this.userData=null,this.next=null,this.shapes=new xi,this.elasticity=0,this.dynamicFriction=1,this.staticFriction=2,this.density=.001,this.rollingFriction=.01};Zt.__name__=["zpp_nape","phys","ZPP_Material"],Zt.prototype.next=null,Zt.prototype.userData=null,Zt.prototype.outer=null,Zt.prototype.wrapper=function(){if(null==this.outer){this.outer=new de;var e=this.outer.zpp_inner;e.outer=null,e.next=Zt.zpp_pool,Zt.zpp_pool=e,this.outer.zpp_inner=this}return this.outer},Zt.prototype.free=function(){this.outer=null},Zt.prototype.alloc=function(){},Zt.prototype.shapes=null,Zt.prototype.wrap_shapes=null,Zt.prototype.feature_cons=function(){this.shapes=new xi},Zt.prototype.addShape=function(e){this.shapes.add(e)},Zt.prototype.remShape=function(e){this.shapes.remove(e)},Zt.prototype.dynamicFriction=null,Zt.prototype.staticFriction=null,Zt.prototype.density=null,Zt.prototype.elasticity=null,Zt.prototype.rollingFriction=null,Zt.prototype.copy=function(){var e=new Zt;return e.dynamicFriction=this.dynamicFriction,e.staticFriction=this.staticFriction,e.density=this.density,e.elasticity=this.elasticity,e.rollingFriction=this.rollingFriction,e},Zt.prototype.set=function(e){this.dynamicFriction=e.dynamicFriction,this.staticFriction=e.staticFriction,this.density=e.density,this.elasticity=e.elasticity,this.rollingFriction=e.rollingFriction},Zt.prototype.invalidate=function(e){for(var t=this.shapes.head;null!=t;)t.elt.invalidate_material(e),t=t.next},Zt.prototype.__class__=Zt;var Jt=zpp_nape.shape.ZPP_Shape=function(e){var t;this.zip_aabb=!1,this.aabb=null,this.pairs=null,this.node=null,this.sweep=null,this.sensorEnabled=!1,this.fluidEnabled=!1,this.fluidProperties=null,this.filter=null,this.material=null,this.refmaterial=null,this.polygon=null,this.circle=null,this.sweepCoef=0,this.zip_sweepRadius=!1,this.sweepRadius=0,this.wrap_worldCOM=null,this.wrap_localCOM=null,this.zip_worldCOM=!1,this.worldCOMy=0,this.worldCOMx=0,this.zip_localCOM=!1,this.localCOMy=0,this.localCOMx=0,this.zip_angDrag=!1,this.angDrag=0,this.inertia=0,this.zip_area_inertia=!1,this.area=0,this.type=0,this.body=null,this.outer=null,Xo.call(this),this.pairs=new Pi,(this.ishape=this).type=e,null==Oo.zpp_pool?t=new Oo:(t=Oo.zpp_pool,Oo.zpp_pool=t.next,t.next=null),t.minx=0,t.miny=0,t.maxx=0,t.maxy=0,this.aabb=t,this.aabb._immutable=!0,this.aabb._validate=$(this,this.aabb_validate),this.zip_area_inertia=this.zip_angDrag=this.zip_localCOM=this.zip_sweepRadius=!0,this.localCOMx=0,this.localCOMy=0,this.worldCOMx=0,this.worldCOMy=0,this.fluidEnabled=!1,this.sensorEnabled=!1,this.fluidProperties=null,this.body=null,this.refmaterial=new Zt,this.sweepRadius=this.sweepCoef=0};Jt.__name__=["zpp_nape","shape","ZPP_Shape"],Jt.__super__=Xo,Jt.prototype=Object.create(Xo.prototype),Jt.prototype.outer=null,Jt.prototype.body=null,Jt.prototype.type=null,Jt.prototype.isCircle=function(){return 0==this.type},Jt.prototype.isPolygon=function(){return 1==this.type},Jt.prototype.area=null,Jt.prototype.zip_area_inertia=null,Jt.prototype.inertia=null,Jt.prototype.angDrag=null,Jt.prototype.zip_angDrag=null,Jt.prototype.localCOMx=null,Jt.prototype.localCOMy=null,Jt.prototype.zip_localCOM=null,Jt.prototype.worldCOMx=null,Jt.prototype.worldCOMy=null,Jt.prototype.zip_worldCOM=null,Jt.prototype.wrap_localCOM=null,Jt.prototype.wrap_worldCOM=null,Jt.prototype.sweepRadius=null,Jt.prototype.zip_sweepRadius=null,Jt.prototype.sweepCoef=null,Jt.prototype.invalidate_sweepRadius=function(){this.zip_sweepRadius=!0},Jt.prototype.validate_sweepRadius=function(){this.zip_sweepRadius&&(this.zip_sweepRadius=!1,0==this.type?this.circle.__validate_sweepRadius():this.polygon.__validate_sweepRadius())},Jt.prototype.circle=null,Jt.prototype.polygon=null,Jt.prototype.refmaterial=null,Jt.prototype.material=null,Jt.prototype.filter=null,Jt.prototype.fluidProperties=null,Jt.prototype.fluidEnabled=null,Jt.prototype.sensorEnabled=null,Jt.prototype.sweep=null,Jt.prototype.node=null,Jt.prototype.pairs=null,Jt.prototype.clear=function(){0==this.type?this.circle.__clear():this.polygon.__clear()},Jt.prototype.aabb=null,Jt.prototype.zip_aabb=null,Jt.prototype.validate_aabb=function(){if(this.zip_aabb&&null!=this.body)if(this.zip_aabb=!1,0==this.type){var e=this.circle;if(e.zip_worldCOM&&null!=e.body){if(e.zip_worldCOM=!1,e.zip_localCOM){if(e.zip_localCOM=!1,1==e.type){var t=e.polygon;if(null==t.lverts.next.next)t.localCOMx=t.lverts.next.x,t.localCOMy=t.lverts.next.y;else if(null==t.lverts.next.next.next)t.localCOMx=t.lverts.next.x,t.localCOMy=t.lverts.next.y,t.localCOMx+=t.lverts.next.next.x,t.localCOMy+=t.lverts.next.next.y,t.localCOMx*=.5,t.localCOMy*=.5;else{t.localCOMx=0;var i=t.localCOMy=0,n=t.lverts.next,r=n,o=n=n.next;for(n=n.next;null!=n;){var a=n;i+=o.x*(a.y-r.y);var s=a.y*o.x-a.x*o.y;t.localCOMx+=(o.x+a.x)*s,t.localCOMy+=(o.y+a.y)*s,r=o,o=a,n=n.next}var p=n=t.lverts.next;i+=o.x*(p.y-r.y);var l=p.y*o.x-p.x*o.y;t.localCOMx+=(o.x+p.x)*l,t.localCOMy+=(o.y+p.y)*l,r=o;var h=n=n.next;i+=p.x*(h.y-r.y);var u=h.y*p.x-h.x*p.y;t.localCOMx+=(p.x+h.x)*u,t.localCOMy+=(p.y+h.y)*u;var d=i=1/(3*i);t.localCOMx*=d,t.localCOMy*=d}}null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy)}var c=e.body;c.zip_axis&&(c.zip_axis=!1,c.axisx=Math.sin(c.rot),c.axisy=Math.cos(c.rot)),e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy),e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy)}var _=e.radius,y=e.radius;e.aabb.minx=e.worldCOMx-_,e.aabb.miny=e.worldCOMy-y,e.aabb.maxx=e.worldCOMx+_,e.aabb.maxy=e.worldCOMy+y}else{var x=this.polygon;if(x.zip_gverts&&null!=x.body){x.zip_gverts=!1,x.validate_lverts();var m=x.body;m.zip_axis&&(m.zip_axis=!1,m.axisx=Math.sin(m.rot),m.axisy=Math.cos(m.rot));for(var g=x.lverts.next,f=x.gverts.next;null!=f;){var v=f,z=g;g=g.next,v.x=x.body.posx+(x.body.axisy*z.x-x.body.axisx*z.y),v.y=x.body.posy+(z.x*x.body.axisx+z.y*x.body.axisy),f=f.next}}var w=x.gverts.next;x.aabb.minx=w.x,x.aabb.miny=w.y,x.aabb.maxx=w.x,x.aabb.maxy=w.y;for(var b=x.gverts.next.next;null!=b;){var S=b;S.x<x.aabb.minx&&(x.aabb.minx=S.x),S.x>x.aabb.maxx&&(x.aabb.maxx=S.x),S.y<x.aabb.miny&&(x.aabb.miny=S.y),S.y>x.aabb.maxy&&(x.aabb.maxy=S.y),b=b.next}}},Jt.prototype.force_validate_aabb=function(){if(0==this.type){var e=this.circle;e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy),e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy),e.aabb.minx=e.worldCOMx-e.radius,e.aabb.miny=e.worldCOMy-e.radius,e.aabb.maxx=e.worldCOMx+e.radius,e.aabb.maxy=e.worldCOMy+e.radius}else{var t=this.polygon,i=t.lverts.next,n=t.gverts.next,r=i;i=i.next,n.x=t.body.posx+(t.body.axisy*r.x-t.body.axisx*r.y),n.y=t.body.posy+(r.x*t.body.axisx+r.y*t.body.axisy),t.aabb.minx=n.x,t.aabb.miny=n.y,t.aabb.maxx=n.x,t.aabb.maxy=n.y;for(var o=t.gverts.next.next;null!=o;){var a=o,s=i;i=i.next,a.x=t.body.posx+(t.body.axisy*s.x-t.body.axisx*s.y),a.y=t.body.posy+(s.x*t.body.axisx+s.y*t.body.axisy),a.x<t.aabb.minx&&(t.aabb.minx=a.x),a.x>t.aabb.maxx&&(t.aabb.maxx=a.x),a.y<t.aabb.miny&&(t.aabb.miny=a.y),a.y>t.aabb.maxy&&(t.aabb.maxy=a.y),o=o.next}}},Jt.prototype.invalidate_aabb=function(){this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0)},Jt.prototype.validate_area_inertia=function(){this.zip_area_inertia&&(this.zip_area_inertia=!1,0==this.type?this.circle.__validate_area_inertia():this.polygon.__validate_area_inertia())},Jt.prototype.validate_angDrag=function(){(this.zip_angDrag||this.refmaterial.dynamicFriction!=this.material.dynamicFriction)&&(this.zip_angDrag=!1,this.refmaterial.dynamicFriction=this.material.dynamicFriction,0==this.type?this.circle.__validate_angDrag():this.polygon.__validate_angDrag())},Jt.prototype.validate_localCOM=function(){if(this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var e=this.polygon;if(null==e.lverts.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y;else if(null==e.lverts.next.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y,e.localCOMx+=e.lverts.next.next.x,e.localCOMy+=e.lverts.next.next.y,e.localCOMx*=.5,e.localCOMy*=.5;else{e.localCOMx=0;var t=e.localCOMy=0,i=e.lverts.next,n=i,r=i=i.next;for(i=i.next;null!=i;){var o=i;t+=r.x*(o.y-n.y);var a=o.y*r.x-o.x*r.y;e.localCOMx+=(r.x+o.x)*a,e.localCOMy+=(r.y+o.y)*a,n=r,r=o,i=i.next}var s=i=e.lverts.next;t+=r.x*(s.y-n.y);var p=s.y*r.x-s.x*r.y;e.localCOMx+=(r.x+s.x)*p,e.localCOMy+=(r.y+s.y)*p,n=r;var l=i=i.next;t+=s.x*(l.y-n.y);var h=l.y*s.x-l.x*s.y;e.localCOMx+=(s.x+l.x)*h,e.localCOMy+=(s.y+l.y)*h;var u=t=1/(3*t);e.localCOMx*=u,e.localCOMy*=u}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}},Jt.prototype.validate_worldCOM=function(){if(this.zip_worldCOM&&null!=this.body){if(this.zip_worldCOM=!1,this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var e=this.polygon;if(null==e.lverts.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y;else if(null==e.lverts.next.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y,e.localCOMx+=e.lverts.next.next.x,e.localCOMy+=e.lverts.next.next.y,e.localCOMx*=.5,e.localCOMy*=.5;else{e.localCOMx=0;var t=e.localCOMy=0,i=e.lverts.next,n=i,r=i=i.next;for(i=i.next;null!=i;){var o=i;t+=r.x*(o.y-n.y);var a=o.y*r.x-o.x*r.y;e.localCOMx+=(r.x+o.x)*a,e.localCOMy+=(r.y+o.y)*a,n=r,r=o,i=i.next}var s=i=e.lverts.next;t+=r.x*(s.y-n.y);var p=s.y*r.x-s.x*r.y;e.localCOMx+=(r.x+s.x)*p,e.localCOMy+=(r.y+s.y)*p,n=r;var l=i=i.next;t+=s.x*(l.y-n.y);var h=l.y*s.x-l.x*s.y;e.localCOMx+=(s.x+l.x)*h,e.localCOMy+=(s.y+l.y)*h;var u=t=1/(3*t);e.localCOMx*=u,e.localCOMy*=u}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}var d=this.body;d.zip_axis&&(d.zip_axis=!1,d.axisx=Math.sin(d.rot),d.axisy=Math.cos(d.rot)),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy)}},Jt.prototype.getworldCOM=function(){if(this.zip_worldCOM&&null!=this.body){if(this.zip_worldCOM=!1,this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var e=this.polygon;if(null==e.lverts.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y;else if(null==e.lverts.next.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y,e.localCOMx+=e.lverts.next.next.x,e.localCOMy+=e.lverts.next.next.y,e.localCOMx*=.5,e.localCOMy*=.5;else{e.localCOMx=0;var t=e.localCOMy=0,i=e.lverts.next,n=i,r=i=i.next;for(i=i.next;null!=i;){var o=i;t+=r.x*(o.y-n.y);var a=o.y*r.x-o.x*r.y;e.localCOMx+=(r.x+o.x)*a,e.localCOMy+=(r.y+o.y)*a,n=r,r=o,i=i.next}var s=i=e.lverts.next;t+=r.x*(s.y-n.y);var p=s.y*r.x-s.x*r.y;e.localCOMx+=(r.x+s.x)*p,e.localCOMy+=(r.y+s.y)*p,n=r;var l=i=i.next;t+=s.x*(l.y-n.y);var h=l.y*s.x-l.x*s.y;e.localCOMx+=(s.x+l.x)*h,e.localCOMy+=(s.y+l.y)*h;var u=t=1/(3*t);e.localCOMx*=u,e.localCOMy*=u}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}var d=this.body;d.zip_axis&&(d.zip_axis=!1,d.axisx=Math.sin(d.rot),d.axisy=Math.cos(d.rot)),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy)}this.wrap_worldCOM.zpp_inner.x=this.worldCOMx,this.wrap_worldCOM.zpp_inner.y=this.worldCOMy},Jt.prototype.invalidate_area_inertia=function(){if(this.zip_area_inertia=!0,null!=this.body){var e=this.body;e.zip_localCOM=!0,e.zip_worldCOM=!0,this.body.invalidate_mass(),this.body.invalidate_inertia()}},Jt.prototype.invalidate_angDrag=function(){this.zip_angDrag=!0},Jt.prototype.invalidate_localCOM=function(){if(this.zip_localCOM=!0,this.invalidate_area_inertia(),0==this.type&&(this.zip_sweepRadius=!0),this.invalidate_angDrag(),this.invalidate_worldCOM(),null!=this.body){var e=this.body;e.zip_localCOM=!0,e.zip_worldCOM=!0}},Jt.prototype.invalidate_worldCOM=function(){this.zip_worldCOM=!0,this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0)},Jt.prototype.invalidate_material=function(e){if(0!=(e&Zt.WAKE)&&this.wake(),0!=(e&Zt.ARBITERS)&&null!=this.body&&this.body.refreshArbiters(),0!=(e&Zt.PROPS)&&null!=this.body){var t=this.body;t.zip_localCOM=!0,t.zip_worldCOM=!0,this.body.invalidate_mass(),this.body.invalidate_inertia()}0!=(e&Zt.ANGDRAG)&&this.invalidate_angDrag(),this.refmaterial.set(this.material)},Jt.prototype.invalidate_filter=function(){this.wake()},Jt.prototype.invalidate_fluidprops=function(){this.fluidEnabled&&this.wake()},Jt.prototype.aabb_validate=function(){if(this.zip_aabb&&null!=this.body)if(this.zip_aabb=!1,0==this.type){var e=this.circle;if(e.zip_worldCOM&&null!=e.body){if(e.zip_worldCOM=!1,e.zip_localCOM){if(e.zip_localCOM=!1,1==e.type){var t=e.polygon;if(null==t.lverts.next.next)t.localCOMx=t.lverts.next.x,t.localCOMy=t.lverts.next.y;else if(null==t.lverts.next.next.next)t.localCOMx=t.lverts.next.x,t.localCOMy=t.lverts.next.y,t.localCOMx+=t.lverts.next.next.x,t.localCOMy+=t.lverts.next.next.y,t.localCOMx*=.5,t.localCOMy*=.5;else{t.localCOMx=0;var i=t.localCOMy=0,n=t.lverts.next,r=n,o=n=n.next;for(n=n.next;null!=n;){var a=n;i+=o.x*(a.y-r.y);var s=a.y*o.x-a.x*o.y;t.localCOMx+=(o.x+a.x)*s,t.localCOMy+=(o.y+a.y)*s,r=o,o=a,n=n.next}var p=n=t.lverts.next;i+=o.x*(p.y-r.y);var l=p.y*o.x-p.x*o.y;t.localCOMx+=(o.x+p.x)*l,t.localCOMy+=(o.y+p.y)*l,r=o;var h=n=n.next;i+=p.x*(h.y-r.y);var u=h.y*p.x-h.x*p.y;t.localCOMx+=(p.x+h.x)*u,t.localCOMy+=(p.y+h.y)*u;var d=i=1/(3*i);t.localCOMx*=d,t.localCOMy*=d}}null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy)}var c=e.body;c.zip_axis&&(c.zip_axis=!1,c.axisx=Math.sin(c.rot),c.axisy=Math.cos(c.rot)),e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy),e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy)}var _=e.radius,y=e.radius;e.aabb.minx=e.worldCOMx-_,e.aabb.miny=e.worldCOMy-y,e.aabb.maxx=e.worldCOMx+_,e.aabb.maxy=e.worldCOMy+y}else{var x=this.polygon;if(x.zip_gverts&&null!=x.body){x.zip_gverts=!1,x.validate_lverts();var m=x.body;m.zip_axis&&(m.zip_axis=!1,m.axisx=Math.sin(m.rot),m.axisy=Math.cos(m.rot));for(var g=x.lverts.next,f=x.gverts.next;null!=f;){var v=f,z=g;g=g.next,v.x=x.body.posx+(x.body.axisy*z.x-x.body.axisx*z.y),v.y=x.body.posy+(z.x*x.body.axisx+z.y*x.body.axisy),f=f.next}}var w=x.gverts.next;x.aabb.minx=w.x,x.aabb.miny=w.y,x.aabb.maxx=w.x,x.aabb.maxy=w.y;for(var b=x.gverts.next.next;null!=b;){var S=b;S.x<x.aabb.minx&&(x.aabb.minx=S.x),S.x>x.aabb.maxx&&(x.aabb.maxx=S.x),S.y<x.aabb.miny&&(x.aabb.miny=S.y),S.y>x.aabb.maxy&&(x.aabb.maxy=S.y),b=b.next}}},Jt.prototype.setMaterial=function(e){this.material!=e&&(null!=this.body&&null!=this.body.space&&null!=this.material&&this.material.shapes.remove(this),this.material=e,null!=this.body&&null!=this.body.space&&e.shapes.add(this),this.wake(),null!=this.body&&this.body.refreshArbiters())},Jt.prototype.setFilter=function(e){this.filter!=e&&(null!=this.body&&null!=this.body.space&&null!=this.filter&&this.filter.shapes.remove(this),this.filter=e,null!=this.body&&null!=this.body.space&&e.shapes.add(this),this.wake())},Jt.prototype.setFluid=function(e){this.fluidProperties!=e&&(null!=this.body&&null!=this.body.space&&null!=this.fluidProperties&&this.fluidProperties.shapes.remove(this),this.fluidProperties=e,null!=this.body&&null!=this.body.space&&e.shapes.add(this),this.fluidEnabled&&this.wake())},Jt.prototype.__immutable_midstep=function(e){},Jt.prototype.addedToBody=function(){this.invalidate_worldCOM(),this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0)},Jt.prototype.removedFromBody=function(){},Jt.prototype.addedToSpace=function(){this.__iaddedToSpace(),this.material.shapes.add(this),this.filter.shapes.add(this),null!=this.fluidProperties&&this.fluidProperties.shapes.add(this)},Jt.prototype.removedFromSpace=function(){this.__iremovedFromSpace(),this.material.shapes.remove(this),this.filter.shapes.remove(this),null!=this.fluidProperties&&this.fluidProperties.shapes.remove(this)},Jt.prototype.copy=function(){var e=null;e=0==this.type?this.circle.__copy():this.polygon.__copy(),this.zip_area_inertia?e.invalidate_area_inertia():(e.area=this.area,e.inertia=this.inertia),this.zip_sweepRadius?e.zip_sweepRadius=!0:(e.sweepRadius=this.sweepRadius,e.sweepCoef=this.sweepCoef),this.zip_angDrag?e.invalidate_angDrag():e.angDrag=this.angDrag,this.zip_aabb?(e.zip_aabb=!0,null!=e.body&&(e.body.zip_aabb=!0)):(e.aabb.minx=this.aabb.minx,e.aabb.miny=this.aabb.miny,e.aabb.maxx=this.aabb.maxx,e.aabb.maxy=this.aabb.maxy);var t=e.material;t.outer=null,t.next=Zt.zpp_pool,Zt.zpp_pool=t;var i=e.filter;return i.outer=null,i.next=mt.zpp_pool,mt.zpp_pool=i,e.material=this.material,e.filter=this.filter,null!=this.fluidProperties&&(e.fluidProperties=this.fluidProperties),e.fluidEnabled=this.fluidEnabled,e.sensorEnabled=this.sensorEnabled,null!=this.userData&&(e.userData=_.copy(this.userData)),this.copyto(e.outer),e.outer},Jt.prototype.__class__=Jt;var Qt=zpp_nape.shape.ZPP_Circle=function(){this.radius=0,this.outer_zn=null,Jt.call(this,0),(this.circle=this).zip_localCOM=!1};Qt.__name__=["zpp_nape","shape","ZPP_Circle"],Qt.__super__=Jt,Qt.prototype=Object.create(Jt.prototype),Qt.prototype.outer_zn=null,Qt.prototype.radius=null,Qt.prototype.__clear=function(){},Qt.prototype.invalidate_radius=function(){this.invalidate_area_inertia(),this.invalidate_angDrag(),this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0),null!=this.body&&this.body.wake()},Qt.prototype.localCOM_validate=function(){this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy},Qt.prototype.localCOM_invalidate=function(e){this.localCOMx=e.x,this.localCOMy=e.y,this.invalidate_localCOM(),null!=this.body&&this.body.wake()},Qt.prototype.setupLocalCOM=function(){var e,t=this.localCOMx,i=this.localCOMy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_localCOM=e,this.wrap_localCOM.zpp_inner._inuse=!0,this.wrap_localCOM.zpp_inner._validate=$(this,this.localCOM_validate),this.wrap_localCOM.zpp_inner._invalidate=$(this,this.localCOM_invalidate)},Qt.prototype.__validate_aabb=function(){if(this.zip_worldCOM&&null!=this.body){if(this.zip_worldCOM=!1,this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var e=this.polygon;if(null==e.lverts.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y;else if(null==e.lverts.next.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y,e.localCOMx+=e.lverts.next.next.x,e.localCOMy+=e.lverts.next.next.y,e.localCOMx*=.5,e.localCOMy*=.5;else{e.localCOMx=0;var t=e.localCOMy=0,i=e.lverts.next,n=i,r=i=i.next;for(i=i.next;null!=i;){var o=i;t+=r.x*(o.y-n.y);var a=o.y*r.x-o.x*r.y;e.localCOMx+=(r.x+o.x)*a,e.localCOMy+=(r.y+o.y)*a,n=r,r=o,i=i.next}var s=i=e.lverts.next;t+=r.x*(s.y-n.y);var p=s.y*r.x-s.x*r.y;e.localCOMx+=(r.x+s.x)*p,e.localCOMy+=(r.y+s.y)*p,n=r;var l=i=i.next;t+=s.x*(l.y-n.y);var h=l.y*s.x-l.x*s.y;e.localCOMx+=(s.x+l.x)*h,e.localCOMy+=(s.y+l.y)*h;var u=t=1/(3*t);e.localCOMx*=u,e.localCOMy*=u}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}var d=this.body;d.zip_axis&&(d.zip_axis=!1,d.axisx=Math.sin(d.rot),d.axisy=Math.cos(d.rot)),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy)}var c=this.radius,_=this.radius;this.aabb.minx=this.worldCOMx-c,this.aabb.miny=this.worldCOMy-_,this.aabb.maxx=this.worldCOMx+c,this.aabb.maxy=this.worldCOMy+_},Qt.prototype._force_validate_aabb=function(){this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy),this.aabb.minx=this.worldCOMx-this.radius,this.aabb.miny=this.worldCOMy-this.radius,this.aabb.maxx=this.worldCOMx+this.radius,this.aabb.maxy=this.worldCOMy+this.radius},Qt.prototype.__validate_sweepRadius=function(){this.sweepCoef=Math.sqrt(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy),this.sweepRadius=this.sweepCoef+this.radius},Qt.prototype.__validate_area_inertia=function(){var e=this.radius*this.radius;this.area=e*Math.PI,this.inertia=.5*e+(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy)},Qt.prototype.__validate_angDrag=function(){var e=this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy,t=this.radius*this.radius;this.angDrag=(e+2*t)*(this.material.dynamicFriction*Qs.fluidAngularDragFriction)+.5*Qs.fluidAngularDrag*(1+Qs.fluidVacuumDrag)*e,this.angDrag/=2*(e+.5*t)},Qt.prototype.__scale=function(e,t){var i=((e<0?-e:e)+(t<0?-t:t))/2;this.radius*=i<0?-i:i,this.invalidate_radius(),0<this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy&&(this.localCOMx*=e,this.localCOMy*=t,this.invalidate_localCOM())},Qt.prototype.__translate=function(e,t){this.localCOMx+=e,this.localCOMy+=t,this.invalidate_localCOM()},Qt.prototype.__rotate=function(e,t){if(0<this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy){var i,n;i=t*this.localCOMx-e*this.localCOMy,n=this.localCOMx*e+this.localCOMy*t,this.localCOMx=i,this.localCOMy=n,this.invalidate_localCOM()}},Qt.prototype.__transform=function(e){var t=e.zpp_inner.a*e.zpp_inner.d-e.zpp_inner.b*e.zpp_inner.c;t<0&&(t=-t),this.radius*=Math.sqrt(t);var i=e.zpp_inner.a*this.localCOMx+e.zpp_inner.b*this.localCOMy+e.zpp_inner.tx;this.localCOMy=e.zpp_inner.c*this.localCOMx+e.zpp_inner.d*this.localCOMy+e.zpp_inner.ty,this.localCOMx=i,this.invalidate_radius(),this.invalidate_localCOM()},Qt.prototype.__copy=function(){var e=new ce(this.radius).zpp_inner_zn;return e.localCOMx=this.localCOMx,e.localCOMy=this.localCOMy,e.zip_localCOM=!1,e},Qt.prototype.__class__=Qt;var $t=zpp_nape.shape.ZPP_Edge=function(){this.tp1=0,this.tp0=0,this.gp1=null,this.lp1=null,this.gp0=null,this.lp0=null,this.gprojection=0,this.lprojection=0,this.length=0,this.wrap_gnorm=null,this.gnormy=0,this.gnormx=0,this.wrap_lnorm=null,this.lnormy=0,this.lnormx=0,this.outer=null,this.polygon=null,this.next=null,this.lnormx=0,this.lnormy=0,this.gnormx=0,this.gnormy=0,this.length=0,this.lprojection=0,this.gprojection=0};$t.__name__=["zpp_nape","shape","ZPP_Edge"],$t.prototype.next=null,$t.prototype.free=function(){this.polygon=null},$t.prototype.alloc=function(){},$t.prototype.polygon=null,$t.prototype.outer=null,$t.prototype.wrapper=function(){return null==this.outer&&($t.internal=!0,this.outer=new _e,$t.internal=!1,this.outer.zpp_inner=this),this.outer},$t.prototype.lnormx=null,$t.prototype.lnormy=null,$t.prototype.wrap_lnorm=null,$t.prototype.gnormx=null,$t.prototype.gnormy=null,$t.prototype.wrap_gnorm=null,$t.prototype.length=null,$t.prototype.lprojection=null,$t.prototype.gprojection=null,$t.prototype.lp0=null,$t.prototype.gp0=null,$t.prototype.lp1=null,$t.prototype.gp1=null,$t.prototype.tp0=null,$t.prototype.tp1=null,$t.prototype.lnorm_validate=function(){this.polygon.validate_laxi(),this.wrap_lnorm.zpp_inner.x=this.lnormx,this.wrap_lnorm.zpp_inner.y=this.lnormy},$t.prototype.gnorm_validate=function(){var e=this.polygon;if(e.zip_gaxi&&null!=e.body){e.zip_gaxi=!1,e.validate_laxi();var t=e.body;if(t.zip_axis&&(t.zip_axis=!1,t.axisx=Math.sin(t.rot),t.axisy=Math.cos(t.rot)),e.zip_gverts&&null!=e.body){e.zip_gverts=!1,e.validate_lverts();var i=e.body;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));for(var n=e.lverts.next,r=e.gverts.next;null!=r;){var o=r,a=n;n=n.next,o.x=e.body.posx+(e.body.axisy*a.x-e.body.axisx*a.y),o.y=e.body.posy+(a.x*e.body.axisx+a.y*e.body.axisy),r=r.next}}var s=e.edges.head,p=e.gverts.next,l=p;for(p=p.next;null!=p;){var h=p,u=s.elt;s=s.next,u.gp0=l,u.gp1=h,u.gnormx=e.body.axisy*u.lnormx-e.body.axisx*u.lnormy,u.gnormy=u.lnormx*e.body.axisx+u.lnormy*e.body.axisy,u.gprojection=e.body.posx*u.gnormx+e.body.posy*u.gnormy+u.lprojection,null!=u.wrap_gnorm&&(u.wrap_gnorm.zpp_inner.x=u.gnormx,u.wrap_gnorm.zpp_inner.y=u.gnormy),u.tp0=u.gp0.y*u.gnormx-u.gp0.x*u.gnormy,u.tp1=u.gp1.y*u.gnormx-u.gp1.x*u.gnormy,l=h,p=p.next}var d=s.elt;d.gp0=l,d.gp1=e.gverts.next,d.gnormx=e.body.axisy*d.lnormx-e.body.axisx*d.lnormy,d.gnormy=d.lnormx*e.body.axisx+d.lnormy*e.body.axisy,d.gprojection=e.body.posx*d.gnormx+e.body.posy*d.gnormy+d.lprojection,null!=d.wrap_gnorm&&(d.wrap_gnorm.zpp_inner.x=d.gnormx,d.wrap_gnorm.zpp_inner.y=d.gnormy),d.tp0=d.gp0.y*d.gnormx-d.gp0.x*d.gnormy,d.tp1=d.gp1.y*d.gnormx-d.gp1.x*d.gnormy}this.wrap_gnorm.zpp_inner.x=this.gnormx,this.wrap_gnorm.zpp_inner.y=this.gnormy},$t.prototype.getlnorm=function(){var e,t=this.lnormx,i=this.lnormy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_lnorm=e,this.wrap_lnorm.zpp_inner._immutable=!0,this.wrap_lnorm.zpp_inner._validate=$(this,this.lnorm_validate)},$t.prototype.getgnorm=function(){var e,t=this.gnormx,i=this.gnormy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_gnorm=e,this.wrap_gnorm.zpp_inner._immutable=!0,this.wrap_gnorm.zpp_inner._validate=$(this,this.gnorm_validate)},$t.prototype.__class__=$t;var ei=zpp_nape.shape.ZPP_Polygon=function(){this.zip_sanitation=!1,this.zip_valid=!1,this.zip_gaxi=!1,this.zip_gverts=!1,this.zip_laxi=!1,this.zip_lverts=!1,this.reverse_flag=!1,this.edgeCnt=0,this.wrap_edges=null,this.edges=null,this.wrap_gverts=null,this.gverts=null,this.wrap_lverts=null,this.lverts=null,this.outer_zn=null,Jt.call(this,1),(this.polygon=this).lverts=new ep,this.gverts=new ep,this.edges=new ki,this.edgeCnt=0};ei.__name__=["zpp_nape","shape","ZPP_Polygon"],ei.__super__=Jt,ei.prototype=Object.create(Jt.prototype),ei.prototype.outer_zn=null,ei.prototype.lverts=null,ei.prototype.wrap_lverts=null,ei.prototype.gverts=null,ei.prototype.wrap_gverts=null,ei.prototype.edges=null,ei.prototype.wrap_edges=null,ei.prototype.edgeCnt=null,ei.prototype.reverse_flag=null,ei.prototype.__clear=function(){},ei.prototype.lverts_pa_invalidate=function(e){this.invalidate_lverts()},ei.prototype.gverts_pa_validate=function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1,this.validate_lverts();var e=this.body;e.zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot));for(var t=this.lverts.next,i=this.gverts.next;null!=i;){var n=i,r=t;t=t.next,n.x=this.body.posx+(this.body.axisy*r.x-this.body.axisx*r.y),n.y=this.body.posy+(r.x*this.body.axisx+r.y*this.body.axisy),i=i.next}}},ei.prototype.lverts_post_adder=function(e){e.zpp_inner._invalidate=$(this,this.lverts_pa_invalidate);for(var t,i=null,n=null,r=this.lverts.next;null!=r&&r!=e.zpp_inner;)i=null==i?this.gverts.next:i.next,n=null==n?this.edges.head:n.next,r=r.next;null==ep.zpp_pool?t=new ep:(t=ep.zpp_pool,ep.zpp_pool=t.next,t.next=null),t.weak=!1,t._immutable=!0,t.x=0,t.y=0;var o,a,s,p=t;(this.gverts.insert(i,p),null!=this.lverts.next.next)&&(null==this.lverts.next.next.next?(null==$t.zpp_pool?o=new $t:(o=$t.zpp_pool,$t.zpp_pool=o.next,o.next=null),(o.polygon=this).edges.add(o),null==$t.zpp_pool?a=new $t:(a=$t.zpp_pool,$t.zpp_pool=a.next,a.next=null),(a.polygon=this).edges.add(a),this.edgeCnt+=2):(null==$t.zpp_pool?s=new $t:(s=$t.zpp_pool,$t.zpp_pool=s.next,s.next=null),(s.polygon=this).edges.insert(n,s),this.edgeCnt++));p._validate=$(this,this.gverts_pa_validate)},ei.prototype.lverts_subber=function(e){this.cleanup_lvert(e.zpp_inner)},ei.prototype.lverts_invalidate=function(e){this.invalidate_lverts()},ei.prototype.lverts_validate=function(){this.validate_lverts()},ei.prototype.gverts_validate=function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1,this.validate_lverts();var e=this.body;e.zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot));for(var t=this.lverts.next,i=this.gverts.next;null!=i;){var n=i,r=t;t=t.next,n.x=this.body.posx+(this.body.axisy*r.x-this.body.axisx*r.y),n.y=this.body.posy+(r.x*this.body.axisx+r.y*this.body.axisy),i=i.next}}},ei.prototype.edges_validate=function(){this.validate_lverts()},ei.prototype.getlverts=function(){this.wrap_lverts=xn.get(this.lverts),this.wrap_lverts.zpp_inner.post_adder=$(this,this.lverts_post_adder),this.wrap_lverts.zpp_inner.subber=$(this,this.lverts_subber),this.wrap_lverts.zpp_inner._invalidate=$(this,this.lverts_invalidate),this.wrap_lverts.zpp_inner._validate=$(this,this.lverts_validate),this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag},ei.prototype.getgverts=function(){this.wrap_gverts=xn.get(this.gverts,!0),this.wrap_gverts.zpp_inner.reverse_flag=this.reverse_flag,this.wrap_gverts.zpp_inner._validate=$(this,this.gverts_validate)},ei.prototype.getedges=function(){this.wrap_edges=Dn.get(this.edges,!0),this.wrap_edges.zpp_inner.reverse_flag=this.reverse_flag,this.wrap_edges.zpp_inner._validate=$(this,this.edges_validate)},ei.prototype.zip_lverts=null,ei.prototype.invalidate_lverts=function(){this.invalidate_laxi(),this.invalidate_area_inertia(),this.invalidate_angDrag(),this.invalidate_localCOM(),this.invalidate_gverts(),this.zip_lverts=!0,this.zip_valid=!0,this.zip_sanitation=!0,null!=this.body&&this.body.wake()},ei.prototype.zip_laxi=null,ei.prototype.invalidate_laxi=function(){this.invalidate_gaxi(),this.zip_sweepRadius=!0,this.zip_laxi=!0},ei.prototype.zip_gverts=null,ei.prototype.invalidate_gverts=function(){this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0),this.zip_gverts=!0},ei.prototype.zip_gaxi=null,ei.prototype.invalidate_gaxi=function(){this.zip_gaxi=!0},ei.prototype.zip_valid=null,ei.prototype.validation=null,ei.prototype.valid=function(){if(this.zip_valid){if(this.zip_valid=!1,this.zip_sanitation&&(this.zip_sanitation=!1,this.splice_collinear_real()),this.lverts.length<3)return null==Uo.ValidationResult_DEGENERATE&&(Uo.internal=!0,Uo.ValidationResult_DEGENERATE=new we,Uo.internal=!1),this.validation=Uo.ValidationResult_DEGENERATE;if(this.validate_lverts(),this.validate_area_inertia(),this.area<Qs.epsilon)return null==Uo.ValidationResult_DEGENERATE&&(Uo.internal=!0,Uo.ValidationResult_DEGENERATE=new we,Uo.internal=!1),this.validation=Uo.ValidationResult_DEGENERATE;var e=!1,t=!1,i=!0,n=this.lverts.next,r=n,o=n=n.next;for(n=n.next;null!=n;){var a,s,p=n;a=p.x-o.x,s=p.y-o.y;var l;l=o.x-r.x;var h=(o.y-r.y)*a-l*s;if(h>Qs.epsilon?t=!0:h<-Qs.epsilon&&(e=!0),t&&e){i=!1;break}r=o,o=p,n=n.next}if(i){for(var u=n=this.lverts.next;;){var d,c;d=u.x-o.x,c=u.y-o.y;var _;_=o.x-r.x;var y=(o.y-r.y)*d-_*c;if(y>Qs.epsilon?t=!0:y<-Qs.epsilon&&(e=!0),t&&e){i=!1;break}break}if(i){r=o,o=u;for(var x=n=n.next;;){var m,g;m=x.x-u.x,g=x.y-u.y;var f;f=u.x-r.x;var v=(u.y-r.y)*m-f*g;if(v>Qs.epsilon?t=!0:v<-Qs.epsilon&&(e=!0),t&&e)break;break}}}if(t&&e)return null==Uo.ValidationResult_CONCAVE&&(Uo.internal=!0,Uo.ValidationResult_CONCAVE=new we,Uo.internal=!1),this.validation=Uo.ValidationResult_CONCAVE;var z=!0,w=!0,b=this.lverts.next,S=b;for(b=b.next;null!=b;){var C=b;if(!z){w=!1;break}var M=!0,P=this.lverts.next,k=P;for(P=P.next;null!=P;){var T=P;if(S!=k&&S!=T&&C!=k&&C!=T){var A,O;A=S.x-k.x,O=S.y-k.y;var E,G;E=C.x-S.x;var D,I,L=(G=C.y-S.y)*(D=T.x-k.x)-E*(I=T.y-k.y);if(L*L>Qs.epsilon){var B=(I*A-D*O)*(L=1/L);if(B>Qs.epsilon&&B<1-Qs.epsilon){var R=(G*A-E*O)*L;if(R>Qs.epsilon&&R<1-Qs.epsilon){M=z=!1;break}}}k=T,P=P.next}else k=T,P=P.next}if(M)for(;;){var F=this.lverts.next;if(S==k||S==F||C==k||C==F)break;var j,N;j=S.x-k.x,N=S.y-k.y;var U,V;U=C.x-S.x;var H,W,q=(V=C.y-S.y)*(H=F.x-k.x)-U*(W=F.y-k.y);if(q*q>Qs.epsilon){var X=(W*j-H*N)*(q=1/q);if(X>Qs.epsilon&&X<1-Qs.epsilon){var Y=(V*j-U*N)*q;if(Y>Qs.epsilon&&Y<1-Qs.epsilon){z=!1;break}}}break}S=C,b=b.next}if(w)for(;;){var K=this.lverts.next;if(!z)break;var Z=!0,J=this.lverts.next,Q=J;for(J=J.next;null!=J;){var $=J;if(S!=Q&&S!=$&&K!=Q&&K!=$){var ee,te;ee=S.x-Q.x,te=S.y-Q.y;var ie,ne;ie=K.x-S.x;var re,oe,ae=(ne=K.y-S.y)*(re=$.x-Q.x)-ie*(oe=$.y-Q.y);if(ae*ae>Qs.epsilon){var se=(oe*ee-re*te)*(ae=1/ae);if(se>Qs.epsilon&&se<1-Qs.epsilon){var pe=(ne*ee-ie*te)*ae;if(pe>Qs.epsilon&&pe<1-Qs.epsilon){Z=z=!1;break}}}Q=$,J=J.next}else Q=$,J=J.next}if(Z)for(;;){var le=this.lverts.next;if(S==Q||S==le||K==Q||K==le)break;var he,ue;he=S.x-Q.x,ue=S.y-Q.y;var de,ce;de=K.x-S.x;var _e,ye,xe=(ce=K.y-S.y)*(_e=le.x-Q.x)-de*(ye=le.y-Q.y);if(xe*xe>Qs.epsilon){var me=(ye*he-_e*ue)*(xe=1/xe);if(me>Qs.epsilon&&me<1-Qs.epsilon){var ge=(ce*he-de*ue)*xe;if(ge>Qs.epsilon&&ge<1-Qs.epsilon){z=!1;break}}}break}break}return z?(null==Uo.ValidationResult_VALID&&(Uo.internal=!0,Uo.ValidationResult_VALID=new we,Uo.internal=!1),this.validation=Uo.ValidationResult_VALID):(null==Uo.ValidationResult_SELF_INTERSECTING&&(Uo.internal=!0,Uo.ValidationResult_SELF_INTERSECTING=new we,Uo.internal=!1),this.validation=Uo.ValidationResult_SELF_INTERSECTING)}return this.validation},ei.prototype.validate_lverts=function(){this.zip_lverts&&(this.zip_lverts=!1,2<this.lverts.length&&(this.validate_area_inertia(),this.area<0&&(this.reverse_vertices(),this.area=-this.area)))},ei.prototype.cleanup_lvert=function(e){for(var t=null,i=null,n=this.lverts.next;null!=n&&n!=e;)t=null==t?this.gverts.next:t.next,i=null==i?this.edges.head:i.next,n=n.next;var r=null==t?this.gverts.next:t.next;this.gverts.erase(t);var o=r;if(null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=ep.zpp_pool,ep.zpp_pool=o,2==this.edgeCnt){var a=this.edges.pop_unsafe(),s=a;s.polygon=null,s.next=$t.zpp_pool,$t.zpp_pool=s;var p=a=this.edges.pop_unsafe();p.polygon=null,p.next=$t.zpp_pool,$t.zpp_pool=p,this.edgeCnt=0}else if(0!=this.edgeCnt){var l=null==i?this.edges.head.elt:i.next.elt;this.edges.erase(i);var h=l;h.polygon=null,h.next=$t.zpp_pool,$t.zpp_pool=h,this.edgeCnt--}},ei.prototype.zip_sanitation=null,ei.prototype.splice_collinear=function(){this.zip_sanitation&&(this.zip_sanitation=!1,this.splice_collinear_real())},ei.prototype.splice_collinear_real=function(){if(null!=this.lverts.next&&null!=this.lverts.next.next&&null!=this.lverts.next.next.next){for(var e=null,t=this.lverts.next;null!=t;){var i,n,r=t,o=null==t.next?this.lverts.next:t.next,a=r.x,s=r.y;t=(i=a-o.x)*i+(n=s-o.y)*n<Qs.epsilon*Qs.epsilon?(this.cleanup_lvert(t),this.lverts.erase(e)):(e=t).next}if(null!=this.lverts.next)for(var p;;){p=!1;for(var l=this.lverts.next;null!=l;){var h,u,d=null==l.next?this.lverts.next:l.next,c=l,_=d,y=null==d.next?this.lverts.next:d.next;h=_.x-c.x,u=_.y-c.y;var x;x=y.x-_.x;var m=(y.y-_.y)*h-x*u;l=(m*m>=Qs.epsilon*Qs.epsilon||(this.cleanup_lvert(d),this.lverts.erase(null==l.next?null:l),p=!0),l.next)}if(!p)break}}},ei.prototype.reverse_vertices=function(){this.lverts.reverse(),this.gverts.reverse(),this.edges.reverse(),this.edges.insert(this.edges.iterator_at(this.edgeCnt-1),this.edges.pop_unsafe()),this.reverse_flag=!this.reverse_flag,null!=this.wrap_lverts&&(this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag),null!=this.wrap_gverts&&(this.wrap_gverts.zpp_inner.reverse_flag=this.reverse_flag),null!=this.wrap_edges&&(this.wrap_edges.zpp_inner.reverse_flag=this.reverse_flag)},ei.prototype.validate_laxi=function(){if(this.zip_laxi){this.zip_laxi=!1,this.validate_lverts();var e=this.edges.head,t=this.lverts.next,i=t;for(t=t.next;null!=t;){var n=t,r=e.elt;e=e.next,r.lp0=i,r.lp1=n;var o=0,a=0;o=i.x-n.x,a=i.y-n.y;var s=Math.sqrt(o*o+a*a),p=1/(r.length=s),l=o*=p;o=-(a*=p),a=l,r.lprojection=o*i.x+a*i.y,r.lnormx=o,r.lnormy=a,null!=r.wrap_lnorm&&(r.wrap_lnorm.zpp_inner.x=o,r.wrap_lnorm.zpp_inner.y=a),i=n,t=t.next}var h=this.lverts.next,u=e.elt;u.lp0=i,u.lp1=h;var d=0,c=0;d=i.x-h.x,c=i.y-h.y;var _=Math.sqrt(d*d+c*c),y=1/(u.length=_),x=d*=y;d=-(c*=y),c=x,u.lprojection=d*i.x+c*i.y,u.lnormx=d,u.lnormy=c,null!=u.wrap_lnorm&&(u.wrap_lnorm.zpp_inner.x=d,u.wrap_lnorm.zpp_inner.y=c)}},ei.prototype.validate_gverts=function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1,this.validate_lverts();var e=this.body;e.zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot));for(var t=this.lverts.next,i=this.gverts.next;null!=i;){var n=i,r=t;t=t.next,n.x=this.body.posx+(this.body.axisy*r.x-this.body.axisx*r.y),n.y=this.body.posy+(r.x*this.body.axisx+r.y*this.body.axisy),i=i.next}}},ei.prototype.validate_gaxi=function(){if(this.zip_gaxi&&null!=this.body){this.zip_gaxi=!1,this.validate_laxi();var e=this.body;if(e.zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot)),this.zip_gverts&&null!=this.body){this.zip_gverts=!1,this.validate_lverts();var t=this.body;t.zip_axis&&(t.zip_axis=!1,t.axisx=Math.sin(t.rot),t.axisy=Math.cos(t.rot));for(var i=this.lverts.next,n=this.gverts.next;null!=n;){var r=n,o=i;i=i.next,r.x=this.body.posx+(this.body.axisy*o.x-this.body.axisx*o.y),r.y=this.body.posy+(o.x*this.body.axisx+o.y*this.body.axisy),n=n.next}}var a=this.edges.head,s=this.gverts.next,p=s;for(s=s.next;null!=s;){var l=s,h=a.elt;a=a.next,h.gp0=p,h.gp1=l,h.gnormx=this.body.axisy*h.lnormx-this.body.axisx*h.lnormy,h.gnormy=h.lnormx*this.body.axisx+h.lnormy*this.body.axisy,h.gprojection=this.body.posx*h.gnormx+this.body.posy*h.gnormy+h.lprojection,null!=h.wrap_gnorm&&(h.wrap_gnorm.zpp_inner.x=h.gnormx,h.wrap_gnorm.zpp_inner.y=h.gnormy),h.tp0=h.gp0.y*h.gnormx-h.gp0.x*h.gnormy,h.tp1=h.gp1.y*h.gnormx-h.gp1.x*h.gnormy,p=l,s=s.next}var u=a.elt;u.gp0=p,u.gp1=this.gverts.next,u.gnormx=this.body.axisy*u.lnormx-this.body.axisx*u.lnormy,u.gnormy=u.lnormx*this.body.axisx+u.lnormy*this.body.axisy,u.gprojection=this.body.posx*u.gnormx+this.body.posy*u.gnormy+u.lprojection,null!=u.wrap_gnorm&&(u.wrap_gnorm.zpp_inner.x=u.gnormx,u.wrap_gnorm.zpp_inner.y=u.gnormy),u.tp0=u.gp0.y*u.gnormx-u.gp0.x*u.gnormy,u.tp1=u.gp1.y*u.gnormx-u.gp1.x*u.gnormy}},ei.prototype.__validate_aabb=function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1,this.validate_lverts();var e=this.body;e.zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot));for(var t=this.lverts.next,i=this.gverts.next;null!=i;){var n=i,r=t;t=t.next,n.x=this.body.posx+(this.body.axisy*r.x-this.body.axisx*r.y),n.y=this.body.posy+(r.x*this.body.axisx+r.y*this.body.axisy),i=i.next}}var o=this.gverts.next;this.aabb.minx=o.x,this.aabb.miny=o.y,this.aabb.maxx=o.x,this.aabb.maxy=o.y;for(var a=this.gverts.next.next;null!=a;){var s=a;s.x<this.aabb.minx&&(this.aabb.minx=s.x),s.x>this.aabb.maxx&&(this.aabb.maxx=s.x),s.y<this.aabb.miny&&(this.aabb.miny=s.y),s.y>this.aabb.maxy&&(this.aabb.maxy=s.y),a=a.next}},ei.prototype._force_validate_aabb=function(){var e=this.lverts.next,t=this.gverts.next,i=e;e=e.next,t.x=this.body.posx+(this.body.axisy*i.x-this.body.axisx*i.y),t.y=this.body.posy+(i.x*this.body.axisx+i.y*this.body.axisy),this.aabb.minx=t.x,this.aabb.miny=t.y,this.aabb.maxx=t.x,this.aabb.maxy=t.y;for(var n=this.gverts.next.next;null!=n;){var r=n,o=e;e=e.next,r.x=this.body.posx+(this.body.axisy*o.x-this.body.axisx*o.y),r.y=this.body.posy+(o.x*this.body.axisx+o.y*this.body.axisy),r.x<this.aabb.minx&&(this.aabb.minx=r.x),r.x>this.aabb.maxx&&(this.aabb.maxx=r.x),r.y<this.aabb.miny&&(this.aabb.miny=r.y),r.y>this.aabb.maxy&&(this.aabb.maxy=r.y),n=n.next}},ei.prototype.__validate_sweepRadius=function(){var e=0,t=0;this.validate_laxi();for(var i=this.lverts.next;null!=i;){var n=i,r=n.x*n.x+n.y*n.y;e<r&&(e=r),i=i.next}for(var o=this.edges.head;null!=o;){var a=o.elt;if(a.lprojection<t&&(t=a.lprojection)<0)break;o=o.next}t<0&&(t=0),this.sweepRadius=Math.sqrt(e),this.sweepCoef=this.sweepRadius-t},ei.prototype.__validate_area_inertia=function(){if(null==this.lverts.next||null==this.lverts.next.next||null==this.lverts.next.next.next)this.area=0,this.inertia=0;else{var e=this.area=0,t=0,i=this.lverts.next,n=i,r=i=i.next;for(i=i.next;null!=i;){var o=i,a=r.y*n.x-r.x*n.y;e+=a*(r.x*r.x+r.y*r.y+(r.x*n.x+r.y*n.y)+(n.x*n.x+n.y*n.y)),t+=a,this.area+=r.x*(o.y-n.y),n=r,r=o,i=i.next}var s=i=this.lverts.next,p=r.y*n.x-r.x*n.y;e+=p*(r.x*r.x+r.y*r.y+(r.x*n.x+r.y*n.y)+(n.x*n.x+n.y*n.y)),t+=p,this.area+=r.x*(s.y-n.y),n=r,i=i.next;var l=s.y*n.x-s.x*n.y;e+=l*(s.x*s.x+s.y*s.y+(s.x*n.x+s.y*n.y)+(n.x*n.x+n.y*n.y)),t+=l,this.area+=s.x*(i.y-n.y),this.inertia=e/(6*t),this.area*=.5,this.area<0&&(this.area=-this.area,this.reverse_vertices())}},ei.prototype.__validate_angDrag=function(){this.validate_area_inertia(),this.validate_laxi();for(var e=0,t=this.edges.head,i=0,n=this.lverts.next,r=n,o=n.next;null!=o;){var a=o,s=t.elt;t=t.next,i+=s.length;var p,l;p=a.x-r.x,l=a.y-r.y,e+=s.length*Qs.fluidAngularDragFriction*this.material.dynamicFriction*s.lprojection*s.lprojection;var h=-(r.y*s.lnormx-r.x*s.lnormy)/(l*s.lnormx-p*s.lnormy);if(0<h){var u=1<h?1:h,d=0,c=0;d=r.x,c=r.y;d+=p*u,c+=l*u;var _=s.lnormy*r.x-s.lnormx*r.y,y=s.lnormy*d-s.lnormx*c;e+=(y*y*y-_*_*_)/(3*(y-_))*u*s.length*Qs.fluidAngularDrag}if(h<1){var x=h<0?0:h,m=0,g=0;m=r.x,g=r.y;m+=p*x,g+=l*x;var f=s.lnormy*m-s.lnormx*g,v=s.lnormy*a.x-s.lnormx*a.y;e+=(v*v*v-f*f*f)/(3*(v-f))*Qs.fluidVacuumDrag*(1-x)*s.length*Qs.fluidAngularDrag}r=a,o=(n=o).next}for(;;){var z=o=this.lverts.next,w=t.elt;t=t.next,i+=w.length;var b,S;b=z.x-r.x,S=z.y-r.y,e+=w.length*Qs.fluidAngularDragFriction*this.material.dynamicFriction*w.lprojection*w.lprojection;var C=-(r.y*w.lnormx-r.x*w.lnormy)/(S*w.lnormx-b*w.lnormy);if(0<C){var M=1<C?1:C,P=0,k=0;P=r.x,k=r.y;P+=b*M,k+=S*M;var T=w.lnormy*r.x-w.lnormx*r.y,A=w.lnormy*P-w.lnormx*k;e+=(A*A*A-T*T*T)/(3*(A-T))*M*w.length*Qs.fluidAngularDrag}if(C<1){var O=C<0?0:C,E=0,G=0;E=r.x,G=r.y;E+=b*O,G+=S*O;var D=w.lnormy*E-w.lnormx*G,I=w.lnormy*z.x-w.lnormx*z.y;e+=(I*I*I-D*D*D)/(3*(I-D))*Qs.fluidVacuumDrag*(1-O)*w.length*Qs.fluidAngularDrag}break}this.angDrag=e/(this.inertia*i)},ei.prototype.__validate_localCOM=function(){if(null==this.lverts.next.next)this.localCOMx=this.lverts.next.x,this.localCOMy=this.lverts.next.y;else if(null==this.lverts.next.next.next)this.localCOMx=this.lverts.next.x,this.localCOMy=this.lverts.next.y,this.localCOMx+=this.lverts.next.next.x,this.localCOMy+=this.lverts.next.next.y,this.localCOMx*=.5,this.localCOMy*=.5;else{this.localCOMx=0;var e=this.localCOMy=0,t=this.lverts.next,i=t,n=t=t.next;for(t=t.next;null!=t;){var r=t;e+=n.x*(r.y-i.y);var o=r.y*n.x-r.x*n.y;this.localCOMx+=(n.x+r.x)*o,this.localCOMy+=(n.y+r.y)*o,i=n,n=r,t=t.next}var a=t=this.lverts.next;e+=n.x*(a.y-i.y);var s=a.y*n.x-a.x*n.y;this.localCOMx+=(n.x+a.x)*s,this.localCOMy+=(n.y+a.y)*s,i=n;var p=t=t.next;e+=a.x*(p.y-i.y);var l=p.y*a.x-p.x*a.y;this.localCOMx+=(a.x+p.x)*l,this.localCOMy+=(a.y+p.y)*l;var h=e=1/(3*e);this.localCOMx*=h,this.localCOMy*=h}},ei.prototype.localCOM_validate=function(){if(this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var e=this.polygon;if(null==e.lverts.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y;else if(null==e.lverts.next.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y,e.localCOMx+=e.lverts.next.next.x,e.localCOMy+=e.lverts.next.next.y,e.localCOMx*=.5,e.localCOMy*=.5;else{e.localCOMx=0;var t=e.localCOMy=0,i=e.lverts.next,n=i,r=i=i.next;for(i=i.next;null!=i;){var o=i;t+=r.x*(o.y-n.y);var a=o.y*r.x-o.x*r.y;e.localCOMx+=(r.x+o.x)*a,e.localCOMy+=(r.y+o.y)*a,n=r,r=o,i=i.next}var s=i=e.lverts.next;t+=r.x*(s.y-n.y);var p=s.y*r.x-s.x*r.y;e.localCOMx+=(r.x+s.x)*p,e.localCOMy+=(r.y+s.y)*p,n=r;var l=i=i.next;t+=s.x*(l.y-n.y);var h=l.y*s.x-l.x*s.y;e.localCOMx+=(s.x+l.x)*h,e.localCOMy+=(s.y+l.y)*h;var u=t=1/(3*t);e.localCOMx*=u,e.localCOMy*=u}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}},ei.prototype.localCOM_invalidate=function(e){if(this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var t=this.polygon;if(null==t.lverts.next.next)t.localCOMx=t.lverts.next.x,t.localCOMy=t.lverts.next.y;else if(null==t.lverts.next.next.next)t.localCOMx=t.lverts.next.x,t.localCOMy=t.lverts.next.y,t.localCOMx+=t.lverts.next.next.x,t.localCOMy+=t.lverts.next.next.y,t.localCOMx*=.5,t.localCOMy*=.5;else{t.localCOMx=0;var i=t.localCOMy=0,n=t.lverts.next,r=n,o=n=n.next;for(n=n.next;null!=n;){var a=n;i+=o.x*(a.y-r.y);var s=a.y*o.x-a.x*o.y;t.localCOMx+=(o.x+a.x)*s,t.localCOMy+=(o.y+a.y)*s,r=o,o=a,n=n.next}var p=n=t.lverts.next;i+=o.x*(p.y-r.y);var l=p.y*o.x-p.x*o.y;t.localCOMx+=(o.x+p.x)*l,t.localCOMy+=(o.y+p.y)*l,r=o;var h=n=n.next;i+=p.x*(h.y-r.y);var u=h.y*p.x-h.x*p.y;t.localCOMx+=(p.x+h.x)*u,t.localCOMy+=(p.y+h.y)*u;var d=i=1/(3*i);t.localCOMx*=d,t.localCOMy*=d}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}var c,_;c=e.x-this.localCOMx,_=e.y-this.localCOMy;for(var y=this.lverts.next;null!=y;){var x=y;x.x+=c,x.y+=_,y=y.next}this.invalidate_lverts()},ei.prototype.setupLocalCOM=function(){var e,t=this.localCOMx,i=this.localCOMy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_localCOM=e,this.wrap_localCOM.zpp_inner._inuse=!0,this.wrap_localCOM.zpp_inner._validate=$(this,this.localCOM_validate),this.wrap_localCOM.zpp_inner._invalidate=$(this,this.localCOM_invalidate)},ei.prototype.__translate=function(e,t){for(var i=this.lverts.next;null!=i;){var n=i;n.x+=e,n.y+=t,i=i.next}this.invalidate_lverts()},ei.prototype.__scale=function(e,t){for(var i=this.lverts.next;null!=i;){var n=i;n.x*=e,n.y*=t,i=i.next}this.invalidate_lverts()},ei.prototype.__rotate=function(e,t){for(var i=this.lverts.next;null!=i;){var n,r,o=i;n=t*o.x-e*o.y,r=o.x*e+o.y*t,o.x=n,o.y=r,i=i.next}this.invalidate_lverts()},ei.prototype.__transform=function(e){for(var t=this.lverts.next;null!=t;){var i=t,n=e.zpp_inner.a*i.x+e.zpp_inner.b*i.y+e.zpp_inner.tx;i.y=e.zpp_inner.c*i.x+e.zpp_inner.d*i.y+e.zpp_inner.ty,i.x=n,t=t.next}this.invalidate_lverts()},ei.prototype.__copy=function(){var e=this.outer_zn;return null==e.zpp_inner_zn.wrap_lverts&&e.zpp_inner_zn.getlverts(),new xe(e.zpp_inner_zn.wrap_lverts).zpp_inner_zn},ei.prototype.__class__=ei;var ti=zpp_nape.space.ZPP_Broadphase=function(){this.circShape=null,this.matrix=null,this.aabbShape=null,this.dynab=null,this.sweep=null,this.is_sweep=!1,this.space=null};ti.__name__=["zpp_nape","space","ZPP_Broadphase"],ti.prototype.space=null,ti.prototype.is_sweep=null,ti.prototype.sweep=null,ti.prototype.dynab=null,ti.prototype.insert=function(e){this.is_sweep?this.sweep.__insert(e):this.dynab.__insert(e)},ti.prototype.remove=function(e){this.is_sweep?this.sweep.__remove(e):this.dynab.__remove(e)},ti.prototype.sync=function(e){if(this.is_sweep){if(!this.sweep.space.continuous&&e.zip_aabb&&null!=e.body)if(e.zip_aabb=!1,0==e.type){var t=e.circle;if(t.zip_worldCOM&&null!=t.body){if(t.zip_worldCOM=!1,t.zip_localCOM){if(t.zip_localCOM=!1,1==t.type){var i=t.polygon;if(null==i.lverts.next.next)i.localCOMx=i.lverts.next.x,i.localCOMy=i.lverts.next.y;else if(null==i.lverts.next.next.next)i.localCOMx=i.lverts.next.x,i.localCOMy=i.lverts.next.y,i.localCOMx+=i.lverts.next.next.x,i.localCOMy+=i.lverts.next.next.y,i.localCOMx*=.5,i.localCOMy*=.5;else{i.localCOMx=0;var n=i.localCOMy=0,r=i.lverts.next,o=r,a=r=r.next;for(r=r.next;null!=r;){var s=r;n+=a.x*(s.y-o.y);var p=s.y*a.x-s.x*a.y;i.localCOMx+=(a.x+s.x)*p,i.localCOMy+=(a.y+s.y)*p,o=a,a=s,r=r.next}var l=r=i.lverts.next;n+=a.x*(l.y-o.y);var h=l.y*a.x-l.x*a.y;i.localCOMx+=(a.x+l.x)*h,i.localCOMy+=(a.y+l.y)*h,o=a;var u=r=r.next;n+=l.x*(u.y-o.y);var d=u.y*l.x-u.x*l.y;i.localCOMx+=(l.x+u.x)*d,i.localCOMy+=(l.y+u.y)*d;var c=n=1/(3*n);i.localCOMx*=c,i.localCOMy*=c}}null!=t.wrap_localCOM&&(t.wrap_localCOM.zpp_inner.x=t.localCOMx,t.wrap_localCOM.zpp_inner.y=t.localCOMy)}var _=t.body;_.zip_axis&&(_.zip_axis=!1,_.axisx=Math.sin(_.rot),_.axisy=Math.cos(_.rot)),t.worldCOMx=t.body.posx+(t.body.axisy*t.localCOMx-t.body.axisx*t.localCOMy),t.worldCOMy=t.body.posy+(t.localCOMx*t.body.axisx+t.localCOMy*t.body.axisy)}var y=t.radius,x=t.radius;t.aabb.minx=t.worldCOMx-y,t.aabb.miny=t.worldCOMy-x,t.aabb.maxx=t.worldCOMx+y,t.aabb.maxy=t.worldCOMy+x}else{var m=e.polygon;if(m.zip_gverts&&null!=m.body){m.zip_gverts=!1,m.validate_lverts();var g=m.body;g.zip_axis&&(g.zip_axis=!1,g.axisx=Math.sin(g.rot),g.axisy=Math.cos(g.rot));for(var f=m.lverts.next,v=m.gverts.next;null!=v;){var z=v,w=f;f=f.next,z.x=m.body.posx+(m.body.axisy*w.x-m.body.axisx*w.y),z.y=m.body.posy+(w.x*m.body.axisx+w.y*m.body.axisy),v=v.next}}var b=m.gverts.next;m.aabb.minx=b.x,m.aabb.miny=b.y,m.aabb.maxx=b.x,m.aabb.maxy=b.y;for(var S=m.gverts.next.next;null!=S;){var C=S;C.x<m.aabb.minx&&(m.aabb.minx=C.x),C.x>m.aabb.maxx&&(m.aabb.maxx=C.x),C.y<m.aabb.miny&&(m.aabb.miny=C.y),C.y>m.aabb.maxy&&(m.aabb.maxy=C.y),S=S.next}}}else{var M=this.dynab,P=e.node;if(!P.synced){if(!M.space.continuous&&e.zip_aabb&&null!=e.body)if(e.zip_aabb=!1,0==e.type){var k=e.circle;if(k.zip_worldCOM&&null!=k.body){if(k.zip_worldCOM=!1,k.zip_localCOM){if(k.zip_localCOM=!1,1==k.type){var T=k.polygon;if(null==T.lverts.next.next)T.localCOMx=T.lverts.next.x,T.localCOMy=T.lverts.next.y;else if(null==T.lverts.next.next.next)T.localCOMx=T.lverts.next.x,T.localCOMy=T.lverts.next.y,T.localCOMx+=T.lverts.next.next.x,T.localCOMy+=T.lverts.next.next.y,T.localCOMx*=.5,T.localCOMy*=.5;else{T.localCOMx=0;var A=T.localCOMy=0,O=T.lverts.next,E=O,G=O=O.next;for(O=O.next;null!=O;){var D=O;A+=G.x*(D.y-E.y);var I=D.y*G.x-D.x*G.y;T.localCOMx+=(G.x+D.x)*I,T.localCOMy+=(G.y+D.y)*I,E=G,G=D,O=O.next}var L=O=T.lverts.next;A+=G.x*(L.y-E.y);var B=L.y*G.x-L.x*G.y;T.localCOMx+=(G.x+L.x)*B,T.localCOMy+=(G.y+L.y)*B,E=G;var R=O=O.next;A+=L.x*(R.y-E.y);var F=R.y*L.x-R.x*L.y;T.localCOMx+=(L.x+R.x)*F,T.localCOMy+=(L.y+R.y)*F;var j=A=1/(3*A);T.localCOMx*=j,T.localCOMy*=j}}null!=k.wrap_localCOM&&(k.wrap_localCOM.zpp_inner.x=k.localCOMx,k.wrap_localCOM.zpp_inner.y=k.localCOMy)}var N=k.body;N.zip_axis&&(N.zip_axis=!1,N.axisx=Math.sin(N.rot),N.axisy=Math.cos(N.rot)),k.worldCOMx=k.body.posx+(k.body.axisy*k.localCOMx-k.body.axisx*k.localCOMy),k.worldCOMy=k.body.posy+(k.localCOMx*k.body.axisx+k.localCOMy*k.body.axisy)}var U=k.radius,V=k.radius;k.aabb.minx=k.worldCOMx-U,k.aabb.miny=k.worldCOMy-V,k.aabb.maxx=k.worldCOMx+U,k.aabb.maxy=k.worldCOMy+V}else{var H=e.polygon;if(H.zip_gverts&&null!=H.body){H.zip_gverts=!1,H.validate_lverts();var W=H.body;W.zip_axis&&(W.zip_axis=!1,W.axisx=Math.sin(W.rot),W.axisy=Math.cos(W.rot));for(var q=H.lverts.next,X=H.gverts.next;null!=X;){var Y=X,K=q;q=q.next,Y.x=H.body.posx+(H.body.axisy*K.x-H.body.axisx*K.y),Y.y=H.body.posy+(K.x*H.body.axisx+K.y*H.body.axisy),X=X.next}}var Z=H.gverts.next;H.aabb.minx=Z.x,H.aabb.miny=Z.y,H.aabb.maxx=Z.x,H.aabb.maxy=Z.y;for(var J=H.gverts.next.next;null!=J;){var Q=J;Q.x<H.aabb.minx&&(H.aabb.minx=Q.x),Q.x>H.aabb.maxx&&(H.aabb.maxx=Q.x),Q.y<H.aabb.miny&&(H.aabb.miny=Q.y),Q.y>H.aabb.maxy&&(H.aabb.maxy=Q.y),J=J.next}}var $;if(P.dyn==(1!=e.body.type&&!e.body.component.sleeping)){var ee=P.aabb,te=e.aabb;$=!(te.minx>=ee.minx&&te.miny>=ee.miny&&te.maxx<=ee.maxx&&te.maxy<=ee.maxy)}else $=!0;$&&(P.synced=!0,P.snext=M.syncs,M.syncs=P)}}},ti.prototype.broadphase=function(e,t){},ti.prototype.clear=function(){},ti.prototype.shapesUnderPoint=function(e,t,i,n){return null},ti.prototype.bodiesUnderPoint=function(e,t,i,n){return null},ti.prototype.aabbShape=null,ti.prototype.matrix=null,ti.prototype.updateAABBShape=function(e){if(null==this.aabbShape){null==Uo.BodyType_STATIC&&(Uo.internal=!0,Uo.BodyType_STATIC=new oe,Uo.internal=!1);var t=new re(Uo.BodyType_STATIC).zpp_inner.wrap_shapes,i=this.aabbShape=new xe(xe.rect(e.minx,e.miny,e.maxx-e.minx,e.maxy-e.miny));t.zpp_inner.reverse_flag?t.push(i):t.unshift(i)}else{var n=this.aabbShape.zpp_inner.aabb,r=(e.maxx-e.minx)/(n.maxx-n.minx),o=(e.maxy-e.miny)/(n.maxy-n.miny);null==this.matrix&&(this.matrix=new ne);var a=this.matrix;a.zpp_inner.a=r;var s=a.zpp_inner;null!=s._invalidate&&s._invalidate();var p=this.matrix,l=this.matrix;l.zpp_inner.c=0;var h=l.zpp_inner;null!=h._invalidate&&h._invalidate(),p.zpp_inner.b=l.zpp_inner.c;var u=p.zpp_inner;null!=u._invalidate&&u._invalidate();var d=this.matrix;d.zpp_inner.d=o;var c=d.zpp_inner;null!=c._invalidate&&c._invalidate();var _=this.matrix;_.zpp_inner.tx=e.minx-r*n.minx;var y=_.zpp_inner;null!=y._invalidate&&y._invalidate();var x=this.matrix;x.zpp_inner.ty=e.miny-o*n.miny;var m=x.zpp_inner;null!=m._invalidate&&m._invalidate(),this.aabbShape.transform(this.matrix)}var g=this.aabbShape.zpp_inner;if(g.zip_aabb&&null!=g.body)if(g.zip_aabb=!1,0==g.type){var f=g.circle;if(f.zip_worldCOM&&null!=f.body){if(f.zip_worldCOM=!1,f.zip_localCOM){if(f.zip_localCOM=!1,1==f.type){var v=f.polygon;if(null==v.lverts.next.next)v.localCOMx=v.lverts.next.x,v.localCOMy=v.lverts.next.y;else if(null==v.lverts.next.next.next)v.localCOMx=v.lverts.next.x,v.localCOMy=v.lverts.next.y,v.localCOMx+=v.lverts.next.next.x,v.localCOMy+=v.lverts.next.next.y,v.localCOMx*=.5,v.localCOMy*=.5;else{v.localCOMx=0;var z=v.localCOMy=0,w=v.lverts.next,b=w,S=w=w.next;for(w=w.next;null!=w;){var C=w;z+=S.x*(C.y-b.y);var M=C.y*S.x-C.x*S.y;v.localCOMx+=(S.x+C.x)*M,v.localCOMy+=(S.y+C.y)*M,b=S,S=C,w=w.next}var P=w=v.lverts.next;z+=S.x*(P.y-b.y);var k=P.y*S.x-P.x*S.y;v.localCOMx+=(S.x+P.x)*k,v.localCOMy+=(S.y+P.y)*k,b=S;var T=w=w.next;z+=P.x*(T.y-b.y);var A=T.y*P.x-T.x*P.y;v.localCOMx+=(P.x+T.x)*A,v.localCOMy+=(P.y+T.y)*A;var O=z=1/(3*z);v.localCOMx*=O,v.localCOMy*=O}}null!=f.wrap_localCOM&&(f.wrap_localCOM.zpp_inner.x=f.localCOMx,f.wrap_localCOM.zpp_inner.y=f.localCOMy)}var E=f.body;E.zip_axis&&(E.zip_axis=!1,E.axisx=Math.sin(E.rot),E.axisy=Math.cos(E.rot)),f.worldCOMx=f.body.posx+(f.body.axisy*f.localCOMx-f.body.axisx*f.localCOMy),f.worldCOMy=f.body.posy+(f.localCOMx*f.body.axisx+f.localCOMy*f.body.axisy)}var G=f.radius,D=f.radius;f.aabb.minx=f.worldCOMx-G,f.aabb.miny=f.worldCOMy-D,f.aabb.maxx=f.worldCOMx+G,f.aabb.maxy=f.worldCOMy+D}else{var I=g.polygon;if(I.zip_gverts&&null!=I.body){I.zip_gverts=!1,I.validate_lverts();var L=I.body;L.zip_axis&&(L.zip_axis=!1,L.axisx=Math.sin(L.rot),L.axisy=Math.cos(L.rot));for(var B=I.lverts.next,R=I.gverts.next;null!=R;){var F=R,j=B;B=B.next,F.x=I.body.posx+(I.body.axisy*j.x-I.body.axisx*j.y),F.y=I.body.posy+(j.x*I.body.axisx+j.y*I.body.axisy),R=R.next}}var N=I.gverts.next;I.aabb.minx=N.x,I.aabb.miny=N.y,I.aabb.maxx=N.x,I.aabb.maxy=N.y;for(var U=I.gverts.next.next;null!=U;){var V=U;V.x<I.aabb.minx&&(I.aabb.minx=V.x),V.x>I.aabb.maxx&&(I.aabb.maxx=V.x),V.y<I.aabb.miny&&(I.aabb.miny=V.y),V.y>I.aabb.maxy&&(I.aabb.maxy=V.y),U=U.next}}var H=this.aabbShape.zpp_inner.polygon;if(H.zip_gaxi&&null!=H.body){H.zip_gaxi=!1,H.validate_laxi();var W=H.body;if(W.zip_axis&&(W.zip_axis=!1,W.axisx=Math.sin(W.rot),W.axisy=Math.cos(W.rot)),H.zip_gverts&&null!=H.body){H.zip_gverts=!1,H.validate_lverts();var q=H.body;q.zip_axis&&(q.zip_axis=!1,q.axisx=Math.sin(q.rot),q.axisy=Math.cos(q.rot));for(var X=H.lverts.next,Y=H.gverts.next;null!=Y;){var K=Y,Z=X;X=X.next,K.x=H.body.posx+(H.body.axisy*Z.x-H.body.axisx*Z.y),K.y=H.body.posy+(Z.x*H.body.axisx+Z.y*H.body.axisy),Y=Y.next}}var J=H.edges.head,Q=H.gverts.next,$=Q;for(Q=Q.next;null!=Q;){var ee=Q,te=J.elt;J=J.next,te.gp0=$,te.gp1=ee,te.gnormx=H.body.axisy*te.lnormx-H.body.axisx*te.lnormy,te.gnormy=te.lnormx*H.body.axisx+te.lnormy*H.body.axisy,te.gprojection=H.body.posx*te.gnormx+H.body.posy*te.gnormy+te.lprojection,null!=te.wrap_gnorm&&(te.wrap_gnorm.zpp_inner.x=te.gnormx,te.wrap_gnorm.zpp_inner.y=te.gnormy),te.tp0=te.gp0.y*te.gnormx-te.gp0.x*te.gnormy,te.tp1=te.gp1.y*te.gnormx-te.gp1.x*te.gnormy,$=ee,Q=Q.next}var ie=J.elt;ie.gp0=$,ie.gp1=H.gverts.next,ie.gnormx=H.body.axisy*ie.lnormx-H.body.axisx*ie.lnormy,ie.gnormy=ie.lnormx*H.body.axisx+ie.lnormy*H.body.axisy,ie.gprojection=H.body.posx*ie.gnormx+H.body.posy*ie.gnormy+ie.lprojection,null!=ie.wrap_gnorm&&(ie.wrap_gnorm.zpp_inner.x=ie.gnormx,ie.wrap_gnorm.zpp_inner.y=ie.gnormy),ie.tp0=ie.gp0.y*ie.gnormx-ie.gp0.x*ie.gnormy,ie.tp1=ie.gp1.y*ie.gnormx-ie.gp1.x*ie.gnormy}},ti.prototype.shapesInAABB=function(e,t,i,n,r){return null},ti.prototype.bodiesInAABB=function(e,t,i,n,r){return null},ti.prototype.circShape=null,ti.prototype.updateCircShape=function(e,t,i){if(null==this.circShape){null==Uo.BodyType_STATIC&&(Uo.internal=!0,Uo.BodyType_STATIC=new oe,Uo.internal=!1);var n,r=new re(Uo.BodyType_STATIC).zpp_inner.wrap_shapes;if(null==jn.poolVec2?n=new lt:(n=jn.poolVec2,jn.poolVec2=n.zpp_pool,n.zpp_pool=null),null==n.zpp_inner){var o;null==ep.zpp_pool?o=new ep:(o=ep.zpp_pool,ep.zpp_pool=o.next,o.next=null),o.weak=!1,o._immutable=!1,o.x=e,o.y=t,n.zpp_inner=o,n.zpp_inner.outer=n}else{var a,s=n.zpp_inner;if(null!=s._validate&&s._validate(),n.zpp_inner.x==e){var p=n.zpp_inner;null!=p._validate&&p._validate(),a=n.zpp_inner.y==t}else a=!1;if(!a){n.zpp_inner.x=e,n.zpp_inner.y=t;var l=n.zpp_inner;null!=l._invalidate&&l._invalidate(l)}}n.zpp_inner.weak=!1;var h=this.circShape=new ce(i,n);r.zpp_inner.reverse_flag?r.push(h):r.unshift(h)}else{var u=this.circShape.zpp_inner.circle,d=i/u.radius;null==this.matrix&&(this.matrix=new ne);var c=this.matrix,_=this.matrix;_.zpp_inner.d=d;var y=_.zpp_inner;null!=y._invalidate&&y._invalidate(),c.zpp_inner.a=_.zpp_inner.d;var x=c.zpp_inner;null!=x._invalidate&&x._invalidate();var m=this.matrix,g=this.matrix;g.zpp_inner.c=0;var f=g.zpp_inner;null!=f._invalidate&&f._invalidate(),m.zpp_inner.b=g.zpp_inner.c;var v=m.zpp_inner;null!=v._invalidate&&v._invalidate();var z=this.matrix;z.zpp_inner.tx=e-d*u.localCOMx;var w=z.zpp_inner;null!=w._invalidate&&w._invalidate();var b=this.matrix;b.zpp_inner.ty=t-d*u.localCOMy;var S=b.zpp_inner;null!=S._invalidate&&S._invalidate(),this.circShape.transform(this.matrix)}var C=this.circShape.zpp_inner;if(C.zip_aabb&&null!=C.body)if(C.zip_aabb=!1,0==C.type){var M=C.circle;if(M.zip_worldCOM&&null!=M.body){if(M.zip_worldCOM=!1,M.zip_localCOM){if(M.zip_localCOM=!1,1==M.type){var P=M.polygon;if(null==P.lverts.next.next)P.localCOMx=P.lverts.next.x,P.localCOMy=P.lverts.next.y;else if(null==P.lverts.next.next.next)P.localCOMx=P.lverts.next.x,P.localCOMy=P.lverts.next.y,P.localCOMx+=P.lverts.next.next.x,P.localCOMy+=P.lverts.next.next.y,P.localCOMx*=.5,P.localCOMy*=.5;else{P.localCOMx=0;var k=P.localCOMy=0,T=P.lverts.next,A=T,O=T=T.next;for(T=T.next;null!=T;){var E=T;k+=O.x*(E.y-A.y);var G=E.y*O.x-E.x*O.y;P.localCOMx+=(O.x+E.x)*G,P.localCOMy+=(O.y+E.y)*G,A=O,O=E,T=T.next}var D=T=P.lverts.next;k+=O.x*(D.y-A.y);var I=D.y*O.x-D.x*O.y;P.localCOMx+=(O.x+D.x)*I,P.localCOMy+=(O.y+D.y)*I,A=O;var L=T=T.next;k+=D.x*(L.y-A.y);var B=L.y*D.x-L.x*D.y;P.localCOMx+=(D.x+L.x)*B,P.localCOMy+=(D.y+L.y)*B;var R=k=1/(3*k);P.localCOMx*=R,P.localCOMy*=R}}null!=M.wrap_localCOM&&(M.wrap_localCOM.zpp_inner.x=M.localCOMx,M.wrap_localCOM.zpp_inner.y=M.localCOMy)}var F=M.body;F.zip_axis&&(F.zip_axis=!1,F.axisx=Math.sin(F.rot),F.axisy=Math.cos(F.rot)),M.worldCOMx=M.body.posx+(M.body.axisy*M.localCOMx-M.body.axisx*M.localCOMy),M.worldCOMy=M.body.posy+(M.localCOMx*M.body.axisx+M.localCOMy*M.body.axisy)}var j=M.radius,N=M.radius;M.aabb.minx=M.worldCOMx-j,M.aabb.miny=M.worldCOMy-N,M.aabb.maxx=M.worldCOMx+j,M.aabb.maxy=M.worldCOMy+N}else{var U=C.polygon;if(U.zip_gverts&&null!=U.body){U.zip_gverts=!1,U.validate_lverts();var V=U.body;V.zip_axis&&(V.zip_axis=!1,V.axisx=Math.sin(V.rot),V.axisy=Math.cos(V.rot));for(var H=U.lverts.next,W=U.gverts.next;null!=W;){var q=W,X=H;H=H.next,q.x=U.body.posx+(U.body.axisy*X.x-U.body.axisx*X.y),q.y=U.body.posy+(X.x*U.body.axisx+X.y*U.body.axisy),W=W.next}}var Y=U.gverts.next;U.aabb.minx=Y.x,U.aabb.miny=Y.y,U.aabb.maxx=Y.x,U.aabb.maxy=Y.y;for(var K=U.gverts.next.next;null!=K;){var Z=K;Z.x<U.aabb.minx&&(U.aabb.minx=Z.x),Z.x>U.aabb.maxx&&(U.aabb.maxx=Z.x),Z.y<U.aabb.miny&&(U.aabb.miny=Z.y),Z.y>U.aabb.maxy&&(U.aabb.maxy=Z.y),K=K.next}}},ti.prototype.shapesInCircle=function(e,t,i,n,r,o){return null},ti.prototype.bodiesInCircle=function(e,t,i,n,r,o){return null},ti.prototype.validateShape=function(e){if(1==e.type){var t=e.polygon;if(t.zip_gaxi&&null!=t.body){t.zip_gaxi=!1,t.validate_laxi();var i=t.body;if(i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot)),t.zip_gverts&&null!=t.body){t.zip_gverts=!1,t.validate_lverts();var n=t.body;n.zip_axis&&(n.zip_axis=!1,n.axisx=Math.sin(n.rot),n.axisy=Math.cos(n.rot));for(var r=t.lverts.next,o=t.gverts.next;null!=o;){var a=o,s=r;r=r.next,a.x=t.body.posx+(t.body.axisy*s.x-t.body.axisx*s.y),a.y=t.body.posy+(s.x*t.body.axisx+s.y*t.body.axisy),o=o.next}}var p=t.edges.head,l=t.gverts.next,h=l;for(l=l.next;null!=l;){var u=l,d=p.elt;p=p.next,d.gp0=h,d.gp1=u,d.gnormx=t.body.axisy*d.lnormx-t.body.axisx*d.lnormy,d.gnormy=d.lnormx*t.body.axisx+d.lnormy*t.body.axisy,d.gprojection=t.body.posx*d.gnormx+t.body.posy*d.gnormy+d.lprojection,null!=d.wrap_gnorm&&(d.wrap_gnorm.zpp_inner.x=d.gnormx,d.wrap_gnorm.zpp_inner.y=d.gnormy),d.tp0=d.gp0.y*d.gnormx-d.gp0.x*d.gnormy,d.tp1=d.gp1.y*d.gnormx-d.gp1.x*d.gnormy,h=u,l=l.next}var c=p.elt;c.gp0=h,c.gp1=t.gverts.next,c.gnormx=t.body.axisy*c.lnormx-t.body.axisx*c.lnormy,c.gnormy=c.lnormx*t.body.axisx+c.lnormy*t.body.axisy,c.gprojection=t.body.posx*c.gnormx+t.body.posy*c.gnormy+c.lprojection,null!=c.wrap_gnorm&&(c.wrap_gnorm.zpp_inner.x=c.gnormx,c.wrap_gnorm.zpp_inner.y=c.gnormy),c.tp0=c.gp0.y*c.gnormx-c.gp0.x*c.gnormy,c.tp1=c.gp1.y*c.gnormx-c.gp1.x*c.gnormy}}if(e.zip_aabb&&null!=e.body)if(e.zip_aabb=!1,0==e.type){var _=e.circle;if(_.zip_worldCOM&&null!=_.body){if(_.zip_worldCOM=!1,_.zip_localCOM){if(_.zip_localCOM=!1,1==_.type){var y=_.polygon;if(null==y.lverts.next.next)y.localCOMx=y.lverts.next.x,y.localCOMy=y.lverts.next.y;else if(null==y.lverts.next.next.next)y.localCOMx=y.lverts.next.x,y.localCOMy=y.lverts.next.y,y.localCOMx+=y.lverts.next.next.x,y.localCOMy+=y.lverts.next.next.y,y.localCOMx*=.5,y.localCOMy*=.5;else{y.localCOMx=0;var x=y.localCOMy=0,m=y.lverts.next,g=m,f=m=m.next;for(m=m.next;null!=m;){var v=m;x+=f.x*(v.y-g.y);var z=v.y*f.x-v.x*f.y;y.localCOMx+=(f.x+v.x)*z,y.localCOMy+=(f.y+v.y)*z,g=f,f=v,m=m.next}var w=m=y.lverts.next;x+=f.x*(w.y-g.y);var b=w.y*f.x-w.x*f.y;y.localCOMx+=(f.x+w.x)*b,y.localCOMy+=(f.y+w.y)*b,g=f;var S=m=m.next;x+=w.x*(S.y-g.y);var C=S.y*w.x-S.x*w.y;y.localCOMx+=(w.x+S.x)*C,y.localCOMy+=(w.y+S.y)*C;var M=x=1/(3*x);y.localCOMx*=M,y.localCOMy*=M}}null!=_.wrap_localCOM&&(_.wrap_localCOM.zpp_inner.x=_.localCOMx,_.wrap_localCOM.zpp_inner.y=_.localCOMy)}var P=_.body;P.zip_axis&&(P.zip_axis=!1,P.axisx=Math.sin(P.rot),P.axisy=Math.cos(P.rot)),_.worldCOMx=_.body.posx+(_.body.axisy*_.localCOMx-_.body.axisx*_.localCOMy),_.worldCOMy=_.body.posy+(_.localCOMx*_.body.axisx+_.localCOMy*_.body.axisy)}var k=_.radius,T=_.radius;_.aabb.minx=_.worldCOMx-k,_.aabb.miny=_.worldCOMy-T,_.aabb.maxx=_.worldCOMx+k,_.aabb.maxy=_.worldCOMy+T}else{var A=e.polygon;if(A.zip_gverts&&null!=A.body){A.zip_gverts=!1,A.validate_lverts();var O=A.body;O.zip_axis&&(O.zip_axis=!1,O.axisx=Math.sin(O.rot),O.axisy=Math.cos(O.rot));for(var E=A.lverts.next,G=A.gverts.next;null!=G;){var D=G,I=E;E=E.next,D.x=A.body.posx+(A.body.axisy*I.x-A.body.axisx*I.y),D.y=A.body.posy+(I.x*A.body.axisx+I.y*A.body.axisy),G=G.next}}var L=A.gverts.next;A.aabb.minx=L.x,A.aabb.miny=L.y,A.aabb.maxx=L.x,A.aabb.maxy=L.y;for(var B=A.gverts.next.next;null!=B;){var R=B;R.x<A.aabb.minx&&(A.aabb.minx=R.x),R.x>A.aabb.maxx&&(A.aabb.maxx=R.x),R.y<A.aabb.miny&&(A.aabb.miny=R.y),R.y>A.aabb.maxy&&(A.aabb.maxy=R.y),B=B.next}}if(e.zip_worldCOM&&null!=e.body){if(e.zip_worldCOM=!1,e.zip_localCOM){if(e.zip_localCOM=!1,1==e.type){var F=e.polygon;if(null==F.lverts.next.next)F.localCOMx=F.lverts.next.x,F.localCOMy=F.lverts.next.y;else if(null==F.lverts.next.next.next)F.localCOMx=F.lverts.next.x,F.localCOMy=F.lverts.next.y,F.localCOMx+=F.lverts.next.next.x,F.localCOMy+=F.lverts.next.next.y,F.localCOMx*=.5,F.localCOMy*=.5;else{F.localCOMx=0;var j=F.localCOMy=0,N=F.lverts.next,U=N,V=N=N.next;for(N=N.next;null!=N;){var H=N;j+=V.x*(H.y-U.y);var W=H.y*V.x-H.x*V.y;F.localCOMx+=(V.x+H.x)*W,F.localCOMy+=(V.y+H.y)*W,U=V,V=H,N=N.next}var q=N=F.lverts.next;j+=V.x*(q.y-U.y);var X=q.y*V.x-q.x*V.y;F.localCOMx+=(V.x+q.x)*X,F.localCOMy+=(V.y+q.y)*X,U=V;var Y=N=N.next;j+=q.x*(Y.y-U.y);var K=Y.y*q.x-Y.x*q.y;F.localCOMx+=(q.x+Y.x)*K,F.localCOMy+=(q.y+Y.y)*K;var Z=j=1/(3*j);F.localCOMx*=Z,F.localCOMy*=Z}}null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy)}var J=e.body;J.zip_axis&&(J.zip_axis=!1,J.axisx=Math.sin(J.rot),J.axisy=Math.cos(J.rot)),e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy),e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy)}},ti.prototype.shapesInShape=function(e,t,i,n){return null},ti.prototype.bodiesInShape=function(e,t,i,n){return null},ti.prototype.rayCast=function(e,t,i){return null},ti.prototype.rayMultiCast=function(e,t,i,n){return null},ti.prototype.__class__=ti;var Eo=zpp_nape.space.ZPP_AABBNode=function(){this.first_sync=!1,this.synced=!1,this.snext=null,this.moved=!1,this.mnext=null,this.next=null,this.rayt=0,this.height=0,this.child2=null,this.child1=null,this.parent=null,this.dyn=!1,this.shape=null,this.aabb=null,this.height=-1};Eo.__name__=["zpp_nape","space","ZPP_AABBNode"],Eo.prototype.aabb=null,Eo.prototype.shape=null,Eo.prototype.dyn=null,Eo.prototype.parent=null,Eo.prototype.child1=null,Eo.prototype.child2=null,Eo.prototype.height=null,Eo.prototype.rayt=null,Eo.prototype.next=null,Eo.prototype.alloc=function(){null==Oo.zpp_pool?this.aabb=new Oo:(this.aabb=Oo.zpp_pool,Oo.zpp_pool=this.aabb.next,this.aabb.next=null),this.moved=!1,this.synced=!1,this.first_sync=!1},Eo.prototype.free=function(){this.height=-1;var e=this.aabb;null!=e.outer&&(e.outer.zpp_inner=null,e.outer=null),e.wrap_min=e.wrap_max=null,e._invalidate=null,e._validate=null,e.next=Oo.zpp_pool,Oo.zpp_pool=e,this.child1=this.child2=this.parent=null,this.next=null,this.snext=null,this.mnext=null},Eo.prototype.mnext=null,Eo.prototype.moved=null,Eo.prototype.snext=null,Eo.prototype.synced=null,Eo.prototype.first_sync=null,Eo.prototype.isLeaf=function(){return null==this.child1},Eo.prototype.__class__=Eo;var nr=zpp_nape.space.ZPP_AABBPair=function(){this.next=null,this.arb=null,this.di=0,this.id=0,this.sleeping=!1,this.first=!1,this.n2=null,this.n1=null};nr.__name__=["zpp_nape","space","ZPP_AABBPair"],nr.prototype.n1=null,nr.prototype.n2=null,nr.prototype.first=null,nr.prototype.sleeping=null,nr.prototype.id=null,nr.prototype.di=null,nr.prototype.arb=null,nr.prototype.next=null,nr.prototype.alloc=function(){},nr.prototype.free=function(){this.n1=this.n2=null,this.sleeping=!1},nr.prototype.__class__=nr;var Go=zpp_nape.space.ZPP_AABBTree=function(){this.root=null};Go.__name__=["zpp_nape","space","ZPP_AABBTree"],Go.prototype.root=null,Go.prototype.clear=function(){if(null!=this.root){var e=null;for(this.root.next=e,e=this.root;null!=e;){var t=e;e=t.next,(t.next=null)==t.child1?(t.shape.node=null,t.shape.removedFromSpace(),t.shape=null):(null!=t.child1&&(t.child1.next=e,e=t.child1),null!=t.child2&&(t.child2.next=e,e=t.child2)),t.height=-1;var i=t.aabb;null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i.wrap_min=i.wrap_max=null,i._invalidate=null,i._validate=null,i.next=Oo.zpp_pool,Oo.zpp_pool=i,t.child1=t.child2=t.parent=null,t.next=null,t.snext=null,t.mnext=null,t.next=Eo.zpp_pool,Eo.zpp_pool=t}this.root=null}},Go.prototype.insertLeaf=function(e){if(null==this.root)this.root=e,this.root.parent=null;else{for(var t=e.aabb,i=this.root;null!=i.child1;){var n=i.child1,r=i.child2,o=i.aabb,a=2*(o.maxx-o.minx+(o.maxy-o.miny)),s=Go.tmpaabb,p=i.aabb;s.minx=p.minx<t.minx?p.minx:t.minx,s.miny=p.miny<t.miny?p.miny:t.miny,s.maxx=p.maxx>t.maxx?p.maxx:t.maxx,s.maxy=p.maxy>t.maxy?p.maxy:t.maxy;var l,h=Go.tmpaabb,u=2*(h.maxx-h.minx+(h.maxy-h.miny)),d=2*u,c=2*(u-a),_=Go.tmpaabb,y=n.aabb;if(_.minx=t.minx<y.minx?t.minx:y.minx,_.miny=t.miny<y.miny?t.miny:y.miny,_.maxx=t.maxx>y.maxx?t.maxx:y.maxx,_.maxy=t.maxy>y.maxy?t.maxy:y.maxy,null==n.child1){var x=Go.tmpaabb;l=2*(x.maxx-x.minx+(x.maxy-x.miny))+c}else{var m=n.aabb,g=2*(m.maxx-m.minx+(m.maxy-m.miny)),f=Go.tmpaabb;l=2*(f.maxx-f.minx+(f.maxy-f.miny))-g+c}var v,z=Go.tmpaabb,w=r.aabb;if(z.minx=t.minx<w.minx?t.minx:w.minx,z.miny=t.miny<w.miny?t.miny:w.miny,z.maxx=t.maxx>w.maxx?t.maxx:w.maxx,z.maxy=t.maxy>w.maxy?t.maxy:w.maxy,null==r.child1){var b=Go.tmpaabb;v=2*(b.maxx-b.minx+(b.maxy-b.miny))+c}else{var S=r.aabb,C=2*(S.maxx-S.minx+(S.maxy-S.miny)),M=Go.tmpaabb;v=2*(M.maxx-M.minx+(M.maxy-M.miny))-C+c}if(d<l&&d<v)break;i=l<v?n:r}var P,k=i,T=k.parent;null==Eo.zpp_pool?P=new Eo:(P=Eo.zpp_pool,Eo.zpp_pool=P.next,P.next=null),null==Oo.zpp_pool?P.aabb=new Oo:(P.aabb=Oo.zpp_pool,Oo.zpp_pool=P.aabb.next,P.aabb.next=null),P.moved=!1,P.synced=!1,P.first_sync=!1,P.parent=T;var A=P.aabb,O=k.aabb;for(A.minx=t.minx<O.minx?t.minx:O.minx,A.miny=t.miny<O.miny?t.miny:O.miny,A.maxx=t.maxx>O.maxx?t.maxx:O.maxx,A.maxy=t.maxy>O.maxy?t.maxy:O.maxy,P.height=k.height+1,null!=T?(T.child1==k?T.child1=P:T.child2=P,P.child1=k,P.child2=e,k.parent=P,e.parent=P):(P.child1=k,P.child2=e,k.parent=P,e.parent=P,this.root=P),i=e.parent;null!=i;){if(null==i.child1||i.height<2)i=i;else{var E=i.child1,G=i.child2,D=G.height-E.height;if(1<D){var I=G.child1,L=G.child2;if(G.child1=i,G.parent=i.parent,null!=(i.parent=G).parent?G.parent.child1==i?G.parent.child1=G:G.parent.child2=G:this.root=G,I.height>L.height){G.child2=I;var B=((i.child2=L).parent=i).aabb,R=E.aabb,F=L.aabb;B.minx=R.minx<F.minx?R.minx:F.minx,B.miny=R.miny<F.miny?R.miny:F.miny,B.maxx=R.maxx>F.maxx?R.maxx:F.maxx,B.maxy=R.maxy>F.maxy?R.maxy:F.maxy;var j=G.aabb,N=i.aabb,U=I.aabb;j.minx=N.minx<U.minx?N.minx:U.minx,j.miny=N.miny<U.miny?N.miny:U.miny,j.maxx=N.maxx>U.maxx?N.maxx:U.maxx,j.maxy=N.maxy>U.maxy?N.maxy:U.maxy;var V=E.height,H=L.height;i.height=1+(H<V?V:H);var W=i.height,q=I.height;G.height=1+(q<W?W:q)}else{G.child2=L;var X=((i.child2=I).parent=i).aabb,Y=E.aabb,K=I.aabb;X.minx=Y.minx<K.minx?Y.minx:K.minx,X.miny=Y.miny<K.miny?Y.miny:K.miny,X.maxx=Y.maxx>K.maxx?Y.maxx:K.maxx,X.maxy=Y.maxy>K.maxy?Y.maxy:K.maxy;var Z=G.aabb,J=i.aabb,Q=L.aabb;Z.minx=J.minx<Q.minx?J.minx:Q.minx,Z.miny=J.miny<Q.miny?J.miny:Q.miny,Z.maxx=J.maxx>Q.maxx?J.maxx:Q.maxx,Z.maxy=J.maxy>Q.maxy?J.maxy:Q.maxy;var $=E.height,ee=I.height;i.height=1+(ee<$?$:ee);var te=i.height,ie=L.height;G.height=1+(ie<te?te:ie)}i=G}else if(D<-1){var ne=E.child1,re=E.child2;if(E.child1=i,E.parent=i.parent,null!=(i.parent=E).parent?E.parent.child1==i?E.parent.child1=E:E.parent.child2=E:this.root=E,ne.height>re.height){E.child2=ne;var oe=((i.child1=re).parent=i).aabb,ae=G.aabb,se=re.aabb;oe.minx=ae.minx<se.minx?ae.minx:se.minx,oe.miny=ae.miny<se.miny?ae.miny:se.miny,oe.maxx=ae.maxx>se.maxx?ae.maxx:se.maxx,oe.maxy=ae.maxy>se.maxy?ae.maxy:se.maxy;var pe=E.aabb,le=i.aabb,he=ne.aabb;pe.minx=le.minx<he.minx?le.minx:he.minx,pe.miny=le.miny<he.miny?le.miny:he.miny,pe.maxx=le.maxx>he.maxx?le.maxx:he.maxx,pe.maxy=le.maxy>he.maxy?le.maxy:he.maxy;var ue=G.height,de=re.height;i.height=1+(de<ue?ue:de);var ce=i.height,_e=ne.height;E.height=1+(_e<ce?ce:_e)}else{E.child2=re;var ye=((i.child1=ne).parent=i).aabb,xe=G.aabb,me=ne.aabb;ye.minx=xe.minx<me.minx?xe.minx:me.minx,ye.miny=xe.miny<me.miny?xe.miny:me.miny,ye.maxx=xe.maxx>me.maxx?xe.maxx:me.maxx,ye.maxy=xe.maxy>me.maxy?xe.maxy:me.maxy;var ge=E.aabb,fe=i.aabb,ve=re.aabb;ge.minx=fe.minx<ve.minx?fe.minx:ve.minx,ge.miny=fe.miny<ve.miny?fe.miny:ve.miny,ge.maxx=fe.maxx>ve.maxx?fe.maxx:ve.maxx,ge.maxy=fe.maxy>ve.maxy?fe.maxy:ve.maxy;var ze=G.height,we=ne.height;i.height=1+(we<ze?ze:we);var be=i.height,Se=re.height;E.height=1+(Se<be?be:Se)}i=E}else i=i}var Ce=i.child1,Me=i.child2,Pe=Ce.height,ke=Me.height;i.height=1+(ke<Pe?Pe:ke);var Te=i.aabb,Ae=Ce.aabb,Oe=Me.aabb;Te.minx=Ae.minx<Oe.minx?Ae.minx:Oe.minx,Te.miny=Ae.miny<Oe.miny?Ae.miny:Oe.miny,Te.maxx=Ae.maxx>Oe.maxx?Ae.maxx:Oe.maxx,Te.maxy=Ae.maxy>Oe.maxy?Ae.maxy:Oe.maxy,i=i.parent}}},Go.prototype.inlined_insertLeaf=function(e){if(null==this.root)this.root=e,this.root.parent=null;else{for(var t=e.aabb,i=this.root;null!=i.child1;){var n=i.child1,r=i.child2,o=i.aabb,a=2*(o.maxx-o.minx+(o.maxy-o.miny)),s=Go.tmpaabb,p=i.aabb;s.minx=p.minx<t.minx?p.minx:t.minx,s.miny=p.miny<t.miny?p.miny:t.miny,s.maxx=p.maxx>t.maxx?p.maxx:t.maxx,s.maxy=p.maxy>t.maxy?p.maxy:t.maxy;var l,h=Go.tmpaabb,u=2*(h.maxx-h.minx+(h.maxy-h.miny)),d=2*u,c=2*(u-a),_=Go.tmpaabb,y=n.aabb;if(_.minx=t.minx<y.minx?t.minx:y.minx,_.miny=t.miny<y.miny?t.miny:y.miny,_.maxx=t.maxx>y.maxx?t.maxx:y.maxx,_.maxy=t.maxy>y.maxy?t.maxy:y.maxy,null==n.child1){var x=Go.tmpaabb;l=2*(x.maxx-x.minx+(x.maxy-x.miny))+c}else{var m=n.aabb,g=2*(m.maxx-m.minx+(m.maxy-m.miny)),f=Go.tmpaabb;l=2*(f.maxx-f.minx+(f.maxy-f.miny))-g+c}var v,z=Go.tmpaabb,w=r.aabb;if(z.minx=t.minx<w.minx?t.minx:w.minx,z.miny=t.miny<w.miny?t.miny:w.miny,z.maxx=t.maxx>w.maxx?t.maxx:w.maxx,z.maxy=t.maxy>w.maxy?t.maxy:w.maxy,null==r.child1){var b=Go.tmpaabb;v=2*(b.maxx-b.minx+(b.maxy-b.miny))+c}else{var S=r.aabb,C=2*(S.maxx-S.minx+(S.maxy-S.miny)),M=Go.tmpaabb;v=2*(M.maxx-M.minx+(M.maxy-M.miny))-C+c}if(d<l&&d<v)break;i=l<v?n:r}var P,k=i,T=k.parent;null==Eo.zpp_pool?P=new Eo:(P=Eo.zpp_pool,Eo.zpp_pool=P.next,P.next=null),null==Oo.zpp_pool?P.aabb=new Oo:(P.aabb=Oo.zpp_pool,Oo.zpp_pool=P.aabb.next,P.aabb.next=null),P.moved=!1,P.synced=!1,P.first_sync=!1,P.parent=T;var A=P.aabb,O=k.aabb;for(A.minx=t.minx<O.minx?t.minx:O.minx,A.miny=t.miny<O.miny?t.miny:O.miny,A.maxx=t.maxx>O.maxx?t.maxx:O.maxx,A.maxy=t.maxy>O.maxy?t.maxy:O.maxy,P.height=k.height+1,null!=T?(T.child1==k?T.child1=P:T.child2=P,P.child1=k,P.child2=e,k.parent=P,e.parent=P):(P.child1=k,P.child2=e,k.parent=P,e.parent=P,this.root=P),i=e.parent;null!=i;){if(null==i.child1||i.height<2)i=i;else{var E=i.child1,G=i.child2,D=G.height-E.height;if(1<D){var I=G.child1,L=G.child2;if(G.child1=i,G.parent=i.parent,null!=(i.parent=G).parent?G.parent.child1==i?G.parent.child1=G:G.parent.child2=G:this.root=G,I.height>L.height){G.child2=I;var B=((i.child2=L).parent=i).aabb,R=E.aabb,F=L.aabb;B.minx=R.minx<F.minx?R.minx:F.minx,B.miny=R.miny<F.miny?R.miny:F.miny,B.maxx=R.maxx>F.maxx?R.maxx:F.maxx,B.maxy=R.maxy>F.maxy?R.maxy:F.maxy;var j=G.aabb,N=i.aabb,U=I.aabb;j.minx=N.minx<U.minx?N.minx:U.minx,j.miny=N.miny<U.miny?N.miny:U.miny,j.maxx=N.maxx>U.maxx?N.maxx:U.maxx,j.maxy=N.maxy>U.maxy?N.maxy:U.maxy;var V=E.height,H=L.height;i.height=1+(H<V?V:H);var W=i.height,q=I.height;G.height=1+(q<W?W:q)}else{G.child2=L;var X=((i.child2=I).parent=i).aabb,Y=E.aabb,K=I.aabb;X.minx=Y.minx<K.minx?Y.minx:K.minx,X.miny=Y.miny<K.miny?Y.miny:K.miny,X.maxx=Y.maxx>K.maxx?Y.maxx:K.maxx,X.maxy=Y.maxy>K.maxy?Y.maxy:K.maxy;var Z=G.aabb,J=i.aabb,Q=L.aabb;Z.minx=J.minx<Q.minx?J.minx:Q.minx,Z.miny=J.miny<Q.miny?J.miny:Q.miny,Z.maxx=J.maxx>Q.maxx?J.maxx:Q.maxx,Z.maxy=J.maxy>Q.maxy?J.maxy:Q.maxy;var $=E.height,ee=I.height;i.height=1+(ee<$?$:ee);var te=i.height,ie=L.height;G.height=1+(ie<te?te:ie)}i=G}else if(D<-1){var ne=E.child1,re=E.child2;if(E.child1=i,E.parent=i.parent,null!=(i.parent=E).parent?E.parent.child1==i?E.parent.child1=E:E.parent.child2=E:this.root=E,ne.height>re.height){E.child2=ne;var oe=((i.child1=re).parent=i).aabb,ae=G.aabb,se=re.aabb;oe.minx=ae.minx<se.minx?ae.minx:se.minx,oe.miny=ae.miny<se.miny?ae.miny:se.miny,oe.maxx=ae.maxx>se.maxx?ae.maxx:se.maxx,oe.maxy=ae.maxy>se.maxy?ae.maxy:se.maxy;var pe=E.aabb,le=i.aabb,he=ne.aabb;pe.minx=le.minx<he.minx?le.minx:he.minx,pe.miny=le.miny<he.miny?le.miny:he.miny,pe.maxx=le.maxx>he.maxx?le.maxx:he.maxx,pe.maxy=le.maxy>he.maxy?le.maxy:he.maxy;var ue=G.height,de=re.height;i.height=1+(de<ue?ue:de);var ce=i.height,_e=ne.height;E.height=1+(_e<ce?ce:_e)}else{E.child2=re;var ye=((i.child1=ne).parent=i).aabb,xe=G.aabb,me=ne.aabb;ye.minx=xe.minx<me.minx?xe.minx:me.minx,ye.miny=xe.miny<me.miny?xe.miny:me.miny,ye.maxx=xe.maxx>me.maxx?xe.maxx:me.maxx,ye.maxy=xe.maxy>me.maxy?xe.maxy:me.maxy;var ge=E.aabb,fe=i.aabb,ve=re.aabb;ge.minx=fe.minx<ve.minx?fe.minx:ve.minx,ge.miny=fe.miny<ve.miny?fe.miny:ve.miny,ge.maxx=fe.maxx>ve.maxx?fe.maxx:ve.maxx,ge.maxy=fe.maxy>ve.maxy?fe.maxy:ve.maxy;var ze=G.height,we=ne.height;i.height=1+(we<ze?ze:we);var be=i.height,Se=re.height;E.height=1+(Se<be?be:Se)}i=E}else i=i}var Ce=i.child1,Me=i.child2,Pe=Ce.height,ke=Me.height;i.height=1+(ke<Pe?Pe:ke);var Te=i.aabb,Ae=Ce.aabb,Oe=Me.aabb;Te.minx=Ae.minx<Oe.minx?Ae.minx:Oe.minx,Te.miny=Ae.miny<Oe.miny?Ae.miny:Oe.miny,Te.maxx=Ae.maxx>Oe.maxx?Ae.maxx:Oe.maxx,Te.maxy=Ae.maxy>Oe.maxy?Ae.maxy:Oe.maxy,i=i.parent}}},Go.prototype.removeLeaf=function(e){if(e==this.root)this.root=null;else{var t=e.parent,i=t.parent,n=t.child1==e?t.child2:t.child1;if(null!=i){i.child1==t?i.child1=n:i.child2=n,n.parent=i,t.height=-1;var r=t.aabb;null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r.wrap_min=r.wrap_max=null,r._invalidate=null,r._validate=null,r.next=Oo.zpp_pool,Oo.zpp_pool=r,t.child1=t.child2=t.parent=null,t.next=null,t.snext=null,t.mnext=null,t.next=Eo.zpp_pool,Eo.zpp_pool=t;for(var o=i;null!=o;){if(null==o.child1||o.height<2)o=o;else{var a=o.child1,s=o.child2,p=s.height-a.height;if(1<p){var l=s.child1,h=s.child2;if(s.child1=o,s.parent=o.parent,null!=(o.parent=s).parent?s.parent.child1==o?s.parent.child1=s:s.parent.child2=s:this.root=s,l.height>h.height){s.child2=l;var u=((o.child2=h).parent=o).aabb,d=a.aabb,c=h.aabb;u.minx=d.minx<c.minx?d.minx:c.minx,u.miny=d.miny<c.miny?d.miny:c.miny,u.maxx=d.maxx>c.maxx?d.maxx:c.maxx,u.maxy=d.maxy>c.maxy?d.maxy:c.maxy;var _=s.aabb,y=o.aabb,x=l.aabb;_.minx=y.minx<x.minx?y.minx:x.minx,_.miny=y.miny<x.miny?y.miny:x.miny,_.maxx=y.maxx>x.maxx?y.maxx:x.maxx,_.maxy=y.maxy>x.maxy?y.maxy:x.maxy;var m=a.height,g=h.height;o.height=1+(g<m?m:g);var f=o.height,v=l.height;s.height=1+(v<f?f:v)}else{s.child2=h;var z=((o.child2=l).parent=o).aabb,w=a.aabb,b=l.aabb;z.minx=w.minx<b.minx?w.minx:b.minx,z.miny=w.miny<b.miny?w.miny:b.miny,z.maxx=w.maxx>b.maxx?w.maxx:b.maxx,z.maxy=w.maxy>b.maxy?w.maxy:b.maxy;var S=s.aabb,C=o.aabb,M=h.aabb;S.minx=C.minx<M.minx?C.minx:M.minx,S.miny=C.miny<M.miny?C.miny:M.miny,S.maxx=C.maxx>M.maxx?C.maxx:M.maxx,S.maxy=C.maxy>M.maxy?C.maxy:M.maxy;var P=a.height,k=l.height;o.height=1+(k<P?P:k);var T=o.height,A=h.height;s.height=1+(A<T?T:A)}o=s}else if(p<-1){var O=a.child1,E=a.child2;if(a.child1=o,a.parent=o.parent,null!=(o.parent=a).parent?a.parent.child1==o?a.parent.child1=a:a.parent.child2=a:this.root=a,O.height>E.height){a.child2=O;var G=((o.child1=E).parent=o).aabb,D=s.aabb,I=E.aabb;G.minx=D.minx<I.minx?D.minx:I.minx,G.miny=D.miny<I.miny?D.miny:I.miny,G.maxx=D.maxx>I.maxx?D.maxx:I.maxx,G.maxy=D.maxy>I.maxy?D.maxy:I.maxy;var L=a.aabb,B=o.aabb,R=O.aabb;L.minx=B.minx<R.minx?B.minx:R.minx,L.miny=B.miny<R.miny?B.miny:R.miny,L.maxx=B.maxx>R.maxx?B.maxx:R.maxx,L.maxy=B.maxy>R.maxy?B.maxy:R.maxy;var F=s.height,j=E.height;o.height=1+(j<F?F:j);var N=o.height,U=O.height;a.height=1+(U<N?N:U)}else{a.child2=E;var V=((o.child1=O).parent=o).aabb,H=s.aabb,W=O.aabb;V.minx=H.minx<W.minx?H.minx:W.minx,V.miny=H.miny<W.miny?H.miny:W.miny,V.maxx=H.maxx>W.maxx?H.maxx:W.maxx,V.maxy=H.maxy>W.maxy?H.maxy:W.maxy;var q=a.aabb,X=o.aabb,Y=E.aabb;q.minx=X.minx<Y.minx?X.minx:Y.minx,q.miny=X.miny<Y.miny?X.miny:Y.miny,q.maxx=X.maxx>Y.maxx?X.maxx:Y.maxx,q.maxy=X.maxy>Y.maxy?X.maxy:Y.maxy;var K=s.height,Z=O.height;o.height=1+(Z<K?K:Z);var J=o.height,Q=E.height;a.height=1+(Q<J?J:Q)}o=a}else o=o}var $=o.child1,ee=o.child2,te=o.aabb,ie=$.aabb,ne=ee.aabb;te.minx=ie.minx<ne.minx?ie.minx:ne.minx,te.miny=ie.miny<ne.miny?ie.miny:ne.miny,te.maxx=ie.maxx>ne.maxx?ie.maxx:ne.maxx,te.maxy=ie.maxy>ne.maxy?ie.maxy:ne.maxy;var re=$.height,oe=ee.height;o.height=1+(oe<re?re:oe),o=o.parent}}else{(this.root=n).parent=null,t.height=-1;var ae=t.aabb;null!=ae.outer&&(ae.outer.zpp_inner=null,ae.outer=null),ae.wrap_min=ae.wrap_max=null,ae._invalidate=null,ae._validate=null,ae.next=Oo.zpp_pool,Oo.zpp_pool=ae,t.child1=t.child2=t.parent=null,t.next=null,t.snext=null,t.mnext=null,t.next=Eo.zpp_pool,Eo.zpp_pool=t}}},Go.prototype.inlined_removeLeaf=function(e){if(e!=this.root){var t=e.parent,i=t.parent,n=t.child1==e?t.child2:t.child1;if(null!=i){i.child1==t?i.child1=n:i.child2=n,n.parent=i,t.height=-1;var r=t.aabb;null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r.wrap_min=r.wrap_max=null,r._invalidate=null,r._validate=null,r.next=Oo.zpp_pool,Oo.zpp_pool=r,t.child1=t.child2=t.parent=null,t.next=null,t.snext=null,t.mnext=null,t.next=Eo.zpp_pool,Eo.zpp_pool=t;for(var o=i;null!=o;){if(null==o.child1||o.height<2)o=o;else{var a=o.child1,s=o.child2,p=s.height-a.height;if(1<p){var l=s.child1,h=s.child2;if(s.child1=o,s.parent=o.parent,null!=(o.parent=s).parent?s.parent.child1==o?s.parent.child1=s:s.parent.child2=s:this.root=s,l.height>h.height){s.child2=l;var u=((o.child2=h).parent=o).aabb,d=a.aabb,c=h.aabb;u.minx=d.minx<c.minx?d.minx:c.minx,u.miny=d.miny<c.miny?d.miny:c.miny,u.maxx=d.maxx>c.maxx?d.maxx:c.maxx,u.maxy=d.maxy>c.maxy?d.maxy:c.maxy;var _=s.aabb,y=o.aabb,x=l.aabb;_.minx=y.minx<x.minx?y.minx:x.minx,_.miny=y.miny<x.miny?y.miny:x.miny,_.maxx=y.maxx>x.maxx?y.maxx:x.maxx,_.maxy=y.maxy>x.maxy?y.maxy:x.maxy;var m=a.height,g=h.height;o.height=1+(g<m?m:g);var f=o.height,v=l.height;s.height=1+(v<f?f:v)}else{s.child2=h;var z=((o.child2=l).parent=o).aabb,w=a.aabb,b=l.aabb;z.minx=w.minx<b.minx?w.minx:b.minx,z.miny=w.miny<b.miny?w.miny:b.miny,z.maxx=w.maxx>b.maxx?w.maxx:b.maxx,z.maxy=w.maxy>b.maxy?w.maxy:b.maxy;var S=s.aabb,C=o.aabb,M=h.aabb;S.minx=C.minx<M.minx?C.minx:M.minx,S.miny=C.miny<M.miny?C.miny:M.miny,S.maxx=C.maxx>M.maxx?C.maxx:M.maxx,S.maxy=C.maxy>M.maxy?C.maxy:M.maxy;var P=a.height,k=l.height;o.height=1+(k<P?P:k);var T=o.height,A=h.height;s.height=1+(A<T?T:A)}o=s}else if(p<-1){var O=a.child1,E=a.child2;if(a.child1=o,a.parent=o.parent,null!=(o.parent=a).parent?a.parent.child1==o?a.parent.child1=a:a.parent.child2=a:this.root=a,O.height>E.height){a.child2=O;var G=((o.child1=E).parent=o).aabb,D=s.aabb,I=E.aabb;G.minx=D.minx<I.minx?D.minx:I.minx,G.miny=D.miny<I.miny?D.miny:I.miny,G.maxx=D.maxx>I.maxx?D.maxx:I.maxx,G.maxy=D.maxy>I.maxy?D.maxy:I.maxy;var L=a.aabb,B=o.aabb,R=O.aabb;L.minx=B.minx<R.minx?B.minx:R.minx,L.miny=B.miny<R.miny?B.miny:R.miny,L.maxx=B.maxx>R.maxx?B.maxx:R.maxx,L.maxy=B.maxy>R.maxy?B.maxy:R.maxy;var F=s.height,j=E.height;o.height=1+(j<F?F:j);var N=o.height,U=O.height;a.height=1+(U<N?N:U)}else{a.child2=E;var V=((o.child1=O).parent=o).aabb,H=s.aabb,W=O.aabb;V.minx=H.minx<W.minx?H.minx:W.minx,V.miny=H.miny<W.miny?H.miny:W.miny,V.maxx=H.maxx>W.maxx?H.maxx:W.maxx,V.maxy=H.maxy>W.maxy?H.maxy:W.maxy;var q=a.aabb,X=o.aabb,Y=E.aabb;q.minx=X.minx<Y.minx?X.minx:Y.minx,q.miny=X.miny<Y.miny?X.miny:Y.miny,q.maxx=X.maxx>Y.maxx?X.maxx:Y.maxx,q.maxy=X.maxy>Y.maxy?X.maxy:Y.maxy;var K=s.height,Z=O.height;o.height=1+(Z<K?K:Z);var J=o.height,Q=E.height;a.height=1+(Q<J?J:Q)}o=a}else o=o}var $=o.child1,ee=o.child2,te=o.aabb,ie=$.aabb,ne=ee.aabb;te.minx=ie.minx<ne.minx?ie.minx:ne.minx,te.miny=ie.miny<ne.miny?ie.miny:ne.miny,te.maxx=ie.maxx>ne.maxx?ie.maxx:ne.maxx,te.maxy=ie.maxy>ne.maxy?ie.maxy:ne.maxy;var re=$.height,oe=ee.height;o.height=1+(oe<re?re:oe),o=o.parent}}else{(this.root=n).parent=null,t.height=-1;var ae=t.aabb;null!=ae.outer&&(ae.outer.zpp_inner=null,ae.outer=null),ae.wrap_min=ae.wrap_max=null,ae._invalidate=null,ae._validate=null,ae.next=Oo.zpp_pool,Oo.zpp_pool=ae,t.child1=t.child2=t.parent=null,t.next=null,t.snext=null,t.mnext=null,t.next=Eo.zpp_pool,Eo.zpp_pool=t}}else this.root=null},Go.prototype.balance=function(e){if(null==e.child1||e.height<2)return e;var t=e.child1,i=e.child2,n=i.height-t.height;if(1<n){var r=i.child1,o=i.child2;if(i.child1=e,i.parent=e.parent,null!=(e.parent=i).parent?i.parent.child1==e?i.parent.child1=i:i.parent.child2=i:this.root=i,r.height>o.height){i.child2=r;var a=((e.child2=o).parent=e).aabb,s=t.aabb,p=o.aabb;a.minx=s.minx<p.minx?s.minx:p.minx,a.miny=s.miny<p.miny?s.miny:p.miny,a.maxx=s.maxx>p.maxx?s.maxx:p.maxx,a.maxy=s.maxy>p.maxy?s.maxy:p.maxy;var l=i.aabb,h=e.aabb,u=r.aabb;l.minx=h.minx<u.minx?h.minx:u.minx,l.miny=h.miny<u.miny?h.miny:u.miny,l.maxx=h.maxx>u.maxx?h.maxx:u.maxx,l.maxy=h.maxy>u.maxy?h.maxy:u.maxy;var d=t.height,c=o.height;e.height=1+(c<d?d:c);var _=e.height,y=r.height;i.height=1+(y<_?_:y)}else{i.child2=o;var x=((e.child2=r).parent=e).aabb,m=t.aabb,g=r.aabb;x.minx=m.minx<g.minx?m.minx:g.minx,x.miny=m.miny<g.miny?m.miny:g.miny,x.maxx=m.maxx>g.maxx?m.maxx:g.maxx,x.maxy=m.maxy>g.maxy?m.maxy:g.maxy;var f=i.aabb,v=e.aabb,z=o.aabb;f.minx=v.minx<z.minx?v.minx:z.minx,f.miny=v.miny<z.miny?v.miny:z.miny,f.maxx=v.maxx>z.maxx?v.maxx:z.maxx,f.maxy=v.maxy>z.maxy?v.maxy:z.maxy;var w=t.height,b=r.height;e.height=1+(b<w?w:b);var S=e.height,C=o.height;i.height=1+(C<S?S:C)}return i}if(n<-1){var M=t.child1,P=t.child2;if(t.child1=e,t.parent=e.parent,null!=(e.parent=t).parent?t.parent.child1==e?t.parent.child1=t:t.parent.child2=t:this.root=t,M.height>P.height){t.child2=M;var k=((e.child1=P).parent=e).aabb,T=i.aabb,A=P.aabb;k.minx=T.minx<A.minx?T.minx:A.minx,k.miny=T.miny<A.miny?T.miny:A.miny,k.maxx=T.maxx>A.maxx?T.maxx:A.maxx,k.maxy=T.maxy>A.maxy?T.maxy:A.maxy;var O=t.aabb,E=e.aabb,G=M.aabb;O.minx=E.minx<G.minx?E.minx:G.minx,O.miny=E.miny<G.miny?E.miny:G.miny,O.maxx=E.maxx>G.maxx?E.maxx:G.maxx,O.maxy=E.maxy>G.maxy?E.maxy:G.maxy;var D=i.height,I=P.height;e.height=1+(I<D?D:I);var L=e.height,B=M.height;t.height=1+(B<L?L:B)}else{t.child2=P;var R=((e.child1=M).parent=e).aabb,F=i.aabb,j=M.aabb;R.minx=F.minx<j.minx?F.minx:j.minx,R.miny=F.miny<j.miny?F.miny:j.miny,R.maxx=F.maxx>j.maxx?F.maxx:j.maxx,R.maxy=F.maxy>j.maxy?F.maxy:j.maxy;var N=t.aabb,U=e.aabb,V=P.aabb;N.minx=U.minx<V.minx?U.minx:V.minx,N.miny=U.miny<V.miny?U.miny:V.miny,N.maxx=U.maxx>V.maxx?U.maxx:V.maxx,N.maxy=U.maxy>V.maxy?U.maxy:V.maxy;var H=i.height,W=M.height;e.height=1+(W<H?H:W);var q=e.height,X=P.height;t.height=1+(X<q?q:X)}return t}return e},Go.prototype.__class__=Go;var ii=zpp_nape.space.ZPP_DynAABBPhase=function(e){this.openlist=null,this.failed=null,this.treeStack2=null,this.treeStack=null,this.moves=null,this.syncs=null,this.pairs=null,this.dtree=null,this.stree=null,ti.call(this),this.space=e,this.is_sweep=!1,(this.dynab=this).stree=new Go,this.dtree=new Go};ii.__name__=["zpp_nape","space","ZPP_DynAABBPhase"],ii.__super__=ti,ii.prototype=Object.create(ti.prototype),ii.prototype.stree=null,ii.prototype.dtree=null,ii.prototype.pairs=null,ii.prototype.syncs=null,ii.prototype.moves=null,ii.prototype.dyn=function(e){return 1!=e.body.type&&!e.body.component.sleeping},ii.prototype.__insert=function(e){var t;null==Eo.zpp_pool?t=new Eo:(t=Eo.zpp_pool,Eo.zpp_pool=t.next,t.next=null),null==Oo.zpp_pool?t.aabb=new Oo:(t.aabb=Oo.zpp_pool,Oo.zpp_pool=t.aabb.next,t.aabb.next=null),t.moved=!1,t.synced=!1,t.first_sync=!1,((t.shape=e).node=t).synced=!0,t.first_sync=!0,t.snext=this.syncs,this.syncs=t},ii.prototype.__remove=function(e){var t=e.node;if(t.first_sync||(t.dyn?this.dtree.removeLeaf(t):this.stree.removeLeaf(t)),e.node=null,t.synced){for(var i=null,n=this.syncs;null!=n&&n!=t;)n=(i=n).snext;null==i?this.syncs=n.snext:i.snext=n.snext,n.snext=null,t.synced=!1}if(t.moved){for(var r=null,o=this.moves;null!=o&&o!=t;)o=(r=o).mnext;null==r?this.moves=o.mnext:r.mnext=o.mnext,o.mnext=null,t.moved=!1}for(var a=null,s=this.pairs;null!=s;){var p=s.next;if(s.n1!=t&&s.n2!=t)a=s,s=p;else{null==a?this.pairs=p:a.next=p,null!=s.arb&&(s.arb.pair=null),s.arb=null,s.n1.shape.pairs.remove(s),s.n2.shape.pairs.remove(s);var l=s;l.n1=l.n2=null,l.sleeping=!1,l.next=nr.zpp_pool,nr.zpp_pool=l,s=p}}for(;null!=e.pairs.head;){var h=e.pairs.pop_unsafe();h.n1==t?h.n2.shape.pairs.remove(h):h.n1.shape.pairs.remove(h),null!=h.arb&&(h.arb.pair=null),h.arb=null,h.n1=h.n2=null,h.sleeping=!1,h.next=nr.zpp_pool,nr.zpp_pool=h}t.height=-1;var u=t.aabb;null!=u.outer&&(u.outer.zpp_inner=null,u.outer=null),u.wrap_min=u.wrap_max=null,u._invalidate=null,u._validate=null,u.next=Oo.zpp_pool,Oo.zpp_pool=u,t.child1=t.child2=t.parent=null,t.next=null,t.snext=null,t.mnext=null,t.next=Eo.zpp_pool,Eo.zpp_pool=t},ii.prototype.__sync=function(e){var t=e.node;if(!t.synced){if(!this.space.continuous&&e.zip_aabb&&null!=e.body)if(e.zip_aabb=!1,0==e.type){var i=e.circle;if(i.zip_worldCOM&&null!=i.body){if(i.zip_worldCOM=!1,i.zip_localCOM){if(i.zip_localCOM=!1,1==i.type){var n=i.polygon;if(null==n.lverts.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y;else if(null==n.lverts.next.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y,n.localCOMx+=n.lverts.next.next.x,n.localCOMy+=n.lverts.next.next.y,n.localCOMx*=.5,n.localCOMy*=.5;else{n.localCOMx=0;var r=n.localCOMy=0,o=n.lverts.next,a=o,s=o=o.next;for(o=o.next;null!=o;){var p=o;r+=s.x*(p.y-a.y);var l=p.y*s.x-p.x*s.y;n.localCOMx+=(s.x+p.x)*l,n.localCOMy+=(s.y+p.y)*l,a=s,s=p,o=o.next}var h=o=n.lverts.next;r+=s.x*(h.y-a.y);var u=h.y*s.x-h.x*s.y;n.localCOMx+=(s.x+h.x)*u,n.localCOMy+=(s.y+h.y)*u,a=s;var d=o=o.next;r+=h.x*(d.y-a.y);var c=d.y*h.x-d.x*h.y;n.localCOMx+=(h.x+d.x)*c,n.localCOMy+=(h.y+d.y)*c;var _=r=1/(3*r);n.localCOMx*=_,n.localCOMy*=_}}null!=i.wrap_localCOM&&(i.wrap_localCOM.zpp_inner.x=i.localCOMx,i.wrap_localCOM.zpp_inner.y=i.localCOMy)}var y=i.body;y.zip_axis&&(y.zip_axis=!1,y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot)),i.worldCOMx=i.body.posx+(i.body.axisy*i.localCOMx-i.body.axisx*i.localCOMy),i.worldCOMy=i.body.posy+(i.localCOMx*i.body.axisx+i.localCOMy*i.body.axisy)}var x=i.radius,m=i.radius;i.aabb.minx=i.worldCOMx-x,i.aabb.miny=i.worldCOMy-m,i.aabb.maxx=i.worldCOMx+x,i.aabb.maxy=i.worldCOMy+m}else{var g=e.polygon;if(g.zip_gverts&&null!=g.body){g.zip_gverts=!1,g.validate_lverts();var f=g.body;f.zip_axis&&(f.zip_axis=!1,f.axisx=Math.sin(f.rot),f.axisy=Math.cos(f.rot));for(var v=g.lverts.next,z=g.gverts.next;null!=z;){var w=z,b=v;v=v.next,w.x=g.body.posx+(g.body.axisy*b.x-g.body.axisx*b.y),w.y=g.body.posy+(b.x*g.body.axisx+b.y*g.body.axisy),z=z.next}}var S=g.gverts.next;g.aabb.minx=S.x,g.aabb.miny=S.y,g.aabb.maxx=S.x,g.aabb.maxy=S.y;for(var C=g.gverts.next.next;null!=C;){var M=C;M.x<g.aabb.minx&&(g.aabb.minx=M.x),M.x>g.aabb.maxx&&(g.aabb.maxx=M.x),M.y<g.aabb.miny&&(g.aabb.miny=M.y),M.y>g.aabb.maxy&&(g.aabb.maxy=M.y),C=C.next}}var P;if(t.dyn==(1!=e.body.type&&!e.body.component.sleeping)){var k=t.aabb,T=e.aabb;P=!(T.minx>=k.minx&&T.miny>=k.miny&&T.maxx<=k.maxx&&T.maxy<=k.maxy)}else P=!0;P&&(t.synced=!0,t.snext=this.syncs,this.syncs=t)}},ii.prototype.sync_broadphase=function(){if(this.space.validation(),null!=this.syncs)if(null==this.moves){for(var e=this.syncs;null!=e;){var t=e.shape;if(e.first_sync)e.first_sync=!1;else{var i=e.dyn?this.dtree:this.stree;if(e==i.root)i.root=null;else{var n=e.parent,r=n.parent,o=n.child1==e?n.child2:n.child1;if(null!=r){r.child1==n?r.child1=o:r.child2=o,o.parent=r,n.height=-1;var a=n.aabb;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a.wrap_min=a.wrap_max=null,a._invalidate=null,a._validate=null,a.next=Oo.zpp_pool,Oo.zpp_pool=a,n.child1=n.child2=n.parent=null,n.next=null,n.snext=null,n.mnext=null,n.next=Eo.zpp_pool,Eo.zpp_pool=n;for(var s=r;null!=s;){if(null==s.child1||s.height<2)s=s;else{var p=s.child1,l=s.child2,h=l.height-p.height;if(1<h){var u=l.child1,d=l.child2;if(l.child1=s,l.parent=s.parent,null!=(s.parent=l).parent?l.parent.child1==s?l.parent.child1=l:l.parent.child2=l:i.root=l,u.height>d.height){l.child2=u;var c=((s.child2=d).parent=s).aabb,_=p.aabb,y=d.aabb;c.minx=_.minx<y.minx?_.minx:y.minx,c.miny=_.miny<y.miny?_.miny:y.miny,c.maxx=_.maxx>y.maxx?_.maxx:y.maxx,c.maxy=_.maxy>y.maxy?_.maxy:y.maxy;var x=l.aabb,m=s.aabb,g=u.aabb;x.minx=m.minx<g.minx?m.minx:g.minx,x.miny=m.miny<g.miny?m.miny:g.miny,x.maxx=m.maxx>g.maxx?m.maxx:g.maxx,x.maxy=m.maxy>g.maxy?m.maxy:g.maxy;var f=p.height,v=d.height;s.height=1+(v<f?f:v);var z=s.height,w=u.height;l.height=1+(w<z?z:w)}else{l.child2=d;var b=((s.child2=u).parent=s).aabb,S=p.aabb,C=u.aabb;b.minx=S.minx<C.minx?S.minx:C.minx,b.miny=S.miny<C.miny?S.miny:C.miny,b.maxx=S.maxx>C.maxx?S.maxx:C.maxx,b.maxy=S.maxy>C.maxy?S.maxy:C.maxy;var M=l.aabb,P=s.aabb,k=d.aabb;M.minx=P.minx<k.minx?P.minx:k.minx,M.miny=P.miny<k.miny?P.miny:k.miny,M.maxx=P.maxx>k.maxx?P.maxx:k.maxx,M.maxy=P.maxy>k.maxy?P.maxy:k.maxy;var T=p.height,A=u.height;s.height=1+(A<T?T:A);var O=s.height,E=d.height;l.height=1+(E<O?O:E)}s=l}else if(h<-1){var G=p.child1,D=p.child2;if(p.child1=s,p.parent=s.parent,null!=(s.parent=p).parent?p.parent.child1==s?p.parent.child1=p:p.parent.child2=p:i.root=p,G.height>D.height){p.child2=G;var I=((s.child1=D).parent=s).aabb,L=l.aabb,B=D.aabb;I.minx=L.minx<B.minx?L.minx:B.minx,I.miny=L.miny<B.miny?L.miny:B.miny,I.maxx=L.maxx>B.maxx?L.maxx:B.maxx,I.maxy=L.maxy>B.maxy?L.maxy:B.maxy;var R=p.aabb,F=s.aabb,j=G.aabb;R.minx=F.minx<j.minx?F.minx:j.minx,R.miny=F.miny<j.miny?F.miny:j.miny,R.maxx=F.maxx>j.maxx?F.maxx:j.maxx,R.maxy=F.maxy>j.maxy?F.maxy:j.maxy;var N=l.height,U=D.height;s.height=1+(U<N?N:U);var V=s.height,H=G.height;p.height=1+(H<V?V:H)}else{p.child2=D;var W=((s.child1=G).parent=s).aabb,q=l.aabb,X=G.aabb;W.minx=q.minx<X.minx?q.minx:X.minx,W.miny=q.miny<X.miny?q.miny:X.miny,W.maxx=q.maxx>X.maxx?q.maxx:X.maxx,W.maxy=q.maxy>X.maxy?q.maxy:X.maxy;var Y=p.aabb,K=s.aabb,Z=D.aabb;Y.minx=K.minx<Z.minx?K.minx:Z.minx,Y.miny=K.miny<Z.miny?K.miny:Z.miny,Y.maxx=K.maxx>Z.maxx?K.maxx:Z.maxx,Y.maxy=K.maxy>Z.maxy?K.maxy:Z.maxy;var J=l.height,Q=G.height;s.height=1+(Q<J?J:Q);var $=s.height,ee=D.height;p.height=1+(ee<$?$:ee)}s=p}else s=s}var te=s.child1,ie=s.child2,ne=s.aabb,re=te.aabb,oe=ie.aabb;ne.minx=re.minx<oe.minx?re.minx:oe.minx,ne.miny=re.miny<oe.miny?re.miny:oe.miny,ne.maxx=re.maxx>oe.maxx?re.maxx:oe.maxx,ne.maxy=re.maxy>oe.maxy?re.maxy:oe.maxy;var ae=te.height,se=ie.height;s.height=1+(se<ae?ae:se),s=s.parent}}else{(i.root=o).parent=null,n.height=-1;var pe=n.aabb;null!=pe.outer&&(pe.outer.zpp_inner=null,pe.outer=null),pe.wrap_min=pe.wrap_max=null,pe._invalidate=null,pe._validate=null,pe.next=Oo.zpp_pool,Oo.zpp_pool=pe,n.child1=n.child2=n.parent=null,n.next=null,n.snext=null,n.mnext=null,n.next=Eo.zpp_pool,Eo.zpp_pool=n}}}var le=e.aabb;if(!this.space.continuous&&t.zip_aabb&&null!=t.body)if(t.zip_aabb=!1,0==t.type){var he=t.circle;if(he.zip_worldCOM&&null!=he.body){if(he.zip_worldCOM=!1,he.zip_localCOM){if(he.zip_localCOM=!1,1==he.type){var ue=he.polygon;if(null==ue.lverts.next.next)ue.localCOMx=ue.lverts.next.x,ue.localCOMy=ue.lverts.next.y;else if(null==ue.lverts.next.next.next)ue.localCOMx=ue.lverts.next.x,ue.localCOMy=ue.lverts.next.y,ue.localCOMx+=ue.lverts.next.next.x,ue.localCOMy+=ue.lverts.next.next.y,ue.localCOMx*=.5,ue.localCOMy*=.5;else{ue.localCOMx=0;var de=ue.localCOMy=0,ce=ue.lverts.next,_e=ce,ye=ce=ce.next;for(ce=ce.next;null!=ce;){var xe=ce;de+=ye.x*(xe.y-_e.y);var me=xe.y*ye.x-xe.x*ye.y;ue.localCOMx+=(ye.x+xe.x)*me,ue.localCOMy+=(ye.y+xe.y)*me,_e=ye,ye=xe,ce=ce.next}var ge=ce=ue.lverts.next;de+=ye.x*(ge.y-_e.y);var fe=ge.y*ye.x-ge.x*ye.y;ue.localCOMx+=(ye.x+ge.x)*fe,ue.localCOMy+=(ye.y+ge.y)*fe,_e=ye;var ve=ce=ce.next;de+=ge.x*(ve.y-_e.y);var ze=ve.y*ge.x-ve.x*ge.y;ue.localCOMx+=(ge.x+ve.x)*ze,ue.localCOMy+=(ge.y+ve.y)*ze;var we=de=1/(3*de);ue.localCOMx*=we,ue.localCOMy*=we}}null!=he.wrap_localCOM&&(he.wrap_localCOM.zpp_inner.x=he.localCOMx,he.wrap_localCOM.zpp_inner.y=he.localCOMy)}var be=he.body;be.zip_axis&&(be.zip_axis=!1,be.axisx=Math.sin(be.rot),be.axisy=Math.cos(be.rot)),he.worldCOMx=he.body.posx+(he.body.axisy*he.localCOMx-he.body.axisx*he.localCOMy),he.worldCOMy=he.body.posy+(he.localCOMx*he.body.axisx+he.localCOMy*he.body.axisy)}var Se=he.radius,Ce=he.radius;he.aabb.minx=he.worldCOMx-Se,he.aabb.miny=he.worldCOMy-Ce,he.aabb.maxx=he.worldCOMx+Se,he.aabb.maxy=he.worldCOMy+Ce}else{var Me=t.polygon;if(Me.zip_gverts&&null!=Me.body){Me.zip_gverts=!1,Me.validate_lverts();var Pe=Me.body;Pe.zip_axis&&(Pe.zip_axis=!1,Pe.axisx=Math.sin(Pe.rot),Pe.axisy=Math.cos(Pe.rot));for(var ke=Me.lverts.next,Te=Me.gverts.next;null!=Te;){var Ae=Te,Oe=ke;ke=ke.next,Ae.x=Me.body.posx+(Me.body.axisy*Oe.x-Me.body.axisx*Oe.y),Ae.y=Me.body.posy+(Oe.x*Me.body.axisx+Oe.y*Me.body.axisy),Te=Te.next}}var Ee=Me.gverts.next;Me.aabb.minx=Ee.x,Me.aabb.miny=Ee.y,Me.aabb.maxx=Ee.x,Me.aabb.maxy=Ee.y;for(var Ge=Me.gverts.next.next;null!=Ge;){var De=Ge;De.x<Me.aabb.minx&&(Me.aabb.minx=De.x),De.x>Me.aabb.maxx&&(Me.aabb.maxx=De.x),De.y<Me.aabb.miny&&(Me.aabb.miny=De.y),De.y>Me.aabb.maxy&&(Me.aabb.maxy=De.y),Ge=Ge.next}}var Ie=t.aabb;le.minx=Ie.minx-3,le.miny=Ie.miny-3,le.maxx=Ie.maxx+3,le.maxy=Ie.maxy+3;var Le=(e.dyn=1!=t.body.type&&!t.body.component.sleeping)?this.dtree:this.stree;if(null==Le.root)Le.root=e,Le.root.parent=null;else{for(var Be=e.aabb,Re=Le.root;null!=Re.child1;){var Fe=Re.child1,je=Re.child2,Ne=Re.aabb,Ue=2*(Ne.maxx-Ne.minx+(Ne.maxy-Ne.miny)),Ve=Go.tmpaabb,He=Re.aabb;Ve.minx=He.minx<Be.minx?He.minx:Be.minx,Ve.miny=He.miny<Be.miny?He.miny:Be.miny,Ve.maxx=He.maxx>Be.maxx?He.maxx:Be.maxx,Ve.maxy=He.maxy>Be.maxy?He.maxy:Be.maxy;var We,qe=Go.tmpaabb,Xe=2*(qe.maxx-qe.minx+(qe.maxy-qe.miny)),Ye=2*Xe,Ke=2*(Xe-Ue),Ze=Go.tmpaabb,Je=Fe.aabb;if(Ze.minx=Be.minx<Je.minx?Be.minx:Je.minx,Ze.miny=Be.miny<Je.miny?Be.miny:Je.miny,Ze.maxx=Be.maxx>Je.maxx?Be.maxx:Je.maxx,Ze.maxy=Be.maxy>Je.maxy?Be.maxy:Je.maxy,null==Fe.child1){var Qe=Go.tmpaabb;We=2*(Qe.maxx-Qe.minx+(Qe.maxy-Qe.miny))+Ke}else{var $e=Fe.aabb,et=2*($e.maxx-$e.minx+($e.maxy-$e.miny)),tt=Go.tmpaabb;We=2*(tt.maxx-tt.minx+(tt.maxy-tt.miny))-et+Ke}var it,nt=Go.tmpaabb,rt=je.aabb;if(nt.minx=Be.minx<rt.minx?Be.minx:rt.minx,nt.miny=Be.miny<rt.miny?Be.miny:rt.miny,nt.maxx=Be.maxx>rt.maxx?Be.maxx:rt.maxx,nt.maxy=Be.maxy>rt.maxy?Be.maxy:rt.maxy,null==je.child1){var ot=Go.tmpaabb;it=2*(ot.maxx-ot.minx+(ot.maxy-ot.miny))+Ke}else{var at=je.aabb,st=2*(at.maxx-at.minx+(at.maxy-at.miny)),pt=Go.tmpaabb;it=2*(pt.maxx-pt.minx+(pt.maxy-pt.miny))-st+Ke}if(Ye<We&&Ye<it)break;Re=We<it?Fe:je}var lt,ht=Re,ut=ht.parent;null==Eo.zpp_pool?lt=new Eo:(lt=Eo.zpp_pool,Eo.zpp_pool=lt.next,lt.next=null),null==Oo.zpp_pool?lt.aabb=new Oo:(lt.aabb=Oo.zpp_pool,Oo.zpp_pool=lt.aabb.next,lt.aabb.next=null),lt.moved=!1,lt.synced=!1,lt.first_sync=!1,lt.parent=ut;var dt=lt.aabb,ct=ht.aabb;for(dt.minx=Be.minx<ct.minx?Be.minx:ct.minx,dt.miny=Be.miny<ct.miny?Be.miny:ct.miny,dt.maxx=Be.maxx>ct.maxx?Be.maxx:ct.maxx,dt.maxy=Be.maxy>ct.maxy?Be.maxy:ct.maxy,lt.height=ht.height+1,null!=ut?(ut.child1==ht?ut.child1=lt:ut.child2=lt,lt.child1=ht,lt.child2=e,ht.parent=lt,e.parent=lt):(lt.child1=ht,lt.child2=e,ht.parent=lt,e.parent=lt,Le.root=lt),Re=e.parent;null!=Re;){if(null==Re.child1||Re.height<2)Re=Re;else{var _t=Re.child1,yt=Re.child2,xt=yt.height-_t.height;if(1<xt){var mt=yt.child1,gt=yt.child2;if(yt.child1=Re,yt.parent=Re.parent,null!=(Re.parent=yt).parent?yt.parent.child1==Re?yt.parent.child1=yt:yt.parent.child2=yt:Le.root=yt,mt.height>gt.height){yt.child2=mt;var ft=((Re.child2=gt).parent=Re).aabb,vt=_t.aabb,zt=gt.aabb;ft.minx=vt.minx<zt.minx?vt.minx:zt.minx,ft.miny=vt.miny<zt.miny?vt.miny:zt.miny,ft.maxx=vt.maxx>zt.maxx?vt.maxx:zt.maxx,ft.maxy=vt.maxy>zt.maxy?vt.maxy:zt.maxy;var wt=yt.aabb,bt=Re.aabb,St=mt.aabb;wt.minx=bt.minx<St.minx?bt.minx:St.minx,wt.miny=bt.miny<St.miny?bt.miny:St.miny,wt.maxx=bt.maxx>St.maxx?bt.maxx:St.maxx,wt.maxy=bt.maxy>St.maxy?bt.maxy:St.maxy;var Ct=_t.height,Mt=gt.height;Re.height=1+(Mt<Ct?Ct:Mt);var Pt=Re.height,kt=mt.height;yt.height=1+(kt<Pt?Pt:kt)}else{yt.child2=gt;var Tt=((Re.child2=mt).parent=Re).aabb,At=_t.aabb,Ot=mt.aabb;Tt.minx=At.minx<Ot.minx?At.minx:Ot.minx,Tt.miny=At.miny<Ot.miny?At.miny:Ot.miny,Tt.maxx=At.maxx>Ot.maxx?At.maxx:Ot.maxx,Tt.maxy=At.maxy>Ot.maxy?At.maxy:Ot.maxy;var Et=yt.aabb,Gt=Re.aabb,Dt=gt.aabb;Et.minx=Gt.minx<Dt.minx?Gt.minx:Dt.minx,Et.miny=Gt.miny<Dt.miny?Gt.miny:Dt.miny,Et.maxx=Gt.maxx>Dt.maxx?Gt.maxx:Dt.maxx,Et.maxy=Gt.maxy>Dt.maxy?Gt.maxy:Dt.maxy;var It=_t.height,Lt=mt.height;Re.height=1+(Lt<It?It:Lt);var Bt=Re.height,Rt=gt.height;yt.height=1+(Rt<Bt?Bt:Rt)}Re=yt}else if(xt<-1){var Ft=_t.child1,jt=_t.child2;if(_t.child1=Re,_t.parent=Re.parent,null!=(Re.parent=_t).parent?_t.parent.child1==Re?_t.parent.child1=_t:_t.parent.child2=_t:Le.root=_t,Ft.height>jt.height){_t.child2=Ft;var Nt=((Re.child1=jt).parent=Re).aabb,Ut=yt.aabb,Vt=jt.aabb;Nt.minx=Ut.minx<Vt.minx?Ut.minx:Vt.minx,Nt.miny=Ut.miny<Vt.miny?Ut.miny:Vt.miny,Nt.maxx=Ut.maxx>Vt.maxx?Ut.maxx:Vt.maxx,Nt.maxy=Ut.maxy>Vt.maxy?Ut.maxy:Vt.maxy;var Ht=_t.aabb,Wt=Re.aabb,qt=Ft.aabb;Ht.minx=Wt.minx<qt.minx?Wt.minx:qt.minx,Ht.miny=Wt.miny<qt.miny?Wt.miny:qt.miny,Ht.maxx=Wt.maxx>qt.maxx?Wt.maxx:qt.maxx,Ht.maxy=Wt.maxy>qt.maxy?Wt.maxy:qt.maxy;var Xt=yt.height,Yt=jt.height;Re.height=1+(Yt<Xt?Xt:Yt);var Kt=Re.height,Zt=Ft.height;_t.height=1+(Zt<Kt?Kt:Zt)}else{_t.child2=jt;var Jt=((Re.child1=Ft).parent=Re).aabb,Qt=yt.aabb,$t=Ft.aabb;Jt.minx=Qt.minx<$t.minx?Qt.minx:$t.minx,Jt.miny=Qt.miny<$t.miny?Qt.miny:$t.miny,Jt.maxx=Qt.maxx>$t.maxx?Qt.maxx:$t.maxx,Jt.maxy=Qt.maxy>$t.maxy?Qt.maxy:$t.maxy;var ei=_t.aabb,ti=Re.aabb,ii=jt.aabb;ei.minx=ti.minx<ii.minx?ti.minx:ii.minx,ei.miny=ti.miny<ii.miny?ti.miny:ii.miny,ei.maxx=ti.maxx>ii.maxx?ti.maxx:ii.maxx,ei.maxy=ti.maxy>ii.maxy?ti.maxy:ii.maxy;var ni=yt.height,ri=Ft.height;Re.height=1+(ri<ni?ni:ri);var oi=Re.height,ai=jt.height;_t.height=1+(ai<oi?oi:ai)}Re=_t}else Re=Re}var si=Re.child1,pi=Re.child2,li=si.height,hi=pi.height;Re.height=1+(hi<li?li:hi);var ui=Re.aabb,di=si.aabb,ci=pi.aabb;ui.minx=di.minx<ci.minx?di.minx:ci.minx,ui.miny=di.miny<ci.miny?di.miny:ci.miny,ui.maxx=di.maxx>ci.maxx?di.maxx:ci.maxx,ui.maxy=di.maxy>ci.maxy?di.maxy:ci.maxy,Re=Re.parent}}e.synced=!1,e.moved=!0,e.mnext=e.snext,e.snext=null,e=e.mnext}var _i=this.syncs;this.syncs=this.moves,this.moves=_i}else for(;null!=this.syncs;){var yi=this.syncs;this.syncs=yi.snext,yi.snext=null;var xi=yi.shape;if(yi.first_sync)yi.first_sync=!1;else{var mi=yi.dyn?this.dtree:this.stree;if(yi==mi.root)mi.root=null;else{var gi=yi.parent,fi=gi.parent,vi=gi.child1==yi?gi.child2:gi.child1;if(null!=fi){fi.child1==gi?fi.child1=vi:fi.child2=vi,vi.parent=fi,gi.height=-1;var zi=gi.aabb;null!=zi.outer&&(zi.outer.zpp_inner=null,zi.outer=null),zi.wrap_min=zi.wrap_max=null,zi._invalidate=null,zi._validate=null,zi.next=Oo.zpp_pool,Oo.zpp_pool=zi,gi.child1=gi.child2=gi.parent=null,gi.next=null,gi.snext=null,gi.mnext=null,gi.next=Eo.zpp_pool,Eo.zpp_pool=gi;for(var wi=fi;null!=wi;){if(null==wi.child1||wi.height<2)wi=wi;else{var bi=wi.child1,Si=wi.child2,Ci=Si.height-bi.height;if(1<Ci){var Mi=Si.child1,Pi=Si.child2;if(Si.child1=wi,Si.parent=wi.parent,null!=(wi.parent=Si).parent?Si.parent.child1==wi?Si.parent.child1=Si:Si.parent.child2=Si:mi.root=Si,Mi.height>Pi.height){Si.child2=Mi;var ki=((wi.child2=Pi).parent=wi).aabb,Ti=bi.aabb,Ai=Pi.aabb;ki.minx=Ti.minx<Ai.minx?Ti.minx:Ai.minx,ki.miny=Ti.miny<Ai.miny?Ti.miny:Ai.miny,ki.maxx=Ti.maxx>Ai.maxx?Ti.maxx:Ai.maxx,ki.maxy=Ti.maxy>Ai.maxy?Ti.maxy:Ai.maxy;var Oi=Si.aabb,Ei=wi.aabb,Gi=Mi.aabb;Oi.minx=Ei.minx<Gi.minx?Ei.minx:Gi.minx,Oi.miny=Ei.miny<Gi.miny?Ei.miny:Gi.miny,Oi.maxx=Ei.maxx>Gi.maxx?Ei.maxx:Gi.maxx,Oi.maxy=Ei.maxy>Gi.maxy?Ei.maxy:Gi.maxy;var Di=bi.height,Ii=Pi.height;wi.height=1+(Ii<Di?Di:Ii);var Li=wi.height,Bi=Mi.height;Si.height=1+(Bi<Li?Li:Bi)}else{Si.child2=Pi;var Ri=((wi.child2=Mi).parent=wi).aabb,Fi=bi.aabb,ji=Mi.aabb;Ri.minx=Fi.minx<ji.minx?Fi.minx:ji.minx,Ri.miny=Fi.miny<ji.miny?Fi.miny:ji.miny,Ri.maxx=Fi.maxx>ji.maxx?Fi.maxx:ji.maxx,Ri.maxy=Fi.maxy>ji.maxy?Fi.maxy:ji.maxy;var Ni=Si.aabb,Ui=wi.aabb,Vi=Pi.aabb;Ni.minx=Ui.minx<Vi.minx?Ui.minx:Vi.minx,Ni.miny=Ui.miny<Vi.miny?Ui.miny:Vi.miny,Ni.maxx=Ui.maxx>Vi.maxx?Ui.maxx:Vi.maxx,Ni.maxy=Ui.maxy>Vi.maxy?Ui.maxy:Vi.maxy;var Hi=bi.height,Wi=Mi.height;wi.height=1+(Wi<Hi?Hi:Wi);var qi=wi.height,Xi=Pi.height;Si.height=1+(Xi<qi?qi:Xi)}wi=Si}else if(Ci<-1){var Yi=bi.child1,Ki=bi.child2;if(bi.child1=wi,bi.parent=wi.parent,null!=(wi.parent=bi).parent?bi.parent.child1==wi?bi.parent.child1=bi:bi.parent.child2=bi:mi.root=bi,Yi.height>Ki.height){bi.child2=Yi;var Zi=((wi.child1=Ki).parent=wi).aabb,Ji=Si.aabb,Qi=Ki.aabb;Zi.minx=Ji.minx<Qi.minx?Ji.minx:Qi.minx,Zi.miny=Ji.miny<Qi.miny?Ji.miny:Qi.miny,Zi.maxx=Ji.maxx>Qi.maxx?Ji.maxx:Qi.maxx,Zi.maxy=Ji.maxy>Qi.maxy?Ji.maxy:Qi.maxy;var $i=bi.aabb,en=wi.aabb,tn=Yi.aabb;$i.minx=en.minx<tn.minx?en.minx:tn.minx,$i.miny=en.miny<tn.miny?en.miny:tn.miny,$i.maxx=en.maxx>tn.maxx?en.maxx:tn.maxx,$i.maxy=en.maxy>tn.maxy?en.maxy:tn.maxy;var nn=Si.height,rn=Ki.height;wi.height=1+(rn<nn?nn:rn);var on=wi.height,an=Yi.height;bi.height=1+(an<on?on:an)}else{bi.child2=Ki;var sn=((wi.child1=Yi).parent=wi).aabb,pn=Si.aabb,ln=Yi.aabb;sn.minx=pn.minx<ln.minx?pn.minx:ln.minx,sn.miny=pn.miny<ln.miny?pn.miny:ln.miny,sn.maxx=pn.maxx>ln.maxx?pn.maxx:ln.maxx,sn.maxy=pn.maxy>ln.maxy?pn.maxy:ln.maxy;var hn=bi.aabb,un=wi.aabb,dn=Ki.aabb;hn.minx=un.minx<dn.minx?un.minx:dn.minx,hn.miny=un.miny<dn.miny?un.miny:dn.miny,hn.maxx=un.maxx>dn.maxx?un.maxx:dn.maxx,hn.maxy=un.maxy>dn.maxy?un.maxy:dn.maxy;var cn=Si.height,_n=Yi.height;wi.height=1+(_n<cn?cn:_n);var yn=wi.height,xn=Ki.height;bi.height=1+(xn<yn?yn:xn)}wi=bi}else wi=wi}var mn=wi.child1,gn=wi.child2,fn=wi.aabb,vn=mn.aabb,zn=gn.aabb;fn.minx=vn.minx<zn.minx?vn.minx:zn.minx,fn.miny=vn.miny<zn.miny?vn.miny:zn.miny,fn.maxx=vn.maxx>zn.maxx?vn.maxx:zn.maxx,fn.maxy=vn.maxy>zn.maxy?vn.maxy:zn.maxy;var wn=mn.height,bn=gn.height;wi.height=1+(bn<wn?wn:bn),wi=wi.parent}}else{(mi.root=vi).parent=null,gi.height=-1;var Sn=gi.aabb;null!=Sn.outer&&(Sn.outer.zpp_inner=null,Sn.outer=null),Sn.wrap_min=Sn.wrap_max=null,Sn._invalidate=null,Sn._validate=null,Sn.next=Oo.zpp_pool,Oo.zpp_pool=Sn,gi.child1=gi.child2=gi.parent=null,gi.next=null,gi.snext=null,gi.mnext=null,gi.next=Eo.zpp_pool,Eo.zpp_pool=gi}}}var Cn=yi.aabb;if(!this.space.continuous&&xi.zip_aabb&&null!=xi.body)if(xi.zip_aabb=!1,0==xi.type){var Mn=xi.circle;if(Mn.zip_worldCOM&&null!=Mn.body){if(Mn.zip_worldCOM=!1,Mn.zip_localCOM){if(Mn.zip_localCOM=!1,1==Mn.type){var Pn=Mn.polygon;if(null==Pn.lverts.next.next)Pn.localCOMx=Pn.lverts.next.x,Pn.localCOMy=Pn.lverts.next.y;else if(null==Pn.lverts.next.next.next)Pn.localCOMx=Pn.lverts.next.x,Pn.localCOMy=Pn.lverts.next.y,Pn.localCOMx+=Pn.lverts.next.next.x,Pn.localCOMy+=Pn.lverts.next.next.y,Pn.localCOMx*=.5,Pn.localCOMy*=.5;else{Pn.localCOMx=0;var kn=Pn.localCOMy=0,Tn=Pn.lverts.next,An=Tn,On=Tn=Tn.next;for(Tn=Tn.next;null!=Tn;){var En=Tn;kn+=On.x*(En.y-An.y);var Gn=En.y*On.x-En.x*On.y;Pn.localCOMx+=(On.x+En.x)*Gn,Pn.localCOMy+=(On.y+En.y)*Gn,An=On,On=En,Tn=Tn.next}var Dn=Tn=Pn.lverts.next;kn+=On.x*(Dn.y-An.y);var In=Dn.y*On.x-Dn.x*On.y;Pn.localCOMx+=(On.x+Dn.x)*In,Pn.localCOMy+=(On.y+Dn.y)*In,An=On;var Ln=Tn=Tn.next;kn+=Dn.x*(Ln.y-An.y);var Bn=Ln.y*Dn.x-Ln.x*Dn.y;Pn.localCOMx+=(Dn.x+Ln.x)*Bn,Pn.localCOMy+=(Dn.y+Ln.y)*Bn;var Rn=kn=1/(3*kn);Pn.localCOMx*=Rn,Pn.localCOMy*=Rn}}null!=Mn.wrap_localCOM&&(Mn.wrap_localCOM.zpp_inner.x=Mn.localCOMx,Mn.wrap_localCOM.zpp_inner.y=Mn.localCOMy)}var Fn=Mn.body;Fn.zip_axis&&(Fn.zip_axis=!1,Fn.axisx=Math.sin(Fn.rot),Fn.axisy=Math.cos(Fn.rot)),Mn.worldCOMx=Mn.body.posx+(Mn.body.axisy*Mn.localCOMx-Mn.body.axisx*Mn.localCOMy),Mn.worldCOMy=Mn.body.posy+(Mn.localCOMx*Mn.body.axisx+Mn.localCOMy*Mn.body.axisy)}var jn=Mn.radius,Nn=Mn.radius;Mn.aabb.minx=Mn.worldCOMx-jn,Mn.aabb.miny=Mn.worldCOMy-Nn,Mn.aabb.maxx=Mn.worldCOMx+jn,Mn.aabb.maxy=Mn.worldCOMy+Nn}else{var Un=xi.polygon;if(Un.zip_gverts&&null!=Un.body){Un.zip_gverts=!1,Un.validate_lverts();var Vn=Un.body;Vn.zip_axis&&(Vn.zip_axis=!1,Vn.axisx=Math.sin(Vn.rot),Vn.axisy=Math.cos(Vn.rot));for(var Hn=Un.lverts.next,Wn=Un.gverts.next;null!=Wn;){var qn=Wn,Xn=Hn;Hn=Hn.next,qn.x=Un.body.posx+(Un.body.axisy*Xn.x-Un.body.axisx*Xn.y),qn.y=Un.body.posy+(Xn.x*Un.body.axisx+Xn.y*Un.body.axisy),Wn=Wn.next}}var Yn=Un.gverts.next;Un.aabb.minx=Yn.x,Un.aabb.miny=Yn.y,Un.aabb.maxx=Yn.x,Un.aabb.maxy=Yn.y;for(var Kn=Un.gverts.next.next;null!=Kn;){var Zn=Kn;Zn.x<Un.aabb.minx&&(Un.aabb.minx=Zn.x),Zn.x>Un.aabb.maxx&&(Un.aabb.maxx=Zn.x),Zn.y<Un.aabb.miny&&(Un.aabb.miny=Zn.y),Zn.y>Un.aabb.maxy&&(Un.aabb.maxy=Zn.y),Kn=Kn.next}}var Jn=xi.aabb;Cn.minx=Jn.minx-3,Cn.miny=Jn.miny-3,Cn.maxx=Jn.maxx+3,Cn.maxy=Jn.maxy+3;var Qn=(yi.dyn=1!=xi.body.type&&!xi.body.component.sleeping)?this.dtree:this.stree;if(null==Qn.root)Qn.root=yi,Qn.root.parent=null;else{for(var $n=yi.aabb,er=Qn.root;null!=er.child1;){var tr=er.child1,ir=er.child2,nr=er.aabb,rr=2*(nr.maxx-nr.minx+(nr.maxy-nr.miny)),or=Go.tmpaabb,ar=er.aabb;or.minx=ar.minx<$n.minx?ar.minx:$n.minx,or.miny=ar.miny<$n.miny?ar.miny:$n.miny,or.maxx=ar.maxx>$n.maxx?ar.maxx:$n.maxx,or.maxy=ar.maxy>$n.maxy?ar.maxy:$n.maxy;var sr,pr=Go.tmpaabb,lr=2*(pr.maxx-pr.minx+(pr.maxy-pr.miny)),hr=2*lr,ur=2*(lr-rr),dr=Go.tmpaabb,cr=tr.aabb;if(dr.minx=$n.minx<cr.minx?$n.minx:cr.minx,dr.miny=$n.miny<cr.miny?$n.miny:cr.miny,dr.maxx=$n.maxx>cr.maxx?$n.maxx:cr.maxx,dr.maxy=$n.maxy>cr.maxy?$n.maxy:cr.maxy,null==tr.child1){var _r=Go.tmpaabb;sr=2*(_r.maxx-_r.minx+(_r.maxy-_r.miny))+ur}else{var yr=tr.aabb,xr=2*(yr.maxx-yr.minx+(yr.maxy-yr.miny)),mr=Go.tmpaabb;sr=2*(mr.maxx-mr.minx+(mr.maxy-mr.miny))-xr+ur}var gr,fr=Go.tmpaabb,vr=ir.aabb;if(fr.minx=$n.minx<vr.minx?$n.minx:vr.minx,fr.miny=$n.miny<vr.miny?$n.miny:vr.miny,fr.maxx=$n.maxx>vr.maxx?$n.maxx:vr.maxx,fr.maxy=$n.maxy>vr.maxy?$n.maxy:vr.maxy,null==ir.child1){var zr=Go.tmpaabb;gr=2*(zr.maxx-zr.minx+(zr.maxy-zr.miny))+ur}else{var wr=ir.aabb,br=2*(wr.maxx-wr.minx+(wr.maxy-wr.miny)),Sr=Go.tmpaabb;gr=2*(Sr.maxx-Sr.minx+(Sr.maxy-Sr.miny))-br+ur}if(hr<sr&&hr<gr)break;er=sr<gr?tr:ir}var Cr,Mr=er,Pr=Mr.parent;null==Eo.zpp_pool?Cr=new Eo:(Cr=Eo.zpp_pool,Eo.zpp_pool=Cr.next,Cr.next=null),null==Oo.zpp_pool?Cr.aabb=new Oo:(Cr.aabb=Oo.zpp_pool,Oo.zpp_pool=Cr.aabb.next,Cr.aabb.next=null),Cr.moved=!1,Cr.synced=!1,Cr.first_sync=!1,Cr.parent=Pr;var kr=Cr.aabb,Tr=Mr.aabb;for(kr.minx=$n.minx<Tr.minx?$n.minx:Tr.minx,kr.miny=$n.miny<Tr.miny?$n.miny:Tr.miny,kr.maxx=$n.maxx>Tr.maxx?$n.maxx:Tr.maxx,kr.maxy=$n.maxy>Tr.maxy?$n.maxy:Tr.maxy,Cr.height=Mr.height+1,null!=Pr?(Pr.child1==Mr?Pr.child1=Cr:Pr.child2=Cr,Cr.child1=Mr,Cr.child2=yi,Mr.parent=Cr,yi.parent=Cr):(Cr.child1=Mr,Cr.child2=yi,Mr.parent=Cr,yi.parent=Cr,Qn.root=Cr),er=yi.parent;null!=er;){if(null==er.child1||er.height<2)er=er;else{var Ar=er.child1,Or=er.child2,Er=Or.height-Ar.height;if(1<Er){var Gr=Or.child1,Dr=Or.child2;if(Or.child1=er,Or.parent=er.parent,null!=(er.parent=Or).parent?Or.parent.child1==er?Or.parent.child1=Or:Or.parent.child2=Or:Qn.root=Or,Gr.height>Dr.height){Or.child2=Gr;var Ir=((er.child2=Dr).parent=er).aabb,Lr=Ar.aabb,Br=Dr.aabb;Ir.minx=Lr.minx<Br.minx?Lr.minx:Br.minx,Ir.miny=Lr.miny<Br.miny?Lr.miny:Br.miny,Ir.maxx=Lr.maxx>Br.maxx?Lr.maxx:Br.maxx,Ir.maxy=Lr.maxy>Br.maxy?Lr.maxy:Br.maxy;var Rr=Or.aabb,Fr=er.aabb,jr=Gr.aabb;Rr.minx=Fr.minx<jr.minx?Fr.minx:jr.minx,Rr.miny=Fr.miny<jr.miny?Fr.miny:jr.miny,Rr.maxx=Fr.maxx>jr.maxx?Fr.maxx:jr.maxx,Rr.maxy=Fr.maxy>jr.maxy?Fr.maxy:jr.maxy;var Nr=Ar.height,Ur=Dr.height;er.height=1+(Ur<Nr?Nr:Ur);var Vr=er.height,Hr=Gr.height;Or.height=1+(Hr<Vr?Vr:Hr)}else{Or.child2=Dr;var Wr=((er.child2=Gr).parent=er).aabb,qr=Ar.aabb,Xr=Gr.aabb;Wr.minx=qr.minx<Xr.minx?qr.minx:Xr.minx,Wr.miny=qr.miny<Xr.miny?qr.miny:Xr.miny,Wr.maxx=qr.maxx>Xr.maxx?qr.maxx:Xr.maxx,Wr.maxy=qr.maxy>Xr.maxy?qr.maxy:Xr.maxy;var Yr=Or.aabb,Kr=er.aabb,Zr=Dr.aabb;Yr.minx=Kr.minx<Zr.minx?Kr.minx:Zr.minx,Yr.miny=Kr.miny<Zr.miny?Kr.miny:Zr.miny,Yr.maxx=Kr.maxx>Zr.maxx?Kr.maxx:Zr.maxx,Yr.maxy=Kr.maxy>Zr.maxy?Kr.maxy:Zr.maxy;var Jr=Ar.height,Qr=Gr.height;er.height=1+(Qr<Jr?Jr:Qr);var $r=er.height,eo=Dr.height;Or.height=1+(eo<$r?$r:eo)}er=Or}else if(Er<-1){var to=Ar.child1,io=Ar.child2;if(Ar.child1=er,Ar.parent=er.parent,null!=(er.parent=Ar).parent?Ar.parent.child1==er?Ar.parent.child1=Ar:Ar.parent.child2=Ar:Qn.root=Ar,to.height>io.height){Ar.child2=to;var no=((er.child1=io).parent=er).aabb,ro=Or.aabb,oo=io.aabb;no.minx=ro.minx<oo.minx?ro.minx:oo.minx,no.miny=ro.miny<oo.miny?ro.miny:oo.miny,no.maxx=ro.maxx>oo.maxx?ro.maxx:oo.maxx,no.maxy=ro.maxy>oo.maxy?ro.maxy:oo.maxy;var ao=Ar.aabb,so=er.aabb,po=to.aabb;ao.minx=so.minx<po.minx?so.minx:po.minx,ao.miny=so.miny<po.miny?so.miny:po.miny,ao.maxx=so.maxx>po.maxx?so.maxx:po.maxx,ao.maxy=so.maxy>po.maxy?so.maxy:po.maxy;var lo=Or.height,ho=io.height;er.height=1+(ho<lo?lo:ho);var uo=er.height,co=to.height;Ar.height=1+(co<uo?uo:co)}else{Ar.child2=io;var _o=((er.child1=to).parent=er).aabb,yo=Or.aabb,xo=to.aabb;_o.minx=yo.minx<xo.minx?yo.minx:xo.minx,_o.miny=yo.miny<xo.miny?yo.miny:xo.miny,_o.maxx=yo.maxx>xo.maxx?yo.maxx:xo.maxx,_o.maxy=yo.maxy>xo.maxy?yo.maxy:xo.maxy;var mo=Ar.aabb,go=er.aabb,fo=io.aabb;mo.minx=go.minx<fo.minx?go.minx:fo.minx,mo.miny=go.miny<fo.miny?go.miny:fo.miny,mo.maxx=go.maxx>fo.maxx?go.maxx:fo.maxx,mo.maxy=go.maxy>fo.maxy?go.maxy:fo.maxy;var vo=Or.height,zo=to.height;er.height=1+(zo<vo?vo:zo);var wo=er.height,bo=io.height;Ar.height=1+(bo<wo?wo:bo)}er=Ar}else er=er}var So=er.child1,Co=er.child2,Mo=So.height,Po=Co.height;er.height=1+(Po<Mo?Mo:Po);var ko=er.aabb,To=So.aabb,Ao=Co.aabb;ko.minx=To.minx<Ao.minx?To.minx:Ao.minx,ko.miny=To.miny<Ao.miny?To.miny:Ao.miny,ko.maxx=To.maxx>Ao.maxx?To.maxx:Ao.maxx,ko.maxy=To.maxy>Ao.maxy?To.maxy:Ao.maxy,er=er.parent}}yi.synced=!1,yi.moved||(yi.moved=!0,yi.mnext=this.moves,this.moves=yi)}},ii.prototype.broadphase=function(e,t){for(var i=this.syncs;null!=i;){var n=i.shape;if(i.first_sync)i.first_sync=!1;else{var r=i.dyn?this.dtree:this.stree;if(i==r.root)r.root=null;else{var o=i.parent,a=o.parent,s=o.child1==i?o.child2:o.child1;if(null!=a){a.child1==o?a.child1=s:a.child2=s,s.parent=a,o.height=-1;var p=o.aabb;null!=p.outer&&(p.outer.zpp_inner=null,p.outer=null),p.wrap_min=p.wrap_max=null,p._invalidate=null,p._validate=null,p.next=Oo.zpp_pool,Oo.zpp_pool=p,o.child1=o.child2=o.parent=null,o.next=null,o.snext=null,o.mnext=null,o.next=Eo.zpp_pool,Eo.zpp_pool=o;for(var l=a;null!=l;){if(null==l.child1||l.height<2)l=l;else{var h=l.child1,u=l.child2,d=u.height-h.height;if(1<d){var c=u.child1,_=u.child2;if(u.child1=l,u.parent=l.parent,null!=(l.parent=u).parent?u.parent.child1==l?u.parent.child1=u:u.parent.child2=u:r.root=u,c.height>_.height){u.child2=c;var y=((l.child2=_).parent=l).aabb,x=h.aabb,m=_.aabb;y.minx=x.minx<m.minx?x.minx:m.minx,y.miny=x.miny<m.miny?x.miny:m.miny,y.maxx=x.maxx>m.maxx?x.maxx:m.maxx,y.maxy=x.maxy>m.maxy?x.maxy:m.maxy;var g=u.aabb,f=l.aabb,v=c.aabb;g.minx=f.minx<v.minx?f.minx:v.minx,g.miny=f.miny<v.miny?f.miny:v.miny,g.maxx=f.maxx>v.maxx?f.maxx:v.maxx,g.maxy=f.maxy>v.maxy?f.maxy:v.maxy;var z=h.height,w=_.height;l.height=1+(w<z?z:w);var b=l.height,S=c.height;u.height=1+(S<b?b:S)}else{u.child2=_;var C=((l.child2=c).parent=l).aabb,M=h.aabb,P=c.aabb;C.minx=M.minx<P.minx?M.minx:P.minx,C.miny=M.miny<P.miny?M.miny:P.miny,C.maxx=M.maxx>P.maxx?M.maxx:P.maxx,C.maxy=M.maxy>P.maxy?M.maxy:P.maxy;var k=u.aabb,T=l.aabb,A=_.aabb;k.minx=T.minx<A.minx?T.minx:A.minx,k.miny=T.miny<A.miny?T.miny:A.miny,k.maxx=T.maxx>A.maxx?T.maxx:A.maxx,k.maxy=T.maxy>A.maxy?T.maxy:A.maxy;var O=h.height,E=c.height;l.height=1+(E<O?O:E);var G=l.height,D=_.height;u.height=1+(D<G?G:D)}l=u}else if(d<-1){var I=h.child1,L=h.child2;if(h.child1=l,h.parent=l.parent,null!=(l.parent=h).parent?h.parent.child1==l?h.parent.child1=h:h.parent.child2=h:r.root=h,I.height>L.height){h.child2=I;var B=((l.child1=L).parent=l).aabb,R=u.aabb,F=L.aabb;B.minx=R.minx<F.minx?R.minx:F.minx,B.miny=R.miny<F.miny?R.miny:F.miny,B.maxx=R.maxx>F.maxx?R.maxx:F.maxx,B.maxy=R.maxy>F.maxy?R.maxy:F.maxy;var j=h.aabb,N=l.aabb,U=I.aabb;j.minx=N.minx<U.minx?N.minx:U.minx,j.miny=N.miny<U.miny?N.miny:U.miny,j.maxx=N.maxx>U.maxx?N.maxx:U.maxx,j.maxy=N.maxy>U.maxy?N.maxy:U.maxy;var V=u.height,H=L.height;l.height=1+(H<V?V:H);var W=l.height,q=I.height;h.height=1+(q<W?W:q)}else{h.child2=L;var X=((l.child1=I).parent=l).aabb,Y=u.aabb,K=I.aabb;X.minx=Y.minx<K.minx?Y.minx:K.minx,X.miny=Y.miny<K.miny?Y.miny:K.miny,X.maxx=Y.maxx>K.maxx?Y.maxx:K.maxx,X.maxy=Y.maxy>K.maxy?Y.maxy:K.maxy;var Z=h.aabb,J=l.aabb,Q=L.aabb;Z.minx=J.minx<Q.minx?J.minx:Q.minx,Z.miny=J.miny<Q.miny?J.miny:Q.miny,Z.maxx=J.maxx>Q.maxx?J.maxx:Q.maxx,Z.maxy=J.maxy>Q.maxy?J.maxy:Q.maxy;var $=u.height,ee=I.height;l.height=1+(ee<$?$:ee);var te=l.height,ie=L.height;h.height=1+(ie<te?te:ie)}l=h}else l=l}var ne=l.child1,re=l.child2,oe=l.aabb,ae=ne.aabb,se=re.aabb;oe.minx=ae.minx<se.minx?ae.minx:se.minx,oe.miny=ae.miny<se.miny?ae.miny:se.miny,oe.maxx=ae.maxx>se.maxx?ae.maxx:se.maxx,oe.maxy=ae.maxy>se.maxy?ae.maxy:se.maxy;var pe=ne.height,le=re.height;l.height=1+(le<pe?pe:le),l=l.parent}}else{(r.root=s).parent=null,o.height=-1;var he=o.aabb;null!=he.outer&&(he.outer.zpp_inner=null,he.outer=null),he.wrap_min=he.wrap_max=null,he._invalidate=null,he._validate=null,he.next=Oo.zpp_pool,Oo.zpp_pool=he,o.child1=o.child2=o.parent=null,o.next=null,o.snext=null,o.mnext=null,o.next=Eo.zpp_pool,Eo.zpp_pool=o}}}var ue=i.aabb;if(!e.continuous&&n.zip_aabb&&null!=n.body)if(n.zip_aabb=!1,0==n.type){var de=n.circle;if(de.zip_worldCOM&&null!=de.body){if(de.zip_worldCOM=!1,de.zip_localCOM){if(de.zip_localCOM=!1,1==de.type){var ce=de.polygon;if(null==ce.lverts.next.next)ce.localCOMx=ce.lverts.next.x,ce.localCOMy=ce.lverts.next.y;else if(null==ce.lverts.next.next.next)ce.localCOMx=ce.lverts.next.x,ce.localCOMy=ce.lverts.next.y,ce.localCOMx+=ce.lverts.next.next.x,ce.localCOMy+=ce.lverts.next.next.y,ce.localCOMx*=.5,ce.localCOMy*=.5;else{ce.localCOMx=0;var _e=ce.localCOMy=0,ye=ce.lverts.next,xe=ye,me=ye=ye.next;for(ye=ye.next;null!=ye;){var ge=ye;_e+=me.x*(ge.y-xe.y);var fe=ge.y*me.x-ge.x*me.y;ce.localCOMx+=(me.x+ge.x)*fe,ce.localCOMy+=(me.y+ge.y)*fe,xe=me,me=ge,ye=ye.next}var ve=ye=ce.lverts.next;_e+=me.x*(ve.y-xe.y);var ze=ve.y*me.x-ve.x*me.y;ce.localCOMx+=(me.x+ve.x)*ze,ce.localCOMy+=(me.y+ve.y)*ze,xe=me;var we=ye=ye.next;_e+=ve.x*(we.y-xe.y);var be=we.y*ve.x-we.x*ve.y;ce.localCOMx+=(ve.x+we.x)*be,ce.localCOMy+=(ve.y+we.y)*be;var Se=_e=1/(3*_e);ce.localCOMx*=Se,ce.localCOMy*=Se}}null!=de.wrap_localCOM&&(de.wrap_localCOM.zpp_inner.x=de.localCOMx,de.wrap_localCOM.zpp_inner.y=de.localCOMy)}var Ce=de.body;Ce.zip_axis&&(Ce.zip_axis=!1,Ce.axisx=Math.sin(Ce.rot),Ce.axisy=Math.cos(Ce.rot)),de.worldCOMx=de.body.posx+(de.body.axisy*de.localCOMx-de.body.axisx*de.localCOMy),de.worldCOMy=de.body.posy+(de.localCOMx*de.body.axisx+de.localCOMy*de.body.axisy)}var Me=de.radius,Pe=de.radius;de.aabb.minx=de.worldCOMx-Me,de.aabb.miny=de.worldCOMy-Pe,de.aabb.maxx=de.worldCOMx+Me,de.aabb.maxy=de.worldCOMy+Pe}else{var ke=n.polygon;if(ke.zip_gverts&&null!=ke.body){ke.zip_gverts=!1,ke.validate_lverts();var Te=ke.body;Te.zip_axis&&(Te.zip_axis=!1,Te.axisx=Math.sin(Te.rot),Te.axisy=Math.cos(Te.rot));for(var Ae=ke.lverts.next,Oe=ke.gverts.next;null!=Oe;){var Ee=Oe,Ge=Ae;Ae=Ae.next,Ee.x=ke.body.posx+(ke.body.axisy*Ge.x-ke.body.axisx*Ge.y),Ee.y=ke.body.posy+(Ge.x*ke.body.axisx+Ge.y*ke.body.axisy),Oe=Oe.next}}var De=ke.gverts.next;ke.aabb.minx=De.x,ke.aabb.miny=De.y,ke.aabb.maxx=De.x,ke.aabb.maxy=De.y;for(var Ie=ke.gverts.next.next;null!=Ie;){var Le=Ie;Le.x<ke.aabb.minx&&(ke.aabb.minx=Le.x),Le.x>ke.aabb.maxx&&(ke.aabb.maxx=Le.x),Le.y<ke.aabb.miny&&(ke.aabb.miny=Le.y),Le.y>ke.aabb.maxy&&(ke.aabb.maxy=Le.y),Ie=Ie.next}}var Be=n.aabb;ue.minx=Be.minx-3,ue.miny=Be.miny-3,ue.maxx=Be.maxx+3,ue.maxy=Be.maxy+3;var Re=(i.dyn=1!=n.body.type&&!n.body.component.sleeping)?this.dtree:this.stree;if(null==Re.root)Re.root=i,Re.root.parent=null;else{for(var Fe=i.aabb,je=Re.root;null!=je.child1;){var Ne=je.child1,Ue=je.child2,Ve=je.aabb,He=2*(Ve.maxx-Ve.minx+(Ve.maxy-Ve.miny)),We=Go.tmpaabb,qe=je.aabb;We.minx=qe.minx<Fe.minx?qe.minx:Fe.minx,We.miny=qe.miny<Fe.miny?qe.miny:Fe.miny,We.maxx=qe.maxx>Fe.maxx?qe.maxx:Fe.maxx,We.maxy=qe.maxy>Fe.maxy?qe.maxy:Fe.maxy;var Xe,Ye=Go.tmpaabb,Ke=2*(Ye.maxx-Ye.minx+(Ye.maxy-Ye.miny)),Ze=2*Ke,Je=2*(Ke-He),Qe=Go.tmpaabb,$e=Ne.aabb;if(Qe.minx=Fe.minx<$e.minx?Fe.minx:$e.minx,Qe.miny=Fe.miny<$e.miny?Fe.miny:$e.miny,Qe.maxx=Fe.maxx>$e.maxx?Fe.maxx:$e.maxx,Qe.maxy=Fe.maxy>$e.maxy?Fe.maxy:$e.maxy,null==Ne.child1){var et=Go.tmpaabb;Xe=2*(et.maxx-et.minx+(et.maxy-et.miny))+Je}else{var tt=Ne.aabb,it=2*(tt.maxx-tt.minx+(tt.maxy-tt.miny)),nt=Go.tmpaabb;Xe=2*(nt.maxx-nt.minx+(nt.maxy-nt.miny))-it+Je}var rt,ot=Go.tmpaabb,at=Ue.aabb;if(ot.minx=Fe.minx<at.minx?Fe.minx:at.minx,ot.miny=Fe.miny<at.miny?Fe.miny:at.miny,ot.maxx=Fe.maxx>at.maxx?Fe.maxx:at.maxx,ot.maxy=Fe.maxy>at.maxy?Fe.maxy:at.maxy,null==Ue.child1){var st=Go.tmpaabb;rt=2*(st.maxx-st.minx+(st.maxy-st.miny))+Je}else{var pt=Ue.aabb,lt=2*(pt.maxx-pt.minx+(pt.maxy-pt.miny)),ht=Go.tmpaabb;rt=2*(ht.maxx-ht.minx+(ht.maxy-ht.miny))-lt+Je}if(Ze<Xe&&Ze<rt)break;je=Xe<rt?Ne:Ue}var ut,dt=je,ct=dt.parent;null==Eo.zpp_pool?ut=new Eo:(ut=Eo.zpp_pool,Eo.zpp_pool=ut.next,ut.next=null),null==Oo.zpp_pool?ut.aabb=new Oo:(ut.aabb=Oo.zpp_pool,Oo.zpp_pool=ut.aabb.next,ut.aabb.next=null),ut.moved=!1,ut.synced=!1,ut.first_sync=!1,ut.parent=ct;var _t=ut.aabb,yt=dt.aabb;for(_t.minx=Fe.minx<yt.minx?Fe.minx:yt.minx,_t.miny=Fe.miny<yt.miny?Fe.miny:yt.miny,_t.maxx=Fe.maxx>yt.maxx?Fe.maxx:yt.maxx,_t.maxy=Fe.maxy>yt.maxy?Fe.maxy:yt.maxy,ut.height=dt.height+1,null!=ct?(ct.child1==dt?ct.child1=ut:ct.child2=ut,ut.child1=dt,ut.child2=i,dt.parent=ut,i.parent=ut):(ut.child1=dt,ut.child2=i,dt.parent=ut,i.parent=ut,Re.root=ut),je=i.parent;null!=je;){if(null==je.child1||je.height<2)je=je;else{var xt=je.child1,mt=je.child2,gt=mt.height-xt.height;if(1<gt){var ft=mt.child1,vt=mt.child2;if(mt.child1=je,mt.parent=je.parent,null!=(je.parent=mt).parent?mt.parent.child1==je?mt.parent.child1=mt:mt.parent.child2=mt:Re.root=mt,ft.height>vt.height){mt.child2=ft;var zt=((je.child2=vt).parent=je).aabb,wt=xt.aabb,bt=vt.aabb;zt.minx=wt.minx<bt.minx?wt.minx:bt.minx,zt.miny=wt.miny<bt.miny?wt.miny:bt.miny,zt.maxx=wt.maxx>bt.maxx?wt.maxx:bt.maxx,zt.maxy=wt.maxy>bt.maxy?wt.maxy:bt.maxy;var St=mt.aabb,Ct=je.aabb,Mt=ft.aabb;St.minx=Ct.minx<Mt.minx?Ct.minx:Mt.minx,St.miny=Ct.miny<Mt.miny?Ct.miny:Mt.miny,St.maxx=Ct.maxx>Mt.maxx?Ct.maxx:Mt.maxx,St.maxy=Ct.maxy>Mt.maxy?Ct.maxy:Mt.maxy;var Pt=xt.height,kt=vt.height;je.height=1+(kt<Pt?Pt:kt);var Tt=je.height,At=ft.height;mt.height=1+(At<Tt?Tt:At)}else{mt.child2=vt;var Ot=((je.child2=ft).parent=je).aabb,Et=xt.aabb,Gt=ft.aabb;Ot.minx=Et.minx<Gt.minx?Et.minx:Gt.minx,Ot.miny=Et.miny<Gt.miny?Et.miny:Gt.miny,Ot.maxx=Et.maxx>Gt.maxx?Et.maxx:Gt.maxx,Ot.maxy=Et.maxy>Gt.maxy?Et.maxy:Gt.maxy;var Dt=mt.aabb,It=je.aabb,Lt=vt.aabb;Dt.minx=It.minx<Lt.minx?It.minx:Lt.minx,Dt.miny=It.miny<Lt.miny?It.miny:Lt.miny,Dt.maxx=It.maxx>Lt.maxx?It.maxx:Lt.maxx,Dt.maxy=It.maxy>Lt.maxy?It.maxy:Lt.maxy;var Bt=xt.height,Rt=ft.height;je.height=1+(Rt<Bt?Bt:Rt);var Ft=je.height,jt=vt.height;mt.height=1+(jt<Ft?Ft:jt)}je=mt}else if(gt<-1){var Nt=xt.child1,Ut=xt.child2;if(xt.child1=je,xt.parent=je.parent,null!=(je.parent=xt).parent?xt.parent.child1==je?xt.parent.child1=xt:xt.parent.child2=xt:Re.root=xt,Nt.height>Ut.height){xt.child2=Nt;var Vt=((je.child1=Ut).parent=je).aabb,Ht=mt.aabb,Wt=Ut.aabb;Vt.minx=Ht.minx<Wt.minx?Ht.minx:Wt.minx,Vt.miny=Ht.miny<Wt.miny?Ht.miny:Wt.miny,Vt.maxx=Ht.maxx>Wt.maxx?Ht.maxx:Wt.maxx,Vt.maxy=Ht.maxy>Wt.maxy?Ht.maxy:Wt.maxy;var qt=xt.aabb,Xt=je.aabb,Yt=Nt.aabb;qt.minx=Xt.minx<Yt.minx?Xt.minx:Yt.minx,qt.miny=Xt.miny<Yt.miny?Xt.miny:Yt.miny,qt.maxx=Xt.maxx>Yt.maxx?Xt.maxx:Yt.maxx,qt.maxy=Xt.maxy>Yt.maxy?Xt.maxy:Yt.maxy;var Kt=mt.height,Zt=Ut.height;je.height=1+(Zt<Kt?Kt:Zt);var Jt=je.height,Qt=Nt.height;xt.height=1+(Qt<Jt?Jt:Qt)}else{xt.child2=Ut;var $t=((je.child1=Nt).parent=je).aabb,ei=mt.aabb,ti=Nt.aabb;$t.minx=ei.minx<ti.minx?ei.minx:ti.minx,$t.miny=ei.miny<ti.miny?ei.miny:ti.miny,$t.maxx=ei.maxx>ti.maxx?ei.maxx:ti.maxx,$t.maxy=ei.maxy>ti.maxy?ei.maxy:ti.maxy;var ii=xt.aabb,ni=je.aabb,ri=Ut.aabb;ii.minx=ni.minx<ri.minx?ni.minx:ri.minx,ii.miny=ni.miny<ri.miny?ni.miny:ri.miny,ii.maxx=ni.maxx>ri.maxx?ni.maxx:ri.maxx,ii.maxy=ni.maxy>ri.maxy?ni.maxy:ri.maxy;var oi=mt.height,ai=Nt.height;je.height=1+(ai<oi?oi:ai);var si=je.height,pi=Ut.height;xt.height=1+(pi<si?si:pi)}je=xt}else je=je}var li=je.child1,hi=je.child2,ui=li.height,di=hi.height;je.height=1+(di<ui?ui:di);var ci=je.aabb,_i=li.aabb,yi=hi.aabb;ci.minx=_i.minx<yi.minx?_i.minx:yi.minx,ci.miny=_i.miny<yi.miny?_i.miny:yi.miny,ci.maxx=_i.maxx>yi.maxx?_i.maxx:yi.maxx,ci.maxy=_i.maxy>yi.maxy?_i.maxy:yi.maxy,je=je.parent}}i.synced=!1,i=i.snext}for(;null!=this.syncs;){var xi=this.syncs;if(this.syncs=xi.snext,xi.snext=null,!xi.moved){xi.moved=!1;var mi=xi.shape;if(!mi.body.component.sleeping){var gi=xi.aabb,fi=null;for(null!=this.dtree.root&&(this.dtree.root.next=fi,fi=this.dtree.root);null!=fi;){var vi=fi;if(fi=vi.next,vi.next=null,vi!=xi)if(null==vi.child1){var zi=vi.shape;if(zi.body!=mi.body&&(1!=zi.body.type||1!=mi.body.type)){var wi=vi.aabb;if(wi.miny<=gi.maxy&&gi.miny<=wi.maxy&&wi.minx<=gi.maxx&&gi.minx<=wi.maxx){var bi,Si;Si=mi.id<zi.id?(bi=mi.id,zi.id):(bi=zi.id,mi.id);for(var Ci=null,Mi=(mi.pairs.length<zi.pairs.length?mi:zi).pairs.head;null!=Mi;){var Pi=Mi.elt;if(Pi.id==bi&&Pi.di==Si){Ci=Pi;break}Mi=Mi.next}if(null!=Ci){Ci.sleeping&&(Ci.sleeping=!1,Ci.next=this.pairs,(this.pairs=Ci).first=!0);continue}null==nr.zpp_pool?Ci=new nr:(Ci=nr.zpp_pool,nr.zpp_pool=Ci.next,Ci.next=null),Ci.n1=xi,Ci.n2=vi,Ci.id=bi,Ci.di=Si,Ci.next=this.pairs,(this.pairs=Ci).first=!0;var ki,Ti=mi.pairs;null==rr.zpp_pool?ki=new rr:(ki=rr.zpp_pool,rr.zpp_pool=ki.next,ki.next=null),ki.elt=Ci;var Ai=ki;Ai.next=Ti.head,Ti.head=Ai,Ti.modified=!0,Ti.length++;var Oi,Ei=zi.pairs;null==rr.zpp_pool?Oi=new rr:(Oi=rr.zpp_pool,rr.zpp_pool=Oi.next,Oi.next=null),Oi.elt=Ci;var Gi=Oi;Gi.next=Ei.head,Ei.head=Gi,Ei.modified=!0,Ei.length++}}}else{var Di=vi.aabb;Di.miny<=gi.maxy&&gi.miny<=Di.maxy&&Di.minx<=gi.maxx&&gi.minx<=Di.maxx&&(null!=vi.child1&&(vi.child1.next=fi,fi=vi.child1),null!=vi.child2&&(vi.child2.next=fi,fi=vi.child2))}}for(null!=this.stree.root&&(this.stree.root.next=fi,fi=this.stree.root);null!=fi;){var Ii=fi;if(fi=Ii.next,Ii.next=null,Ii!=xi)if(null==Ii.child1){var Li=Ii.shape;if(Li.body!=mi.body&&(1!=Li.body.type||1!=mi.body.type)){var Bi=Ii.aabb;if(Bi.miny<=gi.maxy&&gi.miny<=Bi.maxy&&Bi.minx<=gi.maxx&&gi.minx<=Bi.maxx){var Ri,Fi;Fi=mi.id<Li.id?(Ri=mi.id,Li.id):(Ri=Li.id,mi.id);for(var ji=null,Ni=(mi.pairs.length<Li.pairs.length?mi:Li).pairs.head;null!=Ni;){var Ui=Ni.elt;if(Ui.id==Ri&&Ui.di==Fi){ji=Ui;break}Ni=Ni.next}if(null!=ji){ji.sleeping&&(ji.sleeping=!1,ji.next=this.pairs,(this.pairs=ji).first=!0);continue}null==nr.zpp_pool?ji=new nr:(ji=nr.zpp_pool,nr.zpp_pool=ji.next,ji.next=null),ji.n1=xi,ji.n2=Ii,ji.id=Ri,ji.di=Fi,ji.next=this.pairs,(this.pairs=ji).first=!0;var Vi,Hi=mi.pairs;null==rr.zpp_pool?Vi=new rr:(Vi=rr.zpp_pool,rr.zpp_pool=Vi.next,Vi.next=null),Vi.elt=ji;var Wi=Vi;Wi.next=Hi.head,Hi.head=Wi,Hi.modified=!0,Hi.length++;var qi,Xi=Li.pairs;null==rr.zpp_pool?qi=new rr:(qi=rr.zpp_pool,rr.zpp_pool=qi.next,qi.next=null),qi.elt=ji;var Yi=qi;Yi.next=Xi.head,Xi.head=Yi,Xi.modified=!0,Xi.length++}}}else{var Ki=Ii.aabb;Ki.miny<=gi.maxy&&gi.miny<=Ki.maxy&&Ki.minx<=gi.maxx&&gi.minx<=Ki.maxx&&(null!=Ii.child1&&(Ii.child1.next=fi,fi=Ii.child1),null!=Ii.child2&&(Ii.child2.next=fi,fi=Ii.child2))}}}}}for(;null!=this.moves;){var Zi=this.moves;this.moves=Zi.mnext,Zi.mnext=null,Zi.moved=!1;var Ji=Zi.shape;if(!Ji.body.component.sleeping){var Qi=Zi.aabb,$i=null;for(null!=this.dtree.root&&(this.dtree.root.next=$i,$i=this.dtree.root);null!=$i;){var en=$i;if($i=en.next,en.next=null,en!=Zi)if(null==en.child1){var tn=en.shape;if(tn.body!=Ji.body&&(1!=tn.body.type||1!=Ji.body.type)){var nn=en.aabb;if(nn.miny<=Qi.maxy&&Qi.miny<=nn.maxy&&nn.minx<=Qi.maxx&&Qi.minx<=nn.maxx){var rn,on;on=Ji.id<tn.id?(rn=Ji.id,tn.id):(rn=tn.id,Ji.id);for(var an=null,sn=(Ji.pairs.length<tn.pairs.length?Ji:tn).pairs.head;null!=sn;){var pn=sn.elt;if(pn.id==rn&&pn.di==on){an=pn;break}sn=sn.next}if(null!=an){an.sleeping&&(an.sleeping=!1,an.next=this.pairs,(this.pairs=an).first=!0);continue}null==nr.zpp_pool?an=new nr:(an=nr.zpp_pool,nr.zpp_pool=an.next,an.next=null),an.n1=Zi,an.n2=en,an.id=rn,an.di=on,an.next=this.pairs,(this.pairs=an).first=!0;var ln,hn=Ji.pairs;null==rr.zpp_pool?ln=new rr:(ln=rr.zpp_pool,rr.zpp_pool=ln.next,ln.next=null),ln.elt=an;var un=ln;un.next=hn.head,hn.head=un,hn.modified=!0,hn.length++;var dn,cn=tn.pairs;null==rr.zpp_pool?dn=new rr:(dn=rr.zpp_pool,rr.zpp_pool=dn.next,dn.next=null),dn.elt=an;var _n=dn;_n.next=cn.head,cn.head=_n,cn.modified=!0,cn.length++}}}else{var yn=en.aabb;yn.miny<=Qi.maxy&&Qi.miny<=yn.maxy&&yn.minx<=Qi.maxx&&Qi.minx<=yn.maxx&&(null!=en.child1&&(en.child1.next=$i,$i=en.child1),null!=en.child2&&(en.child2.next=$i,$i=en.child2))}}for(null!=this.stree.root&&(this.stree.root.next=$i,$i=this.stree.root);null!=$i;){var xn=$i;if($i=xn.next,xn.next=null,xn!=Zi)if(null==xn.child1){var mn=xn.shape;if(mn.body!=Ji.body&&(1!=mn.body.type||1!=Ji.body.type)){var gn=xn.aabb;if(gn.miny<=Qi.maxy&&Qi.miny<=gn.maxy&&gn.minx<=Qi.maxx&&Qi.minx<=gn.maxx){var fn,vn;vn=Ji.id<mn.id?(fn=Ji.id,mn.id):(fn=mn.id,Ji.id);for(var zn=null,wn=(Ji.pairs.length<mn.pairs.length?Ji:mn).pairs.head;null!=wn;){var bn=wn.elt;if(bn.id==fn&&bn.di==vn){zn=bn;break}wn=wn.next}if(null!=zn){zn.sleeping&&(zn.sleeping=!1,zn.next=this.pairs,(this.pairs=zn).first=!0);continue}null==nr.zpp_pool?zn=new nr:(zn=nr.zpp_pool,nr.zpp_pool=zn.next,zn.next=null),zn.n1=Zi,zn.n2=xn,zn.id=fn,zn.di=vn,zn.next=this.pairs,(this.pairs=zn).first=!0;var Sn,Cn=Ji.pairs;null==rr.zpp_pool?Sn=new rr:(Sn=rr.zpp_pool,rr.zpp_pool=Sn.next,Sn.next=null),Sn.elt=zn;var Mn=Sn;Mn.next=Cn.head,Cn.head=Mn,Cn.modified=!0,Cn.length++;var Pn,kn=mn.pairs;null==rr.zpp_pool?Pn=new rr:(Pn=rr.zpp_pool,rr.zpp_pool=Pn.next,Pn.next=null),Pn.elt=zn;var Tn=Pn;Tn.next=kn.head,kn.head=Tn,kn.modified=!0,kn.length++}}}else{var An=xn.aabb;An.miny<=Qi.maxy&&Qi.miny<=An.maxy&&An.minx<=Qi.maxx&&Qi.minx<=An.maxx&&(null!=xn.child1&&(xn.child1.next=$i,$i=xn.child1),null!=xn.child2&&(xn.child2.next=$i,$i=xn.child2))}}}}for(var On=null,En=this.pairs;null!=En;){var Gn;if(En.first)Gn=!1;else{var Dn=En.n1.aabb,In=En.n2.aabb;Gn=!(In.miny<=Dn.maxy&&Dn.miny<=In.maxy&&In.minx<=Dn.maxx&&Dn.minx<=In.maxx)}if(Gn){null==On?this.pairs=En.next:On.next=En.next;for(var Ln=En.n1.shape.pairs,Bn=null,Rn=Ln.head;null!=Rn;){if(Rn.elt==En){var Fn,jn;null==Bn?(jn=(Fn=Ln.head).next,Ln.head=jn,null==Ln.head&&(Ln.pushmod=!0)):(jn=(Fn=Bn.next).next,null==(Bn.next=jn)&&(Ln.pushmod=!0));var Nn=Fn;Nn.elt=null,Nn.next=rr.zpp_pool,rr.zpp_pool=Nn,Ln.modified=!0,Ln.length--,Ln.pushmod=!0;break}Rn=(Bn=Rn).next}for(var Un=En.n2.shape.pairs,Vn=null,Hn=Un.head;null!=Hn;){if(Hn.elt==En){var Wn,qn;null==Vn?(qn=(Wn=Un.head).next,Un.head=qn,null==Un.head&&(Un.pushmod=!0)):(qn=(Wn=Vn.next).next,null==(Vn.next=qn)&&(Un.pushmod=!0));var Xn=Wn;Xn.elt=null,Xn.next=rr.zpp_pool,rr.zpp_pool=Xn,Un.modified=!0,Un.length--,Un.pushmod=!0;break}Hn=(Vn=Hn).next}var Yn=En.next;null!=En.arb&&(En.arb.pair=null),En.arb=null;var Kn=En;Kn.n1=Kn.n2=null,Kn.sleeping=!1,Kn.next=nr.zpp_pool,nr.zpp_pool=Kn,En=Yn}else{var Zn=En.n1.shape,Jn=Zn.body,Qn=En.n2.shape,$n=Qn.body;if(En.first||!Jn.component.sleeping&&1!=Jn.type||!$n.component.sleeping&&1!=$n.type){En.first=!1;var er=Zn.aabb,tr=Qn.aabb;if(tr.miny<=er.maxy&&er.miny<=tr.maxy&&tr.minx<=er.maxx&&er.minx<=tr.maxx){var ir=En.arb;En.arb=t?e.narrowPhase(Zn,Qn,2!=Jn.type||2!=$n.type,En.arb,!1):e.continuousEvent(Zn,Qn,2!=Jn.type||2!=$n.type,En.arb,!1),null==En.arb?null!=ir&&(ir.pair=null):En.arb.pair=En}En=(On=En).next}else En.sleeping=!0,null==On?this.pairs=En.next:On.next=En.next,En=En.next}}},ii.prototype.clear=function(){for(;null!=this.syncs;){var e=this.syncs.snext;this.syncs.snext=null,this.syncs.first_sync&&(this.syncs.shape.node=null,this.syncs.shape.removedFromSpace(),this.syncs.shape=null),this.syncs=e}for(;null!=this.moves;){var t=this.moves.mnext;this.moves.mnext=null,this.moves.first_sync&&(this.moves.shape.node=null,this.moves.shape.removedFromSpace(),this.moves.shape=null),this.moves=t}for(;null!=this.pairs;){var i=this.pairs.next;null!=this.pairs.arb&&(this.pairs.arb.pair=null),this.pairs.arb=null;for(var n=this.pairs.n1.shape.pairs,r=this.pairs,o=null,a=n.head;null!=a;){if(a.elt==r){var s,p;null==o?(p=(s=n.head).next,n.head=p,null==n.head&&(n.pushmod=!0)):(p=(s=o.next).next,null==(o.next=p)&&(n.pushmod=!0));var l=s;l.elt=null,l.next=rr.zpp_pool,rr.zpp_pool=l,n.modified=!0,n.length--,n.pushmod=!0;break}a=(o=a).next}for(var h=this.pairs.n2.shape.pairs,u=this.pairs,d=null,c=h.head;null!=c;){if(c.elt==u){var _,y;null==d?(y=(_=h.head).next,h.head=y,null==h.head&&(h.pushmod=!0)):(y=(_=d.next).next,null==(d.next=y)&&(h.pushmod=!0));var x=_;x.elt=null,x.next=rr.zpp_pool,rr.zpp_pool=x,h.modified=!0,h.length--,h.pushmod=!0;break}c=(d=c).next}var m=this.pairs;m.n1=m.n2=null,m.sleeping=!1,m.next=nr.zpp_pool,nr.zpp_pool=m,this.pairs=i}this.dtree.clear(),this.stree.clear()},ii.prototype.treeStack=null,ii.prototype.shapesUnderPoint=function(e,t,i,n){var r;this.sync_broadphase(),null==ep.zpp_pool?r=new ep:(r=ep.zpp_pool,ep.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=e,r.y=t;var o=r,a=null==n?new me:n;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var s=this.treeStack.pop_unsafe(),p=s.aabb;if(o.x>=p.minx&&o.x<=p.maxx&&o.y>=p.miny&&o.y<=p.maxy)if(null==s.child1){var l;if(null!=i){var h=s.shape.filter;l=0!=(h.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&h.collisionGroup)}else l=!0;l&&(0==s.shape.type?$s.circleContains(s.shape.circle,o)&&a.push(s.shape.outer):$s.polyContains(s.shape.polygon,o)&&a.push(s.shape.outer))}else null!=s.child1&&this.treeStack.add(s.child1),null!=s.child2&&this.treeStack.add(s.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var u=this.treeStack.pop_unsafe(),d=u.aabb;if(o.x>=d.minx&&o.x<=d.maxx&&o.y>=d.miny&&o.y<=d.maxy)if(null==u.child1){var c;if(null!=i){var _=u.shape.filter;c=0!=(_.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&_.collisionGroup)}else c=!0;c&&(0==u.shape.type?$s.circleContains(u.shape.circle,o)&&a.push(u.shape.outer):$s.polyContains(u.shape.polygon,o)&&a.push(u.shape.outer))}else null!=u.child1&&this.treeStack.add(u.child1),null!=u.child2&&this.treeStack.add(u.child2)}return null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=ep.zpp_pool,ep.zpp_pool=o,a},ii.prototype.bodiesUnderPoint=function(e,t,i,n){var r;this.sync_broadphase(),null==ep.zpp_pool?r=new ep:(r=ep.zpp_pool,ep.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=e,r.y=t;var o=r,a=null==n?new ee:n;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var s=this.treeStack.pop_unsafe(),p=s.aabb;if(o.x>=p.minx&&o.x<=p.maxx&&o.y>=p.miny&&o.y<=p.maxy)if(null==s.child1){var l=s.shape.body.outer;if(!a.has(l)){var h;if(null!=i){var u=s.shape.filter;h=0!=(u.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&u.collisionGroup)}else h=!0;h&&(0==s.shape.type?$s.circleContains(s.shape.circle,o)&&a.push(l):$s.polyContains(s.shape.polygon,o)&&a.push(l))}}else null!=s.child1&&this.treeStack.add(s.child1),null!=s.child2&&this.treeStack.add(s.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var d=this.treeStack.pop_unsafe(),c=d.aabb;if(o.x>=c.minx&&o.x<=c.maxx&&o.y>=c.miny&&o.y<=c.maxy)if(null==d.child1){var _=d.shape.body.outer;if(!a.has(_)){var y;if(null!=i){var x=d.shape.filter;y=0!=(x.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&x.collisionGroup)}else y=!0;y&&(0==d.shape.type?$s.circleContains(d.shape.circle,o)&&a.push(_):$s.polyContains(d.shape.polygon,o)&&a.push(_))}}else null!=d.child1&&this.treeStack.add(d.child1),null!=d.child2&&this.treeStack.add(d.child2)}return null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=ep.zpp_pool,ep.zpp_pool=o,a},ii.prototype.treeStack2=null,ii.prototype.shapesInAABB=function(e,t,i,n,r){this.sync_broadphase(),this.updateAABBShape(e);var o=this.aabbShape.zpp_inner.aabb,a=null==r?new me:r;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var s=this.treeStack.pop_unsafe(),p=s.aabb;if(p.minx>=o.minx&&p.miny>=o.miny&&p.maxx<=o.maxx&&p.maxy<=o.maxy)if(null==s.child1){var l;if(null!=n){var h=s.shape.filter;l=0!=(h.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&h.collisionGroup)}else l=!0;l&&a.push(s.shape.outer)}else for(null==this.treeStack2&&(this.treeStack2=new Ti),this.treeStack2.add(s);null!=this.treeStack2.head;){var u=this.treeStack2.pop_unsafe();if(null==u.child1){var d;if(null!=n){var c=u.shape.filter;d=0!=(c.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&c.collisionGroup)}else d=!0;d&&a.push(u.shape.outer)}else null!=u.child1&&this.treeStack2.add(u.child1),null!=u.child2&&this.treeStack2.add(u.child2)}else{var _=s.aabb;if(o.miny<=_.maxy&&_.miny<=o.maxy&&o.minx<=_.maxx&&_.minx<=o.maxx)if(null==s.child1){var y;if(null!=n){var x=s.shape.filter;y=0!=(x.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&x.collisionGroup)}else y=!0;if(y)if(t)if(i)$s.containTest(this.aabbShape.zpp_inner,s.shape)&&a.push(s.shape.outer);else{var m=s.shape.aabb;m.minx>=o.minx&&m.miny>=o.miny&&m.maxx<=o.maxx&&m.maxy<=o.maxy?a.push(s.shape.outer):$s.testCollide_safe(s.shape,this.aabbShape.zpp_inner)&&a.push(s.shape.outer)}else{var g;if(i){var f=s.shape.aabb;g=f.minx>=o.minx&&f.miny>=o.miny&&f.maxx<=o.maxx&&f.maxy<=o.maxy}else g=!0;g&&a.push(s.shape.outer)}}else null!=s.child1&&this.treeStack.add(s.child1),null!=s.child2&&this.treeStack.add(s.child2)}}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var v=this.treeStack.pop_unsafe(),z=v.aabb;if(z.minx>=o.minx&&z.miny>=o.miny&&z.maxx<=o.maxx&&z.maxy<=o.maxy)if(null==v.child1){var w;if(null!=n){var b=v.shape.filter;w=0!=(b.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&b.collisionGroup)}else w=!0;w&&a.push(v.shape.outer)}else for(null==this.treeStack2&&(this.treeStack2=new Ti),this.treeStack2.add(v);null!=this.treeStack2.head;){var S=this.treeStack2.pop_unsafe();if(null==S.child1){var C;if(null!=n){var M=S.shape.filter;C=0!=(M.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&M.collisionGroup)}else C=!0;C&&a.push(S.shape.outer)}else null!=S.child1&&this.treeStack2.add(S.child1),null!=S.child2&&this.treeStack2.add(S.child2)}else{var P=v.aabb;if(o.miny<=P.maxy&&P.miny<=o.maxy&&o.minx<=P.maxx&&P.minx<=o.maxx)if(null==v.child1){var k;if(null!=n){var T=v.shape.filter;k=0!=(T.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&T.collisionGroup)}else k=!0;if(k)if(t)if(i)$s.containTest(this.aabbShape.zpp_inner,v.shape)&&a.push(v.shape.outer);else{var A=v.shape.aabb;A.minx>=o.minx&&A.miny>=o.miny&&A.maxx<=o.maxx&&A.maxy<=o.maxy?a.push(v.shape.outer):$s.testCollide_safe(v.shape,this.aabbShape.zpp_inner)&&a.push(v.shape.outer)}else{var O;if(i){var E=v.shape.aabb;O=E.minx>=o.minx&&E.miny>=o.miny&&E.maxx<=o.maxx&&E.maxy<=o.maxy}else O=!0;O&&a.push(v.shape.outer)}}else null!=v.child1&&this.treeStack.add(v.child1),null!=v.child2&&this.treeStack.add(v.child2)}}return a},ii.prototype.failed=null,ii.prototype.bodiesInAABB=function(e,t,i,n,r){this.sync_broadphase(),this.updateAABBShape(e);var o=this.aabbShape.zpp_inner.aabb,a=null==r?new ee:r;if(null==this.failed&&(this.failed=new ee),null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var s=this.treeStack.pop_unsafe(),p=s.aabb;if(p.minx>=o.minx&&p.miny>=o.miny&&p.maxx<=o.maxx&&p.maxy<=o.maxy)if(null==s.child1){var l;if(null!=n){var h=s.shape.filter;l=0!=(h.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&h.collisionGroup)}else l=!0;if(l){var u=s.shape.body.outer;a.has(u)||a.push(u)}}else for(null==this.treeStack2&&(this.treeStack2=new Ti),this.treeStack2.add(s);null!=this.treeStack2.head;){var d=this.treeStack2.pop_unsafe();if(null==d.child1){var c;if(null!=n){var _=d.shape.filter;c=0!=(_.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&_.collisionGroup)}else c=!0;if(c){var y=d.shape.body.outer;a.has(y)||a.push(y)}}else null!=d.child1&&this.treeStack2.add(d.child1),null!=d.child2&&this.treeStack2.add(d.child2)}else{var x=s.aabb;if(o.miny<=x.maxy&&x.miny<=o.maxy&&o.minx<=x.maxx&&x.minx<=o.maxx)if(null==s.child1){var m,g=s.shape.body.outer;if(null!=n){var f=s.shape.filter;m=0!=(f.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&f.collisionGroup)}else m=!0;if(m)if(t)if(i){if(!this.failed.has(g)){var v=$s.containTest(this.aabbShape.zpp_inner,s.shape);!a.has(g)&&v?a.push(g):v||(a.remove(g),this.failed.push(g))}}else!a.has(g)&&$s.testCollide_safe(s.shape,this.aabbShape.zpp_inner)&&a.push(g);else if(i){if(!this.failed.has(g)){var z=s.shape.aabb,w=z.minx>=o.minx&&z.miny>=o.miny&&z.maxx<=o.maxx&&z.maxy<=o.maxy;!a.has(g)&&w?a.push(g):w||(a.remove(g),this.failed.push(g))}}else{var b;if(a.has(g))b=!1;else{var S=s.shape.aabb;b=S.minx>=o.minx&&S.miny>=o.miny&&S.maxx<=o.maxx&&S.maxy<=o.maxy}b&&a.push(g)}}else null!=s.child1&&this.treeStack.add(s.child1),null!=s.child2&&this.treeStack.add(s.child2)}}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var C=this.treeStack.pop_unsafe(),M=C.aabb;if(M.minx>=o.minx&&M.miny>=o.miny&&M.maxx<=o.maxx&&M.maxy<=o.maxy)if(null==C.child1){var P;if(null!=n){var k=C.shape.filter;P=0!=(k.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&k.collisionGroup)}else P=!0;if(P){var T=C.shape.body.outer;a.has(T)||a.push(T)}}else for(null==this.treeStack2&&(this.treeStack2=new Ti),this.treeStack2.add(C);null!=this.treeStack2.head;){var A=this.treeStack2.pop_unsafe();if(null==A.child1){var O;if(null!=n){var E=A.shape.filter;O=0!=(E.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&E.collisionGroup)}else O=!0;if(O){var G=A.shape.body.outer;a.has(G)||a.push(G)}}else null!=A.child1&&this.treeStack2.add(A.child1),null!=A.child2&&this.treeStack2.add(A.child2)}else{var D=C.aabb;if(o.miny<=D.maxy&&D.miny<=o.maxy&&o.minx<=D.maxx&&D.minx<=o.maxx)if(null==C.child1){var I,L=C.shape.body.outer;if(null!=n){var B=C.shape.filter;I=0!=(B.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&B.collisionGroup)}else I=!0;if(I)if(t)if(i){if(!this.failed.has(L)){var R=$s.containTest(this.aabbShape.zpp_inner,C.shape);!a.has(L)&&R?a.push(L):R||(a.remove(L),this.failed.push(L))}}else!a.has(L)&&$s.testCollide_safe(C.shape,this.aabbShape.zpp_inner)&&a.push(L);else if(i){if(!this.failed.has(L)){var F=C.shape.aabb,j=F.minx>=o.minx&&F.miny>=o.miny&&F.maxx<=o.maxx&&F.maxy<=o.maxy;!a.has(L)&&j?a.push(L):j||(a.remove(L),this.failed.push(L))}}else{var N;if(a.has(L))N=!1;else{var U=C.shape.aabb;N=U.minx>=o.minx&&U.miny>=o.miny&&U.maxx<=o.maxx&&U.maxy<=o.maxy}N&&a.push(L)}}else null!=C.child1&&this.treeStack.add(C.child1),null!=C.child2&&this.treeStack.add(C.child2)}}return this.failed.clear(),a},ii.prototype.shapesInCircle=function(e,t,i,n,r,o){this.sync_broadphase(),this.updateCircShape(e,t,i);var a=this.circShape.zpp_inner.aabb,s=null==o?new me:o;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var p=this.treeStack.pop_unsafe(),l=p.aabb;if(a.miny<=l.maxy&&l.miny<=a.maxy&&a.minx<=l.maxx&&l.minx<=a.maxx)if(null==p.child1){var h;if(null!=r){var u=p.shape.filter;h=0!=(u.collisionMask&r.collisionGroup)&&0!=(r.collisionMask&u.collisionGroup)}else h=!0;h&&(n?$s.containTest(this.circShape.zpp_inner,p.shape)&&s.push(p.shape.outer):$s.testCollide_safe(p.shape,this.circShape.zpp_inner)&&s.push(p.shape.outer))}else null!=p.child1&&this.treeStack.add(p.child1),null!=p.child2&&this.treeStack.add(p.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var d=this.treeStack.pop_unsafe(),c=d.aabb;if(a.miny<=c.maxy&&c.miny<=a.maxy&&a.minx<=c.maxx&&c.minx<=a.maxx)if(null==d.child1){var _;if(null!=r){var y=d.shape.filter;_=0!=(y.collisionMask&r.collisionGroup)&&0!=(r.collisionMask&y.collisionGroup)}else _=!0;_&&(n?$s.containTest(this.circShape.zpp_inner,d.shape)&&s.push(d.shape.outer):$s.testCollide_safe(d.shape,this.circShape.zpp_inner)&&s.push(d.shape.outer))}else null!=d.child1&&this.treeStack.add(d.child1),null!=d.child2&&this.treeStack.add(d.child2)}return s},ii.prototype.bodiesInCircle=function(e,t,i,n,r,o){this.sync_broadphase(),this.updateCircShape(e,t,i);var a=this.circShape.zpp_inner.aabb,s=null==o?new ee:o;if(null==this.failed&&(this.failed=new ee),null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var p=this.treeStack.pop_unsafe(),l=p.aabb;if(a.miny<=l.maxy&&l.miny<=a.maxy&&a.minx<=l.maxx&&l.minx<=a.maxx)if(null==p.child1){var h,u=p.shape.body.outer;if(null!=r){var d=p.shape.filter;h=0!=(d.collisionMask&r.collisionGroup)&&0!=(r.collisionMask&d.collisionGroup)}else h=!0;if(h)if(n){if(!this.failed.has(u)){var c=$s.containTest(this.circShape.zpp_inner,p.shape);!s.has(u)&&c?s.push(u):c||(s.remove(u),this.failed.push(u))}}else!s.has(u)&&$s.testCollide_safe(p.shape,this.circShape.zpp_inner)&&s.push(u)}else null!=p.child1&&this.treeStack.add(p.child1),null!=p.child2&&this.treeStack.add(p.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var _=this.treeStack.pop_unsafe(),y=_.aabb;if(a.miny<=y.maxy&&y.miny<=a.maxy&&a.minx<=y.maxx&&y.minx<=a.maxx)if(null==_.child1){var x,m=_.shape.body.outer;if(null!=r){var g=_.shape.filter;x=0!=(g.collisionMask&r.collisionGroup)&&0!=(r.collisionMask&g.collisionGroup)}else x=!0;if(x)if(n){if(!this.failed.has(m)){var f=$s.containTest(this.circShape.zpp_inner,_.shape);!s.has(m)&&f?s.push(m):f||(s.remove(m),this.failed.push(m))}}else!s.has(m)&&$s.testCollide_safe(_.shape,this.circShape.zpp_inner)&&s.push(m)}else null!=_.child1&&this.treeStack.add(_.child1),null!=_.child2&&this.treeStack.add(_.child2)}return this.failed.clear(),s},ii.prototype.shapesInShape=function(e,t,i,n){this.sync_broadphase(),this.validateShape(e);var r=e.aabb,o=null==n?new me:n;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var a=this.treeStack.pop_unsafe(),s=a.aabb;if(r.miny<=s.maxy&&s.miny<=r.maxy&&r.minx<=s.maxx&&s.minx<=r.maxx)if(null==a.child1){var p;if(null!=i){var l=a.shape.filter;p=0!=(l.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&l.collisionGroup)}else p=!0;p&&(t?$s.containTest(e,a.shape)&&o.push(a.shape.outer):$s.testCollide_safe(a.shape,e)&&o.push(a.shape.outer))}else null!=a.child1&&this.treeStack.add(a.child1),null!=a.child2&&this.treeStack.add(a.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var h=this.treeStack.pop_unsafe(),u=h.aabb;if(r.miny<=u.maxy&&u.miny<=r.maxy&&r.minx<=u.maxx&&u.minx<=r.maxx)if(null==h.child1){var d;if(null!=i){var c=h.shape.filter;d=0!=(c.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&c.collisionGroup)}else d=!0;d&&(t?$s.containTest(e,h.shape)&&o.push(h.shape.outer):$s.testCollide_safe(h.shape,e)&&o.push(h.shape.outer))}else null!=h.child1&&this.treeStack.add(h.child1),null!=h.child2&&this.treeStack.add(h.child2)}return o},ii.prototype.bodiesInShape=function(e,t,i,n){this.sync_broadphase(),this.validateShape(e);var r=e.aabb,o=null==n?new ee:n;if(null==this.failed&&(this.failed=new ee),null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var a=this.treeStack.pop_unsafe(),s=a.aabb;if(r.miny<=s.maxy&&s.miny<=r.maxy&&r.minx<=s.maxx&&s.minx<=r.maxx)if(null==a.child1){var p,l=a.shape.body.outer;if(null!=i){var h=a.shape.filter;p=0!=(h.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&h.collisionGroup)}else p=!0;if(p)if(t){if(!this.failed.has(l)){var u=$s.containTest(e,a.shape);!o.has(l)&&u?o.push(l):u||(o.remove(l),this.failed.push(l))}}else!o.has(l)&&$s.testCollide_safe(a.shape,e)&&o.push(l)}else null!=a.child1&&this.treeStack.add(a.child1),null!=a.child2&&this.treeStack.add(a.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var d=this.treeStack.pop_unsafe(),c=d.aabb;if(r.miny<=c.maxy&&c.miny<=r.maxy&&r.minx<=c.maxx&&c.minx<=r.maxx)if(null==d.child1){var _,y=d.shape.body.outer;if(null!=i){var x=d.shape.filter;_=0!=(x.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&x.collisionGroup)}else _=!0;if(_)if(t){if(!this.failed.has(y)){var m=$s.containTest(e,d.shape);!o.has(y)&&m?o.push(y):m||(o.remove(y),this.failed.push(y))}}else!o.has(y)&&$s.testCollide_safe(d.shape,e)&&o.push(y)}else null!=d.child1&&this.treeStack.add(d.child1),null!=d.child2&&this.treeStack.add(d.child2)}return this.failed.clear(),o},ii.prototype.openlist=null,ii.prototype.rayCast=function(e,t,i){null==this.openlist&&(this.openlist=new Ti),this.sync_broadphase(),e.validate_dir();var n=e.maxdist;if(null!=this.dtree.root&&e.aabbtest(this.dtree.root.aabb)){var r=e.aabbsect(this.dtree.root.aabb);if(0<=r&&r<n){this.dtree.root.rayt=r;for(var o=null,a=this.openlist.head;null!=a&&!(this.dtree.root.rayt<a.elt.rayt);)a=(o=a).next;var s,p=this.openlist;null==sn.zpp_pool?s=new sn:(s=sn.zpp_pool,sn.zpp_pool=s.next,s.next=null),s.elt=this.dtree.root;var l=s;null==o?(l.next=p.head,p.head=l):(l.next=o.next,o.next=l),p.pushmod=p.modified=!0,p.length++}}if(null!=this.stree.root&&e.aabbtest(this.stree.root.aabb)){var h=e.aabbsect(this.stree.root.aabb);if(0<=h&&h<n){this.stree.root.rayt=h;for(var u=null,d=this.openlist.head;null!=d&&!(this.stree.root.rayt<d.elt.rayt);)d=(u=d).next;var c,_=this.openlist;null==sn.zpp_pool?c=new sn:(c=sn.zpp_pool,sn.zpp_pool=c.next,c.next=null),c.elt=this.stree.root;var y=c;null==u?(y.next=_.head,_.head=y):(y.next=u.next,u.next=y),_.pushmod=_.modified=!0,_.length++}}for(var x=null;null!=this.openlist.head;){var m=this.openlist.pop_unsafe();if(m.rayt>=n)break;if(null==m.child1){var g,f=m.shape;if(null!=i){var v=f.filter;g=0!=(v.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&v.collisionGroup)}else g=!0;if(g){var z=0==f.type?e.circlesect(f.circle,t,n):e.aabbtest(f.aabb)?e.polysect(f.polygon,t,n):null;null!=z&&(n=z.zpp_inner.toiDistance,null!=x&&x.zpp_inner.free(),x=z)}}else{if(null!=m.child1&&e.aabbtest(m.child1.aabb)){var w=e.aabbsect(m.child1.aabb);if(0<=w&&w<n){m.child1.rayt=w;for(var b=null,S=this.openlist.head;null!=S&&!(m.child1.rayt<S.elt.rayt);)S=(b=S).next;var C,M=this.openlist;null==sn.zpp_pool?C=new sn:(C=sn.zpp_pool,sn.zpp_pool=C.next,C.next=null),C.elt=m.child1;var P=C;null==b?(P.next=M.head,M.head=P):(P.next=b.next,b.next=P),M.pushmod=M.modified=!0,M.length++}}if(null!=m.child2&&e.aabbtest(m.child2.aabb)){var k=e.aabbsect(m.child2.aabb);if(0<=k&&k<n){m.child2.rayt=k;for(var T=null,A=this.openlist.head;null!=A&&!(m.child2.rayt<A.elt.rayt);)A=(T=A).next;var O,E=this.openlist;null==sn.zpp_pool?O=new sn:(O=sn.zpp_pool,sn.zpp_pool=O.next,O.next=null),O.elt=m.child2;var G=O;null==T?(G.next=E.head,E.head=G):(G.next=T.next,T.next=G),E.pushmod=E.modified=!0,E.length++}}}}return this.openlist.clear(),x},ii.prototype.rayMultiCast=function(e,t,i,n){null==this.openlist&&(this.openlist=new Ti),this.sync_broadphase(),e.validate_dir();var r=e.maxdist>=1/0,o=null==n?new K:n;if(null!=this.dtree.root&&e.aabbtest(this.dtree.root.aabb))if(r)this.openlist.add(this.dtree.root);else{var a=e.aabbsect(this.dtree.root.aabb);0<=a&&a<e.maxdist&&this.openlist.add(this.dtree.root)}if(null!=this.stree.root&&e.aabbtest(this.stree.root.aabb))if(r)this.openlist.add(this.stree.root);else{var s=e.aabbsect(this.stree.root.aabb);0<=s&&s<e.maxdist&&this.openlist.add(this.stree.root)}for(;null!=this.openlist.head;){var p=this.openlist.pop_unsafe();if(null==p.child1){var l,h=p.shape;if(null!=i){var u=h.filter;l=0!=(u.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&u.collisionGroup)}else l=!0;l&&(0==h.type?e.circlesect2(h.circle,t,o):e.aabbtest(h.aabb)&&e.polysect2(h.polygon,t,o))}else{if(null!=p.child1&&e.aabbtest(p.child1.aabb))if(r)this.openlist.add(p.child1);else{var d=e.aabbsect(p.child1.aabb);0<=d&&d<e.maxdist&&this.openlist.add(p.child1)}if(null!=p.child2&&e.aabbtest(p.child2.aabb))if(r)this.openlist.add(p.child2);else{var c=e.aabbsect(p.child2.aabb);0<=c&&c<e.maxdist&&this.openlist.add(p.child2)}}}return this.openlist.clear(),o},ii.prototype.__class__=ii;var ni=zpp_nape.space.ZPP_Island=function(){this.waket=0,this.sleep=!1,this.comps=null,this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.comps=new Ai};ni.__name__=["zpp_nape","space","ZPP_Island"],ni.prototype.next=null,ni.prototype.elem=function(){return this},ni.prototype.begin=function(){return this.next},ni.prototype._inuse=null,ni.prototype.modified=null,ni.prototype.pushmod=null,ni.prototype.length=null,ni.prototype.setbegin=function(e){this.next=e,this.modified=!0,this.pushmod=!0},ni.prototype.add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},ni.prototype.inlined_add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},ni.prototype.addAll=function(e){for(var t=e.next;null!=t;)this.add(t),t=t.next},ni.prototype.insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},ni.prototype.inlined_insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},ni.prototype.pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},ni.prototype.inlined_pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},ni.prototype.pop_unsafe=function(){var e=this.next;return this.pop(),e},ni.prototype.inlined_pop_unsafe=function(){var e=this.next;return this.pop(),e},ni.prototype.remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},ni.prototype.try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){this.erase(t),n=!0;break}i=(t=i).next}return n},ni.prototype.inlined_remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},ni.prototype.inlined_try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){var r,o;null==t?(o=(r=this.next).next,this.next=o,null==this.next&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0)),r._inuse=!1,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},ni.prototype.erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},ni.prototype.inlined_erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},ni.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},ni.prototype.clear=function(){},ni.prototype.inlined_clear=function(){},ni.prototype.reverse=function(){for(var e=this.next,t=null;null!=e;){var i=e.next;e.next=t,t=this.next=e,e=i}this.modified=!0,this.pushmod=!0},ni.prototype.empty=function(){return null==this.next},ni.prototype.size=function(){return this.length},ni.prototype.has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},ni.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},ni.prototype.front=function(){return this.next},ni.prototype.back=function(){for(var e=this.next,t=e;null!=t;)t=(e=t).next;return e},ni.prototype.iterator_at=function(e){for(var t=this.next;0<e--&&null!=t;)t=t.next;return t},ni.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t:null},ni.prototype.comps=null,ni.prototype.sleep=null,ni.prototype.waket=null,ni.prototype.free=function(){},ni.prototype.alloc=function(){this.waket=0},ni.prototype.__class__=ni;var oi=zpp_nape.space.ZPP_Component=function(){this.woken=!1,this.waket=0,this.sleeping=!1,this.island=null,this.constraint=null,this.body=null,this.isBody=!1,this.rank=0,this.parent=null,this.next=null,this.sleeping=!1,this.island=null,(this.parent=this).rank=0,this.woken=!1};oi.__name__=["zpp_nape","space","ZPP_Component"],oi.prototype.next=null,oi.prototype.parent=null,oi.prototype.rank=null,oi.prototype.isBody=null,oi.prototype.body=null,oi.prototype.constraint=null,oi.prototype.island=null,oi.prototype.sleeping=null,oi.prototype.waket=null,oi.prototype.woken=null,oi.prototype.free=function(){this.body=null,this.constraint=null},oi.prototype.alloc=function(){},oi.prototype.reset=function(){this.sleeping=!1,this.island=null,(this.parent=this).rank=0},oi.prototype.__class__=oi;var Yo=zpp_nape.space.ZPP_CallbackSet=function(){this.lazydel=!1,this.freed=!1,this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.int2=null,this.int1=null,this.di=0,this.id=0,this.arbiters=new fi};Yo.__name__=["zpp_nape","space","ZPP_CallbackSet"],Yo.get=function(e,t){var i;return null==Yo.zpp_pool?i=new Yo:(i=Yo.zpp_pool,Yo.zpp_pool=i.next,i.next=null),i.freed=!1,i.lazydel=!1,i.COLLISIONstate=1,i.COLLISIONstamp=0,i.SENSORstate=1,i.SENSORstamp=0,i.FLUIDstate=1,i.FLUIDstamp=0,e.id<t.id?(i.int1=e,i.int2=t):(i.int1=t,i.int2=e),i.id=i.int1.id,i.di=i.int2.id,i},Yo.prototype.id=null,Yo.prototype.di=null,Yo.prototype.int1=null,Yo.prototype.int2=null,Yo.prototype.arbiters=null,Yo.prototype.COLLISIONstate=null,Yo.prototype.COLLISIONstamp=null,Yo.prototype.SENSORstate=null,Yo.prototype.SENSORstamp=null,Yo.prototype.FLUIDstate=null,Yo.prototype.FLUIDstamp=null,Yo.prototype.next=null,Yo.prototype.elem=function(){return this},Yo.prototype.begin=function(){return this.next},Yo.prototype._inuse=null,Yo.prototype.modified=null,Yo.prototype.pushmod=null,Yo.prototype.length=null,Yo.prototype.setbegin=function(e){this.next=e,this.modified=!0,this.pushmod=!0},Yo.prototype.add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},Yo.prototype.inlined_add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},Yo.prototype.addAll=function(e){for(var t=e.next;null!=t;)this.add(t),t=t.next},Yo.prototype.insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},Yo.prototype.inlined_insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},Yo.prototype.pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},Yo.prototype.inlined_pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},Yo.prototype.pop_unsafe=function(){var e=this.next;return this.pop(),e},Yo.prototype.inlined_pop_unsafe=function(){var e=this.next;return this.pop(),e},Yo.prototype.remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Yo.prototype.try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Yo.prototype.inlined_remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Yo.prototype.inlined_try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){var r,o;null==t?(o=(r=this.next).next,this.next=o,null==this.next&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0)),r._inuse=!1,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Yo.prototype.erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},Yo.prototype.inlined_erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},Yo.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Yo.prototype.clear=function(){},Yo.prototype.inlined_clear=function(){},Yo.prototype.reverse=function(){for(var e=this.next,t=null;null!=e;){var i=e.next;e.next=t,t=this.next=e,e=i}this.modified=!0,this.pushmod=!0},Yo.prototype.empty=function(){return null==this.next},Yo.prototype.size=function(){return this.length},Yo.prototype.has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},Yo.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},Yo.prototype.front=function(){return this.next},Yo.prototype.back=function(){for(var e=this.next,t=e;null!=t;)t=(e=t).next;return e},Yo.prototype.iterator_at=function(e){for(var t=this.next;0<e--&&null!=t;)t=t.next;return t},Yo.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t:null},Yo.prototype.freed=null,Yo.prototype.lazydel=null,Yo.prototype.free=function(){this.int1=this.int2=null,this.id=this.di=-1,this.freed=!0},Yo.prototype.alloc=function(){this.freed=!1,this.lazydel=!1,this.COLLISIONstate=1,this.COLLISIONstamp=0,this.SENSORstate=1,this.SENSORstamp=0,this.FLUIDstate=1,this.FLUIDstamp=0},Yo.prototype.add_arb=function(e){var t;t=!1;for(var i=this.arbiters.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}if(t)return!1;var n,r=this.arbiters;null==Ko.zpp_pool?n=new Ko:(n=Ko.zpp_pool,Ko.zpp_pool=n.next,n.next=null),n.elt=e;var o=n;return o.next=r.head,r.head=o,r.modified=!0,r.length++,!0},Yo.prototype.try_remove_arb=function(e){for(var t=this.arbiters,i=null,n=t.head,r=!1;null!=n;){if(n.elt==e){var o,a;null==i?(a=(o=t.head).next,t.head=a,null==t.head&&(t.pushmod=!0)):(a=(o=i.next).next,null==(i.next=a)&&(t.pushmod=!0));var s=o;s.elt=null,s.next=Ko.zpp_pool,Ko.zpp_pool=s,t.modified=!0,t.length--,r=t.pushmod=!0;break}n=(i=n).next}return r},Yo.prototype.remove_arb=function(e){for(var t=this.arbiters,i=null,n=t.head;null!=n;){if(n.elt==e){var r,o;null==i?(o=(r=t.head).next,t.head=o,null==t.head&&(t.pushmod=!0)):(o=(r=i.next).next,null==(i.next=o)&&(t.pushmod=!0));var a=r;a.elt=null,a.next=Ko.zpp_pool,Ko.zpp_pool=a,t.modified=!0,t.length--,t.pushmod=!0;break}n=(i=n).next}},Yo.prototype.empty_arb=function(e){var t;t=!0;for(var i=this.arbiters.head;null!=i;){if(0!=(i.elt.type&e)){t=!1;break}i=i.next}return t},Yo.prototype.really_empty=function(){return null==this.arbiters.head},Yo.prototype.sleeping=function(){var e;e=!0;for(var t=this.arbiters.head;null!=t;){if(!t.elt.sleeping){e=!1;break}t=t.next}return e},Yo.prototype.__class__=Yo;var ai=zpp_nape.space.ZPP_CbSetManager=function(e){this.space=null,(this.cbsets=null)==Yn.zpp_pool?this.cbsets=new Yn:(this.cbsets=Yn.zpp_pool,Yn.zpp_pool=this.cbsets.next,this.cbsets.next=null),this.cbsets.lt=jo.setlt,this.space=e};ai.__name__=["zpp_nape","space","ZPP_CbSetManager"],ai.prototype.cbsets=null,ai.prototype.space=null,ai.prototype.get=function(e){if(null==e.head)return null;var t;null==jo.zpp_pool?t=new jo:(t=jo.zpp_pool,jo.zpp_pool=t.next,t.next=null);var i=t.cbTypes;t.cbTypes=e;var n,r=this.cbsets.find_weak(t);if(null!=r)n=r.data;else{var o=jo.get(e);this.cbsets.insert(o),o.manager=this,n=o}t.cbTypes=i;var a=t;for(a.listeners.clear(),a.zip_listeners=!0,a.bodylisteners.clear(),a.zip_bodylisteners=!0,a.conlisteners.clear(),a.zip_conlisteners=!0;null!=a.cbTypes.head;)a.cbTypes.pop_unsafe().cbsets.remove(a);return a.next=jo.zpp_pool,jo.zpp_pool=a,n},ai.prototype.remove=function(e){for(this.cbsets.remove(e);null!=e.cbpairs.head;){var t=e.cbpairs.pop_unsafe();t.a!=t.b&&(e==t.a?t.b.cbpairs.remove(t):t.a.cbpairs.remove(t)),t.a=t.b=null,t.listeners.clear(),t.next=No.zpp_pool,No.zpp_pool=t}e.manager=null},ai.prototype.clear=function(){},ai.prototype.validate=function(){if(!this.cbsets.empty()){for(var e=this.cbsets.parent;null!=e.prev;)e=e.prev;for(;null!=e;)if(e.data.validate(),null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}},ai.prototype.pair=function(e,t){for(var i,n=null,r=(e.cbpairs.length<t.cbpairs.length?e.cbpairs:t.cbpairs).head;null!=r;){var o=r.elt;if(o.a==e&&o.b==t||o.a==t&&o.b==e){n=o;break}r=r.next}null==n&&(null==No.zpp_pool?i=new No:(i=No.zpp_pool,No.zpp_pool=i.next,i.next=null),i.zip_listeners=!0,jo.setlt(e,t)?(i.a=e,i.b=t):(i.a=t,i.b=e),n=i,e.cbpairs.add(n),t!=e&&t.cbpairs.add(n));return n.zip_listeners&&(n.zip_listeners=!1,n.__validate()),n},ai.prototype.valid_listener=function(e){return e.space==this.space},ai.prototype.__class__=ai;var si=zpp_nape.space.ZPP_Space=function(e,t){this.prelisteners=null,this.precb=null,this.continuous=!1,this.toiEvents=null,this.pre_dt=0,this.convexShapeList=null,this.cbsets=null,this.callbackset_list=null,this.callbacks=null,this.wrap_listeners=null,this.listeners=null,this.islands=null,this.staticsleep=null,this.wrap_livecon=null,this.live_constraints=null,this.wrap_live=null,this.live=null,this.wrap_arbiters=null,this.s_arbiters=null,this.f_arbiters=null,this.c_arbiters_false=null,this.c_arbiters_true=null,this.sortcontacts=!1,this.time=0,this.midstep=!1,this.stamp=0,this.global_ang_drag=0,this.global_lin_drag=0,this.__static=null,this.bphase=null,this.kinematics=null,this.wrap_constraints=null,this.constraints=null,this.wrap_compounds=null,this.compounds=null,this.wrap_bodies=null,this.bodies=null,this.wrap_gravity=null,this.gravityy=0,this.gravityx=0,this.userData=null,this.outer=null,this.toiEvents=new Li,this.global_lin_drag=.015,this.global_ang_drag=.015,this.precb=new f,this.precb.zpp_inner=new nt,this.sortcontacts=!0,this.pre_dt=0,null==t||(null==Uo.Broadphase_DYNAMIC_AABB_TREE&&(Uo.internal=!0,Uo.Broadphase_DYNAMIC_AABB_TREE=new be,Uo.internal=!1),t==Uo.Broadphase_DYNAMIC_AABB_TREE)?this.bphase=new ii(this):(null==Uo.Broadphase_SWEEP_AND_PRUNE&&(Uo.internal=!0,Uo.Broadphase_SWEEP_AND_PRUNE=new be,Uo.internal=!1),t==Uo.Broadphase_SWEEP_AND_PRUNE&&(this.bphase=new li(this))),this.time=0,null!=e?(this.gravityx=e.x,this.gravityy=e.y):(this.gravityx=0,this.gravityy=0),this.bodies=new mi,this.wrap_bodies=gn.get(this.bodies),this.wrap_bodies.zpp_inner.adder=$(this,this.bodies_adder),this.wrap_bodies.zpp_inner.subber=$(this,this.bodies_subber),this.compounds=new gi,this.wrap_compounds=vn.get(this.compounds),this.wrap_compounds.zpp_inner.adder=$(this,this.compounds_adder),this.wrap_compounds.zpp_inner.subber=$(this,this.compounds_subber),this.kinematics=new mi,this.c_arbiters_true=new Di,this.c_arbiters_false=new Di,this.f_arbiters=new Oi,this.s_arbiters=new Ei,this.islands=new ni,this.live=new mi,this.wrap_live=gn.get(this.live,!0),this.staticsleep=new mi,this.constraints=new Ee,this.wrap_constraints=mn.get(this.constraints),this.wrap_constraints.zpp_inner.adder=$(this,this.constraints_adder),this.wrap_constraints.zpp_inner.subber=$(this,this.constraints_subber),this.live_constraints=new Ee,this.wrap_livecon=mn.get(this.live_constraints,!0),this.__static=Xt.__static(),(this.__static.zpp_inner.space=this).callbacks=new nt,this.midstep=!1,this.listeners=new Gi,this.wrap_listeners=zn.get(this.listeners),this.wrap_listeners.zpp_inner.adder=$(this,this.listeners_adder),this.wrap_listeners.zpp_inner.subber=$(this,this.listeners_subber),this.callbackset_list=new Yo,this.mrca1=new Ge,this.mrca2=new Ge,this.prelisteners=new Te,this.cbsets=new ai(this)};si.__name__=["zpp_nape","space","ZPP_Space"],si.prototype.outer=null,si.prototype.userData=null,si.prototype.gravityx=null,si.prototype.gravityy=null,si.prototype.wrap_gravity=null,si.prototype.getgravity=function(){var e,t=this.gravityx,i=this.gravityy;if(null==jn.poolVec2?e=new lt:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==ep.zpp_pool?n=new ep:(n=ep.zpp_pool,ep.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_gravity=e,this.wrap_gravity.zpp_inner._inuse=!0,this.wrap_gravity.zpp_inner._invalidate=$(this,this.gravity_invalidate),this.wrap_gravity.zpp_inner._validate=$(this,this.gravity_validate)},si.prototype.gravity_invalidate=function(e){this.gravityx=e.x,this.gravityy=e.y;for(var t=new gi,i=this.bodies.head;null!=i;){var n=i.elt;n.world||(n.component.waket=this.stamp+(this.midstep?0:1),3==n.type&&(n.kinematicDelaySleep=!0),n.component.sleeping&&this.really_wake(n,!1)),i=i.next}for(var r=this.compounds.head;null!=r;)t.add(r.elt),r=r.next;for(;null!=t.head;){for(var o=t.pop_unsafe(),a=o.bodies.head;null!=a;){var s=a.elt;s.world||(s.component.waket=this.stamp+(this.midstep?0:1),3==s.type&&(s.kinematicDelaySleep=!0),s.component.sleeping&&this.really_wake(s,!1)),a=a.next}for(var p=o.compounds.head;null!=p;)t.add(p.elt),p=p.next}},si.prototype.gravity_validate=function(){this.wrap_gravity.zpp_inner.x=this.gravityx,this.wrap_gravity.zpp_inner.y=this.gravityy},si.prototype.bodies=null,si.prototype.wrap_bodies=null,si.prototype.compounds=null,si.prototype.wrap_compounds=null,si.prototype.constraints=null,si.prototype.wrap_constraints=null,si.prototype.kinematics=null,si.prototype.bphase=null,si.prototype.__static=null,si.prototype.global_lin_drag=null,si.prototype.global_ang_drag=null,si.prototype.stamp=null,si.prototype.midstep=null,si.prototype.time=null,si.prototype.sortcontacts=null,si.prototype.c_arbiters_true=null,si.prototype.c_arbiters_false=null,si.prototype.f_arbiters=null,si.prototype.s_arbiters=null,si.prototype.wrap_arbiters=null,si.prototype.live=null,si.prototype.wrap_live=null,si.prototype.live_constraints=null,si.prototype.wrap_livecon=null,si.prototype.staticsleep=null,si.prototype.islands=null,si.prototype.listeners=null,si.prototype.wrap_listeners=null,si.prototype.callbacks=null,si.prototype.callbackset_list=null,si.prototype.cbsets=null,si.prototype.clear=function(){for(;null!=this.listeners.head;)this.remListener(this.listeners.pop_unsafe());for(;null!=this.callbackset_list.next;){var e=this.callbackset_list.pop_unsafe();e.arbiters.clear(),e.int1=e.int2=null,e.id=e.di=-1,e.freed=!0,e.next=Yo.zpp_pool,Yo.zpp_pool=e}for(;null!=this.c_arbiters_true.head;){var t=this.c_arbiters_true.pop_unsafe();if(!t.cleared){for(var i=t.b1.arbiters,n=null,r=i.head;null!=r;){if(r.elt==t){var o,a;null==n?(a=(o=i.head).next,i.head=a,null==i.head&&(i.pushmod=!0)):(a=(o=n.next).next,null==(n.next=a)&&(i.pushmod=!0));var s=o;s.elt=null,s.next=Ko.zpp_pool,Ko.zpp_pool=s,i.modified=!0,i.length--,i.pushmod=!0;break}r=(n=r).next}for(var p=t.b2.arbiters,l=null,h=p.head;null!=h;){if(h.elt==t){var u,d;null==l?(d=(u=p.head).next,p.head=d,null==p.head&&(p.pushmod=!0)):(d=(u=l.next).next,null==(l.next=d)&&(p.pushmod=!0));var c=u;c.elt=null,c.next=Ko.zpp_pool,Ko.zpp_pool=c,p.modified=!0,p.length--,p.pushmod=!0;break}h=(l=h).next}null!=t.pair&&(t.pair.arb=null,t.pair=null)}for(t.b1=t.b2=null,t.active=!1,t.intchange=!1;null!=t.contacts.next;){var _=t.contacts,y=_.next;_.pop(),y.arbiter=null,y.next=qo.zpp_pool,qo.zpp_pool=y;var x=t.innards,m=x.next;x.next=m.next,m._inuse=!1,null==x.next&&(x.pushmod=!0),x.modified=!0,x.length--}t.userdef_dyn_fric=!1,t.userdef_stat_fric=!1,t.userdef_restitution=!1,t.userdef_rfric=!1,t.__ref_edge1=t.__ref_edge2=null,t.next=Wo.zpp_pool,(Wo.zpp_pool=t).pre_dt=-1}for(;null!=this.c_arbiters_false.head;){var g=this.c_arbiters_false.pop_unsafe();if(!g.cleared){for(var f=g.b1.arbiters,v=null,z=f.head;null!=z;){if(z.elt==g){var w,b;null==v?(b=(w=f.head).next,f.head=b,null==f.head&&(f.pushmod=!0)):(b=(w=v.next).next,null==(v.next=b)&&(f.pushmod=!0));var S=w;S.elt=null,S.next=Ko.zpp_pool,Ko.zpp_pool=S,f.modified=!0,f.length--,f.pushmod=!0;break}z=(v=z).next}for(var C=g.b2.arbiters,M=null,P=C.head;null!=P;){if(P.elt==g){var k,T;null==M?(T=(k=C.head).next,C.head=T,null==C.head&&(C.pushmod=!0)):(T=(k=M.next).next,null==(M.next=T)&&(C.pushmod=!0));var A=k;A.elt=null,A.next=Ko.zpp_pool,Ko.zpp_pool=A,C.modified=!0,C.length--,C.pushmod=!0;break}P=(M=P).next}null!=g.pair&&(g.pair.arb=null,g.pair=null)}for(g.b1=g.b2=null,g.active=!1,g.intchange=!1;null!=g.contacts.next;){var O=g.contacts,E=O.next;O.pop(),E.arbiter=null,E.next=qo.zpp_pool,qo.zpp_pool=E;var G=g.innards,D=G.next;G.next=D.next,D._inuse=!1,null==G.next&&(G.pushmod=!0),G.modified=!0,G.length--}g.userdef_dyn_fric=!1,g.userdef_stat_fric=!1,g.userdef_restitution=!1,g.userdef_rfric=!1,g.__ref_edge1=g.__ref_edge2=null,g.next=Wo.zpp_pool,(Wo.zpp_pool=g).pre_dt=-1}for(;null!=this.s_arbiters.head;){var I=this.s_arbiters.pop_unsafe();if(!I.cleared){for(var L=I.b1.arbiters,B=null,R=L.head;null!=R;){if(R.elt==I){var F,j;null==B?(j=(F=L.head).next,L.head=j,null==L.head&&(L.pushmod=!0)):(j=(F=B.next).next,null==(B.next=j)&&(L.pushmod=!0));var N=F;N.elt=null,N.next=Ko.zpp_pool,Ko.zpp_pool=N,L.modified=!0,L.length--,L.pushmod=!0;break}R=(B=R).next}for(var U=I.b2.arbiters,V=null,H=U.head;null!=H;){if(H.elt==I){var W,q;null==V?(q=(W=U.head).next,U.head=q,null==U.head&&(U.pushmod=!0)):(q=(W=V.next).next,null==(V.next=q)&&(U.pushmod=!0));var X=W;X.elt=null,X.next=Ko.zpp_pool,Ko.zpp_pool=X,U.modified=!0,U.length--,U.pushmod=!0;break}H=(V=H).next}null!=I.pair&&(I.pair.arb=null,I.pair=null)}I.b1=I.b2=null,I.active=!1,I.intchange=!1,I.next=Vo.zpp_pool,Vo.zpp_pool=I}for(;null!=this.f_arbiters.head;){var Y=this.f_arbiters.pop_unsafe();if(!Y.cleared){for(var K=Y.b1.arbiters,Z=null,J=K.head;null!=J;){if(J.elt==Y){var Q,$;null==Z?($=(Q=K.head).next,K.head=$,null==K.head&&(K.pushmod=!0)):($=(Q=Z.next).next,null==(Z.next=$)&&(K.pushmod=!0));var ee=Q;ee.elt=null,ee.next=Ko.zpp_pool,Ko.zpp_pool=ee,K.modified=!0,K.length--,K.pushmod=!0;break}J=(Z=J).next}for(var te=Y.b2.arbiters,ie=null,ne=te.head;null!=ne;){if(ne.elt==Y){var re,oe;null==ie?(oe=(re=te.head).next,te.head=oe,null==te.head&&(te.pushmod=!0)):(oe=(re=ie.next).next,null==(ie.next=oe)&&(te.pushmod=!0));var ae=re;ae.elt=null,ae.next=Ko.zpp_pool,Ko.zpp_pool=ae,te.modified=!0,te.length--,te.pushmod=!0;break}ne=(ie=ne).next}null!=Y.pair&&(Y.pair.arb=null,Y.pair=null)}Y.b1=Y.b2=null,Y.active=!1,Y.intchange=!1,Y.next=Ho.zpp_pool,(Ho.zpp_pool=Y).pre_dt=-1}for(this.bphase.clear();null!=this.bodies.head;){var se=this.bodies.pop_unsafe();if(null!=se.component){var pe=se.component.island;if(null!=pe){for(;null!=pe.comps.head;){var le=pe.comps.pop_unsafe();le.sleeping=!1,le.island=null,(le.parent=le).rank=0}pe.next=ni.zpp_pool,ni.zpp_pool=pe}}se.removedFromSpace(),se.space=null}for(;null!=this.constraints.head;){var he=this.constraints.pop_unsafe();if(null!=he.component){var ue=he.component.island;if(null!=ue){for(;null!=ue.comps.head;){var de=ue.comps.pop_unsafe();de.sleeping=!1,de.island=null,(de.parent=de).rank=0}ue.next=ni.zpp_pool,ni.zpp_pool=ue}}he.removedFromSpace(),he.space=null}this.kinematics.clear();for(var ce=new gi;null!=this.compounds.head;)ce.add(this.compounds.pop_unsafe());for(;null!=ce.head;){var _e=ce.pop_unsafe();_e.removedFromSpace(),_e.space=null;for(var ye=_e.bodies.head;null!=ye;){var xe=ye.elt;if(null!=xe.component){var me=xe.component.island;if(null!=me){for(;null!=me.comps.head;){var ge=me.comps.pop_unsafe();ge.sleeping=!1,ge.island=null,(ge.parent=ge).rank=0}me.next=ni.zpp_pool,ni.zpp_pool=me}}xe.removedFromSpace(),xe.space=null,ye=ye.next}for(var fe=_e.constraints.head;null!=fe;){var ve=fe.elt;if(null!=ve.component){var ze=ve.component.island;if(null!=ze){for(;null!=ze.comps.head;){var we=ze.comps.pop_unsafe();we.sleeping=!1,we.island=null,(we.parent=we).rank=0}ze.next=ni.zpp_pool,ni.zpp_pool=ze}}ve.removedFromSpace(),ve.space=null,fe=fe.next}for(var be=_e.compounds.head;null!=be;)ce.add(be.elt),be=be.next}this.staticsleep.clear(),this.live.clear(),this.live_constraints.clear(),this.stamp=0,this.time=0,this.mrca1.clear(),this.mrca2.clear(),this.prelisteners.clear(),this.cbsets.clear()},si.prototype.bodies_adder=function(e){return e.zpp_inner.space!=this&&(null!=e.zpp_inner.space&&e.zpp_inner.space.outer.zpp_inner.wrap_bodies.remove(e),this.addBody(e.zpp_inner),!0)},si.prototype.bodies_subber=function(e){this.remBody(e.zpp_inner)},si.prototype.compounds_adder=function(e){return e.zpp_inner.space!=this&&(null!=e.zpp_inner.space&&e.zpp_inner.space.wrap_compounds.remove(e),this.addCompound(e.zpp_inner),!0)},si.prototype.compounds_subber=function(e){this.remCompound(e.zpp_inner)},si.prototype.constraints_adder=function(e){return e.zpp_inner.space!=this&&(null!=e.zpp_inner.space&&e.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(e),this.addConstraint(e.zpp_inner),!0)},si.prototype.constraints_subber=function(e){this.remConstraint(e.zpp_inner)},si.prototype.listeners_adder=function(e){return e.zpp_inner.space!=this&&(null!=e.zpp_inner.space&&e.zpp_inner.space.outer.zpp_inner.wrap_listeners.remove(e),this.addListener(e.zpp_inner),!0)},si.prototype.listeners_subber=function(e){this.remListener(e.zpp_inner)},si.prototype.revoke_listener=function(e){},si.prototype.unrevoke_listener=function(e){},si.prototype.addListener=function(e){e.space=this,e.addedToSpace()},si.prototype.remListener=function(e){e.removedFromSpace(),e.space=null},si.prototype.add_callbackset=function(e){var t,i=e.int1.cbsets;null==Ni.zpp_pool?t=new Ni:(t=Ni.zpp_pool,Ni.zpp_pool=t.next,t.next=null),t.elt=e;var n=t;n.next=i.head,i.head=n,i.modified=!0,i.length++;var r,o=e.int2.cbsets;null==Ni.zpp_pool?r=new Ni:(r=Ni.zpp_pool,Ni.zpp_pool=r.next,r.next=null),r.elt=e;var a=r;a.next=o.head,o.head=a,o.modified=!0,o.length++;var s=this.callbackset_list;e._inuse=!0,e.next=s.next,s.next=e,s.modified=!0,s.length++},si.prototype.remove_callbackset=function(e){e.lazydel=!0;for(var t=e.int1.cbsets,i=null,n=t.head;null!=n;){if(n.elt==e){var r,o;null==i?(o=(r=t.head).next,t.head=o,null==t.head&&(t.pushmod=!0)):(o=(r=i.next).next,null==(i.next=o)&&(t.pushmod=!0));var a=r;a.elt=null,a.next=Ni.zpp_pool,Ni.zpp_pool=a,t.modified=!0,t.length--,t.pushmod=!0;break}n=(i=n).next}for(var s=e.int2.cbsets,p=null,l=s.head;null!=l;){if(l.elt==e){var h,u;null==p?(u=(h=s.head).next,s.head=u,null==s.head&&(s.pushmod=!0)):(u=(h=p.next).next,null==(p.next=u)&&(s.pushmod=!0));var d=h;d.elt=null,d.next=Ni.zpp_pool,Ni.zpp_pool=d,s.modified=!0,s.length--,s.pushmod=!0;break}l=(p=l).next}},si.prototype.transmitType=function(e,t){e.world||(e.component.waket=this.stamp+(this.midstep?0:1),3==e.type&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1)),2==e.type?this.live.remove(e):3==e.type?(this.kinematics.remove(e),this.staticsleep.remove(e)):1==e.type&&this.staticsleep.remove(e),e.type=t,3==e.type&&this.kinematics.add(e),1==e.type&&this.static_validation(e),e.component.sleeping=!0,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),3==e.type&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!0))},si.prototype.added_shape=function(e,t){if(null==t&&(t=!1),!t){var i=e.body;i.world||(i.component.waket=this.stamp+(this.midstep?0:1),3==i.type&&(i.kinematicDelaySleep=!0),i.component.sleeping&&this.really_wake(i,!1))}this.bphase.insert(e),e.addedToSpace()},si.prototype.removed_shape=function(e,t){null==t&&(t=!1);var i=e.body;t||i.wake();for(var n=null,r=i.arbiters.head;null!=r;){var o=r.elt;if(o.ws1!=e&&o.ws2!=e)r=(n=r).next;else{if(0!=o.present){this.MRCA_chains(o.ws1,o.ws2);for(var a=this.mrca1.head;null!=a;){for(var s=a.elt,p=this.mrca2.head;null!=p;){var l=p.elt,h=s.cbSet,u=l.cbSet;h.validate(),u.validate();for(var d,c=null,_=(h.cbpairs.length<u.cbpairs.length?h.cbpairs:u.cbpairs).head;null!=_;){var y=_.elt;if(y.a==h&&y.b==u||y.a==u&&y.b==h){c=y;break}_=_.next}if(null==c)null==No.zpp_pool?d=new No:(d=No.zpp_pool,No.zpp_pool=d.next,d.next=null),d.zip_listeners=!0,jo.setlt(h,u)?(d.a=h,d.b=u):(d.a=u,d.b=h),c=d,h.cbpairs.add(c),u!=h&&u.cbpairs.add(c);if(c.zip_listeners&&(c.zip_listeners=!1,c.__validate()),null!=c.listeners.head){var x=Xo.get(s,l);x.remove_arb(o),o.present--;for(var m,g=null,f=(h.cbpairs.length<u.cbpairs.length?h.cbpairs:u.cbpairs).head;null!=f;){var v=f.elt;if(v.a==h&&v.b==u||v.a==u&&v.b==h){g=v;break}f=f.next}if(null==g)null==No.zpp_pool?m=new No:(m=No.zpp_pool,No.zpp_pool=m.next,m.next=null),m.zip_listeners=!0,jo.setlt(h,u)?(m.a=h,m.b=u):(m.a=u,m.b=h),g=m,h.cbpairs.add(g),u!=h&&u.cbpairs.add(g);g.zip_listeners&&(g.zip_listeners=!1,g.__validate());for(var z=g.listeners.head;null!=z;){var w=z.elt;if(1==w.event&&0!=(w.itype&o.type)&&x.empty_arb(w.itype)){var b=this.push_callback(w);b.event=1;var S,C=x.int1,M=x.int2,P=w.options1,k=C.cbTypes;if(P.nonemptyintersection(k,P.includes)&&!P.nonemptyintersection(k,P.excludes)){var T=w.options2,A=M.cbTypes;S=!!T.nonemptyintersection(A,T.includes)&&!T.nonemptyintersection(A,T.excludes)}else S=!1;S?(b.int1=C,b.int2=M):(b.int1=M,b.int2=C),b.set=x}z=z.next}null==x.arbiters.head&&this.remove_callbackset(x),p=p.next}else p=p.next}a=a.next}}if(o.b1!=i&&2==o.b1.type){var O=o.b1;O.world||(O.component.waket=this.stamp+(this.midstep?0:1),3==O.type&&(O.kinematicDelaySleep=!0),O.component.sleeping&&this.really_wake(O,!1))}if(o.b2!=i&&2==o.b2.type){var E=o.b2;E.world||(E.component.waket=this.stamp+(this.midstep?0:1),3==E.type&&(E.kinematicDelaySleep=!0),E.component.sleeping&&this.really_wake(E,!1))}if(o.cleared=!0,null==i||o.b2==i)for(var G=o.b1.arbiters,D=null,I=G.head;null!=I;){if(I.elt==o){var L,B;null==D?(B=(L=G.head).next,G.head=B,null==G.head&&(G.pushmod=!0)):(B=(L=D.next).next,null==(D.next=B)&&(G.pushmod=!0));var R=L;R.elt=null,R.next=Ko.zpp_pool,Ko.zpp_pool=R,G.modified=!0,G.length--,G.pushmod=!0;break}I=(D=I).next}if(null==i||o.b1==i)for(var F=o.b2.arbiters,j=null,N=F.head;null!=N;){if(N.elt==o){var U,V;null==j?(V=(U=F.head).next,F.head=V,null==F.head&&(F.pushmod=!0)):(V=(U=j.next).next,null==(j.next=V)&&(F.pushmod=!0));var H=U;H.elt=null,H.next=Ko.zpp_pool,Ko.zpp_pool=H,F.modified=!0,F.length--,F.pushmod=!0;break}N=(j=N).next}null!=o.pair&&(o.pair.arb=null,o.pair=null),o.active=!1,this.f_arbiters.modified=!0,r=i.arbiters.erase(n)}}this.bphase.remove(e),e.removedFromSpace()},si.prototype.addConstraint=function(e){e.space=this,e.addedToSpace(),e.active&&(e.component.sleeping=!0,this.wake_constraint(e,!0))},si.prototype.remConstraint=function(e){e.active&&(this.wake_constraint(e,!0),this.live_constraints.remove(e)),e.removedFromSpace(),e.space=null},si.prototype.addCompound=function(e){e.space=this,e.addedToSpace();for(var t=e.bodies.head;null!=t;)this.addBody(t.elt),t=t.next;for(var i=e.constraints.head;null!=i;)this.addConstraint(i.elt),i=i.next;for(var n=e.compounds.head;null!=n;)this.addCompound(n.elt),n=n.next},si.prototype.remCompound=function(e){for(var t=e.bodies.head;null!=t;)this.remBody(t.elt),t=t.next;for(var i=e.constraints.head;null!=i;)this.remConstraint(i.elt),i=i.next;for(var n=e.compounds.head;null!=n;)this.remCompound(n.elt),n=n.next;e.removedFromSpace(),e.space=null},si.prototype.addBody=function(e,t){null==t&&(t=-1),e.space=this,e.addedToSpace(),e.component.sleeping=!0,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),3==e.type&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!0));for(var i=e.shapes.head;null!=i;){var n=i.elt;this.bphase.insert(n),n.addedToSpace(),i=i.next}1==e.type?this.static_validation(e):2!=e.type&&3!=t&&this.kinematics.add(e)},si.prototype.remBody=function(e,t){null==t&&(t=-1),1==e.type?(e.world||(e.component.waket=this.stamp+(this.midstep?0:1),3==e.type&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!0)),this.staticsleep.remove(e)):2==e.type?(e.world||(e.component.waket=this.stamp+(this.midstep?0:1),3==e.type&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!0)),this.live.remove(e)):(3!=t&&this.kinematics.remove(e),e.world||(e.component.waket=this.stamp+(this.midstep?0:1),3==e.type&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!0)),this.staticsleep.remove(e));for(var i=e.shapes.head;null!=i;)this.removed_shape(i.elt,!0),i=i.next;e.removedFromSpace(),e.space=null},si.prototype.shapesUnderPoint=function(e,t,i,n){return this.bphase.shapesUnderPoint(e,t,i,n)},si.prototype.bodiesUnderPoint=function(e,t,i,n){return this.bphase.bodiesUnderPoint(e,t,i,n)},si.prototype.shapesInAABB=function(e,t,i,n,r){return this.bphase.shapesInAABB(e.zpp_inner,t,i,n,r)},si.prototype.bodiesInAABB=function(e,t,i,n,r){return this.bphase.bodiesInAABB(e.zpp_inner,t,i,n,r)},si.prototype.shapesInCircle=function(e,t,i,n,r){var o=e.zpp_inner;null!=o._validate&&o._validate();var a=e.zpp_inner.x,s=e.zpp_inner;return null!=s._validate&&s._validate(),this.bphase.shapesInCircle(a,e.zpp_inner.y,t,i,n,r)},si.prototype.bodiesInCircle=function(e,t,i,n,r){var o=e.zpp_inner;null!=o._validate&&o._validate();var a=e.zpp_inner.x,s=e.zpp_inner;return null!=s._validate&&s._validate(),this.bphase.bodiesInCircle(a,e.zpp_inner.y,t,i,n,r)},si.prototype.shapesInShape=function(e,t,i,n){return this.bphase.shapesInShape(e,t,i,n)},si.prototype.bodiesInShape=function(e,t,i,n){return this.bphase.bodiesInShape(e,t,i,n)},si.prototype.rayCast=function(e,t,i){return this.bphase.rayCast(e.zpp_inner,t,null==i?null:i.zpp_inner)},si.prototype.rayMultiCast=function(e,t,i,n){return this.bphase.rayMultiCast(e.zpp_inner,t,null==i?null:i.zpp_inner,n)},si.prototype.convexShapeList=null,si.prototype.convexCast=function(e,t,i,n){var r;if(null==Vt.zpp_pool?r=new Vt:(r=Vt.zpp_pool,Vt.zpp_pool=r.next,r.next=null),r.failed=!1,r.s1=r.s2=null,r.arbiter=null,0==e.type){var o=e.circle;if(o.zip_worldCOM&&null!=o.body){if(o.zip_worldCOM=!1,o.zip_localCOM){if(o.zip_localCOM=!1,1==o.type){var a=o.polygon;if(null==a.lverts.next.next)a.localCOMx=a.lverts.next.x,a.localCOMy=a.lverts.next.y;else if(null==a.lverts.next.next.next)a.localCOMx=a.lverts.next.x,a.localCOMy=a.lverts.next.y,a.localCOMx+=a.lverts.next.next.x,a.localCOMy+=a.lverts.next.next.y,a.localCOMx*=.5,a.localCOMy*=.5;else{a.localCOMx=0;var s=a.localCOMy=0,p=a.lverts.next,l=p,h=p=p.next;for(p=p.next;null!=p;){var u=p;s+=h.x*(u.y-l.y);var d=u.y*h.x-u.x*h.y;a.localCOMx+=(h.x+u.x)*d,a.localCOMy+=(h.y+u.y)*d,l=h,h=u,p=p.next}var c=p=a.lverts.next;s+=h.x*(c.y-l.y);var _=c.y*h.x-c.x*h.y;a.localCOMx+=(h.x+c.x)*_,a.localCOMy+=(h.y+c.y)*_,l=h;var y=p=p.next;s+=c.x*(y.y-l.y);var x=y.y*c.x-y.x*c.y;a.localCOMx+=(c.x+y.x)*x,a.localCOMy+=(c.y+y.y)*x;var m=s=1/(3*s);a.localCOMx*=m,a.localCOMy*=m}}null!=o.wrap_localCOM&&(o.wrap_localCOM.zpp_inner.x=o.localCOMx,o.wrap_localCOM.zpp_inner.y=o.localCOMy)}var g=o.body;g.zip_axis&&(g.zip_axis=!1,g.axisx=Math.sin(g.rot),g.axisy=Math.cos(g.rot)),o.worldCOMx=o.body.posx+(o.body.axisy*o.localCOMx-o.body.axisx*o.localCOMy),o.worldCOMy=o.body.posy+(o.localCOMx*o.body.axisx+o.localCOMy*o.body.axisy)}}else{var f=e.polygon;if(f.zip_gaxi&&null!=f.body){f.zip_gaxi=!1,f.validate_laxi();var v=f.body;if(v.zip_axis&&(v.zip_axis=!1,v.axisx=Math.sin(v.rot),v.axisy=Math.cos(v.rot)),f.zip_gverts&&null!=f.body){f.zip_gverts=!1,f.validate_lverts();var z=f.body;z.zip_axis&&(z.zip_axis=!1,z.axisx=Math.sin(z.rot),z.axisy=Math.cos(z.rot));for(var w=f.lverts.next,b=f.gverts.next;null!=b;){var S=b,C=w;w=w.next,S.x=f.body.posx+(f.body.axisy*C.x-f.body.axisx*C.y),S.y=f.body.posy+(C.x*f.body.axisx+C.y*f.body.axisy),b=b.next}}var M=f.edges.head,P=f.gverts.next,k=P;for(P=P.next;null!=P;){var T=P,A=M.elt;M=M.next,A.gp0=k,A.gp1=T,A.gnormx=f.body.axisy*A.lnormx-f.body.axisx*A.lnormy,A.gnormy=A.lnormx*f.body.axisx+A.lnormy*f.body.axisy,A.gprojection=f.body.posx*A.gnormx+f.body.posy*A.gnormy+A.lprojection,null!=A.wrap_gnorm&&(A.wrap_gnorm.zpp_inner.x=A.gnormx,A.wrap_gnorm.zpp_inner.y=A.gnormy),A.tp0=A.gp0.y*A.gnormx-A.gp0.x*A.gnormy,A.tp1=A.gp1.y*A.gnormx-A.gp1.x*A.gnormy,k=T,P=P.next}var O=M.elt;O.gp0=k,O.gp1=f.gverts.next,O.gnormx=f.body.axisy*O.lnormx-f.body.axisx*O.lnormy,O.gnormy=O.lnormx*f.body.axisx+O.lnormy*f.body.axisy,O.gprojection=f.body.posx*O.gnormx+f.body.posy*O.gnormy+O.lprojection,null!=O.wrap_gnorm&&(O.wrap_gnorm.zpp_inner.x=O.gnormx,O.wrap_gnorm.zpp_inner.y=O.gnormy),O.tp0=O.gp0.y*O.gnormx-O.gp0.x*O.gnormy,O.tp1=O.gp1.y*O.gnormx-O.gp1.x*O.gnormy}}var E=e.body,G=E.posx,D=E.posy;E.sweepTime=0,E.sweep_angvel=E.angvel;var I=t-E.sweepTime;if(0!=I&&(E.sweepTime=t,E.posx+=E.velx*I,E.posy+=E.vely*I,0!=E.angvel)){var L=E.sweep_angvel*I;if(E.rot+=L,1e-4<L*L)E.axisx=Math.sin(E.rot),E.axisy=Math.cos(E.rot);else{var B=L*L,R=1-.5*B,F=1-B*B/8,j=(R*E.axisx+L*E.axisy)*F;E.axisy=(R*E.axisy-L*E.axisx)*F,E.axisx=j}}var N=E.posx,U=E.posy;e.validate_sweepRadius();var V,H=e.sweepRadius;null==Oo.zpp_pool?V=new Oo:(V=Oo.zpp_pool,Oo.zpp_pool=V.next,V.next=null),V.minx=(G<N?G:N)-H,V.maxx=(N<G?G:N)+H,V.miny=(D<U?D:U)-H,V.maxy=(U<D?D:U)+H;var W=this.convexShapeList=this.bphase.shapesInAABB(V,!1,!1,null==i?null:i.zpp_inner,this.convexShapeList),q=V;null!=q.outer&&(q.outer.zpp_inner=null,q.outer=null),q.wrap_min=q.wrap_max=null,q._invalidate=null,q._validate=null,q.next=Oo.zpp_pool,Oo.zpp_pool=q;var X=0,Y=0,K=Y=X=0,Z=0;Z=K=0;var J=null,Q=t+1;W.zpp_inner.valmod();for(var $=ht.get(W);;){$.zpp_inner.zpp_inner.valmod();var ee=$.zpp_inner;ee.zpp_inner.valmod(),ee.zpp_inner.zip_length&&(ee.zpp_inner.zip_length=!1,ee.zpp_inner.user_length=ee.zpp_inner.inner.length);var te=ee.zpp_inner.user_length;if($.zpp_critical=!0,!($.zpp_i<te||($.zpp_next=ht.zpp_pool,(ht.zpp_pool=$).zpp_inner=null,!1)))break;$.zpp_critical=!1;var ie=$.zpp_inner.at($.zpp_i++);if(ie!=e.outer&&(null!=ie.zpp_inner.body?ie.zpp_inner.body.outer:null)!=E.outer){if(r.s1=e,r.s2=ie.zpp_inner,n){ie.zpp_inner.validate_sweepRadius(),(null!=ie.zpp_inner.body?ie.zpp_inner.body.outer:null).zpp_inner.sweep_angvel=(null!=ie.zpp_inner.body?ie.zpp_inner.body.outer:null).zpp_inner.angvel,(null!=ie.zpp_inner.body?ie.zpp_inner.body.outer:null).zpp_inner.sweepTime=0,Ht.dynamicSweep(r,t,0,0,!0);var ne=(null!=ie.zpp_inner.body?ie.zpp_inner.body.outer:null).zpp_inner,re=0-ne.sweepTime;if(0!=re&&(ne.sweepTime=0,ne.posx+=ne.velx*re,ne.posy+=ne.vely*re,0!=ne.angvel)){var oe=ne.sweep_angvel*re;if(ne.rot+=oe,1e-4<oe*oe)ne.axisx=Math.sin(ne.rot),ne.axisy=Math.cos(ne.rot);else{var ae=oe*oe,se=1-.5*ae,pe=1-ae*ae/8,le=(se*ne.axisx+oe*ne.axisy)*pe;ne.axisy=(se*ne.axisy-oe*ne.axisx)*pe,ne.axisx=le}}var he=(null!=ie.zpp_inner.body?ie.zpp_inner.body.outer:null).zpp_inner,ue=ie.zpp_inner;if(0==ue.type)ue.worldCOMx=he.posx+(he.axisy*ue.localCOMx-he.axisx*ue.localCOMy),ue.worldCOMy=he.posy+(ue.localCOMx*he.axisx+ue.localCOMy*he.axisy);else{for(var de=ue.polygon,ce=de.lverts.next,_e=de.gverts.next;null!=_e;){var ye=_e,xe=ce;ce=ce.next,ye.x=he.posx+(he.axisy*xe.x-he.axisx*xe.y),ye.y=he.posy+(xe.x*he.axisx+xe.y*he.axisy),_e=_e.next}var me=de.edges.head,ge=de.gverts.next,fe=ge;for(ge=ge.next;null!=ge;){var ve=ge,ze=me.elt;me=me.next,ze.gnormx=he.axisy*ze.lnormx-he.axisx*ze.lnormy,ze.gnormy=ze.lnormx*he.axisx+ze.lnormy*he.axisy,ze.gprojection=he.posx*ze.gnormx+he.posy*ze.gnormy+ze.lprojection,ze.tp0=fe.y*ze.gnormx-fe.x*ze.gnormy,ze.tp1=ve.y*ze.gnormx-ve.x*ze.gnormy,fe=ve,ge=ge.next}var we=de.gverts.next,be=me.elt;be.gnormx=he.axisy*be.lnormx-he.axisx*be.lnormy,be.gnormy=be.lnormx*he.axisx+be.lnormy*he.axisy,be.gprojection=he.posx*be.gnormx+he.posy*be.gnormy+be.lprojection,be.tp0=fe.y*be.gnormx-fe.x*be.gnormy,be.tp1=we.y*be.gnormx-we.x*be.gnormy}}else Ht.staticSweep(r,t,0,0);r.toi*=t,0<r.toi&&r.toi<Q&&(Q=r.toi,X=r.axis.x,Y=r.axis.y,K=r.c2.x,Z=r.c2.y,J=ie)}}W.clear();var Se=r;Se.next=Vt.zpp_pool,Vt.zpp_pool=Se;var Ce=0-E.sweepTime;if(0!=Ce&&(E.sweepTime=0,E.posx+=E.velx*Ce,E.posy+=E.vely*Ce,0!=E.angvel)){var Me=E.sweep_angvel*Ce;if(E.rot+=Me,1e-4<Me*Me)E.axisx=Math.sin(E.rot),E.axisy=Math.cos(E.rot);else{var Pe=Me*Me,ke=1-.5*Pe,Te=1-Pe*Pe/8,Ae=(ke*E.axisx+Me*E.axisy)*Te;E.axisy=(ke*E.axisy-Me*E.axisx)*Te,E.axisx=Ae}}if(0==e.type)e.worldCOMx=E.posx+(E.axisy*e.localCOMx-E.axisx*e.localCOMy),e.worldCOMy=E.posy+(e.localCOMx*E.axisx+e.localCOMy*E.axisy);else{for(var Oe=e.polygon,Ee=Oe.lverts.next,Ge=Oe.gverts.next;null!=Ge;){var De=Ge,Ie=Ee;Ee=Ee.next,De.x=E.posx+(E.axisy*Ie.x-E.axisx*Ie.y),De.y=E.posy+(Ie.x*E.axisx+Ie.y*E.axisy),Ge=Ge.next}var Le=Oe.edges.head,Be=Oe.gverts.next,Re=Be;for(Be=Be.next;null!=Be;){var Fe=Be,je=Le.elt;Le=Le.next,je.gnormx=E.axisy*je.lnormx-E.axisx*je.lnormy,je.gnormy=je.lnormx*E.axisx+je.lnormy*E.axisy,je.gprojection=E.posx*je.gnormx+E.posy*je.gnormy+je.lprojection,je.tp0=Re.y*je.gnormx-Re.x*je.gnormy,je.tp1=Fe.y*je.gnormx-Fe.x*je.gnormy,Re=Fe,Be=Be.next}var Ne=Oe.gverts.next,Ue=Le.elt;Ue.gnormx=E.axisy*Ue.lnormx-E.axisx*Ue.lnormy,Ue.gnormy=Ue.lnormx*E.axisx+Ue.lnormy*E.axisy,Ue.gprojection=E.posx*Ue.gnormx+E.posy*Ue.gnormy+Ue.lprojection,Ue.tp0=Re.y*Ue.gnormx-Re.x*Ue.gnormy,Ue.tp1=Ne.y*Ue.gnormx-Ne.x*Ue.gnormy}if(Q<=t){var Ve,He=-X,We=-Y;if(null==jn.poolVec2?Ve=new lt:(Ve=jn.poolVec2,jn.poolVec2=Ve.zpp_pool,Ve.zpp_pool=null),null==Ve.zpp_inner){var qe;null==ep.zpp_pool?qe=new ep:(qe=ep.zpp_pool,ep.zpp_pool=qe.next,qe.next=null),qe.weak=!1,qe._immutable=!1,qe.x=He,qe.y=We,Ve.zpp_inner=qe,Ve.zpp_inner.outer=Ve}else{var Xe,Ye=Ve.zpp_inner;if(null!=Ye._validate&&Ye._validate(),Ve.zpp_inner.x==He){var Ke=Ve.zpp_inner;null!=Ke._validate&&Ke._validate(),Xe=Ve.zpp_inner.y==We}else Xe=!1;if(!Xe){Ve.zpp_inner.x=He,Ve.zpp_inner.y=We;var Ze=Ve.zpp_inner;null!=Ze._invalidate&&Ze._invalidate(Ze)}}Ve.zpp_inner.weak=!1;var Je,Qe=Ve;if(null==jn.poolVec2?Je=new lt:(Je=jn.poolVec2,jn.poolVec2=Je.zpp_pool,Je.zpp_pool=null),null==Je.zpp_inner){var $e;null==ep.zpp_pool?$e=new ep:($e=ep.zpp_pool,ep.zpp_pool=$e.next,$e.next=null),$e.weak=!1,$e._immutable=!1,$e.x=K,$e.y=Z,Je.zpp_inner=$e,Je.zpp_inner.outer=Je}else{var et,tt=Je.zpp_inner;if(null!=tt._validate&&tt._validate(),Je.zpp_inner.x==K){var it=Je.zpp_inner;null!=it._validate&&it._validate(),et=Je.zpp_inner.y==Z}else et=!1;if(!et){Je.zpp_inner.x=K,Je.zpp_inner.y=Z;var nt=Je.zpp_inner;null!=nt._invalidate&&nt._invalidate(nt)}}return Je.zpp_inner.weak=!1,wt.getConvex(Qe,Je,Q,J)}return null},si.prototype.prepareCast=function(e){if(0==e.type){var t=e.circle;if(t.zip_worldCOM&&null!=t.body){if(t.zip_worldCOM=!1,t.zip_localCOM){if(t.zip_localCOM=!1,1==t.type){var i=t.polygon;if(null==i.lverts.next.next)i.localCOMx=i.lverts.next.x,i.localCOMy=i.lverts.next.y;else if(null==i.lverts.next.next.next)i.localCOMx=i.lverts.next.x,i.localCOMy=i.lverts.next.y,i.localCOMx+=i.lverts.next.next.x,i.localCOMy+=i.lverts.next.next.y,i.localCOMx*=.5,i.localCOMy*=.5;else{i.localCOMx=0;var n=i.localCOMy=0,r=i.lverts.next,o=r,a=r=r.next;for(r=r.next;null!=r;){var s=r;n+=a.x*(s.y-o.y);var p=s.y*a.x-s.x*a.y;i.localCOMx+=(a.x+s.x)*p,i.localCOMy+=(a.y+s.y)*p,o=a,a=s,r=r.next}var l=r=i.lverts.next;n+=a.x*(l.y-o.y);var h=l.y*a.x-l.x*a.y;i.localCOMx+=(a.x+l.x)*h,i.localCOMy+=(a.y+l.y)*h,o=a;var u=r=r.next;n+=l.x*(u.y-o.y);var d=u.y*l.x-u.x*l.y;i.localCOMx+=(l.x+u.x)*d,i.localCOMy+=(l.y+u.y)*d;var c=n=1/(3*n);i.localCOMx*=c,i.localCOMy*=c}}null!=t.wrap_localCOM&&(t.wrap_localCOM.zpp_inner.x=t.localCOMx,t.wrap_localCOM.zpp_inner.y=t.localCOMy)}var _=t.body;_.zip_axis&&(_.zip_axis=!1,_.axisx=Math.sin(_.rot),_.axisy=Math.cos(_.rot)),t.worldCOMx=t.body.posx+(t.body.axisy*t.localCOMx-t.body.axisx*t.localCOMy),t.worldCOMy=t.body.posy+(t.localCOMx*t.body.axisx+t.localCOMy*t.body.axisy)}}else{var y=e.polygon;if(y.zip_gaxi&&null!=y.body){y.zip_gaxi=!1,y.validate_laxi();var x=y.body;if(x.zip_axis&&(x.zip_axis=!1,x.axisx=Math.sin(x.rot),x.axisy=Math.cos(x.rot)),y.zip_gverts&&null!=y.body){y.zip_gverts=!1,y.validate_lverts();var m=y.body;m.zip_axis&&(m.zip_axis=!1,m.axisx=Math.sin(m.rot),m.axisy=Math.cos(m.rot));for(var g=y.lverts.next,f=y.gverts.next;null!=f;){var v=f,z=g;g=g.next,v.x=y.body.posx+(y.body.axisy*z.x-y.body.axisx*z.y),v.y=y.body.posy+(z.x*y.body.axisx+z.y*y.body.axisy),f=f.next}}var w=y.edges.head,b=y.gverts.next,S=b;for(b=b.next;null!=b;){var C=b,M=w.elt;w=w.next,M.gp0=S,M.gp1=C,M.gnormx=y.body.axisy*M.lnormx-y.body.axisx*M.lnormy,M.gnormy=M.lnormx*y.body.axisx+M.lnormy*y.body.axisy,M.gprojection=y.body.posx*M.gnormx+y.body.posy*M.gnormy+M.lprojection,null!=M.wrap_gnorm&&(M.wrap_gnorm.zpp_inner.x=M.gnormx,M.wrap_gnorm.zpp_inner.y=M.gnormy),M.tp0=M.gp0.y*M.gnormx-M.gp0.x*M.gnormy,M.tp1=M.gp1.y*M.gnormx-M.gp1.x*M.gnormy,S=C,b=b.next}var P=w.elt;P.gp0=S,P.gp1=y.gverts.next,P.gnormx=y.body.axisy*P.lnormx-y.body.axisx*P.lnormy,P.gnormy=P.lnormx*y.body.axisx+P.lnormy*y.body.axisy,P.gprojection=y.body.posx*P.gnormx+y.body.posy*P.gnormy+P.lprojection,null!=P.wrap_gnorm&&(P.wrap_gnorm.zpp_inner.x=P.gnormx,P.wrap_gnorm.zpp_inner.y=P.gnormy),P.tp0=P.gp0.y*P.gnormx-P.gp0.x*P.gnormy,P.tp1=P.gp1.y*P.gnormx-P.gp1.x*P.gnormy}}},si.prototype.convexMultiCast=function(e,t,i,n,r){var o;if(null==Vt.zpp_pool?o=new Vt:(o=Vt.zpp_pool,Vt.zpp_pool=o.next,o.next=null),o.failed=!1,o.s1=o.s2=null,o.arbiter=null,0==e.type){var a=e.circle;if(a.zip_worldCOM&&null!=a.body){if(a.zip_worldCOM=!1,a.zip_localCOM){if(a.zip_localCOM=!1,1==a.type){var s=a.polygon;if(null==s.lverts.next.next)s.localCOMx=s.lverts.next.x,s.localCOMy=s.lverts.next.y;else if(null==s.lverts.next.next.next)s.localCOMx=s.lverts.next.x,s.localCOMy=s.lverts.next.y,s.localCOMx+=s.lverts.next.next.x,s.localCOMy+=s.lverts.next.next.y,s.localCOMx*=.5,s.localCOMy*=.5;else{s.localCOMx=0;var p=s.localCOMy=0,l=s.lverts.next,h=l,u=l=l.next;for(l=l.next;null!=l;){var d=l;p+=u.x*(d.y-h.y);var c=d.y*u.x-d.x*u.y;s.localCOMx+=(u.x+d.x)*c,s.localCOMy+=(u.y+d.y)*c,h=u,u=d,l=l.next}var _=l=s.lverts.next;p+=u.x*(_.y-h.y);var y=_.y*u.x-_.x*u.y;s.localCOMx+=(u.x+_.x)*y,s.localCOMy+=(u.y+_.y)*y,h=u;var x=l=l.next;p+=_.x*(x.y-h.y);var m=x.y*_.x-x.x*_.y;s.localCOMx+=(_.x+x.x)*m,s.localCOMy+=(_.y+x.y)*m;var g=p=1/(3*p);s.localCOMx*=g,s.localCOMy*=g}}null!=a.wrap_localCOM&&(a.wrap_localCOM.zpp_inner.x=a.localCOMx,a.wrap_localCOM.zpp_inner.y=a.localCOMy)}var f=a.body;f.zip_axis&&(f.zip_axis=!1,f.axisx=Math.sin(f.rot),f.axisy=Math.cos(f.rot)),a.worldCOMx=a.body.posx+(a.body.axisy*a.localCOMx-a.body.axisx*a.localCOMy),a.worldCOMy=a.body.posy+(a.localCOMx*a.body.axisx+a.localCOMy*a.body.axisy)}}else{var v=e.polygon;if(v.zip_gaxi&&null!=v.body){v.zip_gaxi=!1,v.validate_laxi();var z=v.body;if(z.zip_axis&&(z.zip_axis=!1,z.axisx=Math.sin(z.rot),z.axisy=Math.cos(z.rot)),v.zip_gverts&&null!=v.body){v.zip_gverts=!1,v.validate_lverts();var w=v.body;w.zip_axis&&(w.zip_axis=!1,w.axisx=Math.sin(w.rot),w.axisy=Math.cos(w.rot));for(var b=v.lverts.next,S=v.gverts.next;null!=S;){var C=S,M=b;b=b.next,C.x=v.body.posx+(v.body.axisy*M.x-v.body.axisx*M.y),C.y=v.body.posy+(M.x*v.body.axisx+M.y*v.body.axisy),S=S.next}}var P=v.edges.head,k=v.gverts.next,T=k;for(k=k.next;null!=k;){var A=k,O=P.elt;P=P.next,O.gp0=T,O.gp1=A,O.gnormx=v.body.axisy*O.lnormx-v.body.axisx*O.lnormy,O.gnormy=O.lnormx*v.body.axisx+O.lnormy*v.body.axisy,O.gprojection=v.body.posx*O.gnormx+v.body.posy*O.gnormy+O.lprojection,null!=O.wrap_gnorm&&(O.wrap_gnorm.zpp_inner.x=O.gnormx,O.wrap_gnorm.zpp_inner.y=O.gnormy),O.tp0=O.gp0.y*O.gnormx-O.gp0.x*O.gnormy,O.tp1=O.gp1.y*O.gnormx-O.gp1.x*O.gnormy,T=A,k=k.next}var E=P.elt;E.gp0=T,E.gp1=v.gverts.next,E.gnormx=v.body.axisy*E.lnormx-v.body.axisx*E.lnormy,E.gnormy=E.lnormx*v.body.axisx+E.lnormy*v.body.axisy,E.gprojection=v.body.posx*E.gnormx+v.body.posy*E.gnormy+E.lprojection,null!=E.wrap_gnorm&&(E.wrap_gnorm.zpp_inner.x=E.gnormx,E.wrap_gnorm.zpp_inner.y=E.gnormy),E.tp0=E.gp0.y*E.gnormx-E.gp0.x*E.gnormy,E.tp1=E.gp1.y*E.gnormx-E.gp1.x*E.gnormy}}var G=e.body,D=G.posx,I=G.posy;G.sweepTime=0,G.sweep_angvel=G.angvel;var L=t-G.sweepTime;if(0!=L&&(G.sweepTime=t,G.posx+=G.velx*L,G.posy+=G.vely*L,0!=G.angvel)){var B=G.sweep_angvel*L;if(G.rot+=B,1e-4<B*B)G.axisx=Math.sin(G.rot),G.axisy=Math.cos(G.rot);else{var R=B*B,F=1-.5*R,j=1-R*R/8,N=(F*G.axisx+B*G.axisy)*j;G.axisy=(F*G.axisy-B*G.axisx)*j,G.axisx=N}}var U=G.posx,V=G.posy;e.validate_sweepRadius();var H,W=e.sweepRadius;null==Oo.zpp_pool?H=new Oo:(H=Oo.zpp_pool,Oo.zpp_pool=H.next,H.next=null),H.minx=(D<U?D:U)-W,H.maxx=(U<D?D:U)+W,H.miny=(I<V?I:V)-W,H.maxy=(V<I?I:V)+W;var q=this.convexShapeList=this.bphase.shapesInAABB(H,!1,!1,null==i?null:i.zpp_inner,this.convexShapeList),X=H;null!=X.outer&&(X.outer.zpp_inner=null,X.outer=null),X.wrap_min=X.wrap_max=null,X._invalidate=null,X._validate=null,X.next=Oo.zpp_pool,Oo.zpp_pool=X;var Y=null==r?new pt:r;q.zpp_inner.valmod();for(var K=ht.get(q);;){K.zpp_inner.zpp_inner.valmod();var Z=K.zpp_inner;Z.zpp_inner.valmod(),Z.zpp_inner.zip_length&&(Z.zpp_inner.zip_length=!1,Z.zpp_inner.user_length=Z.zpp_inner.inner.length);var J=Z.zpp_inner.user_length;if(K.zpp_critical=!0,!(K.zpp_i<J||(K.zpp_next=ht.zpp_pool,(ht.zpp_pool=K).zpp_inner=null,!1)))break;K.zpp_critical=!1;var Q=K.zpp_inner.at(K.zpp_i++);if(Q!=e.outer&&(null!=Q.zpp_inner.body?Q.zpp_inner.body.outer:null)!=G.outer){if(o.s1=e,o.s2=Q.zpp_inner,n){Q.zpp_inner.validate_sweepRadius(),(null!=Q.zpp_inner.body?Q.zpp_inner.body.outer:null).zpp_inner.sweep_angvel=(null!=Q.zpp_inner.body?Q.zpp_inner.body.outer:null).zpp_inner.angvel,(null!=Q.zpp_inner.body?Q.zpp_inner.body.outer:null).zpp_inner.sweepTime=0,Ht.dynamicSweep(o,t,0,0,!0);var $=(null!=Q.zpp_inner.body?Q.zpp_inner.body.outer:null).zpp_inner,ee=0-$.sweepTime;if(0!=ee&&($.sweepTime=0,$.posx+=$.velx*ee,$.posy+=$.vely*ee,0!=$.angvel)){var te=$.sweep_angvel*ee;if($.rot+=te,1e-4<te*te)$.axisx=Math.sin($.rot),$.axisy=Math.cos($.rot);else{var ie=te*te,ne=1-.5*ie,re=1-ie*ie/8,oe=(ne*$.axisx+te*$.axisy)*re;$.axisy=(ne*$.axisy-te*$.axisx)*re,$.axisx=oe}}var ae=(null!=Q.zpp_inner.body?Q.zpp_inner.body.outer:null).zpp_inner,se=Q.zpp_inner;if(0==se.type)se.worldCOMx=ae.posx+(ae.axisy*se.localCOMx-ae.axisx*se.localCOMy),se.worldCOMy=ae.posy+(se.localCOMx*ae.axisx+se.localCOMy*ae.axisy);else{for(var pe=se.polygon,le=pe.lverts.next,he=pe.gverts.next;null!=he;){var ue=he,de=le;le=le.next,ue.x=ae.posx+(ae.axisy*de.x-ae.axisx*de.y),ue.y=ae.posy+(de.x*ae.axisx+de.y*ae.axisy),he=he.next}var ce=pe.edges.head,_e=pe.gverts.next,ye=_e;for(_e=_e.next;null!=_e;){var xe=_e,me=ce.elt;ce=ce.next,me.gnormx=ae.axisy*me.lnormx-ae.axisx*me.lnormy,me.gnormy=me.lnormx*ae.axisx+me.lnormy*ae.axisy,me.gprojection=ae.posx*me.gnormx+ae.posy*me.gnormy+me.lprojection,me.tp0=ye.y*me.gnormx-ye.x*me.gnormy,me.tp1=xe.y*me.gnormx-xe.x*me.gnormy,ye=xe,_e=_e.next}var ge=pe.gverts.next,fe=ce.elt;fe.gnormx=ae.axisy*fe.lnormx-ae.axisx*fe.lnormy,fe.gnormy=fe.lnormx*ae.axisx+fe.lnormy*ae.axisy,fe.gprojection=ae.posx*fe.gnormx+ae.posy*fe.gnormy+fe.lprojection,fe.tp0=ye.y*fe.gnormx-ye.x*fe.gnormy,fe.tp1=ge.y*fe.gnormx-ge.x*fe.gnormy}}else Ht.staticSweep(o,t,0,0);if(o.toi*=t,0<o.toi){var ve,ze=-o.axis.x,we=-o.axis.y;if(null==jn.poolVec2?ve=new lt:(ve=jn.poolVec2,jn.poolVec2=ve.zpp_pool,ve.zpp_pool=null),null==ve.zpp_inner){var be;null==ep.zpp_pool?be=new ep:(be=ep.zpp_pool,ep.zpp_pool=be.next,be.next=null),be.weak=!1,be._immutable=!1,be.x=ze,be.y=we,ve.zpp_inner=be,ve.zpp_inner.outer=ve}else{var Se,Ce=ve.zpp_inner;if(null!=Ce._validate&&Ce._validate(),ve.zpp_inner.x==ze){var Me=ve.zpp_inner;null!=Me._validate&&Me._validate(),Se=ve.zpp_inner.y==we}else Se=!1;if(!Se){ve.zpp_inner.x=ze,ve.zpp_inner.y=we;var Pe=ve.zpp_inner;null!=Pe._invalidate&&Pe._invalidate(Pe)}}ve.zpp_inner.weak=!1;var ke,Te=ve,Ae=o.c2.x,Oe=o.c2.y;if(null==jn.poolVec2?ke=new lt:(ke=jn.poolVec2,jn.poolVec2=ke.zpp_pool,ke.zpp_pool=null),null==ke.zpp_inner){var Ee;null==ep.zpp_pool?Ee=new ep:(Ee=ep.zpp_pool,ep.zpp_pool=Ee.next,Ee.next=null),Ee.weak=!1,Ee._immutable=!1,Ee.x=Ae,Ee.y=Oe,ke.zpp_inner=Ee,ke.zpp_inner.outer=ke}else{var Ge,De=ke.zpp_inner;if(null!=De._validate&&De._validate(),ke.zpp_inner.x==Ae){var Ie=ke.zpp_inner;null!=Ie._validate&&Ie._validate(),Ge=ke.zpp_inner.y==Oe}else Ge=!1;if(!Ge){ke.zpp_inner.x=Ae,ke.zpp_inner.y=Oe;var Le=ke.zpp_inner;null!=Le._invalidate&&Le._invalidate(Le)}}ke.zpp_inner.weak=!1;for(var Be=wt.getConvex(Te,ke,o.toi,Q),Re=null,Fe=Y.zpp_inner.inner.head;null!=Fe&&!(Be.zpp_inner.toiDistance<Fe.elt.zpp_inner.toiDistance);)Fe=(Re=Fe).next;var je,Ne=Y.zpp_inner.inner;null==cn.zpp_pool?je=new cn:(je=cn.zpp_pool,cn.zpp_pool=je.next,je.next=null),je.elt=Be;var Ue=je;null==Re?(Ue.next=Ne.head,Ne.head=Ue):(Ue.next=Re.next,Re.next=Ue),Ne.pushmod=Ne.modified=!0,Ne.length++}}}q.clear();var Ve=o;Ve.next=Vt.zpp_pool,Vt.zpp_pool=Ve;var He=0-G.sweepTime;if(0!=He&&(G.sweepTime=0,G.posx+=G.velx*He,G.posy+=G.vely*He,0!=G.angvel)){var We=G.sweep_angvel*He;if(G.rot+=We,1e-4<We*We)G.axisx=Math.sin(G.rot),G.axisy=Math.cos(G.rot);else{var qe=We*We,Xe=1-.5*qe,Ye=1-qe*qe/8,Ke=(Xe*G.axisx+We*G.axisy)*Ye;G.axisy=(Xe*G.axisy-We*G.axisx)*Ye,G.axisx=Ke}}if(0==e.type)e.worldCOMx=G.posx+(G.axisy*e.localCOMx-G.axisx*e.localCOMy),e.worldCOMy=G.posy+(e.localCOMx*G.axisx+e.localCOMy*G.axisy);else{for(var Ze=e.polygon,Je=Ze.lverts.next,Qe=Ze.gverts.next;null!=Qe;){var $e=Qe,et=Je;Je=Je.next,$e.x=G.posx+(G.axisy*et.x-G.axisx*et.y),$e.y=G.posy+(et.x*G.axisx+et.y*G.axisy),Qe=Qe.next}var tt=Ze.edges.head,it=Ze.gverts.next,nt=it;for(it=it.next;null!=it;){var rt=it,ot=tt.elt;tt=tt.next,ot.gnormx=G.axisy*ot.lnormx-G.axisx*ot.lnormy,ot.gnormy=ot.lnormx*G.axisx+ot.lnormy*G.axisy,ot.gprojection=G.posx*ot.gnormx+G.posy*ot.gnormy+ot.lprojection,ot.tp0=nt.y*ot.gnormx-nt.x*ot.gnormy,ot.tp1=rt.y*ot.gnormx-rt.x*ot.gnormy,nt=rt,it=it.next}var at=Ze.gverts.next,st=tt.elt;st.gnormx=G.axisy*st.lnormx-G.axisx*st.lnormy,st.gnormy=st.lnormx*G.axisx+st.lnormy*G.axisy,st.gprojection=G.posx*st.gnormx+G.posy*st.gnormy+st.lprojection,st.tp0=nt.y*st.gnormx-nt.x*st.gnormy,st.tp1=at.y*st.gnormx-at.x*st.gnormy}return Y},si.prototype.push_callback=function(e){var t;return null==nt.zpp_pool?t=new nt:(t=nt.zpp_pool,nt.zpp_pool=t.next,t.next=null),this.callbacks.push(t),t.listener=e,t},si.prototype.pre_dt=null,si.prototype.step=function(e,t,i){if(this.time+=e,this.pre_dt=e,this.midstep=!0,this.stamp++,this.validation(),this.bphase.broadphase(this,!0),this.prestep(e),this.sortcontacts){var n=this.c_arbiters_false;if(null!=n.head&&null!=n.head.next){for(var r,o,a,s=n.head,p=null,l=null,h=null,u=null,d=1;;){for(r=0,l=s,p=s=null;null!=l;){for(++r,h=l,o=0,a=d;null!=h&&o<d;)++o,h=h.next;for(;0<o||0<a&&null!=h;)0==o?(h=(u=h).next,--a):0==a||null==h?(l=(u=l).next,--o):!l.elt.active||!h.elt.active||l.elt.oc1.dist<h.elt.oc1.dist?(l=(u=l).next,--o):(h=(u=h).next,--a),null!=p?p.next=u:s=u,p=u;l=h}if(p.next=null,d<<=1,!(1<r))break}n.head=s,n.modified=!0,n.pushmod=!0}}this.updateVel(e),this.warmStart(),this.iterateVel(t);for(var c=this.kinematics.head;null!=c;){var _=c.elt;_.pre_posx=_.posx,_.pre_posy=_.posy,_.pre_rot=_.rot,c=c.next}for(var y=this.live.head;null!=y;){var x=y.elt;x.pre_posx=x.posx,x.pre_posy=x.posy,x.pre_rot=x.rot,y=y.next}this.updatePos(e),this.continuous=!0,this.continuousCollisions(e),this.continuous=!1,this.iteratePos(i);for(var m=this.kinematics.head;null!=m;){var g=m.elt,f=!(g.posx==g.pre_posx&&g.posy==g.pre_posy),v=g.pre_rot!=g.rot;if(f){for(var z=g.shapes.head;null!=z;){var w=z.elt;1==w.type&&(w.polygon.invalidate_gverts(),w.polygon.invalidate_gaxi()),w.invalidate_worldCOM(),z=z.next}g.zip_worldCOM=!0}if(v){g.zip_axis=!0;for(var b=g.shapes.head;null!=b;){var S=b.elt;1==S.type&&(S.polygon.invalidate_gverts(),S.polygon.invalidate_gaxi()),S.invalidate_worldCOM(),b=b.next}g.zip_worldCOM=!0}m=m.next}for(var C=this.live.head;null!=C;){var M=C.elt,P=!(M.posx==M.pre_posx&&M.posy==M.pre_posy),k=M.pre_rot!=M.rot;if(P){for(var T=M.shapes.head;null!=T;){var A=T.elt;1==A.type&&(A.polygon.invalidate_gverts(),A.polygon.invalidate_gaxi()),A.invalidate_worldCOM(),T=T.next}M.zip_worldCOM=!0}if(k){M.zip_axis=!0;for(var O=M.shapes.head;null!=O;){var E=O.elt;1==E.type&&(E.polygon.invalidate_gverts(),E.polygon.invalidate_gaxi()),E.invalidate_worldCOM(),O=O.next}M.zip_worldCOM=!0}C=C.next}for(var G=null,D=this.staticsleep.head;null!=D;){var I=D.elt;if(3!=I.type||0==I.velx&&0==I.vely&&0==I.angvel){if(I.kinematicDelaySleep){I.kinematicDelaySleep=!1,D=D.next;continue}I.component.sleeping=!0;var L,B,R=this.staticsleep;null==G?(B=(L=R.head).next,R.head=B,null==R.head&&(R.pushmod=!0)):(B=(L=G.next).next,null==(G.next=B)&&(R.pushmod=!0));var F=L;F.elt=null,F.next=Vi.zpp_pool,Vi.zpp_pool=F,R.modified=!0,R.length--,R.pushmod=!0,D=B}else D=(G=D).next}this.doForests(e),this.sleepArbiters(),this.midstep=!1;for(var j=null,N=this.callbackset_list.next;null!=N;){var U=N;if(null!=U.arbiters.head){var V;V=!0;for(var H=U.arbiters.head;null!=H;){if(!H.elt.sleeping){V=!1;break}H=H.next}for(var W,q=V,X=U.int1.cbSet,Y=U.int2.cbSet,K=null,Z=(X.cbpairs.length<Y.cbpairs.length?X.cbpairs:Y.cbpairs).head;null!=Z;){var J=Z.elt;if(J.a==X&&J.b==Y||J.a==Y&&J.b==X){K=J;break}Z=Z.next}if(null==K)null==No.zpp_pool?W=new No:(W=No.zpp_pool,No.zpp_pool=W.next,W.next=null),W.zip_listeners=!0,jo.setlt(X,Y)?(W.a=X,W.b=Y):(W.a=Y,W.b=X),K=W,X.cbpairs.add(K),Y!=X&&Y.cbpairs.add(K);K.zip_listeners&&(K.zip_listeners=!1,K.__validate());for(var Q=K.listeners.head;null!=Q;){var $=Q.elt;if(6==$.event&&(!q||$.allowSleepingCallbacks)&&!U.empty_arb($.itype)){var ee=this.push_callback($);ee.event=6;var te,ie=U.int1,ne=U.int2,re=$.options1,oe=ie.cbTypes;if(re.nonemptyintersection(oe,re.includes)&&!re.nonemptyintersection(oe,re.excludes)){var ae=$.options2,se=ne.cbTypes;te=!!ae.nonemptyintersection(se,ae.includes)&&!ae.nonemptyintersection(se,ae.excludes)}else te=!1;te?(ee.int1=ie,ee.int2=ne):(ee.int1=ne,ee.int2=ie),ee.set=U}Q=Q.next}N=(j=N).next}else{var pe,le,he=this.callbackset_list;null==j?(le=(pe=he.next).next,he.next=le,null==he.next&&(he.pushmod=!0)):(le=(pe=j.next).next,null==(j.next=le)&&(he.pushmod=!0)),pe._inuse=!1,he.modified=!0,he.length--,he.pushmod=!0,N=le,U.int1=U.int2=null,U.id=U.di=-1,U.freed=!0,U.next=Yo.zpp_pool,Yo.zpp_pool=U}}for(;!this.callbacks.empty();){var ue=this.callbacks.pop();0==ue.listener.type?ue.listener.body.handler(ue.wrapper_body()):1==ue.listener.type?ue.listener.constraint.handler(ue.wrapper_con()):2==ue.listener.type&&ue.listener.interaction.handleri(ue.wrapper_int()),ue.int1=ue.int2=null,ue.body=null,ue.constraint=null,(ue.listener=null)!=ue.wrap_arbiters&&(ue.wrap_arbiters.zpp_inner.inner=null),ue.set=null,ue.next=nt.zpp_pool,nt.zpp_pool=ue}},si.prototype.toiEvents=null,si.prototype.continuousCollisions=function(e){var t=2*Math.PI/e;this.bphase.broadphase(this,!1);for(var i=0;i<1&&null!=this.toiEvents.head;){for(var n=null,r=2,o=!1,a=null,s=null,p=this.toiEvents.head;null!=p;){var l=p.elt,h=l.s1.body,u=l.s2.body;if(h.sweepFrozen&&u.sweepFrozen){if(0==l.toi||!$s.testCollide_safe(l.s1,l.s2)){p=this.toiEvents.erase(s),l.next=Vt.zpp_pool,Vt.zpp_pool=l;continue}l.toi=0}if(l.frozen1!=h.sweepFrozen||l.frozen2!=u.sweepFrozen){if(l.kinematic){p=this.toiEvents.erase(s),l.next=Vt.zpp_pool,Vt.zpp_pool=l;continue}if(l.frozen1=h.sweepFrozen,l.frozen2=u.sweepFrozen,l.frozen1){var d=l.s1;l.s1=l.s2,l.s2=d,l.frozen1=!1,l.frozen2=!0}if(Ht.staticSweep(l,e,0,Qs.collisionSlopCCD),l.toi<0){p=this.toiEvents.erase(s),l.next=Vt.zpp_pool,Vt.zpp_pool=l;continue}}0<=l.toi&&(l.toi<r||!o&&l.kinematic)&&(r=(n=l).toi,o=l.kinematic,a=s),p=(s=p).next}if(null==n)break;this.toiEvents.erase(a),i=n.toi;var c=n.s1.body,_=n.s2.body;if(!c.sweepFrozen){var y=i*e,x=y-c.sweepTime;if(0!=x&&(c.sweepTime=y,c.posx+=c.velx*x,c.posy+=c.vely*x,0!=c.angvel)){var m=c.sweep_angvel*x;if(c.rot+=m,1e-4<m*m)c.axisx=Math.sin(c.rot),c.axisy=Math.cos(c.rot);else{var g=m*m,f=1-.5*g,v=1-g*g/8,z=(f*c.axisx+m*c.axisy)*v;c.axisy=(f*c.axisy-m*c.axisx)*v,c.axisx=z}}var w=n.s1;if(0==w.type)w.worldCOMx=c.posx+(c.axisy*w.localCOMx-c.axisx*w.localCOMy),w.worldCOMy=c.posy+(w.localCOMx*c.axisx+w.localCOMy*c.axisy);else{for(var b=w.polygon,S=b.lverts.next,C=b.gverts.next;null!=C;){var M=C,P=S;S=S.next,M.x=c.posx+(c.axisy*P.x-c.axisx*P.y),M.y=c.posy+(P.x*c.axisx+P.y*c.axisy),C=C.next}var k=b.edges.head,T=b.gverts.next,A=T;for(T=T.next;null!=T;){var O=T,E=k.elt;k=k.next,E.gnormx=c.axisy*E.lnormx-c.axisx*E.lnormy,E.gnormy=E.lnormx*c.axisx+E.lnormy*c.axisy,E.gprojection=c.posx*E.gnormx+c.posy*E.gnormy+E.lprojection,E.tp0=A.y*E.gnormx-A.x*E.gnormy,E.tp1=O.y*E.gnormx-O.x*E.gnormy,A=O,T=T.next}var G=b.gverts.next,D=k.elt;D.gnormx=c.axisy*D.lnormx-c.axisx*D.lnormy,D.gnormy=D.lnormx*c.axisx+D.lnormy*c.axisy,D.gprojection=c.posx*D.gnormx+c.posy*D.gnormy+D.lprojection,D.tp0=A.y*D.gnormx-A.x*D.gnormy,D.tp1=G.y*D.gnormx-G.x*D.gnormy}}if(!_.sweepFrozen){var I=i*e,L=I-_.sweepTime;if(0!=L&&(_.sweepTime=I,_.posx+=_.velx*L,_.posy+=_.vely*L,0!=_.angvel)){var B=_.sweep_angvel*L;if(_.rot+=B,1e-4<B*B)_.axisx=Math.sin(_.rot),_.axisy=Math.cos(_.rot);else{var R=B*B,F=1-.5*R,j=1-R*R/8,N=(F*_.axisx+B*_.axisy)*j;_.axisy=(F*_.axisy-B*_.axisx)*j,_.axisx=N}}var U=n.s2;if(0==U.type)U.worldCOMx=_.posx+(_.axisy*U.localCOMx-_.axisx*U.localCOMy),U.worldCOMy=_.posy+(U.localCOMx*_.axisx+U.localCOMy*_.axisy);else{for(var V=U.polygon,H=V.lverts.next,W=V.gverts.next;null!=W;){var q=W,X=H;H=H.next,q.x=_.posx+(_.axisy*X.x-_.axisx*X.y),q.y=_.posy+(X.x*_.axisx+X.y*_.axisy),W=W.next}var Y=V.edges.head,K=V.gverts.next,Z=K;for(K=K.next;null!=K;){var J=K,Q=Y.elt;Y=Y.next,Q.gnormx=_.axisy*Q.lnormx-_.axisx*Q.lnormy,Q.gnormy=Q.lnormx*_.axisx+Q.lnormy*_.axisy,Q.gprojection=_.posx*Q.gnormx+_.posy*Q.gnormy+Q.lprojection,Q.tp0=Z.y*Q.gnormx-Z.x*Q.gnormy,Q.tp1=J.y*Q.gnormx-J.x*Q.gnormy,Z=J,K=K.next}var $=V.gverts.next,ee=Y.elt;ee.gnormx=_.axisy*ee.lnormx-_.axisx*ee.lnormy,ee.gnormy=ee.lnormx*_.axisx+ee.lnormy*_.axisy,ee.gprojection=_.posx*ee.gnormx+_.posy*ee.gnormy+ee.lprojection,ee.tp0=Z.y*ee.gnormx-Z.x*ee.gnormy,ee.tp1=$.y*ee.gnormx-$.x*ee.gnormy}}var te=this.narrowPhase(n.s1,n.s2,!0,n.arbiter,!0);if(null==te)null!=n.arbiter&&null!=n.arbiter.pair&&(n.arbiter.pair.arb=null,n.arbiter.pair=null);else if(!this.presteparb(te,e,!0)&&te.type==ln.COL&&te.active&&0!=(1&te.immState)){var ie=te.colarb,ne=ie.nx*ie.c1.jnAcc-ie.ny*ie.c1.jtAcc,re=ie.ny*ie.c1.jnAcc+ie.nx*ie.c1.jtAcc,oe=ie.b1.imass;ie.b1.velx-=ne*oe,ie.b1.vely-=re*oe,ie.b1.angvel-=ie.b1.iinertia*(re*ie.c1.r1x-ne*ie.c1.r1y);var ae=ie.b2.imass;if(ie.b2.velx+=ne*ae,ie.b2.vely+=re*ae,ie.b2.angvel+=ie.b2.iinertia*(re*ie.c1.r2x-ne*ie.c1.r2y),ie.hc2){var se=ie.nx*ie.c2.jnAcc-ie.ny*ie.c2.jtAcc,pe=ie.ny*ie.c2.jnAcc+ie.nx*ie.c2.jtAcc,le=ie.b1.imass;ie.b1.velx-=se*le,ie.b1.vely-=pe*le,ie.b1.angvel-=ie.b1.iinertia*(pe*ie.c2.r1x-se*ie.c2.r1y);var he=ie.b2.imass;ie.b2.velx+=se*he,ie.b2.vely+=pe*he,ie.b2.angvel+=ie.b2.iinertia*(pe*ie.c2.r2x-se*ie.c2.r2y)}ie.b2.angvel+=ie.jrAcc*ie.b2.iinertia,ie.b1.angvel-=ie.jrAcc*ie.b1.iinertia;var ue,de,ce,_e,ye,xe,me=te.colarb,ge=me.k1x+me.b2.velx-me.c1.r2y*me.b2.angvel-(me.b1.velx-me.c1.r1y*me.b1.angvel),fe=me.k1y+me.b2.vely+me.c1.r2x*me.b2.angvel-(me.b1.vely+me.c1.r1x*me.b1.angvel);if(ce=(fe*me.nx-ge*me.ny+me.surfacex)*me.c1.tMass,(_e=me.c1.friction*me.c1.jnAcc)<(xe=(ye=me.c1.jtAcc)-ce)?xe=_e:xe<-_e&&(xe=-_e),ce=xe-ye,me.c1.jtAcc=xe,ue=-me.ny*ce,de=me.nx*ce,me.b2.velx+=ue*me.b2.imass,me.b2.vely+=de*me.b2.imass,me.b1.velx-=ue*me.b1.imass,me.b1.vely-=de*me.b1.imass,me.b2.angvel+=me.rt1b*ce*me.b2.iinertia,me.b1.angvel-=me.rt1a*ce*me.b1.iinertia,me.hc2){var ve=me.k2x+me.b2.velx-me.c2.r2y*me.b2.angvel-(me.b1.velx-me.c2.r1y*me.b1.angvel),ze=me.k2y+me.b2.vely+me.c2.r2x*me.b2.angvel-(me.b1.vely+me.c2.r1x*me.b1.angvel);ce=(ze*me.nx-ve*me.ny+me.surfacex)*me.c2.tMass,(_e=me.c2.friction*me.c2.jnAcc)<(xe=(ye=me.c2.jtAcc)-ce)?xe=_e:xe<-_e&&(xe=-_e),ce=xe-ye,me.c2.jtAcc=xe,ue=-me.ny*ce,de=me.nx*ce,me.b2.velx+=ue*me.b2.imass,me.b2.vely+=de*me.b2.imass,me.b1.velx-=ue*me.b1.imass,me.b1.vely-=de*me.b1.imass,me.b2.angvel+=me.rt2b*ce*me.b2.iinertia,me.b1.angvel-=me.rt2a*ce*me.b1.iinertia,ge=me.k1x+me.b2.velx-me.c1.r2y*me.b2.angvel-(me.b1.velx-me.c1.r1y*me.b1.angvel),fe=me.k1y+me.b2.vely+me.c1.r2x*me.b2.angvel-(me.b1.vely+me.c1.r1x*me.b1.angvel),ve=me.k2x+me.b2.velx-me.c2.r2y*me.b2.angvel-(me.b1.velx-me.c2.r1y*me.b1.angvel),ze=me.k2y+me.b2.vely+me.c2.r2x*me.b2.angvel-(me.b1.vely+me.c2.r1x*me.b1.angvel);var we=me.c1.jnAcc,be=me.c2.jnAcc,Se=ge*me.nx+fe*me.ny+me.surfacey+me.c1.bounce-(me.Ka*we+me.Kb*be),Ce=ve*me.nx+ze*me.ny+me.surfacey+me.c2.bounce-(me.Kb*we+me.Kc*be),Me=-(me.kMassa*Se+me.kMassb*Ce),Pe=-(me.kMassb*Se+me.kMassc*Ce);0<=Me&&0<=Pe?(Se=Me-we,Ce=Pe-be,me.c1.jnAcc=Me,me.c2.jnAcc=Pe):0<=(Me=-me.c1.nMass*Se)&&0<=me.Kb*Me+Ce?(Se=Me-we,Ce=-be,me.c1.jnAcc=Me,me.c2.jnAcc=0):0<=(Pe=-me.c2.nMass*Ce)&&0<=me.Kb*Pe+Se?(Se=-we,Ce=Pe-be,me.c1.jnAcc=0,me.c2.jnAcc=Pe):0<=Se&&0<=Ce?(Se=-we,Ce=-be,me.c1.jnAcc=me.c2.jnAcc=0):Ce=Se=0,ce=Se+Ce,ue=me.nx*ce,de=me.ny*ce,me.b2.velx+=ue*me.b2.imass,me.b2.vely+=de*me.b2.imass,me.b1.velx-=ue*me.b1.imass,me.b1.vely-=de*me.b1.imass,me.b2.angvel+=(me.rn1b*Se+me.rn2b*Ce)*me.b2.iinertia,me.b1.angvel-=(me.rn1a*Se+me.rn2a*Ce)*me.b1.iinertia}else 0!=me.radius&&(ce=(me.b2.angvel-me.b1.angvel)*me.rMass,_e=me.rfric*me.c1.jnAcc,ye=me.jrAcc,me.jrAcc-=ce,me.jrAcc>_e?me.jrAcc=_e:me.jrAcc<-_e&&(me.jrAcc=-_e),ce=me.jrAcc-ye,me.b2.angvel+=ce*me.b2.iinertia,me.b1.angvel-=ce*me.b1.iinertia),ge=me.k1x+me.b2.velx-me.c1.r2y*me.b2.angvel-(me.b1.velx-me.c1.r1y*me.b1.angvel),fe=me.k1y+me.b2.vely+me.c1.r2x*me.b2.angvel-(me.b1.vely+me.c1.r1x*me.b1.angvel),ce=(me.c1.bounce+(me.nx*ge+me.ny*fe)+me.surfacey)*me.c1.nMass,(xe=(ye=me.c1.jnAcc)-ce)<0&&(xe=0),ce=xe-ye,me.c1.jnAcc=xe,ue=me.nx*ce,de=me.ny*ce,me.b2.velx+=ue*me.b2.imass,me.b2.vely+=de*me.b2.imass,me.b1.velx-=ue*me.b1.imass,me.b1.vely-=de*me.b1.imass,me.b2.angvel+=me.rn1b*ce*me.b2.iinertia,me.b1.angvel-=me.rn1a*ce*me.b1.iinertia;var ke,Te,Ae,Oe,Ee,Ge,De=te.colarb,Ie=De.k1x+De.b2.velx-De.c1.r2y*De.b2.angvel-(De.b1.velx-De.c1.r1y*De.b1.angvel),Le=De.k1y+De.b2.vely+De.c1.r2x*De.b2.angvel-(De.b1.vely+De.c1.r1x*De.b1.angvel);if(Ae=(Le*De.nx-Ie*De.ny+De.surfacex)*De.c1.tMass,(Oe=De.c1.friction*De.c1.jnAcc)<(Ge=(Ee=De.c1.jtAcc)-Ae)?Ge=Oe:Ge<-Oe&&(Ge=-Oe),Ae=Ge-Ee,De.c1.jtAcc=Ge,ke=-De.ny*Ae,Te=De.nx*Ae,De.b2.velx+=ke*De.b2.imass,De.b2.vely+=Te*De.b2.imass,De.b1.velx-=ke*De.b1.imass,De.b1.vely-=Te*De.b1.imass,De.b2.angvel+=De.rt1b*Ae*De.b2.iinertia,De.b1.angvel-=De.rt1a*Ae*De.b1.iinertia,De.hc2){var Be=De.k2x+De.b2.velx-De.c2.r2y*De.b2.angvel-(De.b1.velx-De.c2.r1y*De.b1.angvel),Re=De.k2y+De.b2.vely+De.c2.r2x*De.b2.angvel-(De.b1.vely+De.c2.r1x*De.b1.angvel);Ae=(Re*De.nx-Be*De.ny+De.surfacex)*De.c2.tMass,(Oe=De.c2.friction*De.c2.jnAcc)<(Ge=(Ee=De.c2.jtAcc)-Ae)?Ge=Oe:Ge<-Oe&&(Ge=-Oe),Ae=Ge-Ee,De.c2.jtAcc=Ge,ke=-De.ny*Ae,Te=De.nx*Ae,De.b2.velx+=ke*De.b2.imass,De.b2.vely+=Te*De.b2.imass,De.b1.velx-=ke*De.b1.imass,De.b1.vely-=Te*De.b1.imass,De.b2.angvel+=De.rt2b*Ae*De.b2.iinertia,De.b1.angvel-=De.rt2a*Ae*De.b1.iinertia,Ie=De.k1x+De.b2.velx-De.c1.r2y*De.b2.angvel-(De.b1.velx-De.c1.r1y*De.b1.angvel),Le=De.k1y+De.b2.vely+De.c1.r2x*De.b2.angvel-(De.b1.vely+De.c1.r1x*De.b1.angvel),Be=De.k2x+De.b2.velx-De.c2.r2y*De.b2.angvel-(De.b1.velx-De.c2.r1y*De.b1.angvel),Re=De.k2y+De.b2.vely+De.c2.r2x*De.b2.angvel-(De.b1.vely+De.c2.r1x*De.b1.angvel);var Fe=De.c1.jnAcc,je=De.c2.jnAcc,Ne=Ie*De.nx+Le*De.ny+De.surfacey+De.c1.bounce-(De.Ka*Fe+De.Kb*je),Ue=Be*De.nx+Re*De.ny+De.surfacey+De.c2.bounce-(De.Kb*Fe+De.Kc*je),Ve=-(De.kMassa*Ne+De.kMassb*Ue),He=-(De.kMassb*Ne+De.kMassc*Ue);0<=Ve&&0<=He?(Ne=Ve-Fe,Ue=He-je,De.c1.jnAcc=Ve,De.c2.jnAcc=He):0<=(Ve=-De.c1.nMass*Ne)&&0<=De.Kb*Ve+Ue?(Ne=Ve-Fe,Ue=-je,De.c1.jnAcc=Ve,De.c2.jnAcc=0):0<=(He=-De.c2.nMass*Ue)&&0<=De.Kb*He+Ne?(Ne=-Fe,Ue=He-je,De.c1.jnAcc=0,De.c2.jnAcc=He):0<=Ne&&0<=Ue?(Ne=-Fe,Ue=-je,De.c1.jnAcc=De.c2.jnAcc=0):Ue=Ne=0,Ae=Ne+Ue,ke=De.nx*Ae,Te=De.ny*Ae,De.b2.velx+=ke*De.b2.imass,De.b2.vely+=Te*De.b2.imass,De.b1.velx-=ke*De.b1.imass,De.b1.vely-=Te*De.b1.imass,De.b2.angvel+=(De.rn1b*Ne+De.rn2b*Ue)*De.b2.iinertia,De.b1.angvel-=(De.rn1a*Ne+De.rn2a*Ue)*De.b1.iinertia}else 0!=De.radius&&(Ae=(De.b2.angvel-De.b1.angvel)*De.rMass,Oe=De.rfric*De.c1.jnAcc,Ee=De.jrAcc,De.jrAcc-=Ae,De.jrAcc>Oe?De.jrAcc=Oe:De.jrAcc<-Oe&&(De.jrAcc=-Oe),Ae=De.jrAcc-Ee,De.b2.angvel+=Ae*De.b2.iinertia,De.b1.angvel-=Ae*De.b1.iinertia),Ie=De.k1x+De.b2.velx-De.c1.r2y*De.b2.angvel-(De.b1.velx-De.c1.r1y*De.b1.angvel),Le=De.k1y+De.b2.vely+De.c1.r2x*De.b2.angvel-(De.b1.vely+De.c1.r1x*De.b1.angvel),Ae=(De.c1.bounce+(De.nx*Ie+De.ny*Le)+De.surfacey)*De.c1.nMass,(Ge=(Ee=De.c1.jnAcc)-Ae)<0&&(Ge=0),Ae=Ge-Ee,De.c1.jnAcc=Ge,ke=De.nx*Ae,Te=De.ny*Ae,De.b2.velx+=ke*De.b2.imass,De.b2.vely+=Te*De.b2.imass,De.b1.velx-=ke*De.b1.imass,De.b1.vely-=Te*De.b1.imass,De.b2.angvel+=De.rn1b*Ae*De.b2.iinertia,De.b1.angvel-=De.rn1a*Ae*De.b1.iinertia;var We,qe,Xe,Ye,Ke,Ze,Je=te.colarb,Qe=Je.k1x+Je.b2.velx-Je.c1.r2y*Je.b2.angvel-(Je.b1.velx-Je.c1.r1y*Je.b1.angvel),$e=Je.k1y+Je.b2.vely+Je.c1.r2x*Je.b2.angvel-(Je.b1.vely+Je.c1.r1x*Je.b1.angvel);if(Xe=($e*Je.nx-Qe*Je.ny+Je.surfacex)*Je.c1.tMass,(Ye=Je.c1.friction*Je.c1.jnAcc)<(Ze=(Ke=Je.c1.jtAcc)-Xe)?Ze=Ye:Ze<-Ye&&(Ze=-Ye),Xe=Ze-Ke,Je.c1.jtAcc=Ze,We=-Je.ny*Xe,qe=Je.nx*Xe,Je.b2.velx+=We*Je.b2.imass,Je.b2.vely+=qe*Je.b2.imass,Je.b1.velx-=We*Je.b1.imass,Je.b1.vely-=qe*Je.b1.imass,Je.b2.angvel+=Je.rt1b*Xe*Je.b2.iinertia,Je.b1.angvel-=Je.rt1a*Xe*Je.b1.iinertia,Je.hc2){var et=Je.k2x+Je.b2.velx-Je.c2.r2y*Je.b2.angvel-(Je.b1.velx-Je.c2.r1y*Je.b1.angvel),tt=Je.k2y+Je.b2.vely+Je.c2.r2x*Je.b2.angvel-(Je.b1.vely+Je.c2.r1x*Je.b1.angvel);Xe=(tt*Je.nx-et*Je.ny+Je.surfacex)*Je.c2.tMass,(Ye=Je.c2.friction*Je.c2.jnAcc)<(Ze=(Ke=Je.c2.jtAcc)-Xe)?Ze=Ye:Ze<-Ye&&(Ze=-Ye),Xe=Ze-Ke,Je.c2.jtAcc=Ze,We=-Je.ny*Xe,qe=Je.nx*Xe,Je.b2.velx+=We*Je.b2.imass,Je.b2.vely+=qe*Je.b2.imass,Je.b1.velx-=We*Je.b1.imass,Je.b1.vely-=qe*Je.b1.imass,Je.b2.angvel+=Je.rt2b*Xe*Je.b2.iinertia,Je.b1.angvel-=Je.rt2a*Xe*Je.b1.iinertia,Qe=Je.k1x+Je.b2.velx-Je.c1.r2y*Je.b2.angvel-(Je.b1.velx-Je.c1.r1y*Je.b1.angvel),$e=Je.k1y+Je.b2.vely+Je.c1.r2x*Je.b2.angvel-(Je.b1.vely+Je.c1.r1x*Je.b1.angvel),et=Je.k2x+Je.b2.velx-Je.c2.r2y*Je.b2.angvel-(Je.b1.velx-Je.c2.r1y*Je.b1.angvel),tt=Je.k2y+Je.b2.vely+Je.c2.r2x*Je.b2.angvel-(Je.b1.vely+Je.c2.r1x*Je.b1.angvel);var it=Je.c1.jnAcc,nt=Je.c2.jnAcc,rt=Qe*Je.nx+$e*Je.ny+Je.surfacey+Je.c1.bounce-(Je.Ka*it+Je.Kb*nt),ot=et*Je.nx+tt*Je.ny+Je.surfacey+Je.c2.bounce-(Je.Kb*it+Je.Kc*nt),at=-(Je.kMassa*rt+Je.kMassb*ot),st=-(Je.kMassb*rt+Je.kMassc*ot);0<=at&&0<=st?(rt=at-it,ot=st-nt,Je.c1.jnAcc=at,Je.c2.jnAcc=st):0<=(at=-Je.c1.nMass*rt)&&0<=Je.Kb*at+ot?(rt=at-it,ot=-nt,Je.c1.jnAcc=at,Je.c2.jnAcc=0):0<=(st=-Je.c2.nMass*ot)&&0<=Je.Kb*st+rt?(rt=-it,ot=st-nt,Je.c1.jnAcc=0,Je.c2.jnAcc=st):0<=rt&&0<=ot?(rt=-it,ot=-nt,Je.c1.jnAcc=Je.c2.jnAcc=0):ot=rt=0,Xe=rt+ot,We=Je.nx*Xe,qe=Je.ny*Xe,Je.b2.velx+=We*Je.b2.imass,Je.b2.vely+=qe*Je.b2.imass,Je.b1.velx-=We*Je.b1.imass,Je.b1.vely-=qe*Je.b1.imass,Je.b2.angvel+=(Je.rn1b*rt+Je.rn2b*ot)*Je.b2.iinertia,Je.b1.angvel-=(Je.rn1a*rt+Je.rn2a*ot)*Je.b1.iinertia}else 0!=Je.radius&&(Xe=(Je.b2.angvel-Je.b1.angvel)*Je.rMass,Ye=Je.rfric*Je.c1.jnAcc,Ke=Je.jrAcc,Je.jrAcc-=Xe,Je.jrAcc>Ye?Je.jrAcc=Ye:Je.jrAcc<-Ye&&(Je.jrAcc=-Ye),Xe=Je.jrAcc-Ke,Je.b2.angvel+=Xe*Je.b2.iinertia,Je.b1.angvel-=Xe*Je.b1.iinertia),Qe=Je.k1x+Je.b2.velx-Je.c1.r2y*Je.b2.angvel-(Je.b1.velx-Je.c1.r1y*Je.b1.angvel),$e=Je.k1y+Je.b2.vely+Je.c1.r2x*Je.b2.angvel-(Je.b1.vely+Je.c1.r1x*Je.b1.angvel),Xe=(Je.c1.bounce+(Je.nx*Qe+Je.ny*$e)+Je.surfacey)*Je.c1.nMass,(Ze=(Ke=Je.c1.jnAcc)-Xe)<0&&(Ze=0),Xe=Ze-Ke,Je.c1.jnAcc=Ze,We=Je.nx*Xe,qe=Je.ny*Xe,Je.b2.velx+=We*Je.b2.imass,Je.b2.vely+=qe*Je.b2.imass,Je.b1.velx-=We*Je.b1.imass,Je.b1.vely-=qe*Je.b1.imass,Je.b2.angvel+=Je.rn1b*Xe*Je.b2.iinertia,Je.b1.angvel-=Je.rn1a*Xe*Je.b1.iinertia;var pt,lt,ht,ut,dt,ct,_t=te.colarb,yt=_t.k1x+_t.b2.velx-_t.c1.r2y*_t.b2.angvel-(_t.b1.velx-_t.c1.r1y*_t.b1.angvel),xt=_t.k1y+_t.b2.vely+_t.c1.r2x*_t.b2.angvel-(_t.b1.vely+_t.c1.r1x*_t.b1.angvel);if(ht=(xt*_t.nx-yt*_t.ny+_t.surfacex)*_t.c1.tMass,(ut=_t.c1.friction*_t.c1.jnAcc)<(ct=(dt=_t.c1.jtAcc)-ht)?ct=ut:ct<-ut&&(ct=-ut),ht=ct-dt,_t.c1.jtAcc=ct,pt=-_t.ny*ht,lt=_t.nx*ht,_t.b2.velx+=pt*_t.b2.imass,_t.b2.vely+=lt*_t.b2.imass,_t.b1.velx-=pt*_t.b1.imass,_t.b1.vely-=lt*_t.b1.imass,_t.b2.angvel+=_t.rt1b*ht*_t.b2.iinertia,_t.b1.angvel-=_t.rt1a*ht*_t.b1.iinertia,_t.hc2){var mt=_t.k2x+_t.b2.velx-_t.c2.r2y*_t.b2.angvel-(_t.b1.velx-_t.c2.r1y*_t.b1.angvel),gt=_t.k2y+_t.b2.vely+_t.c2.r2x*_t.b2.angvel-(_t.b1.vely+_t.c2.r1x*_t.b1.angvel);ht=(gt*_t.nx-mt*_t.ny+_t.surfacex)*_t.c2.tMass,(ut=_t.c2.friction*_t.c2.jnAcc)<(ct=(dt=_t.c2.jtAcc)-ht)?ct=ut:ct<-ut&&(ct=-ut),ht=ct-dt,_t.c2.jtAcc=ct,pt=-_t.ny*ht,lt=_t.nx*ht,_t.b2.velx+=pt*_t.b2.imass,_t.b2.vely+=lt*_t.b2.imass,_t.b1.velx-=pt*_t.b1.imass,_t.b1.vely-=lt*_t.b1.imass,_t.b2.angvel+=_t.rt2b*ht*_t.b2.iinertia,_t.b1.angvel-=_t.rt2a*ht*_t.b1.iinertia,yt=_t.k1x+_t.b2.velx-_t.c1.r2y*_t.b2.angvel-(_t.b1.velx-_t.c1.r1y*_t.b1.angvel),xt=_t.k1y+_t.b2.vely+_t.c1.r2x*_t.b2.angvel-(_t.b1.vely+_t.c1.r1x*_t.b1.angvel),mt=_t.k2x+_t.b2.velx-_t.c2.r2y*_t.b2.angvel-(_t.b1.velx-_t.c2.r1y*_t.b1.angvel),gt=_t.k2y+_t.b2.vely+_t.c2.r2x*_t.b2.angvel-(_t.b1.vely+_t.c2.r1x*_t.b1.angvel);var ft=_t.c1.jnAcc,vt=_t.c2.jnAcc,zt=yt*_t.nx+xt*_t.ny+_t.surfacey+_t.c1.bounce-(_t.Ka*ft+_t.Kb*vt),wt=mt*_t.nx+gt*_t.ny+_t.surfacey+_t.c2.bounce-(_t.Kb*ft+_t.Kc*vt),bt=-(_t.kMassa*zt+_t.kMassb*wt),St=-(_t.kMassb*zt+_t.kMassc*wt);0<=bt&&0<=St?(zt=bt-ft,wt=St-vt,_t.c1.jnAcc=bt,_t.c2.jnAcc=St):0<=(bt=-_t.c1.nMass*zt)&&0<=_t.Kb*bt+wt?(zt=bt-ft,wt=-vt,_t.c1.jnAcc=bt,_t.c2.jnAcc=0):0<=(St=-_t.c2.nMass*wt)&&0<=_t.Kb*St+zt?(zt=-ft,wt=St-vt,_t.c1.jnAcc=0,_t.c2.jnAcc=St):0<=zt&&0<=wt?(zt=-ft,wt=-vt,_t.c1.jnAcc=_t.c2.jnAcc=0):wt=zt=0,ht=zt+wt,pt=_t.nx*ht,lt=_t.ny*ht,_t.b2.velx+=pt*_t.b2.imass,_t.b2.vely+=lt*_t.b2.imass,_t.b1.velx-=pt*_t.b1.imass,_t.b1.vely-=lt*_t.b1.imass,_t.b2.angvel+=(_t.rn1b*zt+_t.rn2b*wt)*_t.b2.iinertia,_t.b1.angvel-=(_t.rn1a*zt+_t.rn2a*wt)*_t.b1.iinertia}else 0!=_t.radius&&(ht=(_t.b2.angvel-_t.b1.angvel)*_t.rMass,ut=_t.rfric*_t.c1.jnAcc,dt=_t.jrAcc,_t.jrAcc-=ht,_t.jrAcc>ut?_t.jrAcc=ut:_t.jrAcc<-ut&&(_t.jrAcc=-ut),ht=_t.jrAcc-dt,_t.b2.angvel+=ht*_t.b2.iinertia,_t.b1.angvel-=ht*_t.b1.iinertia),yt=_t.k1x+_t.b2.velx-_t.c1.r2y*_t.b2.angvel-(_t.b1.velx-_t.c1.r1y*_t.b1.angvel),xt=_t.k1y+_t.b2.vely+_t.c1.r2x*_t.b2.angvel-(_t.b1.vely+_t.c1.r1x*_t.b1.angvel),ht=(_t.c1.bounce+(_t.nx*yt+_t.ny*xt)+_t.surfacey)*_t.c1.nMass,(ct=(dt=_t.c1.jnAcc)-ht)<0&&(ct=0),ht=ct-dt,_t.c1.jnAcc=ct,pt=_t.nx*ht,lt=_t.ny*ht,_t.b2.velx+=pt*_t.b2.imass,_t.b2.vely+=lt*_t.b2.imass,_t.b1.velx-=pt*_t.b1.imass,_t.b1.vely-=lt*_t.b1.imass,_t.b2.angvel+=_t.rn1b*ht*_t.b2.iinertia,_t.b1.angvel-=_t.rn1a*ht*_t.b1.iinertia;c.sweep_angvel=c.angvel%t,_.sweep_angvel=_.angvel%t}null!=te&&te.active&&0!=(1&te.immState)&&te.type==ln.COL&&(c.sweepFrozen||3==c.type||(c.sweepFrozen=!0,n.failed?c.angvel=c.sweep_angvel=0:n.slipped?c.angvel=c.sweep_angvel*=Qs.angularCCDSlipScale:c.angvel=c.sweep_angvel),_.sweepFrozen||3==_.type||(_.sweepFrozen=!0,n.failed?_.angvel=_.sweep_angvel=0:n.slipped?_.angvel=_.sweep_angvel*=Qs.angularCCDSlipScale:_.angvel=_.sweep_angvel));var Ct=n;Ct.next=Vt.zpp_pool,Vt.zpp_pool=Ct}for(;null!=this.toiEvents.head;){var Mt=this.toiEvents.pop_unsafe();Mt.next=Vt.zpp_pool,Vt.zpp_pool=Mt}for(var Pt=this.kinematics.head;null!=Pt;){var kt=Pt.elt,Tt=e-kt.sweepTime;if(0!=Tt&&(kt.sweepTime=e,kt.posx+=kt.velx*Tt,kt.posy+=kt.vely*Tt,0!=kt.angvel)){var At=kt.sweep_angvel*Tt;if(kt.rot+=At,1e-4<At*At)kt.axisx=Math.sin(kt.rot),kt.axisy=Math.cos(kt.rot);else{var Ot=At*At,Et=1-.5*Ot,Gt=1-Ot*Ot/8,Dt=(Et*kt.axisx+At*kt.axisy)*Gt;kt.axisy=(Et*kt.axisy-At*kt.axisx)*Gt,kt.axisx=Dt}}kt.sweepTime=0,Pt=Pt.next}for(var It=this.live.head;null!=It;){var Lt=It.elt;if(!Lt.sweepFrozen){var Bt=e-Lt.sweepTime;if(0!=Bt&&(Lt.sweepTime=e,Lt.posx+=Lt.velx*Bt,Lt.posy+=Lt.vely*Bt,0!=Lt.angvel)){var Rt=Lt.sweep_angvel*Bt;if(Lt.rot+=Rt,1e-4<Rt*Rt)Lt.axisx=Math.sin(Lt.rot),Lt.axisy=Math.cos(Lt.rot);else{var Ft=Rt*Rt,jt=1-.5*Ft,Nt=1-Ft*Ft/8,Ut=(jt*Lt.axisx+Rt*Lt.axisy)*Nt;Lt.axisy=(jt*Lt.axisy-Rt*Lt.axisx)*Nt,Lt.axisx=Ut}}}Lt.sweepTime=0,It=It.next}},si.prototype.continuousEvent=function(e,t,i,n,r){if(e.body.sweepFrozen&&t.body.sweepFrozen)return n;if(e.body.disableCCD||t.body.disableCCD)return n;var o;if(null==n||null!=n.colarb){var a,s=e.body,p=t.body;a=!1;for(var l,h,u=s.constraints.head;null!=u;){var d=u.elt;if(d.ignore&&d.pair_exists(s.id,p.id)){a=!0;break}u=u.next}if(a)h=!1;else{for(var c=e;null!=c&&null==c.group;)c=null!=c.ishape?c.ishape.body:null!=c.icompound?c.icompound.compound:c.ibody.compound;var _,y=null==c?null:c.group;if(null==y)_=!1;else{for(var x=t;null!=x&&null==x.group;)x=null!=x.ishape?x.ishape.body:null!=x.icompound?x.icompound.compound:x.ibody.compound;var m=null==x?null:x.group;if(null==m)_=!1;else{for(var g=!1;null!=y&&null!=m;){if(y==m){g=y.ignore;break}y.depth<m.depth?m=m.group:y=y.group}_=g}}h=!_}if(h){var f;if(e.sensorEnabled||t.sensorEnabled){var v=e.filter,z=t.filter;f=0!=(v.sensorMask&z.sensorGroup)&&0!=(z.sensorMask&v.sensorGroup)}else f=!1;if(f)l=2;else{var w;if(e.fluidEnabled||t.fluidEnabled){var b=e.filter,S=t.filter;w=0!=(b.fluidMask&S.fluidGroup)&&0!=(S.fluidMask&b.fluidGroup)}else w=!1;if(!!w&&!(0==s.imass&&0==p.imass&&0==s.iinertia&&0==p.iinertia))l=0;else{var C=e.filter,M=t.filter;l=0!=(C.collisionMask&M.collisionGroup)&&0!=(M.collisionMask&C.collisionGroup)&&!(0==s.imass&&0==p.imass&&0==s.iinertia&&0==p.iinertia)?1:-1}}}else l=-1;o=l<=0}else o=!0;if(o)return n;var P=e.body,k=t.body;if(i||P.bullet||k.bullet){var T;null==Vt.zpp_pool?T=new Vt:(T=Vt.zpp_pool,Vt.zpp_pool=T.next,T.next=null),T.failed=!1,T.s1=T.s2=null,T.arbiter=null;var A=3==P.type||3==k.type;if(i&&!A)2!=e.body.type?(T.s2=e,T.s1=t):(T.s1=e,T.s2=t),T.kinematic=!1,Ht.staticSweep(T,this.pre_dt,0,Qs.collisionSlopCCD);else if(T.s1=e,T.s2=t,T.kinematic=A,T.s1.body.sweepFrozen||T.s2.body.sweepFrozen){if(T.s1.body.sweepFrozen){var O=T.s1;T.s1=T.s2,T.s2=O,T.frozen1=!1,T.frozen2=!0}Ht.staticSweep(T,this.pre_dt,0,Qs.collisionSlopCCD)}else Ht.dynamicSweep(T,this.pre_dt,0,Qs.collisionSlopCCD);if(i&&T.toi<0||T.failed){var E=T;E.next=Vt.zpp_pool,Vt.zpp_pool=E}else this.toiEvents.add(T),T.frozen1=T.s1.body.sweepFrozen,T.frozen2=T.s2.body.sweepFrozen,T.arbiter=null!=n?n.colarb:null}return n},si.prototype.bodyCbWake=function(e){if(2==e.type&&null!=e.cbSet)if(this.midstep)for(var t=e.cbSet.bodylisteners.head;null!=t;){var i=t.elt;if(2==i.event){var n=this.push_callback(i);n.event=2,n.body=e,t=t.next}else t=t.next}else e.component.woken=!0},si.prototype.bodyCbSleep=function(e){if(2==e.type&&null!=e.cbSet)for(var t=e.cbSet.bodylisteners.head;null!=t;){var i=t.elt;if(3==i.event){var n=this.push_callback(i);n.event=3,n.body=e,t=t.next}else t=t.next}},si.prototype.constraintCbWake=function(e){if(null!=e.cbSet)if(this.midstep)for(var t=e.cbSet.conlisteners.head;null!=t;){var i=t.elt;if(2==i.event){var n=this.push_callback(i);n.event=2,n.constraint=e,t=t.next}else t=t.next}else e.component.woken=!0},si.prototype.constraintCbSleep=function(e){if(null!=e.cbSet)for(var t=e.cbSet.conlisteners.head;null!=t;){var i=t.elt;if(3==i.event){var n=this.push_callback(i);n.event=3,n.constraint=e,t=t.next}else t=t.next}},si.prototype.constraintCbBreak=function(e){if(null!=e.cbSet)for(var t=e.cbSet.conlisteners.head;null!=t;){var i=t.elt;if(4==i.event){var n=this.push_callback(i);n.event=4,n.constraint=e,t=t.next}else t=t.next}},si.prototype.nullListenerType=function(e,t){for(var i=new Ge,n=e.interactors.head;null!=n;)i.add(n.elt),n=n.next;if(e!=t)for(var r=t.interactors.head;null!=r;)i.add(r.elt),r=r.next;for(;null!=i.head;){var o=i.pop_unsafe();if(null!=o.icompound){for(var a=o.icompound,s=a.bodies.head;null!=s;)i.add(s.elt),s=s.next;for(var p=a.compounds.head;null!=p;)i.add(p.elt),p=p.next}else for(var l=null!=o.ibody?o.ibody:o.ishape.body,h=null!=o.ishape?o.ishape:null,u=l.arbiters.head;null!=u;){var d=u.elt;if(0!=d.present)if(null==h||d.ws1==h||d.ws2==h){this.MRCA_chains(d.ws1,d.ws2);for(var c=this.mrca1.head;null!=c;){var _=c.elt;if(_.cbSet==e||_.cbSet==t){for(var y=this.mrca2.head;null!=y;){var x=y.elt;if(_.cbSet==e&&x.cbSet!=t||_.cbSet==t&&x.cbSet!=e)y=y.next;else{var m=Xo.get(_,x);if(null!=m){for(;null!=m.arbiters.head;)m.arbiters.pop_unsafe().present--;this.remove_callbackset(m)}y=y.next}}c=c.next}else c=c.next}u=u.next}else u=u.next;else u=u.next}}},si.prototype.nullInteractorType=function(e,t){if(null==t&&(t=e),null!=e.icompound){for(var i=e.icompound,n=i.bodies.head;null!=n;)this.nullInteractorType(n.elt,t),n=n.next;for(var r=i.compounds.head;null!=r;)this.nullInteractorType(r.elt,t),r=r.next}else for(var o=null!=e.ibody?e.ibody:e.ishape.body,a=null!=e.ishape?e.ishape:null,s=o.arbiters.head;null!=s;){var p=s.elt;if(0!=p.present)if(null==a||p.ws1==a||p.ws2==a){this.MRCA_chains(p.ws1,p.ws2);for(var l=this.mrca1.head;null!=l;){for(var h=l.elt,u=this.mrca2.head;null!=u;){var d=u.elt;if(h==t||d==t){var c=Xo.get(h,d);null!=c&&(p.present--,c.remove_arb(p),null==c.arbiters.head&&this.remove_callbackset(c)),u=u.next}else u=u.next}l=l.next}s=s.next}else s=s.next;else s=s.next}},si.prototype.freshListenerType=function(e,t){for(var i=new Ge,n=e.interactors.head;null!=n;)i.add(n.elt),n=n.next;if(e!=t)for(var r=t.interactors.head;null!=r;)i.add(r.elt),r=r.next;for(;null!=i.head;){var o=i.pop_unsafe();if(null!=o.icompound){for(var a=o.icompound,s=a.bodies.head;null!=s;)i.add(s.elt),s=s.next;for(var p=a.compounds.head;null!=p;)i.add(p.elt),p=p.next}else for(var l=null!=o.ibody?o.ibody:o.ishape.body,h=null!=o.ishape?o.ishape:null,u=l.arbiters.head;null!=u;){var d=u.elt;if(d.presentable)if(null==h||d.ws1==h||d.ws2==h){this.MRCA_chains(d.ws1,d.ws2);for(var c=this.mrca1.head;null!=c;){var _=c.elt;if(_.cbSet==e||_.cbSet==t){for(var y=this.mrca2.head;null!=y;){var x=y.elt;if(_.cbSet==e&&x.cbSet!=t||_.cbSet==t&&x.cbSet!=e)y=y.next;else{var m,g,f=Xo.get(_,x);null==f&&(f=Yo.get(_,x),this.add_callbackset(f)),g=!1;for(var v=f.arbiters.head;null!=v;){if(v.elt==d){g=!0;break}v=v.next}if(g)m=!1;else{var z,w=f.arbiters;null==Ko.zpp_pool?z=new Ko:(z=Ko.zpp_pool,Ko.zpp_pool=z.next,z.next=null),z.elt=d;var b=z;b.next=w.head,w.head=b,w.modified=!0,w.length++,m=!0}m&&d.present++,y=y.next}}c=c.next}else c=c.next}u=u.next}else u=u.next;else u=u.next}}},si.prototype.freshInteractorType=function(e,t){if(null==t&&(t=e),null!=e.icompound){for(var i=e.icompound,n=i.bodies.head;null!=n;)this.freshInteractorType(n.elt,t),n=n.next;for(var r=i.compounds.head;null!=r;)this.freshInteractorType(r.elt,t),r=r.next}else for(var o=null!=e.ibody?e.ibody:e.ishape.body,a=null!=e.ishape?e.ishape:null,s=o.arbiters.head;null!=s;){var p=s.elt;if(p.presentable)if(null==a||p.ws1==a||p.ws2==a){this.MRCA_chains(p.ws1,p.ws2);for(var l=this.mrca1.head;null!=l;){for(var h=l.elt,u=this.mrca2.head;null!=u;){var d=u.elt;if(h==t||d==t){var c=h.cbSet,_=d.cbSet;c.validate(),_.validate();for(var y,x=null,m=(c.cbpairs.length<_.cbpairs.length?c.cbpairs:_.cbpairs).head;null!=m;){var g=m.elt;if(g.a==c&&g.b==_||g.a==_&&g.b==c){x=g;break}m=m.next}if(null==x)null==No.zpp_pool?y=new No:(y=No.zpp_pool,No.zpp_pool=y.next,y.next=null),y.zip_listeners=!0,jo.setlt(c,_)?(y.a=c,y.b=_):(y.a=_,y.b=c),x=y,c.cbpairs.add(x),_!=c&&_.cbpairs.add(x);if(x.zip_listeners&&(x.zip_listeners=!1,x.__validate()),null!=x.listeners.head){var f,v,z=Xo.get(h,d);null==z&&(z=Yo.get(h,d),this.add_callbackset(z)),v=!1;for(var w=z.arbiters.head;null!=w;){if(w.elt==p){v=!0;break}w=w.next}if(v)f=!1;else{var b,S=z.arbiters;null==Ko.zpp_pool?b=new Ko:(b=Ko.zpp_pool,Ko.zpp_pool=b.next,b.next=null),b.elt=p;var C=b;C.next=S.head,S.head=C,S.modified=!0,S.length++,f=!0}f&&p.present++}u=u.next}else u=u.next}l=l.next}s=s.next}else s=s.next;else s=s.next}},si.prototype.wakeCompound=function(e){for(var t=e.bodies.head;null!=t;){var i=t.elt;i.world||(i.component.waket=this.stamp+(this.midstep?0:1),3==i.type&&(i.kinematicDelaySleep=!0),i.component.sleeping&&this.really_wake(i,!1)),t=t.next}for(var n=e.constraints.head;null!=n;)this.wake_constraint(n.elt),n=n.next;for(var r=e.compounds.head;null!=r;)this.wakeCompound(r.elt),r=r.next},si.prototype.wakeIsland=function(e){for(;null!=e.comps.head;){var t=e.comps.pop_unsafe();if(t.waket=this.stamp+(this.midstep?0:1),t.isBody){var i=t.body;this.live.add(i);for(var n=i.arbiters.head;null!=n;){var r=n.elt;if(r.sleeping)if(r.sleeping=!1,r.up_stamp+=this.stamp-r.sleep_stamp,r.type==ln.COL){var o=r.colarb;if(o.stat){var a,s=this.c_arbiters_true;null==ea.zpp_pool?a=new ea:(a=ea.zpp_pool,ea.zpp_pool=a.next,a.next=null),a.elt=o;var p=a;p.next=s.head,s.head=p,s.modified=!0,s.length++}else{var l,h=this.c_arbiters_false;null==ea.zpp_pool?l=new ea:(l=ea.zpp_pool,ea.zpp_pool=l.next,l.next=null),l.elt=o;var u=l;u.next=h.head,h.head=u,h.modified=!0,h.length++}}else if(r.type==ln.FLUID){var d,c=this.f_arbiters,_=r.fluidarb;null==Qo.zpp_pool?d=new Qo:(d=Qo.zpp_pool,Qo.zpp_pool=d.next,d.next=null),d.elt=_;var y=d;y.next=c.head,c.head=y,c.modified=!0,c.length++}else{var x,m=this.s_arbiters,g=r.sensorarb;null==$o.zpp_pool?x=new $o:(x=$o.zpp_pool,$o.zpp_pool=x.next,x.next=null),x.elt=g;var f=x;f.next=m.head,m.head=f,m.modified=!0,m.length++}n=n.next}if(this.bodyCbWake(i),t.sleeping=!1,t.island=null,(t.parent=t).rank=0,1!=i.type)for(var v=i.shapes.head;null!=v;){var z=v.elt;null!=z.node&&this.bphase.sync(z),v=v.next}}else{var w,b=t.constraint,S=this.live_constraints;null==Hi.zpp_pool?w=new Hi:(w=Hi.zpp_pool,Hi.zpp_pool=w.next,w.next=null),w.elt=b;var C=w;C.next=S.head,S.head=C,S.modified=!0,S.length++,this.constraintCbWake(b),t.sleeping=!1,t.island=null,(t.parent=t).rank=0}}e.next=ni.zpp_pool,ni.zpp_pool=e},si.prototype.non_inlined_wake=function(e,t){null==t&&(t=!1),e.world||(e.component.waket=this.stamp+(this.midstep?0:1),3==e.type&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,t))},si.prototype.really_wake=function(e,t){if(null==t&&(t=!1),null==e.component.island){if(e.component.sleeping=!1,3==e.type||1==e.type){var i,n=this.staticsleep;null==Vi.zpp_pool?i=new Vi:(i=Vi.zpp_pool,Vi.zpp_pool=i.next,i.next=null),i.elt=e;var r=i;r.next=n.head,n.head=r,n.modified=!0,n.length++}else{var o,a=this.live;null==Vi.zpp_pool?o=new Vi:(o=Vi.zpp_pool,Vi.zpp_pool=o.next,o.next=null),o.elt=e;var s=o;s.next=a.head,a.head=s,a.modified=!0,a.length++}for(var p=e.constraints.head;null!=p;){var l=p.elt;l.space==this&&this.wake_constraint(l),p=p.next}for(var h=e.arbiters.head;null!=h;){var u=h.elt;if(u.sleeping)if(u.sleeping=!1,u.up_stamp+=this.stamp+(this.midstep?0:1)-u.sleep_stamp,u.type==ln.COL){var d=u.colarb;if(d.stat){var c,_=this.c_arbiters_true;null==ea.zpp_pool?c=new ea:(c=ea.zpp_pool,ea.zpp_pool=c.next,c.next=null),c.elt=d;var y=c;y.next=_.head,_.head=y,_.modified=!0,_.length++}else{var x,m=this.c_arbiters_false;null==ea.zpp_pool?x=new ea:(x=ea.zpp_pool,ea.zpp_pool=x.next,x.next=null),x.elt=d;var g=x;g.next=m.head,m.head=g,m.modified=!0,m.length++}}else if(u.type==ln.FLUID){var f,v=this.f_arbiters,z=u.fluidarb;null==Qo.zpp_pool?f=new Qo:(f=Qo.zpp_pool,Qo.zpp_pool=f.next,f.next=null),f.elt=z;var w=f;w.next=v.head,v.head=w,v.modified=!0,v.length++}else{var b,S=this.s_arbiters,C=u.sensorarb;null==$o.zpp_pool?b=new $o:(b=$o.zpp_pool,$o.zpp_pool=b.next,b.next=null),b.elt=C;var M=b;M.next=S.head,S.head=M,S.modified=!0,S.length++}if(u.type!=ln.SENSOR&&!u.cleared&&u.up_stamp>=this.stamp&&0!=(1&u.immState)){if(2==u.b1.type&&u.b1.component.sleeping){var P=u.b1;P.world||(P.component.waket=this.stamp+(this.midstep?0:1),3==P.type&&(P.kinematicDelaySleep=!0),P.component.sleeping&&this.really_wake(P,!1))}if(2==u.b2.type&&u.b2.component.sleeping){var k=u.b2;k.world||(k.component.waket=this.stamp+(this.midstep?0:1),3==k.type&&(k.kinematicDelaySleep=!0),k.component.sleeping&&this.really_wake(k,!1))}}h=h.next}if(t||2!=e.type||this.bodyCbWake(e),!t&&!this.bphase.is_sweep&&1!=e.type)for(var T=e.shapes.head;null!=T;){var A=T.elt;null!=A.node&&this.bphase.sync(A),T=T.next}}else this.wakeIsland(e.component.island)},si.prototype.wake_constraint=function(e,t){if(null==t&&(t=!1),e.active){if(e.component.waket=this.stamp+(this.midstep?0:1),e.component.sleeping){if(null==e.component.island){e.component.sleeping=!1;var i,n=this.live_constraints;null==Hi.zpp_pool?i=new Hi:(i=Hi.zpp_pool,Hi.zpp_pool=i.next,i.next=null),i.elt=e;var r=i;r.next=n.head,n.head=r,n.modified=!0,n.length++,e.wake_connected(),t||this.constraintCbWake(e)}else this.wakeIsland(e.component.island);return!0}return!1}return!1},si.prototype.doForests=function(e){for(var t=this.c_arbiters_false.head;null!=t;){var i=t.elt;if(!i.cleared&&i.up_stamp==this.stamp&&0!=(1&i.immState)&&2==i.b1.type&&2==i.b2.type){var n,r;if(i.b1.component==i.b1.component.parent)n=i.b1.component;else{for(var o=i.b1.component,a=null;o!=o.parent;){var s=o.parent;o.parent=a,a=o,o=s}for(;null!=a;){var p=a.parent;a.parent=o,a=p}n=o}if(i.b2.component==i.b2.component.parent)r=i.b2.component;else{for(var l=i.b2.component,h=null;l!=l.parent;){var u=l.parent;l.parent=h,h=l,l=u}for(;null!=h;){var d=h.parent;h.parent=l,h=d}r=l}n!=r&&(n.rank<r.rank?n.parent=r:n.rank>r.rank?r.parent=n:(r.parent=n).rank++)}t=t.next}for(var c=this.f_arbiters.head;null!=c;){var _=c.elt;if(!_.cleared&&_.up_stamp==this.stamp&&0!=(1&_.immState)&&2==_.b1.type&&2==_.b2.type){var y,x;if(_.b1.component==_.b1.component.parent)y=_.b1.component;else{for(var m=_.b1.component,g=null;m!=m.parent;){var f=m.parent;m.parent=g,g=m,m=f}for(;null!=g;){var v=g.parent;g.parent=m,g=v}y=m}if(_.b2.component==_.b2.component.parent)x=_.b2.component;else{for(var z=_.b2.component,w=null;z!=z.parent;){var b=z.parent;z.parent=w,w=z,z=b}for(;null!=w;){var S=w.parent;w.parent=z,w=S}x=z}y!=x&&(y.rank<x.rank?y.parent=x:y.rank>x.rank?x.parent=y:(x.parent=y).rank++)}c=c.next}for(var C=this.live_constraints.head;null!=C;)C.elt.forest(),C=C.next;for(;null!=this.live.head;){var M=this.live,P=M.head.elt;M.pop();var k,T=P.component;if(T==T.parent)k=T;else{for(var A=T,O=null;A!=A.parent;){var E=A.parent;A.parent=O,O=A,A=E}for(;null!=O;){var G=O.parent;O.parent=A,O=G}k=A}if(null==k.island){null==ni.zpp_pool?k.island=new ni:(k.island=ni.zpp_pool,ni.zpp_pool=k.island.next,k.island.next=null),k.island.waket=0;var D=this.islands,I=k.island;I._inuse=!0,I.next=D.next,D.next=I,D.modified=!0,D.length++,k.island.sleep=!0}T.island=k.island;var L,B=T.island.comps;null==pn.zpp_pool?L=new pn:(L=pn.zpp_pool,pn.zpp_pool=L.next,L.next=null),L.elt=T;var R=L;R.next=B.head,B.head=R,B.modified=!0,B.length++;var F=P.atRest(e);T.island.sleep=T.island.sleep&&F,T.waket>T.island.waket&&(T.island.waket=T.waket)}for(;null!=this.live_constraints.head;){var j=this.live_constraints,N=j.head.elt;j.pop();var U,V=N.component;if(V==V.parent)U=V;else{for(var H=V,W=null;H!=H.parent;){var q=H.parent;H.parent=W,W=H,H=q}for(;null!=W;){var X=W.parent;W.parent=H,W=X}U=H}V.island=U.island;var Y,K=V.island.comps;null==pn.zpp_pool?Y=new pn:(Y=pn.zpp_pool,pn.zpp_pool=Y.next,Y.next=null),Y.elt=V;var Z=Y;Z.next=K.head,K.head=Z,K.modified=!0,K.length++,V.waket>V.island.waket&&(V.island.waket=V.waket)}for(;null!=this.islands.next;){var J=this.islands,Q=J.next;if(J.pop(),Q.sleep)for(var $=Q.comps.head;null!=$;){var ee=$.elt;if(ee.isBody){var te=ee.body;te.velx=0,te.vely=0,te.angvel=0,ee.sleeping=!0;for(var ie=te.shapes.head;null!=ie;)this.bphase.sync(ie.elt),ie=ie.next;this.bodyCbSleep(te)}else this.constraintCbSleep(ee.constraint),ee.sleeping=!0;$=$.next}else{for(;null!=Q.comps.head;){var ne=Q.comps,re=ne.head.elt;if(ne.pop(),re.waket=Q.waket,re.isBody){var oe,ae=this.live,se=re.body;null==Vi.zpp_pool?oe=new Vi:(oe=Vi.zpp_pool,Vi.zpp_pool=oe.next,oe.next=null),oe.elt=se;var pe=oe;pe.next=ae.head,ae.head=pe,ae.modified=!0,ae.length++}else{var le,he=this.live_constraints,ue=re.constraint;null==Hi.zpp_pool?le=new Hi:(le=Hi.zpp_pool,Hi.zpp_pool=le.next,le.next=null),le.elt=ue;var de=le;de.next=he.head,he.head=de,he.modified=!0,he.length++}re.sleeping=!1,re.island=null,(re.parent=re).rank=0}Q.next=ni.zpp_pool,ni.zpp_pool=Q}}},si.prototype.sleepArbiters=function(){var e=null,t=this.c_arbiters_true,i=t.head,n=null!=this.c_arbiters_false;for(n&&null==i&&(n=!1,i=this.c_arbiters_false.head,t=this.c_arbiters_false,e=null);null!=i;){var r=i.elt;if(r.b1.component.sleeping&&r.b2.component.sleeping){var o,a;r.sleep_stamp=this.stamp,r.sleeping=!0,null==e?(a=(o=t.head).next,t.head=a,null==t.head&&(t.pushmod=!0)):(a=(o=e.next).next,null==(e.next=a)&&(t.pushmod=!0));var s=o;s.elt=null,s.next=ea.zpp_pool,ea.zpp_pool=s,t.modified=!0,t.length--,t.pushmod=!0,i=a,n&&null==i&&(n=!1,i=this.c_arbiters_false.head,t=this.c_arbiters_false,e=null)}else i=(e=i).next,n&&null==i&&(n=!1,i=this.c_arbiters_false.head,t=this.c_arbiters_false,e=null)}for(var p=null,l=this.f_arbiters,h=l.head;null!=h;){var u=h.elt;if(u.b1.component.sleeping&&u.b2.component.sleeping){var d,c;u.sleep_stamp=this.stamp,u.sleeping=!0,null==p?(c=(d=l.head).next,l.head=c,null==l.head&&(l.pushmod=!0)):(c=(d=p.next).next,null==(p.next=c)&&(l.pushmod=!0));var _=d;_.elt=null,_.next=Qo.zpp_pool,Qo.zpp_pool=_,l.modified=!0,l.length--,l.pushmod=!0,h=c}else h=(p=h).next}for(var y=null,x=this.s_arbiters,m=x.head;null!=m;){var g=m.elt;if(g.b1.component.sleeping&&g.b2.component.sleeping){var f,v;g.sleep_stamp=this.stamp,g.sleeping=!0,null==y?(v=(f=x.head).next,x.head=v,null==x.head&&(x.pushmod=!0)):(v=(f=y.next).next,null==(y.next=v)&&(x.pushmod=!0));var z=f;z.elt=null,z.next=$o.zpp_pool,$o.zpp_pool=z,x.modified=!0,x.length--,x.pushmod=!0,m=v}else m=(y=m).next}},si.prototype.static_validation=function(e){if(null!=e.shapes.head&&e.zip_aabb){e.zip_aabb=!1,e.aabb.minx=1/0,e.aabb.miny=1/0,e.aabb.maxx=-1/0,e.aabb.maxy=-1/0;for(var t=e.shapes.head;null!=t;){var i=t.elt;if(i.zip_aabb&&null!=i.body)if(i.zip_aabb=!1,0==i.type){var n=i.circle;if(n.zip_worldCOM&&null!=n.body){if(n.zip_worldCOM=!1,n.zip_localCOM){if(n.zip_localCOM=!1,1==n.type){var r=n.polygon;if(null==r.lverts.next.next)r.localCOMx=r.lverts.next.x,r.localCOMy=r.lverts.next.y;else if(null==r.lverts.next.next.next)r.localCOMx=r.lverts.next.x,r.localCOMy=r.lverts.next.y,r.localCOMx+=r.lverts.next.next.x,r.localCOMy+=r.lverts.next.next.y,r.localCOMx*=.5,r.localCOMy*=.5;else{r.localCOMx=0;var o=r.localCOMy=0,a=r.lverts.next,s=a,p=a=a.next;for(a=a.next;null!=a;){var l=a;o+=p.x*(l.y-s.y);var h=l.y*p.x-l.x*p.y;r.localCOMx+=(p.x+l.x)*h,r.localCOMy+=(p.y+l.y)*h,s=p,p=l,a=a.next}var u=a=r.lverts.next;o+=p.x*(u.y-s.y);var d=u.y*p.x-u.x*p.y;r.localCOMx+=(p.x+u.x)*d,r.localCOMy+=(p.y+u.y)*d,s=p;var c=a=a.next;o+=u.x*(c.y-s.y);var _=c.y*u.x-c.x*u.y;r.localCOMx+=(u.x+c.x)*_,r.localCOMy+=(u.y+c.y)*_;var y=o=1/(3*o);r.localCOMx*=y,r.localCOMy*=y}}null!=n.wrap_localCOM&&(n.wrap_localCOM.zpp_inner.x=n.localCOMx,n.wrap_localCOM.zpp_inner.y=n.localCOMy)}var x=n.body;x.zip_axis&&(x.zip_axis=!1,x.axisx=Math.sin(x.rot),x.axisy=Math.cos(x.rot)),n.worldCOMx=n.body.posx+(n.body.axisy*n.localCOMx-n.body.axisx*n.localCOMy),n.worldCOMy=n.body.posy+(n.localCOMx*n.body.axisx+n.localCOMy*n.body.axisy)}var m=n.radius,g=n.radius;n.aabb.minx=n.worldCOMx-m,n.aabb.miny=n.worldCOMy-g,n.aabb.maxx=n.worldCOMx+m,n.aabb.maxy=n.worldCOMy+g}else{var f=i.polygon;if(f.zip_gverts&&null!=f.body){f.zip_gverts=!1,f.validate_lverts();var v=f.body;v.zip_axis&&(v.zip_axis=!1,v.axisx=Math.sin(v.rot),v.axisy=Math.cos(v.rot));for(var z=f.lverts.next,w=f.gverts.next;null!=w;){var b=w,S=z;z=z.next,b.x=f.body.posx+(f.body.axisy*S.x-f.body.axisx*S.y),b.y=f.body.posy+(S.x*f.body.axisx+S.y*f.body.axisy),w=w.next}}var C=f.gverts.next;f.aabb.minx=C.x,f.aabb.miny=C.y,f.aabb.maxx=C.x,f.aabb.maxy=C.y;for(var M=f.gverts.next.next;null!=M;){var P=M;P.x<f.aabb.minx&&(f.aabb.minx=P.x),P.x>f.aabb.maxx&&(f.aabb.maxx=P.x),P.y<f.aabb.miny&&(f.aabb.miny=P.y),P.y>f.aabb.maxy&&(f.aabb.maxy=P.y),M=M.next}}var k=e.aabb,T=i.aabb;T.minx<k.minx&&(k.minx=T.minx),T.maxx>k.maxx&&(k.maxx=T.maxx),T.miny<k.miny&&(k.miny=T.miny),T.maxy>k.maxy&&(k.maxy=T.maxy),t=t.next}}e.validate_mass(),e.validate_inertia();for(var A=e.shapes.head;null!=A;){var O=A.elt;if(1==O.type){var E=O.polygon;E.zip_sanitation&&(E.zip_sanitation=!1,E.splice_collinear_real());var G=O.polygon;if(G.zip_gaxi&&null!=G.body){G.zip_gaxi=!1,G.validate_laxi();var D=G.body;if(D.zip_axis&&(D.zip_axis=!1,D.axisx=Math.sin(D.rot),D.axisy=Math.cos(D.rot)),G.zip_gverts&&null!=G.body){G.zip_gverts=!1,G.validate_lverts();var I=G.body;I.zip_axis&&(I.zip_axis=!1,I.axisx=Math.sin(I.rot),I.axisy=Math.cos(I.rot));for(var L=G.lverts.next,B=G.gverts.next;null!=B;){var R=B,F=L;L=L.next,R.x=G.body.posx+(G.body.axisy*F.x-G.body.axisx*F.y),R.y=G.body.posy+(F.x*G.body.axisx+F.y*G.body.axisy),B=B.next}}var j=G.edges.head,N=G.gverts.next,U=N;for(N=N.next;null!=N;){var V=N,H=j.elt;j=j.next,H.gp0=U,H.gp1=V,H.gnormx=G.body.axisy*H.lnormx-G.body.axisx*H.lnormy,H.gnormy=H.lnormx*G.body.axisx+H.lnormy*G.body.axisy,H.gprojection=G.body.posx*H.gnormx+G.body.posy*H.gnormy+H.lprojection,null!=H.wrap_gnorm&&(H.wrap_gnorm.zpp_inner.x=H.gnormx,H.wrap_gnorm.zpp_inner.y=H.gnormy),H.tp0=H.gp0.y*H.gnormx-H.gp0.x*H.gnormy,H.tp1=H.gp1.y*H.gnormx-H.gp1.x*H.gnormy,U=V,N=N.next}var W=j.elt;W.gp0=U,W.gp1=G.gverts.next,W.gnormx=G.body.axisy*W.lnormx-G.body.axisx*W.lnormy,W.gnormy=W.lnormx*G.body.axisx+W.lnormy*G.body.axisy,W.gprojection=G.body.posx*W.gnormx+G.body.posy*W.gnormy+W.lprojection,null!=W.wrap_gnorm&&(W.wrap_gnorm.zpp_inner.x=W.gnormx,W.wrap_gnorm.zpp_inner.y=W.gnormy),W.tp0=W.gp0.y*W.gnormx-W.gp0.x*W.gnormy,W.tp1=W.gp1.y*W.gnormx-W.gp1.x*W.gnormy}}A=A.next}e.sweepFrozen=!0},si.prototype.validation=function(){var e=this.cbsets;if(!e.cbsets.empty()){for(var t=e.cbsets.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(t.data.validate(),null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}for(var i=this.live.head;null!=i;){var n=i.elt;n.sweepRadius=0;for(var r=n.shapes.head;null!=r;){var o=r.elt;if(1==o.type){var a=o.polygon;a.zip_sanitation&&(a.zip_sanitation=!1,a.splice_collinear_real());var s=o.polygon;if(s.zip_gaxi&&null!=s.body){s.zip_gaxi=!1,s.validate_laxi();var p=s.body;if(p.zip_axis&&(p.zip_axis=!1,p.axisx=Math.sin(p.rot),p.axisy=Math.cos(p.rot)),s.zip_gverts&&null!=s.body){s.zip_gverts=!1,s.validate_lverts();var l=s.body;l.zip_axis&&(l.zip_axis=!1,l.axisx=Math.sin(l.rot),l.axisy=Math.cos(l.rot));for(var h=s.lverts.next,u=s.gverts.next;null!=u;){var d=u,c=h;h=h.next,d.x=s.body.posx+(s.body.axisy*c.x-s.body.axisx*c.y),d.y=s.body.posy+(c.x*s.body.axisx+c.y*s.body.axisy),u=u.next}}var _=s.edges.head,y=s.gverts.next,x=y;for(y=y.next;null!=y;){var m=y,g=_.elt;_=_.next,g.gp0=x,g.gp1=m,g.gnormx=s.body.axisy*g.lnormx-s.body.axisx*g.lnormy,g.gnormy=g.lnormx*s.body.axisx+g.lnormy*s.body.axisy,g.gprojection=s.body.posx*g.gnormx+s.body.posy*g.gnormy+g.lprojection,null!=g.wrap_gnorm&&(g.wrap_gnorm.zpp_inner.x=g.gnormx,g.wrap_gnorm.zpp_inner.y=g.gnormy),g.tp0=g.gp0.y*g.gnormx-g.gp0.x*g.gnormy,g.tp1=g.gp1.y*g.gnormx-g.gp1.x*g.gnormy,x=m,y=y.next}var f=_.elt;f.gp0=x,f.gp1=s.gverts.next,f.gnormx=s.body.axisy*f.lnormx-s.body.axisx*f.lnormy,f.gnormy=f.lnormx*s.body.axisx+f.lnormy*s.body.axisy,f.gprojection=s.body.posx*f.gnormx+s.body.posy*f.gnormy+f.lprojection,null!=f.wrap_gnorm&&(f.wrap_gnorm.zpp_inner.x=f.gnormx,f.wrap_gnorm.zpp_inner.y=f.gnormy),f.tp0=f.gp0.y*f.gnormx-f.gp0.x*f.gnormy,f.tp1=f.gp1.y*f.gnormx-f.gp1.x*f.gnormy}}o.validate_sweepRadius(),o.sweepRadius>n.sweepRadius&&(n.sweepRadius=o.sweepRadius),r=r.next}if(n.validate_mass(),n.validate_inertia(),null!=n.shapes.head){if(n.zip_aabb){n.zip_aabb=!1,n.aabb.minx=1/0,n.aabb.miny=1/0,n.aabb.maxx=-1/0,n.aabb.maxy=-1/0;for(var v=n.shapes.head;null!=v;){var z=v.elt;if(z.zip_aabb&&null!=z.body)if(z.zip_aabb=!1,0==z.type){var w=z.circle;if(w.zip_worldCOM&&null!=w.body){if(w.zip_worldCOM=!1,w.zip_localCOM){if(w.zip_localCOM=!1,1==w.type){var b=w.polygon;if(null==b.lverts.next.next)b.localCOMx=b.lverts.next.x,b.localCOMy=b.lverts.next.y;else if(null==b.lverts.next.next.next)b.localCOMx=b.lverts.next.x,b.localCOMy=b.lverts.next.y,b.localCOMx+=b.lverts.next.next.x,b.localCOMy+=b.lverts.next.next.y,b.localCOMx*=.5,b.localCOMy*=.5;else{b.localCOMx=0;var S=b.localCOMy=0,C=b.lverts.next,M=C,P=C=C.next;for(C=C.next;null!=C;){var k=C;S+=P.x*(k.y-M.y);var T=k.y*P.x-k.x*P.y;b.localCOMx+=(P.x+k.x)*T,b.localCOMy+=(P.y+k.y)*T,M=P,P=k,C=C.next}var A=C=b.lverts.next;S+=P.x*(A.y-M.y);var O=A.y*P.x-A.x*P.y;b.localCOMx+=(P.x+A.x)*O,b.localCOMy+=(P.y+A.y)*O,M=P;var E=C=C.next;S+=A.x*(E.y-M.y);var G=E.y*A.x-E.x*A.y;b.localCOMx+=(A.x+E.x)*G,b.localCOMy+=(A.y+E.y)*G;var D=S=1/(3*S);b.localCOMx*=D,b.localCOMy*=D}}null!=w.wrap_localCOM&&(w.wrap_localCOM.zpp_inner.x=w.localCOMx,w.wrap_localCOM.zpp_inner.y=w.localCOMy)}var I=w.body;I.zip_axis&&(I.zip_axis=!1,I.axisx=Math.sin(I.rot),I.axisy=Math.cos(I.rot)),w.worldCOMx=w.body.posx+(w.body.axisy*w.localCOMx-w.body.axisx*w.localCOMy),w.worldCOMy=w.body.posy+(w.localCOMx*w.body.axisx+w.localCOMy*w.body.axisy)}var L=w.radius,B=w.radius;w.aabb.minx=w.worldCOMx-L,w.aabb.miny=w.worldCOMy-B,w.aabb.maxx=w.worldCOMx+L,w.aabb.maxy=w.worldCOMy+B}else{var R=z.polygon;if(R.zip_gverts&&null!=R.body){R.zip_gverts=!1,R.validate_lverts();var F=R.body;F.zip_axis&&(F.zip_axis=!1,F.axisx=Math.sin(F.rot),F.axisy=Math.cos(F.rot));for(var j=R.lverts.next,N=R.gverts.next;null!=N;){var U=N,V=j;j=j.next,U.x=R.body.posx+(R.body.axisy*V.x-R.body.axisx*V.y),U.y=R.body.posy+(V.x*R.body.axisx+V.y*R.body.axisy),N=N.next}}var H=R.gverts.next;R.aabb.minx=H.x,R.aabb.miny=H.y,R.aabb.maxx=H.x,R.aabb.maxy=H.y;for(var W=R.gverts.next.next;null!=W;){var q=W;q.x<R.aabb.minx&&(R.aabb.minx=q.x),q.x>R.aabb.maxx&&(R.aabb.maxx=q.x),q.y<R.aabb.miny&&(R.aabb.miny=q.y),q.y>R.aabb.maxy&&(R.aabb.maxy=q.y),W=W.next}}var X=n.aabb,Y=z.aabb;Y.minx<X.minx&&(X.minx=Y.minx),Y.maxx>X.maxx&&(X.maxx=Y.maxx),Y.miny<X.miny&&(X.miny=Y.miny),Y.maxy>X.maxy&&(X.maxy=Y.maxy),v=v.next}}n.validate_worldCOM()}if(n.validate_gravMass(),n.zip_axis&&(n.zip_axis=!1,n.axisx=Math.sin(n.rot),n.axisy=Math.cos(n.rot)),n.component.woken&&null!=n.cbSet)for(var K=n.cbSet.bodylisteners.head;null!=K;){var Z=K.elt;if(2==Z.event){var J=this.push_callback(Z);J.event=2,J.body=n,K=K.next}else K=K.next}n.component.woken=!1;for(var Q=n.shapes.head;null!=Q;)this.bphase.sync(Q.elt),Q=Q.next;i=i.next}for(var $=this.kinematics.head;null!=$;){var ee=$.elt;ee.sweepRadius=0;for(var te=ee.shapes.head;null!=te;){var ie=te.elt;if(1==ie.type){var ne=ie.polygon;ne.zip_sanitation&&(ne.zip_sanitation=!1,ne.splice_collinear_real());var re=ie.polygon;if(re.zip_gaxi&&null!=re.body){re.zip_gaxi=!1,re.validate_laxi();var oe=re.body;if(oe.zip_axis&&(oe.zip_axis=!1,oe.axisx=Math.sin(oe.rot),oe.axisy=Math.cos(oe.rot)),re.zip_gverts&&null!=re.body){re.zip_gverts=!1,re.validate_lverts();var ae=re.body;ae.zip_axis&&(ae.zip_axis=!1,ae.axisx=Math.sin(ae.rot),ae.axisy=Math.cos(ae.rot));for(var se=re.lverts.next,pe=re.gverts.next;null!=pe;){var le=pe,he=se;se=se.next,le.x=re.body.posx+(re.body.axisy*he.x-re.body.axisx*he.y),le.y=re.body.posy+(he.x*re.body.axisx+he.y*re.body.axisy),pe=pe.next}}var ue=re.edges.head,de=re.gverts.next,ce=de;for(de=de.next;null!=de;){var _e=de,ye=ue.elt;ue=ue.next,ye.gp0=ce,ye.gp1=_e,ye.gnormx=re.body.axisy*ye.lnormx-re.body.axisx*ye.lnormy,ye.gnormy=ye.lnormx*re.body.axisx+ye.lnormy*re.body.axisy,ye.gprojection=re.body.posx*ye.gnormx+re.body.posy*ye.gnormy+ye.lprojection,null!=ye.wrap_gnorm&&(ye.wrap_gnorm.zpp_inner.x=ye.gnormx,ye.wrap_gnorm.zpp_inner.y=ye.gnormy),ye.tp0=ye.gp0.y*ye.gnormx-ye.gp0.x*ye.gnormy,ye.tp1=ye.gp1.y*ye.gnormx-ye.gp1.x*ye.gnormy,ce=_e,de=de.next}var xe=ue.elt;xe.gp0=ce,xe.gp1=re.gverts.next,xe.gnormx=re.body.axisy*xe.lnormx-re.body.axisx*xe.lnormy,xe.gnormy=xe.lnormx*re.body.axisx+xe.lnormy*re.body.axisy,xe.gprojection=re.body.posx*xe.gnormx+re.body.posy*xe.gnormy+xe.lprojection,null!=xe.wrap_gnorm&&(xe.wrap_gnorm.zpp_inner.x=xe.gnormx,xe.wrap_gnorm.zpp_inner.y=xe.gnormy),xe.tp0=xe.gp0.y*xe.gnormx-xe.gp0.x*xe.gnormy,xe.tp1=xe.gp1.y*xe.gnormx-xe.gp1.x*xe.gnormy}}ie.validate_sweepRadius(),ie.sweepRadius>ee.sweepRadius&&(ee.sweepRadius=ie.sweepRadius),te=te.next}if(ee.validate_mass(),ee.validate_inertia(),null!=ee.shapes.head){if(ee.zip_aabb){ee.zip_aabb=!1,ee.aabb.minx=1/0,ee.aabb.miny=1/0,ee.aabb.maxx=-1/0,ee.aabb.maxy=-1/0;for(var me=ee.shapes.head;null!=me;){var ge=me.elt;if(ge.zip_aabb&&null!=ge.body)if(ge.zip_aabb=!1,0==ge.type){var fe=ge.circle;if(fe.zip_worldCOM&&null!=fe.body){if(fe.zip_worldCOM=!1,fe.zip_localCOM){if(fe.zip_localCOM=!1,1==fe.type){var ve=fe.polygon;if(null==ve.lverts.next.next)ve.localCOMx=ve.lverts.next.x,ve.localCOMy=ve.lverts.next.y;else if(null==ve.lverts.next.next.next)ve.localCOMx=ve.lverts.next.x,ve.localCOMy=ve.lverts.next.y,ve.localCOMx+=ve.lverts.next.next.x,ve.localCOMy+=ve.lverts.next.next.y,ve.localCOMx*=.5,ve.localCOMy*=.5;else{ve.localCOMx=0;var ze=ve.localCOMy=0,we=ve.lverts.next,be=we,Se=we=we.next;for(we=we.next;null!=we;){var Ce=we;ze+=Se.x*(Ce.y-be.y);var Me=Ce.y*Se.x-Ce.x*Se.y;ve.localCOMx+=(Se.x+Ce.x)*Me,ve.localCOMy+=(Se.y+Ce.y)*Me,be=Se,Se=Ce,we=we.next}var Pe=we=ve.lverts.next;ze+=Se.x*(Pe.y-be.y);var ke=Pe.y*Se.x-Pe.x*Se.y;ve.localCOMx+=(Se.x+Pe.x)*ke,ve.localCOMy+=(Se.y+Pe.y)*ke,be=Se;var Te=we=we.next;ze+=Pe.x*(Te.y-be.y);var Ae=Te.y*Pe.x-Te.x*Pe.y;ve.localCOMx+=(Pe.x+Te.x)*Ae,ve.localCOMy+=(Pe.y+Te.y)*Ae;var Oe=ze=1/(3*ze);ve.localCOMx*=Oe,ve.localCOMy*=Oe}}null!=fe.wrap_localCOM&&(fe.wrap_localCOM.zpp_inner.x=fe.localCOMx,fe.wrap_localCOM.zpp_inner.y=fe.localCOMy)}var Ee=fe.body;Ee.zip_axis&&(Ee.zip_axis=!1,Ee.axisx=Math.sin(Ee.rot),Ee.axisy=Math.cos(Ee.rot)),fe.worldCOMx=fe.body.posx+(fe.body.axisy*fe.localCOMx-fe.body.axisx*fe.localCOMy),fe.worldCOMy=fe.body.posy+(fe.localCOMx*fe.body.axisx+fe.localCOMy*fe.body.axisy)}var Ge=fe.radius,De=fe.radius;fe.aabb.minx=fe.worldCOMx-Ge,fe.aabb.miny=fe.worldCOMy-De,fe.aabb.maxx=fe.worldCOMx+Ge,fe.aabb.maxy=fe.worldCOMy+De}else{var Ie=ge.polygon;if(Ie.zip_gverts&&null!=Ie.body){Ie.zip_gverts=!1,Ie.validate_lverts();var Le=Ie.body;Le.zip_axis&&(Le.zip_axis=!1,Le.axisx=Math.sin(Le.rot),Le.axisy=Math.cos(Le.rot));for(var Be=Ie.lverts.next,Re=Ie.gverts.next;null!=Re;){var Fe=Re,je=Be;Be=Be.next,Fe.x=Ie.body.posx+(Ie.body.axisy*je.x-Ie.body.axisx*je.y),Fe.y=Ie.body.posy+(je.x*Ie.body.axisx+je.y*Ie.body.axisy),Re=Re.next}}var Ne=Ie.gverts.next;Ie.aabb.minx=Ne.x,Ie.aabb.miny=Ne.y,Ie.aabb.maxx=Ne.x,Ie.aabb.maxy=Ne.y;for(var Ue=Ie.gverts.next.next;null!=Ue;){var Ve=Ue;Ve.x<Ie.aabb.minx&&(Ie.aabb.minx=Ve.x),Ve.x>Ie.aabb.maxx&&(Ie.aabb.maxx=Ve.x),Ve.y<Ie.aabb.miny&&(Ie.aabb.miny=Ve.y),Ve.y>Ie.aabb.maxy&&(Ie.aabb.maxy=Ve.y),Ue=Ue.next}}var He=ee.aabb,We=ge.aabb;We.minx<He.minx&&(He.minx=We.minx),We.maxx>He.maxx&&(He.maxx=We.maxx),We.miny<He.miny&&(He.miny=We.miny),We.maxy>He.maxy&&(He.maxy=We.maxy),me=me.next}}ee.validate_worldCOM()}ee.validate_gravMass(),ee.zip_axis&&(ee.zip_axis=!1,ee.axisx=Math.sin(ee.rot),ee.axisy=Math.cos(ee.rot));for(var qe=ee.shapes.head;null!=qe;)this.bphase.sync(qe.elt),qe=qe.next;$=$.next}for(var Xe=this.live_constraints.head;null!=Xe;){var Ye=Xe.elt;if(Ye.active){if(Ye.component.woken&&null!=Ye.cbSet)for(var Ke=Ye.cbSet.conlisteners.head;null!=Ke;){var Ze=Ke.elt;if(2==Ze.event){var Je=this.push_callback(Ze);Je.event=2,Je.constraint=Ye,Ke=Ke.next}else Ke=Ke.next}Ye.component.woken=!1}Xe=Xe.next}},si.prototype.updateVel=function(e){for(var t=1-e*this.global_lin_drag,i=1-e*this.global_ang_drag,n=this.live.head;null!=n;){var r=n.elt;if(0!=r.smass){var o=e*r.imass;r.velx=t*r.velx+(r.forcex+this.gravityx*r.gravMass)*o,r.vely=t*r.vely+(r.forcey+this.gravityy*r.gravMass)*o}if(0!=r.sinertia){var a,s;a=r.worldCOMx-r.posx,s=r.worldCOMy-r.posy,r.angvel=i*r.angvel+(r.torque+(this.gravityy*a-this.gravityx*s)*r.gravMass)*e*r.iinertia}n=n.next}},si.prototype.updatePos=function(e){for(var t=2*Math.PI/e,i=this.live.head;null!=i;){var n=i.elt;n.pre_posx=n.posx,n.pre_posy=n.posy,n.pre_rot=n.rot,n.sweepTime=0,n.sweep_angvel=n.angvel%t;var r=e-n.sweepTime;if(0!=r&&(n.sweepTime=e,n.posx+=n.velx*r,n.posy+=n.vely*r,0!=n.angvel)){var o=n.sweep_angvel*r;if(n.rot+=o,1e-4<o*o)n.axisx=Math.sin(n.rot),n.axisy=Math.cos(n.rot);else{var a=o*o,s=1-.5*a,p=1-a*a/8,l=(s*n.axisx+o*n.axisy)*p;n.axisy=(s*n.axisy-o*n.axisx)*p,n.axisx=l}}if(n.disableCCD)n.sweepFrozen=!0,n.bullet=!1;else{var h=Qs.staticCCDLinearThreshold*n.sweepRadius,u=Qs.staticCCDAngularThreshold;if((n.velx*n.velx+n.vely*n.vely)*e*e>h*h||n.angvel*n.angvel*e*e>u*u||3==n.type){var d=n.sweep_angvel;d<0&&(d=-d);for(var c=1/d,_=n.shapes.head;null!=_;){var y=_.elt,x=y.aabb,m=x.minx,g=x.miny,f=x.maxx,v=x.maxy,z=d*e*y.sweepCoef*.008333333333333333|0;8<z&&(z=8);var w=d*e/z,b=e-n.sweepTime;if(0!=b&&(n.sweepTime=e,n.posx+=n.velx*b,n.posy+=n.vely*b,0!=n.angvel)){var S=n.sweep_angvel*b;if(n.rot+=S,1e-4<S*S)n.axisx=Math.sin(n.rot),n.axisy=Math.cos(n.rot);else{var C=S*S,M=1-.5*C,P=1-C*C/8,k=(M*n.axisx+S*n.axisy)*P;n.axisy=(M*n.axisy-S*n.axisx)*P,n.axisx=k}}if(0==y.type){var T=y.circle;T.worldCOMx=T.body.posx+(T.body.axisy*T.localCOMx-T.body.axisx*T.localCOMy),T.worldCOMy=T.body.posy+(T.localCOMx*T.body.axisx+T.localCOMy*T.body.axisy),T.aabb.minx=T.worldCOMx-T.radius,T.aabb.miny=T.worldCOMy-T.radius,T.aabb.maxx=T.worldCOMx+T.radius,T.aabb.maxy=T.worldCOMy+T.radius}else{var A=y.polygon,O=A.lverts.next,E=A.gverts.next,G=O;O=O.next,E.x=A.body.posx+(A.body.axisy*G.x-A.body.axisx*G.y),E.y=A.body.posy+(G.x*A.body.axisx+G.y*A.body.axisy),A.aabb.minx=E.x,A.aabb.miny=E.y,A.aabb.maxx=E.x,A.aabb.maxy=E.y;for(var D=A.gverts.next.next;null!=D;){var I=D,L=O;O=O.next,I.x=A.body.posx+(A.body.axisy*L.x-A.body.axisx*L.y),I.y=A.body.posy+(L.x*A.body.axisx+L.y*A.body.axisy),I.x<A.aabb.minx&&(A.aabb.minx=I.x),I.x>A.aabb.maxx&&(A.aabb.maxx=I.x),I.y<A.aabb.miny&&(A.aabb.miny=I.y),I.y>A.aabb.maxy&&(A.aabb.maxy=I.y),D=D.next}}m<x.minx?x.minx=m:m=x.minx,g<x.miny?x.miny=g:g=x.miny,f>x.maxx?x.maxx=f:f=x.maxx,v>x.maxy?x.maxy=v:v=x.maxy;for(var B=1,R=z;B<R;){var F=w*B++*c,j=F-n.sweepTime;if(0!=j&&(n.sweepTime=F,n.posx+=n.velx*j,n.posy+=n.vely*j,0!=n.angvel)){var N=n.sweep_angvel*j;if(n.rot+=N,1e-4<N*N)n.axisx=Math.sin(n.rot),n.axisy=Math.cos(n.rot);else{var U=N*N,V=1-.5*U,H=1-U*U/8,W=(V*n.axisx+N*n.axisy)*H;n.axisy=(V*n.axisy-N*n.axisx)*H,n.axisx=W}}if(0==y.type){var q=y.circle;q.worldCOMx=q.body.posx+(q.body.axisy*q.localCOMx-q.body.axisx*q.localCOMy),q.worldCOMy=q.body.posy+(q.localCOMx*q.body.axisx+q.localCOMy*q.body.axisy),q.aabb.minx=q.worldCOMx-q.radius,q.aabb.miny=q.worldCOMy-q.radius,q.aabb.maxx=q.worldCOMx+q.radius,q.aabb.maxy=q.worldCOMy+q.radius}else{var X=y.polygon,Y=X.lverts.next,K=X.gverts.next,Z=Y;Y=Y.next,K.x=X.body.posx+(X.body.axisy*Z.x-X.body.axisx*Z.y),K.y=X.body.posy+(Z.x*X.body.axisx+Z.y*X.body.axisy),X.aabb.minx=K.x,X.aabb.miny=K.y,X.aabb.maxx=K.x,X.aabb.maxy=K.y;for(var J=X.gverts.next.next;null!=J;){var Q=J,$=Y;Y=Y.next,Q.x=X.body.posx+(X.body.axisy*$.x-X.body.axisx*$.y),Q.y=X.body.posy+($.x*X.body.axisx+$.y*X.body.axisy),Q.x<X.aabb.minx&&(X.aabb.minx=Q.x),Q.x>X.aabb.maxx&&(X.aabb.maxx=Q.x),Q.y<X.aabb.miny&&(X.aabb.miny=Q.y),Q.y>X.aabb.maxy&&(X.aabb.maxy=Q.y),J=J.next}}m<x.minx?x.minx=m:m=x.minx,g<x.miny?x.miny=g:g=x.miny,f>x.maxx?x.maxx=f:f=x.maxx,v>x.maxy?x.maxy=v:v=x.maxy}this.bphase.sync(y),_=_.next}if(n.sweepFrozen=!1,2==n.type&&n.bulletEnabled){var ee=Qs.bulletCCDLinearThreshold*n.sweepRadius,te=Qs.bulletCCDAngularThreshold;((n.velx*n.velx+n.vely*n.vely)*e*e>ee*ee||n.angvel*n.angvel*e*e>te*te)&&(n.bullet=!0)}}else n.sweepFrozen=!0,n.bullet=!1}i=i.next}for(var ie=this.kinematics.head;null!=ie;){var ne=ie.elt;ne.pre_posx=ne.posx,ne.pre_posy=ne.posy,ne.pre_rot=ne.rot,ne.sweepTime=0,ne.sweep_angvel=ne.angvel%t;var re=e-ne.sweepTime;if(0!=re&&(ne.sweepTime=e,ne.posx+=ne.velx*re,ne.posy+=ne.vely*re,0!=ne.angvel)){var oe=ne.sweep_angvel*re;if(ne.rot+=oe,1e-4<oe*oe)ne.axisx=Math.sin(ne.rot),ne.axisy=Math.cos(ne.rot);else{var ae=oe*oe,se=1-.5*ae,pe=1-ae*ae/8,le=(se*ne.axisx+oe*ne.axisy)*pe;ne.axisy=(se*ne.axisy-oe*ne.axisx)*pe,ne.axisx=le}}if(ne.disableCCD)ne.sweepFrozen=!0,ne.bullet=!1;else{var he=Qs.staticCCDLinearThreshold*ne.sweepRadius,ue=Qs.staticCCDAngularThreshold;if((ne.velx*ne.velx+ne.vely*ne.vely)*e*e>he*he||ne.angvel*ne.angvel*e*e>ue*ue||3==ne.type){var de=ne.sweep_angvel;de<0&&(de=-de);for(var ce=1/de,_e=ne.shapes.head;null!=_e;){var ye=_e.elt,xe=ye.aabb,me=xe.minx,ge=xe.miny,fe=xe.maxx,ve=xe.maxy,ze=de*e*ye.sweepCoef*.008333333333333333|0;8<ze&&(ze=8);var we=de*e/ze,be=e-ne.sweepTime;if(0!=be&&(ne.sweepTime=e,ne.posx+=ne.velx*be,ne.posy+=ne.vely*be,0!=ne.angvel)){var Se=ne.sweep_angvel*be;if(ne.rot+=Se,1e-4<Se*Se)ne.axisx=Math.sin(ne.rot),ne.axisy=Math.cos(ne.rot);else{var Ce=Se*Se,Me=1-.5*Ce,Pe=1-Ce*Ce/8,ke=(Me*ne.axisx+Se*ne.axisy)*Pe;ne.axisy=(Me*ne.axisy-Se*ne.axisx)*Pe,ne.axisx=ke}}if(0==ye.type){var Te=ye.circle;Te.worldCOMx=Te.body.posx+(Te.body.axisy*Te.localCOMx-Te.body.axisx*Te.localCOMy),Te.worldCOMy=Te.body.posy+(Te.localCOMx*Te.body.axisx+Te.localCOMy*Te.body.axisy),Te.aabb.minx=Te.worldCOMx-Te.radius,Te.aabb.miny=Te.worldCOMy-Te.radius,Te.aabb.maxx=Te.worldCOMx+Te.radius,Te.aabb.maxy=Te.worldCOMy+Te.radius}else{var Ae=ye.polygon,Oe=Ae.lverts.next,Ee=Ae.gverts.next,Ge=Oe;Oe=Oe.next,Ee.x=Ae.body.posx+(Ae.body.axisy*Ge.x-Ae.body.axisx*Ge.y),Ee.y=Ae.body.posy+(Ge.x*Ae.body.axisx+Ge.y*Ae.body.axisy),Ae.aabb.minx=Ee.x,Ae.aabb.miny=Ee.y,Ae.aabb.maxx=Ee.x,Ae.aabb.maxy=Ee.y;for(var De=Ae.gverts.next.next;null!=De;){var Ie=De,Le=Oe;Oe=Oe.next,Ie.x=Ae.body.posx+(Ae.body.axisy*Le.x-Ae.body.axisx*Le.y),Ie.y=Ae.body.posy+(Le.x*Ae.body.axisx+Le.y*Ae.body.axisy),Ie.x<Ae.aabb.minx&&(Ae.aabb.minx=Ie.x),Ie.x>Ae.aabb.maxx&&(Ae.aabb.maxx=Ie.x),Ie.y<Ae.aabb.miny&&(Ae.aabb.miny=Ie.y),Ie.y>Ae.aabb.maxy&&(Ae.aabb.maxy=Ie.y),De=De.next}}me<xe.minx?xe.minx=me:me=xe.minx,ge<xe.miny?xe.miny=ge:ge=xe.miny,fe>xe.maxx?xe.maxx=fe:fe=xe.maxx,ve>xe.maxy?xe.maxy=ve:ve=xe.maxy;for(var Be=1,Re=ze;Be<Re;){var Fe=we*Be++*ce,je=Fe-ne.sweepTime;if(0!=je&&(ne.sweepTime=Fe,ne.posx+=ne.velx*je,ne.posy+=ne.vely*je,0!=ne.angvel)){var Ne=ne.sweep_angvel*je;if(ne.rot+=Ne,1e-4<Ne*Ne)ne.axisx=Math.sin(ne.rot),ne.axisy=Math.cos(ne.rot);else{var Ue=Ne*Ne,Ve=1-.5*Ue,He=1-Ue*Ue/8,We=(Ve*ne.axisx+Ne*ne.axisy)*He;ne.axisy=(Ve*ne.axisy-Ne*ne.axisx)*He,ne.axisx=We}}if(0==ye.type){var qe=ye.circle;qe.worldCOMx=qe.body.posx+(qe.body.axisy*qe.localCOMx-qe.body.axisx*qe.localCOMy),qe.worldCOMy=qe.body.posy+(qe.localCOMx*qe.body.axisx+qe.localCOMy*qe.body.axisy),qe.aabb.minx=qe.worldCOMx-qe.radius,qe.aabb.miny=qe.worldCOMy-qe.radius,qe.aabb.maxx=qe.worldCOMx+qe.radius,qe.aabb.maxy=qe.worldCOMy+qe.radius}else{var Xe=ye.polygon,Ye=Xe.lverts.next,Ke=Xe.gverts.next,Ze=Ye;Ye=Ye.next,Ke.x=Xe.body.posx+(Xe.body.axisy*Ze.x-Xe.body.axisx*Ze.y),Ke.y=Xe.body.posy+(Ze.x*Xe.body.axisx+Ze.y*Xe.body.axisy),Xe.aabb.minx=Ke.x,Xe.aabb.miny=Ke.y,Xe.aabb.maxx=Ke.x,Xe.aabb.maxy=Ke.y;for(var Je=Xe.gverts.next.next;null!=Je;){var Qe=Je,$e=Ye;Ye=Ye.next,Qe.x=Xe.body.posx+(Xe.body.axisy*$e.x-Xe.body.axisx*$e.y),Qe.y=Xe.body.posy+($e.x*Xe.body.axisx+$e.y*Xe.body.axisy),Qe.x<Xe.aabb.minx&&(Xe.aabb.minx=Qe.x),Qe.x>Xe.aabb.maxx&&(Xe.aabb.maxx=Qe.x),Qe.y<Xe.aabb.miny&&(Xe.aabb.miny=Qe.y),Qe.y>Xe.aabb.maxy&&(Xe.aabb.maxy=Qe.y),Je=Je.next}}me<xe.minx?xe.minx=me:me=xe.minx,ge<xe.miny?xe.miny=ge:ge=xe.miny,fe>xe.maxx?xe.maxx=fe:fe=xe.maxx,ve>xe.maxy?xe.maxy=ve:ve=xe.maxy}this.bphase.sync(ye),_e=_e.next}if(ne.sweepFrozen=!1,2==ne.type&&ne.bulletEnabled){var et=Qs.bulletCCDLinearThreshold*ne.sweepRadius,tt=Qs.bulletCCDAngularThreshold;((ne.velx*ne.velx+ne.vely*ne.vely)*e*e>et*et||ne.angvel*ne.angvel*e*e>tt*tt)&&(ne.bullet=!0)}}else ne.sweepFrozen=!0,ne.bullet=!1}ie=ie.next}},si.prototype.continuous=null,si.prototype.presteparb=function(e,t,i){null==i&&(i=!1);if(!e.cleared&&e.b1.component.sleeping&&e.b2.component.sleeping)return e.sleep_stamp=this.stamp,e.sleeping=!0;if(!e.cleared||0!=e.present||e.intchange){var n=!i&&e.up_stamp==this.stamp-1&&!e.cleared&&!e.intchange,r=e.fresh&&!e.cleared&&!e.intchange;if(n&&(e.endGenerated=this.stamp),r||n||e.cleared||e.intchange){for(var o=e.ws1,a=e.ws2,s=this.mrca1;null!=s.head;){var p=s.head;s.head=p.next,p.elt=null,p.next=Jo.zpp_pool,Jo.zpp_pool=p,null==s.head&&(s.pushmod=!0),s.modified=!0,s.length--}s.pushmod=!0;for(var l=this.mrca2;null!=l.head;){var h=l.head;l.head=h.next,h.elt=null,h.next=Jo.zpp_pool,Jo.zpp_pool=h,null==l.head&&(l.pushmod=!0),l.modified=!0,l.length--}if(l.pushmod=!0,null!=o.cbSet){var u,d=this.mrca1;null==Jo.zpp_pool?u=new Jo:(u=Jo.zpp_pool,Jo.zpp_pool=u.next,u.next=null),u.elt=o;var c=u;c.next=d.head,d.head=c,d.modified=!0,d.length++}if(null!=o.body.cbSet){var _,y=this.mrca1,x=o.body;null==Jo.zpp_pool?_=new Jo:(_=Jo.zpp_pool,Jo.zpp_pool=_.next,_.next=null),_.elt=x;var m=_;m.next=y.head,y.head=m,y.modified=!0,y.length++}if(null!=a.cbSet){var g,f=this.mrca2;null==Jo.zpp_pool?g=new Jo:(g=Jo.zpp_pool,Jo.zpp_pool=g.next,g.next=null),g.elt=a;var v=g;v.next=f.head,f.head=v,f.modified=!0,f.length++}if(null!=a.body.cbSet){var z,w=this.mrca2,b=a.body;null==Jo.zpp_pool?z=new Jo:(z=Jo.zpp_pool,Jo.zpp_pool=z.next,z.next=null),z.elt=b;var S=z;S.next=w.head,w.head=S,w.modified=!0,w.length++}for(var C=o.body.compound,M=a.body.compound;C!=M;)if((null==C?0:C.depth)<(null==M?0:M.depth)){if(null!=M.cbSet){var P,k=this.mrca2;null==Jo.zpp_pool?P=new Jo:(P=Jo.zpp_pool,Jo.zpp_pool=P.next,P.next=null),P.elt=M;var T=P;T.next=k.head,k.head=T,k.modified=!0,k.length++}M=M.compound}else{if(null!=C.cbSet){var A,O=this.mrca1;null==Jo.zpp_pool?A=new Jo:(A=Jo.zpp_pool,Jo.zpp_pool=A.next,A.next=null),A.elt=C;var E=A;E.next=O.head,O.head=E,O.modified=!0,O.length++}C=C.compound}for(var G=this.mrca1.head;null!=G;){for(var D=G.elt,I=this.mrca2.head;null!=I;){for(var L,B=I.elt,R=D.cbSet,F=B.cbSet,j=null,N=(R.cbpairs.length<F.cbpairs.length?R.cbpairs:F.cbpairs).head;null!=N;){var U=N.elt;if(U.a==R&&U.b==F||U.a==F&&U.b==R){j=U;break}N=N.next}if(null==j)null==No.zpp_pool?L=new No:(L=No.zpp_pool,No.zpp_pool=L.next,L.next=null),L.zip_listeners=!0,jo.setlt(R,F)?(L.a=R,L.b=F):(L.a=F,L.b=R),j=L,R.cbpairs.add(j),F!=R&&F.cbpairs.add(j);if(j.zip_listeners&&(j.zip_listeners=!1,j.__validate()),null!=j.listeners.head){var V=Xo.get(D,B);if(r||e.intchange){null==V&&(V=Yo.get(D,B),this.add_callbackset(V));for(var H,W=null,q=(R.cbpairs.length<F.cbpairs.length?R.cbpairs:F.cbpairs).head;null!=q;){var X=q.elt;if(X.a==R&&X.b==F||X.a==F&&X.b==R){W=X;break}q=q.next}if(null==W)null==No.zpp_pool?H=new No:(H=No.zpp_pool,No.zpp_pool=H.next,H.next=null),H.zip_listeners=!0,jo.setlt(R,F)?(H.a=R,H.b=F):(H.a=F,H.b=R),W=H,R.cbpairs.add(W),F!=R&&F.cbpairs.add(W);W.zip_listeners&&(W.zip_listeners=!1,W.__validate());for(var Y,K,Z=W.listeners.head;null!=Z;){var J=Z.elt;if(0==J.event&&0!=(J.itype&e.type)&&V.empty_arb(J.itype)){var Q=this.push_callback(J);Q.event=0;var $,ee=V.int1,te=V.int2,ie=J.options1,ne=ee.cbTypes;if(ie.nonemptyintersection(ne,ie.includes)&&!ie.nonemptyintersection(ne,ie.excludes)){var re=J.options2,oe=te.cbTypes;$=!!re.nonemptyintersection(oe,re.includes)&&!re.nonemptyintersection(oe,re.excludes)}else $=!1;$?(Q.int1=ee,Q.int2=te):(Q.int1=te,Q.int2=ee),Q.set=V}Z=Z.next}K=!1;for(var ae=V.arbiters.head;null!=ae;){if(ae.elt==e){K=!0;break}ae=ae.next}if(K)Y=!1;else{var se,pe=V.arbiters;null==Ko.zpp_pool?se=new Ko:(se=Ko.zpp_pool,Ko.zpp_pool=se.next,se.next=null),se.elt=e;var le=se;le.next=pe.head,pe.head=le,pe.modified=!0,pe.length++,Y=!0}Y&&e.present++}else{e.present--,V.remove_arb(e);for(var he,ue=null,de=(R.cbpairs.length<F.cbpairs.length?R.cbpairs:F.cbpairs).head;null!=de;){var ce=de.elt;if(ce.a==R&&ce.b==F||ce.a==F&&ce.b==R){ue=ce;break}de=de.next}if(null==ue)null==No.zpp_pool?he=new No:(he=No.zpp_pool,No.zpp_pool=he.next,he.next=null),he.zip_listeners=!0,jo.setlt(R,F)?(he.a=R,he.b=F):(he.a=F,he.b=R),ue=he,R.cbpairs.add(ue),F!=R&&F.cbpairs.add(ue);ue.zip_listeners&&(ue.zip_listeners=!1,ue.__validate());for(var _e=ue.listeners.head;null!=_e;){var ye=_e.elt;if(1==ye.event&&0!=(ye.itype&e.type)&&V.empty_arb(ye.itype)){var xe=this.push_callback(ye);xe.event=1;var me,ge=V.int1,fe=V.int2,ve=ye.options1,ze=ge.cbTypes;if(ve.nonemptyintersection(ze,ve.includes)&&!ve.nonemptyintersection(ze,ve.excludes)){var we=ye.options2,be=fe.cbTypes;me=!!we.nonemptyintersection(be,we.includes)&&!we.nonemptyintersection(be,we.excludes)}else me=!1;me?(xe.int1=ge,xe.int2=fe):(xe.int1=fe,xe.int2=ge),xe.set=V}_e=_e.next}null==V.arbiters.head&&this.remove_callbackset(V)}I=I.next}else I=I.next}G=G.next}}e.fresh=!1,e.intchange=!1}if(e.cleared||e.up_stamp+(e.type==ln.COL?Qs.arbiterExpirationDelay:0)<this.stamp){if(e.type==ln.SENSOR){var Se=e.sensorarb;if(!Se.cleared){for(var Ce=Se.b1.arbiters,Me=null,Pe=Ce.head;null!=Pe;){if(Pe.elt==Se){var ke,Te;null==Me?(Te=(ke=Ce.head).next,Ce.head=Te,null==Ce.head&&(Ce.pushmod=!0)):(Te=(ke=Me.next).next,null==(Me.next=Te)&&(Ce.pushmod=!0));var Ae=ke;Ae.elt=null,Ae.next=Ko.zpp_pool,Ko.zpp_pool=Ae,Ce.modified=!0,Ce.length--,Ce.pushmod=!0;break}Pe=(Me=Pe).next}for(var Oe=Se.b2.arbiters,Ee=null,Ge=Oe.head;null!=Ge;){if(Ge.elt==Se){var De,Ie;null==Ee?(Ie=(De=Oe.head).next,Oe.head=Ie,null==Oe.head&&(Oe.pushmod=!0)):(Ie=(De=Ee.next).next,null==(Ee.next=Ie)&&(Oe.pushmod=!0));var Le=De;Le.elt=null,Le.next=Ko.zpp_pool,Ko.zpp_pool=Le,Oe.modified=!0,Oe.length--,Oe.pushmod=!0;break}Ge=(Ee=Ge).next}null!=Se.pair&&(Se.pair.arb=null,Se.pair=null)}Se.b1=Se.b2=null,Se.active=!1,Se.intchange=!1,Se.next=Vo.zpp_pool,Vo.zpp_pool=Se}else if(e.type==ln.FLUID){var Be=e.fluidarb;if(!Be.cleared){for(var Re=Be.b1.arbiters,Fe=null,je=Re.head;null!=je;){if(je.elt==Be){var Ne,Ue;null==Fe?(Ue=(Ne=Re.head).next,Re.head=Ue,null==Re.head&&(Re.pushmod=!0)):(Ue=(Ne=Fe.next).next,null==(Fe.next=Ue)&&(Re.pushmod=!0));var Ve=Ne;Ve.elt=null,Ve.next=Ko.zpp_pool,Ko.zpp_pool=Ve,Re.modified=!0,Re.length--,Re.pushmod=!0;break}je=(Fe=je).next}for(var He=Be.b2.arbiters,We=null,qe=He.head;null!=qe;){if(qe.elt==Be){var Xe,Ye;null==We?(Ye=(Xe=He.head).next,He.head=Ye,null==He.head&&(He.pushmod=!0)):(Ye=(Xe=We.next).next,null==(We.next=Ye)&&(He.pushmod=!0));var Ke=Xe;Ke.elt=null,Ke.next=Ko.zpp_pool,Ko.zpp_pool=Ke,He.modified=!0,He.length--,He.pushmod=!0;break}qe=(We=qe).next}null!=Be.pair&&(Be.pair.arb=null,Be.pair=null)}Be.b1=Be.b2=null,Be.active=!1,Be.intchange=!1,Be.next=Ho.zpp_pool,(Ho.zpp_pool=Be).pre_dt=-1}else{var Ze=e.colarb;if(!Ze.cleared){for(var Je=Ze.b1.arbiters,Qe=null,$e=Je.head;null!=$e;){if($e.elt==Ze){var et,tt;null==Qe?(tt=(et=Je.head).next,Je.head=tt,null==Je.head&&(Je.pushmod=!0)):(tt=(et=Qe.next).next,null==(Qe.next=tt)&&(Je.pushmod=!0));var it=et;it.elt=null,it.next=Ko.zpp_pool,Ko.zpp_pool=it,Je.modified=!0,Je.length--,Je.pushmod=!0;break}$e=(Qe=$e).next}for(var nt=Ze.b2.arbiters,rt=null,ot=nt.head;null!=ot;){if(ot.elt==Ze){var at,st;null==rt?(st=(at=nt.head).next,nt.head=st,null==nt.head&&(nt.pushmod=!0)):(st=(at=rt.next).next,null==(rt.next=st)&&(nt.pushmod=!0));var pt=at;pt.elt=null,pt.next=Ko.zpp_pool,Ko.zpp_pool=pt,nt.modified=!0,nt.length--,nt.pushmod=!0;break}ot=(rt=ot).next}null!=Ze.pair&&(Ze.pair.arb=null,Ze.pair=null)}for(Ze.b1=Ze.b2=null,Ze.active=!1,Ze.intchange=!1;null!=Ze.contacts.next;){var lt=Ze.contacts,ht=lt.next;lt.pop(),ht.arbiter=null,ht.next=qo.zpp_pool,qo.zpp_pool=ht;var ut=Ze.innards,dt=ut.next;ut.next=dt.next,dt._inuse=!1,null==ut.next&&(ut.pushmod=!0),ut.modified=!0,ut.length--}Ze.userdef_dyn_fric=!1,Ze.userdef_stat_fric=!1,Ze.userdef_restitution=!1,Ze.userdef_rfric=!1,Ze.__ref_edge1=Ze.__ref_edge2=null,Ze.next=Wo.zpp_pool,(Wo.zpp_pool=Ze).pre_dt=-1}return!0}var ct=e.active;if(e.active=e.presentable=e.up_stamp==this.stamp,0!=(1&e.immState)){if(e.active&&e.type!=ln.SENSOR)if(null!=e.colarb){var _t=e.colarb;_t.invalidated&&(_t.invalidated=!1,_t.userdef_restitution||(_t.s1.material.elasticity<=-1/0||_t.s2.material.elasticity<=-1/0?_t.restitution=0:_t.s1.material.elasticity>=1/0||_t.s2.material.elasticity>=1/0?_t.restitution=1:_t.restitution=(_t.s1.material.elasticity+_t.s2.material.elasticity)/2,_t.restitution<0&&(_t.restitution=0),1<_t.restitution&&(_t.restitution=1)),_t.userdef_dyn_fric||(_t.dyn_fric=Math.sqrt(_t.s1.material.dynamicFriction*_t.s2.material.dynamicFriction)),_t.userdef_stat_fric||(_t.stat_fric=Math.sqrt(_t.s1.material.staticFriction*_t.s2.material.staticFriction)),_t.userdef_rfric||(_t.rfric=Math.sqrt(_t.s1.material.rollingFriction*_t.s2.material.rollingFriction))),-1==_t.pre_dt&&(_t.pre_dt=t);var yt=t/_t.pre_dt;_t.pre_dt=t;var xt=_t.b1.smass+_t.b2.smass,mt=!(_t.hc2=!1);_t.biasCoef=2!=_t.b1.type||2!=_t.b2.type?_t.continuous?Qs.contactContinuousStaticBiasCoef:Qs.contactStaticBiasCoef:_t.continuous?Qs.contactContinuousBiasCoef:Qs.contactBiasCoef,_t.continuous=!1;for(var gt=null,ft=null,vt=_t.innards.next,zt=_t.contacts.next;null!=zt;){var wt=zt;if(wt.stamp+Qs.arbiterExpirationDelay<_t.stamp){var bt,St,Ct=_t.contacts;null==gt?(St=(bt=Ct.next).next,Ct.next=St,null==Ct.next&&(Ct.pushmod=!0)):(St=(bt=gt.next).next,null==(gt.next=St)&&(Ct.pushmod=!0)),bt._inuse=!1,Ct.modified=!0,Ct.length--,Ct.pushmod=!0,zt=St;var Mt,Pt,kt=_t.innards;null==ft?(Pt=(Mt=kt.next).next,kt.next=Pt,null==kt.next&&(kt.pushmod=!0)):(Pt=(Mt=ft.next).next,null==(ft.next=Pt)&&(kt.pushmod=!0)),Mt._inuse=!1,kt.modified=!0,kt.length--,kt.pushmod=!0,vt=Pt,wt.arbiter=null,wt.next=qo.zpp_pool,qo.zpp_pool=wt}else{var Tt=wt.inner,At=wt.active;if(wt.active=wt.stamp==_t.stamp,wt.active){mt?(mt=!1,_t.c1=Tt,_t.oc1=wt):(_t.hc2=!0,_t.c2=Tt,_t.oc2=wt),Tt.r2x=wt.px-_t.b2.posx,Tt.r2y=wt.py-_t.b2.posy,Tt.r1x=wt.px-_t.b1.posx,Tt.r1y=wt.py-_t.b1.posy;var Ot=Tt.r2x*_t.nx+Tt.r2y*_t.ny,Et=xt+_t.b2.sinertia*(Ot*Ot),Gt=Tt.r1x*_t.nx+Tt.r1y*_t.ny;Et+=_t.b1.sinertia*(Gt*Gt),Tt.tMass=Et<Qs.epsilon*Qs.epsilon?0:1/Et;var Dt=_t.ny*Tt.r2x-_t.nx*Tt.r2y,It=xt+_t.b2.sinertia*(Dt*Dt),Lt=_t.ny*Tt.r1x-_t.nx*Tt.r1y;It+=_t.b1.sinertia*(Lt*Lt),Tt.nMass=It<Qs.epsilon*Qs.epsilon?0:1/It;var Bt=0,Rt=0,Ft=_t.b2.angvel+_t.b2.kinangvel;Bt=_t.b2.velx+_t.b2.kinvelx-Tt.r2y*Ft,Rt=_t.b2.vely+_t.b2.kinvely+Tt.r2x*Ft,Ft=_t.b1.angvel+_t.b1.kinangvel,Bt-=_t.b1.velx+_t.b1.kinvelx-Tt.r1y*Ft,Rt-=_t.b1.vely+_t.b1.kinvely+Tt.r1x*Ft;var jt=_t.nx*Bt+_t.ny*Rt;wt.elasticity=_t.restitution,Tt.bounce=jt*wt.elasticity,Tt.bounce>-Qs.elasticThreshold&&(Tt.bounce=0),jt=Rt*_t.nx-Bt*_t.ny;var Nt=Qs.staticFrictionThreshold;Tt.friction=Nt*Nt<jt*jt?_t.dyn_fric:_t.stat_fric,Tt.jnAcc*=yt,Tt.jtAcc*=yt}At!=wt.active&&(_t.contacts.modified=!0),gt=zt,vt=(ft=vt).next,zt=zt.next}}if(_t.hc2){if(_t.hpc2=!0,_t.oc1.posOnly){var Ut=_t.c1;_t.c1=_t.c2,_t.c2=Ut;var Vt=_t.oc1;_t.oc1=_t.oc2,_t.oc2=Vt,_t.hc2=!1}else _t.oc2.posOnly&&(_t.hc2=!1);_t.oc1.posOnly&&(mt=!0)}else _t.hpc2=!1;if(_t.jrAcc*=yt,mt||(_t.rn1a=_t.ny*_t.c1.r1x-_t.nx*_t.c1.r1y,_t.rt1a=_t.c1.r1x*_t.nx+_t.c1.r1y*_t.ny,_t.rn1b=_t.ny*_t.c1.r2x-_t.nx*_t.c1.r2y,_t.rt1b=_t.c1.r2x*_t.nx+_t.c1.r2y*_t.ny,_t.k1x=_t.b2.kinvelx-_t.c1.r2y*_t.b2.kinangvel-(_t.b1.kinvelx-_t.c1.r1y*_t.b1.kinangvel),_t.k1y=_t.b2.kinvely+_t.c1.r2x*_t.b2.kinangvel-(_t.b1.kinvely+_t.c1.r1x*_t.b1.kinangvel)),_t.hc2)if(_t.rn2a=_t.ny*_t.c2.r1x-_t.nx*_t.c2.r1y,_t.rt2a=_t.c2.r1x*_t.nx+_t.c2.r1y*_t.ny,_t.rn2b=_t.ny*_t.c2.r2x-_t.nx*_t.c2.r2y,_t.rt2b=_t.c2.r2x*_t.nx+_t.c2.r2y*_t.ny,_t.k2x=_t.b2.kinvelx-_t.c2.r2y*_t.b2.kinangvel-(_t.b1.kinvelx-_t.c2.r1y*_t.b1.kinangvel),_t.k2y=_t.b2.kinvely+_t.c2.r2x*_t.b2.kinangvel-(_t.b1.kinvely+_t.c2.r1x*_t.b1.kinangvel),_t.kMassa=xt+_t.b1.sinertia*_t.rn1a*_t.rn1a+_t.b2.sinertia*_t.rn1b*_t.rn1b,_t.kMassb=xt+_t.b1.sinertia*_t.rn1a*_t.rn2a+_t.b2.sinertia*_t.rn1b*_t.rn2b,_t.kMassc=xt+_t.b1.sinertia*_t.rn2a*_t.rn2a+_t.b2.sinertia*_t.rn2b*_t.rn2b,_t.kMassa*_t.kMassa+2*_t.kMassb*_t.kMassb+_t.kMassc*_t.kMassc<Qs.illConditionedThreshold*(_t.kMassa*_t.kMassc-_t.kMassb*_t.kMassb)){_t.Ka=_t.kMassa,_t.Kb=_t.kMassb,_t.Kc=_t.kMassc;var Ht=_t.kMassa*_t.kMassc-_t.kMassb*_t.kMassb;if(Ht!=Ht)_t.kMassa=_t.kMassb=_t.kMassc=0;else if(0==Ht)0!=_t.kMassa?_t.kMassa=1/_t.kMassa:_t.kMassa=0,0!=_t.kMassc?_t.kMassc=1/_t.kMassc:_t.kMassc=0,_t.kMassb=0;else{Ht=1/Ht;var Wt=_t.kMassc*Ht;_t.kMassc=_t.kMassa*Ht,_t.kMassa=Wt,_t.kMassb*=-Ht}}else{if(_t.hc2=!1,_t.oc2.dist<_t.oc1.dist){var qt=_t.c1;_t.c1=_t.c2,_t.c2=qt}_t.oc2.active=!1,_t.contacts.modified=!0}_t.surfacex=_t.b2.svelx,_t.surfacey=_t.b2.svely,_t.surfacex+=_t.b1.svelx,_t.surfacey+=_t.b1.svely,_t.surfacex=-_t.surfacex,_t.surfacey=-_t.surfacey,_t.rMass=_t.b1.sinertia+_t.b2.sinertia,0!=_t.rMass&&(_t.rMass=1/_t.rMass),mt&&(e.active=!1)}else{var Xt=e.fluidarb;-1==Xt.pre_dt&&(Xt.pre_dt=t);var Yt=t/Xt.pre_dt;Xt.pre_dt=t,Xt.r1x=Xt.centroidx-Xt.b1.posx,Xt.r1y=Xt.centroidy-Xt.b1.posy,Xt.r2x=Xt.centroidx-Xt.b2.posx,Xt.r2y=Xt.centroidy-Xt.b2.posy;var Kt=0,Zt=0;Zt=Xt.ws1.fluidEnabled&&null!=Xt.ws1.fluidProperties.wrap_gravity?(Kt=Xt.ws1.fluidProperties.gravityx,Xt.ws1.fluidProperties.gravityy):(Kt=this.gravityx,this.gravityy);var Jt=0,Qt=0;Qt=Xt.ws2.fluidEnabled&&null!=Xt.ws2.fluidProperties.wrap_gravity?(Jt=Xt.ws2.fluidProperties.gravityx,Xt.ws2.fluidProperties.gravityy):(Jt=this.gravityx,this.gravityy);var $t=0,ei=0;if(Xt.ws1.fluidEnabled&&Xt.ws2.fluidEnabled){var ti=Xt.overlap*Xt.ws1.fluidProperties.density,ii=Xt.overlap*Xt.ws2.fluidProperties.density;if(ii<ti){var ni=ti+ii;$t-=Kt*ni,ei-=Zt*ni}else if(ti<ii){var ri=ti+ii;$t+=Jt*ri,ei+=Qt*ri}else{var oi=0,ai=0;if(oi=Kt+Jt,ai=Zt+Qt,oi*=.5,ai*=.5,Xt.ws1.worldCOMx*oi+Xt.ws1.worldCOMy*ai>Xt.ws2.worldCOMx*oi+Xt.ws2.worldCOMy*ai){var si=ti+ii;$t-=oi*si,ei-=ai*si}else{var pi=ti+ii;$t+=oi*pi,ei+=ai*pi}}}else if(Xt.ws1.fluidEnabled){var li=Xt.overlap*Xt.ws1.fluidProperties.density;$t-=Kt*li,ei-=Zt*li}else if(Xt.ws2.fluidEnabled){var hi=Xt.overlap*Xt.ws2.fluidProperties.density;$t+=Jt*hi,ei+=Qt*hi}if($t*=t,ei*=t,Xt.buoyx=$t,Xt.buoyy=ei,2==Xt.b1.type){var ui=Xt.b1.imass;Xt.b1.velx-=$t*ui,Xt.b1.vely-=ei*ui,Xt.b1.angvel-=(ei*Xt.r1x-$t*Xt.r1y)*Xt.b1.iinertia}if(2==Xt.b2.type){var di=Xt.b2.imass;Xt.b2.velx+=$t*di,Xt.b2.vely+=ei*di,Xt.b2.angvel+=(ei*Xt.r2x-$t*Xt.r2y)*Xt.b2.iinertia}if(Xt.ws1.fluidEnabled&&0!=Xt.ws1.fluidProperties.viscosity||Xt.ws2.fluidEnabled&&0!=Xt.ws2.fluidProperties.viscosity){Xt.nodrag=!1;var ci=0;if(Xt.ws1.fluidEnabled&&(Xt.ws2.validate_angDrag(),ci=Xt.ws1.fluidProperties.viscosity*Xt.ws2.angDrag*Xt.overlap/Xt.ws2.area),Xt.ws2.fluidEnabled&&(Xt.ws1.validate_angDrag(),ci+=Xt.ws2.fluidProperties.viscosity*Xt.ws1.angDrag*Xt.overlap/Xt.ws1.area),0!=ci){var _i=Xt.b1.sinertia+Xt.b2.sinertia;Xt.wMass=0!=_i?1/_i:0,ci*=4e-4;var yi=2*Math.PI*ci;Xt.agamma=1/(t*yi*(2+yi*t));var xi=1/(1+Xt.agamma);Xt.agamma*=xi,Xt.wMass*=xi}else Xt.wMass=0,Xt.agamma=0;var mi=Xt.b2.velx+Xt.b2.kinvelx-Xt.r2y*(Xt.b2.angvel+Xt.b2.kinangvel)-(Xt.b1.velx+Xt.b1.kinvelx-Xt.r1y*(Xt.b2.angvel+Xt.b2.kinangvel)),gi=Xt.b2.vely+Xt.b2.kinvely+Xt.r2x*(Xt.b2.angvel+Xt.b2.kinangvel)-(Xt.b1.vely+Xt.b1.kinvely+Xt.r1x*(Xt.b1.angvel+Xt.b1.kinangvel));if(!(mi*mi+gi*gi<Qs.epsilon*Qs.epsilon)){var fi=1/Math.sqrt(mi*mi+gi*gi);mi*=fi,gi*=fi,Xt.nx=mi,Xt.ny=gi}var vi=0;if(Xt.ws1.fluidEnabled){var zi=-Xt.ws1.fluidProperties.viscosity*Xt.overlap/Xt.ws2.area;if(0==Xt.ws2.type)vi=0-zi*Xt.ws2.circle.radius*Qs.fluidLinearDrag/(2*Xt.ws2.circle.radius*Math.PI);else{for(var wi=0,bi=0,Si=Xt.ws2.polygon.edges.head;null!=Si;){var Ci=Si.elt;wi+=Ci.length;var Mi=zi*Ci.length*(Ci.gnormx*Xt.nx+Ci.gnormy*Xt.ny);0<Mi&&(Mi=Mi*=-Qs.fluidVacuumDrag),bi-=.5*Mi*Qs.fluidLinearDrag,Si=Si.next}vi=bi/wi}}if(Xt.ws2.fluidEnabled){var Pi=-Xt.ws2.fluidProperties.viscosity*Xt.overlap/Xt.ws1.area;if(0==Xt.ws1.type)vi-=Pi*Xt.ws1.circle.radius*Qs.fluidLinearDrag/(2*Xt.ws1.circle.radius*Math.PI);else{for(var ki=0,Ti=0,Ai=Xt.ws1.polygon.edges.head;null!=Ai;){var Oi=Ai.elt;ki+=Oi.length;var Ei=Pi*Oi.length*(Oi.gnormx*Xt.nx+Oi.gnormy*Xt.ny);0<Ei&&(Ei=Ei*=-Qs.fluidVacuumDrag),Ti-=.5*Ei*Qs.fluidLinearDrag,Ai=Ai.next}vi+=Ti/ki}}if(0!=vi){var Gi=Xt.b1.smass+Xt.b2.smass,Di=0,Ii=0,Li=0;if(Li=Di=Gi,(Ii=0)!=Xt.b1.sinertia){var Bi=Xt.r1x*Xt.b1.sinertia,Ri=Xt.r1y*Xt.b1.sinertia;Di=Gi+Ri*Xt.r1y,Ii+=-Ri*Xt.r1x,Li=Gi+Bi*Xt.r1x}if(0!=Xt.b2.sinertia){var Fi=Xt.r2x*Xt.b2.sinertia,ji=Xt.r2y*Xt.b2.sinertia;Di+=ji*Xt.r2y,Ii+=-ji*Xt.r2x,Li+=Fi*Xt.r2x}var Ni=Di*Li-Ii*Ii;if(Ni!=Ni)Di=Ii=Li=0;else if(0==Ni)Di=0!=Di?1/Di:0,Li=0!=Li?1/Li:0,Ii=0;else{var Ui=Li*(Ni=1/Ni);Li=Di*Ni,Di=Ui,Ii*=-Ni}Xt.vMassa=Di,Xt.vMassb=Ii,Xt.vMassc=Li;var Vi=2*Math.PI*vi;Xt.lgamma=1/(t*Vi*(2+Vi*t));var Hi=1/(1+Xt.lgamma);Xt.lgamma*=Hi,Xt.vMassa*=Hi,Xt.vMassb*=Hi,Xt.vMassc*=Hi}else Xt.vMassa=0,Xt.vMassb=0,Xt.vMassc=0,Xt.lgamma=0}else Xt.nodrag=!0,Xt.dampx=0,Xt.dampy=0,Xt.adamp=0;Xt.dampx*=Yt,Xt.dampy*=Yt,Xt.adamp*=Yt}}else if(null!=e.colarb){var Wi=e.colarb,qi=!0,Xi=null,Yi=null,Ki=Wi.innards.next;Wi.hc2=!1;for(var Zi=Wi.contacts.next;null!=Zi;){var Ji=Zi;if(Ji.stamp+Qs.arbiterExpirationDelay<Wi.stamp){var Qi,$i,en=Wi.contacts;null==Xi?($i=(Qi=en.next).next,en.next=$i,null==en.next&&(en.pushmod=!0)):($i=(Qi=Xi.next).next,null==(Xi.next=$i)&&(en.pushmod=!0)),Qi._inuse=!1,en.modified=!0,en.length--,en.pushmod=!0,Zi=$i;var tn,nn,rn=Wi.innards;null==Yi?(nn=(tn=rn.next).next,rn.next=nn,null==rn.next&&(rn.pushmod=!0)):(nn=(tn=Yi.next).next,null==(Yi.next=nn)&&(rn.pushmod=!0)),tn._inuse=!1,rn.modified=!0,rn.length--,rn.pushmod=!0,Ki=nn,Ji.arbiter=null,Ji.next=qo.zpp_pool,qo.zpp_pool=Ji}else{var on=Ji.inner,an=Ji.active;Ji.active=Ji.stamp==Wi.stamp,Ji.active&&(qi?(qi=!1,Wi.c1=on,Wi.oc1=Ji):(Wi.hc2=!0,Wi.c2=on,Wi.oc2=Ji)),an!=Ji.active&&(Wi.contacts.modified=!0),Xi=Zi,Ki=(Yi=Ki).next,Zi=Zi.next}}if(Wi.hc2){if(Wi.hpc2=!0,Wi.oc1.posOnly){var sn=Wi.c1;Wi.c1=Wi.c2,Wi.c2=sn;var pn=Wi.oc1;Wi.oc1=Wi.oc2,Wi.oc2=pn,Wi.hc2=!1}else Wi.oc2.posOnly&&(Wi.hc2=!1);Wi.oc1.posOnly&&(qi=!0)}else Wi.hpc2=!1;qi&&(e.active=!1)}return ct!=e.active&&(e.b1.arbiters.modified=!0,e.b2.arbiters.modified=!0,this.c_arbiters_true.modified=this.c_arbiters_false.modified=!0,this.s_arbiters.modified=this.f_arbiters.modified=!0),!1},si.prototype.prestep=function(e){for(var t=null,i=this.live_constraints.head;null!=i;){var n=i.elt;n.preStep(e)?(i=this.live_constraints.erase(t),n.broken(),this.constraintCbBreak(n),n.removeOnBreak?(n.component.sleeping=!0,this.midstep=!1,null!=n.compound?n.compound.wrap_constraints.remove(n.outer):this.wrap_constraints.remove(n.outer),this.midstep=!0):n.active=!1,n.clearcache()):i=(t=i).next}var r=null,o=this.c_arbiters_true,a=o.head,s=null!=this.c_arbiters_false;for(s&&null==a&&(s=!1,a=this.c_arbiters_false.head,o=this.c_arbiters_false,r=null);null!=a;)if(this.presteparb(a.elt,e)){var p,l;null==r?(l=(p=o.head).next,o.head=l,null==o.head&&(o.pushmod=!0)):(l=(p=r.next).next,null==(r.next=l)&&(o.pushmod=!0));var h=p;h.elt=null,h.next=ea.zpp_pool,ea.zpp_pool=h,o.modified=!0,o.length--,o.pushmod=!0,a=l,s&&null==a&&(s=!1,a=this.c_arbiters_false.head,o=this.c_arbiters_false,r=null)}else a=(r=a).next,s&&null==a&&(s=!1,a=this.c_arbiters_false.head,o=this.c_arbiters_false,r=null);for(var u=null,d=this.f_arbiters,c=d.head;null!=c;)if(this.presteparb(c.elt,e)){var _,y;null==u?(y=(_=d.head).next,d.head=y,null==d.head&&(d.pushmod=!0)):(y=(_=u.next).next,null==(u.next=y)&&(d.pushmod=!0));var x=_;x.elt=null,x.next=Qo.zpp_pool,Qo.zpp_pool=x,d.modified=!0,d.length--,d.pushmod=!0,c=y}else c=(u=c).next;for(var m=null,g=this.s_arbiters,f=g.head;null!=f;)if(this.presteparb(f.elt,e)){var v,z;null==m?(z=(v=g.head).next,g.head=z,null==g.head&&(g.pushmod=!0)):(z=(v=m.next).next,null==(m.next=z)&&(g.pushmod=!0));var w=v;w.elt=null,w.next=$o.zpp_pool,$o.zpp_pool=w,g.modified=!0,g.length--,g.pushmod=!0,f=z}else f=(m=f).next},si.prototype.warmStart=function(){for(var e=this.f_arbiters.head;null!=e;){var t=e.elt;if(t.active&&0!=(1&t.immState)){var i=t.b1.imass;t.b1.velx-=t.dampx*i,t.b1.vely-=t.dampy*i;var n=t.b2.imass;t.b2.velx+=t.dampx*n,t.b2.vely+=t.dampy*n,t.b1.angvel-=t.b1.iinertia*(t.dampy*t.r1x-t.dampx*t.r1y),t.b2.angvel+=t.b2.iinertia*(t.dampy*t.r2x-t.dampx*t.r2y),t.b1.angvel-=t.adamp*t.b1.iinertia,t.b2.angvel+=t.adamp*t.b2.iinertia}e=e.next}var r=this.c_arbiters_false.head,o=!0;for(null==r&&(r=this.c_arbiters_true.head,o=!1);null!=r;){var a=r.elt;if(a.active&&0!=(1&a.immState)){var s=a.nx*a.c1.jnAcc-a.ny*a.c1.jtAcc,p=a.ny*a.c1.jnAcc+a.nx*a.c1.jtAcc,l=a.b1.imass;a.b1.velx-=s*l,a.b1.vely-=p*l,a.b1.angvel-=a.b1.iinertia*(p*a.c1.r1x-s*a.c1.r1y);var h=a.b2.imass;if(a.b2.velx+=s*h,a.b2.vely+=p*h,a.b2.angvel+=a.b2.iinertia*(p*a.c1.r2x-s*a.c1.r2y),a.hc2){var u=a.nx*a.c2.jnAcc-a.ny*a.c2.jtAcc,d=a.ny*a.c2.jnAcc+a.nx*a.c2.jtAcc,c=a.b1.imass;a.b1.velx-=u*c,a.b1.vely-=d*c,a.b1.angvel-=a.b1.iinertia*(d*a.c2.r1x-u*a.c2.r1y);var _=a.b2.imass;a.b2.velx+=u*_,a.b2.vely+=d*_,a.b2.angvel+=a.b2.iinertia*(d*a.c2.r2x-u*a.c2.r2y)}a.b2.angvel+=a.jrAcc*a.b2.iinertia,a.b1.angvel-=a.jrAcc*a.b1.iinertia}r=r.next,o&&null==r&&(r=this.c_arbiters_true.head,o=!1)}for(var y=this.live_constraints.head;null!=y;)y.elt.warmStart(),y=y.next},si.prototype.iterateVel=function(e){for(var t=0;t<e;){++t;for(var i=this.f_arbiters.head;null!=i;){var n=i.elt;if(n.active&&0!=(1&n.immState)&&!n.nodrag){var r=n.b1.angvel+n.b1.kinangvel,o=n.b2.angvel+n.b2.kinangvel,a=n.b1.velx+n.b1.kinvelx-n.r1y*r-(n.b2.velx+n.b2.kinvelx-n.r2y*o),s=n.b1.vely+n.b1.kinvely+n.r1x*r-(n.b2.vely+n.b2.kinvely+n.r2x*o),p=n.vMassa*a+n.vMassb*s;s=n.vMassb*a+n.vMassc*s,a=p;var l=n.lgamma;a-=n.dampx*l,s-=n.dampy*l,n.dampx+=a,n.dampy+=s;var h=n.b1.imass;n.b1.velx-=a*h,n.b1.vely-=s*h;var u=n.b2.imass;n.b2.velx+=a*u,n.b2.vely+=s*u,n.b1.angvel-=n.b1.iinertia*(s*n.r1x-a*n.r1y),n.b2.angvel+=n.b2.iinertia*(s*n.r2x-a*n.r2y);var d=(r-o)*n.wMass-n.adamp*n.agamma;n.adamp+=d,n.b1.angvel-=d*n.b1.iinertia,n.b2.angvel+=d*n.b2.iinertia}i=i.next}for(var c=null,_=this.live_constraints.head;null!=_;){var y=_.elt;y.applyImpulseVel()?(_=this.live_constraints.erase(c),y.broken(),this.constraintCbBreak(y),y.removeOnBreak?(y.component.sleeping=!0,this.midstep=!1,null!=y.compound?y.compound.wrap_constraints.remove(y.outer):this.wrap_constraints.remove(y.outer),this.midstep=!0):y.active=!1,y.clearcache()):_=(c=_).next}var x=this.c_arbiters_false.head,m=!0;for(null==x&&(x=this.c_arbiters_true.head,m=!1);null!=x;){var g=x.elt;if(g.active&&0!=(1&g.immState)){var f,v,z,w,b,S,C=g.k1x+g.b2.velx-g.c1.r2y*g.b2.angvel-(g.b1.velx-g.c1.r1y*g.b1.angvel),M=g.k1y+g.b2.vely+g.c1.r2x*g.b2.angvel-(g.b1.vely+g.c1.r1x*g.b1.angvel);if(z=(M*g.nx-C*g.ny+g.surfacex)*g.c1.tMass,(w=g.c1.friction*g.c1.jnAcc)<(S=(b=g.c1.jtAcc)-z)?S=w:S<-w&&(S=-w),z=S-b,g.c1.jtAcc=S,f=-g.ny*z,v=g.nx*z,g.b2.velx+=f*g.b2.imass,g.b2.vely+=v*g.b2.imass,g.b1.velx-=f*g.b1.imass,g.b1.vely-=v*g.b1.imass,g.b2.angvel+=g.rt1b*z*g.b2.iinertia,g.b1.angvel-=g.rt1a*z*g.b1.iinertia,g.hc2){var P=g.k2x+g.b2.velx-g.c2.r2y*g.b2.angvel-(g.b1.velx-g.c2.r1y*g.b1.angvel),k=g.k2y+g.b2.vely+g.c2.r2x*g.b2.angvel-(g.b1.vely+g.c2.r1x*g.b1.angvel);z=(k*g.nx-P*g.ny+g.surfacex)*g.c2.tMass,(w=g.c2.friction*g.c2.jnAcc)<(S=(b=g.c2.jtAcc)-z)?S=w:S<-w&&(S=-w),z=S-b,g.c2.jtAcc=S,f=-g.ny*z,v=g.nx*z,g.b2.velx+=f*g.b2.imass,g.b2.vely+=v*g.b2.imass,g.b1.velx-=f*g.b1.imass,g.b1.vely-=v*g.b1.imass,g.b2.angvel+=g.rt2b*z*g.b2.iinertia,g.b1.angvel-=g.rt2a*z*g.b1.iinertia,C=g.k1x+g.b2.velx-g.c1.r2y*g.b2.angvel-(g.b1.velx-g.c1.r1y*g.b1.angvel),M=g.k1y+g.b2.vely+g.c1.r2x*g.b2.angvel-(g.b1.vely+g.c1.r1x*g.b1.angvel),P=g.k2x+g.b2.velx-g.c2.r2y*g.b2.angvel-(g.b1.velx-g.c2.r1y*g.b1.angvel),k=g.k2y+g.b2.vely+g.c2.r2x*g.b2.angvel-(g.b1.vely+g.c2.r1x*g.b1.angvel);var T=g.c1.jnAcc,A=g.c2.jnAcc,O=C*g.nx+M*g.ny+g.surfacey+g.c1.bounce-(g.Ka*T+g.Kb*A),E=P*g.nx+k*g.ny+g.surfacey+g.c2.bounce-(g.Kb*T+g.Kc*A),G=-(g.kMassa*O+g.kMassb*E),D=-(g.kMassb*O+g.kMassc*E);0<=G&&0<=D?(O=G-T,E=D-A,g.c1.jnAcc=G,g.c2.jnAcc=D):0<=(G=-g.c1.nMass*O)&&0<=g.Kb*G+E?(O=G-T,E=-A,g.c1.jnAcc=G,g.c2.jnAcc=0):0<=(D=-g.c2.nMass*E)&&0<=g.Kb*D+O?(O=-T,E=D-A,g.c1.jnAcc=0,g.c2.jnAcc=D):0<=O&&0<=E?(O=-T,E=-A,g.c1.jnAcc=g.c2.jnAcc=0):E=O=0,z=O+E,f=g.nx*z,v=g.ny*z,g.b2.velx+=f*g.b2.imass,g.b2.vely+=v*g.b2.imass,g.b1.velx-=f*g.b1.imass,g.b1.vely-=v*g.b1.imass,g.b2.angvel+=(g.rn1b*O+g.rn2b*E)*g.b2.iinertia,g.b1.angvel-=(g.rn1a*O+g.rn2a*E)*g.b1.iinertia}else 0!=g.radius&&(z=(g.b2.angvel-g.b1.angvel)*g.rMass,w=g.rfric*g.c1.jnAcc,b=g.jrAcc,g.jrAcc-=z,g.jrAcc>w?g.jrAcc=w:g.jrAcc<-w&&(g.jrAcc=-w),z=g.jrAcc-b,g.b2.angvel+=z*g.b2.iinertia,g.b1.angvel-=z*g.b1.iinertia),C=g.k1x+g.b2.velx-g.c1.r2y*g.b2.angvel-(g.b1.velx-g.c1.r1y*g.b1.angvel),M=g.k1y+g.b2.vely+g.c1.r2x*g.b2.angvel-(g.b1.vely+g.c1.r1x*g.b1.angvel),z=(g.c1.bounce+(g.nx*C+g.ny*M)+g.surfacey)*g.c1.nMass,(S=(b=g.c1.jnAcc)-z)<0&&(S=0),z=S-b,g.c1.jnAcc=S,f=g.nx*z,v=g.ny*z,g.b2.velx+=f*g.b2.imass,g.b2.vely+=v*g.b2.imass,g.b1.velx-=f*g.b1.imass,g.b1.vely-=v*g.b1.imass,g.b2.angvel+=g.rn1b*z*g.b2.iinertia,g.b1.angvel-=g.rn1a*z*g.b1.iinertia}x=x.next,m&&null==x&&(x=this.c_arbiters_true.head,m=!1)}}},si.prototype.iteratePos=function(e){for(var t=0;t<e;){++t;for(var i=null,n=this.live_constraints.head;null!=n;){var r=n.elt;!r.__velocity&&r.stiff&&r.applyImpulsePos()?(n=this.live_constraints.erase(i),r.broken(),this.constraintCbBreak(r),r.removeOnBreak?(r.component.sleeping=!0,this.midstep=!1,null!=r.compound?r.compound.wrap_constraints.remove(r.outer):this.wrap_constraints.remove(r.outer),this.midstep=!0):r.active=!1,r.clearcache()):n=(i=n).next}var o=this.c_arbiters_false.head,a=!0;for(null==o&&(o=this.c_arbiters_true.head,a=!1);null!=o;){var s=o.elt;if(s.active&&0!=(1&s.immState))if(2==s.ptype){var p=s.c1,l=0,h=0;l=s.b2.axisy*p.lr2x-s.b2.axisx*p.lr2y,h=p.lr2x*s.b2.axisx+p.lr2y*s.b2.axisy,l+=s.b2.posx,h+=s.b2.posy;var u=0,d=0;u=s.b1.axisy*p.lr1x-s.b1.axisx*p.lr1y,d=p.lr1x*s.b1.axisx+p.lr1y*s.b1.axisy;var c=0,_=0;c=l-(u+=s.b1.posx),_=h-(d+=s.b1.posy);var y=Math.sqrt(c*c+_*_),x=s.radius-Qs.collisionSlop,m=y-x;if(c*s.nx+_*s.ny<0&&(c=-c,_=-_,m-=s.radius),m<0)if(y<Qs.epsilon)0!=s.b1.smass?s.b1.posx+=10*Qs.epsilon:s.b2.posx+=10*Qs.epsilon;else{var g=1/y;c*=g;var f=.5*(u+l),v=.5*(d+h),z=y-x,w=(_*=g)*(u=f-s.b1.posx)-c*(d=v-s.b1.posy),b=_*(l=f-s.b2.posx)-c*(h=v-s.b2.posy),S=s.b2.smass+b*b*s.b2.sinertia+s.b1.smass+w*w*s.b1.sinertia;if(0!=S){var C,M,P=-s.biasCoef*z/S;C=c*P,M=_*P;var k=s.b1.imass;s.b1.posx-=C*k,s.b1.posy-=M*k;var T=s.b1,A=-w*s.b1.iinertia*P;if(T.rot+=A,1e-4<A*A)T.axisx=Math.sin(T.rot),T.axisy=Math.cos(T.rot);else{var O=A*A,E=1-.5*O,G=1-O*O/8,D=(E*T.axisx+A*T.axisy)*G;T.axisy=(E*T.axisy-A*T.axisx)*G,T.axisx=D}var I=s.b2.imass;s.b2.posx+=C*I,s.b2.posy+=M*I;var L=s.b2,B=b*s.b2.iinertia*P;if(L.rot+=B,1e-4<B*B)L.axisx=Math.sin(L.rot),L.axisy=Math.cos(L.rot);else{var R=B*B,F=1-.5*R,j=1-R*R/8,N=(F*L.axisx+B*L.axisy)*j;L.axisy=(F*L.axisy-B*L.axisx)*j,L.axisx=N}}}}else{var U,V=0,H=0,W=0,q=0,X=0,Y=0;0==s.ptype?(V=s.b1.axisy*s.lnormx-s.b1.axisx*s.lnormy,H=s.lnormx*s.b1.axisx+s.lnormy*s.b1.axisy,U=s.lproj+(V*s.b1.posx+H*s.b1.posy),W=s.b2.axisy*s.c1.lr1x-s.b2.axisx*s.c1.lr1y,q=s.c1.lr1x*s.b2.axisx+s.c1.lr1y*s.b2.axisy,W+=s.b2.posx,q+=s.b2.posy,s.hpc2&&(X=s.b2.axisy*s.c2.lr1x-s.b2.axisx*s.c2.lr1y,Y=s.c2.lr1x*s.b2.axisx+s.c2.lr1y*s.b2.axisy,X+=s.b2.posx,Y+=s.b2.posy)):(V=s.b2.axisy*s.lnormx-s.b2.axisx*s.lnormy,H=s.lnormx*s.b2.axisx+s.lnormy*s.b2.axisy,U=s.lproj+(V*s.b2.posx+H*s.b2.posy),W=s.b1.axisy*s.c1.lr1x-s.b1.axisx*s.c1.lr1y,q=s.c1.lr1x*s.b1.axisx+s.c1.lr1y*s.b1.axisy,W+=s.b1.posx,q+=s.b1.posy,s.hpc2&&(X=s.b1.axisy*s.c2.lr1x-s.b1.axisx*s.c2.lr1y,Y=s.c2.lr1x*s.b1.axisx+s.c2.lr1y*s.b1.axisy,X+=s.b1.posx,Y+=s.b1.posy));var K=W*V+q*H-U-s.radius;K+=Qs.collisionSlop;var Z=0;if(s.hpc2&&(Z=X*V+Y*H-U-s.radius,Z+=Qs.collisionSlop),K<0||Z<0){s.rev&&(V=-V,H=-H);var J,Q;J=W-s.b1.posx,Q=q-s.b1.posy;var $,ee;$=W-s.b2.posx,ee=q-s.b2.posy;if(s.hpc2){var te=H*J-V*Q,ie=H*$-V*ee,ne=H*(X-s.b1.posx)-V*(Y-s.b1.posy),re=H*(X-s.b2.posx)-V*(Y-s.b2.posy),oe=s.b1.smass+s.b2.smass;s.kMassa=oe+s.b1.sinertia*te*te+s.b2.sinertia*ie*ie,s.kMassb=oe+s.b1.sinertia*te*ne+s.b2.sinertia*ie*re,s.kMassc=oe+s.b1.sinertia*ne*ne+s.b2.sinertia*re*re;var ae,se,pe;ae=s.kMassa,se=s.kMassb,pe=s.kMassc;for(var le=K*s.biasCoef,he=Z*s.biasCoef;;){var ue=0,de=0;ue=-(ue=le),de=-(de=he);var ce=s.kMassa*s.kMassc-s.kMassb*s.kMassb;if(ce!=ce)ue=de=0;else if(0==ce)0!=s.kMassa?ue/=s.kMassa:ue=0,0!=s.kMassc?de/=s.kMassc:de=0;else{var _e=(ce=1/ce)*(s.kMassc*ue-s.kMassb*de);de=ce*(s.kMassa*de-s.kMassb*ue),ue=_e}if(0<=ue&&0<=de){var ye=(ue+de)*s.b1.imass;s.b1.posx-=V*ye,s.b1.posy-=H*ye;var xe=s.b1,me=-s.b1.iinertia*(te*ue+ne*de);if(xe.rot+=me,1e-4<me*me)xe.axisx=Math.sin(xe.rot),xe.axisy=Math.cos(xe.rot);else{var ge=me*me,fe=1-.5*ge,ve=1-ge*ge/8,ze=(fe*xe.axisx+me*xe.axisy)*ve;xe.axisy=(fe*xe.axisy-me*xe.axisx)*ve,xe.axisx=ze}var we=(ue+de)*s.b2.imass;s.b2.posx+=V*we,s.b2.posy+=H*we;var be=s.b2,Se=s.b2.iinertia*(ie*ue+re*de);if(be.rot+=Se,1e-4<Se*Se)be.axisx=Math.sin(be.rot),be.axisy=Math.cos(be.rot);else{var Ce=Se*Se,Me=1-.5*Ce,Pe=1-Ce*Ce/8,ke=(Me*be.axisx+Se*be.axisy)*Pe;be.axisy=(Me*be.axisy-Se*be.axisx)*Pe,be.axisx=ke}break}if((de=0)<=(ue=-le/ae)&&0<=se*ue+he){var Te=(ue+de)*s.b1.imass;s.b1.posx-=V*Te,s.b1.posy-=H*Te;var Ae=s.b1,Oe=-s.b1.iinertia*(te*ue+ne*de);if(Ae.rot+=Oe,1e-4<Oe*Oe)Ae.axisx=Math.sin(Ae.rot),Ae.axisy=Math.cos(Ae.rot);else{var Ee=Oe*Oe,Ge=1-.5*Ee,De=1-Ee*Ee/8,Ie=(Ge*Ae.axisx+Oe*Ae.axisy)*De;Ae.axisy=(Ge*Ae.axisy-Oe*Ae.axisx)*De,Ae.axisx=Ie}var Le=(ue+de)*s.b2.imass;s.b2.posx+=V*Le,s.b2.posy+=H*Le;var Be=s.b2,Re=s.b2.iinertia*(ie*ue+re*de);if(Be.rot+=Re,1e-4<Re*Re)Be.axisx=Math.sin(Be.rot),Be.axisy=Math.cos(Be.rot);else{var Fe=Re*Re,je=1-.5*Fe,Ne=1-Fe*Fe/8,Ue=(je*Be.axisx+Re*Be.axisy)*Ne;Be.axisy=(je*Be.axisy-Re*Be.axisx)*Ne,Be.axisx=Ue}break}if((ue=0)<=(de=-he/pe)&&0<=se*de+le){var Ve=(ue+de)*s.b1.imass;s.b1.posx-=V*Ve,s.b1.posy-=H*Ve;var He=s.b1,We=-s.b1.iinertia*(te*ue+ne*de);if(He.rot+=We,1e-4<We*We)He.axisx=Math.sin(He.rot),He.axisy=Math.cos(He.rot);else{var qe=We*We,Xe=1-.5*qe,Ye=1-qe*qe/8,Ke=(Xe*He.axisx+We*He.axisy)*Ye;He.axisy=(Xe*He.axisy-We*He.axisx)*Ye,He.axisx=Ke}var Ze=(ue+de)*s.b2.imass;s.b2.posx+=V*Ze,s.b2.posy+=H*Ze;var Je=s.b2,Qe=s.b2.iinertia*(ie*ue+re*de);if(Je.rot+=Qe,1e-4<Qe*Qe)Je.axisx=Math.sin(Je.rot),Je.axisy=Math.cos(Je.rot);else{var $e=Qe*Qe,et=1-.5*$e,tt=1-$e*$e/8,it=(et*Je.axisx+Qe*Je.axisy)*tt;Je.axisy=(et*Je.axisy-Qe*Je.axisx)*tt,Je.axisx=it}break}break}}else{var nt=H*J-V*Q,rt=H*$-V*ee,ot=s.b2.smass+rt*rt*s.b2.sinertia+s.b1.smass+nt*nt*s.b1.sinertia;if(0!=ot){var at,st,pt=-s.biasCoef*K/ot;at=V*pt,st=H*pt;var lt=s.b1.imass;s.b1.posx-=at*lt,s.b1.posy-=st*lt;var ht=s.b1,ut=-nt*s.b1.iinertia*pt;if(ht.rot+=ut,1e-4<ut*ut)ht.axisx=Math.sin(ht.rot),ht.axisy=Math.cos(ht.rot);else{var dt=ut*ut,ct=1-.5*dt,_t=1-dt*dt/8,yt=(ct*ht.axisx+ut*ht.axisy)*_t;ht.axisy=(ct*ht.axisy-ut*ht.axisx)*_t,ht.axisx=yt}var xt=s.b2.imass;s.b2.posx+=at*xt,s.b2.posy+=st*xt;var mt=s.b2,gt=rt*s.b2.iinertia*pt;if(mt.rot+=gt,1e-4<gt*gt)mt.axisx=Math.sin(mt.rot),mt.axisy=Math.cos(mt.rot);else{var ft=gt*gt,vt=1-.5*ft,zt=1-ft*ft/8,wt=(vt*mt.axisx+gt*mt.axisy)*zt;mt.axisy=(vt*mt.axisy-gt*mt.axisx)*zt,mt.axisx=wt}}}}}o=o.next,a&&null==o&&(o=this.c_arbiters_true.head,a=!1)}}},si.prototype.group_ignore=function(e,t){for(var i=e;null!=i&&null==i.group;)i=null!=i.ishape?i.ishape.body:null!=i.icompound?i.icompound.compound:i.ibody.compound;var n=null==i?null:i.group;if(null==n)return!1;for(var r=t;null!=r&&null==r.group;)r=null!=r.ishape?r.ishape.body:null!=r.icompound?r.icompound.compound:r.ibody.compound;var o=null==r?null:r.group;if(null==o)return!1;for(var a=!1;null!=n&&null!=o;){if(n==o){a=n.ignore;break}n.depth<o.depth?o=o.group:n=n.group}return a},si.prototype.interactionType=function(e,t,i,n){var r;r=!1;for(var o,a=i.constraints.head;null!=a;){var s=a.elt;if(s.ignore&&s.pair_exists(i.id,n.id)){r=!0;break}a=a.next}if(r)o=!1;else{for(var p=e;null!=p&&null==p.group;)p=null!=p.ishape?p.ishape.body:null!=p.icompound?p.icompound.compound:p.ibody.compound;var l,h=null==p?null:p.group;if(null==h)l=!1;else{for(var u=t;null!=u&&null==u.group;)u=null!=u.ishape?u.ishape.body:null!=u.icompound?u.icompound.compound:u.ibody.compound;var d=null==u?null:u.group;if(null==d)l=!1;else{for(var c=!1;null!=h&&null!=d;){if(h==d){c=h.ignore;break}h.depth<d.depth?d=d.group:h=h.group}l=c}}o=!l}if(o){var _,y;if(e.sensorEnabled||t.sensorEnabled){var x=e.filter,m=t.filter;_=0!=(x.sensorMask&m.sensorGroup)&&0!=(m.sensorMask&x.sensorGroup)}else _=!1;if(_)return 2;if(e.fluidEnabled||t.fluidEnabled){var g=e.filter,f=t.filter;y=0!=(g.fluidMask&f.fluidGroup)&&0!=(f.fluidMask&g.fluidGroup)}else y=!1;if(!!y&&!(0==i.imass&&0==n.imass&&0==i.iinertia&&0==n.iinertia))return 0;var v=e.filter,z=t.filter;return 0!=(v.collisionMask&z.collisionGroup)&&0!=(z.collisionMask&v.collisionGroup)&&!(0==i.imass&&0==n.imass&&0==i.iinertia&&0==n.iinertia)?1:-1}return-1},si.prototype.precb=null,si.prototype.prelisteners=null,si.prototype.narrowPhase=function(e,t,i,n,r){var o,a=null,s=e.body,p=t.body;o=!1;for(var l,h,u=s.constraints.head;null!=u;){var d=u.elt;if(d.ignore&&d.pair_exists(s.id,p.id)){o=!0;break}u=u.next}if(o)h=!1;else{for(var c=e;null!=c&&null==c.group;)c=null!=c.ishape?c.ishape.body:null!=c.icompound?c.icompound.compound:c.ibody.compound;var _,y=null==c?null:c.group;if(null==y)_=!1;else{for(var x=t;null!=x&&null==x.group;)x=null!=x.ishape?x.ishape.body:null!=x.icompound?x.icompound.compound:x.ibody.compound;var m=null==x?null:x.group;if(null==m)_=!1;else{for(var g=!1;null!=y&&null!=m;){if(y==m){g=y.ignore;break}y.depth<m.depth?m=m.group:y=y.group}_=g}}h=!_}if(h){var f;if(e.sensorEnabled||t.sensorEnabled){var v=e.filter,z=t.filter;f=0!=(v.sensorMask&z.sensorGroup)&&0!=(z.sensorMask&v.sensorGroup)}else f=!1;if(f)l=2;else{var w;if(e.fluidEnabled||t.fluidEnabled){var b=e.filter,S=t.filter;w=0!=(b.fluidMask&S.fluidGroup)&&0!=(S.fluidMask&b.fluidGroup)}else w=!1;if(!!w&&!(0==s.imass&&0==p.imass&&0==s.iinertia&&0==p.iinertia))l=0;else{var C=e.filter,M=t.filter;l=0!=(C.collisionMask&M.collisionGroup)&&0!=(M.collisionMask&C.collisionGroup)&&!(0==s.imass&&0==p.imass&&0==s.iinertia&&0==p.iinertia)?1:-1}}}else l=-1;if(-1!=l){var P,k;e.type>t.type?(P=t,k=e):e.type==t.type?e.id<t.id?(P=e,k=t):(k=e,P=t):(P=e,k=t);var T=P==t;if(0==l){var A;if(null==n){for(var O=null,E=(s.arbiters.length<p.arbiters.length?s:p).arbiters.head;null!=E;){var G=E.elt;if(G.id==P.id&&G.di==k.id){O=G;break}E=E.next}A=O}else A=n;var D,I=null==A,L=!1;if(I)null==Ho.zpp_pool?D=new Ho:(D=Ho.zpp_pool,Ho.zpp_pool=D.next,D.next=null);else if(null==A.fluidarb){A.cleared=!0;for(var B=A.b1.arbiters,R=null,F=B.head;null!=F;){if(F.elt==A){var j,N;null==R?(N=(j=B.head).next,B.head=N,null==B.head&&(B.pushmod=!0)):(N=(j=R.next).next,null==(R.next=N)&&(B.pushmod=!0));var U=j;U.elt=null,U.next=Ko.zpp_pool,Ko.zpp_pool=U,B.modified=!0,B.length--,B.pushmod=!0;break}F=(R=F).next}for(var V=A.b2.arbiters,H=null,W=V.head;null!=W;){if(W.elt==A){var q,X;null==H?(X=(q=V.head).next,V.head=X,null==V.head&&(V.pushmod=!0)):(X=(q=H.next).next,null==(H.next=X)&&(V.pushmod=!0));var Y=q;Y.elt=null,Y.next=Ko.zpp_pool,Ko.zpp_pool=Y,V.modified=!0,V.length--,V.pushmod=!0;break}W=(H=W).next}null!=A.pair&&(A.pair.arb=null,A.pair=null),A.active=!1,this.f_arbiters.modified=!0,null==Ho.zpp_pool?D=new Ho:(D=Ho.zpp_pool,Ho.zpp_pool=D.next,D.next=null),L=I=D.intchange=!0}else D=A.fluidarb;if(I||D.stamp!=this.stamp||r)if(D.stamp=this.stamp,$s.flowCollide(P,k,D)){if(I){var K=P.id,Z=k.id;D.b1=e.body,D.ws1=e,D.b2=t.body,D.ws2=t,D.id=K,D.di=Z;var J,Q=D.b1.arbiters;null==Ko.zpp_pool?J=new Ko:(J=Ko.zpp_pool,Ko.zpp_pool=J.next,J.next=null),J.elt=D;var $=J;$.next=Q.head,Q.head=$,Q.modified=!0,Q.length++;var ee,te=D.b2.arbiters;null==Ko.zpp_pool?ee=new Ko:(ee=Ko.zpp_pool,Ko.zpp_pool=ee.next,ee.next=null),ee.elt=D;var ie=ee;ie.next=te.head,te.head=ie,te.modified=!0,te.length++,D.active=!0,D.present=0,D.cleared=!1,D.sleeping=!1,D.fresh=!1,D.presentable=!1,D.nx=0,D.ny=1,D.dampx=0,D.dampy=0,D.adamp=0;var ne,re=this.f_arbiters;null==Qo.zpp_pool?ne=new Qo:(ne=Qo.zpp_pool,Qo.zpp_pool=ne.next,ne.next=null),ne.elt=D;var oe=ne;oe.next=re.head,re.head=oe,re.modified=!0,re.length++,D.fresh=!L}else D.fresh=D.up_stamp<this.stamp-1||D.endGenerated==this.stamp&&r;if(D.up_stamp=D.stamp,D.fresh||0==(4&D.immState)){for(var ae=!(D.immState=1),se=D.ws1.id>D.ws2.id?D.ws2:D.ws1,pe=D.ws1.id>D.ws2.id?D.ws1:D.ws2,le=this.mrca1;null!=le.head;){var he=le.head;le.head=he.next,he.elt=null,he.next=Jo.zpp_pool,Jo.zpp_pool=he,null==le.head&&(le.pushmod=!0),le.modified=!0,le.length--}le.pushmod=!0;for(var ue=this.mrca2;null!=ue.head;){var de=ue.head;ue.head=de.next,de.elt=null,de.next=Jo.zpp_pool,Jo.zpp_pool=de,null==ue.head&&(ue.pushmod=!0),ue.modified=!0,ue.length--}if(ue.pushmod=!0,null!=se.cbSet){var ce,_e=this.mrca1;null==Jo.zpp_pool?ce=new Jo:(ce=Jo.zpp_pool,Jo.zpp_pool=ce.next,ce.next=null),ce.elt=se;var ye=ce;ye.next=_e.head,_e.head=ye,_e.modified=!0,_e.length++}if(null!=se.body.cbSet){var xe,me=this.mrca1,ge=se.body;null==Jo.zpp_pool?xe=new Jo:(xe=Jo.zpp_pool,Jo.zpp_pool=xe.next,xe.next=null),xe.elt=ge;var fe=xe;fe.next=me.head,me.head=fe,me.modified=!0,me.length++}if(null!=pe.cbSet){var ve,ze=this.mrca2;null==Jo.zpp_pool?ve=new Jo:(ve=Jo.zpp_pool,Jo.zpp_pool=ve.next,ve.next=null),ve.elt=pe;var we=ve;we.next=ze.head,ze.head=we,ze.modified=!0,ze.length++}if(null!=pe.body.cbSet){var be,Se=this.mrca2,Ce=pe.body;null==Jo.zpp_pool?be=new Jo:(be=Jo.zpp_pool,Jo.zpp_pool=be.next,be.next=null),be.elt=Ce;var Me=be;Me.next=Se.head,Se.head=Me,Se.modified=!0,Se.length++}for(var Pe=se.body.compound,ke=pe.body.compound;Pe!=ke;)if((null==Pe?0:Pe.depth)<(null==ke?0:ke.depth)){if(null!=ke.cbSet){var Te,Ae=this.mrca2;null==Jo.zpp_pool?Te=new Jo:(Te=Jo.zpp_pool,Jo.zpp_pool=Te.next,Te.next=null),Te.elt=ke;var Oe=Te;Oe.next=Ae.head,Ae.head=Oe,Ae.modified=!0,Ae.length++}ke=ke.compound}else{if(null!=Pe.cbSet){var Ee,Ge=this.mrca1;null==Jo.zpp_pool?Ee=new Jo:(Ee=Jo.zpp_pool,Jo.zpp_pool=Ee.next,Ee.next=null),Ee.elt=Pe;var De=Ee;De.next=Ge.head,Ge.head=De,Ge.modified=!0,Ge.length++}Pe=Pe.compound}for(var Ie=this.mrca1.head;null!=Ie;){for(var Le=Ie.elt,Be=this.mrca2.head;null!=Be;){for(var Re,Fe=Be.elt,je=Le.cbSet,Ne=Fe.cbSet,Ue=null,Ve=(je.cbpairs.length<Ne.cbpairs.length?je.cbpairs:Ne.cbpairs).head;null!=Ve;){var He=Ve.elt;if(He.a==je&&He.b==Ne||He.a==Ne&&He.b==je){Ue=He;break}Ve=Ve.next}if(null==Ue)null==No.zpp_pool?Re=new No:(Re=No.zpp_pool,No.zpp_pool=Re.next,Re.next=null),Re.zip_listeners=!0,jo.setlt(je,Ne)?(Re.a=je,Re.b=Ne):(Re.a=Ne,Re.b=je),Ue=Re,je.cbpairs.add(Ue),Ne!=je&&Ne.cbpairs.add(Ue);if(Ue.zip_listeners&&(Ue.zip_listeners=!1,Ue.__validate()),null!=Ue.listeners.head){for(var We=null,qe=null,Xe=this.prelisteners;null!=Xe.head;){var Ye=Xe.head;Xe.head=Ye.next,Ye.elt=null,Ye.next=Zo.zpp_pool,Zo.zpp_pool=Ye,null==Xe.head&&(Xe.pushmod=!0),Xe.modified=!0,Xe.length--}Xe.pushmod=!0;for(var Ke,Ze=null,Je=null,Qe=(je.cbpairs.length<Ne.cbpairs.length?je.cbpairs:Ne.cbpairs).head;null!=Qe;){var $e=Qe.elt;if($e.a==je&&$e.b==Ne||$e.a==Ne&&$e.b==je){Je=$e;break}Qe=Qe.next}if(null==Je)null==No.zpp_pool?Ke=new No:(Ke=No.zpp_pool,No.zpp_pool=Ke.next,Ke.next=null),Ke.zip_listeners=!0,jo.setlt(je,Ne)?(Ke.a=je,Ke.b=Ne):(Ke.a=Ne,Ke.b=je),Je=Ke,je.cbpairs.add(Je),Ne!=je&&Ne.cbpairs.add(Je);Je.zip_listeners&&(Je.zip_listeners=!1,Je.__validate());for(var et=Je.listeners.head;null!=et;){var tt=et.elt;if(5==tt.event&&0!=(4&tt.itype)){var it,nt=this.prelisteners;null==Zo.zpp_pool?it=new Zo:(it=Zo.zpp_pool,Zo.zpp_pool=it.next,it.next=null),it.elt=tt;var rt=it;null==Ze?(rt.next=nt.head,nt.head=rt):(rt.next=Ze.next,Ze.next=rt),nt.pushmod=nt.modified=!0,nt.length++,Ze=rt,ae=!!ae||!tt.pure}et=et.next}if(null!=this.prelisteners.head){if(null==(We=Xo.get(Le,Fe))&&(qe=Yo.get(Le,Fe),this.add_callbackset(qe)),null==We||(We.FLUIDstamp!=this.stamp||r)&&0==(4&We.FLUIDstate)){if(null!=qe&&(We=qe),null!=We)for(var ot=this.prelisteners.head;null!=ot;)7==ot.elt.itype&&(We.COLLISIONstamp=this.stamp,We.SENSORstamp=this.stamp),We.FLUIDstamp=this.stamp,ot=ot.next;var at=D.active;D.active=!0,this.precb.zpp_inner.pre_arbiter=D,this.precb.zpp_inner.set=We;for(var st=this.prelisteners.head;null!=st;){var pt=st.elt;this.precb.zpp_inner.listener=pt;var lt,ht=this.precb.zpp_inner,ut=We.int1,dt=We.int2,ct=pt.options1,_t=ut.cbTypes;if(ct.nonemptyintersection(_t,ct.includes)&&!ct.nonemptyintersection(_t,ct.excludes)){var yt=pt.options2,xt=dt.cbTypes;lt=!!yt.nonemptyintersection(xt,yt.includes)&&!yt.nonemptyintersection(xt,yt.excludes)}else lt=!1;lt?(ht.int1=ut,ht.int2=dt):(ht.int1=dt,ht.int2=ut),this.precb.zpp_inner.pre_swapped=Le!=this.precb.zpp_inner.int1;var mt,gt=pt.handlerp(this.precb);if(null!=gt)null==Uo.PreFlag_ACCEPT&&(Uo.internal=!0,Uo.PreFlag_ACCEPT=new Fo,Uo.internal=!1),mt=gt==Uo.PreFlag_ACCEPT?5:(null==Uo.PreFlag_ACCEPT_ONCE&&(Uo.internal=!0,Uo.PreFlag_ACCEPT_ONCE=new Fo,Uo.internal=!1),gt==Uo.PreFlag_ACCEPT_ONCE?1:(null==Uo.PreFlag_IGNORE&&(Uo.internal=!0,Uo.PreFlag_IGNORE=new Fo,Uo.internal=!1),gt==Uo.PreFlag_IGNORE?6:2)),D.immState=mt;st=st.next}if(D.active=at,null!=We)for(var ft=this.prelisteners.head;null!=ft;)7==ft.elt.itype&&(We.COLLISIONstate=D.immState,We.SENSORstate=D.immState),We.FLUIDstate=D.immState,ft=ft.next}else null==We?0==(4&D.immState)&&(D.immState=1):D.immState=We.FLUIDstate;Be=Be.next}else Be=Be.next}else Be=Be.next}Ie=Ie.next}if(ae&&0==(4&D.immState)){if(2==D.b1.type){var vt=D.b1;vt.world||(vt.component.waket=this.stamp+(this.midstep?0:1),3==vt.type&&(vt.kinematicDelaySleep=!0),vt.component.sleeping&&this.really_wake(vt,!1))}if(2==D.b1.type){var zt=D.b2;zt.world||(zt.component.waket=this.stamp+(this.midstep?0:1),3==zt.type&&(zt.kinematicDelaySleep=!0),zt.component.sleeping&&this.really_wake(zt,!1))}}}if(0!=(1&D.immState)){if(2==D.b1.type&&D.b1.component.sleeping){var wt=D.b1;wt.world||(wt.component.waket=this.stamp+(this.midstep?0:1),3==wt.type&&(wt.kinematicDelaySleep=!0),wt.component.sleeping&&this.really_wake(wt,!1))}if(2==D.b2.type&&D.b2.component.sleeping){var bt=D.b2;bt.world||(bt.component.waket=this.stamp+(this.midstep?0:1),3==bt.type&&(bt.kinematicDelaySleep=!0),bt.component.sleeping&&this.really_wake(bt,!1))}}if(D.sleeping){D.sleeping=!1;var St,Ct=this.f_arbiters;null==Qo.zpp_pool?St=new Qo:(St=Qo.zpp_pool,Qo.zpp_pool=St.next,St.next=null),St.elt=D;var Mt=St;Mt.next=Ct.head,Ct.head=Mt,Ct.modified=!0,Ct.length++}a=D}else if(I){var Pt=D;Pt.next=Ho.zpp_pool,Ho.zpp_pool=Pt,a=null}else a=D;else a=D}else if(1==l){var kt,Tt=i?this.c_arbiters_true:this.c_arbiters_false;if(null==n){for(var At=null,Ot=(s.arbiters.length<p.arbiters.length?s:p).arbiters.head;null!=Ot;){var Et=Ot.elt;if(Et.id==P.id&&Et.di==k.id){At=Et;break}Ot=Ot.next}kt=At}else kt=n;var Gt,Dt=null==kt,It=!1;if(Dt)null==Wo.zpp_pool?Gt=new Wo:(Gt=Wo.zpp_pool,Wo.zpp_pool=Gt.next,Gt.next=null),Gt.stat=i;else if(null==kt.colarb){kt.cleared=!0;for(var Lt=kt.b1.arbiters,Bt=null,Rt=Lt.head;null!=Rt;){if(Rt.elt==kt){var Ft,jt;null==Bt?(jt=(Ft=Lt.head).next,Lt.head=jt,null==Lt.head&&(Lt.pushmod=!0)):(jt=(Ft=Bt.next).next,null==(Bt.next=jt)&&(Lt.pushmod=!0));var Nt=Ft;Nt.elt=null,Nt.next=Ko.zpp_pool,Ko.zpp_pool=Nt,Lt.modified=!0,Lt.length--,Lt.pushmod=!0;break}Rt=(Bt=Rt).next}for(var Ut=kt.b2.arbiters,Vt=null,Ht=Ut.head;null!=Ht;){if(Ht.elt==kt){var Wt,qt;null==Vt?(qt=(Wt=Ut.head).next,Ut.head=qt,null==Ut.head&&(Ut.pushmod=!0)):(qt=(Wt=Vt.next).next,null==(Vt.next=qt)&&(Ut.pushmod=!0));var Xt=Wt;Xt.elt=null,Xt.next=Ko.zpp_pool,Ko.zpp_pool=Xt,Ut.modified=!0,Ut.length--,Ut.pushmod=!0;break}Ht=(Vt=Ht).next}null!=kt.pair&&(kt.pair.arb=null,kt.pair=null),kt.active=!1,this.f_arbiters.modified=!0,null==Wo.zpp_pool?Gt=new Wo:(Gt=Wo.zpp_pool,Wo.zpp_pool=Gt.next,Gt.next=null),Gt.intchange=!0,Gt.stat=i,It=Dt=!0}else T=P!=(Gt=kt.colarb).s1,Gt.stat!=i&&(Gt.stat=i,Gt.sleeping||((i?this.c_arbiters_false:this.c_arbiters_true).remove(Gt),Tt.add(Gt)));if(Dt||Gt.stamp!=this.stamp||r)if(Gt.stamp=this.stamp,$s.contactCollide(P,k,Gt,T)){if(Dt){var Yt=P.id,Kt=k.id;Gt.b1=e.body,Gt.ws1=e,Gt.b2=t.body,Gt.ws2=t,Gt.id=Yt,Gt.di=Kt;var Zt,Jt=Gt.b1.arbiters;null==Ko.zpp_pool?Zt=new Ko:(Zt=Ko.zpp_pool,Ko.zpp_pool=Zt.next,Zt.next=null),Zt.elt=Gt;var Qt=Zt;Qt.next=Jt.head,Jt.head=Qt,Jt.modified=!0,Jt.length++;var $t,ei=Gt.b2.arbiters;null==Ko.zpp_pool?$t=new Ko:($t=Ko.zpp_pool,Ko.zpp_pool=$t.next,$t.next=null),$t.elt=Gt;var ti,ii=$t;ii.next=ei.head,ei.head=ii,ei.modified=!0,ei.length++,Gt.active=!0,Gt.present=0,Gt.cleared=!1,Gt.sleeping=!1,Gt.fresh=!1,Gt.presentable=!1,Gt.s1=e,Gt.s2=t,Gt.userdef_restitution||(Gt.s1.material.elasticity<=-1/0||Gt.s2.material.elasticity<=-1/0?Gt.restitution=0:Gt.s1.material.elasticity>=1/0||Gt.s2.material.elasticity>=1/0?Gt.restitution=1:Gt.restitution=(Gt.s1.material.elasticity+Gt.s2.material.elasticity)/2,Gt.restitution<0&&(Gt.restitution=0),1<Gt.restitution&&(Gt.restitution=1)),Gt.userdef_dyn_fric||(Gt.dyn_fric=Math.sqrt(Gt.s1.material.dynamicFriction*Gt.s2.material.dynamicFriction)),Gt.userdef_stat_fric||(Gt.stat_fric=Math.sqrt(Gt.s1.material.staticFriction*Gt.s2.material.staticFriction)),Gt.userdef_rfric||(Gt.rfric=Math.sqrt(Gt.s1.material.rollingFriction*Gt.s2.material.rollingFriction)),null==ea.zpp_pool?ti=new ea:(ti=ea.zpp_pool,ea.zpp_pool=ti.next,ti.next=null),ti.elt=Gt;var ni=ti;ni.next=Tt.head,Tt.head=ni,Tt.modified=!0,Tt.length++,Gt.fresh=!It}else Gt.fresh=Gt.up_stamp<this.stamp-1||Gt.endGenerated==this.stamp&&r;if(Gt.up_stamp=Gt.stamp,Gt.fresh||0==(4&Gt.immState)){for(var ri=!(Gt.immState=1),oi=Gt.ws1.id>Gt.ws2.id?Gt.ws2:Gt.ws1,ai=Gt.ws1.id>Gt.ws2.id?Gt.ws1:Gt.ws2,si=this.mrca1;null!=si.head;){var pi=si.head;si.head=pi.next,pi.elt=null,pi.next=Jo.zpp_pool,Jo.zpp_pool=pi,null==si.head&&(si.pushmod=!0),si.modified=!0,si.length--}si.pushmod=!0;for(var li=this.mrca2;null!=li.head;){var hi=li.head;li.head=hi.next,hi.elt=null,hi.next=Jo.zpp_pool,Jo.zpp_pool=hi,null==li.head&&(li.pushmod=!0),li.modified=!0,li.length--}if(li.pushmod=!0,null!=oi.cbSet){var ui,di=this.mrca1;null==Jo.zpp_pool?ui=new Jo:(ui=Jo.zpp_pool,Jo.zpp_pool=ui.next,ui.next=null),ui.elt=oi;var ci=ui;ci.next=di.head,di.head=ci,di.modified=!0,di.length++}if(null!=oi.body.cbSet){var _i,yi=this.mrca1,xi=oi.body;null==Jo.zpp_pool?_i=new Jo:(_i=Jo.zpp_pool,Jo.zpp_pool=_i.next,_i.next=null),_i.elt=xi;var mi=_i;mi.next=yi.head,yi.head=mi,yi.modified=!0,yi.length++}if(null!=ai.cbSet){var gi,fi=this.mrca2;null==Jo.zpp_pool?gi=new Jo:(gi=Jo.zpp_pool,Jo.zpp_pool=gi.next,gi.next=null),gi.elt=ai;var vi=gi;vi.next=fi.head,fi.head=vi,fi.modified=!0,fi.length++}if(null!=ai.body.cbSet){var zi,wi=this.mrca2,bi=ai.body;null==Jo.zpp_pool?zi=new Jo:(zi=Jo.zpp_pool,Jo.zpp_pool=zi.next,zi.next=null),zi.elt=bi;var Si=zi;Si.next=wi.head,wi.head=Si,wi.modified=!0,wi.length++}for(var Ci=oi.body.compound,Mi=ai.body.compound;Ci!=Mi;)if((null==Ci?0:Ci.depth)<(null==Mi?0:Mi.depth)){if(null!=Mi.cbSet){var Pi,ki=this.mrca2;null==Jo.zpp_pool?Pi=new Jo:(Pi=Jo.zpp_pool,Jo.zpp_pool=Pi.next,Pi.next=null),Pi.elt=Mi;var Ti=Pi;Ti.next=ki.head,ki.head=Ti,ki.modified=!0,ki.length++}Mi=Mi.compound}else{if(null!=Ci.cbSet){var Ai,Oi=this.mrca1;null==Jo.zpp_pool?Ai=new Jo:(Ai=Jo.zpp_pool,Jo.zpp_pool=Ai.next,Ai.next=null),Ai.elt=Ci;var Ei=Ai;Ei.next=Oi.head,Oi.head=Ei,Oi.modified=!0,Oi.length++}Ci=Ci.compound}for(var Gi=this.mrca1.head;null!=Gi;){for(var Di=Gi.elt,Ii=this.mrca2.head;null!=Ii;){for(var Li,Bi=Ii.elt,Ri=Di.cbSet,Fi=Bi.cbSet,ji=null,Ni=(Ri.cbpairs.length<Fi.cbpairs.length?Ri.cbpairs:Fi.cbpairs).head;null!=Ni;){var Ui=Ni.elt;if(Ui.a==Ri&&Ui.b==Fi||Ui.a==Fi&&Ui.b==Ri){ji=Ui;break}Ni=Ni.next}if(null==ji)null==No.zpp_pool?Li=new No:(Li=No.zpp_pool,No.zpp_pool=Li.next,Li.next=null),Li.zip_listeners=!0,jo.setlt(Ri,Fi)?(Li.a=Ri,Li.b=Fi):(Li.a=Fi,Li.b=Ri),ji=Li,Ri.cbpairs.add(ji),Fi!=Ri&&Fi.cbpairs.add(ji);if(ji.zip_listeners&&(ji.zip_listeners=!1,ji.__validate()),null!=ji.listeners.head){for(var Vi=null,Hi=null,Wi=this.prelisteners;null!=Wi.head;){var qi=Wi.head;Wi.head=qi.next,qi.elt=null,qi.next=Zo.zpp_pool,Zo.zpp_pool=qi,null==Wi.head&&(Wi.pushmod=!0),Wi.modified=!0,Wi.length--}Wi.pushmod=!0;for(var Xi,Yi=null,Ki=null,Zi=(Ri.cbpairs.length<Fi.cbpairs.length?Ri.cbpairs:Fi.cbpairs).head;null!=Zi;){var Ji=Zi.elt;if(Ji.a==Ri&&Ji.b==Fi||Ji.a==Fi&&Ji.b==Ri){Ki=Ji;break}Zi=Zi.next}if(null==Ki)null==No.zpp_pool?Xi=new No:(Xi=No.zpp_pool,No.zpp_pool=Xi.next,Xi.next=null),Xi.zip_listeners=!0,jo.setlt(Ri,Fi)?(Xi.a=Ri,Xi.b=Fi):(Xi.a=Fi,Xi.b=Ri),Ki=Xi,Ri.cbpairs.add(Ki),Fi!=Ri&&Fi.cbpairs.add(Ki);Ki.zip_listeners&&(Ki.zip_listeners=!1,Ki.__validate());for(var Qi=Ki.listeners.head;null!=Qi;){var $i=Qi.elt;if(5==$i.event&&0!=(1&$i.itype)){var en,tn=this.prelisteners;null==Zo.zpp_pool?en=new Zo:(en=Zo.zpp_pool,Zo.zpp_pool=en.next,en.next=null),en.elt=$i;var nn=en;null==Yi?(nn.next=tn.head,tn.head=nn):(nn.next=Yi.next,Yi.next=nn),tn.pushmod=tn.modified=!0,tn.length++,Yi=nn,ri=!!ri||!$i.pure}Qi=Qi.next}if(null!=this.prelisteners.head){if(null==(Vi=Xo.get(Di,Bi))&&(Hi=Yo.get(Di,Bi),this.add_callbackset(Hi)),null==Vi||(Vi.COLLISIONstamp!=this.stamp||r)&&0==(4&Vi.COLLISIONstate)){if(null!=Hi&&(Vi=Hi),null!=Vi)for(var rn=this.prelisteners.head;null!=rn;)7==rn.elt.itype?(Vi.COLLISIONstamp=this.stamp,Vi.SENSORstamp=this.stamp,Vi.FLUIDstamp=this.stamp):Vi.COLLISIONstamp=this.stamp,rn=rn.next;var on=Gt.active,an=Gt.active=!0,sn=null,pn=null,ln=Gt.innards.next;Gt.hc2=!1;for(var hn=Gt.contacts.next;null!=hn;){var un=hn;if(un.stamp+Qs.arbiterExpirationDelay<Gt.stamp){var dn,cn,_n=Gt.contacts;null==sn?(cn=(dn=_n.next).next,_n.next=cn,null==_n.next&&(_n.pushmod=!0)):(cn=(dn=sn.next).next,null==(sn.next=cn)&&(_n.pushmod=!0)),dn._inuse=!1,_n.modified=!0,_n.length--,_n.pushmod=!0,hn=cn;var yn,xn,mn=Gt.innards;null==pn?(xn=(yn=mn.next).next,mn.next=xn,null==mn.next&&(mn.pushmod=!0)):(xn=(yn=pn.next).next,null==(pn.next=xn)&&(mn.pushmod=!0)),yn._inuse=!1,mn.modified=!0,mn.length--,mn.pushmod=!0,ln=xn,un.arbiter=null,un.next=qo.zpp_pool,qo.zpp_pool=un}else{var gn=un.inner,fn=un.active;un.active=un.stamp==Gt.stamp,un.active&&(an?(an=!1,Gt.c1=gn,Gt.oc1=un):(Gt.hc2=!0,Gt.c2=gn,Gt.oc2=un)),fn!=un.active&&(Gt.contacts.modified=!0),sn=hn,ln=(pn=ln).next,hn=hn.next}}if(Gt.hc2)if(Gt.hpc2=!0,Gt.oc1.posOnly){var vn=Gt.c1;Gt.c1=Gt.c2,Gt.c2=vn;var zn=Gt.oc1;Gt.oc1=Gt.oc2,Gt.oc2=zn,Gt.hc2=!1}else Gt.oc2.posOnly&&(Gt.hc2=!1);else Gt.hpc2=!1;this.precb.zpp_inner.pre_arbiter=Gt,this.precb.zpp_inner.set=Vi;for(var wn=this.prelisteners.head;null!=wn;){var bn=wn.elt;this.precb.zpp_inner.listener=bn;var Sn,Cn=this.precb.zpp_inner,Mn=Vi.int1,Pn=Vi.int2,kn=bn.options1,Tn=Mn.cbTypes;if(kn.nonemptyintersection(Tn,kn.includes)&&!kn.nonemptyintersection(Tn,kn.excludes)){var An=bn.options2,On=Pn.cbTypes;Sn=!!An.nonemptyintersection(On,An.includes)&&!An.nonemptyintersection(On,An.excludes)}else Sn=!1;Sn?(Cn.int1=Mn,Cn.int2=Pn):(Cn.int1=Pn,Cn.int2=Mn),this.precb.zpp_inner.pre_swapped=Di!=this.precb.zpp_inner.int1;var En,Gn=bn.handlerp(this.precb);if(null!=Gn)null==Uo.PreFlag_ACCEPT&&(Uo.internal=!0,Uo.PreFlag_ACCEPT=new Fo,Uo.internal=!1),En=Gn==Uo.PreFlag_ACCEPT?5:(null==Uo.PreFlag_ACCEPT_ONCE&&(Uo.internal=!0,Uo.PreFlag_ACCEPT_ONCE=new Fo,Uo.internal=!1),Gn==Uo.PreFlag_ACCEPT_ONCE?1:(null==Uo.PreFlag_IGNORE&&(Uo.internal=!0,Uo.PreFlag_IGNORE=new Fo,Uo.internal=!1),Gn==Uo.PreFlag_IGNORE?6:2)),Gt.immState=En;wn=wn.next}if(Gt.active=on,null!=Vi)for(var Dn=this.prelisteners.head;null!=Dn;)7==Dn.elt.itype?(Vi.COLLISIONstate=Gt.immState,Vi.SENSORstate=Gt.immState,Vi.FLUIDstate=Gt.immState):Vi.COLLISIONstate=Gt.immState,Dn=Dn.next}else null==Vi?0==(4&Gt.immState)&&(Gt.immState=1):Gt.immState=Vi.COLLISIONstate;Ii=Ii.next}else Ii=Ii.next}else Ii=Ii.next}Gi=Gi.next}if(ri&&0==(4&Gt.immState)){if(2==Gt.b1.type){var In=Gt.b1;In.world||(In.component.waket=this.stamp+(this.midstep?0:1),3==In.type&&(In.kinematicDelaySleep=!0),In.component.sleeping&&this.really_wake(In,!1))}if(2==Gt.b1.type){var Ln=Gt.b2;Ln.world||(Ln.component.waket=this.stamp+(this.midstep?0:1),3==Ln.type&&(Ln.kinematicDelaySleep=!0),Ln.component.sleeping&&this.really_wake(Ln,!1))}}}if(0!=(1&Gt.immState)){if(2==Gt.b1.type&&Gt.b1.component.sleeping){var Bn=Gt.b1;Bn.world||(Bn.component.waket=this.stamp+(this.midstep?0:1),3==Bn.type&&(Bn.kinematicDelaySleep=!0),Bn.component.sleeping&&this.really_wake(Bn,!1))}if(2==Gt.b2.type&&Gt.b2.component.sleeping){var Rn=Gt.b2;Rn.world||(Rn.component.waket=this.stamp+(this.midstep?0:1),3==Rn.type&&(Rn.kinematicDelaySleep=!0),Rn.component.sleeping&&this.really_wake(Rn,!1))}}if(Gt.sleeping){var Fn;Gt.sleeping=!1,null==ea.zpp_pool?Fn=new ea:(Fn=ea.zpp_pool,ea.zpp_pool=Fn.next,Fn.next=null),Fn.elt=Gt;var jn=Fn;jn.next=Tt.head,Tt.head=jn,Tt.modified=!0,Tt.length++}a=Gt}else if(Dt){var Nn=Gt;Nn.userdef_dyn_fric=!1,Nn.userdef_stat_fric=!1,Nn.userdef_restitution=!1,Nn.userdef_rfric=!1,Nn.__ref_edge1=Nn.__ref_edge2=null,Nn.next=Wo.zpp_pool,Wo.zpp_pool=Nn,a=null}else a=Gt;else a=Gt}else{var Un;if(null==n){for(var Vn=null,Hn=(s.arbiters.length<p.arbiters.length?s:p).arbiters.head;null!=Hn;){var Wn=Hn.elt;if(Wn.id==P.id&&Wn.di==k.id){Vn=Wn;break}Hn=Hn.next}Un=Vn}else Un=n;var qn,Xn=null==Un,Yn=!1;if(Xn)null==Vo.zpp_pool?qn=new Vo:(qn=Vo.zpp_pool,Vo.zpp_pool=qn.next,qn.next=null);else if(null==Un.sensorarb){Un.cleared=!0;for(var Kn=Un.b1.arbiters,Zn=null,Jn=Kn.head;null!=Jn;){if(Jn.elt==Un){var Qn,$n;null==Zn?($n=(Qn=Kn.head).next,Kn.head=$n,null==Kn.head&&(Kn.pushmod=!0)):($n=(Qn=Zn.next).next,null==(Zn.next=$n)&&(Kn.pushmod=!0));var er=Qn;er.elt=null,er.next=Ko.zpp_pool,Ko.zpp_pool=er,Kn.modified=!0,Kn.length--,Kn.pushmod=!0;break}Jn=(Zn=Jn).next}for(var tr=Un.b2.arbiters,ir=null,nr=tr.head;null!=nr;){if(nr.elt==Un){var rr,or;null==ir?(or=(rr=tr.head).next,tr.head=or,null==tr.head&&(tr.pushmod=!0)):(or=(rr=ir.next).next,null==(ir.next=or)&&(tr.pushmod=!0));var ar=rr;ar.elt=null,ar.next=Ko.zpp_pool,Ko.zpp_pool=ar,tr.modified=!0,tr.length--,tr.pushmod=!0;break}nr=(ir=nr).next}null!=Un.pair&&(Un.pair.arb=null,Un.pair=null),Un.active=!1,this.f_arbiters.modified=!0,null==Vo.zpp_pool?qn=new Vo:(qn=Vo.zpp_pool,Vo.zpp_pool=qn.next,qn.next=null),Yn=Xn=qn.intchange=!0}else qn=Un.sensorarb;if(Xn||qn.stamp!=this.stamp||r)if(qn.stamp=this.stamp,$s.testCollide(P,k)){if(Xn){var sr=P.id,pr=k.id;qn.b1=e.body,qn.ws1=e,qn.b2=t.body,qn.ws2=t,qn.id=sr,qn.di=pr;var lr,hr=qn.b1.arbiters;null==Ko.zpp_pool?lr=new Ko:(lr=Ko.zpp_pool,Ko.zpp_pool=lr.next,lr.next=null),lr.elt=qn;var ur=lr;ur.next=hr.head,hr.head=ur,hr.modified=!0,hr.length++;var dr,cr=qn.b2.arbiters;null==Ko.zpp_pool?dr=new Ko:(dr=Ko.zpp_pool,Ko.zpp_pool=dr.next,dr.next=null),dr.elt=qn;var _r=dr;_r.next=cr.head,cr.head=_r,cr.modified=!0,cr.length++,qn.active=!0,qn.present=0,qn.cleared=!1,qn.sleeping=!1,qn.fresh=!1,qn.presentable=!1;var yr,xr=this.s_arbiters;null==$o.zpp_pool?yr=new $o:(yr=$o.zpp_pool,$o.zpp_pool=yr.next,yr.next=null),yr.elt=qn;var mr=yr;mr.next=xr.head,xr.head=mr,xr.modified=!0,xr.length++,qn.fresh=!Yn}else qn.fresh=qn.up_stamp<this.stamp-1||qn.endGenerated==this.stamp&&r;if(qn.up_stamp=qn.stamp,qn.fresh||0==(4&qn.immState)){for(var gr=!(qn.immState=1),fr=qn.ws1.id>qn.ws2.id?qn.ws2:qn.ws1,vr=qn.ws1.id>qn.ws2.id?qn.ws1:qn.ws2,zr=this.mrca1;null!=zr.head;){var wr=zr.head;zr.head=wr.next,wr.elt=null,wr.next=Jo.zpp_pool,Jo.zpp_pool=wr,null==zr.head&&(zr.pushmod=!0),zr.modified=!0,zr.length--}zr.pushmod=!0;for(var br=this.mrca2;null!=br.head;){var Sr=br.head;br.head=Sr.next,Sr.elt=null,Sr.next=Jo.zpp_pool,Jo.zpp_pool=Sr,null==br.head&&(br.pushmod=!0),br.modified=!0,br.length--}if(br.pushmod=!0,null!=fr.cbSet){var Cr,Mr=this.mrca1;null==Jo.zpp_pool?Cr=new Jo:(Cr=Jo.zpp_pool,Jo.zpp_pool=Cr.next,Cr.next=null),Cr.elt=fr;var Pr=Cr;Pr.next=Mr.head,Mr.head=Pr,Mr.modified=!0,Mr.length++}if(null!=fr.body.cbSet){var kr,Tr=this.mrca1,Ar=fr.body;null==Jo.zpp_pool?kr=new Jo:(kr=Jo.zpp_pool,Jo.zpp_pool=kr.next,kr.next=null),kr.elt=Ar;var Or=kr;Or.next=Tr.head,Tr.head=Or,Tr.modified=!0,Tr.length++}if(null!=vr.cbSet){var Er,Gr=this.mrca2;null==Jo.zpp_pool?Er=new Jo:(Er=Jo.zpp_pool,Jo.zpp_pool=Er.next,Er.next=null),Er.elt=vr;var Dr=Er;Dr.next=Gr.head,Gr.head=Dr,Gr.modified=!0,Gr.length++}if(null!=vr.body.cbSet){var Ir,Lr=this.mrca2,Br=vr.body;null==Jo.zpp_pool?Ir=new Jo:(Ir=Jo.zpp_pool,Jo.zpp_pool=Ir.next,Ir.next=null),Ir.elt=Br;var Rr=Ir;Rr.next=Lr.head,Lr.head=Rr,Lr.modified=!0,Lr.length++}for(var Fr=fr.body.compound,jr=vr.body.compound;Fr!=jr;)if((null==Fr?0:Fr.depth)<(null==jr?0:jr.depth)){if(null!=jr.cbSet){var Nr,Ur=this.mrca2;null==Jo.zpp_pool?Nr=new Jo:(Nr=Jo.zpp_pool,Jo.zpp_pool=Nr.next,Nr.next=null),Nr.elt=jr;var Vr=Nr;Vr.next=Ur.head,Ur.head=Vr,Ur.modified=!0,Ur.length++}jr=jr.compound}else{if(null!=Fr.cbSet){var Hr,Wr=this.mrca1;null==Jo.zpp_pool?Hr=new Jo:(Hr=Jo.zpp_pool,Jo.zpp_pool=Hr.next,Hr.next=null),Hr.elt=Fr;var qr=Hr;qr.next=Wr.head,Wr.head=qr,Wr.modified=!0,Wr.length++}Fr=Fr.compound}for(var Xr=this.mrca1.head;null!=Xr;){for(var Yr=Xr.elt,Kr=this.mrca2.head;null!=Kr;){for(var Zr,Jr=Kr.elt,Qr=Yr.cbSet,$r=Jr.cbSet,eo=null,to=(Qr.cbpairs.length<$r.cbpairs.length?Qr.cbpairs:$r.cbpairs).head;null!=to;){var io=to.elt;if(io.a==Qr&&io.b==$r||io.a==$r&&io.b==Qr){eo=io;break}to=to.next}if(null==eo)null==No.zpp_pool?Zr=new No:(Zr=No.zpp_pool,No.zpp_pool=Zr.next,Zr.next=null),Zr.zip_listeners=!0,jo.setlt(Qr,$r)?(Zr.a=Qr,Zr.b=$r):(Zr.a=$r,Zr.b=Qr),eo=Zr,Qr.cbpairs.add(eo),$r!=Qr&&$r.cbpairs.add(eo);if(eo.zip_listeners&&(eo.zip_listeners=!1,eo.__validate()),null!=eo.listeners.head){for(var no=null,ro=null,oo=this.prelisteners;null!=oo.head;){var ao=oo.head;oo.head=ao.next,ao.elt=null,ao.next=Zo.zpp_pool,Zo.zpp_pool=ao,null==oo.head&&(oo.pushmod=!0),oo.modified=!0,oo.length--}oo.pushmod=!0;for(var so,po=null,lo=null,ho=(Qr.cbpairs.length<$r.cbpairs.length?Qr.cbpairs:$r.cbpairs).head;null!=ho;){var uo=ho.elt;if(uo.a==Qr&&uo.b==$r||uo.a==$r&&uo.b==Qr){lo=uo;break}ho=ho.next}if(null==lo)null==No.zpp_pool?so=new No:(so=No.zpp_pool,No.zpp_pool=so.next,so.next=null),so.zip_listeners=!0,jo.setlt(Qr,$r)?(so.a=Qr,so.b=$r):(so.a=$r,so.b=Qr),lo=so,Qr.cbpairs.add(lo),$r!=Qr&&$r.cbpairs.add(lo);lo.zip_listeners&&(lo.zip_listeners=!1,lo.__validate());for(var co=lo.listeners.head;null!=co;){var _o=co.elt;if(5==_o.event&&0!=(2&_o.itype)){var yo,xo=this.prelisteners;null==Zo.zpp_pool?yo=new Zo:(yo=Zo.zpp_pool,Zo.zpp_pool=yo.next,yo.next=null),yo.elt=_o;var mo=yo;null==po?(mo.next=xo.head,xo.head=mo):(mo.next=po.next,po.next=mo),xo.pushmod=xo.modified=!0,xo.length++,po=mo,gr=!!gr||!_o.pure}co=co.next}if(null!=this.prelisteners.head){if(null==(no=Xo.get(Yr,Jr))&&(ro=Yo.get(Yr,Jr),this.add_callbackset(ro)),null==no||(no.SENSORstamp!=this.stamp||r)&&0==(4&no.SENSORstate)){if(null!=ro&&(no=ro),null!=no)for(var go=this.prelisteners.head;null!=go;)7==go.elt.itype?(no.COLLISIONstamp=this.stamp,no.SENSORstamp=this.stamp,no.FLUIDstamp=this.stamp):no.SENSORstamp=this.stamp,go=go.next;var fo=qn.active;qn.active=!0,this.precb.zpp_inner.pre_arbiter=qn,this.precb.zpp_inner.set=no;for(var vo=this.prelisteners.head;null!=vo;){var zo=vo.elt;this.precb.zpp_inner.listener=zo;var wo,bo=this.precb.zpp_inner,So=no.int1,Co=no.int2,Mo=zo.options1,Po=So.cbTypes;if(Mo.nonemptyintersection(Po,Mo.includes)&&!Mo.nonemptyintersection(Po,Mo.excludes)){var ko=zo.options2,To=Co.cbTypes;wo=!!ko.nonemptyintersection(To,ko.includes)&&!ko.nonemptyintersection(To,ko.excludes)}else wo=!1;wo?(bo.int1=So,bo.int2=Co):(bo.int1=Co,bo.int2=So),this.precb.zpp_inner.pre_swapped=Yr!=this.precb.zpp_inner.int1;var Ao,Oo=zo.handlerp(this.precb);if(null!=Oo)null==Uo.PreFlag_ACCEPT&&(Uo.internal=!0,Uo.PreFlag_ACCEPT=new Fo,Uo.internal=!1),Ao=Oo==Uo.PreFlag_ACCEPT?5:(null==Uo.PreFlag_ACCEPT_ONCE&&(Uo.internal=!0,Uo.PreFlag_ACCEPT_ONCE=new Fo,Uo.internal=!1),Oo==Uo.PreFlag_ACCEPT_ONCE?1:(null==Uo.PreFlag_IGNORE&&(Uo.internal=!0,Uo.PreFlag_IGNORE=new Fo,Uo.internal=!1),Oo==Uo.PreFlag_IGNORE?6:2)),qn.immState=Ao;vo=vo.next}if(qn.active=fo,null!=no)for(var Eo=this.prelisteners.head;null!=Eo;)7==Eo.elt.itype?(no.COLLISIONstate=qn.immState,no.SENSORstate=qn.immState,no.FLUIDstate=qn.immState):no.SENSORstate=qn.immState,Eo=Eo.next}else null==no?0==(4&qn.immState)&&(qn.immState=1):qn.immState=no.SENSORstate;Kr=Kr.next}else Kr=Kr.next}else Kr=Kr.next}Xr=Xr.next}if(gr&&0==(4&qn.immState)){if(1!=qn.b1.type){var Go=qn.b1;Go.world||(Go.component.waket=this.stamp+(this.midstep?0:1),3==Go.type&&(Go.kinematicDelaySleep=!0),Go.component.sleeping&&this.really_wake(Go,!1))}if(1!=qn.b2.type){var Do=qn.b2;Do.world||(Do.component.waket=this.stamp+(this.midstep?0:1),3==Do.type&&(Do.kinematicDelaySleep=!0),Do.component.sleeping&&this.really_wake(Do,!1))}}}if(qn.sleeping){qn.sleeping=!1;var Io,Lo=this.s_arbiters;null==$o.zpp_pool?Io=new $o:(Io=$o.zpp_pool,$o.zpp_pool=Io.next,Io.next=null),Io.elt=qn;var Bo=Io;Bo.next=Lo.head,Lo.head=Bo,Lo.modified=!0,Lo.length++}a=qn}else if(Xn){var Ro=qn;Ro.next=Vo.zpp_pool,Vo.zpp_pool=Ro,a=null}else a=qn;else a=qn}}return a},si.prototype.mrca1=null,si.prototype.mrca2=null,si.prototype.MRCA_chains=function(e,t){for(var i=this.mrca1;null!=i.head;){var n=i.head;i.head=n.next,n.elt=null,n.next=Jo.zpp_pool,Jo.zpp_pool=n,null==i.head&&(i.pushmod=!0),i.modified=!0,i.length--}i.pushmod=!0;for(var r=this.mrca2;null!=r.head;){var o=r.head;r.head=o.next,o.elt=null,o.next=Jo.zpp_pool,Jo.zpp_pool=o,null==r.head&&(r.pushmod=!0),r.modified=!0,r.length--}if(r.pushmod=!0,null!=e.cbSet){var a,s=this.mrca1;null==Jo.zpp_pool?a=new Jo:(a=Jo.zpp_pool,Jo.zpp_pool=a.next,a.next=null),a.elt=e;var p=a;p.next=s.head,s.head=p,s.modified=!0,s.length++}if(null!=e.body.cbSet){var l,h=this.mrca1,u=e.body;null==Jo.zpp_pool?l=new Jo:(l=Jo.zpp_pool,Jo.zpp_pool=l.next,l.next=null),l.elt=u;var d=l;d.next=h.head,h.head=d,h.modified=!0,h.length++}if(null!=t.cbSet){var c,_=this.mrca2;null==Jo.zpp_pool?c=new Jo:(c=Jo.zpp_pool,Jo.zpp_pool=c.next,c.next=null),c.elt=t;var y=c;y.next=_.head,_.head=y,_.modified=!0,_.length++}if(null!=t.body.cbSet){var x,m=this.mrca2,g=t.body;null==Jo.zpp_pool?x=new Jo:(x=Jo.zpp_pool,Jo.zpp_pool=x.next,x.next=null),x.elt=g;var f=x;f.next=m.head,m.head=f,m.modified=!0,m.length++}for(var v=e.body.compound,z=t.body.compound;v!=z;)if((null==v?0:v.depth)<(null==z?0:z.depth)){if(null!=z.cbSet){var w,b=this.mrca2;null==Jo.zpp_pool?w=new Jo:(w=Jo.zpp_pool,Jo.zpp_pool=w.next,w.next=null),w.elt=z;var S=w;S.next=b.head,b.head=S,b.modified=!0,b.length++}z=z.compound}else{if(null!=v.cbSet){var C,M=this.mrca1;null==Jo.zpp_pool?C=new Jo:(C=Jo.zpp_pool,Jo.zpp_pool=C.next,C.next=null),C.elt=v;var P=C;P.next=M.head,M.head=P,M.modified=!0,M.length++}v=v.compound}},si.prototype.inlined_MRCA_chains=function(e,t){for(var i=this.mrca1;null!=i.head;){var n=i.head;i.head=n.next,n.elt=null,n.next=Jo.zpp_pool,Jo.zpp_pool=n,null==i.head&&(i.pushmod=!0),i.modified=!0,i.length--}i.pushmod=!0;for(var r=this.mrca2;null!=r.head;){var o=r.head;r.head=o.next,o.elt=null,o.next=Jo.zpp_pool,Jo.zpp_pool=o,null==r.head&&(r.pushmod=!0),r.modified=!0,r.length--}if(r.pushmod=!0,null!=e.cbSet){var a,s=this.mrca1;null==Jo.zpp_pool?a=new Jo:(a=Jo.zpp_pool,Jo.zpp_pool=a.next,a.next=null),a.elt=e;var p=a;p.next=s.head,s.head=p,s.modified=!0,s.length++}if(null!=e.body.cbSet){var l,h=this.mrca1,u=e.body;null==Jo.zpp_pool?l=new Jo:(l=Jo.zpp_pool,Jo.zpp_pool=l.next,l.next=null),l.elt=u;var d=l;d.next=h.head,h.head=d,h.modified=!0,h.length++}if(null!=t.cbSet){var c,_=this.mrca2;null==Jo.zpp_pool?c=new Jo:(c=Jo.zpp_pool,Jo.zpp_pool=c.next,c.next=null),c.elt=t;var y=c;y.next=_.head,_.head=y,_.modified=!0,_.length++}if(null!=t.body.cbSet){var x,m=this.mrca2,g=t.body;null==Jo.zpp_pool?x=new Jo:(x=Jo.zpp_pool,Jo.zpp_pool=x.next,x.next=null),x.elt=g;var f=x;f.next=m.head,m.head=f,m.modified=!0,m.length++}for(var v=e.body.compound,z=t.body.compound;v!=z;)if((null==v?0:v.depth)<(null==z?0:z.depth)){if(null!=z.cbSet){var w,b=this.mrca2;null==Jo.zpp_pool?w=new Jo:(w=Jo.zpp_pool,Jo.zpp_pool=w.next,w.next=null),w.elt=z;var S=w;S.next=b.head,b.head=S,b.modified=!0,b.length++}z=z.compound}else{if(null!=v.cbSet){var C,M=this.mrca1;null==Jo.zpp_pool?C=new Jo:(C=Jo.zpp_pool,Jo.zpp_pool=C.next,C.next=null),C.elt=v;var P=C;P.next=M.head,M.head=P,M.modified=!0,M.length++}v=v.compound}},si.prototype.__class__=si;var pi=zpp_nape.space.ZPP_SweepData=function(){this.aabb=null,this.shape=null,this.prev=null,this.next=null};pi.__name__=["zpp_nape","space","ZPP_SweepData"],pi.prototype.next=null,pi.prototype.prev=null,pi.prototype.shape=null,pi.prototype.aabb=null,pi.prototype.free=function(){this.prev=null,this.shape=null,this.aabb=null},pi.prototype.alloc=function(){},pi.prototype.gt=function(e){return this.aabb.minx>e.aabb.minx},pi.prototype.__class__=pi;var li=zpp_nape.space.ZPP_SweepPhase=function(e){this.failed=null,this.list=null,ti.call(this),this.space=e,this.is_sweep=!0,this.sweep=this};li.__name__=["zpp_nape","space","ZPP_SweepPhase"],li.__super__=ti,li.prototype=Object.create(ti.prototype),li.prototype.list=null,li.prototype.__insert=function(e){var t;null==pi.zpp_pool?t=new pi:(t=pi.zpp_pool,pi.zpp_pool=t.next,t.next=null),(e.sweep=t).shape=e,t.aabb=e.aabb,t.next=this.list,null!=this.list&&(this.list.prev=t),this.list=t},li.prototype.__remove=function(e){var t=e.sweep;null==t.prev?this.list=t.next:t.prev.next=t.next,null!=t.next&&(t.next.prev=t.prev),e.sweep=null,t.prev=null,t.shape=null,t.aabb=null,t.next=pi.zpp_pool,pi.zpp_pool=t},li.prototype.__sync=function(e){if(!this.space.continuous&&e.zip_aabb&&null!=e.body)if(e.zip_aabb=!1,0==e.type){var t=e.circle;if(t.zip_worldCOM&&null!=t.body){if(t.zip_worldCOM=!1,t.zip_localCOM){if(t.zip_localCOM=!1,1==t.type){var i=t.polygon;if(null==i.lverts.next.next)i.localCOMx=i.lverts.next.x,i.localCOMy=i.lverts.next.y;else if(null==i.lverts.next.next.next)i.localCOMx=i.lverts.next.x,i.localCOMy=i.lverts.next.y,i.localCOMx+=i.lverts.next.next.x,i.localCOMy+=i.lverts.next.next.y,i.localCOMx*=.5,i.localCOMy*=.5;else{i.localCOMx=0;var n=i.localCOMy=0,r=i.lverts.next,o=r,a=r=r.next;for(r=r.next;null!=r;){var s=r;n+=a.x*(s.y-o.y);var p=s.y*a.x-s.x*a.y;i.localCOMx+=(a.x+s.x)*p,i.localCOMy+=(a.y+s.y)*p,o=a,a=s,r=r.next}var l=r=i.lverts.next;n+=a.x*(l.y-o.y);var h=l.y*a.x-l.x*a.y;i.localCOMx+=(a.x+l.x)*h,i.localCOMy+=(a.y+l.y)*h,o=a;var u=r=r.next;n+=l.x*(u.y-o.y);var d=u.y*l.x-u.x*l.y;i.localCOMx+=(l.x+u.x)*d,i.localCOMy+=(l.y+u.y)*d;var c=n=1/(3*n);i.localCOMx*=c,i.localCOMy*=c}}null!=t.wrap_localCOM&&(t.wrap_localCOM.zpp_inner.x=t.localCOMx,t.wrap_localCOM.zpp_inner.y=t.localCOMy)}var _=t.body;_.zip_axis&&(_.zip_axis=!1,_.axisx=Math.sin(_.rot),_.axisy=Math.cos(_.rot)),t.worldCOMx=t.body.posx+(t.body.axisy*t.localCOMx-t.body.axisx*t.localCOMy),t.worldCOMy=t.body.posy+(t.localCOMx*t.body.axisx+t.localCOMy*t.body.axisy)}var y=t.radius,x=t.radius;t.aabb.minx=t.worldCOMx-y,t.aabb.miny=t.worldCOMy-x,t.aabb.maxx=t.worldCOMx+y,t.aabb.maxy=t.worldCOMy+x}else{var m=e.polygon;if(m.zip_gverts&&null!=m.body){m.zip_gverts=!1,m.validate_lverts();var g=m.body;g.zip_axis&&(g.zip_axis=!1,g.axisx=Math.sin(g.rot),g.axisy=Math.cos(g.rot));for(var f=m.lverts.next,v=m.gverts.next;null!=v;){var z=v,w=f;f=f.next,z.x=m.body.posx+(m.body.axisy*w.x-m.body.axisx*w.y),z.y=m.body.posy+(w.x*m.body.axisx+w.y*m.body.axisy),v=v.next}}var b=m.gverts.next;m.aabb.minx=b.x,m.aabb.miny=b.y,m.aabb.maxx=b.x,m.aabb.maxy=b.y;for(var S=m.gverts.next.next;null!=S;){var C=S;C.x<m.aabb.minx&&(m.aabb.minx=C.x),C.x>m.aabb.maxx&&(m.aabb.maxx=C.x),C.y<m.aabb.miny&&(m.aabb.miny=C.y),C.y>m.aabb.maxy&&(m.aabb.maxy=C.y),S=S.next}}},li.prototype.sync_broadphase=function(){if(this.space.validation(),null!=this.list)for(var e=this.list.next;null!=e;){var t=e.next,i=e.prev;if(e.aabb.minx>i.aabb.minx)e=t;else{for(;null!=i.prev&&i.prev.aabb.minx>e.aabb.minx;)i=i.prev;var n=e.prev;n.next=e.next,null!=e.next&&(e.next.prev=n),null==i.prev?(e.prev=null,((this.list=e).next=i).prev=e):(e.prev=i.prev,((i.prev=e).prev.next=e).next=i),e=t}}},li.prototype.sync_broadphase_fast=function(){for(var e=this.list.next;null!=e;){var t=e.next,i=e.prev;if(e.aabb.minx>i.aabb.minx)e=t;else{for(;null!=i.prev&&i.prev.aabb.minx>e.aabb.minx;)i=i.prev;var n=e.prev;n.next=e.next,null!=e.next&&(e.next.prev=n),null==i.prev?(e.prev=null,((this.list=e).next=i).prev=e):(e.prev=i.prev,((i.prev=e).prev.next=e).next=i),e=t}}},li.prototype.broadphase=function(e,t){if(null!=this.list){for(var i=this.list.next;null!=i;){var n=i.next,r=i.prev;if(i.aabb.minx>r.aabb.minx)i=n;else{for(;null!=r.prev&&r.prev.aabb.minx>i.aabb.minx;)r=r.prev;var o=i.prev;o.next=i.next,null!=i.next&&(i.next.prev=o),null==r.prev?(i.prev=null,((this.list=i).next=r).prev=i):(i.prev=r.prev,((r.prev=i).prev.next=i).next=r),i=n}}for(var a=this.list;null!=a;){for(var s=a.next,p=a.shape,l=p.body,h=a.aabb.maxx;null!=s&&!(s.aabb.minx>h);){var u=s.shape,d=u.body;if(d!=l)if(1!=l.type||1!=d.type)if(l.component.sleeping&&d.component.sleeping)s=s.next;else{var c=p.aabb,_=u.aabb;_.miny>c.maxy||c.miny>_.maxy||(t?e.narrowPhase(p,u,2!=l.type||2!=d.type,null,!1):e.continuousEvent(p,u,2!=l.type||2!=d.type,null,!1)),s=s.next}else s=s.next;else s=s.next}a=a.next}}},li.prototype.clear=function(){for(;null!=this.list;)this.list.shape.removedFromSpace(),this.__remove(this.list.shape)},li.prototype.shapesUnderPoint=function(e,t,i,n){var r;this.sync_broadphase(),null==ep.zpp_pool?r=new ep:(r=ep.zpp_pool,ep.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=e,r.y=t;for(var o=r,a=null==n?new me:n,s=this.list;null!=s&&s.aabb.minx>e;)s=s.next;for(;null!=s&&s.aabb.minx<=e;){if(s.aabb.maxx>=e&&s.aabb.miny<=t&&s.aabb.maxy>=t){var p,l=s.shape;if(null!=i){var h=l.filter;p=0!=(h.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&h.collisionGroup)}else p=!0;p&&(0==l.type?$s.circleContains(l.circle,o)&&a.push(l.outer):$s.polyContains(l.polygon,o)&&a.push(l.outer))}s=s.next}return null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=ep.zpp_pool,ep.zpp_pool=o,a},li.prototype.bodiesUnderPoint=function(e,t,i,n){var r;this.sync_broadphase(),null==ep.zpp_pool?r=new ep:(r=ep.zpp_pool,ep.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=e,r.y=t;for(var o=r,a=null==n?new ee:n,s=this.list;null!=s&&s.aabb.minx>e;)s=s.next;for(;null!=s&&s.aabb.minx<=e;){if(s.aabb.maxx>=e&&s.aabb.miny<=t&&s.aabb.maxy>=t){var p=s.shape,l=p.body.outer;if(!a.has(l)){var h;if(null!=i){var u=p.filter;h=0!=(u.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&u.collisionGroup)}else h=!0;h&&(0==p.type?$s.circleContains(p.circle,o)&&a.push(l):$s.polyContains(p.polygon,o)&&a.push(l))}}s=s.next}return null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=ep.zpp_pool,ep.zpp_pool=o,a},li.prototype.shapesInAABB=function(e,t,i,n,r){this.sync_broadphase(),this.updateAABBShape(e);for(var o=this.aabbShape.zpp_inner.aabb,a=null==r?new me:r,s=this.list;null!=s&&s.aabb.maxx<o.minx;)s=s.next;for(;null!=s&&s.aabb.minx<=o.maxx;){var p,l=s.shape;if(null!=n){var h=l.filter;p=0!=(h.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&h.collisionGroup)}else p=!0;if(p)if(t)if(i)$s.containTest(this.aabbShape.zpp_inner,l)&&a.push(l.outer);else{var u=s.aabb;if(u.minx>=o.minx&&u.miny>=o.miny&&u.maxx<=o.maxx&&u.maxy<=o.maxy)a.push(l.outer);else{var d=s.aabb;o.miny<=d.maxy&&d.miny<=o.maxy&&o.minx<=d.maxx&&d.minx<=o.maxx&&$s.testCollide_safe(l,this.aabbShape.zpp_inner)&&a.push(l.outer)}}else{var c;if(i){var _=s.aabb;c=_.minx>=o.minx&&_.miny>=o.miny&&_.maxx<=o.maxx&&_.maxy<=o.maxy}else{var y=s.aabb;c=o.miny<=y.maxy&&y.miny<=o.maxy&&o.minx<=y.maxx&&y.minx<=o.maxx}c&&a.push(l.outer)}s=s.next}return a},li.prototype.failed=null,li.prototype.bodiesInAABB=function(e,t,i,n,r){this.sync_broadphase(),this.updateAABBShape(e);var o=this.aabbShape.zpp_inner.aabb,a=null==r?new ee:r;null==this.failed&&(this.failed=new ee);for(var s=this.list;null!=s&&s.aabb.maxx<o.minx;)s=s.next;for(;null!=s&&s.aabb.minx<=o.maxx;){var p=s.shape,l=p.body.outer,h=s.aabb;if(o.miny<=h.maxy&&h.miny<=o.maxy&&o.minx<=h.maxx&&h.minx<=o.maxx){var u;if(null!=n){var d=p.filter;u=0!=(d.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&d.collisionGroup)}else u=!0;if(u)if(t)if(i){if(!this.failed.has(l)){var c=$s.containTest(this.aabbShape.zpp_inner,p);!a.has(l)&&c?a.push(l):c||(a.remove(l),this.failed.push(l))}}else!a.has(l)&&$s.testCollide_safe(p,this.aabbShape.zpp_inner)&&a.push(l);else if(i){if(!this.failed.has(l)){var _=p.aabb,y=_.minx>=o.minx&&_.miny>=o.miny&&_.maxx<=o.maxx&&_.maxy<=o.maxy;!a.has(l)&&y?a.push(l):y||(a.remove(l),this.failed.push(l))}}else{var x;if(a.has(l))x=!1;else{var m=p.aabb;x=m.minx>=o.minx&&m.miny>=o.miny&&m.maxx<=o.maxx&&m.maxy<=o.maxy}x&&a.push(l)}}s=s.next}return this.failed.clear(),a},li.prototype.shapesInCircle=function(e,t,i,n,r,o){this.sync_broadphase(),this.updateCircShape(e,t,i);for(var a=this.circShape.zpp_inner.aabb,s=null==o?new me:o,p=this.list;null!=p&&p.aabb.maxx<a.minx;)p=p.next;for(;null!=p&&p.aabb.minx<=a.maxx;){var l=p.aabb;if(a.miny<=l.maxy&&l.miny<=a.maxy&&a.minx<=l.maxx&&l.minx<=a.maxx){var h,u=p.shape;if(null!=r){var d=u.filter;h=0!=(d.collisionMask&r.collisionGroup)&&0!=(r.collisionMask&d.collisionGroup)}else h=!0;h&&(n?$s.containTest(this.circShape.zpp_inner,u)&&s.push(u.outer):$s.testCollide_safe(u,this.circShape.zpp_inner)&&s.push(u.outer))}p=p.next}return s},li.prototype.bodiesInCircle=function(e,t,i,n,r,o){this.sync_broadphase(),this.updateCircShape(e,t,i);var a=this.circShape.zpp_inner.aabb,s=null==o?new ee:o;null==this.failed&&(this.failed=new ee);for(var p=this.list;null!=p&&p.aabb.maxx<a.minx;)p=p.next;for(;null!=p&&p.aabb.minx<=a.maxx;){var l=p.aabb;if(a.miny<=l.maxy&&l.miny<=a.maxy&&a.minx<=l.maxx&&l.minx<=a.maxx){var h,u=p.shape,d=u.body.outer;if(null!=r){var c=u.filter;h=0!=(c.collisionMask&r.collisionGroup)&&0!=(r.collisionMask&c.collisionGroup)}else h=!0;if(h)if(n){if(!this.failed.has(d)){var _=$s.containTest(this.circShape.zpp_inner,u);!s.has(d)&&_?s.push(d):_||(s.remove(d),this.failed.push(d))}}else!s.has(d)&&$s.testCollide_safe(u,this.circShape.zpp_inner)&&s.push(d)}p=p.next}return this.failed.clear(),s},li.prototype.shapesInShape=function(e,t,i,n){this.sync_broadphase(),this.validateShape(e);for(var r=e.aabb,o=null==n?new me:n,a=this.list;null!=a&&a.aabb.maxx<r.minx;)a=a.next;for(;null!=a&&a.aabb.minx<=r.maxx;){var s=a.aabb;if(r.miny<=s.maxy&&s.miny<=r.maxy&&r.minx<=s.maxx&&s.minx<=r.maxx){var p,l=a.shape;if(null!=i){var h=l.filter;p=0!=(h.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&h.collisionGroup)}else p=!0;p&&(t?$s.containTest(e,l)&&o.push(l.outer):$s.testCollide_safe(l,e)&&o.push(l.outer))}a=a.next}return o},li.prototype.bodiesInShape=function(e,t,i,n){this.sync_broadphase(),this.validateShape(e);var r=e.aabb,o=null==n?new ee:n;null==this.failed&&(this.failed=new ee);for(var a=this.list;null!=a&&a.aabb.maxx<r.minx;)a=a.next;for(;null!=a&&a.aabb.minx<=r.maxx;){var s=a.aabb;if(r.miny<=s.maxy&&s.miny<=r.maxy&&r.minx<=s.maxx&&s.minx<=r.maxx){var p,l=a.shape,h=l.body.outer;if(null!=i){var u=l.filter;p=0!=(u.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&u.collisionGroup)}else p=!0;if(p)if(t){if(!this.failed.has(h)){var d=$s.containTest(e,l);!o.has(h)&&d?o.push(h):d||(o.remove(h),this.failed.push(h))}}else!o.has(h)&&$s.testCollide_safe(e,l)&&o.push(h)}a=a.next}return this.failed.clear(),o},li.prototype.rayCast=function(e,t,i){this.sync_broadphase(),e.validate_dir();var n=e.rayAABB(),r=e.maxdist,o=null;if(0==e.dirx)for(var a=this.list;null!=a&&a.aabb.minx<=n.minx;){var s,p=a.aabb;if(n.miny<=p.maxy&&p.miny<=n.maxy&&n.minx<=p.maxx&&p.minx<=n.maxx)if(null!=i){var l=a.shape.filter;s=0!=(l.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&l.collisionGroup)}else s=!0;else s=!1;if(s){var h=e.aabbsect(a.aabb);if(0<=h&&h<r){var u=0==a.shape.type?e.circlesect(a.shape.circle,t,r):e.polysect(a.shape.polygon,t,r);null!=u&&(r=u.zpp_inner.toiDistance,null!=o&&o.zpp_inner.free(),o=u)}}a=a.next}else if(e.dirx<0){for(var d=this.list,c=null;null!=d&&d.aabb.minx<=n.maxx;)d=(c=d).next;for(d=c;null!=d;){var _,y=d.aabb;if(n.miny<=y.maxy&&y.miny<=n.maxy&&n.minx<=y.maxx&&y.minx<=n.maxx)if(null!=i){var x=d.shape.filter;_=0!=(x.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&x.collisionGroup)}else _=!0;else _=!1;if(_){var m=e.aabbsect(d.aabb);if(0<=m&&m<r){var g=0==d.shape.type?e.circlesect(d.shape.circle,t,r):e.polysect(d.shape.polygon,t,r);null!=g&&(r=g.zpp_inner.toiDistance,null!=o&&o.zpp_inner.free(),o=g)}}d=d.prev}}else for(var f=this.list;null!=f&&f.aabb.minx<=n.maxx&&f.aabb.minx<e.originx+e.dirx*r;){var v,z=f.aabb;if(n.miny<=z.maxy&&z.miny<=n.maxy&&n.minx<=z.maxx&&z.minx<=n.maxx)if(null!=i){var w=f.shape.filter;v=0!=(w.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&w.collisionGroup)}else v=!0;else v=!1;if(v){var b=e.aabbsect(f.aabb);if(0<=b&&b<r){var S=0==f.shape.type?e.circlesect(f.shape.circle,t,r):e.polysect(f.shape.polygon,t,r);null!=S&&(r=S.zpp_inner.toiDistance,null!=o&&o.zpp_inner.free(),o=S)}}f=f.next}return null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n.wrap_min=n.wrap_max=null,n._invalidate=null,n._validate=null,n.next=Oo.zpp_pool,Oo.zpp_pool=n,o},li.prototype.rayMultiCast=function(e,t,i,n){this.sync_broadphase(),e.validate_dir();var r=e.rayAABB(),o=null==n?new K:n;if(0==e.dirx)for(var a=this.list;null!=a&&a.aabb.minx<=r.minx;){var s,p=a.aabb;if(r.miny<=p.maxy&&p.miny<=r.maxy&&r.minx<=p.maxx&&p.minx<=r.maxx)if(null!=i){var l=a.shape.filter;s=0!=(l.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&l.collisionGroup)}else s=!0;else s=!1;s&&0<=e.aabbsect(a.aabb)&&(0==a.shape.type?e.circlesect2(a.shape.circle,t,o):e.polysect2(a.shape.polygon,t,o)),a=a.next}else if(e.dirx<0){for(var h=this.list,u=null;null!=h&&h.aabb.minx<=r.maxx;)h=(u=h).next;for(h=u;null!=h;){var d,c=h.aabb;if(r.miny<=c.maxy&&c.miny<=r.maxy&&r.minx<=c.maxx&&c.minx<=r.maxx)if(null!=i){var _=h.shape.filter;d=0!=(_.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&_.collisionGroup)}else d=!0;else d=!1;d&&0<=e.aabbsect(h.aabb)&&(0==h.shape.type?e.circlesect2(h.shape.circle,t,o):e.polysect2(h.shape.polygon,t,o)),h=h.prev}}else for(var y=this.list;null!=y&&y.aabb.minx<=r.maxx;){var x,m=y.aabb;if(r.miny<=m.maxy&&m.miny<=r.maxy&&r.minx<=m.maxx&&m.minx<=r.maxx)if(null!=i){var g=y.shape.filter;x=0!=(g.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&g.collisionGroup)}else x=!0;else x=!1;x&&0<=e.aabbsect(y.aabb)&&(0==y.shape.type?e.circlesect2(y.shape.circle,t,o):e.polysect2(y.shape.polygon,t,o)),y=y.next}return null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r.wrap_min=r.wrap_max=null,r._invalidate=null,r._validate=null,r.next=Oo.zpp_pool,Oo.zpp_pool=r,o},li.prototype.__class__=li;var hi=zpp_nape.util.ZNPArray2_Float=function(e,t){this.width=0,this.list=null,this.width=e,this.list=[]};hi.__name__=["zpp_nape","util","ZNPArray2_Float"],hi.prototype.list=null,hi.prototype.width=null,hi.prototype.resize=function(e,t,i){for(var n=0,r=(this.width=e)*t;n<r;)this.list[n++]=i},hi.prototype.get=function(e,t){return this.list[t*this.width+e]},hi.prototype.set=function(e,t,i){return this.list[t*this.width+e]=i},hi.prototype.__class__=hi;var ui=zpp_nape.util.ZNPArray2_ZPP_GeomVert=function(e,t){this.width=0,this.list=null,this.width=e,this.list=[]};ui.__name__=["zpp_nape","util","ZNPArray2_ZPP_GeomVert"],ui.prototype.list=null,ui.prototype.width=null,ui.prototype.resize=function(e,t,i){for(var n=0,r=(this.width=e)*t;n<r;)this.list[n++]=i},ui.prototype.get=function(e,t){return this.list[t*this.width+e]},ui.prototype.set=function(e,t,i){return this.list[t*this.width+e]=i},ui.prototype.__class__=ui;var di=zpp_nape.util.ZNPArray2_ZPP_MarchPair=function(e,t){this.width=0,this.list=null,this.width=e,this.list=[]};di.__name__=["zpp_nape","util","ZNPArray2_ZPP_MarchPair"],di.prototype.list=null,di.prototype.width=null,di.prototype.resize=function(e,t,i){for(var n=0,r=(this.width=e)*t;n<r;)this.list[n++]=i},di.prototype.get=function(e,t){return this.list[t*this.width+e]},di.prototype.set=function(e,t,i){return this.list[t*this.width+e]=i},di.prototype.__class__=di;var ci=zpp_nape.util.Hashable2_Boolfalse=function(){this.di=0,this.id=0,this.hnext=null,this.next=null,this.value=!1};ci.__name__=["zpp_nape","util","Hashable2_Boolfalse"],ci.get=function(e,t,i){var n;null==ci.zpp_pool?n=new ci:(n=ci.zpp_pool,ci.zpp_pool=n.next,n.next=null),n.id=e,n.di=t;var r=n;return r.value=i,r},ci.getpersist=function(e,t){var i;return null==ci.zpp_pool?i=new ci:(i=ci.zpp_pool,ci.zpp_pool=i.next,i.next=null),i.id=e,i.di=t,i},ci.ordered_get=function(e,t,i){if(e<=t){var n;null==ci.zpp_pool?n=new ci:(n=ci.zpp_pool,ci.zpp_pool=n.next,n.next=null),n.id=e,n.di=t;var r=n;return r.value=i,r}var o;null==ci.zpp_pool?o=new ci:(o=ci.zpp_pool,ci.zpp_pool=o.next,o.next=null),o.id=t,o.di=e;var a=o;return a.value=i,a},ci.ordered_get_persist=function(e,t){var i,n;return e<=t?(null==ci.zpp_pool?i=new ci:(i=ci.zpp_pool,ci.zpp_pool=i.next,i.next=null),i.id=e,i.di=t,i):(null==ci.zpp_pool?n=new ci:(n=ci.zpp_pool,ci.zpp_pool=n.next,n.next=null),n.id=t,n.di=e,n)},ci.prototype.value=null,ci.prototype.next=null,ci.prototype.hnext=null,ci.prototype.id=null,ci.prototype.di=null,ci.prototype.free=function(){},ci.prototype.alloc=function(){},ci.prototype.__class__=ci;var _i=zpp_nape.util.FastHash2_Hashable2_Boolfalse=function(){this.cnt=0,this.table=null,this.cnt=0,this.table=[];for(var e=0;e<1048576;)++e,this.table.push(null)};_i.__name__=["zpp_nape","util","FastHash2_Hashable2_Boolfalse"],_i.prototype.table=null,_i.prototype.cnt=null,_i.prototype.empty=function(){return 0==this.cnt},_i.prototype.clear=function(){for(var e=0,t=this.table.length;e<t;){var i=e++,n=this.table[i];if(null!=n){for(;null!=n;){var r=n.hnext;n.hnext=null,n=r}this.table[i]=null}}},_i.prototype.get=function(e,t){var i=this.table[106039*e+t&1048575];if(null==i)return null;if(i.id==e&&i.di==t)return i;for(;null!=(i=i.hnext)&&(i.id!=e||i.di!=t););return i},_i.prototype.ordered_get=function(e,t){if(t<e){var i=e;e=t,t=i}var n=this.table[106039*e+t&1048575];if(null==n)return null;if(n.id==e&&n.di==t)return n;for(;null!=(n=n.hnext)&&(n.id!=e||n.di!=t););return n},_i.prototype.has=function(e,t){var i=this.table[106039*e+t&1048575];if(null==i)return!1;if(i.id==e&&i.di==t)return!0;for(;null!=(i=i.hnext)&&(i.id!=e||i.di!=t););return null!=i},_i.prototype.maybeAdd=function(e){var t=106039*e.id+e.di&1048575,i=this.table[t];null==i?(this.table[t]=e).hnext=null:(e.hnext=i.hnext,i.hnext=e),this.cnt++},_i.prototype.add=function(e){var t=106039*e.id+e.di&1048575,i=this.table[t];null==i?(this.table[t]=e).hnext=null:(e.hnext=i.hnext,i.hnext=e),this.cnt++},_i.prototype.remove=function(e){var t=106039*e.id+e.di&1048575,i=this.table[t];if(i==e)this.table[t]=i.hnext;else if(null!=i){for(var n;null!=(i=(n=i).hnext)&&i!=e;);n.hnext=i.hnext}e.hnext=null,this.cnt--},_i.prototype.hash=function(e,t){return 106039*e+t&1048575},_i.prototype.__class__=_i;var yi=zpp_nape.util.ZNPList_ZPP_CallbackSet=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};yi.__name__=["zpp_nape","util","ZNPList_ZPP_CallbackSet"],yi.prototype.head=null,yi.prototype.begin=function(){return this.head},yi.prototype.modified=null,yi.prototype.pushmod=null,yi.prototype.length=null,yi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},yi.prototype.add=function(e){var t;null==Ni.zpp_pool?t=new Ni:(t=Ni.zpp_pool,Ni.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},yi.prototype.inlined_add=function(e){var t;null==Ni.zpp_pool?t=new Ni:(t=Ni.zpp_pool,Ni.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},yi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},yi.prototype.insert=function(e,t){var i;null==Ni.zpp_pool?i=new Ni:(i=Ni.zpp_pool,Ni.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},yi.prototype.inlined_insert=function(e,t){var i;null==Ni.zpp_pool?i=new Ni:(i=Ni.zpp_pool,Ni.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},yi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ni.zpp_pool,Ni.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},yi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ni.zpp_pool,Ni.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},yi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},yi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},yi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ni.zpp_pool,Ni.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},yi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},yi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ni.zpp_pool,Ni.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},yi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Ni.zpp_pool,Ni.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},yi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ni.zpp_pool,Ni.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},yi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ni.zpp_pool,Ni.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},yi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},yi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ni.zpp_pool,Ni.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},yi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ni.zpp_pool,Ni.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},yi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},yi.prototype.empty=function(){return null==this.head},yi.prototype.size=function(){return this.length},yi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},yi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},yi.prototype.front=function(){return this.head.elt},yi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},yi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},yi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},yi.prototype.__class__=yi;var xi=zpp_nape.util.ZNPList_ZPP_Shape=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};xi.__name__=["zpp_nape","util","ZNPList_ZPP_Shape"],xi.prototype.head=null,xi.prototype.begin=function(){return this.head},xi.prototype.modified=null,xi.prototype.pushmod=null,xi.prototype.length=null,xi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},xi.prototype.add=function(e){var t;null==Ui.zpp_pool?t=new Ui:(t=Ui.zpp_pool,Ui.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},xi.prototype.inlined_add=function(e){var t;null==Ui.zpp_pool?t=new Ui:(t=Ui.zpp_pool,Ui.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},xi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},xi.prototype.insert=function(e,t){var i;null==Ui.zpp_pool?i=new Ui:(i=Ui.zpp_pool,Ui.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},xi.prototype.inlined_insert=function(e,t){var i;null==Ui.zpp_pool?i=new Ui:(i=Ui.zpp_pool,Ui.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},xi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ui.zpp_pool,Ui.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},xi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ui.zpp_pool,Ui.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},xi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},xi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},xi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ui.zpp_pool,Ui.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},xi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},xi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ui.zpp_pool,Ui.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},xi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Ui.zpp_pool,Ui.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},xi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ui.zpp_pool,Ui.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},xi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ui.zpp_pool,Ui.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},xi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},xi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ui.zpp_pool,Ui.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},xi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ui.zpp_pool,Ui.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},xi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},xi.prototype.empty=function(){return null==this.head},xi.prototype.size=function(){return this.length},xi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},xi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},xi.prototype.front=function(){return this.head.elt},xi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},xi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},xi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},xi.prototype.__class__=xi;var mi=zpp_nape.util.ZNPList_ZPP_Body=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};mi.__name__=["zpp_nape","util","ZNPList_ZPP_Body"],mi.prototype.head=null,mi.prototype.begin=function(){return this.head},mi.prototype.modified=null,mi.prototype.pushmod=null,mi.prototype.length=null,mi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},mi.prototype.add=function(e){var t;null==Vi.zpp_pool?t=new Vi:(t=Vi.zpp_pool,Vi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},mi.prototype.inlined_add=function(e){var t;null==Vi.zpp_pool?t=new Vi:(t=Vi.zpp_pool,Vi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},mi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},mi.prototype.insert=function(e,t){var i;null==Vi.zpp_pool?i=new Vi:(i=Vi.zpp_pool,Vi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},mi.prototype.inlined_insert=function(e,t){var i;null==Vi.zpp_pool?i=new Vi:(i=Vi.zpp_pool,Vi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},mi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Vi.zpp_pool,Vi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},mi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Vi.zpp_pool,Vi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},mi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},mi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},mi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Vi.zpp_pool,Vi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},mi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},mi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Vi.zpp_pool,Vi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},mi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Vi.zpp_pool,Vi.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},mi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Vi.zpp_pool,Vi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},mi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Vi.zpp_pool,Vi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},mi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},mi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Vi.zpp_pool,Vi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},mi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Vi.zpp_pool,Vi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},mi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},mi.prototype.empty=function(){return null==this.head},mi.prototype.size=function(){return this.length},mi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},mi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},mi.prototype.front=function(){return this.head.elt},mi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},mi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},mi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},mi.prototype.__class__=mi;var gi=zpp_nape.util.ZNPList_ZPP_Compound=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};gi.__name__=["zpp_nape","util","ZNPList_ZPP_Compound"],gi.prototype.head=null,gi.prototype.begin=function(){return this.head},gi.prototype.modified=null,gi.prototype.pushmod=null,gi.prototype.length=null,gi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},gi.prototype.add=function(e){var t;null==Wi.zpp_pool?t=new Wi:(t=Wi.zpp_pool,Wi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},gi.prototype.inlined_add=function(e){var t;null==Wi.zpp_pool?t=new Wi:(t=Wi.zpp_pool,Wi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},gi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},gi.prototype.insert=function(e,t){var i;null==Wi.zpp_pool?i=new Wi:(i=Wi.zpp_pool,Wi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},gi.prototype.inlined_insert=function(e,t){var i;null==Wi.zpp_pool?i=new Wi:(i=Wi.zpp_pool,Wi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},gi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Wi.zpp_pool,Wi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},gi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Wi.zpp_pool,Wi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},gi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},gi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},gi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Wi.zpp_pool,Wi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},gi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},gi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Wi.zpp_pool,Wi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},gi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Wi.zpp_pool,Wi.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},gi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Wi.zpp_pool,Wi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},gi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Wi.zpp_pool,Wi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},gi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},gi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Wi.zpp_pool,Wi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},gi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Wi.zpp_pool,Wi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},gi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},gi.prototype.empty=function(){return null==this.head},gi.prototype.size=function(){return this.length},gi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},gi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},gi.prototype.front=function(){return this.head.elt},gi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},gi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},gi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},gi.prototype.__class__=gi;var fi=zpp_nape.util.ZNPList_ZPP_Arbiter=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};fi.__name__=["zpp_nape","util","ZNPList_ZPP_Arbiter"],fi.prototype.head=null,fi.prototype.begin=function(){return this.head},fi.prototype.modified=null,fi.prototype.pushmod=null,fi.prototype.length=null,fi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},fi.prototype.add=function(e){var t;null==Ko.zpp_pool?t=new Ko:(t=Ko.zpp_pool,Ko.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},fi.prototype.inlined_add=function(e){var t;null==Ko.zpp_pool?t=new Ko:(t=Ko.zpp_pool,Ko.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},fi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},fi.prototype.insert=function(e,t){var i;null==Ko.zpp_pool?i=new Ko:(i=Ko.zpp_pool,Ko.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},fi.prototype.inlined_insert=function(e,t){var i;null==Ko.zpp_pool?i=new Ko:(i=Ko.zpp_pool,Ko.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},fi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ko.zpp_pool,Ko.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},fi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ko.zpp_pool,Ko.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},fi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},fi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},fi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ko.zpp_pool,Ko.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},fi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},fi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ko.zpp_pool,Ko.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},fi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Ko.zpp_pool,Ko.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},fi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ko.zpp_pool,Ko.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},fi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ko.zpp_pool,Ko.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},fi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},fi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ko.zpp_pool,Ko.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},fi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ko.zpp_pool,Ko.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},fi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},fi.prototype.empty=function(){return null==this.head},fi.prototype.size=function(){return this.length},fi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},fi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},fi.prototype.front=function(){return this.head.elt},fi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},fi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},fi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},fi.prototype.__class__=fi;var vi=zpp_nape.util.ZNPList_ZPP_CbSetPair=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};vi.__name__=["zpp_nape","util","ZNPList_ZPP_CbSetPair"],vi.prototype.head=null,vi.prototype.begin=function(){return this.head},vi.prototype.modified=null,vi.prototype.pushmod=null,vi.prototype.length=null,vi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},vi.prototype.add=function(e){var t;null==Yi.zpp_pool?t=new Yi:(t=Yi.zpp_pool,Yi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},vi.prototype.inlined_add=function(e){var t;null==Yi.zpp_pool?t=new Yi:(t=Yi.zpp_pool,Yi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},vi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},vi.prototype.insert=function(e,t){var i;null==Yi.zpp_pool?i=new Yi:(i=Yi.zpp_pool,Yi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},vi.prototype.inlined_insert=function(e,t){var i;null==Yi.zpp_pool?i=new Yi:(i=Yi.zpp_pool,Yi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},vi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Yi.zpp_pool,Yi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},vi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Yi.zpp_pool,Yi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},vi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},vi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},vi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Yi.zpp_pool,Yi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},vi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},vi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Yi.zpp_pool,Yi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},vi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Yi.zpp_pool,Yi.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},vi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Yi.zpp_pool,Yi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},vi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Yi.zpp_pool,Yi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},vi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},vi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Yi.zpp_pool,Yi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},vi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Yi.zpp_pool,Yi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},vi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},vi.prototype.empty=function(){return null==this.head},vi.prototype.size=function(){return this.length},vi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},vi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},vi.prototype.front=function(){return this.head.elt},vi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},vi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},vi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},vi.prototype.__class__=vi;var Pn=zpp_nape.util.ZNPList_ZPP_CutInt=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Pn.__name__=["zpp_nape","util","ZNPList_ZPP_CutInt"],Pn.prototype.head=null,Pn.prototype.begin=function(){return this.head},Pn.prototype.modified=null,Pn.prototype.pushmod=null,Pn.prototype.length=null,Pn.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Pn.prototype.add=function(e){var t;null==Zi.zpp_pool?t=new Zi:(t=Zi.zpp_pool,Zi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Pn.prototype.inlined_add=function(e){var t;null==Zi.zpp_pool?t=new Zi:(t=Zi.zpp_pool,Zi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Pn.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Pn.prototype.insert=function(e,t){var i;null==Zi.zpp_pool?i=new Zi:(i=Zi.zpp_pool,Zi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Pn.prototype.inlined_insert=function(e,t){var i;null==Zi.zpp_pool?i=new Zi:(i=Zi.zpp_pool,Zi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Pn.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Zi.zpp_pool,Zi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Pn.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Zi.zpp_pool,Zi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Pn.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Pn.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Pn.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Zi.zpp_pool,Zi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Pn.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Pn.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Zi.zpp_pool,Zi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Pn.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Zi.zpp_pool,Zi.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Pn.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Zi.zpp_pool,Zi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Pn.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Zi.zpp_pool,Zi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Pn.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Pn.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Zi.zpp_pool,Zi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Pn.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Zi.zpp_pool,Zi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Pn.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Pn.prototype.empty=function(){return null==this.head},Pn.prototype.size=function(){return this.length},Pn.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Pn.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Pn.prototype.front=function(){return this.head.elt},Pn.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Pn.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Pn.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Pn.prototype.__class__=Pn;var kn=zpp_nape.util.ZNPList_ZPP_CutVert=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};kn.__name__=["zpp_nape","util","ZNPList_ZPP_CutVert"],kn.prototype.head=null,kn.prototype.begin=function(){return this.head},kn.prototype.modified=null,kn.prototype.pushmod=null,kn.prototype.length=null,kn.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},kn.prototype.add=function(e){var t;null==Ji.zpp_pool?t=new Ji:(t=Ji.zpp_pool,Ji.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},kn.prototype.inlined_add=function(e){var t;null==Ji.zpp_pool?t=new Ji:(t=Ji.zpp_pool,Ji.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},kn.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},kn.prototype.insert=function(e,t){var i;null==Ji.zpp_pool?i=new Ji:(i=Ji.zpp_pool,Ji.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},kn.prototype.inlined_insert=function(e,t){var i;null==Ji.zpp_pool?i=new Ji:(i=Ji.zpp_pool,Ji.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},kn.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ji.zpp_pool,Ji.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},kn.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ji.zpp_pool,Ji.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},kn.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},kn.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},kn.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ji.zpp_pool,Ji.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},kn.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},kn.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ji.zpp_pool,Ji.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},kn.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Ji.zpp_pool,Ji.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},kn.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ji.zpp_pool,Ji.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},kn.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ji.zpp_pool,Ji.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},kn.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},kn.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ji.zpp_pool,Ji.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},kn.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ji.zpp_pool,Ji.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},kn.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},kn.prototype.empty=function(){return null==this.head},kn.prototype.size=function(){return this.length},kn.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},kn.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},kn.prototype.front=function(){return this.head.elt},kn.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},kn.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},kn.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},kn.prototype.__class__=kn;var zi=zpp_nape.util.ZNPList_ZPP_PartitionVertex=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};zi.__name__=["zpp_nape","util","ZNPList_ZPP_PartitionVertex"],zi.prototype.head=null,zi.prototype.begin=function(){return this.head},zi.prototype.modified=null,zi.prototype.pushmod=null,zi.prototype.length=null,zi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},zi.prototype.add=function(e){var t;null==Qi.zpp_pool?t=new Qi:(t=Qi.zpp_pool,Qi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},zi.prototype.inlined_add=function(e){var t;null==Qi.zpp_pool?t=new Qi:(t=Qi.zpp_pool,Qi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},zi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},zi.prototype.insert=function(e,t){var i;null==Qi.zpp_pool?i=new Qi:(i=Qi.zpp_pool,Qi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},zi.prototype.inlined_insert=function(e,t){var i;null==Qi.zpp_pool?i=new Qi:(i=Qi.zpp_pool,Qi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},zi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Qi.zpp_pool,Qi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Qi.zpp_pool,Qi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},zi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},zi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Qi.zpp_pool,Qi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},zi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},zi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Qi.zpp_pool,Qi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},zi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Qi.zpp_pool,Qi.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},zi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Qi.zpp_pool,Qi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},zi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Qi.zpp_pool,Qi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},zi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},zi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Qi.zpp_pool,Qi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Qi.zpp_pool,Qi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},zi.prototype.empty=function(){return null==this.head},zi.prototype.size=function(){return this.length},zi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},zi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},zi.prototype.front=function(){return this.head.elt},zi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},zi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},zi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},zi.prototype.__class__=zi;var wi=zpp_nape.util.ZNPList_ZPP_SimplifyP=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};wi.__name__=["zpp_nape","util","ZNPList_ZPP_SimplifyP"],wi.prototype.head=null,wi.prototype.begin=function(){return this.head},wi.prototype.modified=null,wi.prototype.pushmod=null,wi.prototype.length=null,wi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},wi.prototype.add=function(e){var t;null==$i.zpp_pool?t=new $i:(t=$i.zpp_pool,$i.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},wi.prototype.inlined_add=function(e){var t;null==$i.zpp_pool?t=new $i:(t=$i.zpp_pool,$i.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},wi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},wi.prototype.insert=function(e,t){var i;null==$i.zpp_pool?i=new $i:(i=$i.zpp_pool,$i.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},wi.prototype.inlined_insert=function(e,t){var i;null==$i.zpp_pool?i=new $i:(i=$i.zpp_pool,$i.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},wi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=$i.zpp_pool,$i.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},wi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=$i.zpp_pool,$i.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},wi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},wi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},wi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=$i.zpp_pool,$i.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},wi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},wi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=$i.zpp_pool,$i.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},wi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=$i.zpp_pool,$i.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},wi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=$i.zpp_pool,$i.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},wi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=$i.zpp_pool,$i.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},wi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},wi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=$i.zpp_pool,$i.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},wi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=$i.zpp_pool,$i.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},wi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},wi.prototype.empty=function(){return null==this.head},wi.prototype.size=function(){return this.length},wi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},wi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},wi.prototype.front=function(){return this.head.elt},wi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},wi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},wi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},wi.prototype.__class__=wi;var bi=zpp_nape.util.ZNPList_ZPP_PartitionedPoly=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};bi.__name__=["zpp_nape","util","ZNPList_ZPP_PartitionedPoly"],bi.prototype.head=null,bi.prototype.begin=function(){return this.head},bi.prototype.modified=null,bi.prototype.pushmod=null,bi.prototype.length=null,bi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},bi.prototype.add=function(e){var t;null==en.zpp_pool?t=new en:(t=en.zpp_pool,en.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},bi.prototype.inlined_add=function(e){var t;null==en.zpp_pool?t=new en:(t=en.zpp_pool,en.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},bi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},bi.prototype.insert=function(e,t){var i;null==en.zpp_pool?i=new en:(i=en.zpp_pool,en.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},bi.prototype.inlined_insert=function(e,t){var i;null==en.zpp_pool?i=new en:(i=en.zpp_pool,en.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},bi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=en.zpp_pool,en.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},bi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=en.zpp_pool,en.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},bi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},bi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},bi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=en.zpp_pool,en.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},bi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},bi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=en.zpp_pool,en.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},bi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=en.zpp_pool,en.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},bi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=en.zpp_pool,en.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},bi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=en.zpp_pool,en.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},bi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},bi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=en.zpp_pool,en.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},bi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=en.zpp_pool,en.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},bi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},bi.prototype.empty=function(){return null==this.head},bi.prototype.size=function(){return this.length},bi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},bi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},bi.prototype.front=function(){return this.head.elt},bi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},bi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},bi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},bi.prototype.__class__=bi;var Si=zpp_nape.util.ZNPList_ZPP_GeomVert=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Si.__name__=["zpp_nape","util","ZNPList_ZPP_GeomVert"],Si.prototype.head=null,Si.prototype.begin=function(){return this.head},Si.prototype.modified=null,Si.prototype.pushmod=null,Si.prototype.length=null,Si.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Si.prototype.add=function(e){var t;null==tn.zpp_pool?t=new tn:(t=tn.zpp_pool,tn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Si.prototype.inlined_add=function(e){var t;null==tn.zpp_pool?t=new tn:(t=tn.zpp_pool,tn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Si.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Si.prototype.insert=function(e,t){var i;null==tn.zpp_pool?i=new tn:(i=tn.zpp_pool,tn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Si.prototype.inlined_insert=function(e,t){var i;null==tn.zpp_pool?i=new tn:(i=tn.zpp_pool,tn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Si.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=tn.zpp_pool,tn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Si.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=tn.zpp_pool,tn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Si.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Si.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Si.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=tn.zpp_pool,tn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Si.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Si.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=tn.zpp_pool,tn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Si.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=tn.zpp_pool,tn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Si.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=tn.zpp_pool,tn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Si.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=tn.zpp_pool,tn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Si.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Si.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=tn.zpp_pool,tn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Si.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=tn.zpp_pool,tn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Si.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Si.prototype.empty=function(){return null==this.head},Si.prototype.size=function(){return this.length},Si.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Si.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Si.prototype.front=function(){return this.head.elt},Si.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Si.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Si.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Si.prototype.__class__=Si;var Ci=zpp_nape.util.ZNPList_ZPP_SimpleVert=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ci.__name__=["zpp_nape","util","ZNPList_ZPP_SimpleVert"],Ci.prototype.head=null,Ci.prototype.begin=function(){return this.head},Ci.prototype.modified=null,Ci.prototype.pushmod=null,Ci.prototype.length=null,Ci.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ci.prototype.add=function(e){var t;null==nn.zpp_pool?t=new nn:(t=nn.zpp_pool,nn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ci.prototype.inlined_add=function(e){var t;null==nn.zpp_pool?t=new nn:(t=nn.zpp_pool,nn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ci.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ci.prototype.insert=function(e,t){var i;null==nn.zpp_pool?i=new nn:(i=nn.zpp_pool,nn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ci.prototype.inlined_insert=function(e,t){var i;null==nn.zpp_pool?i=new nn:(i=nn.zpp_pool,nn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ci.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=nn.zpp_pool,nn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ci.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=nn.zpp_pool,nn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ci.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ci.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ci.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=nn.zpp_pool,nn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ci.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ci.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=nn.zpp_pool,nn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ci.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=nn.zpp_pool,nn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ci.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=nn.zpp_pool,nn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ci.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=nn.zpp_pool,nn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ci.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ci.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=nn.zpp_pool,nn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ci.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=nn.zpp_pool,nn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ci.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ci.prototype.empty=function(){return null==this.head},Ci.prototype.size=function(){return this.length},Ci.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ci.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ci.prototype.front=function(){return this.head.elt},Ci.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ci.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ci.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ci.prototype.__class__=Ci;var Mi=zpp_nape.util.ZNPList_ZPP_SimpleEvent=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Mi.__name__=["zpp_nape","util","ZNPList_ZPP_SimpleEvent"],Mi.prototype.head=null,Mi.prototype.begin=function(){return this.head},Mi.prototype.modified=null,Mi.prototype.pushmod=null,Mi.prototype.length=null,Mi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Mi.prototype.add=function(e){var t;null==rn.zpp_pool?t=new rn:(t=rn.zpp_pool,rn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Mi.prototype.inlined_add=function(e){var t;null==rn.zpp_pool?t=new rn:(t=rn.zpp_pool,rn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Mi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Mi.prototype.insert=function(e,t){var i;null==rn.zpp_pool?i=new rn:(i=rn.zpp_pool,rn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Mi.prototype.inlined_insert=function(e,t){var i;null==rn.zpp_pool?i=new rn:(i=rn.zpp_pool,rn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Mi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=rn.zpp_pool,rn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Mi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=rn.zpp_pool,rn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Mi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Mi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Mi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=rn.zpp_pool,rn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Mi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Mi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=rn.zpp_pool,rn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Mi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=rn.zpp_pool,rn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Mi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=rn.zpp_pool,rn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Mi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=rn.zpp_pool,rn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Mi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Mi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=rn.zpp_pool,rn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Mi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=rn.zpp_pool,rn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Mi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Mi.prototype.empty=function(){return null==this.head},Mi.prototype.size=function(){return this.length},Mi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Mi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Mi.prototype.front=function(){return this.head.elt},Mi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Mi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Mi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Mi.prototype.__class__=Mi;var Pi=zpp_nape.util.ZNPList_ZPP_AABBPair=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Pi.__name__=["zpp_nape","util","ZNPList_ZPP_AABBPair"],Pi.prototype.head=null,Pi.prototype.begin=function(){return this.head},Pi.prototype.modified=null,Pi.prototype.pushmod=null,Pi.prototype.length=null,Pi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Pi.prototype.add=function(e){var t;null==rr.zpp_pool?t=new rr:(t=rr.zpp_pool,rr.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Pi.prototype.inlined_add=function(e){var t;null==rr.zpp_pool?t=new rr:(t=rr.zpp_pool,rr.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Pi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Pi.prototype.insert=function(e,t){var i;null==rr.zpp_pool?i=new rr:(i=rr.zpp_pool,rr.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Pi.prototype.inlined_insert=function(e,t){var i;null==rr.zpp_pool?i=new rr:(i=rr.zpp_pool,rr.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Pi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=rr.zpp_pool,rr.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Pi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=rr.zpp_pool,rr.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Pi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Pi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Pi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=rr.zpp_pool,rr.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Pi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Pi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=rr.zpp_pool,rr.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Pi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=rr.zpp_pool,rr.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Pi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=rr.zpp_pool,rr.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Pi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=rr.zpp_pool,rr.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Pi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Pi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=rr.zpp_pool,rr.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Pi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=rr.zpp_pool,rr.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Pi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Pi.prototype.empty=function(){return null==this.head},Pi.prototype.size=function(){return this.length},Pi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Pi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Pi.prototype.front=function(){return this.head.elt},Pi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Pi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Pi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Pi.prototype.__class__=Pi;var ki=zpp_nape.util.ZNPList_ZPP_Edge=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};ki.__name__=["zpp_nape","util","ZNPList_ZPP_Edge"],ki.prototype.head=null,ki.prototype.begin=function(){return this.head},ki.prototype.modified=null,ki.prototype.pushmod=null,ki.prototype.length=null,ki.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},ki.prototype.add=function(e){var t;null==an.zpp_pool?t=new an:(t=an.zpp_pool,an.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},ki.prototype.inlined_add=function(e){var t;null==an.zpp_pool?t=new an:(t=an.zpp_pool,an.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},ki.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},ki.prototype.insert=function(e,t){var i;null==an.zpp_pool?i=new an:(i=an.zpp_pool,an.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},ki.prototype.inlined_insert=function(e,t){var i;null==an.zpp_pool?i=new an:(i=an.zpp_pool,an.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},ki.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=an.zpp_pool,an.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},ki.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=an.zpp_pool,an.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},ki.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},ki.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},ki.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=an.zpp_pool,an.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},ki.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},ki.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=an.zpp_pool,an.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},ki.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=an.zpp_pool,an.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},ki.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=an.zpp_pool,an.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},ki.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=an.zpp_pool,an.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},ki.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},ki.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=an.zpp_pool,an.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},ki.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=an.zpp_pool,an.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},ki.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},ki.prototype.empty=function(){return null==this.head},ki.prototype.size=function(){return this.length},ki.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},ki.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},ki.prototype.front=function(){return this.head.elt},ki.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},ki.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},ki.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},ki.prototype.__class__=ki;var Ti=zpp_nape.util.ZNPList_ZPP_AABBNode=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ti.__name__=["zpp_nape","util","ZNPList_ZPP_AABBNode"],Ti.prototype.head=null,Ti.prototype.begin=function(){return this.head},Ti.prototype.modified=null,Ti.prototype.pushmod=null,Ti.prototype.length=null,Ti.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ti.prototype.add=function(e){var t;null==sn.zpp_pool?t=new sn:(t=sn.zpp_pool,sn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ti.prototype.inlined_add=function(e){var t;null==sn.zpp_pool?t=new sn:(t=sn.zpp_pool,sn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ti.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ti.prototype.insert=function(e,t){var i;null==sn.zpp_pool?i=new sn:(i=sn.zpp_pool,sn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ti.prototype.inlined_insert=function(e,t){var i;null==sn.zpp_pool?i=new sn:(i=sn.zpp_pool,sn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ti.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=sn.zpp_pool,sn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ti.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=sn.zpp_pool,sn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ti.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ti.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ti.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=sn.zpp_pool,sn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ti.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ti.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=sn.zpp_pool,sn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ti.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=sn.zpp_pool,sn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ti.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=sn.zpp_pool,sn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ti.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=sn.zpp_pool,sn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ti.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ti.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=sn.zpp_pool,sn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ti.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=sn.zpp_pool,sn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ti.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ti.prototype.empty=function(){return null==this.head},Ti.prototype.size=function(){return this.length},Ti.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ti.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ti.prototype.front=function(){return this.head.elt},Ti.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ti.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ti.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ti.prototype.__class__=Ti;var Ai=zpp_nape.util.ZNPList_ZPP_Component=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ai.__name__=["zpp_nape","util","ZNPList_ZPP_Component"],Ai.prototype.head=null,Ai.prototype.begin=function(){return this.head},Ai.prototype.modified=null,Ai.prototype.pushmod=null,Ai.prototype.length=null,Ai.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ai.prototype.add=function(e){var t;null==pn.zpp_pool?t=new pn:(t=pn.zpp_pool,pn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ai.prototype.inlined_add=function(e){var t;null==pn.zpp_pool?t=new pn:(t=pn.zpp_pool,pn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ai.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ai.prototype.insert=function(e,t){var i;null==pn.zpp_pool?i=new pn:(i=pn.zpp_pool,pn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ai.prototype.inlined_insert=function(e,t){var i;null==pn.zpp_pool?i=new pn:(i=pn.zpp_pool,pn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ai.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=pn.zpp_pool,pn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ai.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=pn.zpp_pool,pn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ai.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ai.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ai.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=pn.zpp_pool,pn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ai.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ai.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=pn.zpp_pool,pn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ai.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=pn.zpp_pool,pn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ai.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=pn.zpp_pool,pn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ai.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=pn.zpp_pool,pn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ai.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ai.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=pn.zpp_pool,pn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ai.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=pn.zpp_pool,pn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ai.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ai.prototype.empty=function(){return null==this.head},Ai.prototype.size=function(){return this.length},Ai.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ai.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ai.prototype.front=function(){return this.head.elt},Ai.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ai.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ai.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ai.prototype.__class__=Ai;var Oi=zpp_nape.util.ZNPList_ZPP_FluidArbiter=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Oi.__name__=["zpp_nape","util","ZNPList_ZPP_FluidArbiter"],Oi.prototype.head=null,Oi.prototype.begin=function(){return this.head},Oi.prototype.modified=null,Oi.prototype.pushmod=null,Oi.prototype.length=null,Oi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Oi.prototype.add=function(e){var t;null==Qo.zpp_pool?t=new Qo:(t=Qo.zpp_pool,Qo.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Oi.prototype.inlined_add=function(e){var t;null==Qo.zpp_pool?t=new Qo:(t=Qo.zpp_pool,Qo.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Oi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Oi.prototype.insert=function(e,t){var i;null==Qo.zpp_pool?i=new Qo:(i=Qo.zpp_pool,Qo.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Oi.prototype.inlined_insert=function(e,t){var i;null==Qo.zpp_pool?i=new Qo:(i=Qo.zpp_pool,Qo.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Oi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Qo.zpp_pool,Qo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Oi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Qo.zpp_pool,Qo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Oi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Oi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Oi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Qo.zpp_pool,Qo.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Oi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Oi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Qo.zpp_pool,Qo.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Oi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Qo.zpp_pool,Qo.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Oi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Qo.zpp_pool,Qo.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Oi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Qo.zpp_pool,Qo.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Oi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Oi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Qo.zpp_pool,Qo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Oi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Qo.zpp_pool,Qo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Oi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Oi.prototype.empty=function(){return null==this.head},Oi.prototype.size=function(){return this.length},Oi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Oi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Oi.prototype.front=function(){return this.head.elt},Oi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Oi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Oi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Oi.prototype.__class__=Oi;var Ei=zpp_nape.util.ZNPList_ZPP_SensorArbiter=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ei.__name__=["zpp_nape","util","ZNPList_ZPP_SensorArbiter"],Ei.prototype.head=null,Ei.prototype.begin=function(){return this.head},Ei.prototype.modified=null,Ei.prototype.pushmod=null,Ei.prototype.length=null,Ei.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ei.prototype.add=function(e){var t;null==$o.zpp_pool?t=new $o:(t=$o.zpp_pool,$o.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ei.prototype.inlined_add=function(e){var t;null==$o.zpp_pool?t=new $o:(t=$o.zpp_pool,$o.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ei.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ei.prototype.insert=function(e,t){var i;null==$o.zpp_pool?i=new $o:(i=$o.zpp_pool,$o.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ei.prototype.inlined_insert=function(e,t){var i;null==$o.zpp_pool?i=new $o:(i=$o.zpp_pool,$o.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ei.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=$o.zpp_pool,$o.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ei.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=$o.zpp_pool,$o.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ei.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ei.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ei.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=$o.zpp_pool,$o.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ei.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ei.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=$o.zpp_pool,$o.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ei.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=$o.zpp_pool,$o.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ei.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=$o.zpp_pool,$o.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ei.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=$o.zpp_pool,$o.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ei.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ei.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=$o.zpp_pool,$o.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ei.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=$o.zpp_pool,$o.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ei.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ei.prototype.empty=function(){return null==this.head},Ei.prototype.size=function(){return this.length},Ei.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ei.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ei.prototype.front=function(){return this.head.elt},Ei.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ei.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ei.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ei.prototype.__class__=Ei;var Gi=zpp_nape.util.ZNPList_ZPP_Listener=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Gi.__name__=["zpp_nape","util","ZNPList_ZPP_Listener"],Gi.prototype.head=null,Gi.prototype.begin=function(){return this.head},Gi.prototype.modified=null,Gi.prototype.pushmod=null,Gi.prototype.length=null,Gi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Gi.prototype.add=function(e){var t;null==hn.zpp_pool?t=new hn:(t=hn.zpp_pool,hn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Gi.prototype.inlined_add=function(e){var t;null==hn.zpp_pool?t=new hn:(t=hn.zpp_pool,hn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Gi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Gi.prototype.insert=function(e,t){var i;null==hn.zpp_pool?i=new hn:(i=hn.zpp_pool,hn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Gi.prototype.inlined_insert=function(e,t){var i;null==hn.zpp_pool?i=new hn:(i=hn.zpp_pool,hn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Gi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=hn.zpp_pool,hn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Gi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=hn.zpp_pool,hn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Gi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Gi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Gi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=hn.zpp_pool,hn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Gi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Gi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=hn.zpp_pool,hn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Gi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=hn.zpp_pool,hn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Gi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=hn.zpp_pool,hn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Gi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=hn.zpp_pool,hn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Gi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Gi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=hn.zpp_pool,hn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Gi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=hn.zpp_pool,hn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Gi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Gi.prototype.empty=function(){return null==this.head},Gi.prototype.size=function(){return this.length},Gi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Gi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Gi.prototype.front=function(){return this.head.elt},Gi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Gi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Gi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Gi.prototype.__class__=Gi;var Di=zpp_nape.util.ZNPList_ZPP_ColArbiter=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Di.__name__=["zpp_nape","util","ZNPList_ZPP_ColArbiter"],Di.prototype.head=null,Di.prototype.begin=function(){return this.head},Di.prototype.modified=null,Di.prototype.pushmod=null,Di.prototype.length=null,Di.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Di.prototype.add=function(e){var t;null==ea.zpp_pool?t=new ea:(t=ea.zpp_pool,ea.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Di.prototype.inlined_add=function(e){var t;null==ea.zpp_pool?t=new ea:(t=ea.zpp_pool,ea.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Di.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Di.prototype.insert=function(e,t){var i;null==ea.zpp_pool?i=new ea:(i=ea.zpp_pool,ea.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Di.prototype.inlined_insert=function(e,t){var i;null==ea.zpp_pool?i=new ea:(i=ea.zpp_pool,ea.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Di.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=ea.zpp_pool,ea.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Di.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=ea.zpp_pool,ea.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Di.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Di.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Di.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=ea.zpp_pool,ea.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Di.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Di.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=ea.zpp_pool,ea.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Di.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=ea.zpp_pool,ea.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Di.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=ea.zpp_pool,ea.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Di.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=ea.zpp_pool,ea.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Di.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Di.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=ea.zpp_pool,ea.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Di.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=ea.zpp_pool,ea.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Di.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Di.prototype.empty=function(){return null==this.head},Di.prototype.size=function(){return this.length},Di.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Di.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Di.prototype.front=function(){return this.head.elt},Di.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Di.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Di.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Di.prototype.__class__=Di;var Ii=zpp_nape.util.ZNPList_ZPP_InteractionGroup=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ii.__name__=["zpp_nape","util","ZNPList_ZPP_InteractionGroup"],Ii.prototype.head=null,Ii.prototype.begin=function(){return this.head},Ii.prototype.modified=null,Ii.prototype.pushmod=null,Ii.prototype.length=null,Ii.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ii.prototype.add=function(e){var t;null==un.zpp_pool?t=new un:(t=un.zpp_pool,un.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ii.prototype.inlined_add=function(e){var t;null==un.zpp_pool?t=new un:(t=un.zpp_pool,un.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ii.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ii.prototype.insert=function(e,t){var i;null==un.zpp_pool?i=new un:(i=un.zpp_pool,un.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ii.prototype.inlined_insert=function(e,t){var i;null==un.zpp_pool?i=new un:(i=un.zpp_pool,un.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ii.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=un.zpp_pool,un.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ii.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=un.zpp_pool,un.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ii.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ii.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ii.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=un.zpp_pool,un.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ii.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ii.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=un.zpp_pool,un.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ii.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=un.zpp_pool,un.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ii.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=un.zpp_pool,un.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ii.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=un.zpp_pool,un.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ii.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ii.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=un.zpp_pool,un.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ii.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=un.zpp_pool,un.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ii.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ii.prototype.empty=function(){return null==this.head},Ii.prototype.size=function(){return this.length},Ii.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ii.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ii.prototype.front=function(){return this.head.elt},Ii.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ii.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ii.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ii.prototype.__class__=Ii;var Li=zpp_nape.util.ZNPList_ZPP_ToiEvent=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Li.__name__=["zpp_nape","util","ZNPList_ZPP_ToiEvent"],Li.prototype.head=null,Li.prototype.begin=function(){return this.head},Li.prototype.modified=null,Li.prototype.pushmod=null,Li.prototype.length=null,Li.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Li.prototype.add=function(e){var t;null==dn.zpp_pool?t=new dn:(t=dn.zpp_pool,dn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Li.prototype.inlined_add=function(e){var t;null==dn.zpp_pool?t=new dn:(t=dn.zpp_pool,dn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Li.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Li.prototype.insert=function(e,t){var i;null==dn.zpp_pool?i=new dn:(i=dn.zpp_pool,dn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Li.prototype.inlined_insert=function(e,t){var i;null==dn.zpp_pool?i=new dn:(i=dn.zpp_pool,dn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Li.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=dn.zpp_pool,dn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Li.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=dn.zpp_pool,dn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Li.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Li.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Li.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=dn.zpp_pool,dn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Li.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Li.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=dn.zpp_pool,dn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Li.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=dn.zpp_pool,dn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Li.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=dn.zpp_pool,dn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Li.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=dn.zpp_pool,dn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Li.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Li.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=dn.zpp_pool,dn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Li.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=dn.zpp_pool,dn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Li.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Li.prototype.empty=function(){return null==this.head},Li.prototype.size=function(){return this.length},Li.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Li.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Li.prototype.front=function(){return this.head.elt},Li.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Li.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Li.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Li.prototype.__class__=Li;var Bi=zpp_nape.util.ZNPList_ConvexResult=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Bi.__name__=["zpp_nape","util","ZNPList_ConvexResult"],Bi.prototype.head=null,Bi.prototype.begin=function(){return this.head},Bi.prototype.modified=null,Bi.prototype.pushmod=null,Bi.prototype.length=null,Bi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Bi.prototype.add=function(e){var t;null==cn.zpp_pool?t=new cn:(t=cn.zpp_pool,cn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Bi.prototype.inlined_add=function(e){var t;null==cn.zpp_pool?t=new cn:(t=cn.zpp_pool,cn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Bi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Bi.prototype.insert=function(e,t){var i;null==cn.zpp_pool?i=new cn:(i=cn.zpp_pool,cn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Bi.prototype.inlined_insert=function(e,t){var i;null==cn.zpp_pool?i=new cn:(i=cn.zpp_pool,cn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Bi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=cn.zpp_pool,cn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Bi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=cn.zpp_pool,cn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Bi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Bi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Bi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=cn.zpp_pool,cn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Bi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Bi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=cn.zpp_pool,cn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Bi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=cn.zpp_pool,cn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Bi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=cn.zpp_pool,cn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Bi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=cn.zpp_pool,cn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Bi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Bi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=cn.zpp_pool,cn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Bi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=cn.zpp_pool,cn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Bi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Bi.prototype.empty=function(){return null==this.head},Bi.prototype.size=function(){return this.length},Bi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Bi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Bi.prototype.front=function(){return this.head.elt},Bi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Bi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Bi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Bi.prototype.__class__=Bi;var Ri=zpp_nape.util.ZNPList_ZPP_GeomPoly=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ri.__name__=["zpp_nape","util","ZNPList_ZPP_GeomPoly"],Ri.prototype.head=null,Ri.prototype.begin=function(){return this.head},Ri.prototype.modified=null,Ri.prototype.pushmod=null,Ri.prototype.length=null,Ri.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ri.prototype.add=function(e){var t;null==_n.zpp_pool?t=new _n:(t=_n.zpp_pool,_n.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ri.prototype.inlined_add=function(e){var t;null==_n.zpp_pool?t=new _n:(t=_n.zpp_pool,_n.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ri.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ri.prototype.insert=function(e,t){var i;null==_n.zpp_pool?i=new _n:(i=_n.zpp_pool,_n.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ri.prototype.inlined_insert=function(e,t){var i;null==_n.zpp_pool?i=new _n:(i=_n.zpp_pool,_n.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ri.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=_n.zpp_pool,_n.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ri.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=_n.zpp_pool,_n.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ri.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ri.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ri.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=_n.zpp_pool,_n.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ri.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ri.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=_n.zpp_pool,_n.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ri.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=_n.zpp_pool,_n.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ri.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=_n.zpp_pool,_n.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ri.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=_n.zpp_pool,_n.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ri.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ri.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=_n.zpp_pool,_n.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ri.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=_n.zpp_pool,_n.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ri.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ri.prototype.empty=function(){return null==this.head},Ri.prototype.size=function(){return this.length},Ri.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ri.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ri.prototype.front=function(){return this.head.elt},Ri.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ri.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ri.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ri.prototype.__class__=Ri;var Fi=zpp_nape.util.ZNPList_RayResult=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Fi.__name__=["zpp_nape","util","ZNPList_RayResult"],Fi.prototype.head=null,Fi.prototype.begin=function(){return this.head},Fi.prototype.modified=null,Fi.prototype.pushmod=null,Fi.prototype.length=null,Fi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Fi.prototype.add=function(e){var t;null==yn.zpp_pool?t=new yn:(t=yn.zpp_pool,yn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Fi.prototype.inlined_add=function(e){var t;null==yn.zpp_pool?t=new yn:(t=yn.zpp_pool,yn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Fi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Fi.prototype.insert=function(e,t){var i;null==yn.zpp_pool?i=new yn:(i=yn.zpp_pool,yn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Fi.prototype.inlined_insert=function(e,t){var i;null==yn.zpp_pool?i=new yn:(i=yn.zpp_pool,yn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Fi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=yn.zpp_pool,yn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Fi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=yn.zpp_pool,yn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Fi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Fi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Fi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=yn.zpp_pool,yn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Fi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Fi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=yn.zpp_pool,yn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Fi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=yn.zpp_pool,yn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Fi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=yn.zpp_pool,yn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Fi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=yn.zpp_pool,yn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Fi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Fi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=yn.zpp_pool,yn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Fi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=yn.zpp_pool,yn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Fi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Fi.prototype.empty=function(){return null==this.head},Fi.prototype.size=function(){return this.length},Fi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Fi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Fi.prototype.front=function(){return this.head.elt},Fi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Fi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Fi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Fi.prototype.__class__=Fi;var ji=zpp_nape.util.ZNPNode_ZPP_CbType=function(){this.elt=null,this.next=null};ji.__name__=["zpp_nape","util","ZNPNode_ZPP_CbType"],ji.prototype.next=null,ji.prototype.alloc=function(){},ji.prototype.free=function(){this.elt=null},ji.prototype.elt=null,ji.prototype.elem=function(){return this.elt},ji.prototype.__class__=ji;var Ni=zpp_nape.util.ZNPNode_ZPP_CallbackSet=function(){this.elt=null,this.next=null};Ni.__name__=["zpp_nape","util","ZNPNode_ZPP_CallbackSet"],Ni.prototype.next=null,Ni.prototype.alloc=function(){},Ni.prototype.free=function(){this.elt=null},Ni.prototype.elt=null,Ni.prototype.elem=function(){return this.elt},Ni.prototype.__class__=Ni;var Ui=zpp_nape.util.ZNPNode_ZPP_Shape=function(){this.elt=null,this.next=null};Ui.__name__=["zpp_nape","util","ZNPNode_ZPP_Shape"],Ui.prototype.next=null,Ui.prototype.alloc=function(){},Ui.prototype.free=function(){this.elt=null},Ui.prototype.elt=null,Ui.prototype.elem=function(){return this.elt},Ui.prototype.__class__=Ui;var Vi=zpp_nape.util.ZNPNode_ZPP_Body=function(){this.elt=null,this.next=null};Vi.__name__=["zpp_nape","util","ZNPNode_ZPP_Body"],Vi.prototype.next=null,Vi.prototype.alloc=function(){},Vi.prototype.free=function(){this.elt=null},Vi.prototype.elt=null,Vi.prototype.elem=function(){return this.elt},Vi.prototype.__class__=Vi;var Hi=zpp_nape.util.ZNPNode_ZPP_Constraint=function(){this.elt=null,this.next=null};Hi.__name__=["zpp_nape","util","ZNPNode_ZPP_Constraint"],Hi.prototype.next=null,Hi.prototype.alloc=function(){},Hi.prototype.free=function(){this.elt=null},Hi.prototype.elt=null,Hi.prototype.elem=function(){return this.elt},Hi.prototype.__class__=Hi;var Wi=zpp_nape.util.ZNPNode_ZPP_Compound=function(){this.elt=null,this.next=null};Wi.__name__=["zpp_nape","util","ZNPNode_ZPP_Compound"],Wi.prototype.next=null,Wi.prototype.alloc=function(){},Wi.prototype.free=function(){this.elt=null},Wi.prototype.elt=null,Wi.prototype.elem=function(){return this.elt},Wi.prototype.__class__=Wi;var Ko=zpp_nape.util.ZNPNode_ZPP_Arbiter=function(){this.elt=null,this.next=null};Ko.__name__=["zpp_nape","util","ZNPNode_ZPP_Arbiter"],Ko.prototype.next=null,Ko.prototype.alloc=function(){},Ko.prototype.free=function(){this.elt=null},Ko.prototype.elt=null,Ko.prototype.elem=function(){return this.elt},Ko.prototype.__class__=Ko;var Zo=zpp_nape.util.ZNPNode_ZPP_InteractionListener=function(){this.elt=null,this.next=null};Zo.__name__=["zpp_nape","util","ZNPNode_ZPP_InteractionListener"],Zo.prototype.next=null,Zo.prototype.alloc=function(){},Zo.prototype.free=function(){this.elt=null},Zo.prototype.elt=null,Zo.prototype.elem=function(){return this.elt},Zo.prototype.__class__=Zo;var qi=zpp_nape.util.ZNPNode_ZPP_CbSet=function(){this.elt=null,this.next=null};qi.__name__=["zpp_nape","util","ZNPNode_ZPP_CbSet"],qi.prototype.next=null,qi.prototype.alloc=function(){},qi.prototype.free=function(){this.elt=null},qi.prototype.elt=null,qi.prototype.elem=function(){return this.elt},qi.prototype.__class__=qi;var Jo=zpp_nape.util.ZNPNode_ZPP_Interactor=function(){this.elt=null,this.next=null};Jo.__name__=["zpp_nape","util","ZNPNode_ZPP_Interactor"],Jo.prototype.next=null,Jo.prototype.alloc=function(){},Jo.prototype.free=function(){this.elt=null},Jo.prototype.elt=null,Jo.prototype.elem=function(){return this.elt},Jo.prototype.__class__=Jo;var Xi=zpp_nape.util.ZNPNode_ZPP_BodyListener=function(){this.elt=null,this.next=null};Xi.__name__=["zpp_nape","util","ZNPNode_ZPP_BodyListener"],Xi.prototype.next=null,Xi.prototype.alloc=function(){},Xi.prototype.free=function(){this.elt=null},Xi.prototype.elt=null,Xi.prototype.elem=function(){return this.elt},Xi.prototype.__class__=Xi;var Yi=zpp_nape.util.ZNPNode_ZPP_CbSetPair=function(){this.elt=null,this.next=null};Yi.__name__=["zpp_nape","util","ZNPNode_ZPP_CbSetPair"],Yi.prototype.next=null,Yi.prototype.alloc=function(){},Yi.prototype.free=function(){this.elt=null},Yi.prototype.elt=null,Yi.prototype.elem=function(){return this.elt},Yi.prototype.__class__=Yi;var Ki=zpp_nape.util.ZNPNode_ZPP_ConstraintListener=function(){this.elt=null,this.next=null};Ki.__name__=["zpp_nape","util","ZNPNode_ZPP_ConstraintListener"],Ki.prototype.next=null,Ki.prototype.alloc=function(){},Ki.prototype.free=function(){this.elt=null},Ki.prototype.elt=null,Ki.prototype.elem=function(){return this.elt},Ki.prototype.__class__=Ki;var Zi=zpp_nape.util.ZNPNode_ZPP_CutInt=function(){this.elt=null,this.next=null};Zi.__name__=["zpp_nape","util","ZNPNode_ZPP_CutInt"],Zi.prototype.next=null,Zi.prototype.alloc=function(){},Zi.prototype.free=function(){this.elt=null},Zi.prototype.elt=null,Zi.prototype.elem=function(){return this.elt},Zi.prototype.__class__=Zi;var Ji=zpp_nape.util.ZNPNode_ZPP_CutVert=function(){this.elt=null,this.next=null};Ji.__name__=["zpp_nape","util","ZNPNode_ZPP_CutVert"],Ji.prototype.next=null,Ji.prototype.alloc=function(){},Ji.prototype.free=function(){this.elt=null},Ji.prototype.elt=null,Ji.prototype.elem=function(){return this.elt},Ji.prototype.__class__=Ji;var Qi=zpp_nape.util.ZNPNode_ZPP_PartitionVertex=function(){this.elt=null,this.next=null};Qi.__name__=["zpp_nape","util","ZNPNode_ZPP_PartitionVertex"],Qi.prototype.next=null,Qi.prototype.alloc=function(){},Qi.prototype.free=function(){this.elt=null},Qi.prototype.elt=null,Qi.prototype.elem=function(){return this.elt},Qi.prototype.__class__=Qi;var $i=zpp_nape.util.ZNPNode_ZPP_SimplifyP=function(){this.elt=null,this.next=null};$i.__name__=["zpp_nape","util","ZNPNode_ZPP_SimplifyP"],$i.prototype.next=null,$i.prototype.alloc=function(){},$i.prototype.free=function(){this.elt=null},$i.prototype.elt=null,$i.prototype.elem=function(){return this.elt},$i.prototype.__class__=$i;var en=zpp_nape.util.ZNPNode_ZPP_PartitionedPoly=function(){this.elt=null,this.next=null};en.__name__=["zpp_nape","util","ZNPNode_ZPP_PartitionedPoly"],en.prototype.next=null,en.prototype.alloc=function(){},en.prototype.free=function(){this.elt=null},en.prototype.elt=null,en.prototype.elem=function(){return this.elt},en.prototype.__class__=en;var tn=zpp_nape.util.ZNPNode_ZPP_GeomVert=function(){this.elt=null,this.next=null};tn.__name__=["zpp_nape","util","ZNPNode_ZPP_GeomVert"],tn.prototype.next=null,tn.prototype.alloc=function(){},tn.prototype.free=function(){this.elt=null},tn.prototype.elt=null,tn.prototype.elem=function(){return this.elt},tn.prototype.__class__=tn;var nn=zpp_nape.util.ZNPNode_ZPP_SimpleVert=function(){this.elt=null,this.next=null};nn.__name__=["zpp_nape","util","ZNPNode_ZPP_SimpleVert"],nn.prototype.next=null,nn.prototype.alloc=function(){},nn.prototype.free=function(){this.elt=null},nn.prototype.elt=null,nn.prototype.elem=function(){return this.elt},nn.prototype.__class__=nn;var rn=zpp_nape.util.ZNPNode_ZPP_SimpleEvent=function(){this.elt=null,this.next=null};rn.__name__=["zpp_nape","util","ZNPNode_ZPP_SimpleEvent"],rn.prototype.next=null,rn.prototype.alloc=function(){},rn.prototype.free=function(){this.elt=null},rn.prototype.elt=null,rn.prototype.elem=function(){return this.elt},rn.prototype.__class__=rn;var on=zpp_nape.util.ZNPNode_ZPP_Vec2=function(){this.elt=null,this.next=null};on.__name__=["zpp_nape","util","ZNPNode_ZPP_Vec2"],on.prototype.next=null,on.prototype.alloc=function(){},on.prototype.free=function(){this.elt=null},on.prototype.elt=null,on.prototype.elem=function(){return this.elt},on.prototype.__class__=on;var rr=zpp_nape.util.ZNPNode_ZPP_AABBPair=function(){this.elt=null,this.next=null};rr.__name__=["zpp_nape","util","ZNPNode_ZPP_AABBPair"],rr.prototype.next=null,rr.prototype.alloc=function(){},rr.prototype.free=function(){this.elt=null},rr.prototype.elt=null,rr.prototype.elem=function(){return this.elt},rr.prototype.__class__=rr;var an=zpp_nape.util.ZNPNode_ZPP_Edge=function(){this.elt=null,this.next=null};an.__name__=["zpp_nape","util","ZNPNode_ZPP_Edge"],an.prototype.next=null,an.prototype.alloc=function(){},an.prototype.free=function(){this.elt=null},an.prototype.elt=null,an.prototype.elem=function(){return this.elt},an.prototype.__class__=an;var sn=zpp_nape.util.ZNPNode_ZPP_AABBNode=function(){this.elt=null,this.next=null};sn.__name__=["zpp_nape","util","ZNPNode_ZPP_AABBNode"],sn.prototype.next=null,sn.prototype.alloc=function(){},sn.prototype.free=function(){this.elt=null},sn.prototype.elt=null,sn.prototype.elem=function(){return this.elt},sn.prototype.__class__=sn;var pn=zpp_nape.util.ZNPNode_ZPP_Component=function(){this.elt=null,this.next=null};pn.__name__=["zpp_nape","util","ZNPNode_ZPP_Component"],pn.prototype.next=null,pn.prototype.alloc=function(){},pn.prototype.free=function(){this.elt=null},pn.prototype.elt=null,pn.prototype.elem=function(){return this.elt},pn.prototype.__class__=pn;var Qo=zpp_nape.util.ZNPNode_ZPP_FluidArbiter=function(){this.elt=null,this.next=null};Qo.__name__=["zpp_nape","util","ZNPNode_ZPP_FluidArbiter"],Qo.prototype.next=null,Qo.prototype.alloc=function(){},Qo.prototype.free=function(){this.elt=null},Qo.prototype.elt=null,Qo.prototype.elem=function(){return this.elt},Qo.prototype.__class__=Qo;var $o=zpp_nape.util.ZNPNode_ZPP_SensorArbiter=function(){this.elt=null,this.next=null};$o.__name__=["zpp_nape","util","ZNPNode_ZPP_SensorArbiter"],$o.prototype.next=null,$o.prototype.alloc=function(){},$o.prototype.free=function(){this.elt=null},$o.prototype.elt=null,$o.prototype.elem=function(){return this.elt},$o.prototype.__class__=$o;var hn=zpp_nape.util.ZNPNode_ZPP_Listener=function(){this.elt=null,this.next=null};hn.__name__=["zpp_nape","util","ZNPNode_ZPP_Listener"],hn.prototype.next=null,hn.prototype.alloc=function(){},hn.prototype.free=function(){this.elt=null},hn.prototype.elt=null,hn.prototype.elem=function(){return this.elt},hn.prototype.__class__=hn;var ea=zpp_nape.util.ZNPNode_ZPP_ColArbiter=function(){this.elt=null,this.next=null};ea.__name__=["zpp_nape","util","ZNPNode_ZPP_ColArbiter"],ea.prototype.next=null,ea.prototype.alloc=function(){},ea.prototype.free=function(){this.elt=null},ea.prototype.elt=null,ea.prototype.elem=function(){return this.elt},ea.prototype.__class__=ea;var un=zpp_nape.util.ZNPNode_ZPP_InteractionGroup=function(){this.elt=null,this.next=null};un.__name__=["zpp_nape","util","ZNPNode_ZPP_InteractionGroup"],un.prototype.next=null,un.prototype.alloc=function(){},un.prototype.free=function(){this.elt=null},un.prototype.elt=null,un.prototype.elem=function(){return this.elt},un.prototype.__class__=un;var dn=zpp_nape.util.ZNPNode_ZPP_ToiEvent=function(){this.elt=null,this.next=null};dn.__name__=["zpp_nape","util","ZNPNode_ZPP_ToiEvent"],dn.prototype.next=null,dn.prototype.alloc=function(){},dn.prototype.free=function(){this.elt=null},dn.prototype.elt=null,dn.prototype.elem=function(){return this.elt},dn.prototype.__class__=dn;var cn=zpp_nape.util.ZNPNode_ConvexResult=function(){this.elt=null,this.next=null};cn.__name__=["zpp_nape","util","ZNPNode_ConvexResult"],cn.prototype.next=null,cn.prototype.alloc=function(){},cn.prototype.free=function(){this.elt=null},cn.prototype.elt=null,cn.prototype.elem=function(){return this.elt},cn.prototype.__class__=cn;var _n=zpp_nape.util.ZNPNode_ZPP_GeomPoly=function(){this.elt=null,this.next=null};_n.__name__=["zpp_nape","util","ZNPNode_ZPP_GeomPoly"],_n.prototype.next=null,_n.prototype.alloc=function(){},_n.prototype.free=function(){this.elt=null},_n.prototype.elt=null,_n.prototype.elem=function(){return this.elt},_n.prototype.__class__=_n;var yn=zpp_nape.util.ZNPNode_RayResult=function(){this.elt=null,this.next=null};yn.__name__=["zpp_nape","util","ZNPNode_RayResult"],yn.prototype.next=null,yn.prototype.alloc=function(){},yn.prototype.free=function(){this.elt=null},yn.prototype.elt=null,yn.prototype.elem=function(){return this.elt},yn.prototype.__class__=yn;var xn=zpp_nape.util.ZPP_MixVec2List=function(){this.at_index=0,this.at_ite=null,this.zip_length=!1,this._length=0,this.inner=null,ve.call(this),this.at_ite=null,this.at_index=0,this.zip_length=!0,this._length=0};xn.__name__=["zpp_nape","util","ZPP_MixVec2List"],xn.__super__=ve,xn.prototype=Object.create(ve.prototype),xn.get=function(e,t){null==t&&(t=!1);var i=new xn;return i.inner=e,i.zpp_inner.immutable=t,i},xn.prototype.inner=null,xn.prototype._length=null,xn.prototype.zip_length=null,xn.prototype.at_ite=null,xn.prototype.at_index=null,xn.prototype.zpp_gl=function(){if(this.zpp_vm(),this.zip_length){this._length=0;for(var e=this.inner.next;null!=e;)this._length++,e=e.next;this.zip_length=!1}return this._length},xn.prototype.zpp_vm=function(){this.zpp_inner.validate(),this.inner.modified&&(this.zip_length=!0,this._length=0,this.at_ite=null)},xn.prototype.at=function(e){for(this.zpp_vm(),this.zpp_inner.reverse_flag&&(e=this.zpp_gl()-1-e),(e<this.at_index||null==this.at_ite)&&(this.at_index=0,this.at_ite=this.inner.next);this.at_index!=e;)this.at_index++,this.at_ite=this.at_ite.next;var t=this.at_ite;if(null==t.outer){t.outer=new lt;var i=t.outer.zpp_inner;null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=ep.zpp_pool,ep.zpp_pool=i,t.outer.zpp_inner=t}return t.outer},xn.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_vm();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);return t&&(this.zpp_inner.reverse_flag?this.inner.add(e.zpp_inner):this.inner.insert(this.inner.iterator_at(this.zpp_gl()-1),e.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)),t},xn.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_vm();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);return t&&(this.zpp_inner.reverse_flag?this.inner.insert(this.inner.iterator_at(this.zpp_gl()-1),e.zpp_inner):this.inner.add(e.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)),t},xn.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_vm();var e=null;if(this.zpp_inner.reverse_flag){if(null==(e=this.inner.next).outer){e.outer=new lt;var t=e.outer.zpp_inner;null!=t.outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=ep.zpp_pool,ep.zpp_pool=t,e.outer.zpp_inner=e}var i=e.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.inner.pop()}else{null!=this.at_ite&&null==this.at_ite.next&&(this.at_ite=null);var n=1==this.zpp_gl()?null:this.inner.iterator_at(this.zpp_gl()-2);if(null==(e=null==n?this.inner.next:n.next).outer){e.outer=new lt;var r=e.outer.zpp_inner;null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=ep.zpp_pool,ep.zpp_pool=r,e.outer.zpp_inner=e}var o=e.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(o),this.zpp_inner.dontremove||this.inner.erase(n)}if(this.zpp_inner.invalidate(),null==e.outer){e.outer=new lt;var a=e.outer.zpp_inner;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=ep.zpp_pool,ep.zpp_pool=a,e.outer.zpp_inner=e}return e.outer},xn.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_vm();var e=null;if(this.zpp_inner.reverse_flag){null!=this.at_ite&&null==this.at_ite.next&&(this.at_ite=null);var t=1==this.zpp_gl()?null:this.inner.iterator_at(this.zpp_gl()-2);if(null==(e=null==t?this.inner.next:t.next).outer){e.outer=new lt;var i=e.outer.zpp_inner;null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=ep.zpp_pool,ep.zpp_pool=i,e.outer.zpp_inner=e}var n=e.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.inner.erase(t)}else{if(null==(e=this.inner.next).outer){e.outer=new lt;var r=e.outer.zpp_inner;null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=ep.zpp_pool,ep.zpp_pool=r,e.outer.zpp_inner=e}var o=e.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(o),this.zpp_inner.dontremove||this.inner.pop()}if(this.zpp_inner.invalidate(),null==e.outer){e.outer=new lt;var a=e.outer.zpp_inner;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=ep.zpp_pool,ep.zpp_pool=a,e.outer.zpp_inner=e}return e.outer},xn.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_vm(),t=!1;for(var i=this.inner.next;null!=i;){if(e.zpp_inner==i){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},xn.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;!this.empty();)this.pop();else for(;!this.empty();)this.shift()},xn.prototype.__class__=xn;var mn=zpp_nape.util.ZPP_ConstraintList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Ee,this._invalidated=!0};mn.__name__=["zpp_nape","util","ZPP_ConstraintList"],mn.get=function(e,t){null==t&&(t=!1);var i=new w;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},mn.prototype.outer=null,mn.prototype.inner=null,mn.prototype.immutable=null,mn.prototype._invalidated=null,mn.prototype._invalidate=null,mn.prototype._validate=null,mn.prototype._modifiable=null,mn.prototype.adder=null,mn.prototype.post_adder=null,mn.prototype.subber=null,mn.prototype.dontremove=null,mn.prototype.reverse_flag=null,mn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},mn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},mn.prototype.modify_test=function(){},mn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},mn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},mn.prototype.at_index=null,mn.prototype.at_ite=null,mn.prototype.push_ite=null,mn.prototype.zip_length=null,mn.prototype.user_length=null,mn.prototype.__class__=mn;var gn=zpp_nape.util.ZPP_BodyList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new mi,this._invalidated=!0};gn.__name__=["zpp_nape","util","ZPP_BodyList"],gn.get=function(e,t){null==t&&(t=!1);var i=new ee;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},gn.prototype.outer=null,gn.prototype.inner=null,gn.prototype.immutable=null,gn.prototype._invalidated=null,gn.prototype._invalidate=null,gn.prototype._validate=null,gn.prototype._modifiable=null,gn.prototype.adder=null,gn.prototype.post_adder=null,gn.prototype.subber=null,gn.prototype.dontremove=null,gn.prototype.reverse_flag=null,gn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},gn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},gn.prototype.modify_test=function(){},gn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},gn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},gn.prototype.at_index=null,gn.prototype.at_ite=null,gn.prototype.push_ite=null,gn.prototype.zip_length=null,gn.prototype.user_length=null,gn.prototype.__class__=gn;var fn=zpp_nape.util.ZPP_InteractorList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Ge,this._invalidated=!0};fn.__name__=["zpp_nape","util","ZPP_InteractorList"],fn.get=function(e,t){null==t&&(t=!1);var i=new he;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},fn.prototype.outer=null,fn.prototype.inner=null,fn.prototype.immutable=null,fn.prototype._invalidated=null,fn.prototype._invalidate=null,fn.prototype._validate=null,fn.prototype._modifiable=null,fn.prototype.adder=null,fn.prototype.post_adder=null,fn.prototype.subber=null,fn.prototype.dontremove=null,fn.prototype.reverse_flag=null,fn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},fn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},fn.prototype.modify_test=function(){},fn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},fn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},fn.prototype.at_index=null,fn.prototype.at_ite=null,fn.prototype.push_ite=null,fn.prototype.zip_length=null,fn.prototype.user_length=null,fn.prototype.__class__=fn;var vn=zpp_nape.util.ZPP_CompoundList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new gi,this._invalidated=!0};vn.__name__=["zpp_nape","util","ZPP_CompoundList"],vn.get=function(e,t){null==t&&(t=!1);var i=new ae;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},vn.prototype.outer=null,vn.prototype.inner=null,vn.prototype.immutable=null,vn.prototype._invalidated=null,vn.prototype._invalidate=null,vn.prototype._validate=null,vn.prototype._modifiable=null,vn.prototype.adder=null,vn.prototype.post_adder=null,vn.prototype.subber=null,vn.prototype.dontremove=null,vn.prototype.reverse_flag=null,vn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},vn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},vn.prototype.modify_test=function(){},vn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},vn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},vn.prototype.at_index=null,vn.prototype.at_ite=null,vn.prototype.push_ite=null,vn.prototype.zip_length=null,vn.prototype.user_length=null,vn.prototype.__class__=vn;var zn=zpp_nape.util.ZPP_ListenerList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Gi,this._invalidated=!0};zn.__name__=["zpp_nape","util","ZPP_ListenerList"],zn.get=function(e,t){null==t&&(t=!1);var i=new x;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},zn.prototype.outer=null,zn.prototype.inner=null,zn.prototype.immutable=null,zn.prototype._invalidated=null,zn.prototype._invalidate=null,zn.prototype._validate=null,zn.prototype._modifiable=null,zn.prototype.adder=null,zn.prototype.post_adder=null,zn.prototype.subber=null,zn.prototype.dontremove=null,zn.prototype.reverse_flag=null,zn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},zn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},zn.prototype.modify_test=function(){},zn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},zn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},zn.prototype.at_index=null,zn.prototype.at_ite=null,zn.prototype.push_ite=null,zn.prototype.zip_length=null,zn.prototype.user_length=null,zn.prototype.__class__=zn;var Tn=zpp_nape.util.ZPP_CbTypeList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Fe,this._invalidated=!0};Tn.__name__=["zpp_nape","util","ZPP_CbTypeList"],Tn.get=function(e,t){null==t&&(t=!1);var i=new y;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},Tn.prototype.outer=null,Tn.prototype.inner=null,Tn.prototype.immutable=null,Tn.prototype._invalidated=null,Tn.prototype._invalidate=null,Tn.prototype._validate=null,Tn.prototype._modifiable=null,Tn.prototype.adder=null,Tn.prototype.post_adder=null,Tn.prototype.subber=null,Tn.prototype.dontremove=null,Tn.prototype.reverse_flag=null,Tn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},Tn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},Tn.prototype.modify_test=function(){},Tn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},Tn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},Tn.prototype.at_index=null,Tn.prototype.at_ite=null,Tn.prototype.push_ite=null,Tn.prototype.zip_length=null,Tn.prototype.user_length=null,Tn.prototype.__class__=Tn;var An=zpp_nape.util.ZPP_Vec2List=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new vt,this._invalidated=!0};An.__name__=["zpp_nape","util","ZPP_Vec2List"],An.get=function(e,t){null==t&&(t=!1);var i=new ve;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},An.prototype.outer=null,An.prototype.inner=null,An.prototype.immutable=null,An.prototype._invalidated=null,An.prototype._invalidate=null,An.prototype._validate=null,An.prototype._modifiable=null,An.prototype.adder=null,An.prototype.post_adder=null,An.prototype.subber=null,An.prototype.dontremove=null,An.prototype.reverse_flag=null,An.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},An.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},An.prototype.modify_test=function(){},An.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},An.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},An.prototype.at_index=null,An.prototype.at_ite=null,An.prototype.push_ite=null,An.prototype.zip_length=null,An.prototype.user_length=null,An.prototype.__class__=An;var On=zpp_nape.util.ZPP_GeomPolyList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Ri,this._invalidated=!0};On.__name__=["zpp_nape","util","ZPP_GeomPolyList"],On.get=function(e,t){null==t&&(t=!1);var i=new bn;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},On.prototype.outer=null,On.prototype.inner=null,On.prototype.immutable=null,On.prototype._invalidated=null,On.prototype._invalidate=null,On.prototype._validate=null,On.prototype._modifiable=null,On.prototype.adder=null,On.prototype.post_adder=null,On.prototype.subber=null,On.prototype.dontremove=null,On.prototype.reverse_flag=null,On.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},On.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},On.prototype.modify_test=function(){},On.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},On.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},On.prototype.at_index=null,On.prototype.at_ite=null,On.prototype.push_ite=null,On.prototype.zip_length=null,On.prototype.user_length=null,On.prototype.__class__=On;var En=zpp_nape.util.ZPP_RayResultList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Fi,this._invalidated=!0};En.__name__=["zpp_nape","util","ZPP_RayResultList"],En.get=function(e,t){null==t&&(t=!1);var i=new K;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},En.prototype.outer=null,En.prototype.inner=null,En.prototype.immutable=null,En.prototype._invalidated=null,En.prototype._invalidate=null,En.prototype._validate=null,En.prototype._modifiable=null,En.prototype.adder=null,En.prototype.post_adder=null,En.prototype.subber=null,En.prototype.dontremove=null,En.prototype.reverse_flag=null,En.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},En.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},En.prototype.modify_test=function(){},En.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},En.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},En.prototype.at_index=null,En.prototype.at_ite=null,En.prototype.push_ite=null,En.prototype.zip_length=null,En.prototype.user_length=null,En.prototype.__class__=En;var Gn=zpp_nape.util.ZPP_ConvexResultList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Bi,this._invalidated=!0};Gn.__name__=["zpp_nape","util","ZPP_ConvexResultList"],Gn.get=function(e,t){null==t&&(t=!1);var i=new pt;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},Gn.prototype.outer=null,Gn.prototype.inner=null,Gn.prototype.immutable=null,Gn.prototype._invalidated=null,Gn.prototype._invalidate=null,Gn.prototype._validate=null,Gn.prototype._modifiable=null,Gn.prototype.adder=null,Gn.prototype.post_adder=null,Gn.prototype.subber=null,Gn.prototype.dontremove=null,Gn.prototype.reverse_flag=null,Gn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},Gn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},Gn.prototype.modify_test=function(){},Gn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},Gn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},Gn.prototype.at_index=null,Gn.prototype.at_ite=null,Gn.prototype.push_ite=null,Gn.prototype.zip_length=null,Gn.prototype.user_length=null,Gn.prototype.__class__=Gn;var Dn=zpp_nape.util.ZPP_EdgeList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new ki,this._invalidated=!0};Dn.__name__=["zpp_nape","util","ZPP_EdgeList"],Dn.get=function(e,t){null==t&&(t=!1);var i=new ye;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},Dn.prototype.outer=null,Dn.prototype.inner=null,Dn.prototype.immutable=null,Dn.prototype._invalidated=null,Dn.prototype._invalidate=null,Dn.prototype._validate=null,Dn.prototype._modifiable=null,Dn.prototype.adder=null,Dn.prototype.post_adder=null,Dn.prototype.subber=null,Dn.prototype.dontremove=null,Dn.prototype.reverse_flag=null,Dn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},Dn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},Dn.prototype.modify_test=function(){},Dn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},Dn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},Dn.prototype.at_index=null,Dn.prototype.at_ite=null,Dn.prototype.push_ite=null,Dn.prototype.zip_length=null,Dn.prototype.user_length=null,Dn.prototype.__class__=Dn;var In=zpp_nape.util.ZPP_ShapeList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new xi,this._invalidated=!0};In.__name__=["zpp_nape","util","ZPP_ShapeList"],In.get=function(e,t){null==t&&(t=!1);var i=new me;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},In.prototype.outer=null,In.prototype.inner=null,In.prototype.immutable=null,In.prototype._invalidated=null,In.prototype._invalidate=null,In.prototype._validate=null,In.prototype._modifiable=null,In.prototype.adder=null,In.prototype.post_adder=null,In.prototype.subber=null,In.prototype.dontremove=null,In.prototype.reverse_flag=null,In.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},In.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},In.prototype.modify_test=function(){},In.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},In.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},In.prototype.at_index=null,In.prototype.at_ite=null,In.prototype.push_ite=null,In.prototype.zip_length=null,In.prototype.user_length=null,In.prototype.__class__=In;var Ln=zpp_nape.util.ZPP_InteractionGroupList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Ii,this._invalidated=!0};Ln.__name__=["zpp_nape","util","ZPP_InteractionGroupList"],Ln.get=function(e,t){null==t&&(t=!1);var i=new j;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},Ln.prototype.outer=null,Ln.prototype.inner=null,Ln.prototype.immutable=null,Ln.prototype._invalidated=null,Ln.prototype._invalidate=null,Ln.prototype._validate=null,Ln.prototype._modifiable=null,Ln.prototype.adder=null,Ln.prototype.post_adder=null,Ln.prototype.subber=null,Ln.prototype.dontremove=null,Ln.prototype.reverse_flag=null,Ln.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},Ln.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},Ln.prototype.modify_test=function(){},Ln.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},Ln.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},Ln.prototype.at_index=null,Ln.prototype.at_ite=null,Ln.prototype.push_ite=null,Ln.prototype.zip_length=null,Ln.prototype.user_length=null,Ln.prototype.__class__=Ln;var Bn=zpp_nape.util.ZPP_ArbiterList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new fi,this._invalidated=!0};Bn.__name__=["zpp_nape","util","ZPP_ArbiterList"],Bn.get=function(e,t){null==t&&(t=!1);var i=new E;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},Bn.prototype.outer=null,Bn.prototype.inner=null,Bn.prototype.immutable=null,Bn.prototype._invalidated=null,Bn.prototype._invalidate=null,Bn.prototype._validate=null,Bn.prototype._modifiable=null,Bn.prototype.adder=null,Bn.prototype.post_adder=null,Bn.prototype.subber=null,Bn.prototype.dontremove=null,Bn.prototype.reverse_flag=null,Bn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},Bn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},Bn.prototype.modify_test=function(){},Bn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},Bn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},Bn.prototype.at_index=null,Bn.prototype.at_ite=null,Bn.prototype.push_ite=null,Bn.prototype.zip_length=null,Bn.prototype.user_length=null,Bn.prototype.__class__=Bn;var Rn=zpp_nape.util.ZPP_ContactList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new qo,this._invalidated=!0};Rn.__name__=["zpp_nape","util","ZPP_ContactList"],Rn.get=function(e,t){null==t&&(t=!1);var i=new L;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},Rn.prototype.outer=null,Rn.prototype.inner=null,Rn.prototype.immutable=null,Rn.prototype._invalidated=null,Rn.prototype._invalidate=null,Rn.prototype._validate=null,Rn.prototype._modifiable=null,Rn.prototype.adder=null,Rn.prototype.post_adder=null,Rn.prototype.subber=null,Rn.prototype.dontremove=null,Rn.prototype.reverse_flag=null,Rn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},Rn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},Rn.prototype.modify_test=function(){},Rn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},Rn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},Rn.prototype.at_index=null,Rn.prototype.at_ite=null,Rn.prototype.push_ite=null,Rn.prototype.zip_length=null,Rn.prototype.user_length=null,Rn.prototype.__class__=Rn;var Fn=zpp_nape.util.ZPP_Math=function(){};Fn.__name__=["zpp_nape","util","ZPP_Math"],Fn.sqrt=function(e){return Math.sqrt(e)},Fn.invsqrt=function(e){return 1/Math.sqrt(e)},Fn.sqr=function(e){return e*e},Fn.clamp2=function(e,t){var i=-t;return e<i?i:t<e?t:e},Fn.clamp=function(e,t,i){return e<t?t:i<e?i:e},Fn.prototype.__class__=Fn;var jn=zpp_nape.util.ZPP_PubPool=function(){};jn.__name__=["zpp_nape","util","ZPP_PubPool"],jn.prototype.__class__=jn;var Nn=zpp_nape.util.ZPP_Set_ZPP_Body=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};Nn.__name__=["zpp_nape","util","ZPP_Set_ZPP_Body"],Nn.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},Nn.prototype.alloc=function(){},Nn.prototype.lt=null,Nn.prototype.swapped=null,Nn.prototype.data=null,Nn.prototype.prev=null,Nn.prototype.next=null,Nn.prototype.parent=null,Nn.prototype.colour=null,Nn.prototype.verify=function(){if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){var t=e.data,i=!0;if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var r=n.data;if(i){if(t==r)i=!1;else if(!this.lt(r,t)&&this.lt(t,r))return!1}else if(!this.lt(t,r)&&this.lt(r,t))return!1;if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return!0},Nn.prototype.empty=function(){return null==this.parent},Nn.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},Nn.prototype.size=function(){var e=0;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(++e,null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}return e},Nn.prototype.has=function(e){return null!=this.find(e)},Nn.prototype.find=function(e){for(var t=this.parent;null!=t&&t.data!=e;)t=this.lt(e,t.data)?t.prev:t.next;return t},Nn.prototype.has_weak=function(e){return null!=this.find_weak(e)},Nn.prototype.find_weak=function(e){for(var t=this.parent;null!=t;)if(this.lt(e,t.data))t=t.prev;else{if(!this.lt(t.data,e))break;t=t.next}return t},Nn.prototype.lower_bound=function(e){var t=null;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var n=i.data;if(!this.lt(n,e)){t=n;break}if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}return t},Nn.prototype.first=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;return e.data},Nn.prototype.pop_front=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;var t=e.data;return this.remove_node(e),t},Nn.prototype.remove=function(e){this.remove_node(this.find(e))},Nn.prototype.successor_node=function(e){if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{var t=e;for(e=e.parent;null!=e&&e.prev!=t;)e=(t=e).parent}return e},Nn.prototype.predecessor_node=function(e){if(null!=e.prev)for(e=e.prev;null!=e.next;)e=e.next;else{var t=e;for(e=e.parent;null!=e&&e.next!=t;)e=(t=e).parent}return e},Nn.prototype.successor=function(e){var t=this.successor_node(this.find(e));return null==t?null:t.data},Nn.prototype.predecessor=function(e){var t=this.predecessor_node(this.find(e));return null==t?null:t.data},Nn.prototype.remove_node=function(e){if(null!=e.next&&null!=e.prev){for(var t=e.next;null!=t.prev;)t=t.prev;var i=e.data;e.data=t.data,t.data=i,null!=this.swapped&&this.swapped(e.data,t.data),e=t}var n=null==e.prev?e.next:e.prev;if(1==e.colour)if(null!=e.prev||null!=e.next)n.colour=1;else if(null!=e.parent)for(var r=e.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var o=r.prev;if(-1==o.colour){this.__fix_neg_red(o);break}if(0==o.colour){if(null!=o.prev&&0==o.prev.colour){this.__fix_dbl_red(o.prev);break}if(null!=o.next&&0==o.next.colour){this.__fix_dbl_red(o.next);break}}var a=r.next;if(-1==a.colour){this.__fix_neg_red(a);break}if(0==a.colour){if(null!=a.prev&&0==a.prev.colour){this.__fix_dbl_red(a.prev);break}if(null!=a.next&&0==a.next.colour){this.__fix_dbl_red(a.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var s=e.parent;null==s?this.parent=n:s.prev==e?s.prev=n:s.next=n,null!=n&&(n.parent=s),e.parent=e.prev=e.next=null;var p=e;p.data=null,p.lt=null,p.swapped=null,p.next=Nn.zpp_pool,Nn.zpp_pool=p},Nn.prototype.clear=function(){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=Nn.zpp_pool,Nn.zpp_pool=i,e=t}this.parent=null}},Nn.prototype.clear_with=function(e){if(null!=this.parent){for(var t=this.parent;null!=t;)if(null!=t.prev)t=t.prev;else if(null!=t.next)t=t.next;else{e(t.data);var i=t.parent;null!=i&&(t==i.prev?i.prev=null:i.next=null,t.parent=null);var n=t;n.data=null,n.lt=null,n.swapped=null,n.next=Nn.zpp_pool,Nn.zpp_pool=n,t=i}this.parent=null}},Nn.prototype.clear_node=function(e,t){t(e.data);var i=e.parent;return null!=i&&(e==i.prev?i.prev=null:i.next=null,e.parent=null),e.data=null,e.lt=null,e.swapped=null,e.next=Nn.zpp_pool,Nn.zpp_pool=e,i},Nn.prototype.__fix_neg_red=function(e){var t,i=e.parent;if(i.prev==e){var n=e.prev,r=e.next,o=r.prev,a=r.next;n.colour=0,e.colour=i.colour=1,null!=(e.next=o)&&(o.parent=e);var s=i.data;i.data=r.data,r.data=s,null!=this.swapped&&this.swapped(i.data,r.data),null!=(r.prev=a)&&(a.parent=r),r.next=i.next,null!=i.next&&(i.next.parent=r),null!=(i.next=r)&&(r.parent=i),t=n}else{var p=e.next,l=e.prev,h=l.next,u=l.prev;p.colour=0,e.colour=i.colour=1,null!=(e.prev=h)&&(h.parent=e);var d=i.data;i.data=l.data,l.data=d,null!=this.swapped&&this.swapped(i.data,l.data),null!=(l.next=u)&&(u.parent=l),l.prev=i.prev,null!=i.prev&&(i.prev.parent=l),null!=(i.prev=l)&&(l.parent=i),t=p}null!=t.prev&&0==t.prev.colour?this.__fix_dbl_red(t.prev):null!=t.next&&0==t.next.colour&&this.__fix_dbl_red(t.next)},Nn.prototype.__fix_dbl_red=function(e){for(;;){var t,i,n,r,o,a,s,p=e.parent,l=p.parent;if(null==l){p.colour=1;break}p==l.prev?(s=(n=l).next,a=e==p.prev?(i=p,r=(t=e).prev,o=e.next,p.next):(i=e,r=(t=p).prev,o=e.prev,e.next)):(r=(t=l).prev,s=e==p.prev?(n=p,o=(i=e).prev,a=e.next,p.next):(n=e,o=(i=p).prev,a=e.prev,e.next));var h=l.parent;if(null==h?this.parent=i:h.prev==l?h.prev=i:h.next=i,null!=i&&(i.parent=h),null!=(t.prev=r)&&(r.parent=t),null!=(t.next=o)&&(o.parent=t),null!=(i.prev=t)&&(t.parent=i),null!=(i.next=n)&&(n.parent=i),null!=(n.prev=a)&&(a.parent=n),null!=(n.next=s)&&(s.parent=n),i.colour=l.colour-1,t.colour=1,n.colour=1,i==this.parent)this.parent.colour=1;else if(0==i.colour&&0==i.parent.colour){e=i;continue}break}},Nn.prototype.try_insert_bool=function(e){var t=null,i=null;if(null==this.parent)null==Nn.zpp_pool?t=new Nn:(t=Nn.zpp_pool,Nn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Nn.zpp_pool?t=new Nn:(t=Nn.zpp_pool,Nn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Nn.zpp_pool?t=new Nn:(t=Nn.zpp_pool,Nn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null!=t&&(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),!0)},Nn.prototype.try_insert=function(e){var t=null,i=null;if(null==this.parent)null==Nn.zpp_pool?t=new Nn:(t=Nn.zpp_pool,Nn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Nn.zpp_pool?t=new Nn:(t=Nn.zpp_pool,Nn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Nn.zpp_pool?t=new Nn:(t=Nn.zpp_pool,Nn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null==t?i:(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t)},Nn.prototype.insert=function(e){var t;if(null==Nn.zpp_pool?t=new Nn:(t=Nn.zpp_pool,Nn.zpp_pool=t.next,t.next=null),t.data=e,null==this.parent)this.parent=t;else for(var i=this.parent;;)if(this.lt(t.data,i.data)){if(null==i.prev){(i.prev=t).parent=i;break}i=i.prev}else{if(null==i.next){(i.next=t).parent=i;break}i=i.next}return null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t},Nn.prototype.__class__=Nn;var Un=zpp_nape.util.ZPP_Set_ZPP_CbSetPair=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};Un.__name__=["zpp_nape","util","ZPP_Set_ZPP_CbSetPair"],Un.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},Un.prototype.alloc=function(){},Un.prototype.lt=null,Un.prototype.swapped=null,Un.prototype.data=null,Un.prototype.prev=null,Un.prototype.next=null,Un.prototype.parent=null,Un.prototype.colour=null,Un.prototype.verify=function(){if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){var t=e.data,i=!0;if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var r=n.data;if(i){if(t==r)i=!1;else if(!this.lt(r,t)&&this.lt(t,r))return!1}else if(!this.lt(t,r)&&this.lt(r,t))return!1;if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return!0},Un.prototype.empty=function(){return null==this.parent},Un.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},Un.prototype.size=function(){var e=0;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(++e,null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}return e},Un.prototype.has=function(e){return null!=this.find(e)},Un.prototype.find=function(e){for(var t=this.parent;null!=t&&t.data!=e;)t=this.lt(e,t.data)?t.prev:t.next;return t},Un.prototype.has_weak=function(e){return null!=this.find_weak(e)},Un.prototype.find_weak=function(e){for(var t=this.parent;null!=t;)if(this.lt(e,t.data))t=t.prev;else{if(!this.lt(t.data,e))break;t=t.next}return t},Un.prototype.lower_bound=function(e){var t=null;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var n=i.data;if(!this.lt(n,e)){t=n;break}if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}return t},Un.prototype.first=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;return e.data},Un.prototype.pop_front=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;var t=e.data;return this.remove_node(e),t},Un.prototype.remove=function(e){this.remove_node(this.find(e))},Un.prototype.successor_node=function(e){if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{var t=e;for(e=e.parent;null!=e&&e.prev!=t;)e=(t=e).parent}return e},Un.prototype.predecessor_node=function(e){if(null!=e.prev)for(e=e.prev;null!=e.next;)e=e.next;else{var t=e;for(e=e.parent;null!=e&&e.next!=t;)e=(t=e).parent}return e},Un.prototype.successor=function(e){var t=this.successor_node(this.find(e));return null==t?null:t.data},Un.prototype.predecessor=function(e){var t=this.predecessor_node(this.find(e));return null==t?null:t.data},Un.prototype.remove_node=function(e){if(null!=e.next&&null!=e.prev){for(var t=e.next;null!=t.prev;)t=t.prev;var i=e.data;e.data=t.data,t.data=i,null!=this.swapped&&this.swapped(e.data,t.data),e=t}var n=null==e.prev?e.next:e.prev;if(1==e.colour)if(null!=e.prev||null!=e.next)n.colour=1;else if(null!=e.parent)for(var r=e.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var o=r.prev;if(-1==o.colour){this.__fix_neg_red(o);break}if(0==o.colour){if(null!=o.prev&&0==o.prev.colour){this.__fix_dbl_red(o.prev);break}if(null!=o.next&&0==o.next.colour){this.__fix_dbl_red(o.next);break}}var a=r.next;if(-1==a.colour){this.__fix_neg_red(a);break}if(0==a.colour){if(null!=a.prev&&0==a.prev.colour){this.__fix_dbl_red(a.prev);break}if(null!=a.next&&0==a.next.colour){this.__fix_dbl_red(a.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var s=e.parent;null==s?this.parent=n:s.prev==e?s.prev=n:s.next=n,null!=n&&(n.parent=s),e.parent=e.prev=e.next=null;var p=e;p.data=null,p.lt=null,p.swapped=null,p.next=Un.zpp_pool,Un.zpp_pool=p},Un.prototype.clear=function(){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=Un.zpp_pool,Un.zpp_pool=i,e=t}this.parent=null}},Un.prototype.clear_with=function(e){if(null!=this.parent){for(var t=this.parent;null!=t;)if(null!=t.prev)t=t.prev;else if(null!=t.next)t=t.next;else{e(t.data);var i=t.parent;null!=i&&(t==i.prev?i.prev=null:i.next=null,t.parent=null);var n=t;n.data=null,n.lt=null,n.swapped=null,n.next=Un.zpp_pool,Un.zpp_pool=n,t=i}this.parent=null}},Un.prototype.clear_node=function(e,t){t(e.data);var i=e.parent;return null!=i&&(e==i.prev?i.prev=null:i.next=null,e.parent=null),e.data=null,e.lt=null,e.swapped=null,e.next=Un.zpp_pool,Un.zpp_pool=e,i},Un.prototype.__fix_neg_red=function(e){var t,i=e.parent;if(i.prev==e){var n=e.prev,r=e.next,o=r.prev,a=r.next;n.colour=0,e.colour=i.colour=1,null!=(e.next=o)&&(o.parent=e);var s=i.data;i.data=r.data,r.data=s,null!=this.swapped&&this.swapped(i.data,r.data),null!=(r.prev=a)&&(a.parent=r),r.next=i.next,null!=i.next&&(i.next.parent=r),null!=(i.next=r)&&(r.parent=i),t=n}else{var p=e.next,l=e.prev,h=l.next,u=l.prev;p.colour=0,e.colour=i.colour=1,null!=(e.prev=h)&&(h.parent=e);var d=i.data;i.data=l.data,l.data=d,null!=this.swapped&&this.swapped(i.data,l.data),null!=(l.next=u)&&(u.parent=l),l.prev=i.prev,null!=i.prev&&(i.prev.parent=l),null!=(i.prev=l)&&(l.parent=i),t=p}null!=t.prev&&0==t.prev.colour?this.__fix_dbl_red(t.prev):null!=t.next&&0==t.next.colour&&this.__fix_dbl_red(t.next)},Un.prototype.__fix_dbl_red=function(e){for(;;){var t,i,n,r,o,a,s,p=e.parent,l=p.parent;if(null==l){p.colour=1;break}p==l.prev?(s=(n=l).next,a=e==p.prev?(i=p,r=(t=e).prev,o=e.next,p.next):(i=e,r=(t=p).prev,o=e.prev,e.next)):(r=(t=l).prev,s=e==p.prev?(n=p,o=(i=e).prev,a=e.next,p.next):(n=e,o=(i=p).prev,a=e.prev,e.next));var h=l.parent;if(null==h?this.parent=i:h.prev==l?h.prev=i:h.next=i,null!=i&&(i.parent=h),null!=(t.prev=r)&&(r.parent=t),null!=(t.next=o)&&(o.parent=t),null!=(i.prev=t)&&(t.parent=i),null!=(i.next=n)&&(n.parent=i),null!=(n.prev=a)&&(a.parent=n),null!=(n.next=s)&&(s.parent=n),i.colour=l.colour-1,t.colour=1,n.colour=1,i==this.parent)this.parent.colour=1;else if(0==i.colour&&0==i.parent.colour){e=i;continue}break}},Un.prototype.try_insert_bool=function(e){var t=null,i=null;if(null==this.parent)null==Un.zpp_pool?t=new Un:(t=Un.zpp_pool,Un.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Un.zpp_pool?t=new Un:(t=Un.zpp_pool,Un.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Un.zpp_pool?t=new Un:(t=Un.zpp_pool,Un.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null!=t&&(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),!0)},Un.prototype.try_insert=function(e){var t=null,i=null;if(null==this.parent)null==Un.zpp_pool?t=new Un:(t=Un.zpp_pool,Un.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Un.zpp_pool?t=new Un:(t=Un.zpp_pool,Un.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Un.zpp_pool?t=new Un:(t=Un.zpp_pool,Un.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null==t?i:(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t)},Un.prototype.insert=function(e){var t;if(null==Un.zpp_pool?t=new Un:(t=Un.zpp_pool,Un.zpp_pool=t.next,t.next=null),t.data=e,null==this.parent)this.parent=t;else for(var i=this.parent;;)if(this.lt(t.data,i.data)){if(null==i.prev){(i.prev=t).parent=i;break}i=i.prev}else{if(null==i.next){(i.next=t).parent=i;break}i=i.next}return null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t},Un.prototype.__class__=Un;var Vn=zpp_nape.util.ZPP_Set_ZPP_PartitionVertex=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};Vn.__name__=["zpp_nape","util","ZPP_Set_ZPP_PartitionVertex"],Vn.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},Vn.prototype.alloc=function(){},Vn.prototype.lt=null,Vn.prototype.swapped=null,Vn.prototype.data=null,Vn.prototype.prev=null,Vn.prototype.next=null,Vn.prototype.parent=null,Vn.prototype.colour=null,Vn.prototype.verify=function(){if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){var t=e.data,i=!0;if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var r=n.data;if(i){if(t==r)i=!1;else if(!this.lt(r,t)&&this.lt(t,r))return!1}else if(!this.lt(t,r)&&this.lt(r,t))return!1;if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return!0},Vn.prototype.empty=function(){return null==this.parent},Vn.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},Vn.prototype.size=function(){var e=0;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(++e,null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}return e},Vn.prototype.has=function(e){return null!=this.find(e)},Vn.prototype.find=function(e){for(var t=this.parent;null!=t&&t.data!=e;)t=this.lt(e,t.data)?t.prev:t.next;return t},Vn.prototype.has_weak=function(e){return null!=this.find_weak(e)},Vn.prototype.find_weak=function(e){for(var t=this.parent;null!=t;)if(this.lt(e,t.data))t=t.prev;else{if(!this.lt(t.data,e))break;t=t.next}return t},Vn.prototype.lower_bound=function(e){var t=null;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var n=i.data;if(!this.lt(n,e)){t=n;break}if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}return t},Vn.prototype.first=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;return e.data},Vn.prototype.pop_front=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;var t=e.data;return this.remove_node(e),t},Vn.prototype.remove=function(e){this.remove_node(this.find(e))},Vn.prototype.successor_node=function(e){if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{var t=e;for(e=e.parent;null!=e&&e.prev!=t;)e=(t=e).parent}return e},Vn.prototype.predecessor_node=function(e){if(null!=e.prev)for(e=e.prev;null!=e.next;)e=e.next;else{var t=e;for(e=e.parent;null!=e&&e.next!=t;)e=(t=e).parent}return e},Vn.prototype.successor=function(e){var t=this.successor_node(this.find(e));return null==t?null:t.data},Vn.prototype.predecessor=function(e){var t=this.predecessor_node(this.find(e));return null==t?null:t.data},Vn.prototype.remove_node=function(e){if(null!=e.next&&null!=e.prev){for(var t=e.next;null!=t.prev;)t=t.prev;var i=e.data;e.data=t.data,t.data=i,null!=this.swapped&&this.swapped(e.data,t.data),e=t}var n=null==e.prev?e.next:e.prev;if(1==e.colour)if(null!=e.prev||null!=e.next)n.colour=1;else if(null!=e.parent)for(var r=e.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var o=r.prev;if(-1==o.colour){this.__fix_neg_red(o);break}if(0==o.colour){if(null!=o.prev&&0==o.prev.colour){this.__fix_dbl_red(o.prev);break}if(null!=o.next&&0==o.next.colour){this.__fix_dbl_red(o.next);break}}var a=r.next;if(-1==a.colour){this.__fix_neg_red(a);break}if(0==a.colour){if(null!=a.prev&&0==a.prev.colour){this.__fix_dbl_red(a.prev);break}if(null!=a.next&&0==a.next.colour){this.__fix_dbl_red(a.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var s=e.parent;null==s?this.parent=n:s.prev==e?s.prev=n:s.next=n,null!=n&&(n.parent=s),e.parent=e.prev=e.next=null;var p=e;p.data=null,p.lt=null,p.swapped=null,p.next=Vn.zpp_pool,Vn.zpp_pool=p},Vn.prototype.clear=function(){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=Vn.zpp_pool,Vn.zpp_pool=i,e=t}this.parent=null}},Vn.prototype.clear_with=function(e){if(null!=this.parent){for(var t=this.parent;null!=t;)if(null!=t.prev)t=t.prev;else if(null!=t.next)t=t.next;else{e(t.data);var i=t.parent;null!=i&&(t==i.prev?i.prev=null:i.next=null,t.parent=null);var n=t;n.data=null,n.lt=null,n.swapped=null,n.next=Vn.zpp_pool,Vn.zpp_pool=n,t=i}this.parent=null}},Vn.prototype.clear_node=function(e,t){t(e.data);var i=e.parent;return null!=i&&(e==i.prev?i.prev=null:i.next=null,e.parent=null),e.data=null,e.lt=null,e.swapped=null,e.next=Vn.zpp_pool,Vn.zpp_pool=e,i},Vn.prototype.__fix_neg_red=function(e){var t,i=e.parent;if(i.prev==e){var n=e.prev,r=e.next,o=r.prev,a=r.next;n.colour=0,e.colour=i.colour=1,null!=(e.next=o)&&(o.parent=e);var s=i.data;i.data=r.data,r.data=s,null!=this.swapped&&this.swapped(i.data,r.data),null!=(r.prev=a)&&(a.parent=r),r.next=i.next,null!=i.next&&(i.next.parent=r),null!=(i.next=r)&&(r.parent=i),t=n}else{var p=e.next,l=e.prev,h=l.next,u=l.prev;p.colour=0,e.colour=i.colour=1,null!=(e.prev=h)&&(h.parent=e);var d=i.data;i.data=l.data,l.data=d,null!=this.swapped&&this.swapped(i.data,l.data),null!=(l.next=u)&&(u.parent=l),l.prev=i.prev,null!=i.prev&&(i.prev.parent=l),null!=(i.prev=l)&&(l.parent=i),t=p}null!=t.prev&&0==t.prev.colour?this.__fix_dbl_red(t.prev):null!=t.next&&0==t.next.colour&&this.__fix_dbl_red(t.next)},Vn.prototype.__fix_dbl_red=function(e){for(;;){var t,i,n,r,o,a,s,p=e.parent,l=p.parent;if(null==l){p.colour=1;break}p==l.prev?(s=(n=l).next,a=e==p.prev?(i=p,r=(t=e).prev,o=e.next,p.next):(i=e,r=(t=p).prev,o=e.prev,e.next)):(r=(t=l).prev,s=e==p.prev?(n=p,o=(i=e).prev,a=e.next,p.next):(n=e,o=(i=p).prev,a=e.prev,e.next));var h=l.parent;if(null==h?this.parent=i:h.prev==l?h.prev=i:h.next=i,null!=i&&(i.parent=h),null!=(t.prev=r)&&(r.parent=t),null!=(t.next=o)&&(o.parent=t),null!=(i.prev=t)&&(t.parent=i),null!=(i.next=n)&&(n.parent=i),null!=(n.prev=a)&&(a.parent=n),null!=(n.next=s)&&(s.parent=n),i.colour=l.colour-1,t.colour=1,n.colour=1,i==this.parent)this.parent.colour=1;else if(0==i.colour&&0==i.parent.colour){e=i;continue}break}},Vn.prototype.try_insert_bool=function(e){var t=null,i=null;if(null==this.parent)null==Vn.zpp_pool?t=new Vn:(t=Vn.zpp_pool,Vn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Vn.zpp_pool?t=new Vn:(t=Vn.zpp_pool,Vn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Vn.zpp_pool?t=new Vn:(t=Vn.zpp_pool,Vn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null!=t&&(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),!0)},Vn.prototype.try_insert=function(e){var t=null,i=null;if(null==this.parent)null==Vn.zpp_pool?t=new Vn:(t=Vn.zpp_pool,Vn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Vn.zpp_pool?t=new Vn:(t=Vn.zpp_pool,Vn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Vn.zpp_pool?t=new Vn:(t=Vn.zpp_pool,Vn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null==t?i:(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t)},Vn.prototype.insert=function(e){var t;if(null==Vn.zpp_pool?t=new Vn:(t=Vn.zpp_pool,Vn.zpp_pool=t.next,t.next=null),t.data=e,null==this.parent)this.parent=t;else for(var i=this.parent;;)if(this.lt(t.data,i.data)){if(null==i.prev){(i.prev=t).parent=i;break}i=i.prev}else{if(null==i.next){(i.next=t).parent=i;break}i=i.next}return null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t},Vn.prototype.__class__=Vn;var Hn=zpp_nape.util.ZPP_Set_ZPP_PartitionPair=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};Hn.__name__=["zpp_nape","util","ZPP_Set_ZPP_PartitionPair"],Hn.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},Hn.prototype.alloc=function(){},Hn.prototype.lt=null,Hn.prototype.swapped=null,Hn.prototype.data=null,Hn.prototype.prev=null,Hn.prototype.next=null,Hn.prototype.parent=null,Hn.prototype.colour=null,Hn.prototype.verify=function(){if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){var t=e.data,i=!0;if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var r=n.data;if(i){if(t==r)i=!1;else if(!this.lt(r,t)&&this.lt(t,r))return!1}else if(!this.lt(t,r)&&this.lt(r,t))return!1;if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return!0},Hn.prototype.empty=function(){return null==this.parent},Hn.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},Hn.prototype.size=function(){var e=0;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(++e,null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}return e},Hn.prototype.has=function(e){return null!=this.find(e)},Hn.prototype.find=function(e){for(var t=this.parent;null!=t&&t.data!=e;)t=this.lt(e,t.data)?t.prev:t.next;return t},Hn.prototype.has_weak=function(e){return null!=this.find_weak(e)},Hn.prototype.find_weak=function(e){for(var t=this.parent;null!=t;)if(this.lt(e,t.data))t=t.prev;else{if(!this.lt(t.data,e))break;t=t.next}return t},Hn.prototype.lower_bound=function(e){var t=null;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var n=i.data;if(!this.lt(n,e)){t=n;break}if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}return t},Hn.prototype.first=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;return e.data},Hn.prototype.pop_front=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;var t=e.data;return this.remove_node(e),t},Hn.prototype.remove=function(e){this.remove_node(this.find(e))},Hn.prototype.successor_node=function(e){if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{var t=e;for(e=e.parent;null!=e&&e.prev!=t;)e=(t=e).parent}return e},Hn.prototype.predecessor_node=function(e){if(null!=e.prev)for(e=e.prev;null!=e.next;)e=e.next;else{var t=e;for(e=e.parent;null!=e&&e.next!=t;)e=(t=e).parent}return e},Hn.prototype.successor=function(e){var t=this.successor_node(this.find(e));return null==t?null:t.data},Hn.prototype.predecessor=function(e){var t=this.predecessor_node(this.find(e));return null==t?null:t.data},Hn.prototype.remove_node=function(e){if(null!=e.next&&null!=e.prev){for(var t=e.next;null!=t.prev;)t=t.prev;var i=e.data;e.data=t.data,t.data=i,null!=this.swapped&&this.swapped(e.data,t.data),e=t}var n=null==e.prev?e.next:e.prev;if(1==e.colour)if(null!=e.prev||null!=e.next)n.colour=1;else if(null!=e.parent)for(var r=e.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var o=r.prev;if(-1==o.colour){this.__fix_neg_red(o);break}if(0==o.colour){if(null!=o.prev&&0==o.prev.colour){this.__fix_dbl_red(o.prev);break}if(null!=o.next&&0==o.next.colour){this.__fix_dbl_red(o.next);break}}var a=r.next;if(-1==a.colour){this.__fix_neg_red(a);break}if(0==a.colour){if(null!=a.prev&&0==a.prev.colour){this.__fix_dbl_red(a.prev);break}if(null!=a.next&&0==a.next.colour){this.__fix_dbl_red(a.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var s=e.parent;null==s?this.parent=n:s.prev==e?s.prev=n:s.next=n,null!=n&&(n.parent=s),e.parent=e.prev=e.next=null;var p=e;p.data=null,p.lt=null,p.swapped=null,p.next=Hn.zpp_pool,Hn.zpp_pool=p},Hn.prototype.clear=function(){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=Hn.zpp_pool,Hn.zpp_pool=i,e=t}this.parent=null}},Hn.prototype.clear_with=function(e){if(null!=this.parent){for(var t=this.parent;null!=t;)if(null!=t.prev)t=t.prev;else if(null!=t.next)t=t.next;else{e(t.data);var i=t.parent;null!=i&&(t==i.prev?i.prev=null:i.next=null,t.parent=null);var n=t;n.data=null,n.lt=null,n.swapped=null,n.next=Hn.zpp_pool,Hn.zpp_pool=n,t=i}this.parent=null}},Hn.prototype.clear_node=function(e,t){t(e.data);var i=e.parent;return null!=i&&(e==i.prev?i.prev=null:i.next=null,e.parent=null),e.data=null,e.lt=null,e.swapped=null,e.next=Hn.zpp_pool,Hn.zpp_pool=e,i},Hn.prototype.__fix_neg_red=function(e){var t,i=e.parent;if(i.prev==e){var n=e.prev,r=e.next,o=r.prev,a=r.next;n.colour=0,e.colour=i.colour=1,null!=(e.next=o)&&(o.parent=e);var s=i.data;i.data=r.data,r.data=s,null!=this.swapped&&this.swapped(i.data,r.data),null!=(r.prev=a)&&(a.parent=r),r.next=i.next,null!=i.next&&(i.next.parent=r),null!=(i.next=r)&&(r.parent=i),t=n}else{var p=e.next,l=e.prev,h=l.next,u=l.prev;p.colour=0,e.colour=i.colour=1,null!=(e.prev=h)&&(h.parent=e);var d=i.data;i.data=l.data,l.data=d,null!=this.swapped&&this.swapped(i.data,l.data),null!=(l.next=u)&&(u.parent=l),l.prev=i.prev,null!=i.prev&&(i.prev.parent=l),null!=(i.prev=l)&&(l.parent=i),t=p}null!=t.prev&&0==t.prev.colour?this.__fix_dbl_red(t.prev):null!=t.next&&0==t.next.colour&&this.__fix_dbl_red(t.next)},Hn.prototype.__fix_dbl_red=function(e){for(;;){var t,i,n,r,o,a,s,p=e.parent,l=p.parent;if(null==l){p.colour=1;break}p==l.prev?(s=(n=l).next,a=e==p.prev?(i=p,r=(t=e).prev,o=e.next,p.next):(i=e,r=(t=p).prev,o=e.prev,e.next)):(r=(t=l).prev,s=e==p.prev?(n=p,o=(i=e).prev,a=e.next,p.next):(n=e,o=(i=p).prev,a=e.prev,e.next));var h=l.parent;if(null==h?this.parent=i:h.prev==l?h.prev=i:h.next=i,null!=i&&(i.parent=h),null!=(t.prev=r)&&(r.parent=t),null!=(t.next=o)&&(o.parent=t),null!=(i.prev=t)&&(t.parent=i),null!=(i.next=n)&&(n.parent=i),null!=(n.prev=a)&&(a.parent=n),null!=(n.next=s)&&(s.parent=n),i.colour=l.colour-1,t.colour=1,n.colour=1,i==this.parent)this.parent.colour=1;else if(0==i.colour&&0==i.parent.colour){e=i;continue}break}},Hn.prototype.try_insert_bool=function(e){var t=null,i=null;if(null==this.parent)null==Hn.zpp_pool?t=new Hn:(t=Hn.zpp_pool,Hn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Hn.zpp_pool?t=new Hn:(t=Hn.zpp_pool,Hn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Hn.zpp_pool?t=new Hn:(t=Hn.zpp_pool,Hn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null!=t&&(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),!0)},Hn.prototype.try_insert=function(e){var t=null,i=null;if(null==this.parent)null==Hn.zpp_pool?t=new Hn:(t=Hn.zpp_pool,Hn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Hn.zpp_pool?t=new Hn:(t=Hn.zpp_pool,Hn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Hn.zpp_pool?t=new Hn:(t=Hn.zpp_pool,Hn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null==t?i:(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t)},Hn.prototype.insert=function(e){var t;if(null==Hn.zpp_pool?t=new Hn:(t=Hn.zpp_pool,Hn.zpp_pool=t.next,t.next=null),t.data=e,null==this.parent)this.parent=t;else for(var i=this.parent;;)if(this.lt(t.data,i.data)){if(null==i.prev){(i.prev=t).parent=i;break}i=i.prev}else{if(null==i.next){(i.next=t).parent=i;break}i=i.next}return null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t},Hn.prototype.__class__=Hn;var Wn=zpp_nape.util.ZPP_Set_ZPP_SimpleVert=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};Wn.__name__=["zpp_nape","util","ZPP_Set_ZPP_SimpleVert"],Wn.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},Wn.prototype.alloc=function(){},Wn.prototype.lt=null,Wn.prototype.swapped=null,Wn.prototype.data=null,Wn.prototype.prev=null,Wn.prototype.next=null,Wn.prototype.parent=null,Wn.prototype.colour=null,Wn.prototype.verify=function(){if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){var t=e.data,i=!0;if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var r=n.data;if(i){if(t==r)i=!1;else if(!this.lt(r,t)&&this.lt(t,r))return!1}else if(!this.lt(t,r)&&this.lt(r,t))return!1;if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return!0},Wn.prototype.empty=function(){return null==this.parent},Wn.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},Wn.prototype.size=function(){var e=0;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(++e,null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}return e},Wn.prototype.has=function(e){return null!=this.find(e)},Wn.prototype.find=function(e){for(var t=this.parent;null!=t&&t.data!=e;)t=this.lt(e,t.data)?t.prev:t.next;return t},Wn.prototype.has_weak=function(e){return null!=this.find_weak(e)},Wn.prototype.find_weak=function(e){for(var t=this.parent;null!=t;)if(this.lt(e,t.data))t=t.prev;else{if(!this.lt(t.data,e))break;t=t.next}return t},Wn.prototype.lower_bound=function(e){var t=null;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var n=i.data;if(!this.lt(n,e)){t=n;break}if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}return t},Wn.prototype.first=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;return e.data},Wn.prototype.pop_front=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;var t=e.data;return this.remove_node(e),t},Wn.prototype.remove=function(e){this.remove_node(this.find(e))},Wn.prototype.successor_node=function(e){if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{var t=e;for(e=e.parent;null!=e&&e.prev!=t;)e=(t=e).parent}return e},Wn.prototype.predecessor_node=function(e){if(null!=e.prev)for(e=e.prev;null!=e.next;)e=e.next;else{var t=e;for(e=e.parent;null!=e&&e.next!=t;)e=(t=e).parent}return e},Wn.prototype.successor=function(e){var t=this.successor_node(this.find(e));return null==t?null:t.data},Wn.prototype.predecessor=function(e){var t=this.predecessor_node(this.find(e));return null==t?null:t.data},Wn.prototype.remove_node=function(e){if(null!=e.next&&null!=e.prev){for(var t=e.next;null!=t.prev;)t=t.prev;var i=e.data;e.data=t.data,t.data=i,null!=this.swapped&&this.swapped(e.data,t.data),e=t}var n=null==e.prev?e.next:e.prev;if(1==e.colour)if(null!=e.prev||null!=e.next)n.colour=1;else if(null!=e.parent)for(var r=e.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var o=r.prev;if(-1==o.colour){this.__fix_neg_red(o);break}if(0==o.colour){if(null!=o.prev&&0==o.prev.colour){this.__fix_dbl_red(o.prev);break}if(null!=o.next&&0==o.next.colour){this.__fix_dbl_red(o.next);break}}var a=r.next;if(-1==a.colour){this.__fix_neg_red(a);break}if(0==a.colour){if(null!=a.prev&&0==a.prev.colour){this.__fix_dbl_red(a.prev);break}if(null!=a.next&&0==a.next.colour){this.__fix_dbl_red(a.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var s=e.parent;null==s?this.parent=n:s.prev==e?s.prev=n:s.next=n,null!=n&&(n.parent=s),e.parent=e.prev=e.next=null;var p=e;p.data=null,p.lt=null,p.swapped=null,p.next=Wn.zpp_pool,Wn.zpp_pool=p},Wn.prototype.clear=function(){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=Wn.zpp_pool,Wn.zpp_pool=i,e=t}this.parent=null}},Wn.prototype.clear_with=function(e){if(null!=this.parent){for(var t=this.parent;null!=t;)if(null!=t.prev)t=t.prev;else if(null!=t.next)t=t.next;else{e(t.data);var i=t.parent;null!=i&&(t==i.prev?i.prev=null:i.next=null,t.parent=null);var n=t;n.data=null,n.lt=null,n.swapped=null,n.next=Wn.zpp_pool,Wn.zpp_pool=n,t=i}this.parent=null}},Wn.prototype.clear_node=function(e,t){t(e.data);var i=e.parent;return null!=i&&(e==i.prev?i.prev=null:i.next=null,e.parent=null),e.data=null,e.lt=null,e.swapped=null,e.next=Wn.zpp_pool,Wn.zpp_pool=e,i},Wn.prototype.__fix_neg_red=function(e){var t,i=e.parent;if(i.prev==e){var n=e.prev,r=e.next,o=r.prev,a=r.next;n.colour=0,e.colour=i.colour=1,null!=(e.next=o)&&(o.parent=e);var s=i.data;i.data=r.data,r.data=s,null!=this.swapped&&this.swapped(i.data,r.data),null!=(r.prev=a)&&(a.parent=r),r.next=i.next,null!=i.next&&(i.next.parent=r),null!=(i.next=r)&&(r.parent=i),t=n}else{var p=e.next,l=e.prev,h=l.next,u=l.prev;p.colour=0,e.colour=i.colour=1,null!=(e.prev=h)&&(h.parent=e);var d=i.data;i.data=l.data,l.data=d,null!=this.swapped&&this.swapped(i.data,l.data),null!=(l.next=u)&&(u.parent=l),l.prev=i.prev,null!=i.prev&&(i.prev.parent=l),null!=(i.prev=l)&&(l.parent=i),t=p}null!=t.prev&&0==t.prev.colour?this.__fix_dbl_red(t.prev):null!=t.next&&0==t.next.colour&&this.__fix_dbl_red(t.next)},Wn.prototype.__fix_dbl_red=function(e){for(;;){var t,i,n,r,o,a,s,p=e.parent,l=p.parent;if(null==l){p.colour=1;break}p==l.prev?(s=(n=l).next,a=e==p.prev?(i=p,r=(t=e).prev,o=e.next,p.next):(i=e,r=(t=p).prev,o=e.prev,e.next)):(r=(t=l).prev,s=e==p.prev?(n=p,o=(i=e).prev,a=e.next,p.next):(n=e,o=(i=p).prev,a=e.prev,e.next));var h=l.parent;if(null==h?this.parent=i:h.prev==l?h.prev=i:h.next=i,null!=i&&(i.parent=h),null!=(t.prev=r)&&(r.parent=t),null!=(t.next=o)&&(o.parent=t),null!=(i.prev=t)&&(t.parent=i),null!=(i.next=n)&&(n.parent=i),null!=(n.prev=a)&&(a.parent=n),null!=(n.next=s)&&(s.parent=n),i.colour=l.colour-1,t.colour=1,n.colour=1,i==this.parent)this.parent.colour=1;else if(0==i.colour&&0==i.parent.colour){e=i;continue}break}},Wn.prototype.try_insert_bool=function(e){var t=null,i=null;if(null==this.parent)null==Wn.zpp_pool?t=new Wn:(t=Wn.zpp_pool,Wn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Wn.zpp_pool?t=new Wn:(t=Wn.zpp_pool,Wn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Wn.zpp_pool?t=new Wn:(t=Wn.zpp_pool,Wn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null!=t&&(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),!0)},Wn.prototype.try_insert=function(e){var t=null,i=null;if(null==this.parent)null==Wn.zpp_pool?t=new Wn:(t=Wn.zpp_pool,Wn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Wn.zpp_pool?t=new Wn:(t=Wn.zpp_pool,Wn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Wn.zpp_pool?t=new Wn:(t=Wn.zpp_pool,Wn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null==t?i:(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t)},Wn.prototype.insert=function(e){var t;if(null==Wn.zpp_pool?t=new Wn:(t=Wn.zpp_pool,Wn.zpp_pool=t.next,t.next=null),t.data=e,null==this.parent)this.parent=t;else for(var i=this.parent;;)if(this.lt(t.data,i.data)){if(null==i.prev){(i.prev=t).parent=i;break}i=i.prev}else{if(null==i.next){(i.next=t).parent=i;break}i=i.next}return null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t},Wn.prototype.__class__=Wn;var qn=zpp_nape.util.ZPP_Set_ZPP_SimpleSeg=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};qn.__name__=["zpp_nape","util","ZPP_Set_ZPP_SimpleSeg"],qn.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},qn.prototype.alloc=function(){},qn.prototype.lt=null,qn.prototype.swapped=null,qn.prototype.data=null,qn.prototype.prev=null,qn.prototype.next=null,qn.prototype.parent=null,qn.prototype.colour=null,qn.prototype.verify=function(){if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){var t=e.data,i=!0;if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var r=n.data;if(i){if(t==r)i=!1;else if(!this.lt(r,t)&&this.lt(t,r))return!1}else if(!this.lt(t,r)&&this.lt(r,t))return!1;if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return!0},qn.prototype.empty=function(){return null==this.parent},qn.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},qn.prototype.size=function(){var e=0;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(++e,null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}return e},qn.prototype.has=function(e){return null!=this.find(e)},qn.prototype.find=function(e){for(var t=this.parent;null!=t&&t.data!=e;)t=this.lt(e,t.data)?t.prev:t.next;return t},qn.prototype.has_weak=function(e){return null!=this.find_weak(e)},qn.prototype.find_weak=function(e){for(var t=this.parent;null!=t;)if(this.lt(e,t.data))t=t.prev;else{if(!this.lt(t.data,e))break;t=t.next}return t},qn.prototype.lower_bound=function(e){var t=null;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var n=i.data;if(!this.lt(n,e)){t=n;break}if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}return t},qn.prototype.first=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;return e.data},qn.prototype.pop_front=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;var t=e.data;return this.remove_node(e),t},qn.prototype.remove=function(e){this.remove_node(this.find(e))},qn.prototype.successor_node=function(e){if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{var t=e;for(e=e.parent;null!=e&&e.prev!=t;)e=(t=e).parent}return e},qn.prototype.predecessor_node=function(e){if(null!=e.prev)for(e=e.prev;null!=e.next;)e=e.next;else{var t=e;for(e=e.parent;null!=e&&e.next!=t;)e=(t=e).parent}return e},qn.prototype.successor=function(e){var t=this.successor_node(this.find(e));return null==t?null:t.data},qn.prototype.predecessor=function(e){var t=this.predecessor_node(this.find(e));return null==t?null:t.data},qn.prototype.remove_node=function(e){if(null!=e.next&&null!=e.prev){for(var t=e.next;null!=t.prev;)t=t.prev;var i=e.data;e.data=t.data,t.data=i,null!=this.swapped&&this.swapped(e.data,t.data),e=t}var n=null==e.prev?e.next:e.prev;if(1==e.colour)if(null!=e.prev||null!=e.next)n.colour=1;else if(null!=e.parent)for(var r=e.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var o=r.prev;if(-1==o.colour){this.__fix_neg_red(o);break}if(0==o.colour){if(null!=o.prev&&0==o.prev.colour){this.__fix_dbl_red(o.prev);break}if(null!=o.next&&0==o.next.colour){this.__fix_dbl_red(o.next);break}}var a=r.next;if(-1==a.colour){this.__fix_neg_red(a);break}if(0==a.colour){if(null!=a.prev&&0==a.prev.colour){this.__fix_dbl_red(a.prev);break}if(null!=a.next&&0==a.next.colour){this.__fix_dbl_red(a.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var s=e.parent;null==s?this.parent=n:s.prev==e?s.prev=n:s.next=n,null!=n&&(n.parent=s),e.parent=e.prev=e.next=null;var p=e;p.data=null,p.lt=null,p.swapped=null,p.next=qn.zpp_pool,qn.zpp_pool=p},qn.prototype.clear=function(){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=qn.zpp_pool,qn.zpp_pool=i,e=t}this.parent=null}},qn.prototype.clear_with=function(e){if(null!=this.parent){for(var t=this.parent;null!=t;)if(null!=t.prev)t=t.prev;else if(null!=t.next)t=t.next;else{e(t.data);var i=t.parent;null!=i&&(t==i.prev?i.prev=null:i.next=null,t.parent=null);var n=t;n.data=null,n.lt=null,n.swapped=null,n.next=qn.zpp_pool,qn.zpp_pool=n,t=i}this.parent=null}},qn.prototype.clear_node=function(e,t){t(e.data);var i=e.parent;return null!=i&&(e==i.prev?i.prev=null:i.next=null,e.parent=null),e.data=null,e.lt=null,e.swapped=null,e.next=qn.zpp_pool,qn.zpp_pool=e,i},qn.prototype.__fix_neg_red=function(e){var t,i=e.parent;if(i.prev==e){var n=e.prev,r=e.next,o=r.prev,a=r.next;n.colour=0,e.colour=i.colour=1,null!=(e.next=o)&&(o.parent=e);var s=i.data;i.data=r.data,r.data=s,null!=this.swapped&&this.swapped(i.data,r.data),null!=(r.prev=a)&&(a.parent=r),r.next=i.next,null!=i.next&&(i.next.parent=r),null!=(i.next=r)&&(r.parent=i),t=n}else{var p=e.next,l=e.prev,h=l.next,u=l.prev;p.colour=0,e.colour=i.colour=1,null!=(e.prev=h)&&(h.parent=e);var d=i.data;i.data=l.data,l.data=d,null!=this.swapped&&this.swapped(i.data,l.data),null!=(l.next=u)&&(u.parent=l),l.prev=i.prev,null!=i.prev&&(i.prev.parent=l),null!=(i.prev=l)&&(l.parent=i),t=p}null!=t.prev&&0==t.prev.colour?this.__fix_dbl_red(t.prev):null!=t.next&&0==t.next.colour&&this.__fix_dbl_red(t.next)},qn.prototype.__fix_dbl_red=function(e){for(;;){var t,i,n,r,o,a,s,p=e.parent,l=p.parent;if(null==l){p.colour=1;break}p==l.prev?(s=(n=l).next,a=e==p.prev?(i=p,r=(t=e).prev,o=e.next,p.next):(i=e,r=(t=p).prev,o=e.prev,e.next)):(r=(t=l).prev,s=e==p.prev?(n=p,o=(i=e).prev,a=e.next,p.next):(n=e,o=(i=p).prev,a=e.prev,e.next));var h=l.parent;if(null==h?this.parent=i:h.prev==l?h.prev=i:h.next=i,null!=i&&(i.parent=h),null!=(t.prev=r)&&(r.parent=t),null!=(t.next=o)&&(o.parent=t),null!=(i.prev=t)&&(t.parent=i),null!=(i.next=n)&&(n.parent=i),null!=(n.prev=a)&&(a.parent=n),null!=(n.next=s)&&(s.parent=n),i.colour=l.colour-1,t.colour=1,n.colour=1,i==this.parent)this.parent.colour=1;else if(0==i.colour&&0==i.parent.colour){e=i;continue}break}},qn.prototype.try_insert_bool=function(e){var t=null,i=null;if(null==this.parent)null==qn.zpp_pool?t=new qn:(t=qn.zpp_pool,qn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==qn.zpp_pool?t=new qn:(t=qn.zpp_pool,qn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==qn.zpp_pool?t=new qn:(t=qn.zpp_pool,qn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null!=t&&(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),!0)},qn.prototype.try_insert=function(e){var t=null,i=null;if(null==this.parent)null==qn.zpp_pool?t=new qn:(t=qn.zpp_pool,qn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==qn.zpp_pool?t=new qn:(t=qn.zpp_pool,qn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==qn.zpp_pool?t=new qn:(t=qn.zpp_pool,qn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null==t?i:(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t)},qn.prototype.insert=function(e){var t;if(null==qn.zpp_pool?t=new qn:(t=qn.zpp_pool,qn.zpp_pool=t.next,t.next=null),t.data=e,null==this.parent)this.parent=t;else for(var i=this.parent;;)if(this.lt(t.data,i.data)){if(null==i.prev){(i.prev=t).parent=i;break}i=i.prev}else{if(null==i.next){(i.next=t).parent=i;break}i=i.next}return null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t},qn.prototype.__class__=qn;var Xn=zpp_nape.util.ZPP_Set_ZPP_SimpleEvent=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};Xn.__name__=["zpp_nape","util","ZPP_Set_ZPP_SimpleEvent"],Xn.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},Xn.prototype.alloc=function(){},Xn.prototype.lt=null,Xn.prototype.swapped=null,Xn.prototype.data=null,Xn.prototype.prev=null,Xn.prototype.next=null,Xn.prototype.parent=null,Xn.prototype.colour=null,Xn.prototype.verify=function(){if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){var t=e.data,i=!0;if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var r=n.data;if(i){if(t==r)i=!1;else if(!this.lt(r,t)&&this.lt(t,r))return!1}else if(!this.lt(t,r)&&this.lt(r,t))return!1;if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return!0},Xn.prototype.empty=function(){return null==this.parent},Xn.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},Xn.prototype.size=function(){var e=0;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(++e,null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}return e},Xn.prototype.has=function(e){return null!=this.find(e)},Xn.prototype.find=function(e){for(var t=this.parent;null!=t&&t.data!=e;)t=this.lt(e,t.data)?t.prev:t.next;return t},Xn.prototype.has_weak=function(e){return null!=this.find_weak(e)},Xn.prototype.find_weak=function(e){for(var t=this.parent;null!=t;)if(this.lt(e,t.data))t=t.prev;else{if(!this.lt(t.data,e))break;t=t.next}return t},Xn.prototype.lower_bound=function(e){var t=null;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var n=i.data;if(!this.lt(n,e)){t=n;break}if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}return t},Xn.prototype.first=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;return e.data},Xn.prototype.pop_front=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;var t=e.data;return this.remove_node(e),t},Xn.prototype.remove=function(e){this.remove_node(this.find(e))},Xn.prototype.successor_node=function(e){if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{var t=e;for(e=e.parent;null!=e&&e.prev!=t;)e=(t=e).parent}return e},Xn.prototype.predecessor_node=function(e){if(null!=e.prev)for(e=e.prev;null!=e.next;)e=e.next;else{var t=e;for(e=e.parent;null!=e&&e.next!=t;)e=(t=e).parent}return e},Xn.prototype.successor=function(e){var t=this.successor_node(this.find(e));return null==t?null:t.data},Xn.prototype.predecessor=function(e){var t=this.predecessor_node(this.find(e));return null==t?null:t.data},Xn.prototype.remove_node=function(e){if(null!=e.next&&null!=e.prev){for(var t=e.next;null!=t.prev;)t=t.prev;var i=e.data;e.data=t.data,t.data=i,null!=this.swapped&&this.swapped(e.data,t.data),e=t}var n=null==e.prev?e.next:e.prev;if(1==e.colour)if(null!=e.prev||null!=e.next)n.colour=1;else if(null!=e.parent)for(var r=e.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var o=r.prev;if(-1==o.colour){this.__fix_neg_red(o);break}if(0==o.colour){if(null!=o.prev&&0==o.prev.colour){this.__fix_dbl_red(o.prev);break}if(null!=o.next&&0==o.next.colour){this.__fix_dbl_red(o.next);break}}var a=r.next;if(-1==a.colour){this.__fix_neg_red(a);break}if(0==a.colour){if(null!=a.prev&&0==a.prev.colour){this.__fix_dbl_red(a.prev);break}if(null!=a.next&&0==a.next.colour){this.__fix_dbl_red(a.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var s=e.parent;null==s?this.parent=n:s.prev==e?s.prev=n:s.next=n,null!=n&&(n.parent=s),e.parent=e.prev=e.next=null;var p=e;p.data=null,p.lt=null,p.swapped=null,p.next=Xn.zpp_pool,Xn.zpp_pool=p},Xn.prototype.clear=function(){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=Xn.zpp_pool,Xn.zpp_pool=i,e=t}this.parent=null}},Xn.prototype.clear_with=function(e){if(null!=this.parent){for(var t=this.parent;null!=t;)if(null!=t.prev)t=t.prev;else if(null!=t.next)t=t.next;else{e(t.data);var i=t.parent;null!=i&&(t==i.prev?i.prev=null:i.next=null,t.parent=null);var n=t;n.data=null,n.lt=null,n.swapped=null,n.next=Xn.zpp_pool,Xn.zpp_pool=n,t=i}this.parent=null}},Xn.prototype.clear_node=function(e,t){t(e.data);var i=e.parent;return null!=i&&(e==i.prev?i.prev=null:i.next=null,e.parent=null),e.data=null,e.lt=null,e.swapped=null,e.next=Xn.zpp_pool,Xn.zpp_pool=e,i},Xn.prototype.__fix_neg_red=function(e){var t,i=e.parent;if(i.prev==e){var n=e.prev,r=e.next,o=r.prev,a=r.next;n.colour=0,e.colour=i.colour=1,null!=(e.next=o)&&(o.parent=e);var s=i.data;i.data=r.data,r.data=s,null!=this.swapped&&this.swapped(i.data,r.data),null!=(r.prev=a)&&(a.parent=r),r.next=i.next,null!=i.next&&(i.next.parent=r),null!=(i.next=r)&&(r.parent=i),t=n}else{var p=e.next,l=e.prev,h=l.next,u=l.prev;p.colour=0,e.colour=i.colour=1,null!=(e.prev=h)&&(h.parent=e);var d=i.data;i.data=l.data,l.data=d,null!=this.swapped&&this.swapped(i.data,l.data),null!=(l.next=u)&&(u.parent=l),l.prev=i.prev,null!=i.prev&&(i.prev.parent=l),null!=(i.prev=l)&&(l.parent=i),t=p}null!=t.prev&&0==t.prev.colour?this.__fix_dbl_red(t.prev):null!=t.next&&0==t.next.colour&&this.__fix_dbl_red(t.next)},Xn.prototype.__fix_dbl_red=function(e){for(;;){var t,i,n,r,o,a,s,p=e.parent,l=p.parent;if(null==l){p.colour=1;break}p==l.prev?(s=(n=l).next,a=e==p.prev?(i=p,r=(t=e).prev,o=e.next,p.next):(i=e,r=(t=p).prev,o=e.prev,e.next)):(r=(t=l).prev,s=e==p.prev?(n=p,o=(i=e).prev,a=e.next,p.next):(n=e,o=(i=p).prev,a=e.prev,e.next));var h=l.parent;if(null==h?this.parent=i:h.prev==l?h.prev=i:h.next=i,null!=i&&(i.parent=h),null!=(t.prev=r)&&(r.parent=t),null!=(t.next=o)&&(o.parent=t),null!=(i.prev=t)&&(t.parent=i),null!=(i.next=n)&&(n.parent=i),null!=(n.prev=a)&&(a.parent=n),null!=(n.next=s)&&(s.parent=n),i.colour=l.colour-1,t.colour=1,n.colour=1,i==this.parent)this.parent.colour=1;else if(0==i.colour&&0==i.parent.colour){e=i;continue}break}},Xn.prototype.try_insert_bool=function(e){var t=null,i=null;if(null==this.parent)null==Xn.zpp_pool?t=new Xn:(t=Xn.zpp_pool,Xn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Xn.zpp_pool?t=new Xn:(t=Xn.zpp_pool,Xn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Xn.zpp_pool?t=new Xn:(t=Xn.zpp_pool,Xn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null!=t&&(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),!0)},Xn.prototype.try_insert=function(e){var t=null,i=null;if(null==this.parent)null==Xn.zpp_pool?t=new Xn:(t=Xn.zpp_pool,Xn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Xn.zpp_pool?t=new Xn:(t=Xn.zpp_pool,Xn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Xn.zpp_pool?t=new Xn:(t=Xn.zpp_pool,Xn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null==t?i:(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t)},Xn.prototype.insert=function(e){var t;if(null==Xn.zpp_pool?t=new Xn:(t=Xn.zpp_pool,Xn.zpp_pool=t.next,t.next=null),t.data=e,null==this.parent)this.parent=t;else for(var i=this.parent;;)if(this.lt(t.data,i.data)){if(null==i.prev){(i.prev=t).parent=i;break}i=i.prev}else{if(null==i.next){(i.next=t).parent=i;break}i=i.next}return null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t},Xn.prototype.__class__=Xn;var Yn=zpp_nape.util.ZPP_Set_ZPP_CbSet=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};Yn.__name__=["zpp_nape","util","ZPP_Set_ZPP_CbSet"],Yn.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},Yn.prototype.alloc=function(){},Yn.prototype.lt=null,Yn.prototype.swapped=null,Yn.prototype.data=null,Yn.prototype.prev=null,Yn.prototype.next=null,Yn.prototype.parent=null,Yn.prototype.colour=null,Yn.prototype.verify=function(){if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){var t=e.data,i=!0;if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var r=n.data;if(i){if(t==r)i=!1;else if(!this.lt(r,t)&&this.lt(t,r))return!1}else if(!this.lt(t,r)&&this.lt(r,t))return!1;if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return!0},Yn.prototype.empty=function(){return null==this.parent},Yn.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},Yn.prototype.size=function(){var e=0;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(++e,null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}return e},Yn.prototype.has=function(e){return null!=this.find(e)},Yn.prototype.find=function(e){for(var t=this.parent;null!=t&&t.data!=e;)t=this.lt(e,t.data)?t.prev:t.next;return t},Yn.prototype.has_weak=function(e){return null!=this.find_weak(e)},Yn.prototype.find_weak=function(e){for(var t=this.parent;null!=t;)if(this.lt(e,t.data))t=t.prev;else{if(!this.lt(t.data,e))break;t=t.next}return t},Yn.prototype.lower_bound=function(e){var t=null;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var n=i.data;if(!this.lt(n,e)){t=n;break}if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}return t},Yn.prototype.first=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;return e.data},Yn.prototype.pop_front=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;var t=e.data;return this.remove_node(e),t},Yn.prototype.remove=function(e){this.remove_node(this.find(e))},Yn.prototype.successor_node=function(e){if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{var t=e;for(e=e.parent;null!=e&&e.prev!=t;)e=(t=e).parent}return e},Yn.prototype.predecessor_node=function(e){if(null!=e.prev)for(e=e.prev;null!=e.next;)e=e.next;else{var t=e;for(e=e.parent;null!=e&&e.next!=t;)e=(t=e).parent}return e},Yn.prototype.successor=function(e){var t=this.successor_node(this.find(e));return null==t?null:t.data},Yn.prototype.predecessor=function(e){var t=this.predecessor_node(this.find(e));return null==t?null:t.data},Yn.prototype.remove_node=function(e){if(null!=e.next&&null!=e.prev){for(var t=e.next;null!=t.prev;)t=t.prev;var i=e.data;e.data=t.data,t.data=i,null!=this.swapped&&this.swapped(e.data,t.data),e=t}var n=null==e.prev?e.next:e.prev;if(1==e.colour)if(null!=e.prev||null!=e.next)n.colour=1;else if(null!=e.parent)for(var r=e.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var o=r.prev;if(-1==o.colour){this.__fix_neg_red(o);break}if(0==o.colour){if(null!=o.prev&&0==o.prev.colour){this.__fix_dbl_red(o.prev);break}if(null!=o.next&&0==o.next.colour){this.__fix_dbl_red(o.next);break}}var a=r.next;if(-1==a.colour){this.__fix_neg_red(a);break}if(0==a.colour){if(null!=a.prev&&0==a.prev.colour){this.__fix_dbl_red(a.prev);break}if(null!=a.next&&0==a.next.colour){this.__fix_dbl_red(a.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var s=e.parent;null==s?this.parent=n:s.prev==e?s.prev=n:s.next=n,null!=n&&(n.parent=s),e.parent=e.prev=e.next=null;var p=e;p.data=null,p.lt=null,p.swapped=null,p.next=Yn.zpp_pool,Yn.zpp_pool=p},Yn.prototype.clear=function(){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=Yn.zpp_pool,Yn.zpp_pool=i,e=t}this.parent=null}},Yn.prototype.clear_with=function(e){if(null!=this.parent){for(var t=this.parent;null!=t;)if(null!=t.prev)t=t.prev;else if(null!=t.next)t=t.next;else{e(t.data);var i=t.parent;null!=i&&(t==i.prev?i.prev=null:i.next=null,t.parent=null);var n=t;n.data=null,n.lt=null,n.swapped=null,n.next=Yn.zpp_pool,Yn.zpp_pool=n,t=i}this.parent=null}},Yn.prototype.clear_node=function(e,t){t(e.data);var i=e.parent;return null!=i&&(e==i.prev?i.prev=null:i.next=null,e.parent=null),e.data=null,e.lt=null,e.swapped=null,e.next=Yn.zpp_pool,Yn.zpp_pool=e,i},Yn.prototype.__fix_neg_red=function(e){var t,i=e.parent;if(i.prev==e){var n=e.prev,r=e.next,o=r.prev,a=r.next;n.colour=0,e.colour=i.colour=1,null!=(e.next=o)&&(o.parent=e);var s=i.data;i.data=r.data,r.data=s,null!=this.swapped&&this.swapped(i.data,r.data),null!=(r.prev=a)&&(a.parent=r),r.next=i.next,null!=i.next&&(i.next.parent=r),null!=(i.next=r)&&(r.parent=i),t=n}else{var p=e.next,l=e.prev,h=l.next,u=l.prev;p.colour=0,e.colour=i.colour=1,null!=(e.prev=h)&&(h.parent=e);var d=i.data;i.data=l.data,l.data=d,null!=this.swapped&&this.swapped(i.data,l.data),null!=(l.next=u)&&(u.parent=l),l.prev=i.prev,null!=i.prev&&(i.prev.parent=l),null!=(i.prev=l)&&(l.parent=i),t=p}null!=t.prev&&0==t.prev.colour?this.__fix_dbl_red(t.prev):null!=t.next&&0==t.next.colour&&this.__fix_dbl_red(t.next)},Yn.prototype.__fix_dbl_red=function(e){for(;;){var t,i,n,r,o,a,s,p=e.parent,l=p.parent;if(null==l){p.colour=1;break}p==l.prev?(s=(n=l).next,a=e==p.prev?(i=p,r=(t=e).prev,o=e.next,p.next):(i=e,r=(t=p).prev,o=e.prev,e.next)):(r=(t=l).prev,s=e==p.prev?(n=p,o=(i=e).prev,a=e.next,p.next):(n=e,o=(i=p).prev,a=e.prev,e.next));var h=l.parent;if(null==h?this.parent=i:h.prev==l?h.prev=i:h.next=i,null!=i&&(i.parent=h),null!=(t.prev=r)&&(r.parent=t),null!=(t.next=o)&&(o.parent=t),null!=(i.prev=t)&&(t.parent=i),null!=(i.next=n)&&(n.parent=i),null!=(n.prev=a)&&(a.parent=n),null!=(n.next=s)&&(s.parent=n),i.colour=l.colour-1,t.colour=1,n.colour=1,i==this.parent)this.parent.colour=1;else if(0==i.colour&&0==i.parent.colour){e=i;continue}break}},Yn.prototype.try_insert_bool=function(e){var t=null,i=null;if(null==this.parent)null==Yn.zpp_pool?t=new Yn:(t=Yn.zpp_pool,Yn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Yn.zpp_pool?t=new Yn:(t=Yn.zpp_pool,Yn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Yn.zpp_pool?t=new Yn:(t=Yn.zpp_pool,Yn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null!=t&&(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),!0)},Yn.prototype.try_insert=function(e){var t=null,i=null;if(null==this.parent)null==Yn.zpp_pool?t=new Yn:(t=Yn.zpp_pool,Yn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Yn.zpp_pool?t=new Yn:(t=Yn.zpp_pool,Yn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Yn.zpp_pool?t=new Yn:(t=Yn.zpp_pool,Yn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null==t?i:(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t)},Yn.prototype.insert=function(e){var t;if(null==Yn.zpp_pool?t=new Yn:(t=Yn.zpp_pool,Yn.zpp_pool=t.next,t.next=null),t.data=e,null==this.parent)this.parent=t;else for(var i=this.parent;;)if(this.lt(t.data,i.data)){if(null==i.prev){(i.prev=t).parent=i;break}i=i.prev}else{if(null==i.next){(i.next=t).parent=i;break}i=i.next}return null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t},Yn.prototype.__class__=Yn,String.prototype.__class__=String,String.__name__=!0,Array.__name__=!0;var Kn={__name__:["Int"]},Zn={__name__:["Dynamic"]},Jn=Number;Jn.__name__=["Float"];var Qn=Boolean;Qn.__ename__=["Bool"];var $n={__name__:["Class"]},er={};fe.__toStr={}.toString,Qs.epsilon=1e-8,Qs.fluidAngularDragFriction=2.5,Qs.fluidAngularDrag=100,Qs.fluidVacuumDrag=.5,Qs.fluidLinearDrag=.5,Qs.collisionSlop=.2,Qs.collisionSlopCCD=.5,Qs.distanceThresholdCCD=.05,Qs.staticCCDLinearThreshold=.05,Qs.staticCCDAngularThreshold=.005,Qs.bulletCCDLinearThreshold=.125,Qs.bulletCCDAngularThreshold=.0125,Qs.dynamicSweepLinearThreshold=17,Qs.dynamicSweepAngularThreshold=.6,Qs.angularCCDSlipScale=.75,Qs.arbiterExpirationDelay=6,Qs.staticFrictionThreshold=2,Qs.elasticThreshold=20,Qs.sleepDelay=60,Qs.linearSleepThreshold=.2,Qs.angularSleepThreshold=.4,Qs.contactBiasCoef=.3,Qs.contactStaticBiasCoef=.6,Qs.contactContinuousBiasCoef=.4,Qs.contactContinuousStaticBiasCoef=.5,Qs.constraintLinearSlop=.1,Qs.constraintAngularSlop=.001,Qs.illConditionedThreshold=2e8,Ve.zpp_pool=null,He.zpp_pool=null,We.zpp_pool=null,qe.zpp_pool=null,Xe.zpp_pool=null,Ye.zpp_pool=null,Ke.zpp_pool=null,Ze.zpp_pool=null,Je.zpp_pool=null,Qe.zpp_pool=null,$e.zpp_pool=null,et.zpp_pool=null,tt.zpp_pool=null,it.zpp_pool=null,ht.zpp_pool=null,Pe.FMAX=1e100,ke._Constraint=0,ke._Interactor=0,ke._CbType=0,ke._CbSet=0,ke._Listener=0,ke._ZPP_SimpleVert=0,ke._ZPP_SimpleSeg=0,ke._Space=0,ke._InteractionGroup=0,nt.zpp_pool=null,jo.zpp_pool=null,No.zpp_pool=null,Ie.ANY_SHAPE=new c,Ie.ANY_BODY=new c,Ie.ANY_COMPOUND=new c,Ie.ANY_CONSTRAINT=new c,Uo.internal=!1,Uo.id_ImmState_ACCEPT=1,Uo.id_ImmState_IGNORE=2,Uo.id_ImmState_ALWAYS=4,Uo.id_GravMassMode_DEFAULT=0,Uo.id_GravMassMode_FIXED=1,Uo.id_GravMassMode_SCALED=2,Uo.id_InertiaMode_DEFAULT=0,Uo.id_InertiaMode_FIXED=1,Uo.id_MassMode_DEFAULT=0,Uo.id_MassMode_FIXED=1,Uo.id_BodyType_STATIC=1,Uo.id_BodyType_DYNAMIC=2,Uo.id_BodyType_KINEMATIC=3,Uo.id_ListenerType_BODY=0,Uo.id_PreFlag_ACCEPT=1,Uo.id_ListenerType_CONSTRAINT=1,Uo.id_PreFlag_IGNORE=2,Uo.id_ListenerType_INTERACTION=2,Uo.id_PreFlag_ACCEPT_ONCE=3,Uo.id_ListenerType_PRE=3,Uo.id_PreFlag_IGNORE_ONCE=4,Uo.id_CbEvent_BEGIN=0,Uo.id_InteractionType_COLLISION=1,Uo.id_CbEvent_ONGOING=6,Uo.id_InteractionType_SENSOR=2,Uo.id_CbEvent_END=1,Uo.id_InteractionType_FLUID=4,Uo.id_CbEvent_WAKE=2,Uo.id_InteractionType_ANY=7,Uo.id_CbEvent_SLEEP=3,Uo.id_CbEvent_BREAK=4,Uo.id_CbEvent_PRE=5,Uo.id_Winding_UNDEFINED=0,Uo.id_Winding_CLOCKWISE=1,Uo.id_Winding_ANTICLOCKWISE=2,Uo.id_ValidationResult_VALID=0,Uo.id_ValidationResult_DEGENERATE=1,Uo.id_ValidationResult_CONCAVE=2,Uo.id_ValidationResult_SELF_INTERSECTING=3,Uo.id_ShapeType_CIRCLE=0,Uo.id_ShapeType_POLYGON=1,Uo.id_Broadphase_DYNAMIC_AABB_TREE=0,Uo.id_Broadphase_SWEEP_AND_PRUNE=1,Uo.id_ArbiterType_COLLISION=1,Uo.id_ArbiterType_SENSOR=2,Uo.id_ArbiterType_FLUID=4,Le.types=function(e){null==Uo.ListenerType_BODY&&(Uo.internal=!0,Uo.ListenerType_BODY=new m,Uo.internal=!1);var t=Uo.ListenerType_BODY;null==Uo.ListenerType_CONSTRAINT&&(Uo.internal=!0,Uo.ListenerType_CONSTRAINT=new m,Uo.internal=!1);var i=Uo.ListenerType_CONSTRAINT;null==Uo.ListenerType_INTERACTION&&(Uo.internal=!0,Uo.ListenerType_INTERACTION=new m,Uo.internal=!1);var n=Uo.ListenerType_INTERACTION;return null==Uo.ListenerType_PRE&&(Uo.internal=!0,Uo.ListenerType_PRE=new m,Uo.internal=!1),[t,i,n,Uo.ListenerType_PRE]}(),Le.events=function(e){null==Uo.CbEvent_BEGIN&&(Uo.internal=!0,Uo.CbEvent_BEGIN=new u,Uo.internal=!1);var t=Uo.CbEvent_BEGIN;null==Uo.CbEvent_END&&(Uo.internal=!0,Uo.CbEvent_END=new u,Uo.internal=!1);var i=Uo.CbEvent_END;null==Uo.CbEvent_WAKE&&(Uo.internal=!0,Uo.CbEvent_WAKE=new u,Uo.internal=!1);var n=Uo.CbEvent_WAKE;null==Uo.CbEvent_SLEEP&&(Uo.internal=!0,Uo.CbEvent_SLEEP=new u,Uo.internal=!1);var r=Uo.CbEvent_SLEEP;null==Uo.CbEvent_BREAK&&(Uo.internal=!0,Uo.CbEvent_BREAK=new u,Uo.internal=!1);var o=Uo.CbEvent_BREAK;null==Uo.CbEvent_PRE&&(Uo.internal=!0,Uo.CbEvent_PRE=new u,Uo.internal=!1);var a=Uo.CbEvent_PRE;return null==Uo.CbEvent_ONGOING&&(Uo.internal=!0,Uo.CbEvent_ONGOING=new u,Uo.internal=!1),[t,i,n,r,o,a,Uo.CbEvent_ONGOING]}(),ri.UCbSet=new De,ri.VCbSet=new De,ri.WCbSet=new De,ri.UCbType=new Fe,ri.VCbType=new Fe,ri.WCbType=new Fe,ln.internal=!1,ln.COL=1,ln.FLUID=4,ln.SENSOR=2,ln.types=function(e){null==Uo.ArbiterType_COLLISION&&(Uo.internal=!0,Uo.ArbiterType_COLLISION=new G,Uo.internal=!1);var t=Uo.ArbiterType_COLLISION;null==Uo.ArbiterType_SENSOR&&(Uo.internal=!0,Uo.ArbiterType_SENSOR=new G,Uo.internal=!1);var i=Uo.ArbiterType_SENSOR;return null==Uo.ArbiterType_FLUID&&(Uo.internal=!0,Uo.ArbiterType_FLUID=new G,Uo.internal=!1),[null,t,i,null,Uo.ArbiterType_FLUID]}(),Vo.zpp_pool=null,Ho.zpp_pool=null,Wo.FACE1=0,Wo.FACE2=1,Wo.CIRCLE=2,Wo.zpp_pool=null,qo.internal=!1,qo.zpp_pool=null,mt.zpp_pool=null,gt.SHAPE=1,gt.BODY=2,Oo.zpp_pool=null,$s.flowpoly=new vt,$s.flowsegs=new vt,wt.convexPool=null,wt.rayPool=null,wt.internal=!1,Sn.zpp_pool=null,Cn.zpp_pool=null,Mn.ints=null,Mn.paths=null,cr.zpp_pool=null,Ct.zpp_pool=null,Mt.zpp_pool=null,_r.zpp_pool=null,yr.me=new yr,yr.look_march=[-1,224,56,216,14,-1,54,214,131,99,-1,91,141,109,181,85],Pt.zpp_pool=null,Tt.queue=null,Tt.edges=null,At.nextId=0,At.zpp_pool=null,Ot.zpp_pool=null,Gt.zpp_pool=null,Dt.zpp_pool=null,It.zpp_pool=null,Bt.sweep=null,Bt.inthash=null,Bt.vertices=null,Bt.queue=null,Bt.ints=null,Bt.list_vertices=null,Bt.list_queue=null,Rt.zpp_pool=null,Ft.zpp_pool=null,jt.stack=null,Vt.zpp_pool=null,Nt.zpp_pool=null,Ut.queue=null,Ut.stack=null,Ut.edgeSet=null,ep.zpp_pool=null,Xt.types=function(e){null==Uo.BodyType_STATIC&&(Uo.internal=!0,Uo.BodyType_STATIC=new oe,Uo.internal=!1);var t=Uo.BodyType_STATIC;null==Uo.BodyType_DYNAMIC&&(Uo.internal=!0,Uo.BodyType_DYNAMIC=new oe,Uo.internal=!1);var i=Uo.BodyType_DYNAMIC;return null==Uo.BodyType_KINEMATIC&&(Uo.internal=!0,Uo.BodyType_KINEMATIC=new oe,Uo.internal=!1),[null,t,i,Uo.BodyType_KINEMATIC]}(),Xt.bodystack=null,Xt.bodyset=null,Xt.cur_graph_depth=0,Kt.zpp_pool=null,Zt.zpp_pool=null,Zt.WAKE=1,Zt.PROPS=2,Zt.ANGDRAG=4,Zt.ARBITERS=8,Jt.types=function(e){null==Uo.ShapeType_CIRCLE&&(Uo.internal=!0,Uo.ShapeType_CIRCLE=new ge,Uo.internal=!1);var t=Uo.ShapeType_CIRCLE;return null==Uo.ShapeType_POLYGON&&(Uo.internal=!0,Uo.ShapeType_POLYGON=new ge,Uo.internal=!1),[t,Uo.ShapeType_POLYGON]}(),$t.zpp_pool=null,$t.internal=!1,Eo.zpp_pool=null,nr.zpp_pool=null,Go.tmpaabb=new Oo,ii.FATTEN=3,ii.VEL_STEPS=2,ni.zpp_pool=null,oi.zpp_pool=null,Yo.zpp_pool=null,pi.zpp_pool=null,ci.zpp_pool=null,ji.zpp_pool=null,Ni.zpp_pool=null,Ui.zpp_pool=null,Vi.zpp_pool=null,Hi.zpp_pool=null,Wi.zpp_pool=null,Ko.zpp_pool=null,Zo.zpp_pool=null,qi.zpp_pool=null,Jo.zpp_pool=null,Xi.zpp_pool=null,Yi.zpp_pool=null,Ki.zpp_pool=null,Zi.zpp_pool=null,Ji.zpp_pool=null,Qi.zpp_pool=null,$i.zpp_pool=null,en.zpp_pool=null,tn.zpp_pool=null,nn.zpp_pool=null,rn.zpp_pool=null,on.zpp_pool=null,rr.zpp_pool=null,an.zpp_pool=null,sn.zpp_pool=null,pn.zpp_pool=null,Qo.zpp_pool=null,$o.zpp_pool=null,hn.zpp_pool=null,ea.zpp_pool=null,un.zpp_pool=null,dn.zpp_pool=null,cn.zpp_pool=null,_n.zpp_pool=null,yn.zpp_pool=null,mn.internal=!1,gn.internal=!1,fn.internal=!1,vn.internal=!1,zn.internal=!1,Tn.internal=!1,An.internal=!1,On.internal=!1,En.internal=!1,Gn.internal=!1,Dn.internal=!1,In.internal=!1,Ln.internal=!1,Bn.internal=!1,Rn.internal=!1,jn.poolGeomPoly=null,jn.poolVec2=null,jn.poolVec3=null,Nn.zpp_pool=null,Un.zpp_pool=null,Vn.zpp_pool=null,Hn.zpp_pool=null,Wn.zpp_pool=null,qn.zpp_pool=null,Xn.zpp_pool=null,Yn.zpp_pool=null,Me.main()}(),function(){function n(e,t,i){return e.call.apply(e.bind,arguments)}function r(t,i,e){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,n),t.apply(i,e)}}return function(){return t.apply(i,arguments)}}function _(e,t,i){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?n:r).apply(null,arguments)}var s=Date.now||function(){return+new Date};function t(e,t){this.a=e,this.o=t||e,this.c=this.o.document}var p=!!window.FontFace;function l(e,t,i,n){if(t=e.c.createElement(t),i)for(var r in i)i.hasOwnProperty(r)&&("style"==r?t.style.cssText=i[r]:t.setAttribute(r,i[r]));return n&&t.appendChild(e.c.createTextNode(n)),t}function h(e,t,i){(e=e.c.getElementsByTagName(t)[0])||(e=document.documentElement),e.insertBefore(i,e.lastChild)}function i(e){e.parentNode&&e.parentNode.removeChild(e)}function y(e,t,i){t=t||[],i=i||[];for(var n=e.className.split(/\s+/),r=0;r<t.length;r+=1){for(var o=!1,a=0;a<n.length;a+=1)if(t[r]===n[a]){o=!0;break}o||n.push(t[r])}for(t=[],r=0;r<n.length;r+=1){for(o=!1,a=0;a<i.length;a+=1)if(n[r]===i[a]){o=!0;break}o||t.push(n[r])}e.className=t.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function o(e,t){for(var i=e.className.split(/\s+/),n=0,r=i.length;n<r;n++)if(i[n]==t)return!0;return!1}function u(e,t,i){function n(){a&&r&&(a(o),a=null)}t=l(e,"link",{rel:"stylesheet",href:t,media:"all"});var r=!1,o=null,a=i||null;p?(t.onload=function(){r=!0,n()},t.onerror=function(){r=!0,o=Error("Stylesheet failed to load"),n()}):setTimeout(function(){r=!0,n()},0),h(e,"head",t)}function d(e,t,i,n){var r=e.c.getElementsByTagName("head")[0];if(r){var o=l(e,"script",{src:t}),a=!1;return o.onload=o.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,i&&i(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&r.removeChild(o))},r.appendChild(o),setTimeout(function(){a||(a=!0,i&&i(Error("Script load timeout")))},n||5e3),o}return null}function c(){this.a=0,this.c=null}function x(e){return e.a++,function(){e.a--,a(e)}}function m(e,t){e.c=t,a(e)}function a(e){0==e.a&&e.c&&(e.c(),e.c=null)}function g(e){this.a=e||"-"}function f(e,t){this.c=e,this.f=4,this.a="n";var i=(t||"n4").match(/^([nio])([1-9])$/i);i&&(this.a=i[1],this.f=parseInt(i[2],10))}function v(e){var t=[];e=e.split(/,\s*/);for(var i=0;i<e.length;i++){var n=e[i].replace(/['"]/g,"");-1!=n.indexOf(" ")||/^\d/.test(n)?t.push("'"+n+"'"):t.push(n)}return t.join(",")}function z(e){return e.a+e.f}function w(e){var t="normal";return"o"===e.a?t="oblique":"i"===e.a&&(t="italic"),t}function b(e,t){this.c=e,this.f=e.o.document.documentElement,this.h=t,this.a=new g("-"),this.j=!1!==t.events,this.g=!1!==t.classes}function S(e){if(e.g){var t=o(e.f,e.a.c("wf","active")),i=[],n=[e.a.c("wf","loading")];t||i.push(e.a.c("wf","inactive")),y(e.f,i,n)}C(e,"inactive")}function C(e,t,i){e.j&&e.h[t]&&(i?e.h[t](i.c,z(i)):e.h[t]())}function M(){this.c={}}function P(e,t){this.c=e,this.f=t,this.a=l(this.c,"span",{"aria-hidden":"true"},this.f)}function k(e){h(e.c,"body",e.a)}function T(e){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+v(e.c)+";font-style:"+w(e)+";font-weight:"+e.f+"00;"}function A(e,t,i,n,r,o){this.g=e,this.j=t,this.a=n,this.c=i,this.f=r||3e3,this.h=o||void 0}function O(e,t,i,n,r,o,a){this.v=e,this.B=t,this.c=i,this.a=n,this.s=a||"BESbswy",this.f={},this.w=r||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new P(this.c,this.s),this.h=new P(this.c,this.s),this.j=new P(this.c,this.s),this.m=new P(this.c,this.s),e=T(e=new f(this.a.c+",serif",z(this.a))),this.g.a.style.cssText=e,e=T(e=new f(this.a.c+",sans-serif",z(this.a))),this.h.a.style.cssText=e,e=T(e=new f("serif",z(this.a))),this.j.a.style.cssText=e,e=T(e=new f("sans-serif",z(this.a))),this.m.a.style.cssText=e,k(this.g),k(this.h),k(this.j),k(this.m)}g.prototype.c=function(e){for(var t=[],i=0;i<arguments.length;i++)t.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.a)},A.prototype.start=function(){var r=this.c.o.document,o=this,a=s(),e=new Promise(function(i,n){!function t(){var e;s()-a>=o.f?n():r.fonts.load((e=o.a,w(e)+" "+e.f+"00 300px "+v(e.c)),o.h).then(function(e){1<=e.length?i():setTimeout(t,25)},function(){n()})}()}),i=null,t=new Promise(function(e,t){i=setTimeout(t,o.f)});Promise.race([t,e]).then(function(){i&&(clearTimeout(i),i=null),o.g(o.a)},function(){o.j(o.a)})};var E={D:"serif",C:"sans-serif"},G=null;function D(){if(null===G){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);G=!!e&&(parseInt(e[1],10)<536||536===parseInt(e[1],10)&&parseInt(e[2],10)<=11)}return G}function I(e,t,i){for(var n in E)if(E.hasOwnProperty(n)&&t===e.f[E[n]]&&i===e.f[E[n]])return!0;return!1}function L(e){var t,i=e.g.a.offsetWidth,n=e.h.a.offsetWidth;(t=i===e.f.serif&&n===e.f["sans-serif"])||(t=D()&&I(e,i,n)),t?s()-e.A>=e.w?D()&&I(e,i,n)&&(null===e.u||e.u.hasOwnProperty(e.a.c))?B(e,e.v):B(e,e.B):setTimeout(_(function(){L(this)},e),50):B(e,e.v)}function B(e,t){setTimeout(_(function(){i(this.g.a),i(this.h.a),i(this.j.a),i(this.m.a),t(this.a)},e),0)}function R(e,t,i){this.c=e,this.a=t,this.f=0,this.m=this.j=!1,this.s=i}O.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=s(),L(this)};var F=null;function j(e){0==--e.f&&e.j&&(e.m?((e=e.a).g&&y(e.f,[e.a.c("wf","active")],[e.a.c("wf","loading"),e.a.c("wf","inactive")]),C(e,"active")):S(e.a))}function e(e){this.j=e,this.a=new M,this.h=0,this.f=this.g=!0}function N(e,t){this.c=e,this.a=t}function U(e,t){this.c=e,this.a=t}function V(e,t){this.c=e||"https://fonts.googleapis.com/css",this.a=[],this.f=[],this.g=t||""}R.prototype.g=function(e){var t=this.a;t.g&&y(t.f,[t.a.c("wf",e.c,z(e).toString(),"active")],[t.a.c("wf",e.c,z(e).toString(),"loading"),t.a.c("wf",e.c,z(e).toString(),"inactive")]),C(t,"fontactive",e),this.m=!0,j(this)},R.prototype.h=function(e){var t=this.a;if(t.g){var i=o(t.f,t.a.c("wf",e.c,z(e).toString(),"active")),n=[],r=[t.a.c("wf",e.c,z(e).toString(),"loading")];i||n.push(t.a.c("wf",e.c,z(e).toString(),"inactive")),y(t.f,n,r)}C(t,"fontinactive",e),j(this)},e.prototype.load=function(e){this.c=new t(this.j,e.context||this.j),this.g=!1!==e.events,this.f=!1!==e.classes,function(r,e,t){var i=[],n=t.timeout;o=e,o.g&&y(o.f,[o.a.c("wf","loading")]),C(o,"loading");var o;var i=function(e,t,i){var n,r=[];for(n in t)if(t.hasOwnProperty(n)){var o=e.c[n];o&&r.push(o(t[n],i))}return r}(r.a,t,r.c),a=new R(r.c,e,n);for(r.h=i.length,e=0,t=i.length;e<t;e++)i[e].load(function(e,t,i){var n,l,h,u,d,c;l=a,h=e,u=t,d=i,c=0==--(n=r).h,(n.f||n.g)&&setTimeout(function(){var e=d||null,t=u||{};if(0===h.length&&c)S(l.a);else{l.f+=h.length,c&&(l.j=c);var i,n=[];for(i=0;i<h.length;i++){var r=h[i],o=t[r.c],a=l.a,s=r;if(a.g&&y(a.f,[a.a.c("wf",s.c,z(s).toString(),"loading")]),C(a,"fontloading",s),(a=null)===F)if(window.FontFace){var s=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),p=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);F=s?42<parseInt(s[1],10):!p}else F=!1;a=F?new A(_(l.g,l),_(l.h,l),l.c,r,l.s,o):new O(_(l.g,l),_(l.h,l),l.c,r,l.s,e,o),n.push(a)}for(i=0;i<n.length;i++)n[i].start()}},0)})}(this,new b(this.c,e),e)},N.prototype.load=function(a){var t=this,s=t.a.projectId,e=t.a.version;if(s){var p=t.c.o;d(this.c,(t.a.api||"https://fast.fonts.net/jsapi")+"/"+s+".js"+(e?"?v="+e:""),function(e){e?a([]):(p["__MonotypeConfiguration__"+s]=function(){return t.a},function e(){if(p["__mti_fntLst"+s]){var t,i=p["__mti_fntLst"+s](),n=[];if(i)for(var r=0;r<i.length;r++){var o=i[r].fontfamily;null!=i[r].fontStyle&&null!=i[r].fontWeight?(t=i[r].fontStyle+i[r].fontWeight,n.push(new f(o,t))):n.push(new f(o))}a(n)}else setTimeout(function(){e()},50)}())}).id="__MonotypeAPIScript__"+s}else a([])},U.prototype.load=function(e){var t,i,n=this.a.urls||[],r=this.a.families||[],o=this.a.testStrings||{},a=new c;for(t=0,i=n.length;t<i;t++)u(this.c,n[t],x(a));var s=[];for(t=0,i=r.length;t<i;t++)if((n=r[t].split(":"))[1])for(var p=n[1].split(","),l=0;l<p.length;l+=1)s.push(new f(n[0],p[l]));else s.push(new f(n[0]));m(a,function(){e(s,o)})};function H(e){this.f=e,this.a=[],this.c={}}var W={latin:"BESbswy","latin-ext":"",cyrillic:"",greek:"",khmer:"",Hanuman:""},q={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},X={i:"i",italic:"i",n:"n",normal:"n"},Y=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function K(e,t){this.c=e,this.a=t}var Z={Arimo:!0,Cousine:!0,Tinos:!0};function J(e,t){this.c=e,this.a=t}function Q(e,t){this.c=e,this.f=t,this.a=[]}K.prototype.load=function(e){var t=new c,i=this.c,n=new V(this.a.api,this.a.text),r=this.a.families;!function(e,t){for(var i=t.length,n=0;n<i;n++){var r=t[n].split(":");3==r.length&&e.f.push(r.pop());var o="";2==r.length&&""!=r[1]&&(o=":"),e.a.push(r.join(o))}}(n,r);var o=new H(r);!function(e){for(var t=e.f.length,i=0;i<t;i++){var n=e.f[i].split(":"),r=n[0].replace(/\+/g," "),o=["n4"];if(2<=n.length){var a;if(a=[],s=n[1])for(var s,p=(s=s.split(",")).length,l=0;l<p;l++){var h;if((h=s[l]).match(/^[\w-]+$/))if(null==(d=Y.exec(h.toLowerCase())))h="";else{if(h=null==(h=d[2])||""==h?"n":X[h],null==(d=d[1])||""==d)d="4";else var u=q[d],d=u||(isNaN(d)?"4":d.substr(0,1));h=[h,d].join("")}else h="";h&&a.push(h)}0<a.length&&(o=a),3==n.length&&(a=[],0<(n=(n=n[2])?n.split(","):a).length&&(n=W[n[0]])&&(e.c[r]=n))}for(e.c[r]||(n=W[r])&&(e.c[r]=n),n=0;n<o.length;n+=1)e.a.push(new f(r,o[n]))}}(o),u(i,function(e){if(0==e.a.length)throw Error("No fonts to load!");if(-1!=e.c.indexOf("kit="))return e.c;for(var t=e.a.length,i=[],n=0;n<t;n++)i.push(e.a[n].replace(/ /g,"+"));return t=e.c+"?family="+i.join("%7C"),0<e.f.length&&(t+="&subset="+e.f.join(",")),0<e.g.length&&(t+="&text="+encodeURIComponent(e.g)),t}(n),x(t)),m(t,function(){e(o.a,o.c,Z)})},J.prototype.load=function(a){var e=this.a.id,s=this.c.o;e?d(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",function(e){if(e)a([]);else if(s.Typekit&&s.Typekit.config&&s.Typekit.config.fn){e=s.Typekit.config.fn;for(var t=[],i=0;i<e.length;i+=2)for(var n=e[i],r=e[i+1],o=0;o<r.length;o++)t.push(new f(n,r[o]));try{s.Typekit.load({events:!1,classes:!1,async:!0})}catch(e){}a(t)}},2e3):a([])},Q.prototype.load=function(l){var e,t=this.f.id,i=this.c.o,h=this;t?(i.__webfontfontdeckmodule__||(i.__webfontfontdeckmodule__={}),i.__webfontfontdeckmodule__[t]=function(e,t){for(var i=0,n=t.fonts.length;i<n;++i){var r=t.fonts[i];h.a.push(new f(r.name,(o="font-weight:"+r.weight+";font-style:"+r.style,p=s=a=void 0,a=4,s="n",p=null,o&&((p=o.match(/(normal|oblique|italic)/i))&&p[1]&&(s=p[1].substr(0,1).toLowerCase()),(p=o.match(/([1-9]00|normal|bold)/i))&&p[1]&&(/bold/i.test(p[1])?a=7:/[1-9]00/.test(p[1])&&(a=parseInt(p[1].substr(0,1),10)))),s+a)))}var o,a,s,p;l(h.a)},d(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+((e=this.c).o.location.hostname||e.a.location.hostname)+"/"+t+".js",function(e){e&&l([])})):l([])};var $=new e(window);$.a.c.custom=function(e,t){return new U(t,e)},$.a.c.fontdeck=function(e,t){return new Q(t,e)},$.a.c.monotype=function(e,t){return new N(t,e)},$.a.c.typekit=function(e,t){return new J(t,e)},$.a.c.google=function(e,t){return new K(t,e)};var ee={load:_($.load,$)};"function"==typeof define&&define.amd?define(function(){return ee}):"undefined"!=typeof module&&module.exports?module.exports=ee:(window.WebFont=ee,window.WebFontConfig&&$.load(window.WebFontConfig))}();var __extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.adjustWorld=function(){var e=Math.min(window.innerWidth/Constants.WIDTH,window.innerHeight/Constants.HEIGHT);this.game.scale.setGameSize(window.innerWidth/e,Constants.HEIGHT),this.game.scale.setUserScale(e,e,0,0),this.camera.bounds.x=-1/0,this.camera.bounds.width=1/0,this.camera.x=-(window.innerWidth/e-Constants.WIDTH)/2,window.innerWidth<window.innerHeight?(this.game.paused=!0,Constants.RotateDevice.visible=!0):(this.game.paused=!1,Constants.RotateDevice.visible=!1)},t.prototype.create=function(){this.adjustWorld(),GameController.JoypadLeft&&(GameController.JoypadLeft.visible=GameController.JoypadRight.visible=!1),Constants.stateSwitcher._isSwitchingState&&Constants.stateSwitcher.openCurtains(.1)},t}(Phaser.State);e.OzState=t}(states||(states={})),function(e){var t=function(){function e(e,t){this._ce=null,this.kill=!1,this.name=e,this.params=t,this.registration="center",this._radius=this.group=this.offsetX=this.offsetY=this._x=this._y=0,this._width=30,this._height=30,this._inverted=this._initialized=this.updateCallEnabled=!1,this.initialize(),this._ce=CitrusEngine.getInstance(),this._initialized=!0}return e.prototype.initialize=function(e){void 0===e&&(e=null),e&&(this.params=e),this.params?this.setParams(this.params):this._initialized=!0},e.prototype.setParams=function(e){e.view&&(this.view=e.view),e.x&&(this._x=e.x),e.y&&(this._y=e.y),e.group&&(this.group=e.group),e.radius&&(this._radius=e.radius),e.width&&(this._width=e.width),e.height&&(this._height=e.height),e.x instanceof String||e.y instanceof String||e.width instanceof String||(e.height,String),Constants.DEBUG,this._initialized=!0},Object.defineProperty(e.prototype,"inverted",{get:function(){return this._inverted},set:function(e){this._inverted=e,this.view&&(this._inverted?this.view.scale.x=-1:this.view.scale.x=1)},enumerable:!0,configurable:!0}),e.prototype.halfWidth=function(){return 0<this._width?this._width/2:this._radius},e.prototype.halfHeight=function(){return 0<this._height?this._height/2:this._radius},e.prototype.draw=function(){if(this.view)if("center"==this.registration)this.view.x=this._x+this.offsetX,this.view.y=this._y+this.offsetY;else{if("topLeft"!=this.registration)throw Error("NO SUCH REGISTRATION "+this.registration);this.view.x=this._x+this.offsetX,this.view.y=this._y+this.offsetY}},e.prototype.removeArt=function(){this.view&&this.view.parent&&this.view.parent.removeChild(this.view)},e.prototype.update=function(e){this._timeDelta=e},Object.defineProperty(e.prototype,"registration",{get:function(){return this._registration},set:function(e){this._registration=e},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._initialized=!1},e}();e.CitrusObject=t}(objects||(objects={}));var CitrusObject=objects.CitrusObject;!function(r){var e=function(u){function e(){return u.call(this)||this}return __extends(e,u),e.prototype.create=function(){var e=this;h5branding.google.sendScreenView("gameplay"),this.prisoners=new Array,this.burgers=0,this.achievementMC=null,this.curHero=null,this.controlsPointer=null,Constants._ce=CitrusEngine.Init(),(Constants.levelState=this)._paused=!1,this.NumSpriteGroups=7,this.groupSprites=new Array;for(var t=0;t<this.NumSpriteGroups;t++)this.groupSprites[t]=new MovieClip(null,0,0),this.game.world.addChild(this.groupSprites[t]);this._objects=new Array,this._nape=new objects.Nape("nape"),this._nape.gravity=new Vec2(0,300),this.addObject(this._nape),(new LevelParseSystem).parseFromJSON(Constants.currentLevel),new objects.FixedBox2(700,-15,10,555),new objects.FixedBox2(-10,-15,10,555),this.topPanel=new TopPanel,this.topPanel.init(),this._black=this.game.add.graphics(0,0),this._black.beginFill(0),this._black.drawRect(0,0,Constants.WIDTH,Constants.HEIGHT),this._black.endFill(),this._black.visible=!1,this.pauseSprite=new MovieClip("cmcPause",239,-395),h5branding.Branding.outGoingLinksAllowed()&&(this.brandingLogo=this.game.add.button(-20,226,h5branding.Branding.LOGO_KEY,function(){h5branding.Branding.openCampaignLink(Constants.GOOGLE_APP_NAME,h5branding.UtmTargets.logo)}),this.pauseSprite.addChild(this.brandingLogo)),this.pauseSprite.getChild("menuButton").makeButton(this.goLevels,!0,this),this.pauseSprite.getChild("backButton").makeButton(this.unShowMenu,!0,this),this.pauseSprite.visible=!1,this.game.world.addChild(this.pauseSprite),this.topPanel._view.getChild("menuButton").makeButton(function(){e.showMenu(),h5branding.google.sendScreenView("button_game_pause")},!0,this),this.topPanel._view.getChild("soundButton").makeSoundButton(),this.topPanel._view.getChild("musicButton").makeMusicButton(),this.topPanel._view.getChild("replayButton").makeButton(this.ozRestartLevel,!0,this),h5branding.Branding.outGoingLinksAllowed()&&!this.game.device.cordova?this.topPanel._view.getChild("walkthroughButton").makeButton(Constants.walkthrough,!0,this):this.topPanel._view.getChild("walkthroughButton").visible=!1,this._isStarting=!0,this.isFinishing=!1,Constants.hero.controlsEnabled=Constants.dog.controlsEnabled=!1,TweenMax.delayedCall(.1,function(){Constants.hero.controlsEnabled=Constants.dog.controlsEnabled=!0,this._isStarting=!1},this),SoundManager.getInstance().playSound("GameMusic"),this.initFix=!1,this.frUpdate=0,Fabrique.PauseHandler.getInstance().onPauseCallback.add(this.onBlurPause,this),h5branding.gameanalytics.addProgressionEvent(h5branding.EGAProgressionStatus.Start,Constants.currentLevel.toString())},e.prototype.completeLevel=function(){this.isFinishing||(this.completeActivities(),Constants.levelsComplete[Constants.currentLevel]=!0,this.burgers>Constants.burgers[Constants.currentLevel]&&(Constants.burgers[Constants.currentLevel]=this.burgers),StorageHelper.saveCookies(),h5branding.gameanalytics.addProgressionEvent(h5branding.EGAProgressionStatus.Complete,Constants.currentLevel.toString()),TweenMax.delayedCall(1,this.ozGoNextLevel,this))},e.prototype.goWalkthroughIngame=function(){Constants.walkthrough(),this.topPanel._view.getChild("walkthroughButton").changeFrame1()},e.prototype.goLevels=function(){Fabrique.AdHandler.getInstance().showAd("pauseToLevelSelect",function(){Constants.stateSwitcher.switchToLevelSelect()})},e.prototype.onBlurPause=function(){this.showMenu(),Fabrique.AdHandler.getInstance().isAdPlaying()||h5branding.google.sendScreenView("blur_game_pause")},e.prototype.showMenu=function(){this._paused||Constants.stateSwitcher._isSwitchingState||(this._paused=!0,this.pauseSprite.visible=!0,this.pauseSprite.getChild("backButton").changeFrame1(),this._black.visible=!0,this.pauseAllAnimations(),GameController.Touch()&&GameController.HideJoypad(),TweenMax.pauseAll(),this._black.alpha=0,this.topPanel.disableInput(),TweenMax.to(this._black,.4,{alpha:.5}),TweenMax.to(this.pauseSprite,.4,{y:0,ease:"Quad.easeOut"}))},e.prototype.unShowMenu=function(){var e=this;Fabrique.AdHandler.getInstance().showAd("resume",function(){e._paused=!1,TweenMax.resumeAll(),e.resumeAllAnimations(),GameController.Touch()&&GameController.ShowJoypad(),TweenMax.to(e._black,.25,{alpha:0}),TweenMax.to(e.pauseSprite,.25,{y:-395,onComplete:e.hideMenu,onCompleteContext:e}),h5branding.google.sendScreenView("gameplay")})},e.prototype.hideMenu=function(){this._black.visible=!1,this.pauseSprite.visible=!1,this.topPanel.enableInput()},e.prototype.pauseAllAnimations=function(){for(var e=0;e<this._objects.length;e++){var t=this._objects[e];t.view&&t.view.animations&&t.view.animations.currentAnim&&(t.view.animations.paused=!0)}},e.prototype.resumeAllAnimations=function(){for(var e=0;e<this._objects.length;e++){var t=this._objects[e];t.view&&t.view.animations&&t.view.animations.currentAnim&&(t.view.animations.paused=!1)}},e.prototype.ozGoNextLevel=function(){this._paused=!0,this.topPanel.disableInput(),Constants.currentLevel==Constants.NUMLEVELS&&140<=StorageHelper.totalPoints()&&null==this.achievementMC?(this.achievementMC=new MovieClip("BurgerAchievementGraphics",0,0,"achievement"),this.world.addChild(this.achievementMC),this.achievementMC.alpha=0,TweenMax.to(this.achievementMC,.5,{alpha:1}),SoundManager.getInstance().playSound("AchievementUnlockedSound"),TweenMax.delayedCall(3,this.ozGoNextLevel,this)):Constants.currentLevel!=Constants.NUMLEVELS-1||Constants.isFinalAnimationPlayed?Constants.stateSwitcher.switchToLevelCompleted():(r.AnimationState.ID_ANIMATION=1,Constants.stateSwitcher.switchToAnimation())},e.prototype.ozRestartLevel=function(){this._paused||Constants.stateSwitcher._isSwitchingState||(Constants.DEBUG?Constants.stateSwitcher.directToPlay():(this._paused=!0,this.topPanel.disableInput(),Constants.stateSwitcher.switchToPlay()))},e.prototype.switchToLevelState=function(){},e.prototype.finishLevelComplete=function(){Constants.isFinalAnimationPlayed||(Constants.currentAnimation=!0,Constants.isFinalAnimationPlayed=!0,StorageHelper.saveCookies())},e.prototype.failLevel=function(){this.isFinishing||(this.completeActivities(),TweenMax.delayedCall(.5,this.loseLevel,this))},e.prototype.loseLevel=function(){h5branding.gameanalytics.addProgressionEvent(h5branding.EGAProgressionStatus.Fail,Constants.currentLevel.toString()),this._paused=!0,this.topPanel.disableInput(),Constants.stateSwitcher.switchToLose()},e.prototype.restartLevel=function(){this.isFinishing||this.completeActivities()},e.prototype.goToMenu=function(){this.isFinishing||this.completeActivities()},e.prototype.completeActivities=function(){this.isFinishing=!0,Constants.dog.controlsEnabled=!1,Constants.hero.controlsEnabled=!1},e.prototype.addObject=function(e){e instanceof objects.NapePhysicsObject&&e.addPhysics(),e.view&&this.groupSprites[e.group].addChild(e.view),this._objects.push(e)},e.prototype.removeObject=function(e){e.kill=!0},e.prototype.getObjectByName=function(e){for(var t=0,i=this._objects;t<i.length;t++){var n=i[t];if(n.name==e)return n}return null},e.prototype.getObjectsByName=function(e){for(var t=null,i=0,n=this._objects;i<n.length;i++){var r=n[i];r.name==e&&(t||(t=new Array),t.push(r))}return t},e.prototype.stateUpdate=function(e){e/=1e3;for(var t=[],i=this._objects.length,n=0;n<i;++n){var r=this._objects[n];r.kill?t.push(r):r.updateCallEnabled&&r.update(e)}for(i=t.length,n=0;n<i;++n){var o=t[n];this._objects.splice(this._objects.indexOf(o),1),o.removeArt(),o.destroy()}for(var a=0,s=this._objects;a<s.length;a++){s[a].draw()}},e.prototype.butDistSquared=function(e,t){var i=e.worldX-(t.x+t.parent.x-r.Boot.PADH),n=e.worldY-(t.y+t.parent.y);return i*i+n*n},e.prototype.closerBut=function(e,t,i){return t?this.butDistSquared(e,i)<this.butDistSquared(e,t)?i:t:i},e.prototype.changeControls=function(){this.curHero?this.curHero==Constants.dog?this.curHero=Constants.hero:this.curHero=Constants.dog:(this.controlsPointer=new MovieClip("cmcActiveSign"),this.groupSprites[Constants.hero.group].addChild(this.controlsPointer),this.curHero=Constants.hero),this.curHero==Constants.hero?(Constants._ce.input.setDoing(Constants.dogInputChannel,"left",!1),Constants._ce.input.setDoing(Constants.dogInputChannel,"right",!1),Constants._ce.input.setDoing(Constants.dogInputChannel,"jump",!1),Constants._ce.input.setDoing(Constants.dogInputChannel,"grabDown",!1),Constants._ce.input.setDoing(Constants.dogInputChannel,"grab",!1),GameController.JoypadRight.getChild("change").gotoAndStop(1)):(Constants._ce.input.setDoing(Constants.hustlerInputChannel,"left",!1),Constants._ce.input.setDoing(Constants.hustlerInputChannel,"right",!1),Constants._ce.input.setDoing(Constants.hustlerInputChannel,"jump",!1),Constants._ce.input.setDoing(Constants.hustlerInputChannel,"down",!1),GameController.JoypadRight.getChild("change").gotoAndStop(2)),GameController.JoypadRight.getChild("grab").visible=!1},e.prototype.update=function(){if(this.frUpdate++,!this.initFix&&1<this.frUpdate&&(this.initFix=!0,u.prototype.create.call(this),GameController.JoypadLeft||(GameController.JoypadLeft=new MovieClip("cmcJoypadLeft"),GameController.JoypadLeft.x=120,GameController.JoypadLeft.y=Constants.HEIGHT-55,this.game.stage.addChild(GameController.JoypadLeft),GameController.JoypadRight=new MovieClip("cmcJoypadRight"),GameController.JoypadRight.x=this.game.width-120,GameController.JoypadRight.y=Constants.HEIGHT-55,this.game.stage.addChild(GameController.JoypadRight),GameController.AdjustJoypad()),GameController.Touch()&&(GameController.JoypadLeft.visible=!0,GameController.JoypadRight.visible=!0,this.changeControls())),this.frUpdate%3!=0)if(this._paused)this.topPanel._lastTime=this.game.time.totalElapsedSeconds();else{if(this.topPanel.tick(),GameController.Touch()&&this.curHero){this.controlsPointer.x=this.curHero.view.x,this.controlsPointer.y=this.curHero.view.y;for(var e=!1,t=!1,i=!1,n=!1,r=!1,o=!1,a=0;a<2;a++){var s=this.game.input.pointers[a],p=null;s.isDown&&(p=this.closerBut(s,p,GameController.JoypadLeft.getChild("left")),p=this.closerBut(s,p,GameController.JoypadLeft.getChild("right")),p=this.closerBut(s,p,GameController.JoypadRight.getChild("up")),p=this.closerBut(s,p,GameController.JoypadRight.getChild("down")),GameController.JoypadRight.getChild("grab").visible&&(p=this.closerBut(s,p,GameController.JoypadRight.getChild("grab"))),p=this.closerBut(s,p,GameController.JoypadRight.getChild("change"))),p&&this.butDistSquared(s,p)<4e4&&("left"==p.name?e=!0:"right"==p.name?t=!0:"up"==p.name?i=!0:"down"==p.name?n=!0:"grab"==p.name?r=!0:"change"==p.name&&(o=!0))}var l=Constants.hustlerInputChannel;this.curHero==Constants.dog&&(l=Constants.dogInputChannel),Constants._ce.input.setDoing(l,"left",e),Constants._ce.input.setDoing(l,"right",t),Constants._ce.input.setDoing(l,"jump",i),Constants._ce.input.setDoing(l,"down",n),Constants._ce.input.setDoing(l,"grabDown",n),Constants._ce.input.setDoing(l,"grab",r),Constants._ce.input.setDoing(0,"change",o),Constants._ce.input.channels[0].change==Constants.frame&&this.changeControls()}if(Constants.frame++,this.stateUpdate(this.game.time.elapsed),!this._isStarting&&Constants._ce.playing&&!this.isFinishing){Constants.DEBUG&&(Input.getInstance().justDid("nextLevel")?(Constants.currentLevel<21?Constants.currentLevel++:Constants.currentLevel=1,Constants.stateSwitcher.directToPlay()):Input.getInstance().justDid("previousLevel")&&(1<Constants.currentLevel?Constants.currentLevel--:Constants.currentLevel=Constants.maxLevel,Constants.stateSwitcher.directToPlay())),Input.getInstance().justDid("restart")&&this.ozRestartLevel();var h=!0;for(a=0;a<this.prisoners.length;a++)this.prisoners[a].isDisabled||(h=!1);h&&this.completeLevel()}}},e.prototype.shutdown=function(){u.prototype.shutdown.call(this);for(var e=this._objects.length,t=0;t<e;++t){var i=this._objects[t];i.view&&(i.removeArt(),i.destroy())}Fabrique.PauseHandler.getInstance().onPauseCallback.remove(this.onBlurPause,this)},e}(r.OzState);r.LevelState=e}(states||(states={}));var MoneyMovers3,LevelState=states.LevelState,Constants=function(){function e(){}return e.sponsor=function(){var e=PhaserGameHelper.getInstance().game;ExternalLink.Utils.openCampaignLink(e,"money-movers-3","logo")},e.walkthrough=function(){OzUtil.GetURL("https://www.agame.com/game/money-movers-3#walkthrough")},e.applyMovieClipData=function(){},e.getSpriteSheetName=function(e){return e&&null!==e?e:"Objects"},e.getLayoutData=function(e){return e&&null!==e?e:ObjectsLayouts.data},e.getLayout=function(e,t){return OzUtil.PE(e,null,"name",t)},e.WIDTH=700,e.HEIGHT=525,e.GAME_KEY="e44bd05f9bbef23699aeaf758160f8ca",e.SECRET_KEY="09002c611b4cdbd0b94bc15977753cf5480e785e",e.GOOGLE_ID="UA-78960661-15",e.GOOGLE_APP_NAME="Money Movers 3",e.GAMEDISTRIBUTION_ID="db770064d7cd45a798b096d4397a0870",e.GAMEDISTRIBUTION_USER="ABD36C6C-E74B-4BA7-BE87-0AB01F98D30D-s1",e.WIDTH_HALF=350,e.HEIGHT_HALF=262.5,e.TILE_SIZE=35,e.NUMLEVELS=21,e.DEBUG=!1,e.RotateDevice=null,e.dogInputChannel=11,e.bouncerInputChannel=11,e.hustlerInputChannel=12,e.frame=0,e}();!function(e){var t=function(e){function t(){var t=e.call(this,{enableDebug:!1,width:Constants.WIDTH,height:Constants.HEIGHT,renderer:Phaser.AUTO,parent:"content",transparent:!0,antialias:!0,preserveDrawingBuffer:!1,physicsConfig:null,seed:"",state:null,forceSetTimeOut:!1})||this;return t.clearBeforeRender=!1,Phaser.Device.whenReady(function(){var e=t.device.desktop?"click":"touchstart";document.getElementById("content").addEventListener(e,function(e){t.gameResumed(e)})}),h5branding.Branding.analyticsEnabled=!0,h5branding.SplashLoader.getInstance({gameId:"db770064d7cd45a798b096d4397a0870",gameTitle:Constants.GOOGLE_APP_NAME,gameName:Constants.GOOGLE_APP_NAME,libs:[],version:version,barColor:""}).create().then(function(){Fabrique.RayGun.getInstance(),t.state.add("game",{create:t.stateCreator.bind(t),preload:t.statePreloader.bind(t)},!0)}),t}return __extends(t,e),t.prototype.statePreloader=function(){var t=this;libs.forEach(function(e){t.load.script(e,e)})},t.prototype.stateCreator=function(){this.plugins.add(PhaserSuperStorage.StoragePlugin),this.plugins.add(PhaserCachebuster.CacheBuster),this.plugins.add(PhaserSpine.SpinePlugin),PhaserGameHelper.getInstance().init(this),this.state.add("Boot",states.Boot),this.state.add("MainMenu",states.MainMenuState),this.state.add("LevelSelect",states.LevelSelectState),this.state.add("Level",states.LevelState),this.state.add("Animation",states.AnimationState);this.state.start("Boot"),this.state.remove("game")},t.prototype.recursiveUpdateText=function(e){var t=this;e instanceof Phaser.Text&&(e.dirty=!0),e.children&&0<e.children.length&&e.children.forEach(function(e){t.recursiveUpdateText(e)})},t}(Phaser.Game);e.Game=t}(MoneyMovers3||(MoneyMovers3={}));var Fabrique,Levels=function(){function e(){}return e.data=[{"@level":"1","@version":"1.0","@orientation":"orthogonal","@renderorder":"right-down","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35","@nextobjectid":"118",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35","@tilecount":"16",tile:[{"@id":"0",image:{"@width":"35","@height":"35","@source":"tiles/singleTile.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"tiles/platformLeft.png"}},{"@id":"2",image:{"@width":"35","@height":"35","@source":"tiles/platformCenter.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"tiles/platformRight.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformTop.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformCenter.png"}},{"@id":"6",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformBottom.png"}},{"@id":"7",image:{"@width":"35","@height":"35","@source":"tiles/tileTopLeft.png"}},{"@id":"8",image:{"@width":"35","@height":"35","@source":"tiles/tileTopCenter.png"}},{"@id":"9",image:{"@width":"35","@height":"35","@source":"tiles/tileTopRight.png"}},{"@id":"10",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterLeft.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"tiles/tileCenter.png"}},{"@id":"12",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterRight.png"}},{"@id":"13",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomLeft.png"}},{"@id":"14",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomCenter.png"}},{"@id":"15",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"70","@tilecount":"14",tile:[{"@id":"0",image:{"@width":"24","@height":"11","@source":"active/PushButtonGraphics.png"}},{"@id":"1",image:{"@width":"25","@height":"19","@source":"active/TriggerGraphics.png"}},{"@id":"2",image:{"@width":"20","@height":"70","@source":"active/DoorGraphics.png"}},{"@id":"3",image:{"@width":"20","@height":"70","@source":"active/GlassDoorGraphics.png"}},{"@id":"4",image:{"@width":"70","@height":"19","@source":"active/ElevatorGraphics.png"}},{"@id":"5",image:{"@width":"105","@height":"20","@source":"active/BigElevatorGraphics.png"}},{"@id":"6",image:{"@width":"70","@height":"70","@source":"active/ExitGraphics.png"}},{"@id":"7",image:{"@width":"44","@height":"52","@source":"characters/HustlerGraphics.png"}},{"@id":"8",image:{"@width":"32","@height":"22","@source":"active/CameraGraphics.png"}},{"@id":"9",image:{"@width":"15","@height":"15","@source":"characters/EnemyLimiterGraphics.png"}},{"@id":"10",image:{"@width":"31","@height":"34","@source":"passive/MoneyBagGraphics.png"}},{"@id":"11",image:{"@width":"63","@height":"50","@source":"characters/DogGraphics.png"}},{"@id":"12",image:{"@width":"60","@height":"55","@source":"characters/Prisoner2Graphics.png"}},{"@id":"13",image:{"@width":"60","@height":"56","@source":"characters/PrisonerGraphics.png"}}]},{"@firstgid":"31","@name":"passive","@tilewidth":"210","@tileheight":"50","@tilecount":"12",tile:[{"@id":"0",image:{"@width":"50","@height":"50","@source":"passive/BigBoxGraphics.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"passive/BoxGraphics.png"}},{"@id":"2",image:{"@width":"37","@height":"35","@source":"passive/ToiletGraphics.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"passive/MonitorGraphics.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"passive/BasketBallGraphics.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"passive/StoolGraphics.png"}},{"@id":"6",image:{"@width":"150","@height":"20","@source":"passive/PlankGraphics.png"}},{"@id":"7",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"8",image:{"@width":"210","@height":"20","@source":"passive/BigPlankGraphics.png"}},{"@id":"9",image:{"@width":"100","@height":"20","@source":"passive/Plank5Graphics.png"}},{"@id":"10",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"passive/MirrorGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"136","@tilecount":"48",tile:[{"@id":"0",image:{"@width":"232","@height":"79","@source":"decor/LevelTextGraphics.png"}},{"@id":"1",image:{"@width":"54","@height":"20","@source":"decor/Decor1Graphics.png"}},{"@id":"2",image:{"@width":"54","@height":"20","@source":"decor/Decor2Graphics.png"}},{"@id":"3",image:{"@width":"33","@height":"27","@source":"decor/Decor3Graphics.png"}},{"@id":"4",image:{"@width":"34","@height":"25","@source":"decor/Decor4Graphics.png"}},{"@id":"5",image:{"@width":"22","@height":"31","@source":"decor/Decor5Graphics.png"}},{"@id":"6",image:{"@width":"126","@height":"59","@source":"decor/Decor6Graphics.png"}},{"@id":"7",image:{"@width":"25","@height":"21","@source":"decor/Decor8Graphics.png"}},{"@id":"8",image:{"@width":"18","@height":"22","@source":"decor/Decor9Graphics.png"}},{"@id":"9",image:{"@width":"35","@height":"58","@source":"decor/Decor10Graphics.png"}},{"@id":"10",image:{"@width":"19","@height":"66","@source":"decor/Decor11Graphics.png"}},{"@id":"11",image:{"@width":"23","@height":"33","@source":"decor/Decor12Graphics.png"}},{"@id":"12",image:{"@width":"38","@height":"26","@source":"decor/Decor13Graphics.png"}},{"@id":"13",image:{"@width":"43","@height":"78","@source":"decor/Decor14Graphics.png"}},{"@id":"14",image:{"@width":"60","@height":"86","@source":"decor/Decor15Graphics.png"}},{"@id":"15",image:{"@width":"41","@height":"69","@source":"decor/Decor16Graphics.png"}},{"@id":"16",image:{"@width":"55","@height":"58","@source":"decor/Decor17Graphics.png"}},{"@id":"17",image:{"@width":"57","@height":"54","@source":"decor/Decor18Graphics.png"}},{"@id":"18",image:{"@width":"18","@height":"45","@source":"decor/Decor19Graphics.png"}},{"@id":"19",image:{"@width":"41","@height":"49","@source":"decor/Decor20Graphics.png"}},{"@id":"20",image:{"@width":"51","@height":"38","@source":"decor/Decor21Graphics.png"}},{"@id":"21",image:{"@width":"54","@height":"54","@source":"decor/Decor22Graphics.png"}},{"@id":"22",image:{"@width":"63","@height":"136","@source":"decor/Decor23Graphics.png"}},{"@id":"23",image:{"@width":"21","@height":"39","@source":"decor/Decor24Graphics.png"}},{"@id":"24",image:{"@width":"104","@height":"50","@source":"decor/Decor25Graphics.png"}},{"@id":"25",image:{"@width":"104","@height":"46","@source":"decor/Decor26Graphics.png"}},{"@id":"26",image:{"@width":"86","@height":"38","@source":"decor/Decor27Graphics.png"}},{"@id":"27",image:{"@width":"63","@height":"55","@source":"decor/Decor28Graphics.png"}},{"@id":"28",image:{"@width":"13","@height":"23","@source":"decor/Decor29Graphics.png"}},{"@id":"29",image:{"@width":"28","@height":"40","@source":"decor/Decor30Graphics.png"}},{"@id":"30",image:{"@width":"69","@height":"30","@source":"decor/Decor31Graphics.png"}},{"@id":"31",image:{"@width":"33","@height":"29","@source":"decor/Decor32Graphics.png"}},{"@id":"32",image:{"@width":"42","@height":"42","@source":"decor/Decor33Graphics.png"}},{"@id":"33",image:{"@width":"60","@height":"66","@source":"decor/Decor34Graphics.png"}},{"@id":"34",image:{"@width":"46","@height":"65","@source":"decor/Decor35Graphics.png"}},{"@id":"35",image:{"@width":"71","@height":"55","@source":"decor/Decor36Graphics.png"}},{"@id":"36",image:{"@width":"35","@height":"55","@source":"decor/Decor37Graphics.png"}},{"@id":"37",image:{"@width":"28","@height":"29","@source":"decor/Decor38Graphics.png"}},{"@id":"38",image:{"@width":"38","@height":"37","@source":"decor/Decor39Graphics.png"}},{"@id":"39",image:{"@width":"103","@height":"50","@source":"decor/Decor40Graphics.png"}},{"@id":"40",image:{"@width":"56","@height":"55","@source":"decor/Decor41Graphics.png"}},{"@id":"41",image:{"@width":"71","@height":"50","@source":"decor/Decor42Graphics.png"}},{"@id":"42",image:{"@width":"200","@height":"44","@source":"decor/TxtGraphics.png"}},{"@id":"43",image:{"@width":"97","@height":"69","@source":"decor/Tip1Graphics.png"}},{"@id":"44",image:{"@width":"97","@height":"69","@source":"decor/Tip2Graphics.png"}},{"@id":"45",image:{"@width":"97","@height":"69","@source":"decor/Tip3Graphics.png"}},{"@id":"46",image:{"@width":"97","@height":"69","@source":"decor/Tip4Graphics.png"}},{"@id":"47",image:{"@width":"78","@height":"96","@source":"decor/Tip5Graphics.png"}}]}],imagelayer:{"@name":"background",image:{"@source":"bg/Background1Graphics.png"}},objectgroup:[{"@name":"decorations",object:[{"@id":"1","@gid":"43","@x":"245","@y":"146","@width":"232","@height":"79",properties:{property:{"@name":"text","@value":"Go go go!"}}},{"@id":"114","@gid":"86","@x":"184","@y":"182","@width":"97","@height":"69"},{"@id":"115","@gid":"87","@x":"472","@y":"149","@width":"97","@height":"69"},{"@id":"116","@gid":"88","@x":"147","@y":"488","@width":"97","@height":"69"},{"@id":"117","@gid":"89","@x":"249","@y":"488","@width":"97","@height":"69"}]},{"@name":"tiles",object:[{"@id":"2","@gid":"12","@x":"0","@y":"525","@width":"35","@height":"35"},{"@id":"3","@gid":"12","@x":"35","@y":"525","@width":"35","@height":"35"},{"@id":"4","@gid":"9","@x":"595","@y":"525","@width":"35","@height":"35"},{"@id":"5","@gid":"9","@x":"560","@y":"525","@width":"35","@height":"35"},{"@id":"6","@gid":"9","@x":"490","@y":"525","@width":"35","@height":"35"},{"@id":"7","@gid":"9","@x":"525","@y":"525","@width":"35","@height":"35"},{"@id":"8","@gid":"9","@x":"280","@y":"525","@width":"35","@height":"35"},{"@id":"9","@gid":"9","@x":"350","@y":"525","@width":"35","@height":"35"},{"@id":"10","@gid":"9","@x":"315","@y":"525","@width":"35","@height":"35"},{"@id":"11","@gid":"9","@x":"70","@y":"525","@width":"35","@height":"35"},{"@id":"12","@gid":"9","@x":"175","@y":"525","@width":"35","@height":"35"},{"@id":"13","@gid":"9","@x":"140","@y":"525","@width":"35","@height":"35"},{"@id":"14","@gid":"9","@x":"105","@y":"525","@width":"35","@height":"35"},{"@id":"15","@gid":"9","@x":"210","@y":"525","@width":"35","@height":"35"},{"@id":"16","@gid":"12","@x":"665","@y":"525","@width":"35","@height":"35"},{"@id":"17","@gid":"12","@x":"0","@y":"490","@width":"35","@height":"35"},{"@id":"18","@gid":"9","@x":"455","@y":"525","@width":"35","@height":"35"},{"@id":"19","@gid":"9","@x":"420","@y":"525","@width":"35","@height":"35"},{"@id":"20","@gid":"9","@x":"385","@y":"525","@width":"35","@height":"35"},{"@id":"21","@gid":"9","@x":"630","@y":"525","@width":"35","@height":"35"},{"@id":"22","@gid":"9","@x":"245","@y":"525","@width":"35","@height":"35"},{"@id":"23","@gid":"13","@x":"35","@y":"490","@width":"35","@height":"35"},{"@id":"24","@gid":"9","@x":"105","@y":"385","@width":"35","@height":"35"},{"@id":"25","@gid":"10","@x":"140","@y":"385","@width":"35","@height":"35"},{"@id":"26","@gid":"15","@x":"140","@y":"420","@width":"35","@height":"35"},{"@id":"27","@gid":"3","@x":"175","@y":"420","@width":"35","@height":"35"},{"@id":"28","@gid":"3","@x":"210","@y":"420","@width":"35","@height":"35"},{"@id":"29","@gid":"3","@x":"245","@y":"420","@width":"35","@height":"35"},{"@id":"30","@gid":"3","@x":"280","@y":"420","@width":"35","@height":"35"},{"@id":"31","@gid":"3","@x":"315","@y":"420","@width":"35","@height":"35"},{"@id":"32","@gid":"9","@x":"350","@y":"420","@width":"35","@height":"35"},{"@id":"33","@gid":"10","@x":"385","@y":"420","@width":"35","@height":"35"},{"@id":"34","@gid":"14","@x":"350","@y":"455","@width":"35","@height":"35"},{"@id":"35","@gid":"15","@x":"385","@y":"455","@width":"35","@height":"35"},{"@id":"36","@gid":"3","@x":"420","@y":"455","@width":"35","@height":"35"},{"@id":"37","@gid":"3","@x":"455","@y":"455","@width":"35","@height":"35"},{"@id":"38","@gid":"3","@x":"490","@y":"455","@width":"35","@height":"35"},{"@id":"39","@gid":"3","@x":"560","@y":"420","@width":"35","@height":"35"},{"@id":"40","@gid":"11","@x":"665","@y":"490","@width":"35","@height":"35"},{"@id":"41","@gid":"11","@x":"665","@y":"455","@width":"35","@height":"35"},{"@id":"42","@gid":"11","@x":"665","@y":"420","@width":"35","@height":"35"},{"@id":"43","@gid":"11","@x":"665","@y":"385","@width":"35","@height":"35"},{"@id":"44","@gid":"9","@x":"665","@y":"350","@width":"35","@height":"35"},{"@id":"45","@gid":"3","@x":"630","@y":"350","@width":"35","@height":"35"},{"@id":"46","@gid":"3","@x":"560","@y":"245","@width":"35","@height":"35"},{"@id":"47","@gid":"3","@x":"525","@y":"245","@width":"35","@height":"35"},{"@id":"48","@gid":"3","@x":"490","@y":"245","@width":"35","@height":"35"},{"@id":"49","@gid":"3","@x":"455","@y":"245","@width":"35","@height":"35"},{"@id":"50","@gid":"16","@x":"420","@y":"280","@width":"35","@height":"35"},{"@id":"51","@gid":"3","@x":"350","@y":"280","@width":"35","@height":"35"},{"@id":"52","@gid":"9","@x":"315","@y":"280","@width":"35","@height":"35"},{"@id":"53","@gid":"3","@x":"175","@y":"280","@width":"35","@height":"35"},{"@id":"54","@gid":"3","@x":"210","@y":"280","@width":"35","@height":"35"},{"@id":"55","@gid":"3","@x":"245","@y":"280","@width":"35","@height":"35"},{"@id":"56","@gid":"3","@x":"280","@y":"280","@width":"35","@height":"35"},{"@id":"57","@gid":"8","@x":"105","@y":"280","@width":"35","@height":"35"},{"@id":"58","@gid":"7","@x":"105","@y":"315","@width":"35","@height":"35"},{"@id":"59","@gid":"84","@x":"280","@y":"245","@width":"71","@height":"50"},{"@id":"60","@gid":"79","@x":"576","@y":"483","@width":"35","@height":"55"},{"@id":"61","@gid":"83","@x":"35","@y":"210","@width":"56","@height":"55"},{"@id":"62","@gid":"81","@x":"455","@y":"350","@width":"38","@height":"37"},{"@id":"63","@gid":"62","@x":"490","@y":"315","@width":"41","@height":"49"},{"@id":"64","@gid":"7","@x":"315","@y":"315","@width":"35","@height":"35"},{"@id":"65","@gid":"2","@x":"595","@y":"350","@width":"35","@height":"35"},{"@id":"66","@gid":"4","@x":"595","@y":"420","@width":"35","@height":"35"},{"@id":"67","@gid":"16","@x":"525","@y":"455","@width":"35","@height":"35"},{"@id":"68","@gid":"8","@x":"525","@y":"420","@width":"35","@height":"35"},{"@id":"69","@gid":"4","@x":"595","@y":"245","@width":"35","@height":"35"},{"@id":"70","@gid":"15","@x":"385","@y":"280","@width":"35","@height":"35"},{"@id":"71","@gid":"11","@x":"385","@y":"245","@width":"35","@height":"35"},{"@id":"72","@gid":"6","@x":"385","@y":"210","@width":"35","@height":"35"},{"@id":"73","@gid":"5","@x":"385","@y":"175","@width":"35","@height":"35"},{"@id":"74","@gid":"9","@x":"420","@y":"245","@width":"35","@height":"35"},{"@id":"75","@gid":"7","@x":"105","@y":"175","@width":"35","@height":"35"},{"@id":"76","@gid":"10","@x":"105","@y":"140","@width":"35","@height":"35"},{"@id":"77","@gid":"3","@x":"70","@y":"140","@width":"35","@height":"35"},{"@id":"78","@gid":"3","@x":"35","@y":"140","@width":"35","@height":"35"},{"@id":"79","@gid":"3","@x":"0","@y":"140","@width":"35","@height":"35"},{"@id":"80","@gid":"9","@x":"35","@y":"455","@width":"35","@height":"35"},{"@id":"81","@gid":"16","@x":"105","@y":"455","@width":"35","@height":"35"},{"@id":"82","@gid":"11","@x":"70","@y":"420","@width":"35","@height":"35"},{"@id":"83","@gid":"3","@x":"140","@y":"280","@width":"35","@height":"35"},{"@id":"84","@gid":"9","@x":"0","@y":"455","@width":"35","@height":"35"},{"@id":"85","@gid":"8","@x":"70","@y":"385","@width":"35","@height":"35"},{"@id":"86","@gid":"12","@x":"105","@y":"420","@width":"35","@height":"35"},{"@id":"87","@gid":"15","@x":"70","@y":"455","@width":"35","@height":"35"}]},{"@name":"active",object:[{"@id":"88","@gid":"30","@x":"222","@y":"386","@width":"60","@height":"56"},{"@id":"89","@gid":"20","@x":"323","@y":"386","@width":"20","@height":"70"},{"@id":"90","@type":"3","@gid":"19","@x":"133","@y":"175","@width":"20","@height":"70","@rotation":"180"},{"@id":"91","@gid":"17","@x":"23","@y":"421","@width":"24","@height":"11"},{"@id":"92","@type":"3","@gid":"17","@x":"455","@y":"420","@width":"24","@height":"11"},{"@id":"93","@gid":"27","@x":"318","@y":"178","@width":"31","@height":"34"},{"@id":"94","@gid":"27","@x":"652","@y":"265","@width":"31","@height":"34"},{"@id":"95","@gid":"27","@x":"35","@y":"280","@width":"31","@height":"34"}]},{"@name":"characters",object:[{"@id":"96","@gid":"24","@x":"210","@y":"245","@width":"44","@height":"52"},{"@id":"97","@gid":"28","@x":"490","@y":"210","@width":"63","@height":"50"}]},{"@name":"physics","@visible":"0",object:[{"@id":"98","@x":"0","@y":"420","@width":"70","@height":"105"},{"@id":"99","@x":"70","@y":"385","@width":"70","@height":"70"},{"@id":"100","@x":"70","@y":"490","@width":"630","@height":"35"},{"@id":"101","@x":"70","@y":"350","@width":"105","@height":"35"},{"@id":"102","@x":"140","@y":"385","@width":"280","@height":"35"},{"@id":"103","@x":"350","@y":"420","@width":"210","@height":"35"},{"@id":"104","@x":"525","@y":"385","@width":"105","@height":"35"},{"@id":"105","@x":"105","@y":"245","@width":"350","@height":"35"},{"@id":"106","@x":"0","@y":"105","@width":"105","@height":"35"},{"@id":"107","@x":"385","@y":"140","@width":"35","@height":"105"},{"@id":"108","@x":"595","@y":"315","@width":"70","@height":"35"},{"@id":"109","@x":"665","@y":"315","@width":"35","@height":"175"},{"@id":"110","@x":"105","@y":"280","@width":"35","@height":"35"},{"@id":"111","@x":"315","@y":"280","@width":"35","@height":"35"},{"@id":"112","@x":"105","@y":"105","@width":"35","@height":"70"},{"@id":"113","@x":"420","@y":"210","@width":"210","@height":"35"}]}]},{"@level":"2","@version":"1.0","@orientation":"orthogonal","@renderorder":"right-down","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35","@nextobjectid":"129",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35","@tilecount":"16",tile:[{"@id":"0",image:{"@width":"35","@height":"35","@source":"tiles/singleTile.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"tiles/platformLeft.png"}},{"@id":"2",image:{"@width":"35","@height":"35","@source":"tiles/platformCenter.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"tiles/platformRight.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformTop.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformCenter.png"}},{"@id":"6",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformBottom.png"}},{"@id":"7",image:{"@width":"35","@height":"35","@source":"tiles/tileTopLeft.png"}},{"@id":"8",image:{"@width":"35","@height":"35","@source":"tiles/tileTopCenter.png"}},{"@id":"9",image:{"@width":"35","@height":"35","@source":"tiles/tileTopRight.png"}},{"@id":"10",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterLeft.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"tiles/tileCenter.png"}},{"@id":"12",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterRight.png"}},{"@id":"13",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomLeft.png"}},{"@id":"14",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomCenter.png"}},{"@id":"15",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"70","@tilecount":"14",tile:[{"@id":"0",image:{"@width":"24","@height":"11","@source":"active/PushButtonGraphics.png"}},{"@id":"1",image:{"@width":"25","@height":"19","@source":"active/TriggerGraphics.png"}},{"@id":"2",image:{"@width":"20","@height":"70","@source":"active/DoorGraphics.png"}},{"@id":"3",image:{"@width":"20","@height":"70","@source":"active/GlassDoorGraphics.png"}},{"@id":"4",image:{"@width":"70","@height":"19","@source":"active/ElevatorGraphics.png"}},{"@id":"5",image:{"@width":"105","@height":"20","@source":"active/BigElevatorGraphics.png"}},{"@id":"6",image:{"@width":"70","@height":"70","@source":"active/ExitGraphics.png"}},{"@id":"7",image:{"@width":"44","@height":"52","@source":"characters/HustlerGraphics.png"}},{"@id":"8",image:{"@width":"32","@height":"22","@source":"active/CameraGraphics.png"}},{"@id":"9",image:{"@width":"15","@height":"15","@source":"characters/EnemyLimiterGraphics.png"}},{"@id":"10",image:{"@width":"31","@height":"34","@source":"passive/MoneyBagGraphics.png"}},{"@id":"11",image:{"@width":"63","@height":"50","@source":"characters/DogGraphics.png"}},{"@id":"12",image:{"@width":"60","@height":"55","@source":"characters/Prisoner2Graphics.png"}},{"@id":"13",image:{"@width":"60","@height":"56","@source":"characters/PrisonerGraphics.png"}}]},{"@firstgid":"31","@name":"passive","@tilewidth":"210","@tileheight":"50","@tilecount":"12",tile:[{"@id":"0",image:{"@width":"50","@height":"50","@source":"passive/BigBoxGraphics.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"passive/BoxGraphics.png"}},{"@id":"2",image:{"@width":"37","@height":"35","@source":"passive/ToiletGraphics.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"passive/MonitorGraphics.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"passive/BasketBallGraphics.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"passive/StoolGraphics.png"}},{"@id":"6",image:{"@width":"150","@height":"20","@source":"passive/PlankGraphics.png"}},{"@id":"7",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"8",image:{"@width":"210","@height":"20","@source":"passive/BigPlankGraphics.png"}},{"@id":"9",image:{"@width":"100","@height":"20","@source":"passive/Plank5Graphics.png"}},{"@id":"10",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"passive/MirrorGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"136","@tilecount":"46",tile:[{"@id":"0",image:{"@width":"232","@height":"79","@source":"decor/LevelTextGraphics.png"}},{"@id":"1",image:{"@width":"54","@height":"20","@source":"decor/Decor1Graphics.png"}},{"@id":"2",image:{"@width":"54","@height":"20","@source":"decor/Decor2Graphics.png"}},{"@id":"3",image:{"@width":"33","@height":"27","@source":"decor/Decor3Graphics.png"}},{"@id":"4",image:{"@width":"34","@height":"25","@source":"decor/Decor4Graphics.png"}},{"@id":"5",image:{"@width":"22","@height":"31","@source":"decor/Decor5Graphics.png"}},{"@id":"6",image:{"@width":"126","@height":"59","@source":"decor/Decor6Graphics.png"}},{"@id":"7",image:{"@width":"25","@height":"21","@source":"decor/Decor8Graphics.png"}},{"@id":"8",image:{"@width":"18","@height":"22","@source":"decor/Decor9Graphics.png"}},{"@id":"9",image:{"@width":"35","@height":"58","@source":"decor/Decor10Graphics.png"}},{"@id":"10",image:{"@width":"19","@height":"66","@source":"decor/Decor11Graphics.png"}},{"@id":"11",image:{"@width":"23","@height":"33","@source":"decor/Decor12Graphics.png"}},{"@id":"12",image:{"@width":"38","@height":"26","@source":"decor/Decor13Graphics.png"}},{"@id":"13",image:{"@width":"43","@height":"78","@source":"decor/Decor14Graphics.png"}},{"@id":"14",image:{"@width":"60","@height":"86","@source":"decor/Decor15Graphics.png"}},{"@id":"15",image:{"@width":"41","@height":"69","@source":"decor/Decor16Graphics.png"}},{"@id":"16",image:{"@width":"55","@height":"58","@source":"decor/Decor17Graphics.png"}},{"@id":"17",image:{"@width":"57","@height":"54","@source":"decor/Decor18Graphics.png"}},{"@id":"18",image:{"@width":"18","@height":"45","@source":"decor/Decor19Graphics.png"}},{"@id":"19",image:{"@width":"41","@height":"49","@source":"decor/Decor20Graphics.png"}},{"@id":"20",image:{"@width":"51","@height":"38","@source":"decor/Decor21Graphics.png"}},{"@id":"21",image:{"@width":"54","@height":"54","@source":"decor/Decor22Graphics.png"}},{"@id":"22",image:{"@width":"63","@height":"136","@source":"decor/Decor23Graphics.png"}},{"@id":"23",image:{"@width":"21","@height":"39","@source":"decor/Decor24Graphics.png"}},{"@id":"24",image:{"@width":"104","@height":"50","@source":"decor/Decor25Graphics.png"}},{"@id":"25",image:{"@width":"104","@height":"46","@source":"decor/Decor26Graphics.png"}},{"@id":"26",image:{"@width":"86","@height":"38","@source":"decor/Decor27Graphics.png"}},{"@id":"27",image:{"@width":"63","@height":"55","@source":"decor/Decor28Graphics.png"}},{"@id":"28",image:{"@width":"13","@height":"23","@source":"decor/Decor29Graphics.png"}},{"@id":"29",image:{"@width":"28","@height":"40","@source":"decor/Decor30Graphics.png"}},{"@id":"30",image:{"@width":"69","@height":"30","@source":"decor/Decor31Graphics.png"}},{"@id":"31",image:{"@width":"33","@height":"29","@source":"decor/Decor32Graphics.png"}},{"@id":"32",image:{"@width":"42","@height":"42","@source":"decor/Decor33Graphics.png"}},{"@id":"33",image:{"@width":"60","@height":"66","@source":"decor/Decor34Graphics.png"}},{"@id":"34",image:{"@width":"46","@height":"65","@source":"decor/Decor35Graphics.png"}},{"@id":"35",image:{"@width":"71","@height":"55","@source":"decor/Decor36Graphics.png"}},{"@id":"36",image:{"@width":"35","@height":"55","@source":"decor/Decor37Graphics.png"}},{"@id":"37",image:{"@width":"28","@height":"29","@source":"decor/Decor38Graphics.png"}},{"@id":"38",image:{"@width":"38","@height":"37","@source":"decor/Decor39Graphics.png"}},{"@id":"39",image:{"@width":"103","@height":"50","@source":"decor/Decor40Graphics.png"}},{"@id":"40",image:{"@width":"56","@height":"55","@source":"decor/Decor41Graphics.png"}},{"@id":"41",image:{"@width":"71","@height":"50","@source":"decor/Decor42Graphics.png"}},{"@id":"42",image:{"@width":"200","@height":"44","@source":"decor/TxtGraphics.png"}},{"@id":"43",image:{"@width":"78","@height":"96","@source":"decor/Tip5Graphics.png"}},{"@id":"44",image:{"@width":"78","@height":"96","@source":"decor/Tip6Graphics.png"}},{"@id":"45",image:{"@width":"97","@height":"69","@source":"decor/Tip7Graphics.png"}}]}],imagelayer:{"@name":"background","@y":"1",image:{"@source":"bg/Background1Graphics.png"}},objectgroup:[{"@name":"decorations",object:[{"@id":"1","@gid":"43","@x":"199","@y":"369","@width":"232","@height":"79",properties:{property:{"@name":"text","@value":"Mutual help"}}},{"@id":"2","@gid":"44","@x":"535","@y":"264","@width":"54","@height":"20"},{"@id":"3","@gid":"46","@x":"455","@y":"210","@width":"33","@height":"27"},{"@id":"5","@gid":"75","@x":"446","@y":"182","@width":"42","@height":"42"},{"@id":"6","@gid":"65","@x":"55","@y":"350","@width":"63","@height":"136"},{"@id":"127","@gid":"87","@x":"49","@y":"162","@width":"78","@height":"96"},{"@id":"128","@gid":"86","@x":"574","@y":"375","@width":"78","@height":"96"}]},{"@name":"tiles",object:[{"@id":"7","@gid":"12","@x":"385","@y":"245","@width":"35","@height":"35"},{"@id":"8","@gid":"12","@x":"665","@y":"525","@width":"35","@height":"35"},{"@id":"9","@gid":"12","@x":"350","@y":"245","@width":"35","@height":"35"},{"@id":"10","@gid":"12","@x":"-132","@y":"-197","@width":"35","@height":"35"},{"@id":"11","@gid":"12","@x":"630","@y":"525","@width":"35","@height":"35"},{"@id":"12","@gid":"12","@x":"-97","@y":"-197","@width":"35","@height":"35"},{"@id":"13","@gid":"12","@x":"-62","@y":"-197","@width":"35","@height":"35"},{"@id":"14","@gid":"12","@x":"665","@y":"455","@width":"35","@height":"35"},{"@id":"15","@gid":"12","@x":"595","@y":"525","@width":"35","@height":"35"},{"@id":"16","@gid":"12","@x":"665","@y":"420","@width":"35","@height":"35"},{"@id":"17","@gid":"12","@x":"630","@y":"490","@width":"35","@height":"35"},{"@id":"18","@gid":"12","@x":"0","@y":"525","@width":"35","@height":"35"},{"@id":"19","@gid":"12","@x":"665","@y":"490","@width":"35","@height":"35"},{"@id":"20","@gid":"12","@x":"630","@y":"455","@width":"35","@height":"35"},{"@id":"21","@gid":"12","@x":"210","@y":"525","@width":"35","@height":"35"},{"@id":"22","@gid":"12","@x":"140","@y":"525","@width":"35","@height":"35"},{"@id":"23","@gid":"12","@x":"175","@y":"525","@width":"35","@height":"35"},{"@id":"24","@gid":"12","@x":"245","@y":"525","@width":"35","@height":"35"},{"@id":"25","@gid":"3","@x":"280","@y":"385","@width":"35","@height":"35"},{"@id":"26","@gid":"4","@x":"490","@y":"385","@width":"35","@height":"35"},{"@id":"27","@gid":"3","@x":"455","@y":"385","@width":"35","@height":"35"},{"@id":"28","@gid":"5","@x":"420","@y":"350","@width":"35","@height":"35"},{"@id":"29","@gid":"3","@x":"245","@y":"385","@width":"35","@height":"35"},{"@id":"30","@gid":"3","@x":"210","@y":"385","@width":"35","@height":"35"},{"@id":"31","@gid":"10","@x":"175","@y":"350","@width":"35","@height":"35"},{"@id":"32","@gid":"14","@x":"140","@y":"385","@width":"35","@height":"35"},{"@id":"33","@gid":"15","@x":"175","@y":"385","@width":"35","@height":"35"},{"@id":"34","@gid":"10","@x":"245","@y":"490","@width":"35","@height":"35"},{"@id":"35","@gid":"8","@x":"140","@y":"490","@width":"35","@height":"35"},{"@id":"36","@gid":"9","@x":"175","@y":"490","@width":"35","@height":"35"},{"@id":"37","@gid":"9","@x":"210","@y":"490","@width":"35","@height":"35"},{"@id":"38","@gid":"9","@x":"315","@y":"525","@width":"35","@height":"35"},{"@id":"39","@gid":"9","@x":"280","@y":"525","@width":"35","@height":"35"},{"@id":"40","@gid":"9","@x":"385","@y":"525","@width":"35","@height":"35"},{"@id":"41","@gid":"9","@x":"350","@y":"525","@width":"35","@height":"35"},{"@id":"42","@gid":"9","@x":"455","@y":"525","@width":"35","@height":"35"},{"@id":"43","@gid":"9","@x":"420","@y":"525","@width":"35","@height":"35"},{"@id":"44","@gid":"9","@x":"525","@y":"525","@width":"35","@height":"35"},{"@id":"45","@gid":"9","@x":"490","@y":"525","@width":"35","@height":"35"},{"@id":"46","@gid":"9","@x":"560","@y":"525","@width":"35","@height":"35"},{"@id":"47","@gid":"9","@x":"35","@y":"525","@width":"35","@height":"35"},{"@id":"48","@gid":"9","@x":"70","@y":"525","@width":"35","@height":"35"},{"@id":"49","@gid":"9","@x":"105","@y":"525","@width":"35","@height":"35"},{"@id":"50","@gid":"13","@x":"0","@y":"490","@width":"35","@height":"35"},{"@id":"51","@gid":"13","@x":"0","@y":"455","@width":"35","@height":"35"},{"@id":"52","@gid":"13","@x":"0","@y":"420","@width":"35","@height":"35"},{"@id":"53","@gid":"13","@x":"0","@y":"385","@width":"35","@height":"35"},{"@id":"54","@gid":"13","@x":"0","@y":"350","@width":"35","@height":"35"},{"@id":"55","@gid":"13","@x":"0","@y":"315","@width":"35","@height":"35"},{"@id":"56","@gid":"13","@x":"0","@y":"280","@width":"35","@height":"35"},{"@id":"57","@gid":"13","@x":"0","@y":"245","@width":"35","@height":"35"},{"@id":"58","@gid":"10","@x":"0","@y":"210","@width":"35","@height":"35"},{"@id":"59","@gid":"11","@x":"665","@y":"385","@width":"35","@height":"35"},{"@id":"60","@gid":"11","@x":"665","@y":"350","@width":"35","@height":"35"},{"@id":"61","@gid":"11","@x":"665","@y":"315","@width":"35","@height":"35"},{"@id":"62","@gid":"11","@x":"665","@y":"280","@width":"35","@height":"35"},{"@id":"63","@gid":"8","@x":"595","@y":"420","@width":"35","@height":"35"},{"@id":"64","@gid":"9","@x":"630","@y":"420","@width":"35","@height":"35"},{"@id":"65","@gid":"11","@x":"595","@y":"490","@width":"35","@height":"35"},{"@id":"66","@gid":"11","@x":"595","@y":"455","@width":"35","@height":"35"},{"@id":"67","@gid":"3","@x":"525","@y":"245","@width":"35","@height":"35"},{"@id":"68","@gid":"3","@x":"490","@y":"245","@width":"35","@height":"35"},{"@id":"69","@gid":"3","@x":"455","@y":"245","@width":"35","@height":"35"},{"@id":"70","@gid":"3","@x":"630","@y":"245","@width":"35","@height":"35"},{"@id":"71","@gid":"3","@x":"595","@y":"245","@width":"35","@height":"35"},{"@id":"72","@gid":"3","@x":"560","@y":"245","@width":"35","@height":"35"},{"@id":"73","@gid":"9","@x":"665","@y":"245","@width":"35","@height":"35"},{"@id":"74","@gid":"10","@x":"385","@y":"210","@width":"35","@height":"35"},{"@id":"75","@gid":"9","@x":"350","@y":"210","@width":"35","@height":"35"},{"@id":"76","@gid":"8","@x":"315","@y":"210","@width":"35","@height":"35"},{"@id":"77","@gid":"11","@x":"315","@y":"245","@width":"35","@height":"35"},{"@id":"78","@gid":"3","@x":"280","@y":"280","@width":"35","@height":"35"},{"@id":"79","@gid":"3","@x":"245","@y":"280","@width":"35","@height":"35"},{"@id":"80","@gid":"2","@x":"210","@y":"280","@width":"35","@height":"35"},{"@id":"81","@gid":"15","@x":"315","@y":"280","@width":"35","@height":"35"},{"@id":"82","@gid":"15","@x":"350","@y":"280","@width":"35","@height":"35"},{"@id":"83","@gid":"16","@x":"385","@y":"280","@width":"35","@height":"35"},{"@id":"84","@gid":"16","@x":"245","@y":"210","@width":"35","@height":"35"},{"@id":"85","@gid":"15","@x":"210","@y":"210","@width":"35","@height":"35"},{"@id":"86","@gid":"3","@x":"175","@y":"210","@width":"35","@height":"35"},{"@id":"87","@gid":"11","@x":"210","@y":"175","@width":"35","@height":"35"},{"@id":"88","@gid":"8","@x":"210","@y":"140","@width":"35","@height":"35"},{"@id":"89","@gid":"13","@x":"245","@y":"175","@width":"35","@height":"35"},{"@id":"90","@gid":"10","@x":"245","@y":"140","@width":"35","@height":"35"},{"@id":"91","@gid":"3","@x":"315","@y":"385","@width":"35","@height":"35"},{"@id":"92","@gid":"3","@x":"350","@y":"385","@width":"35","@height":"35"},{"@id":"93","@gid":"3","@x":"385","@y":"385","@width":"35","@height":"35"},{"@id":"94","@gid":"15","@x":"420","@y":"385","@width":"35","@height":"35"},{"@id":"95","@gid":"3","@x":"420","@y":"245","@width":"35","@height":"35"},{"@id":"96","@gid":"11","@x":"140","@y":"350","@width":"35","@height":"35"},{"@id":"97","@gid":"6","@x":"140","@y":"315","@width":"35","@height":"35"},{"@id":"98","@gid":"6","@x":"140","@y":"280","@width":"35","@height":"35"},{"@id":"99","@gid":"6","@x":"140","@y":"245","@width":"35","@height":"35"},{"@id":"100","@gid":"8","@x":"140","@y":"210","@width":"35","@height":"35"}]},{"@name":"active",object:[{"@id":"101","@gid":"30","@x":"525","@y":"210","@width":"60","@height":"56"},{"@id":"102","@gid":"27","@x":"485","@y":"315","@width":"31","@height":"34"},{"@id":"103","@gid":"27","@x":"70","@y":"427","@width":"31","@height":"34"},{"@id":"104","@gid":"27","@x":"630","@y":"140","@width":"31","@height":"34"},{"@id":"105","@type":"6","@gid":"17","@x":"166","@y":"175.5","@width":"24","@height":"11"},{"@id":"106","@type":"6","@gid":"22","@x":"35","@y":"475","@width":"105","@height":"20",properties:{property:[{"@name":"distanceY","@value":"280"},{"@name":"speedY","@value":"-45"}]}}]},{"@name":"characters",object:[{"@id":"107","@gid":"24","@x":"385","@y":"490","@width":"44","@height":"52"},{"@id":"108","@gid":"28","@x":"443","@y":"492","@width":"63","@height":"50"}]},{"@name":"physics",object:[{"@id":"109","@x":"0","@y":"490","@width":"700","@height":"35"},{"@id":"110","@x":"140","@y":"455","@width":"140","@height":"35"},{"@id":"111","@x":"0","@y":"175","@width":"35","@height":"315"},{"@id":"112","@x":"595","@y":"385","@width":"70","@height":"105"},{"@id":"113","@x":"665","@y":"245","@width":"35","@height":"245"},{"@id":"114","@x":"420","@y":"210","@width":"280","@height":"35"},{"@id":"115","@x":"315","@y":"175","@width":"105","@height":"70"},{"@id":"116","@x":"210","@y":"245","@width":"210","@height":"35"},{"@id":"120","@x":"140","@y":"315","@width":"70","@height":"70"},{"@id":"121","@x":"140","@y":"175","@width":"70","@height":"35"},{"@id":"122","@x":"210","@y":"105","@width":"70","@height":"105"},{"@id":"123","@x":"140","@y":"210","@width":"35","@height":"105"},{"@id":"124","@x":"420","@y":"315","@width":"35","@height":"35"},{"@id":"125","@x":"210","@y":"350","@width":"315","@height":"35"}]}]},{"@level":"3","@version":"1.0","@orientation":"orthogonal","@renderorder":"right-down","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@width":"35","@height":"35","@source":"tiles/singleTile.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"tiles/platformLeft.png"}},{"@id":"2",image:{"@width":"35","@height":"35","@source":"tiles/platformCenter.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"tiles/platformRight.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformTop.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformCenter.png"}},{"@id":"6",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformBottom.png"}},{"@id":"7",image:{"@width":"35","@height":"35","@source":"tiles/tileTopLeft.png"}},{"@id":"8",image:{"@width":"35","@height":"35","@source":"tiles/tileTopCenter.png"}},{"@id":"9",image:{"@width":"35","@height":"35","@source":"tiles/tileTopRight.png"}},{"@id":"10",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterLeft.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"tiles/tileCenter.png"}},{"@id":"12",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterRight.png"}},{"@id":"13",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomLeft.png"}},{"@id":"14",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomCenter.png"}},{"@id":"15",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"70",tile:[{"@id":"0",image:{"@width":"24","@height":"11","@source":"active/PushButtonGraphics.png"}},{"@id":"1",image:{"@width":"25","@height":"19","@source":"active/TriggerGraphics.png"}},{"@id":"2",image:{"@width":"20","@height":"70","@source":"active/DoorGraphics.png"}},{"@id":"3",image:{"@width":"20","@height":"70","@source":"active/GlassDoorGraphics.png"}},{"@id":"4",image:{"@width":"70","@height":"19","@source":"active/ElevatorGraphics.png"}},{"@id":"5",image:{"@width":"105","@height":"20","@source":"active/BigElevatorGraphics.png"}},{"@id":"6",image:{"@width":"70","@height":"70","@source":"active/ExitGraphics.png"}},{"@id":"7",image:{"@width":"44","@height":"52","@source":"characters/HustlerGraphics.png"}},{"@id":"8",image:{"@width":"32","@height":"22","@source":"active/CameraGraphics.png"}},{"@id":"9",image:{"@width":"15","@height":"15","@source":"characters/EnemyLimiterGraphics.png"}},{"@id":"10",image:{"@width":"31","@height":"34","@source":"passive/MoneyBagGraphics.png"}},{"@id":"11",image:{"@width":"63","@height":"50","@source":"characters/DogGraphics.png"}},{"@id":"12",image:{"@width":"60","@height":"55","@source":"characters/Prisoner2Graphics.png"}},{"@id":"13",image:{"@width":"60","@height":"56","@source":"characters/PrisonerGraphics.png"}}]},{"@firstgid":"31","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@width":"50","@height":"50","@source":"passive/BigBoxGraphics.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"passive/BoxGraphics.png"}},{"@id":"2",image:{"@width":"37","@height":"35","@source":"passive/ToiletGraphics.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"passive/MonitorGraphics.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"passive/BasketBallGraphics.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"passive/StoolGraphics.png"}},{"@id":"6",image:{"@width":"150","@height":"20","@source":"passive/PlankGraphics.png"}},{"@id":"7",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"8",image:{"@width":"210","@height":"20","@source":"passive/BigPlankGraphics.png"}},{"@id":"9",image:{"@width":"100","@height":"20","@source":"passive/Plank5Graphics.png"}},{"@id":"10",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"passive/MirrorGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"136",tile:[{"@id":"0",image:{"@width":"232","@height":"79","@source":"decor/LevelTextGraphics.png"}},{"@id":"1",image:{"@width":"54","@height":"20","@source":"decor/Decor1Graphics.png"}},{"@id":"2",image:{"@width":"54","@height":"20","@source":"decor/Decor2Graphics.png"}},{"@id":"3",image:{"@width":"33","@height":"27","@source":"decor/Decor3Graphics.png"}},{"@id":"4",image:{"@width":"34","@height":"25","@source":"decor/Decor4Graphics.png"}},{"@id":"5",image:{"@width":"22","@height":"31","@source":"decor/Decor5Graphics.png"}},{"@id":"6",image:{"@width":"126","@height":"59","@source":"decor/Decor6Graphics.png"}},{"@id":"7",image:{"@width":"25","@height":"21","@source":"decor/Decor8Graphics.png"}},{"@id":"8",image:{"@width":"18","@height":"22","@source":"decor/Decor9Graphics.png"}},{"@id":"9",image:{"@width":"35","@height":"58","@source":"decor/Decor10Graphics.png"}},{"@id":"10",image:{"@width":"19","@height":"66","@source":"decor/Decor11Graphics.png"}},{"@id":"11",image:{"@width":"23","@height":"33","@source":"decor/Decor12Graphics.png"}},{"@id":"12",image:{"@width":"38","@height":"26","@source":"decor/Decor13Graphics.png"}},{"@id":"13",image:{"@width":"43","@height":"78","@source":"decor/Decor14Graphics.png"}},{"@id":"14",image:{"@width":"60","@height":"86","@source":"decor/Decor15Graphics.png"}},{"@id":"15",image:{"@width":"41","@height":"69","@source":"decor/Decor16Graphics.png"}},{"@id":"16",image:{"@width":"55","@height":"58","@source":"decor/Decor17Graphics.png"}},{"@id":"17",image:{"@width":"57","@height":"54","@source":"decor/Decor18Graphics.png"}},{"@id":"18",image:{"@width":"18","@height":"45","@source":"decor/Decor19Graphics.png"}},{"@id":"19",image:{"@width":"41","@height":"49","@source":"decor/Decor20Graphics.png"}},{"@id":"20",image:{"@width":"51","@height":"38","@source":"decor/Decor21Graphics.png"}},{"@id":"21",image:{"@width":"54","@height":"54","@source":"decor/Decor22Graphics.png"}},{"@id":"22",image:{"@width":"63","@height":"136","@source":"decor/Decor23Graphics.png"}},{"@id":"23",image:{"@width":"21","@height":"39","@source":"decor/Decor24Graphics.png"}},{"@id":"24",image:{"@width":"104","@height":"50","@source":"decor/Decor25Graphics.png"}},{"@id":"25",image:{"@width":"104","@height":"46","@source":"decor/Decor26Graphics.png"}},{"@id":"26",image:{"@width":"86","@height":"38","@source":"decor/Decor27Graphics.png"}},{"@id":"27",image:{"@width":"63","@height":"55","@source":"decor/Decor28Graphics.png"}},{"@id":"28",image:{"@width":"13","@height":"23","@source":"decor/Decor29Graphics.png"}},{"@id":"29",image:{"@width":"28","@height":"40","@source":"decor/Decor30Graphics.png"}},{"@id":"30",image:{"@width":"69","@height":"30","@source":"decor/Decor31Graphics.png"}},{"@id":"31",image:{"@width":"33","@height":"29","@source":"decor/Decor32Graphics.png"}},{"@id":"32",image:{"@width":"42","@height":"42","@source":"decor/Decor33Graphics.png"}},{"@id":"33",image:{"@width":"60","@height":"66","@source":"decor/Decor34Graphics.png"}},{"@id":"34",image:{"@width":"46","@height":"65","@source":"decor/Decor35Graphics.png"}},{"@id":"35",image:{"@width":"71","@height":"55","@source":"decor/Decor36Graphics.png"}},{"@id":"36",image:{"@width":"35","@height":"55","@source":"decor/Decor37Graphics.png"}},{"@id":"37",image:{"@width":"28","@height":"29","@source":"decor/Decor38Graphics.png"}},{"@id":"38",image:{"@width":"38","@height":"37","@source":"decor/Decor39Graphics.png"}},{"@id":"39",image:{"@width":"103","@height":"50","@source":"decor/Decor40Graphics.png"}},{"@id":"40",image:{"@width":"56","@height":"55","@source":"decor/Decor41Graphics.png"}},{"@id":"41",image:{"@width":"71","@height":"50","@source":"decor/Decor42Graphics.png"}},{"@id":"42",image:{"@width":"200","@height":"44","@source":"decor/TxtGraphics.png"}}]}],imagelayer:{"@name":"background",image:{"@source":"bg/Background1Graphics.png"}},objectgroup:[{"@name":"decorations",object:[{"@gid":"43","@x":"105","@y":"350","@width":"232","@height":"79",properties:{property:{"@name":"text","@value":"Hot pursuit"}}},{"@gid":"49","@x":"175","@y":"455"},{"@gid":"52","@x":"70","@y":"175"},{"@gid":"47","@x":"595","@y":"385"},{"@gid":"48","@x":"245","@y":"455"},{"@gid":"58","@x":"420","@y":"210"},{"@gid":"70","@x":"33","@y":"202"},{"@gid":"69","@x":"385","@y":"490"}]},{"@name":"tiles",object:[{"@gid":"9","@x":"560","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"455","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"245","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"350","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"315","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"280","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"105","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"140","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"490","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"0","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"35","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"0","@y":"490","@width":"35","@height":"35"},{"@gid":"12","@x":"665","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"70","@y":"525","@width":"35","@height":"35"},{"@gid":"3","@x":"70","@y":"245","@width":"35","@height":"35"},{"@gid":"3","@x":"35","@y":"245","@width":"35","@height":"35"},{"@gid":"9","@x":"0","@y":"245","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"280","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"315","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"350","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"385","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"420","@width":"35","@height":"35"},{"@gid":"10","@x":"70","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"175","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"210","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"385","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"595","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"630","@y":"525","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"490","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"455","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"420","@width":"35","@height":"35"},{"@gid":"6","@x":"525","@y":"315","@width":"35","@height":"35"},{"@gid":"6","@x":"525","@y":"280","@width":"35","@height":"35"},{"@gid":"10","@x":"525","@y":"245","@width":"35","@height":"35"},{"@gid":"3","@x":"490","@y":"245","@width":"35","@height":"35"},{"@gid":"3","@x":"455","@y":"245","@width":"35","@height":"35"},{"@gid":"3","@x":"385","@y":"245","@width":"35","@height":"35"},{"@gid":"3","@x":"420","@y":"245","@width":"35","@height":"35"},{"@gid":"4","@x":"350","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"210","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"140","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"175","@y":"385","@width":"35","@height":"35"},{"@gid":"2","@x":"105","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"595","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"560","@y":"350","@width":"35","@height":"35"},{"@gid":"14","@x":"525","@y":"350"},{"@gid":"3","@x":"315","@y":"385","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"455","@width":"35","@height":"35"},{"@gid":"9","@x":"35","@y":"490"},{"@gid":"15","@x":"630","@y":"350"},{"@gid":"8","@x":"630","@y":"315"},{"@gid":"9","@x":"665","@y":"315"},{"@gid":"11","@x":"665","@y":"385","@width":"35","@height":"35"},{"@gid":"12","@x":"665","@y":"350"},{"@gid":"3","@x":"280","@y":"385","@width":"35","@height":"35"},{"@gid":"9","@x":"420","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"525","@y":"525","@width":"35","@height":"35"},{"@gid":"11","@x":"490","@y":"490"},{"@gid":"8","@x":"490","@y":"455"},{"@gid":"10","@x":"525","@y":"455"},{"@gid":"13","@x":"525","@y":"490"},{"@gid":"3","@x":"350","@y":"245","@width":"35","@height":"35"},{"@gid":"3","@x":"245","@y":"385","@width":"35","@height":"35"},{"@gid":"2","@x":"315","@y":"245"},{"@gid":"4","@x":"105","@y":"245","@width":"35","@height":"35"}]},{"@name":"active",object:[{"@type":"1","@gid":"21","@x":"560","@y":"298","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"70"},{"@name":"speedY","@value":"-45"}]}},{"@type":"1","@gid":"17","@x":"595","@y":"490","@width":"24","@height":"11"},{"@gid":"27","@x":"595","@y":"455","@width":"31","@height":"34"},{"@gid":"27","@x":"455","@y":"140","@width":"31","@height":"34"},{"@gid":"27","@x":"455","@y":"315","@width":"31","@height":"34"},{"@gid":"30","@x":"350","@y":"210","@width":"60","@height":"56",properties:{property:[{"@name":"limitLeft","@value":"20"},{"@name":"limitRight","@value":"30"}]}}]},{"@name":"characters",object:[{"@gid":"24","@x":"315","@y":"490","@width":"44","@height":"52"},{"@gid":"28","@x":"630","@y":"280","@width":"63","@height":"50"}]},{"@name":"physics",object:[{"@x":"0","@y":"210","@width":"140","@height":"35"},{"@x":"0","@y":"245","@width":"35","@height":"280"},{"@x":"35","@y":"455","@width":"70","@height":"70"},{"@x":"105","@y":"490","@width":"595","@height":"35"},{"@x":"490","@y":"420","@width":"70","@height":"70"},{"@x":"665","@y":"350","@width":"35","@height":"140"},{"@x":"560","@y":"315","@width":"140","@height":"35"},{"@x":"105","@y":"350","@width":"280","@height":"35"},{"@x":"315","@y":"210","@width":"245","@height":"35"},{"@x":"525","@y":"245","@width":"35","@height":"105"},{"@x":"630","@y":"280","@width":"70","@height":"35"}]}]},{"@level":"4","@version":"1.0","@orientation":"orthogonal","@renderorder":"right-down","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35","@nextobjectid":"136",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35","@tilecount":"16",tile:[{"@id":"0",image:{"@width":"35","@height":"35","@source":"tiles/singleTile.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"tiles/platformLeft.png"}},{"@id":"2",image:{"@width":"35","@height":"35","@source":"tiles/platformCenter.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"tiles/platformRight.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformTop.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformCenter.png"}},{"@id":"6",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformBottom.png"}},{"@id":"7",image:{"@width":"35","@height":"35","@source":"tiles/tileTopLeft.png"}},{"@id":"8",image:{"@width":"35","@height":"35","@source":"tiles/tileTopCenter.png"}},{"@id":"9",image:{"@width":"35","@height":"35","@source":"tiles/tileTopRight.png"}},{"@id":"10",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterLeft.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"tiles/tileCenter.png"}},{"@id":"12",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterRight.png"}},{"@id":"13",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomLeft.png"}},{"@id":"14",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomCenter.png"}},{"@id":"15",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"70","@tilecount":"14",tile:[{"@id":"0",image:{"@width":"24","@height":"11","@source":"active/PushButtonGraphics.png"}},{"@id":"1",image:{"@width":"25","@height":"19","@source":"active/TriggerGraphics.png"}},{"@id":"2",image:{"@width":"20","@height":"70","@source":"active/DoorGraphics.png"}},{"@id":"3",image:{"@width":"20","@height":"70","@source":"active/GlassDoorGraphics.png"}},{"@id":"4",image:{"@width":"70","@height":"19","@source":"active/ElevatorGraphics.png"}},{"@id":"5",image:{"@width":"105","@height":"20","@source":"active/BigElevatorGraphics.png"}},{"@id":"6",image:{"@width":"70","@height":"70","@source":"active/ExitGraphics.png"}},{"@id":"7",image:{"@width":"44","@height":"52","@source":"characters/HustlerGraphics.png"}},{"@id":"8",image:{"@width":"32","@height":"22","@source":"active/CameraGraphics.png"}},{"@id":"9",image:{"@width":"15","@height":"15","@source":"characters/EnemyLimiterGraphics.png"}},{"@id":"10",image:{"@width":"31","@height":"34","@source":"passive/MoneyBagGraphics.png"}},{"@id":"11",image:{"@width":"63","@height":"50","@source":"characters/DogGraphics.png"}},{"@id":"12",image:{"@width":"60","@height":"55","@source":"characters/Prisoner2Graphics.png"}},{"@id":"13",image:{"@width":"60","@height":"56","@source":"characters/PrisonerGraphics.png"}}]},{"@firstgid":"31","@name":"passive","@tilewidth":"210","@tileheight":"50","@tilecount":"12",tile:[{"@id":"0",image:{"@width":"50","@height":"50","@source":"passive/BigBoxGraphics.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"passive/BoxGraphics.png"}},{"@id":"2",image:{"@width":"37","@height":"35","@source":"passive/ToiletGraphics.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"passive/MonitorGraphics.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"passive/BasketBallGraphics.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"passive/StoolGraphics.png"}},{"@id":"6",image:{"@width":"150","@height":"20","@source":"passive/PlankGraphics.png"}},{"@id":"7",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"8",image:{"@width":"210","@height":"20","@source":"passive/BigPlankGraphics.png"}},{"@id":"9",image:{"@width":"100","@height":"20","@source":"passive/Plank5Graphics.png"}},{"@id":"10",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"passive/MirrorGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"136","@tilecount":"44",tile:[{"@id":"0",image:{"@width":"232","@height":"79","@source":"decor/LevelTextGraphics.png"}},{"@id":"1",image:{"@width":"54","@height":"20","@source":"decor/Decor1Graphics.png"}},{"@id":"2",image:{"@width":"54","@height":"20","@source":"decor/Decor2Graphics.png"}},{"@id":"3",image:{"@width":"33","@height":"27","@source":"decor/Decor3Graphics.png"}},{"@id":"4",image:{"@width":"34","@height":"25","@source":"decor/Decor4Graphics.png"}},{"@id":"5",image:{"@width":"22","@height":"31","@source":"decor/Decor5Graphics.png"}},{"@id":"6",image:{"@width":"126","@height":"59","@source":"decor/Decor6Graphics.png"}},{"@id":"7",image:{"@width":"25","@height":"21","@source":"decor/Decor8Graphics.png"}},{"@id":"8",image:{"@width":"18","@height":"22","@source":"decor/Decor9Graphics.png"}},{"@id":"9",image:{"@width":"35","@height":"58","@source":"decor/Decor10Graphics.png"}},{"@id":"10",image:{"@width":"19","@height":"66","@source":"decor/Decor11Graphics.png"}},{"@id":"11",image:{"@width":"23","@height":"33","@source":"decor/Decor12Graphics.png"}},{"@id":"12",image:{"@width":"38","@height":"26","@source":"decor/Decor13Graphics.png"}},{"@id":"13",image:{"@width":"43","@height":"78","@source":"decor/Decor14Graphics.png"}},{"@id":"14",image:{"@width":"60","@height":"86","@source":"decor/Decor15Graphics.png"}},{"@id":"15",image:{"@width":"41","@height":"69","@source":"decor/Decor16Graphics.png"}},{"@id":"16",image:{"@width":"55","@height":"58","@source":"decor/Decor17Graphics.png"}},{"@id":"17",image:{"@width":"57","@height":"54","@source":"decor/Decor18Graphics.png"}},{"@id":"18",image:{"@width":"18","@height":"45","@source":"decor/Decor19Graphics.png"}},{"@id":"19",image:{"@width":"41","@height":"49","@source":"decor/Decor20Graphics.png"}},{"@id":"20",image:{"@width":"51","@height":"38","@source":"decor/Decor21Graphics.png"}},{"@id":"21",image:{"@width":"54","@height":"54","@source":"decor/Decor22Graphics.png"}},{"@id":"22",image:{"@width":"63","@height":"136","@source":"decor/Decor23Graphics.png"}},{"@id":"23",image:{"@width":"21","@height":"39","@source":"decor/Decor24Graphics.png"}},{"@id":"24",image:{"@width":"104","@height":"50","@source":"decor/Decor25Graphics.png"}},{"@id":"25",image:{"@width":"104","@height":"46","@source":"decor/Decor26Graphics.png"}},{"@id":"26",image:{"@width":"86","@height":"38","@source":"decor/Decor27Graphics.png"}},{"@id":"27",image:{"@width":"63","@height":"55","@source":"decor/Decor28Graphics.png"}},{"@id":"28",image:{"@width":"13","@height":"23","@source":"decor/Decor29Graphics.png"}},{"@id":"29",image:{"@width":"28","@height":"40","@source":"decor/Decor30Graphics.png"}},{"@id":"30",image:{"@width":"69","@height":"30","@source":"decor/Decor31Graphics.png"}},{"@id":"31",image:{"@width":"33","@height":"29","@source":"decor/Decor32Graphics.png"}},{"@id":"32",image:{"@width":"42","@height":"42","@source":"decor/Decor33Graphics.png"}},{"@id":"33",image:{"@width":"60","@height":"66","@source":"decor/Decor34Graphics.png"}},{"@id":"34",image:{"@width":"46","@height":"65","@source":"decor/Decor35Graphics.png"}},{"@id":"35",image:{"@width":"71","@height":"55","@source":"decor/Decor36Graphics.png"}},{"@id":"36",image:{"@width":"35","@height":"55","@source":"decor/Decor37Graphics.png"}},{"@id":"37",image:{"@width":"28","@height":"29","@source":"decor/Decor38Graphics.png"}},{"@id":"38",image:{"@width":"38","@height":"37","@source":"decor/Decor39Graphics.png"}},{"@id":"39",image:{"@width":"103","@height":"50","@source":"decor/Decor40Graphics.png"}},{"@id":"40",image:{"@width":"56","@height":"55","@source":"decor/Decor41Graphics.png"}},{"@id":"41",image:{"@width":"71","@height":"50","@source":"decor/Decor42Graphics.png"}},{"@id":"42",image:{"@width":"200","@height":"44","@source":"decor/TxtGraphics.png"}},{"@id":"43",image:{"@width":"97","@height":"69","@source":"decor/Tip7Graphics.png"}}]}],imagelayer:{"@name":"background",image:{"@source":"bg/Background1Graphics.png"}},objectgroup:[{"@name":"decorations",object:[{"@id":"1","@gid":"43","@x":"230","@y":"170","@width":"232","@height":"79",properties:{property:{"@name":"text","@value":"OMG it's the Laser!"}}},{"@id":"2","@gid":"44","@x":"86","@y":"194","@width":"54","@height":"20"},{"@id":"3","@gid":"50","@x":"387","@y":"307","@width":"25","@height":"21"},{"@id":"4","@gid":"49","@x":"175","@y":"455","@width":"126","@height":"59"},{"@id":"5","@gid":"64","@x":"525","@y":"210","@width":"54","@height":"54"},{"@id":"6","@gid":"68","@x":"385","@y":"490","@width":"104","@height":"46"},{"@id":"7","@gid":"73","@x":"420","@y":"455","@width":"69","@height":"30"},{"@id":"8","@gid":"80","@x":"560","@y":"455","@width":"28","@height":"29"},{"@id":"114","@gid":"86","@x":"338","@y":"233","@width":"97","@height":"69"}]},{"@name":"tiles",object:[{"@id":"9","@gid":"12","@x":"0","@y":"525","@width":"35","@height":"35"},{"@id":"10","@gid":"12","@x":"35","@y":"525","@width":"35","@height":"35"},{"@id":"11","@gid":"12","@x":"315","@y":"525","@width":"35","@height":"35"},{"@id":"12","@gid":"9","@x":"455","@y":"525","@width":"35","@height":"35"},{"@id":"13","@gid":"9","@x":"420","@y":"525","@width":"35","@height":"35"},{"@id":"14","@gid":"9","@x":"490","@y":"525","@width":"35","@height":"35"},{"@id":"15","@gid":"9","@x":"385","@y":"525","@width":"35","@height":"35"},{"@id":"16","@gid":"9","@x":"140","@y":"525","@width":"35","@height":"35"},{"@id":"17","@gid":"9","@x":"245","@y":"525","@width":"35","@height":"35"},{"@id":"18","@gid":"9","@x":"210","@y":"525","@width":"35","@height":"35"},{"@id":"19","@gid":"9","@x":"175","@y":"525","@width":"35","@height":"35"},{"@id":"20","@gid":"9","@x":"630","@y":"525","@width":"35","@height":"35"},{"@id":"21","@gid":"9","@x":"280","@y":"525","@width":"35","@height":"35"},{"@id":"22","@gid":"9","@x":"105","@y":"525","@width":"35","@height":"35"},{"@id":"23","@gid":"9","@x":"70","@y":"525","@width":"35","@height":"35"},{"@id":"24","@gid":"12","@x":"0","@y":"455","@width":"35","@height":"35"},{"@id":"25","@gid":"12","@x":"0","@y":"490","@width":"35","@height":"35"},{"@id":"26","@gid":"12","@x":"665","@y":"525","@width":"35","@height":"35"},{"@id":"27","@gid":"9","@x":"525","@y":"525","@width":"35","@height":"35"},{"@id":"28","@gid":"9","@x":"560","@y":"525","@width":"35","@height":"35"},{"@id":"29","@gid":"9","@x":"595","@y":"525","@width":"35","@height":"35"},{"@id":"30","@gid":"8","@x":"315","@y":"490","@width":"35","@height":"35"},{"@id":"31","@gid":"8","@x":"455","@y":"140","@width":"35","@height":"35"},{"@id":"32","@gid":"10","@x":"560","@y":"280","@width":"35","@height":"35"},{"@id":"33","@gid":"10","@x":"315","@y":"350","@width":"35","@height":"35"},{"@id":"34","@gid":"10","@x":"210","@y":"175","@width":"35","@height":"35"},{"@id":"35","@gid":"10","@x":"350","@y":"490","@width":"35","@height":"35"},{"@id":"36","@gid":"12","@x":"350","@y":"525","@width":"35","@height":"35"},{"@id":"37","@gid":"10","@x":"35","@y":"455","@width":"35","@height":"35"},{"@id":"38","@gid":"11","@x":"665","@y":"490","@width":"35","@height":"35"},{"@id":"39","@gid":"11","@x":"665","@y":"455","@width":"35","@height":"35"},{"@id":"40","@gid":"11","@x":"665","@y":"420","@width":"35","@height":"35"},{"@id":"41","@gid":"11","@x":"665","@y":"385","@width":"35","@height":"35"},{"@id":"42","@gid":"11","@x":"665","@y":"350","@width":"35","@height":"35"},{"@id":"43","@gid":"11","@x":"665","@y":"315","@width":"35","@height":"35"},{"@id":"44","@gid":"11","@x":"665","@y":"280","@width":"35","@height":"35"},{"@id":"45","@gid":"11","@x":"665","@y":"245","@width":"35","@height":"35"},{"@id":"46","@gid":"11","@x":"665","@y":"210","@width":"35","@height":"35"},{"@id":"47","@gid":"11","@x":"665","@y":"175","@width":"35","@height":"35"},{"@id":"48","@gid":"3","@x":"490","@y":"140","@width":"35","@height":"35"},{"@id":"49","@gid":"3","@x":"525","@y":"140","@width":"35","@height":"35"},{"@id":"50","@gid":"3","@x":"560","@y":"140","@width":"35","@height":"35"},{"@id":"51","@gid":"3","@x":"595","@y":"140","@width":"35","@height":"35"},{"@id":"52","@gid":"3","@x":"630","@y":"140","@width":"35","@height":"35"},{"@id":"53","@gid":"9","@x":"665","@y":"140","@width":"35","@height":"35"},{"@id":"54","@gid":"3","@x":"175","@y":"175","@width":"35","@height":"35"},{"@id":"55","@gid":"3","@x":"140","@y":"175","@width":"35","@height":"35"},{"@id":"56","@gid":"3","@x":"105","@y":"175","@width":"35","@height":"35"},{"@id":"57","@gid":"3","@x":"70","@y":"175","@width":"35","@height":"35"},{"@id":"58","@gid":"3","@x":"35","@y":"175","@width":"35","@height":"35"},{"@id":"59","@gid":"3","@x":"280","@y":"350","@width":"35","@height":"35"},{"@id":"60","@gid":"3","@x":"245","@y":"350","@width":"35","@height":"35"},{"@id":"61","@gid":"3","@x":"210","@y":"350","@width":"35","@height":"35"},{"@id":"62","@gid":"3","@x":"175","@y":"350","@width":"35","@height":"35"},{"@id":"63","@gid":"3","@x":"490","@y":"385","@width":"35","@height":"35"},{"@id":"64","@gid":"3","@x":"455","@y":"385","@width":"35","@height":"35"},{"@id":"65","@gid":"3","@x":"350","@y":"385","@width":"35","@height":"35"},{"@id":"66","@gid":"3","@x":"245","@y":"245","@width":"35","@height":"35"},{"@id":"67","@gid":"13","@x":"35","@y":"490","@width":"35","@height":"35"},{"@id":"68","@gid":"13","@x":"0","@y":"210","@width":"35","@height":"35"},{"@id":"69","@gid":"13","@x":"0","@y":"245","@width":"35","@height":"35"},{"@id":"70","@gid":"13","@x":"0","@y":"280","@width":"35","@height":"35"},{"@id":"71","@gid":"13","@x":"0","@y":"315","@width":"35","@height":"35"},{"@id":"72","@gid":"13","@x":"0","@y":"350","@width":"35","@height":"35"},{"@id":"73","@gid":"13","@x":"0","@y":"385","@width":"35","@height":"35"},{"@id":"74","@gid":"13","@x":"0","@y":"420","@width":"35","@height":"35"},{"@id":"75","@gid":"13","@x":"560","@y":"315","@width":"35","@height":"35"},{"@id":"76","@gid":"13","@x":"560","@y":"350","@width":"35","@height":"35"},{"@id":"77","@gid":"11","@x":"525","@y":"315","@width":"35","@height":"35"},{"@id":"78","@gid":"11","@x":"525","@y":"350","@width":"35","@height":"35"},{"@id":"79","@gid":"9","@x":"0","@y":"175","@width":"35","@height":"35"},{"@id":"80","@gid":"6","@x":"210","@y":"210","@width":"35","@height":"35"},{"@id":"81","@gid":"6","@x":"455","@y":"175","@width":"35","@height":"35"},{"@id":"82","@gid":"6","@x":"455","@y":"210","@width":"35","@height":"35"},{"@id":"83","@gid":"6","@x":"455","@y":"245","@width":"35","@height":"35"},{"@id":"84","@gid":"14","@x":"210","@y":"245","@width":"35","@height":"35"},{"@id":"85","@gid":"14","@x":"315","@y":"385","@width":"35","@height":"35"},{"@id":"86","@gid":"16","@x":"560","@y":"385","@width":"35","@height":"35"},{"@id":"87","@gid":"16","@x":"140","@y":"385","@width":"35","@height":"35"},{"@id":"88","@gid":"16","@x":"420","@y":"420","@width":"35","@height":"35"},{"@id":"89","@gid":"14","@x":"385","@y":"420","@width":"35","@height":"35"},{"@id":"90","@gid":"2","@x":"105","@y":"385","@width":"35","@height":"35"},{"@id":"91","@gid":"2","@x":"420","@y":"280","@width":"35","@height":"35"},{"@id":"92","@gid":"4","@x":"280","@y":"245","@width":"35","@height":"35"},{"@id":"93","@gid":"9","@x":"420","@y":"385","@width":"35","@height":"35"},{"@id":"94","@gid":"9","@x":"385","@y":"385","@width":"35","@height":"35"},{"@id":"95","@gid":"15","@x":"525","@y":"385","@width":"35","@height":"35"},{"@id":"96","@gid":"15","@x":"455","@y":"280","@width":"35","@height":"35"},{"@id":"97","@gid":"3","@x":"490","@y":"280","@width":"35","@height":"35"},{"@id":"98","@gid":"9","@x":"525","@y":"280","@width":"35","@height":"35"},{"@id":"99","@gid":"5","@x":"140","@y":"315","@width":"35","@height":"35"},{"@id":"100","@gid":"11","@x":"140","@y":"350","@width":"35","@height":"35"}]},{"@name":"active",object:[{"@id":"101","@gid":"25","@x":"512","@y":"310","@width":"32","@height":"22",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"0"},{"@name":"minAngle","@value":"0"},{"@name":"speedX","@value":"0"}]}},{"@id":"102","@type":"5","@gid":"21","@x":"595","@y":"265.5","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"210"},{"@name":"speedY","@value":"45"}]}},{"@id":"103","@type":"2","@gid":"19","@x":"444","@y":"280","@width":"20","@height":"70","@rotation":"180"},{"@id":"104","@type":"5","@gid":"17","@x":"469","@y":"351","@width":"24","@height":"11"},{"@id":"105","@gid":"27","@x":"272","@y":"191","@width":"31","@height":"34"},{"@id":"106","@gid":"27","@x":"68","@y":"246","@width":"31","@height":"34"},{"@id":"107","@gid":"27","@x":"497.5","@y":"434.5","@width":"31","@height":"34"},{"@id":"108","@gid":"26","@x":"347","@y":"291","@width":"15","@height":"15"},{"@id":"109","@gid":"30","@x":"228","@y":"313","@width":"60","@height":"56"},{"@id":"110","@type":"2","@gid":"18","@x":"499","@y":"246","@width":"25","@height":"19"},{"@id":"111","@gid":"30","@x":"473","@y":"491","@width":"60","@height":"56",properties:{property:[{"@name":"limitLeft","@value":"70"},{"@name":"limitRight","@value":"60"}]}}]},{"@name":"characters",object:[{"@id":"112","@gid":"24","@x":"112","@y":"488","@width":"44","@height":"52"},{"@id":"113","@gid":"28","@x":"597.5","@y":"241","@width":"63","@height":"50"}]},{"@name":"physics",object:[{"@id":"116","@x":"0","@y":"490","@width":"700","@height":"35"},{"@id":"117","@x":"315","@y":"455","@width":"70","@height":"35"},{"@id":"118","@x":"0","@y":"420","@width":"70","@height":"70"},{"@id":"119","@x":"0","@y":"175","@width":"35","@height":"245"},{"@id":"122","@x":"0","@y":"140","@width":"245","@height":"35"},{"@id":"123","@x":"210","@y":"175","@width":"35","@height":"70"},{"@id":"125","@x":"245","@y":"210","@width":"70","@height":"35"},{"@id":"126","@x":"420","@y":"245","@width":"175","@height":"35"},{"@id":"127","@x":"455","@y":"140","@width":"35","@height":"105"},{"@id":"128","@x":"455","@y":"105","@width":"245","@height":"35"},{"@id":"129","@x":"665","@y":"140","@width":"35","@height":"350"},{"@id":"130","@x":"385","@y":"385","@width":"70","@height":"35"},{"@id":"131","@x":"315","@y":"350","@width":"280","@height":"35"},{"@id":"132","@x":"525","@y":"280","@width":"70","@height":"70"},{"@id":"133","@x":"140","@y":"315","@width":"210","@height":"35"},{"@id":"134","@x":"140","@y":"280","@width":"35","@height":"35"},{"@id":"135","@x":"105","@y":"350","@width":"70","@height":"35"}]}]},{"@level":"5","@version":"1.0","@orientation":"orthogonal","@renderorder":"right-down","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@width":"35","@height":"35","@source":"tiles/singleTile.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"tiles/platformLeft.png"}},{"@id":"2",image:{"@width":"35","@height":"35","@source":"tiles/platformCenter.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"tiles/platformRight.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformTop.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformCenter.png"}},{"@id":"6",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformBottom.png"}},{"@id":"7",image:{"@width":"35","@height":"35","@source":"tiles/tileTopLeft.png"}},{"@id":"8",image:{"@width":"35","@height":"35","@source":"tiles/tileTopCenter.png"}},{"@id":"9",image:{"@width":"35","@height":"35","@source":"tiles/tileTopRight.png"}},{"@id":"10",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterLeft.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"tiles/tileCenter.png"}},{"@id":"12",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterRight.png"}},{"@id":"13",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomLeft.png"}},{"@id":"14",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomCenter.png"}},{"@id":"15",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"70",tile:[{"@id":"0",image:{"@width":"24","@height":"11","@source":"active/PushButtonGraphics.png"}},{"@id":"1",image:{"@width":"25","@height":"19","@source":"active/TriggerGraphics.png"}},{"@id":"2",image:{"@width":"20","@height":"70","@source":"active/DoorGraphics.png"}},{"@id":"3",image:{"@width":"20","@height":"70","@source":"active/GlassDoorGraphics.png"}},{"@id":"4",image:{"@width":"70","@height":"19","@source":"active/ElevatorGraphics.png"}},{"@id":"5",image:{"@width":"105","@height":"20","@source":"active/BigElevatorGraphics.png"}},{"@id":"6",image:{"@width":"70","@height":"70","@source":"active/ExitGraphics.png"}},{"@id":"7",image:{"@width":"44","@height":"52","@source":"characters/HustlerGraphics.png"}},{"@id":"8",image:{"@width":"32","@height":"22","@source":"active/CameraGraphics.png"}},{"@id":"9",image:{"@width":"15","@height":"15","@source":"characters/EnemyLimiterGraphics.png"}},{"@id":"10",image:{"@width":"31","@height":"34","@source":"passive/MoneyBagGraphics.png"}},{"@id":"11",image:{"@width":"63","@height":"50","@source":"characters/DogGraphics.png"}},{"@id":"12",image:{"@width":"60","@height":"55","@source":"characters/Prisoner2Graphics.png"}},{"@id":"13",image:{"@width":"60","@height":"56","@source":"characters/PrisonerGraphics.png"}}]},{"@firstgid":"31","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@width":"50","@height":"50","@source":"passive/BigBoxGraphics.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"passive/BoxGraphics.png"}},{"@id":"2",image:{"@width":"37","@height":"35","@source":"passive/ToiletGraphics.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"passive/MonitorGraphics.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"passive/BasketBallGraphics.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"passive/StoolGraphics.png"}},{"@id":"6",image:{"@width":"150","@height":"20","@source":"passive/PlankGraphics.png"}},{"@id":"7",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"8",image:{"@width":"210","@height":"20","@source":"passive/BigPlankGraphics.png"}},{"@id":"9",image:{"@width":"100","@height":"20","@source":"passive/Plank5Graphics.png"}},{"@id":"10",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"passive/MirrorGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"136",tile:[{"@id":"0",image:{"@width":"232","@height":"79","@source":"decor/LevelTextGraphics.png"}},{"@id":"1",image:{"@width":"54","@height":"20","@source":"decor/Decor1Graphics.png"}},{"@id":"2",image:{"@width":"54","@height":"20","@source":"decor/Decor2Graphics.png"}},{"@id":"3",image:{"@width":"33","@height":"27","@source":"decor/Decor3Graphics.png"}},{"@id":"4",image:{"@width":"34","@height":"25","@source":"decor/Decor4Graphics.png"}},{"@id":"5",image:{"@width":"22","@height":"31","@source":"decor/Decor5Graphics.png"}},{"@id":"6",image:{"@width":"126","@height":"59","@source":"decor/Decor6Graphics.png"}},{"@id":"7",image:{"@width":"25","@height":"21","@source":"decor/Decor8Graphics.png"}},{"@id":"8",image:{"@width":"18","@height":"22","@source":"decor/Decor9Graphics.png"}},{"@id":"9",image:{"@width":"35","@height":"58","@source":"decor/Decor10Graphics.png"}},{"@id":"10",image:{"@width":"19","@height":"66","@source":"decor/Decor11Graphics.png"}},{"@id":"11",image:{"@width":"23","@height":"33","@source":"decor/Decor12Graphics.png"}},{"@id":"12",image:{"@width":"38","@height":"26","@source":"decor/Decor13Graphics.png"}},{"@id":"13",image:{"@width":"43","@height":"78","@source":"decor/Decor14Graphics.png"}},{"@id":"14",image:{"@width":"60","@height":"86","@source":"decor/Decor15Graphics.png"}},{"@id":"15",image:{"@width":"41","@height":"69","@source":"decor/Decor16Graphics.png"}},{"@id":"16",image:{"@width":"55","@height":"58","@source":"decor/Decor17Graphics.png"}},{"@id":"17",image:{"@width":"57","@height":"54","@source":"decor/Decor18Graphics.png"}},{"@id":"18",image:{"@width":"18","@height":"45","@source":"decor/Decor19Graphics.png"}},{"@id":"19",image:{"@width":"41","@height":"49","@source":"decor/Decor20Graphics.png"}},{"@id":"20",image:{"@width":"51","@height":"38","@source":"decor/Decor21Graphics.png"}},{"@id":"21",image:{"@width":"54","@height":"54","@source":"decor/Decor22Graphics.png"}},{"@id":"22",image:{"@width":"63","@height":"136","@source":"decor/Decor23Graphics.png"}},{"@id":"23",image:{"@width":"21","@height":"39","@source":"decor/Decor24Graphics.png"}},{"@id":"24",image:{"@width":"104","@height":"50","@source":"decor/Decor25Graphics.png"}},{"@id":"25",image:{"@width":"104","@height":"46","@source":"decor/Decor26Graphics.png"}},{"@id":"26",image:{"@width":"86","@height":"38","@source":"decor/Decor27Graphics.png"}},{"@id":"27",image:{"@width":"63","@height":"55","@source":"decor/Decor28Graphics.png"}},{"@id":"28",image:{"@width":"13","@height":"23","@source":"decor/Decor29Graphics.png"}},{"@id":"29",image:{"@width":"28","@height":"40","@source":"decor/Decor30Graphics.png"}},{"@id":"30",image:{"@width":"69","@height":"30","@source":"decor/Decor31Graphics.png"}},{"@id":"31",image:{"@width":"33","@height":"29","@source":"decor/Decor32Graphics.png"}},{"@id":"32",image:{"@width":"42","@height":"42","@source":"decor/Decor33Graphics.png"}},{"@id":"33",image:{"@width":"60","@height":"66","@source":"decor/Decor34Graphics.png"}},{"@id":"34",image:{"@width":"46","@height":"65","@source":"decor/Decor35Graphics.png"}},{"@id":"35",image:{"@width":"71","@height":"55","@source":"decor/Decor36Graphics.png"}},{"@id":"36",image:{"@width":"35","@height":"55","@source":"decor/Decor37Graphics.png"}},{"@id":"37",image:{"@width":"28","@height":"29","@source":"decor/Decor38Graphics.png"}},{"@id":"38",image:{"@width":"38","@height":"37","@source":"decor/Decor39Graphics.png"}},{"@id":"39",image:{"@width":"103","@height":"50","@source":"decor/Decor40Graphics.png"}},{"@id":"40",image:{"@width":"56","@height":"55","@source":"decor/Decor41Graphics.png"}},{"@id":"41",image:{"@width":"71","@height":"50","@source":"decor/Decor42Graphics.png"}},{"@id":"42",image:{"@width":"200","@height":"44","@source":"decor/TxtGraphics.png"}},{"@id":"43",image:{"@width":"97","@height":"69","@source":"decor/Tip8Graphics.png"}}]}],imagelayer:{"@name":"background","@y":"-1",image:{"@source":"bg/Background1Graphics.png"}},objectgroup:[{"@name":"decorations",object:[{"@gid":"43","@x":"280","@y":"140","@width":"232","@height":"79",properties:{property:{"@name":"text","@value":"Knock out"}}},{"@gid":"44","@x":"496","@y":"334","@width":"54","@height":"20"},{"@gid":"61","@x":"140","@y":"451","@width":"18","@height":"45"},{"@gid":"58","@x":"405","@y":"391","@width":"41","@height":"69"},{"@gid":"49","@x":"525","@y":"140","@width":"126","@height":"59"},{"@gid":"74","@x":"612","@y":"264","@width":"33","@height":"29"},{"@gid":"76","@x":"455","@y":"490","@width":"60","@height":"66"},{"@gid":"86","@x":"202","@y":"195","@width":"97","@height":"69"},{"@gid":"79","@x":"315","@y":"485"}]},{"@name":"tiles",object:[{"@gid":"12","@x":"665","@y":"455","@width":"35","@height":"35"},{"@gid":"12","@x":"0","@y":"490","@width":"35","@height":"35"},{"@gid":"12","@x":"560","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"0","@y":"315","@width":"35","@height":"35"},{"@gid":"12","@x":"0","@y":"245","@width":"35","@height":"35"},{"@gid":"12","@x":"595","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"0","@y":"280","@width":"35","@height":"35"},{"@gid":"12","@x":"35","@y":"280","@width":"35","@height":"35"},{"@gid":"12","@x":"630","@y":"490","@width":"35","@height":"35"},{"@gid":"12","@x":"595","@y":"490","@width":"35","@height":"35"},{"@gid":"12","@x":"0","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"665","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"35","@y":"245","@width":"35","@height":"35"},{"@gid":"12","@x":"1330","@y":"560","@width":"35","@height":"35"},{"@gid":"12","@x":"665","@y":"490","@width":"35","@height":"35"},{"@gid":"12","@x":"525","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"1295","@y":"560","@width":"35","@height":"35"},{"@gid":"12","@x":"70","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"35","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"105","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"630","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"70","@y":"280","@width":"35","@height":"35"},{"@gid":"12","@x":"70","@y":"245","@width":"35","@height":"35"},{"@gid":"9","@x":"490","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"455","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"420","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"385","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"350","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"315","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"280","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"245","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"210","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"175","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"140","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"70","@y":"210","@width":"35","@height":"35"},{"@gid":"9","@x":"35","@y":"210","@width":"35","@height":"35"},{"@gid":"9","@x":"0","@y":"210","@width":"35","@height":"35"},{"@gid":"9","@x":"70","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"35","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"560","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"630","@y":"455","@width":"35","@height":"35"},{"@gid":"9","@x":"175","@y":"385","@width":"35","@height":"35"},{"@gid":"8","@x":"420","@y":"175","@width":"35","@height":"35"},{"@gid":"8","@x":"525","@y":"490","@width":"35","@height":"35"},{"@gid":"8","@x":"595","@y":"455","@width":"35","@height":"35"},{"@gid":"8","@x":"665","@y":"245","@width":"35","@height":"35"},{"@gid":"10","@x":"210","@y":"385","@width":"35","@height":"35"},{"@gid":"10","@x":"105","@y":"490","@width":"35","@height":"35"},{"@gid":"10","@x":"105","@y":"210","@width":"35","@height":"35"},{"@gid":"10","@x":"560","@y":"175","@width":"35","@height":"35"},{"@gid":"3","@x":"525","@y":"175","@width":"35","@height":"35"},{"@gid":"3","@x":"490","@y":"175","@width":"35","@height":"35"},{"@gid":"3","@x":"455","@y":"175","@width":"35","@height":"35"},{"@gid":"3","@x":"140","@y":"315","@width":"35","@height":"35"},{"@gid":"3","@x":"175","@y":"315","@width":"35","@height":"35"},{"@gid":"3","@x":"210","@y":"315","@width":"35","@height":"35"},{"@gid":"3","@x":"245","@y":"315","@width":"35","@height":"35"},{"@gid":"3","@x":"280","@y":"315","@width":"35","@height":"35"},{"@gid":"3","@x":"315","@y":"315","@width":"35","@height":"35"},{"@gid":"3","@x":"350","@y":"315","@width":"35","@height":"35"},{"@gid":"3","@x":"385","@y":"315","@width":"35","@height":"35"},{"@gid":"3","@x":"420","@y":"315","@width":"35","@height":"35"},{"@gid":"3","@x":"420","@y":"315","@width":"35","@height":"35"},{"@gid":"3","@x":"455","@y":"315","@width":"35","@height":"35"},{"@gid":"3","@x":"490","@y":"315","@width":"35","@height":"35"},{"@gid":"3","@x":"525","@y":"315","@width":"35","@height":"35"},{"@gid":"3","@x":"385","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"140","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"245","@y":"420","@width":"35","@height":"35"},{"@gid":"3","@x":"280","@y":"420","@width":"35","@height":"35"},{"@gid":"3","@x":"315","@y":"420","@width":"35","@height":"35"},{"@gid":"2","@x":"350","@y":"210","@width":"35","@height":"35"},{"@gid":"2","@x":"105","@y":"385","@width":"35","@height":"35"},{"@gid":"4","@x":"560","@y":"315","@width":"35","@height":"35"},{"@gid":"4","@x":"350","@y":"420","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"280","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"315","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"350","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"385","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"420","@width":"35","@height":"35"},{"@gid":"13","@x":"105","@y":"245","@width":"35","@height":"35"},{"@gid":"13","@x":"105","@y":"280","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"455","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"420","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"385","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"350","@width":"35","@height":"35"},{"@gid":"15","@x":"105","@y":"315","@width":"35","@height":"35"},{"@gid":"15","@x":"70","@y":"315","@width":"35","@height":"35"},{"@gid":"15","@x":"35","@y":"315","@width":"35","@height":"35"},{"@gid":"14","@x":"175","@y":"420","@width":"35","@height":"35"},{"@gid":"16","@x":"420","@y":"210","@width":"35","@height":"35"},{"@gid":"15","@x":"210","@y":"420","@width":"35","@height":"35"},{"@gid":"7","@x":"560","@y":"210","@width":"35","@height":"35"}]},{"@name":"active",object:[{"@gid":"27","@x":"299","@y":"367","@width":"31","@height":"34"},{"@gid":"27","@x":"238","@y":"108","@width":"31","@height":"34"},{"@gid":"27","@x":"494","@y":"223","@width":"31","@height":"34"},{"@type":"6","@gid":"17","@x":"44","@y":"455.5","@width":"24","@height":"11"},{"@type":"4","@gid":"17","@x":"318","@y":"281","@width":"24","@height":"11"},{"@type":"4","@gid":"19","@x":"138","@y":"265","@width":"20","@height":"70","@rotation":"-90"},{"@type":"6","@gid":"19","@x":"384","@y":"420","@width":"20","@height":"70","@rotation":"180"},{"@gid":"32","@x":"104","@y":"175","@width":"35","@height":"35"},{"@gid":"20","@x":"350","@y":"280","@width":"20","@height":"70"},{"@gid":"30","@x":"208","@y":"485","@width":"60","@height":"56"},{"@type":"5","@gid":"19","@x":"664","@y":"300","@width":"20","@height":"70","@rotation":"-90"},{"@type":"5","@gid":"18","@x":"491","@y":"141","@width":"25","@height":"19"},{"@gid":"29","@x":"174","@y":"280.5","@width":"60","@height":"55",properties:{property:[{"@name":"limitLeft","@value":"50"},{"@name":"limitRight","@value":"70"}]}}]},{"@name":"characters",object:[{"@gid":"24","@x":"20","@y":"176","@width":"44","@height":"52"},{"@gid":"28","@x":"511.5","@y":"280","@width":"63","@height":"50"}]},{"@name":"physics",object:[{"@x":"665","@y":"210","@width":"35","@height":"315"},{"@x":"595","@y":"420","@width":"70","@height":"105"},{"@x":"525","@y":"455","@width":"70","@height":"70"},{"@x":"35","@y":"490","@width":"490","@height":"35"},{"@x":"35","@y":"455","@width":"105","@height":"35"},{"@x":"35","@y":"280","@width":"560","@height":"35"},{"@x":"105","@y":"350","@width":"140","@height":"35"},{"@x":"175","@y":"385","@width":"210","@height":"35"},{"@x":"350","@y":"175","@width":"105","@height":"35"},{"@x":"420","@y":"140","@width":"175","@height":"35"},{"@x":"560","@y":"175","@width":"35","@height":"35"},{"@x":"0","@y":"175","@width":"140","@height":"105"},{"@x":"0","@y":"280","@width":"35","@height":"245"}]}]},{"@level":"6","@version":"1.0","@orientation":"orthogonal","@renderorder":"right-down","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@width":"35","@height":"35","@source":"tiles/singleTile.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"tiles/platformLeft.png"}},{"@id":"2",image:{"@width":"35","@height":"35","@source":"tiles/platformCenter.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"tiles/platformRight.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformTop.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformCenter.png"}},{"@id":"6",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformBottom.png"}},{"@id":"7",image:{"@width":"35","@height":"35","@source":"tiles/tileTopLeft.png"}},{"@id":"8",image:{"@width":"35","@height":"35","@source":"tiles/tileTopCenter.png"}},{"@id":"9",image:{"@width":"35","@height":"35","@source":"tiles/tileTopRight.png"}},{"@id":"10",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterLeft.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"tiles/tileCenter.png"}},{"@id":"12",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterRight.png"}},{"@id":"13",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomLeft.png"}},{"@id":"14",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomCenter.png"}},{"@id":"15",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"70",tile:[{"@id":"0",image:{"@width":"24","@height":"11","@source":"active/PushButtonGraphics.png"}},{"@id":"1",image:{"@width":"25","@height":"19","@source":"active/TriggerGraphics.png"}},{"@id":"2",image:{"@width":"20","@height":"70","@source":"active/DoorGraphics.png"}},{"@id":"3",image:{"@width":"20","@height":"70","@source":"active/GlassDoorGraphics.png"}},{"@id":"4",image:{"@width":"70","@height":"19","@source":"active/ElevatorGraphics.png"}},{"@id":"5",image:{"@width":"105","@height":"20","@source":"active/BigElevatorGraphics.png"}},{"@id":"6",image:{"@width":"70","@height":"70","@source":"active/ExitGraphics.png"}},{"@id":"7",image:{"@width":"44","@height":"52","@source":"characters/HustlerGraphics.png"}},{"@id":"8",image:{"@width":"32","@height":"22","@source":"active/CameraGraphics.png"}},{"@id":"9",image:{"@width":"15","@height":"15","@source":"characters/EnemyLimiterGraphics.png"}},{"@id":"10",image:{"@width":"31","@height":"34","@source":"passive/MoneyBagGraphics.png"}},{"@id":"11",image:{"@width":"63","@height":"50","@source":"characters/DogGraphics.png"}},{"@id":"12",image:{"@width":"60","@height":"55","@source":"characters/Prisoner2Graphics.png"}},{"@id":"13",image:{"@width":"60","@height":"56","@source":"characters/PrisonerGraphics.png"}}]},{"@firstgid":"31","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@width":"50","@height":"50","@source":"passive/BigBoxGraphics.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"passive/BoxGraphics.png"}},{"@id":"2",image:{"@width":"37","@height":"35","@source":"passive/ToiletGraphics.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"passive/MonitorGraphics.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"passive/BasketBallGraphics.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"passive/StoolGraphics.png"}},{"@id":"6",image:{"@width":"150","@height":"20","@source":"passive/PlankGraphics.png"}},{"@id":"7",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"8",image:{"@width":"210","@height":"20","@source":"passive/BigPlankGraphics.png"}},{"@id":"9",image:{"@width":"100","@height":"20","@source":"passive/Plank5Graphics.png"}},{"@id":"10",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"passive/MirrorGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"136",tile:[{"@id":"0",image:{"@width":"232","@height":"79","@source":"decor/LevelTextGraphics.png"}},{"@id":"1",image:{"@width":"54","@height":"20","@source":"decor/Decor1Graphics.png"}},{"@id":"2",image:{"@width":"54","@height":"20","@source":"decor/Decor2Graphics.png"}},{"@id":"3",image:{"@width":"33","@height":"27","@source":"decor/Decor3Graphics.png"}},{"@id":"4",image:{"@width":"34","@height":"25","@source":"decor/Decor4Graphics.png"}},{"@id":"5",image:{"@width":"22","@height":"31","@source":"decor/Decor5Graphics.png"}},{"@id":"6",image:{"@width":"126","@height":"59","@source":"decor/Decor6Graphics.png"}},{"@id":"7",image:{"@width":"25","@height":"21","@source":"decor/Decor8Graphics.png"}},{"@id":"8",image:{"@width":"18","@height":"22","@source":"decor/Decor9Graphics.png"}},{"@id":"9",image:{"@width":"35","@height":"58","@source":"decor/Decor10Graphics.png"}},{"@id":"10",image:{"@width":"19","@height":"66","@source":"decor/Decor11Graphics.png"}},{"@id":"11",image:{"@width":"23","@height":"33","@source":"decor/Decor12Graphics.png"}},{"@id":"12",image:{"@width":"38","@height":"26","@source":"decor/Decor13Graphics.png"}},{"@id":"13",image:{"@width":"43","@height":"78","@source":"decor/Decor14Graphics.png"}},{"@id":"14",image:{"@width":"60","@height":"86","@source":"decor/Decor15Graphics.png"}},{"@id":"15",image:{"@width":"41","@height":"69","@source":"decor/Decor16Graphics.png"}},{"@id":"16",image:{"@width":"55","@height":"58","@source":"decor/Decor17Graphics.png"}},{"@id":"17",image:{"@width":"57","@height":"54","@source":"decor/Decor18Graphics.png"}},{"@id":"18",image:{"@width":"18","@height":"45","@source":"decor/Decor19Graphics.png"}},{"@id":"19",image:{"@width":"41","@height":"49","@source":"decor/Decor20Graphics.png"}},{"@id":"20",image:{"@width":"51","@height":"38","@source":"decor/Decor21Graphics.png"}},{"@id":"21",image:{"@width":"54","@height":"54","@source":"decor/Decor22Graphics.png"}},{"@id":"22",image:{"@width":"63","@height":"136","@source":"decor/Decor23Graphics.png"}},{"@id":"23",image:{"@width":"21","@height":"39","@source":"decor/Decor24Graphics.png"}},{"@id":"24",image:{"@width":"104","@height":"50","@source":"decor/Decor25Graphics.png"}},{"@id":"25",image:{"@width":"104","@height":"46","@source":"decor/Decor26Graphics.png"}},{"@id":"26",image:{"@width":"86","@height":"38","@source":"decor/Decor27Graphics.png"}},{"@id":"27",image:{"@width":"63","@height":"55","@source":"decor/Decor28Graphics.png"}},{"@id":"28",image:{"@width":"13","@height":"23","@source":"decor/Decor29Graphics.png"}},{"@id":"29",image:{"@width":"28","@height":"40","@source":"decor/Decor30Graphics.png"}},{"@id":"30",image:{"@width":"69","@height":"30","@source":"decor/Decor31Graphics.png"}},{"@id":"31",image:{"@width":"33","@height":"29","@source":"decor/Decor32Graphics.png"}},{"@id":"32",image:{"@width":"42","@height":"42","@source":"decor/Decor33Graphics.png"}},{"@id":"33",image:{"@width":"60","@height":"66","@source":"decor/Decor34Graphics.png"}},{"@id":"34",image:{"@width":"46","@height":"65","@source":"decor/Decor35Graphics.png"}},{"@id":"35",image:{"@width":"71","@height":"55","@source":"decor/Decor36Graphics.png"}},{"@id":"36",image:{"@width":"35","@height":"55","@source":"decor/Decor37Graphics.png"}},{"@id":"37",image:{"@width":"28","@height":"29","@source":"decor/Decor38Graphics.png"}},{"@id":"38",image:{"@width":"38","@height":"37","@source":"decor/Decor39Graphics.png"}},{"@id":"39",image:{"@width":"103","@height":"50","@source":"decor/Decor40Graphics.png"}},{"@id":"40",image:{"@width":"56","@height":"55","@source":"decor/Decor41Graphics.png"}},{"@id":"41",image:{"@width":"71","@height":"50","@source":"decor/Decor42Graphics.png"}},{"@id":"42",image:{"@width":"232","@height":"79","@source":"decor/LevelTextGraphics.png"}}]}],imagelayer:{"@name":"background",image:{"@source":"bg/Background1Graphics.png"}},objectgroup:[{"@name":"decorations",object:[{"@gid":"45","@x":"350","@y":"229","@width":"54","@height":"20"},{"@gid":"69","@x":"385","@y":"385","@width":"86","@height":"38"},{"@gid":"80","@x":"420","@y":"350","@width":"28","@height":"29"},{"@gid":"83","@x":"79","@y":"185","@width":"56","@height":"55"},{"@gid":"53","@x":"595","@y":"105","@width":"19","@height":"66"},{"@gid":"54","@x":"175","@y":"471","@width":"23","@height":"33"},{"@gid":"51","@x":"560","@y":"455","@width":"18","@height":"22"},{"@gid":"57","@x":"163","@y":"231","@width":"60","@height":"86"},{"@gid":"43","@x":"315","@y":"140","@width":"232","@height":"79",properties:{property:{"@name":"text","@value":"Jumping skill"}}},{"@gid":"82","@x":"315","@y":"315"}]},{"@name":"tiles",object:[{"@gid":"12","@x":"0","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"350","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"35","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"560","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"525","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"455","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"490","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"280","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"385","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"315","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"175","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"140","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"105","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"210","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"595","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"0","@y":"490","@width":"35","@height":"35"},{"@gid":"12","@x":"105","@y":"35","@width":"35","@height":"35"},{"@gid":"12","@x":"70","@y":"70","@width":"35","@height":"35"},{"@gid":"10","@x":"70","@y":"455","@width":"35","@height":"35"},{"@gid":"13","@x":"70","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"245","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"420","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"630","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"665","@y":"525","@width":"35","@height":"35"},{"@gid":"5","@x":"595","@y":"490","@width":"35","@height":"35"},{"@gid":"16","@x":"490","@y":"420","@width":"35","@height":"35"},{"@gid":"8","@x":"490","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"455","@y":"420","@width":"35","@height":"35"},{"@gid":"3","@x":"420","@y":"420","@width":"35","@height":"35"},{"@gid":"3","@x":"385","@y":"420","@width":"35","@height":"35"},{"@gid":"16","@x":"595","@y":"385","@width":"35","@height":"35"},{"@gid":"9","@x":"350","@y":"420","@width":"35","@height":"35"},{"@gid":"14","@x":"140","@y":"420","@width":"35","@height":"35"},{"@gid":"6","@x":"595","@y":"315","@width":"35","@height":"35"},{"@gid":"6","@x":"595","@y":"280","@width":"35","@height":"35"},{"@gid":"13","@x":"595","@y":"245","@width":"35","@height":"35"},{"@gid":"13","@x":"595","@y":"210","@width":"35","@height":"35"},{"@gid":"14","@x":"560","@y":"245","@width":"35","@height":"35"},{"@gid":"3","@x":"315","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"455","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"490","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"525","@y":"210","@width":"35","@height":"35"},{"@gid":"9","@x":"280","@y":"210","@width":"35","@height":"35"},{"@gid":"8","@x":"245","@y":"210","@width":"35","@height":"35"},{"@gid":"16","@x":"280","@y":"245","@width":"35","@height":"35"},{"@gid":"6","@x":"350","@y":"490","@width":"35","@height":"35"},{"@gid":"6","@x":"350","@y":"455","@width":"35","@height":"35"},{"@gid":"12","@x":"35","@y":"490","@width":"35","@height":"35"},{"@gid":"12","@x":"70","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"35","@y":"455","@width":"35","@height":"35"},{"@gid":"12","@x":"0","@y":"455","@width":"35","@height":"35"},{"@gid":"10","@x":"35","@y":"385","@width":"35","@height":"35"},{"@gid":"13","@x":"35","@y":"420","@width":"35","@height":"35"},{"@gid":"12","@x":"0","@y":"420","@width":"35","@height":"35"},{"@gid":"3","@x":"140","@y":"245","@width":"35","@height":"35"},{"@gid":"9","@x":"105","@y":"245","@width":"35","@height":"35"},{"@gid":"9","@x":"70","@y":"245","@width":"35","@height":"35"},{"@gid":"16","@x":"105","@y":"280","@width":"35","@height":"35"},{"@gid":"15","@x":"70","@y":"280","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"245","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"175","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"210","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"140","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"105","@width":"35","@height":"35"},{"@gid":"14","@x":"70","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"105","@y":"105","@width":"35","@height":"35"},{"@gid":"15","@x":"140","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"210","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"175","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"245","@y":"105","@width":"35","@height":"35"},{"@gid":"10","@x":"280","@y":"105","@width":"35","@height":"35"},{"@gid":"7","@x":"280","@y":"140","@width":"35","@height":"35"},{"@gid":"6","@x":"140","@y":"70","@width":"35","@height":"35"},{"@gid":"13","@x":"140","@y":"35","@width":"35","@height":"35"},{"@gid":"15","@x":"35","@y":"70","@width":"35","@height":"35"},{"@gid":"12","@x":"0","@y":"70","@width":"35","@height":"35"},{"@gid":"12","@x":"0","@y":"35","@width":"35","@height":"35"},{"@gid":"12","@x":"35","@y":"35","@width":"35","@height":"35"},{"@gid":"12","@x":"70","@y":"35","@width":"35","@height":"35"},{"@gid":"3","@x":"175","@y":"245","@width":"35","@height":"35"},{"@gid":"3","@x":"210","@y":"245","@width":"35","@height":"35"},{"@gid":"15","@x":"245","@y":"245","@width":"35","@height":"35"},{"@gid":"3","@x":"350","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"385","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"420","@y":"210","@width":"35","@height":"35"},{"@gid":"12","@x":"560","@y":"210","@width":"35","@height":"35"},{"@gid":"9","@x":"560","@y":"175","@width":"35","@height":"35"},{"@gid":"10","@x":"595","@y":"175","@width":"35","@height":"35"},{"@gid":"9","@x":"560","@y":"350","@width":"35","@height":"35"},{"@gid":"13","@x":"595","@y":"350","@width":"35","@height":"35"},{"@gid":"11","@x":"490","@y":"385","@width":"35","@height":"35"},{"@gid":"15","@x":"560","@y":"385","@width":"35","@height":"35"},{"@gid":"9","@x":"525","@y":"350","@width":"35","@height":"35"},{"@gid":"15","@x":"525","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"35","@y":"280","@width":"35","@height":"35"},{"@gid":"15","@x":"175","@y":"420"},{"@gid":"8","@x":"140","@y":"385"},{"@gid":"2","@x":"315","@y":"350"},{"@gid":"4","@x":"350","@y":"350"},{"@gid":"3","@x":"280","@y":"420","@width":"35","@height":"35"},{"@gid":"3","@x":"210","@y":"420","@width":"35","@height":"35"},{"@gid":"3","@x":"245","@y":"420","@width":"35","@height":"35"},{"@gid":"3","@x":"315","@y":"420","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"350"},{"@gid":"13","@x":"0","@y":"315"},{"@gid":"12","@x":"0","@y":"280"},{"@gid":"12","@x":"0","@y":"385","@width":"35","@height":"35"},{"@gid":"13","@x":"175","@y":"385"},{"@gid":"8","@x":"175","@y":"350"},{"@gid":"4","@x":"210","@y":"350"},{"@x":"140","@y":"350","@width":"70","@height":"35"},{"@x":"175","@y":"315","@width":"70","@height":"35"}]},{"@name":"active",object:[{"@gid":"30","@x":"385","@y":"385","@width":"60","@height":"56"},{"@type":"2","@gid":"21","@x":"630","@y":"475","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"295"},{"@name":"speedY","@value":"-45"}]}},{"@type":"2","@gid":"17","@x":"530","@y":"316","@width":"24","@height":"11"},{"@gid":"35","@x":"182","@y":"70","@width":"35","@height":"35"},{"@type":"3","@gid":"19","@x":"175","@y":"64","@width":"20","@height":"70","@rotation":"-90"},{"@type":"3","@gid":"17","@x":"490","@y":"175","@width":"24","@height":"11"},{"@gid":"17","@x":"40","@y":"246","@width":"24","@height":"11"},{"@gid":"27","@x":"420","@y":"254","@width":"31","@height":"34"},{"@gid":"27","@x":"654","@y":"106","@width":"31","@height":"34"},{"@gid":"27","@x":"316","@y":"385","@width":"31","@height":"34"},{"@gid":"25","@x":"210","@y":"371","@width":"32","@height":"22",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"180"},{"@name":"minAngle","@value":"180"},{"@name":"speedX","@value":"1"}]}},{"@gid":"19","@x":"376","@y":"350","@width":"20","@height":"70","@rotation":"180"}]},{"@name":"characters",object:[{"@gid":"24","@x":"275","@y":"492","@width":"44","@height":"52"},{"@gid":"28","@x":"455","@y":"490","@width":"63","@height":"50"}]},{"@name":"physics",object:[{"@x":"0","@y":"420","@width":"105","@height":"105"},{"@x":"0","@y":"350","@width":"70","@height":"70"},{"@x":"105","@y":"490","@width":"595","@height":"35"},{"@x":"595","@y":"455","@width":"35","@height":"35"},{"@x":"350","@y":"420","@width":"35","@height":"70"},{"@x":"140","@y":"385","@width":"385","@height":"35"},{"@x":"315","@y":"315","@width":"70","@height":"35"},{"@x":"490","@y":"315","@width":"140","@height":"70"},{"@x":"560","@y":"140","@width":"70","@height":"105"},{"@x":"595","@y":"245","@width":"35","@height":"70"},{"@x":"245","@y":"175","@width":"315","@height":"35"},{"@x":"70","@y":"210","@width":"245","@height":"35"},{"@x":"35","@y":"0","@width":"140","@height":"70"},{"@x":"70","@y":"70","@width":"245","@height":"35"},{"@x":"280","@y":"105","@width":"35","@height":"35"},{"@x":"0","@y":"0","@width":"35","@height":"350"},{"@x":"35","@y":"245","@width":"105","@height":"35"}]}]},{"@level":"7","@version":"1.0","@orientation":"orthogonal","@renderorder":"right-down","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@width":"35","@height":"35","@source":"tiles/singleTile.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"tiles/platformLeft.png"}},{"@id":"2",image:{"@width":"35","@height":"35","@source":"tiles/platformCenter.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"tiles/platformRight.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformTop.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformCenter.png"}},{"@id":"6",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformBottom.png"}},{"@id":"7",image:{"@width":"35","@height":"35","@source":"tiles/tileTopLeft.png"}},{"@id":"8",image:{"@width":"35","@height":"35","@source":"tiles/tileTopCenter.png"}},{"@id":"9",image:{"@width":"35","@height":"35","@source":"tiles/tileTopRight.png"}},{"@id":"10",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterLeft.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"tiles/tileCenter.png"}},{"@id":"12",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterRight.png"}},{"@id":"13",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomLeft.png"}},{"@id":"14",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomCenter.png"}},{"@id":"15",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"70",tile:[{"@id":"0",image:{"@width":"24","@height":"11","@source":"active/PushButtonGraphics.png"}},{"@id":"1",image:{"@width":"25","@height":"19","@source":"active/TriggerGraphics.png"}},{"@id":"2",image:{"@width":"20","@height":"70","@source":"active/DoorGraphics.png"}},{"@id":"3",image:{"@width":"20","@height":"70","@source":"active/GlassDoorGraphics.png"}},{"@id":"4",image:{"@width":"70","@height":"19","@source":"active/ElevatorGraphics.png"}},{"@id":"5",image:{"@width":"105","@height":"20","@source":"active/BigElevatorGraphics.png"}},{"@id":"6",image:{"@width":"70","@height":"70","@source":"active/ExitGraphics.png"}},{"@id":"7",image:{"@width":"44","@height":"52","@source":"characters/HustlerGraphics.png"}},{"@id":"8",image:{"@width":"32","@height":"22","@source":"active/CameraGraphics.png"}},{"@id":"9",image:{"@width":"15","@height":"15","@source":"characters/EnemyLimiterGraphics.png"}},{"@id":"10",image:{"@width":"31","@height":"34","@source":"passive/MoneyBagGraphics.png"}},{"@id":"11",image:{"@width":"63","@height":"50","@source":"characters/DogGraphics.png"}},{"@id":"12",image:{"@width":"60","@height":"55","@source":"characters/Prisoner2Graphics.png"}},{"@id":"13",image:{"@width":"60","@height":"56","@source":"characters/PrisonerGraphics.png"}}]},{"@firstgid":"31","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@width":"50","@height":"50","@source":"passive/BigBoxGraphics.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"passive/BoxGraphics.png"}},{"@id":"2",image:{"@width":"37","@height":"35","@source":"passive/ToiletGraphics.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"passive/MonitorGraphics.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"passive/BasketBallGraphics.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"passive/StoolGraphics.png"}},{"@id":"6",image:{"@width":"150","@height":"20","@source":"passive/PlankGraphics.png"}},{"@id":"7",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"8",image:{"@width":"210","@height":"20","@source":"passive/BigPlankGraphics.png"}},{"@id":"9",image:{"@width":"100","@height":"20","@source":"passive/Plank5Graphics.png"}},{"@id":"10",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"passive/MirrorGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"136",tile:[{"@id":"0",image:{"@width":"232","@height":"79","@source":"decor/LevelTextGraphics.png"}},{"@id":"1",image:{"@width":"54","@height":"20","@source":"decor/Decor1Graphics.png"}},{"@id":"2",image:{"@width":"54","@height":"20","@source":"decor/Decor2Graphics.png"}},{"@id":"3",image:{"@width":"33","@height":"27","@source":"decor/Decor3Graphics.png"}},{"@id":"4",image:{"@width":"34","@height":"25","@source":"decor/Decor4Graphics.png"}},{"@id":"5",image:{"@width":"22","@height":"31","@source":"decor/Decor5Graphics.png"}},{"@id":"6",image:{"@width":"126","@height":"59","@source":"decor/Decor6Graphics.png"}},{"@id":"7",image:{"@width":"25","@height":"21","@source":"decor/Decor8Graphics.png"}},{"@id":"8",image:{"@width":"18","@height":"22","@source":"decor/Decor9Graphics.png"}},{"@id":"9",image:{"@width":"35","@height":"58","@source":"decor/Decor10Graphics.png"}},{"@id":"10",image:{"@width":"19","@height":"66","@source":"decor/Decor11Graphics.png"}},{"@id":"11",image:{"@width":"23","@height":"33","@source":"decor/Decor12Graphics.png"}},{"@id":"12",image:{"@width":"38","@height":"26","@source":"decor/Decor13Graphics.png"}},{"@id":"13",image:{"@width":"43","@height":"78","@source":"decor/Decor14Graphics.png"}},{"@id":"14",image:{"@width":"60","@height":"86","@source":"decor/Decor15Graphics.png"}},{"@id":"15",image:{"@width":"41","@height":"69","@source":"decor/Decor16Graphics.png"}},{"@id":"16",image:{"@width":"55","@height":"58","@source":"decor/Decor17Graphics.png"}},{"@id":"17",image:{"@width":"57","@height":"54","@source":"decor/Decor18Graphics.png"}},{"@id":"18",image:{"@width":"18","@height":"45","@source":"decor/Decor19Graphics.png"}},{"@id":"19",image:{"@width":"41","@height":"49","@source":"decor/Decor20Graphics.png"}},{"@id":"20",image:{"@width":"51","@height":"38","@source":"decor/Decor21Graphics.png"}},{"@id":"21",image:{"@width":"54","@height":"54","@source":"decor/Decor22Graphics.png"}},{"@id":"22",image:{"@width":"63","@height":"136","@source":"decor/Decor23Graphics.png"}},{"@id":"23",image:{"@width":"21","@height":"39","@source":"decor/Decor24Graphics.png"}},{"@id":"24",image:{"@width":"104","@height":"50","@source":"decor/Decor25Graphics.png"}},{"@id":"25",image:{"@width":"104","@height":"46","@source":"decor/Decor26Graphics.png"}},{"@id":"26",image:{"@width":"86","@height":"38","@source":"decor/Decor27Graphics.png"}},{"@id":"27",image:{"@width":"63","@height":"55","@source":"decor/Decor28Graphics.png"}},{"@id":"28",image:{"@width":"13","@height":"23","@source":"decor/Decor29Graphics.png"}},{"@id":"29",image:{"@width":"28","@height":"40","@source":"decor/Decor30Graphics.png"}},{"@id":"30",image:{"@width":"69","@height":"30","@source":"decor/Decor31Graphics.png"}},{"@id":"31",image:{"@width":"33","@height":"29","@source":"decor/Decor32Graphics.png"}},{"@id":"32",image:{"@width":"42","@height":"42","@source":"decor/Decor33Graphics.png"}},{"@id":"33",image:{"@width":"60","@height":"66","@source":"decor/Decor34Graphics.png"}},{"@id":"34",image:{"@width":"46","@height":"65","@source":"decor/Decor35Graphics.png"}},{"@id":"35",image:{"@width":"71","@height":"55","@source":"decor/Decor36Graphics.png"}},{"@id":"36",image:{"@width":"35","@height":"55","@source":"decor/Decor37Graphics.png"}},{"@id":"37",image:{"@width":"28","@height":"29","@source":"decor/Decor38Graphics.png"}},{"@id":"38",image:{"@width":"38","@height":"37","@source":"decor/Decor39Graphics.png"}},{"@id":"39",image:{"@width":"103","@height":"50","@source":"decor/Decor40Graphics.png"}},{"@id":"40",image:{"@width":"56","@height":"55","@source":"decor/Decor41Graphics.png"}},{"@id":"41",image:{"@width":"71","@height":"50","@source":"decor/Decor42Graphics.png"}},{"@id":"42",image:{"@width":"200","@height":"44","@source":"decor/TxtGraphics.png"}}]}],imagelayer:{"@name":"background",image:{"@source":"bg/Background1Graphics.png"}},objectgroup:[{"@name":"decorations",object:[{"@gid":"43","@x":"105","@y":"175","@width":"232","@height":"79",properties:{property:{"@name":"text","@value":"Boxes"}}},{"@gid":"84","@x":"420","@y":"140","@width":"71","@height":"50"},{"@gid":"51","@x":"584","@y":"320","@width":"18","@height":"22"},{"@gid":"67","@x":"175","@y":"350","@width":"104","@height":"50"},{"@gid":"78","@x":"391","@y":"350","@width":"71","@height":"55"},{"@gid":"45","@x":"175","@y":"229","@width":"54","@height":"20"},{"@gid":"44","@x":"569","@y":"264","@width":"54","@height":"20"}]},{"@name":"tiles",object:[{"@gid":"12","@x":"-132","@y":"-197","@width":"35","@height":"35"},{"@gid":"12","@x":"-97","@y":"-197","@width":"35","@height":"35"},{"@gid":"12","@x":"0","@y":"490","@width":"35","@height":"35"},{"@gid":"12","@x":"-62","@y":"-197","@width":"35","@height":"35"},{"@gid":"12","@x":"175","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"0","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"35","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"595","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"315","@y":"315","@width":"35","@height":"35"},{"@gid":"3","@x":"70","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"35","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"0","@y":"105","@width":"35","@height":"35"},{"@gid":"16","@x":"105","@y":"105","@width":"35","@height":"35"},{"@gid":"8","@x":"105","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"210","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"175","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"140","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"315","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"280","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"245","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"455","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"420","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"385","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"490","@y":"70","@width":"35","@height":"35"},{"@gid":"9","@x":"350","@y":"70","@width":"35","@height":"35"},{"@gid":"10","@x":"525","@y":"70","@width":"35","@height":"35"},{"@gid":"14","@x":"525","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"560","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"595","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"630","@y":"105","@width":"35","@height":"35"},{"@gid":"9","@x":"665","@y":"105","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"140","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"175","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"595","@y":"245","@width":"35","@height":"35"},{"@gid":"3","@x":"630","@y":"245","@width":"35","@height":"35"},{"@gid":"2","@x":"560","@y":"245","@width":"35","@height":"35"},{"@gid":"15","@x":"665","@y":"245","@width":"35","@height":"35"},{"@gid":"6","@x":"350","@y":"105","@width":"35","@height":"35"},{"@gid":"6","@x":"350","@y":"140","@width":"35","@height":"35"},{"@gid":"6","@x":"350","@y":"175","@width":"35","@height":"35"},{"@gid":"3","@x":"385","@y":"210","@width":"35","@height":"35"},{"@gid":"10","@x":"455","@y":"210","@width":"35","@height":"35"},{"@gid":"16","@x":"455","@y":"280","@width":"35","@height":"35"},{"@gid":"3","@x":"385","@y":"280","@width":"35","@height":"35"},{"@gid":"15","@x":"420","@y":"280","@width":"35","@height":"35"},{"@gid":"13","@x":"350","@y":"315","@width":"35","@height":"35"},{"@gid":"6","@x":"350","@y":"350","@width":"35","@height":"35"},{"@gid":"9","@x":"315","@y":"280","@width":"35","@height":"35"},{"@gid":"8","@x":"280","@y":"280","@width":"35","@height":"35"},{"@gid":"11","@x":"280","@y":"315","@width":"35","@height":"35"},{"@gid":"6","@x":"280","@y":"350","@width":"35","@height":"35"},{"@gid":"16","@x":"280","@y":"385","@width":"35","@height":"35"},{"@gid":"11","@x":"350","@y":"385","@width":"35","@height":"35"},{"@gid":"7","@x":"350","@y":"420","@width":"35","@height":"35"},{"@gid":"3","@x":"245","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"210","@y":"385","@width":"35","@height":"35"},{"@gid":"9","@x":"175","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"140","@y":"385","@width":"35","@height":"35"},{"@gid":"14","@x":"70","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"245","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"140","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"210","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"175","@y":"210","@width":"35","@height":"35"},{"@gid":"4","@x":"280","@y":"210","@width":"35","@height":"35"},{"@gid":"10","@x":"0","@y":"420","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"455","@width":"35","@height":"35"},{"@gid":"10","@x":"35","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"70","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"105","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"140","@y":"525","@width":"35","@height":"35"},{"@gid":"6","@x":"175","@y":"420","@width":"35","@height":"35"},{"@gid":"6","@x":"175","@y":"455","@width":"35","@height":"35"},{"@gid":"6","@x":"175","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"210","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"245","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"280","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"315","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"420","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"385","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"350","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"455","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"560","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"525","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"490","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"665","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"630","@y":"525","@width":"35","@height":"35"},{"@gid":"5","@x":"595","@y":"490","@width":"35","@height":"35"},{"@gid":"4","@x":"595","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"560","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"525","@y":"385","@width":"35","@height":"35"},{"@gid":"9","@x":"490","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"385","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"420","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"455","@y":"385","@width":"35","@height":"35"},{"@gid":"7","@x":"490","@y":"420","@width":"35","@height":"35"},{"@gid":"8","@x":"105","@y":"210","@width":"35","@height":"35"},{"@gid":"16","@x":"105","@y":"245","@width":"35","@height":"35"},{"@gid":"3","@x":"70","@y":"245","@width":"35","@height":"35"},{"@gid":"3","@x":"0","@y":"245","@width":"35","@height":"35"},{"@gid":"3","@x":"35","@y":"245","@width":"35","@height":"35"},{"@gid":"6","@x":"350","@y":"245","@width":"35","@height":"35"},{"@gid":"12","@x":"350","@y":"280","@width":"35","@height":"35"},{"@gid":"11","@x":"350","@y":"210","@width":"35","@height":"35"},{"@gid":"15","@x":"105","@y":"385","@width":"35","@height":"35"},{"@gid":"8","@x":"70","@y":"350","@width":"35","@height":"35"},{"@gid":"10","@x":"105","@y":"350","@width":"35","@height":"35"},{"@gid":"9","@x":"420","@y":"210","@width":"35","@height":"35"},{"@gid":"13","@x":"455","@y":"245","@width":"35","@height":"35"},{"@gid":"11","@x":"420","@y":"245","@width":"35","@height":"35"}]},{"@name":"active",object:[{"@type":"3","@gid":"19","@x":"385","@y":"215","@width":"20","@height":"70","@rotation":"90"},{"@type":"2","@gid":"21","@x":"631","@y":"369","@width":"70","@height":"19",properties:{property:[{"@name":"distanceX","@value":"0"},{"@name":"distanceY","@value":"100"},{"@name":"speedX","@value":"0"},{"@name":"speedY","@value":"45"}]}},{"@gid":"19","@x":"385","@y":"371","@width":"20","@height":"70","@rotation":"-90"},{"@gid":"17","@x":"322","@y":"491","@width":"24","@height":"11"},{"@type":"2","@gid":"17","@x":"39","@y":"456","@width":"24","@height":"11"},{"@type":"5","@gid":"17","@x":"539","@y":"491","@width":"24","@height":"11"},{"@type":"4","@gid":"21","@x":"490","@y":"229.5","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"120"},{"@name":"speedY","@value":"45"}]}},{"@type":"5","@gid":"19","@x":"358","@y":"490","@width":"20","@height":"70"},{"@type":"6","@gid":"20","@x":"518","@y":"420","@width":"20","@height":"70","@rotation":"180"},{"@gid":"27","@x":"598","@y":"168","@width":"31","@height":"34"},{"@gid":"27","@x":"649","@y":"443","@width":"31","@height":"34"},{"@gid":"27","@x":"115","@y":"456","@width":"31","@height":"34"},{"@type":"3","@gid":"17","@x":"427","@y":"175.5","@width":"24","@height":"11"},{"@gid":"30","@x":"140","@y":"352","@width":"60","@height":"56"},{"@type":"4","@gid":"17","@x":"94","@y":"315","@width":"24","@height":"11"},{"@gid":"32","@x":"315","@y":"245","@width":"35","@height":"35"},{"@gid":"32","@x":"315","@y":"350","@width":"35","@height":"35"},{"@gid":"30","@x":"385","@y":"490","@width":"60","@height":"56",properties:{property:[{"@name":"distance","@value":"100"},{"@name":"distanceX","@value":"50"}]}},{"@gid":"74","@x":"245","@y":"455","@width":"33","@height":"29"}]},{"@name":"characters",object:[{"@gid":"24","@x":"35","@y":"210","@width":"44","@height":"52"},{"@gid":"28","@x":"490","@y":"210","@width":"63","@height":"50"}]},{"@name":"physics",object:[{"@x":"0","@y":"385","@width":"35","@height":"140"},{"@x":"35","@y":"455","@width":"35","@height":"70"},{"@x":"70","@y":"490","@width":"630","@height":"35"},{"@x":"595","@y":"455","@width":"35","@height":"35"},{"@x":"175","@y":"385","@width":"35","@height":"105"},{"@x":"70","@y":"350","@width":"245","@height":"35"},{"@x":"70","@y":"315","@width":"70","@height":"35"},{"@x":"280","@y":"280","@width":"35","@height":"70"},{"@x":"280","@y":"245","@width":"105","@height":"35"},{"@x":"385","@y":"350","@width":"245","@height":"35"},{"@x":"490","@y":"385","@width":"35","@height":"35"},{"@x":"385","@y":"175","@width":"105","@height":"105"},{"@x":"0","@y":"210","@width":"140","@height":"35"},{"@x":"105","@y":"175","@width":"210","@height":"35"},{"@x":"0","@y":"70","@width":"140","@height":"35"},{"@x":"105","@y":"35","@width":"455","@height":"35"},{"@x":"525","@y":"70","@width":"175","@height":"35"},{"@x":"665","@y":"105","@width":"35","@height":"105"},{"@x":"560","@y":"210","@width":"140","@height":"35"},{"@x":"350","@y":"70","@width":"35","@height":"350"}]}]},{"@level":"8","@version":"1.0","@orientation":"orthogonal","@renderorder":"right-down","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@width":"35","@height":"35","@source":"tiles/singleTile.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"tiles/platformLeft.png"}},{"@id":"2",image:{"@width":"35","@height":"35","@source":"tiles/platformCenter.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"tiles/platformRight.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformTop.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformCenter.png"}},{"@id":"6",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformBottom.png"}},{"@id":"7",image:{"@width":"35","@height":"35","@source":"tiles/tileTopLeft.png"}},{"@id":"8",image:{"@width":"35","@height":"35","@source":"tiles/tileTopCenter.png"}},{"@id":"9",image:{"@width":"35","@height":"35","@source":"tiles/tileTopRight.png"}},{"@id":"10",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterLeft.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"tiles/tileCenter.png"}},{"@id":"12",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterRight.png"}},{"@id":"13",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomLeft.png"}},{"@id":"14",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomCenter.png"}},{"@id":"15",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"70",tile:[{"@id":"0",image:{"@width":"24","@height":"11","@source":"active/PushButtonGraphics.png"}},{"@id":"1",image:{"@width":"25","@height":"19","@source":"active/TriggerGraphics.png"}},{"@id":"2",image:{"@width":"20","@height":"70","@source":"active/DoorGraphics.png"}},{"@id":"3",image:{"@width":"20","@height":"70","@source":"active/GlassDoorGraphics.png"}},{"@id":"4",image:{"@width":"70","@height":"19","@source":"active/ElevatorGraphics.png"}},{"@id":"5",image:{"@width":"105","@height":"20","@source":"active/BigElevatorGraphics.png"}},{"@id":"6",image:{"@width":"70","@height":"70","@source":"active/ExitGraphics.png"}},{"@id":"7",image:{"@width":"44","@height":"52","@source":"characters/HustlerGraphics.png"}},{"@id":"8",image:{"@width":"32","@height":"22","@source":"active/CameraGraphics.png"}},{"@id":"9",image:{"@width":"15","@height":"15","@source":"characters/EnemyLimiterGraphics.png"}},{"@id":"10",image:{"@width":"31","@height":"34","@source":"passive/MoneyBagGraphics.png"}},{"@id":"11",image:{"@width":"63","@height":"50","@source":"characters/DogGraphics.png"}},{"@id":"12",image:{"@width":"60","@height":"55","@source":"characters/Prisoner2Graphics.png"}},{"@id":"13",image:{"@width":"60","@height":"56","@source":"characters/PrisonerGraphics.png"}},{"@id":"14",image:{"@width":"50","@height":"29","@source":"active/TurrelGraphics.png"}}]},{"@firstgid":"32","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@width":"50","@height":"50","@source":"passive/BigBoxGraphics.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"passive/BoxGraphics.png"}},{"@id":"2",image:{"@width":"37","@height":"35","@source":"passive/ToiletGraphics.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"passive/MonitorGraphics.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"passive/BasketBallGraphics.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"passive/StoolGraphics.png"}},{"@id":"6",image:{"@width":"150","@height":"20","@source":"passive/PlankGraphics.png"}},{"@id":"7",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"8",image:{"@width":"210","@height":"20","@source":"passive/BigPlankGraphics.png"}},{"@id":"9",image:{"@width":"100","@height":"20","@source":"passive/Plank5Graphics.png"}},{"@id":"10",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"passive/MirrorGraphics.png"}}]},{"@firstgid":"44","@name":"decor","@tilewidth":"232","@tileheight":"136",tile:[{"@id":"0",image:{"@width":"232","@height":"79","@source":"decor/LevelTextGraphics.png"}},{"@id":"1",image:{"@width":"54","@height":"20","@source":"decor/Decor1Graphics.png"}},{"@id":"2",image:{"@width":"54","@height":"20","@source":"decor/Decor2Graphics.png"}},{"@id":"3",image:{"@width":"33","@height":"27","@source":"decor/Decor3Graphics.png"}},{"@id":"4",image:{"@width":"34","@height":"25","@source":"decor/Decor4Graphics.png"}},{"@id":"5",image:{"@width":"22","@height":"31","@source":"decor/Decor5Graphics.png"}},{"@id":"6",image:{"@width":"126","@height":"59","@source":"decor/Decor6Graphics.png"}},{"@id":"7",image:{"@width":"25","@height":"21","@source":"decor/Decor8Graphics.png"}},{"@id":"8",image:{"@width":"18","@height":"22","@source":"decor/Decor9Graphics.png"}},{"@id":"9",image:{"@width":"35","@height":"58","@source":"decor/Decor10Graphics.png"}},{"@id":"10",image:{"@width":"19","@height":"66","@source":"decor/Decor11Graphics.png"}},{"@id":"11",image:{"@width":"23","@height":"33","@source":"decor/Decor12Graphics.png"}},{"@id":"12",image:{"@width":"38","@height":"26","@source":"decor/Decor13Graphics.png"}},{"@id":"13",image:{"@width":"43","@height":"78","@source":"decor/Decor14Graphics.png"}},{"@id":"14",image:{"@width":"60","@height":"86","@source":"decor/Decor15Graphics.png"}},{"@id":"15",image:{"@width":"41","@height":"69","@source":"decor/Decor16Graphics.png"}},{"@id":"16",image:{"@width":"55","@height":"58","@source":"decor/Decor17Graphics.png"}},{"@id":"17",image:{"@width":"57","@height":"54","@source":"decor/Decor18Graphics.png"}},{"@id":"18",image:{"@width":"18","@height":"45","@source":"decor/Decor19Graphics.png"}},{"@id":"19",image:{"@width":"41","@height":"49","@source":"decor/Decor20Graphics.png"}},{"@id":"20",image:{"@width":"51","@height":"38","@source":"decor/Decor21Graphics.png"}},{"@id":"21",image:{"@width":"54","@height":"54","@source":"decor/Decor22Graphics.png"}},{"@id":"22",image:{"@width":"63","@height":"136","@source":"decor/Decor23Graphics.png"}},{"@id":"23",image:{"@width":"21","@height":"39","@source":"decor/Decor24Graphics.png"}},{"@id":"24",image:{"@width":"104","@height":"50","@source":"decor/Decor25Graphics.png"}},{"@id":"25",image:{"@width":"104","@height":"46","@source":"decor/Decor26Graphics.png"}},{"@id":"26",image:{"@width":"86","@height":"38","@source":"decor/Decor27Graphics.png"}},{"@id":"27",image:{"@width":"63","@height":"55","@source":"decor/Decor28Graphics.png"}},{"@id":"28",image:{"@width":"13","@height":"23","@source":"decor/Decor29Graphics.png"}},{"@id":"29",image:{"@width":"28","@height":"40","@source":"decor/Decor30Graphics.png"}},{"@id":"30",image:{"@width":"69","@height":"30","@source":"decor/Decor31Graphics.png"}},{"@id":"31",image:{"@width":"33","@height":"29","@source":"decor/Decor32Graphics.png"}},{"@id":"32",image:{"@width":"42","@height":"42","@source":"decor/Decor33Graphics.png"}},{"@id":"33",image:{"@width":"60","@height":"66","@source":"decor/Decor34Graphics.png"}},{"@id":"34",image:{"@width":"46","@height":"65","@source":"decor/Decor35Graphics.png"}},{"@id":"35",image:{"@width":"71","@height":"55","@source":"decor/Decor36Graphics.png"}},{"@id":"36",image:{"@width":"35","@height":"55","@source":"decor/Decor37Graphics.png"}},{"@id":"37",image:{"@width":"28","@height":"29","@source":"decor/Decor38Graphics.png"}},{"@id":"38",image:{"@width":"38","@height":"37","@source":"decor/Decor39Graphics.png"}},{"@id":"39",image:{"@width":"103","@height":"50","@source":"decor/Decor40Graphics.png"}},{"@id":"40",image:{"@width":"56","@height":"55","@source":"decor/Decor41Graphics.png"}},{"@id":"41",image:{"@width":"71","@height":"50","@source":"decor/Decor42Graphics.png"}},{"@id":"42",image:{"@width":"232","@height":"79","@source":"decor/LevelTextGraphics.png"}},{"@id":"43",image:{"@width":"97","@height":"69","@source":"decor/Tip1Graphics.png"}},{"@id":"44",image:{"@width":"97","@height":"69","@source":"decor/Tip2Graphics.png"}},{"@id":"45",image:{"@width":"97","@height":"69","@source":"decor/Tip3Graphics.png"}},{"@id":"46",image:{"@width":"97","@height":"69","@source":"decor/Tip4Graphics.png"}},{"@id":"47",image:{"@width":"78","@height":"96","@source":"decor/Tip5Graphics.png"}},{"@id":"48",image:{"@width":"78","@height":"96","@source":"decor/Tip6Graphics.png"}},{"@id":"49",image:{"@width":"97","@height":"69","@source":"decor/Tip7Graphics.png"}},{"@id":"50",image:{"@width":"200","@height":"44","@source":"decor/TxtGraphics.png"}}]}],imagelayer:{"@name":"background",image:{"@source":"bg/Background1Graphics.png"}},objectgroup:[{"@name":"decorations",object:[{"@gid":"44","@x":"-448","@y":"8","@width":"232","@height":"79",properties:{property:{"@name":"text","@value":"Burglary"}}},{"@gid":"50","@x":"490","@y":"140","@width":"126","@height":"59"},{"@gid":"70","@x":"490","@y":"490","@width":"86","@height":"38"},{"@gid":"82","@x":"490","@y":"420","@width":"38","@height":"37"}]},{"@name":"tiles",object:[{"@gid":"12","@x":"140","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"560","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"525","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"490","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"455","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"420","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"385","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"350","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"315","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"280","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"245","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"210","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"175","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"175","@y":"175","@width":"35","@height":"35"},{"@gid":"9","@x":"210","@y":"175","@width":"35","@height":"35"},{"@gid":"9","@x":"245","@y":"175","@width":"35","@height":"35"},{"@gid":"9","@x":"280","@y":"175","@width":"35","@height":"35"},{"@gid":"10","@x":"70","@y":"350","@width":"35","@height":"35"},{"@gid":"10","@x":"525","@y":"280","@width":"35","@height":"35"},{"@gid":"8","@x":"665","@y":"175","@width":"35","@height":"35"},{"@gid":"8","@x":"140","@y":"70","@width":"35","@height":"35"},{"@gid":"8","@x":"490","@y":"280","@width":"35","@height":"35"},{"@gid":"2","@x":"350","@y":"455","@width":"35","@height":"35"},{"@gid":"2","@x":"630","@y":"210","@width":"35","@height":"35"},{"@gid":"2","@x":"70","@y":"245","@width":"35","@height":"35"},{"@gid":"4","@x":"420","@y":"455","@width":"35","@height":"35"},{"@gid":"4","@x":"385","@y":"175","@width":"35","@height":"35"},{"@gid":"3","@x":"315","@y":"315","@width":"35","@height":"35"},{"@gid":"3","@x":"350","@y":"315","@width":"35","@height":"35"},{"@gid":"3","@x":"385","@y":"315","@width":"35","@height":"35"},{"@gid":"3","@x":"420","@y":"315","@width":"35","@height":"35"},{"@gid":"3","@x":"455","@y":"315","@width":"35","@height":"35"},{"@gid":"3","@x":"350","@y":"175","@width":"35","@height":"35"},{"@gid":"3","@x":"315","@y":"175","@width":"35","@height":"35"},{"@gid":"3","@x":"175","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"210","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"245","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"280","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"315","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"350","@y":"70","@width":"35","@height":"35"},{"@gid":"16","@x":"385","@y":"70","@width":"35","@height":"35"},{"@gid":"16","@x":"280","@y":"385","@width":"35","@height":"35"},{"@gid":"16","@x":"140","@y":"245","@width":"35","@height":"35"},{"@gid":"3","@x":"105","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"105","@y":"245","@width":"35","@height":"35"},{"@gid":"3","@x":"105","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"70","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"35","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"0","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"560","@y":"315","@width":"35","@height":"35"},{"@gid":"15","@x":"525","@y":"315","@width":"35","@height":"35"},{"@gid":"15","@x":"490","@y":"315","@width":"35","@height":"35"},{"@gid":"15","@x":"35","@y":"385","@width":"35","@height":"35"},{"@gid":"15","@x":"210","@y":"210","@width":"35","@height":"35"},{"@gid":"15","@x":"175","@y":"210","@width":"35","@height":"35"},{"@gid":"14","@x":"245","@y":"385","@width":"35","@height":"35"},{"@gid":"15","@x":"665","@y":"210","@width":"35","@height":"35"},{"@gid":"6","@x":"385","@y":"35","@width":"35","@height":"35"},{"@gid":"6","@x":"140","@y":"140","@width":"35","@height":"35"},{"@gid":"11","@x":"140","@y":"210","@width":"35","@height":"35"},{"@gid":"11","@x":"140","@y":"175","@width":"35","@height":"35"},{"@gid":"13","@x":"140","@y":"105","@width":"35","@height":"35"},{"@gid":"13","@x":"280","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"385","@y":"455","@width":"35","@height":"35"},{"@gid":"63","@x":"385","@y":"420","@width":"41","@height":"49"},{"@gid":"74","@x":"175","@y":"105","@width":"69","@height":"30"},{"@gid":"68","@x":"245","@y":"140","@width":"104","@height":"50"},{"@gid":"44","@x":"407","@y":"243","@width":"232","@height":"79",properties:{property:{"@name":"text","@value":"Rubber bullets"}}},{"@gid":"4","@x":"140","@y":"385"},{"@gid":"10","@x":"140","@y":"490"},{"@gid":"12","@x":"105","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"70","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"35","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"0","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"105","@y":"490"},{"@gid":"9","@x":"70","@y":"490"},{"@gid":"9","@x":"35","@y":"490"},{"@gid":"12","@x":"0","@y":"490"},{"@gid":"12","@x":"0","@y":"385"},{"@gid":"13","@x":"0","@y":"455"},{"@gid":"13","@x":"0","@y":"420"},{"@gid":"10","@x":"0","@y":"315","@width":"35","@height":"35"},{"@gid":"12","@x":"0","@y":"350"},{"@gid":"15","@x":"70","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"595","@y":"315","@width":"35","@height":"35"},{"@gid":"9","@x":"35","@y":"350"},{"@gid":"9","@x":"595","@y":"525","@width":"35","@height":"35"},{"@gid":"13","@x":"280","@y":"210"},{"@gid":"12","@x":"245","@y":"210"},{"@gid":"11","@x":"245","@y":"245"},{"@gid":"11","@x":"245","@y":"280"},{"@gid":"11","@x":"245","@y":"315"},{"@gid":"11","@x":"245","@y":"350"},{"@gid":"13","@x":"280","@y":"245"},{"@gid":"13","@x":"280","@y":"280"},{"@gid":"12","@x":"280","@y":"315"},{"@gid":"12","@x":"630","@y":"525"},{"@gid":"12","@x":"665","@y":"525"},{"@gid":"8","@x":"630","@y":"490"},{"@gid":"9","@x":"665","@y":"490"},{"@gid":"7","@x":"630","@y":"350"},{"@gid":"10","@x":"630","@y":"315"}]},{"@name":"active",object:[{"@gid":"30","@x":"497","@y":"491","@width":"60","@height":"56"},{"@gid":"30","@x":"271","@y":"142","@width":"60","@height":"56",properties:{property:[{"@name":"distance","@value":"100"},{"@name":"distanceX","@value":"50"}]}},{"@gid":"19","@x":"665","@y":"210","@width":"20","@height":"70","@rotation":"180"},{"@gid":"17","@x":"385","@y":"420","@width":"24","@height":"11"},{"@type":"5","@gid":"17","@x":"109","@y":"211","@width":"24","@height":"11"},{"@gid":"32","@x":"192","@y":"280","@width":"50","@height":"50"},{"@gid":"27","@x":"385","@y":"366","@width":"31","@height":"34"},{"@gid":"27","@x":"534","@y":"95","@width":"31","@height":"34"},{"@gid":"27","@x":"22","@y":"159","@width":"31","@height":"34"},{"@gid":"31","@x":"649","@y":"141","@width":"50","@height":"29"},{"@type":"5","@gid":"19","@x":"399","@y":"140","@width":"20","@height":"70"},{"@gid":"26","@x":"395","@y":"114","@width":"15","@height":"15"},{"@type":"3","@gid":"19","@x":"96","@y":"245","@width":"20","@height":"70","@rotation":"180"},{"@type":"6","@gid":"19","@x":"245","@y":"302","@width":"20","@height":"70","@rotation":"270"},{"@type":"3","@gid":"17","@x":"665","@y":"455","@width":"24","@height":"11"},{"@type":"6","@gid":"18","@x":"333","@y":"280"}]},{"@name":"characters",object:[{"@gid":"24","@x":"385","@y":"280","@width":"44","@height":"52",properties:{property:[{"@name":"distanceY","@value":"300"},{"@name":"speedY","@value":"45"}]}},{"@gid":"28","@x":"35","@y":"455","@width":"63","@height":"50"}]},{"@name":"physics",object:[{"@x":"0","@y":"70","@width":"140","@height":"35"},{"@x":"140","@y":"70","@width":"35","@height":"175"},{"@x":"70","@y":"210","@width":"70","@height":"35"},{"@x":"665","@y":"140","@width":"35","@height":"35"},{"@x":"630","@y":"175","@width":"70","@height":"35"},{"@x":"490","@y":"245","@width":"70","@height":"35"},{"@x":"315","@y":"280","@width":"350","@height":"35"},{"@x":"245","@y":"210","@width":"70","@height":"175"},{"@x":"350","@y":"420","@width":"105","@height":"35"},{"@x":"630","@y":"455","@width":"70","@height":"35"},{"@x":"0","@y":"490","@width":"700","@height":"35"},{"@x":"0","@y":"385","@width":"35","@height":"105"},{"@x":"0","@y":"350","@width":"175","@height":"35"},{"@x":"0","@y":"315","@width":"105","@height":"35"},{"@x":"35","@y":"455","@width":"140","@height":"35"},{"@x":"175","@y":"140","@width":"245","@height":"35"},{"@x":"175","@y":"175","@width":"140","@height":"35"},{"@x":"0","@y":"0","@width":"420","@height":"70"},{"@x":"0","@y":"280","@width":"35","@height":"35"},{"@x":"630","@y":"315","@width":"35","@height":"35"}]}]},{"@level":"9","@version":"1.0","@orientation":"orthogonal","@renderorder":"right-down","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@width":"35","@height":"35","@source":"tiles/singleTile.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"tiles/platformLeft.png"}},{"@id":"2",image:{"@width":"35","@height":"35","@source":"tiles/platformCenter.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"tiles/platformRight.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformTop.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformCenter.png"}},{"@id":"6",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformBottom.png"}},{"@id":"7",image:{"@width":"35","@height":"35","@source":"tiles/tileTopLeft.png"}},{"@id":"8",image:{"@width":"35","@height":"35","@source":"tiles/tileTopCenter.png"}},{"@id":"9",image:{"@width":"35","@height":"35","@source":"tiles/tileTopRight.png"}},{"@id":"10",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterLeft.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"tiles/tileCenter.png"}},{"@id":"12",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterRight.png"}},{"@id":"13",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomLeft.png"}},{"@id":"14",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomCenter.png"}},{"@id":"15",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"70",tile:[{"@id":"0",image:{"@width":"24","@height":"11","@source":"active/PushButtonGraphics.png"}},{"@id":"1",image:{"@width":"25","@height":"19","@source":"active/TriggerGraphics.png"}},{"@id":"2",image:{"@width":"20","@height":"70","@source":"active/DoorGraphics.png"}},{"@id":"3",image:{"@width":"20","@height":"70","@source":"active/GlassDoorGraphics.png"}},{"@id":"4",image:{"@width":"70","@height":"19","@source":"active/ElevatorGraphics.png"}},{"@id":"5",image:{"@width":"105","@height":"20","@source":"active/BigElevatorGraphics.png"}},{"@id":"6",image:{"@width":"70","@height":"70","@source":"active/ExitGraphics.png"}},{"@id":"7",image:{"@width":"44","@height":"52","@source":"characters/HustlerGraphics.png"}},{"@id":"8",image:{"@width":"32","@height":"22","@source":"active/CameraGraphics.png"}},{"@id":"9",image:{"@width":"15","@height":"15","@source":"characters/EnemyLimiterGraphics.png"}},{"@id":"10",image:{"@width":"31","@height":"34","@source":"passive/MoneyBagGraphics.png"}},{"@id":"11",image:{"@width":"63","@height":"50","@source":"characters/DogGraphics.png"}},{"@id":"12",image:{"@width":"60","@height":"55","@source":"characters/Prisoner2Graphics.png"}},{"@id":"13",image:{"@width":"60","@height":"56","@source":"characters/PrisonerGraphics.png"}}]},{"@firstgid":"31","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@width":"50","@height":"50","@source":"passive/BigBoxGraphics.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"passive/BoxGraphics.png"}},{"@id":"2",image:{"@width":"37","@height":"35","@source":"passive/ToiletGraphics.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"passive/MonitorGraphics.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"passive/BasketBallGraphics.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"passive/StoolGraphics.png"}},{"@id":"6",image:{"@width":"150","@height":"20","@source":"passive/PlankGraphics.png"}},{"@id":"7",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"8",image:{"@width":"210","@height":"20","@source":"passive/BigPlankGraphics.png"}},{"@id":"9",image:{"@width":"100","@height":"20","@source":"passive/Plank5Graphics.png"}},{"@id":"10",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"passive/MirrorGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"136",tile:[{"@id":"0",image:{"@width":"232","@height":"79","@source":"decor/LevelTextGraphics.png"}},{"@id":"1",image:{"@width":"54","@height":"20","@source":"decor/Decor1Graphics.png"}},{"@id":"2",image:{"@width":"54","@height":"20","@source":"decor/Decor2Graphics.png"}},{"@id":"3",image:{"@width":"33","@height":"27","@source":"decor/Decor3Graphics.png"}},{"@id":"4",image:{"@width":"34","@height":"25","@source":"decor/Decor4Graphics.png"}},{"@id":"5",image:{"@width":"22","@height":"31","@source":"decor/Decor5Graphics.png"}},{"@id":"6",image:{"@width":"126","@height":"59","@source":"decor/Decor6Graphics.png"}},{"@id":"7",image:{"@width":"25","@height":"21","@source":"decor/Decor8Graphics.png"}},{"@id":"8",image:{"@width":"18","@height":"22","@source":"decor/Decor9Graphics.png"}},{"@id":"9",image:{"@width":"35","@height":"58","@source":"decor/Decor10Graphics.png"}},{"@id":"10",image:{"@width":"19","@height":"66","@source":"decor/Decor11Graphics.png"}},{"@id":"11",image:{"@width":"23","@height":"33","@source":"decor/Decor12Graphics.png"}},{"@id":"12",image:{"@width":"38","@height":"26","@source":"decor/Decor13Graphics.png"}},{"@id":"13",image:{"@width":"43","@height":"78","@source":"decor/Decor14Graphics.png"}},{"@id":"14",image:{"@width":"60","@height":"86","@source":"decor/Decor15Graphics.png"}},{"@id":"15",image:{"@width":"41","@height":"69","@source":"decor/Decor16Graphics.png"}},{"@id":"16",image:{"@width":"55","@height":"58","@source":"decor/Decor17Graphics.png"}},{"@id":"17",image:{"@width":"57","@height":"54","@source":"decor/Decor18Graphics.png"}},{"@id":"18",image:{"@width":"18","@height":"45","@source":"decor/Decor19Graphics.png"}},{"@id":"19",image:{"@width":"41","@height":"49","@source":"decor/Decor20Graphics.png"}},{"@id":"20",image:{"@width":"51","@height":"38","@source":"decor/Decor21Graphics.png"}},{"@id":"21",image:{"@width":"54","@height":"54","@source":"decor/Decor22Graphics.png"}},{"@id":"22",image:{"@width":"63","@height":"136","@source":"decor/Decor23Graphics.png"}},{"@id":"23",image:{"@width":"21","@height":"39","@source":"decor/Decor24Graphics.png"}},{"@id":"24",image:{"@width":"104","@height":"50","@source":"decor/Decor25Graphics.png"}},{"@id":"25",image:{"@width":"104","@height":"46","@source":"decor/Decor26Graphics.png"}},{"@id":"26",image:{"@width":"86","@height":"38","@source":"decor/Decor27Graphics.png"}},{"@id":"27",image:{"@width":"63","@height":"55","@source":"decor/Decor28Graphics.png"}},{"@id":"28",image:{"@width":"13","@height":"23","@source":"decor/Decor29Graphics.png"}},{"@id":"29",image:{"@width":"28","@height":"40","@source":"decor/Decor30Graphics.png"}},{"@id":"30",image:{"@width":"69","@height":"30","@source":"decor/Decor31Graphics.png"}},{"@id":"31",image:{"@width":"33","@height":"29","@source":"decor/Decor32Graphics.png"}},{"@id":"32",image:{"@width":"42","@height":"42","@source":"decor/Decor33Graphics.png"}},{"@id":"33",image:{"@width":"60","@height":"66","@source":"decor/Decor34Graphics.png"}},{"@id":"34",image:{"@width":"46","@height":"65","@source":"decor/Decor35Graphics.png"}},{"@id":"35",image:{"@width":"71","@height":"55","@source":"decor/Decor36Graphics.png"}},{"@id":"36",image:{"@width":"35","@height":"55","@source":"decor/Decor37Graphics.png"}},{"@id":"37",image:{"@width":"28","@height":"29","@source":"decor/Decor38Graphics.png"}},{"@id":"38",image:{"@width":"38","@height":"37","@source":"decor/Decor39Graphics.png"}},{"@id":"39",image:{"@width":"103","@height":"50","@source":"decor/Decor40Graphics.png"}},{"@id":"40",image:{"@width":"56","@height":"55","@source":"decor/Decor41Graphics.png"}},{"@id":"41",image:{"@width":"71","@height":"50","@source":"decor/Decor42Graphics.png"}},{"@id":"42",image:{"@width":"200","@height":"44","@source":"decor/TxtGraphics.png"}}]}],imagelayer:{"@name":"background",image:{"@source":"bg/Background1Graphics.png"}},objectgroup:[{"@name":"decorations",object:[{"@gid":"44","@x":"420","@y":"372","@width":"54","@height":"20"},{"@gid":"67","@x":"385","@y":"455","@width":"104","@height":"50"},{"@gid":"69","@x":"385","@y":"315","@width":"86","@height":"38"},{"@gid":"75","@x":"420","@y":"280","@width":"42","@height":"42"},{"@gid":"57","@x":"105","@y":"455","@width":"60","@height":"86"},{"@gid":"65","@x":"175","@y":"376","@width":"63","@height":"136"},{"@gid":"54","@x":"127","@y":"268","@width":"23","@height":"33"},{"@gid":"84","@x":"350","@y":"175","@width":"71","@height":"50"},{"@gid":"49","@x":"560","@y":"160","@width":"126","@height":"59"},{"@gid":"50","@x":"140","@y":"105","@width":"25","@height":"21"}]},{"@name":"tiles",properties:{property:{"@name":"physics","@value":"true"}},object:[{"@gid":"12","@x":"245","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"0","@y":"350","@width":"35","@height":"35"},{"@gid":"12","@x":"35","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"630","@y":"490","@width":"35","@height":"35"},{"@gid":"12","@x":"665","@y":"245","@width":"35","@height":"35"},{"@gid":"12","@x":"0","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"665","@y":"420","@width":"35","@height":"35"},{"@gid":"12","@x":"70","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"0","@y":"490","@width":"35","@height":"35"},{"@gid":"12","@x":"140","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"665","@y":"455","@width":"35","@height":"35"},{"@gid":"12","@x":"105","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"665","@y":"490","@width":"35","@height":"35"},{"@gid":"12","@x":"350","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"385","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"525","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"455","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"420","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"490","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"630","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"560","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"595","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"665","@y":"525","@width":"35","@height":"35"},{"@gid":"8","@x":"560","@y":"210","@width":"35","@height":"35"},{"@gid":"8","@x":"525","@y":"315","@width":"35","@height":"35"},{"@gid":"8","@x":"630","@y":"420","@width":"35","@height":"35"},{"@gid":"8","@x":"105","@y":"315","@width":"35","@height":"35"},{"@gid":"8","@x":"105","@y":"175","@width":"35","@height":"35"},{"@gid":"8","@x":"350","@y":"490","@width":"35","@height":"35"},{"@gid":"8","@x":"350","@y":"350","@width":"35","@height":"35"},{"@gid":"8","@x":"455","@y":"140","@width":"35","@height":"35"},{"@gid":"10","@x":"245","@y":"175","@width":"35","@height":"35"},{"@gid":"10","@x":"560","@y":"315","@width":"35","@height":"35"},{"@gid":"10","@x":"140","@y":"490","@width":"35","@height":"35"},{"@gid":"10","@x":"140","@y":"315","@width":"35","@height":"35"},{"@gid":"10","@x":"490","@y":"140","@width":"35","@height":"35"},{"@gid":"10","@x":"0","@y":"175","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"455","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"420","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"385","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"315","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"280","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"245","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"210","@width":"35","@height":"35"},{"@gid":"9","@x":"35","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"70","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"105","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"385","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"420","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"455","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"490","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"525","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"560","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"595","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"595","@y":"210","@width":"35","@height":"35"},{"@gid":"9","@x":"630","@y":"210","@width":"35","@height":"35"},{"@gid":"9","@x":"665","@y":"210","@width":"35","@height":"35"},{"@gid":"14","@x":"560","@y":"245","@width":"35","@height":"35"},{"@gid":"15","@x":"630","@y":"245","@width":"35","@height":"35"},{"@gid":"15","@x":"595","@y":"245","@width":"35","@height":"35"},{"@gid":"15","@x":"105","@y":"350","@width":"35","@height":"35"},{"@gid":"14","@x":"105","@y":"210","@width":"35","@height":"35"},{"@gid":"7","@x":"490","@y":"245","@width":"35","@height":"35"},{"@gid":"7","@x":"350","@y":"245","@width":"35","@height":"35"},{"@gid":"7","@x":"350","@y":"385","@width":"35","@height":"35"},{"@gid":"13","@x":"490","@y":"175","@width":"35","@height":"35"},{"@gid":"13","@x":"490","@y":"210","@width":"35","@height":"35"},{"@gid":"16","@x":"140","@y":"210","@width":"35","@height":"35"},{"@gid":"16","@x":"140","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"35","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"70","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"280","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"315","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"385","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"420","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"210","@y":"175","@width":"35","@height":"35"},{"@gid":"3","@x":"175","@y":"175","@width":"35","@height":"35"},{"@gid":"3","@x":"385","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"420","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"455","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"490","@y":"350","@width":"35","@height":"35"},{"@gid":"15","@x":"525","@y":"350","@width":"35","@height":"35"},{"@gid":"15","@x":"560","@y":"350","@width":"35","@height":"35"},{"@gid":"9","@x":"140","@y":"175","@width":"35","@height":"35"},{"@gid":"9","@x":"350","@y":"210","@width":"35","@height":"35"},{"@gid":"6","@x":"245","@y":"490","@width":"35","@height":"35"},{"@gid":"6","@x":"245","@y":"455","@width":"35","@height":"35"},{"@gid":"6","@x":"245","@y":"420","@width":"35","@height":"35"},{"@gid":"6","@x":"245","@y":"385","@width":"35","@height":"35"},{"@gid":"6","@x":"245","@y":"350","@width":"35","@height":"35"},{"@gid":"6","@x":"245","@y":"315","@width":"35","@height":"35"},{"@gid":"6","@x":"245","@y":"280","@width":"35","@height":"35"},{"@gid":"6","@x":"245","@y":"245","@width":"35","@height":"35"},{"@gid":"11","@x":"245","@y":"210","@width":"35","@height":"35"},{"@gid":"9","@x":"175","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"210","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"315","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"280","@y":"525","@width":"35","@height":"35"},{"@gid":"11","@x":"630","@y":"455","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"280","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"315","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"350","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"385","@width":"35","@height":"35"},{"@gid":"4","@x":"595","@y":"350","@width":"35","@height":"35"},{"@gid":"15","@x":"455","@y":"210","@width":"35","@height":"35"},{"@gid":"11","@x":"455","@y":"175","@width":"35","@height":"35"}]},{"@name":"active",object:[{"@gid":"30","@x":"435","@y":"316","@width":"60","@height":"56"},{"@type":"2","@gid":"21","@x":"280","@y":"474","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"140"},{"@name":"speedY","@value":"-45"}]}},{"@type":"3","@gid":"19","@x":"350","@y":"455","@width":"20","@height":"70"},{"@type":"2","@gid":"17","@x":"54","@y":"456","@width":"24","@height":"11"},{"@type":"3","@gid":"18","@x":"567","@y":"280","@width":"25","@height":"19"},{"@gid":"25","@x":"303","@y":"230","@width":"32","@height":"22",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"90"},{"@name":"minAngle","@value":"90"},{"@name":"speedX","@value":"0"}]}},{"@gid":"20","@x":"351","@y":"315","@width":"20","@height":"70"},{"@type":"2","@gid":"21","@x":"35","@y":"160","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"139"},{"@name":"speedY","@value":"45"}]}},{"@type":"5","@gid":"21","@x":"175","@y":"301.5","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"174"},{"@name":"speedY","@value":"45"}]}},{"@type":"5","@gid":"17","@x":"56.3333","@y":"316.167","@width":"24","@height":"11"},{"@gid":"27","@x":"618","@y":"107","@width":"31","@height":"34"},{"@gid":"27","@x":"195","@y":"223","@width":"31","@height":"34"},{"@gid":"27","@x":"578","@y":"390","@width":"31","@height":"34"},{"@gid":"42","@x":"298","@y":"456","@width":"35","@height":"35"},{"@gid":"26","@x":"349","@y":"433","@width":"15","@height":"15"},{"@gid":"26","@x":"519","@y":"304","@width":"15","@height":"15"},{"@gid":"29","@x":"490","@y":"455","@width":"60","@height":"55"}]},{"@name":"characters",object:[{"@gid":"24","@x":"104","@y":"456","@width":"44","@height":"52"},{"@gid":"28","@x":"338","@y":"175","@width":"63","@height":"50"}]},{"@name":"physics",object:[{"@x":"105","@y":"140","@width":"175","@height":"35"},{"@x":"105","@y":"175","@width":"70","@height":"35"},{"@x":"245","@y":"175","@width":"210","@height":"35"},{"@x":"455","@y":"105","@width":"70","@height":"105"},{"@x":"490","@y":"210","@width":"35","@height":"35"},{"@x":"560","@y":"175","@width":"140","@height":"70"},{"@x":"665","@y":"245","@width":"35","@height":"140"},{"@x":"350","@y":"455","@width":"280","@height":"70"},{"@x":"630","@y":"385","@width":"70","@height":"140"},{"@x":"350","@y":"315","@width":"280","@height":"35"},{"@x":"525","@y":"280","@width":"70","@height":"35"},{"@x":"350","@y":"350","@width":"35","@height":"35"},{"@x":"245","@y":"210","@width":"35","@height":"280"},{"@x":"0","@y":"490","@width":"350","@height":"35"},{"@x":"0","@y":"455","@width":"175","@height":"35"},{"@x":"0","@y":"140","@width":"35","@height":"315"},{"@x":"35","@y":"315","@width":"70","@height":"35"},{"@x":"105","@y":"280","@width":"70","@height":"70"},{"@x":"350","@y":"210","@width":"35","@height":"35"},{"@gid":"43","@x":"245","@y":"140","@width":"232","@height":"79",properties:{property:{"@name":"text","@value":"Exchange"}}}]}]},{"@level":"10","@version":"1.0","@orientation":"orthogonal","@renderorder":"right-down","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@width":"35","@height":"35","@source":"tiles/singleTile.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"tiles/platformLeft.png"}},{"@id":"2",image:{"@width":"35","@height":"35","@source":"tiles/platformCenter.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"tiles/platformRight.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformTop.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformCenter.png"}},{"@id":"6",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformBottom.png"}},{"@id":"7",image:{"@width":"35","@height":"35","@source":"tiles/tileTopLeft.png"}},{"@id":"8",image:{"@width":"35","@height":"35","@source":"tiles/tileTopCenter.png"}},{"@id":"9",image:{"@width":"35","@height":"35","@source":"tiles/tileTopRight.png"}},{"@id":"10",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterLeft.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"tiles/tileCenter.png"}},{"@id":"12",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterRight.png"}},{"@id":"13",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomLeft.png"}},{"@id":"14",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomCenter.png"}},{"@id":"15",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"70",tile:[{"@id":"0",image:{"@width":"24","@height":"11","@source":"active/PushButtonGraphics.png"}},{"@id":"1",image:{"@width":"25","@height":"19","@source":"active/TriggerGraphics.png"}},{"@id":"2",image:{"@width":"20","@height":"70","@source":"active/DoorGraphics.png"}},{"@id":"3",image:{"@width":"20","@height":"70","@source":"active/GlassDoorGraphics.png"}},{"@id":"4",image:{"@width":"70","@height":"19","@source":"active/ElevatorGraphics.png"}},{"@id":"5",image:{"@width":"105","@height":"20","@source":"active/BigElevatorGraphics.png"}},{"@id":"6",image:{"@width":"70","@height":"70","@source":"active/ExitGraphics.png"}},{"@id":"7",image:{"@width":"44","@height":"52","@source":"characters/HustlerGraphics.png"}},{"@id":"8",image:{"@width":"32","@height":"22","@source":"active/CameraGraphics.png"}},{"@id":"9",image:{"@width":"15","@height":"15","@source":"characters/EnemyLimiterGraphics.png"}},{"@id":"10",image:{"@width":"31","@height":"34","@source":"passive/MoneyBagGraphics.png"}},{"@id":"11",image:{"@width":"63","@height":"50","@source":"characters/DogGraphics.png"}},{"@id":"12",image:{"@width":"60","@height":"55","@source":"characters/Prisoner2Graphics.png"}},{"@id":"13",image:{"@width":"60","@height":"56","@source":"characters/PrisonerGraphics.png"}}]},{"@firstgid":"31","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@width":"50","@height":"50","@source":"passive/BigBoxGraphics.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"passive/BoxGraphics.png"}},{"@id":"2",image:{"@width":"37","@height":"35","@source":"passive/ToiletGraphics.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"passive/MonitorGraphics.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"passive/BasketBallGraphics.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"passive/StoolGraphics.png"}},{"@id":"6",image:{"@width":"150","@height":"20","@source":"passive/PlankGraphics.png"}},{"@id":"7",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"8",image:{"@width":"210","@height":"20","@source":"passive/BigPlankGraphics.png"}},{"@id":"9",image:{"@width":"100","@height":"20","@source":"passive/Plank5Graphics.png"}},{"@id":"10",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"passive/MirrorGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"136",tile:[{"@id":"0",image:{"@width":"232","@height":"79","@source":"decor/LevelTextGraphics.png"}},{"@id":"1",image:{"@width":"54","@height":"20","@source":"decor/Decor1Graphics.png"}},{"@id":"2",image:{"@width":"54","@height":"20","@source":"decor/Decor2Graphics.png"}},{"@id":"3",image:{"@width":"33","@height":"27","@source":"decor/Decor3Graphics.png"}},{"@id":"4",image:{"@width":"34","@height":"25","@source":"decor/Decor4Graphics.png"}},{"@id":"5",image:{"@width":"22","@height":"31","@source":"decor/Decor5Graphics.png"}},{"@id":"6",image:{"@width":"126","@height":"59","@source":"decor/Decor6Graphics.png"}},{"@id":"7",image:{"@width":"25","@height":"21","@source":"decor/Decor8Graphics.png"}},{"@id":"8",image:{"@width":"18","@height":"22","@source":"decor/Decor9Graphics.png"}},{"@id":"9",image:{"@width":"35","@height":"58","@source":"decor/Decor10Graphics.png"}},{"@id":"10",image:{"@width":"19","@height":"66","@source":"decor/Decor11Graphics.png"}},{"@id":"11",image:{"@width":"23","@height":"33","@source":"decor/Decor12Graphics.png"}},{"@id":"12",image:{"@width":"38","@height":"26","@source":"decor/Decor13Graphics.png"}},{"@id":"13",image:{"@width":"43","@height":"78","@source":"decor/Decor14Graphics.png"}},{"@id":"14",image:{"@width":"60","@height":"86","@source":"decor/Decor15Graphics.png"}},{"@id":"15",image:{"@width":"41","@height":"69","@source":"decor/Decor16Graphics.png"}},{"@id":"16",image:{"@width":"55","@height":"58","@source":"decor/Decor17Graphics.png"}},{"@id":"17",image:{"@width":"57","@height":"54","@source":"decor/Decor18Graphics.png"}},{"@id":"18",image:{"@width":"18","@height":"45","@source":"decor/Decor19Graphics.png"}},{"@id":"19",image:{"@width":"41","@height":"49","@source":"decor/Decor20Graphics.png"}},{"@id":"20",image:{"@width":"51","@height":"38","@source":"decor/Decor21Graphics.png"}},{"@id":"21",image:{"@width":"54","@height":"54","@source":"decor/Decor22Graphics.png"}},{"@id":"22",image:{"@width":"63","@height":"136","@source":"decor/Decor23Graphics.png"}},{"@id":"23",image:{"@width":"21","@height":"39","@source":"decor/Decor24Graphics.png"}},{"@id":"24",image:{"@width":"104","@height":"50","@source":"decor/Decor25Graphics.png"}},{"@id":"25",image:{"@width":"104","@height":"46","@source":"decor/Decor26Graphics.png"}},{"@id":"26",image:{"@width":"86","@height":"38","@source":"decor/Decor27Graphics.png"}},{"@id":"27",image:{"@width":"63","@height":"55","@source":"decor/Decor28Graphics.png"}},{"@id":"28",image:{"@width":"13","@height":"23","@source":"decor/Decor29Graphics.png"}},{"@id":"29",image:{"@width":"28","@height":"40","@source":"decor/Decor30Graphics.png"}},{"@id":"30",image:{"@width":"69","@height":"30","@source":"decor/Decor31Graphics.png"}},{"@id":"31",image:{"@width":"33","@height":"29","@source":"decor/Decor32Graphics.png"}},{"@id":"32",image:{"@width":"42","@height":"42","@source":"decor/Decor33Graphics.png"}},{"@id":"33",image:{"@width":"60","@height":"66","@source":"decor/Decor34Graphics.png"}},{"@id":"34",image:{"@width":"46","@height":"65","@source":"decor/Decor35Graphics.png"}},{"@id":"35",image:{"@width":"71","@height":"55","@source":"decor/Decor36Graphics.png"}},{"@id":"36",image:{"@width":"35","@height":"55","@source":"decor/Decor37Graphics.png"}},{"@id":"37",image:{"@width":"28","@height":"29","@source":"decor/Decor38Graphics.png"}},{"@id":"38",image:{"@width":"38","@height":"37","@source":"decor/Decor39Graphics.png"}},{"@id":"39",image:{"@width":"103","@height":"50","@source":"decor/Decor40Graphics.png"}},{"@id":"40",image:{"@width":"56","@height":"55","@source":"decor/Decor41Graphics.png"}},{"@id":"41",image:{"@width":"71","@height":"50","@source":"decor/Decor42Graphics.png"}},{"@id":"42",image:{"@width":"200","@height":"44","@source":"decor/TxtGraphics.png"}}]}],imagelayer:{"@name":"background","@y":"1",image:{"@source":"bg/Background1Graphics.png"}},objectgroup:[{"@name":"decorations",object:[{"@gid":"47","@x":"455","@y":"245","@width":"34","@height":"25"},{"@gid":"49","@x":"70","@y":"210","@width":"126","@height":"59"},{"@gid":"55","@x":"595","@y":"455","@width":"38","@height":"26"},{"@gid":"56","@x":"582","@y":"373","@width":"43","@height":"78"},{"@gid":"78","@x":"385","@y":"483","@width":"71","@height":"55"},{"@gid":"68","@x":"119","@y":"490","@width":"104","@height":"46"},{"@gid":"43","@x":"95","@y":"419","@width":"232","@height":"79",properties:{property:{"@name":"text","@value":"Pitfall"}}},{"@gid":"72","@x":"160","@y":"453"},{"@gid":"75","@x":"264","@y":"455"}]},{"@name":"tiles",object:[{"@gid":"12","@x":"0","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"595","@y":"525","@width":"35","@height":"35"},{"@gid":"4","@x":"35","@y":"245","@width":"35","@height":"35"},{"@gid":"9","@x":"0","@y":"245","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"280","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"315","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"350","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"385","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"455","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"420","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"35","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"70","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"105","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"140","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"175","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"210","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"245","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"315","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"350","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"280","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"420","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"385","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"455","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"490","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"525","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"560","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"630","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"665","@y":"525","@width":"35","@height":"35"},{"@gid":"5","@x":"595","@y":"490","@width":"35","@height":"35"},{"@gid":"4","@x":"595","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"560","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"525","@y":"385","@width":"35","@height":"35"},{"@gid":"14","@x":"490","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"455","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"420","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"385","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"350","@y":"350","@width":"35","@height":"35"},{"@gid":"6","@x":"490","@y":"315","@width":"35","@height":"35"},{"@gid":"8","@x":"490","@y":"280","@width":"35","@height":"35"},{"@gid":"3","@x":"525","@y":"280","@width":"35","@height":"35"},{"@gid":"3","@x":"560","@y":"280","@width":"35","@height":"35"},{"@gid":"3","@x":"595","@y":"280","@width":"35","@height":"35"},{"@gid":"3","@x":"630","@y":"280","@width":"35","@height":"35"},{"@gid":"15","@x":"665","@y":"280","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"245","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"210","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"175","@width":"35","@height":"35"},{"@gid":"4","@x":"595","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"560","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"525","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"490","@y":"210","@width":"35","@height":"35"},{"@gid":"5","@x":"455","@y":"175","@width":"35","@height":"35"},{"@gid":"14","@x":"455","@y":"210","@width":"35","@height":"35"},{"@gid":"8","@x":"315","@y":"210","@width":"35","@height":"35"},{"@gid":"4","@x":"350","@y":"210","@width":"35","@height":"35"},{"@gid":"6","@x":"315","@y":"245","@width":"35","@height":"35"},{"@gid":"6","@x":"315","@y":"280","@width":"35","@height":"35"},{"@gid":"6","@x":"315","@y":"315","@width":"35","@height":"35"},{"@gid":"11","@x":"315","@y":"350","@width":"35","@height":"35"},{"@gid":"6","@x":"315","@y":"385","@width":"35","@height":"35"},{"@gid":"7","@x":"315","@y":"420","@width":"35","@height":"35"},{"@gid":"7","@x":"70","@y":"385","@width":"35","@height":"35"},{"@gid":"6","@x":"70","@y":"350","@width":"35","@height":"35"},{"@gid":"8","@x":"70","@y":"315","@width":"35","@height":"35"},{"@gid":"3","@x":"105","@y":"315","@width":"35","@height":"35"},{"@gid":"3","@x":"140","@y":"315","@width":"35","@height":"35"},{"@gid":"3","@x":"175","@y":"315","@width":"35","@height":"35"},{"@gid":"4","@x":"210","@y":"315","@width":"35","@height":"35"},{"@gid":"7","@x":"210","@y":"210","@width":"35","@height":"35"},{"@gid":"6","@x":"210","@y":"175","@width":"35","@height":"35"},{"@gid":"6","@x":"210","@y":"140","@width":"35","@height":"35"},{"@gid":"8","@x":"210","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"245","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"280","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"315","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"350","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"385","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"420","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"455","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"525","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"490","@y":"105","@width":"35","@height":"35"},{"@gid":"10","@x":"560","@y":"105","@width":"35","@height":"35"},{"@gid":"14","@x":"560","@y":"140","@width":"35","@height":"35"},{"@gid":"3","@x":"595","@y":"140","@width":"35","@height":"35"},{"@gid":"3","@x":"630","@y":"140","@width":"35","@height":"35"},{"@gid":"9","@x":"665","@y":"140","@width":"35","@height":"35"},{"@gid":"13","@x":"490","@y":"350","@width":"35","@height":"35"}]},{"@name":"active",object:[{"@gid":"25","@x":"340","@y":"285","@width":"32","@height":"22",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"170"},{"@name":"minAngle","@value":"170"},{"@name":"speedX","@value":"0"}]}},{"@type":"2","@gid":"17","@x":"526","@y":"176","@width":"24","@height":"11"},{"@gid":"17","@x":"532","@y":"351","@width":"24","@height":"11"},{"@gid":"21","@x":"245","@y":"195.5","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"105"},{"@name":"speedY","@value":"55"}]}},{"@type":"4","@gid":"17","@x":"11","@y":"211.5","@width":"24","@height":"11"},{"@gid":"19","@x":"225","@y":"280","@width":"20","@height":"70"},{"@type":"4","@gid":"20","@x":"322","@y":"490","@width":"20","@height":"70"},{"@gid":"27","@x":"404","@y":"246","@width":"31","@height":"34"},{"@gid":"27","@x":"404","@y":"414","@width":"31","@height":"34"},{"@gid":"27","@x":"119","@y":"133","@width":"31","@height":"34"},{"@type":"2","@gid":"19","@x":"385","@y":"175","@width":"20","@height":"70","@rotation":"90"},{"@gid":"30","@x":"198","@y":"493","@width":"60","@height":"56"},{"@type":"2","@gid":"21","@x":"631","@y":"475.5","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"105"},{"@name":"speedY","@value":"-45"}]}},{"@gid":"29","@x":"105","@y":"280","@width":"60","@height":"55"}]},{"@name":"characters",object:[{"@gid":"24","@x":"330","@y":"178","@width":"44","@height":"52"},{"@gid":"28","@x":"517.5","@y":"492","@width":"63","@height":"50"}]},{"@name":"physics",object:[{"@x":"0","@y":"210","@width":"70","@height":"35"},{"@x":"0","@y":"245","@width":"35","@height":"245"},{"@x":"0","@y":"490","@width":"700","@height":"35"},{"@x":"595","@y":"455","@width":"35","@height":"35"},{"@x":"315","@y":"210","@width":"35","@height":"210"},{"@x":"315","@y":"175","@width":"70","@height":"35"},{"@x":"455","@y":"140","@width":"35","@height":"35"},{"@x":"455","@y":"175","@width":"175","@height":"35"},{"@x":"70","@y":"280","@width":"175","@height":"35"},{"@x":"70","@y":"315","@width":"35","@height":"70"},{"@x":"210","@y":"105","@width":"35","@height":"105"},{"@x":"210","@y":"70","@width":"385","@height":"35"},{"@x":"560","@y":"105","@width":"140","@height":"35"},{"@x":"665","@y":"140","@width":"35","@height":"105"},{"@x":"490","@y":"245","@width":"210","@height":"35"},{"@x":"490","@y":"280","@width":"35","@height":"105"},{"@x":"525","@y":"350","@width":"105","@height":"35"},{"@x":"350","@y":"315","@width":"140","@height":"35"}]}]},{"@level":"11","@version":"1.0","@orientation":"orthogonal","@renderorder":"right-down","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35","@nextobjectid":"145",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35","@tilecount":"16",tile:[{"@id":"0",image:{"@width":"35","@height":"35","@source":"tiles/singleTile.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"tiles/platformLeft.png"}},{"@id":"2",image:{"@width":"35","@height":"35","@source":"tiles/platformCenter.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"tiles/platformRight.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformTop.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformCenter.png"}},{"@id":"6",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformBottom.png"}},{"@id":"7",image:{"@width":"35","@height":"35","@source":"tiles/tileTopLeft.png"}},{"@id":"8",image:{"@width":"35","@height":"35","@source":"tiles/tileTopCenter.png"}},{"@id":"9",image:{"@width":"35","@height":"35","@source":"tiles/tileTopRight.png"}},{"@id":"10",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterLeft.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"tiles/tileCenter.png"}},{"@id":"12",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterRight.png"}},{"@id":"13",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomLeft.png"}},{"@id":"14",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomCenter.png"}},{"@id":"15",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"70","@tilecount":"14",tile:[{"@id":"0",image:{"@width":"24","@height":"11","@source":"active/PushButtonGraphics.png"}},{"@id":"1",image:{"@width":"25","@height":"19","@source":"active/TriggerGraphics.png"}},{"@id":"2",image:{"@width":"20","@height":"70","@source":"active/DoorGraphics.png"}},{"@id":"3",image:{"@width":"20","@height":"70","@source":"active/GlassDoorGraphics.png"}},{"@id":"4",image:{"@width":"70","@height":"19","@source":"active/ElevatorGraphics.png"}},{"@id":"5",image:{"@width":"105","@height":"20","@source":"active/BigElevatorGraphics.png"}},{"@id":"6",image:{"@width":"70","@height":"70","@source":"active/ExitGraphics.png"}},{"@id":"7",image:{"@width":"44","@height":"52","@source":"characters/HustlerGraphics.png"}},{"@id":"8",image:{"@width":"32","@height":"22","@source":"active/CameraGraphics.png"}},{"@id":"9",image:{"@width":"15","@height":"15","@source":"characters/EnemyLimiterGraphics.png"}},{"@id":"10",image:{"@width":"31","@height":"34","@source":"passive/MoneyBagGraphics.png"}},{"@id":"11",image:{"@width":"63","@height":"50","@source":"characters/DogGraphics.png"}},{"@id":"12",image:{"@width":"60","@height":"55","@source":"characters/Prisoner2Graphics.png"}},{"@id":"13",image:{"@width":"60","@height":"56","@source":"characters/PrisonerGraphics.png"}}]},{"@firstgid":"31","@name":"passive","@tilewidth":"210","@tileheight":"50","@tilecount":"12",tile:[{"@id":"0",image:{"@width":"50","@height":"50","@source":"passive/BigBoxGraphics.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"passive/BoxGraphics.png"}},{"@id":"2",image:{"@width":"37","@height":"35","@source":"passive/ToiletGraphics.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"passive/MonitorGraphics.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"passive/BasketBallGraphics.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"passive/StoolGraphics.png"}},{"@id":"6",image:{"@width":"150","@height":"20","@source":"passive/PlankGraphics.png"}},{"@id":"7",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"8",image:{"@width":"210","@height":"20","@source":"passive/BigPlankGraphics.png"}},{"@id":"9",image:{"@width":"100","@height":"20","@source":"passive/Plank5Graphics.png"}},{"@id":"10",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"passive/MirrorGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"136","@tilecount":"43",tile:[{"@id":"0",image:{"@width":"232","@height":"79","@source":"decor/LevelTextGraphics.png"}},{"@id":"1",image:{"@width":"54","@height":"20","@source":"decor/Decor1Graphics.png"}},{"@id":"2",image:{"@width":"54","@height":"20","@source":"decor/Decor2Graphics.png"}},{"@id":"3",image:{"@width":"33","@height":"27","@source":"decor/Decor3Graphics.png"}},{"@id":"4",image:{"@width":"34","@height":"25","@source":"decor/Decor4Graphics.png"}},{"@id":"5",image:{"@width":"22","@height":"31","@source":"decor/Decor5Graphics.png"}},{"@id":"6",image:{"@width":"126","@height":"59","@source":"decor/Decor6Graphics.png"}},{"@id":"7",image:{"@width":"25","@height":"21","@source":"decor/Decor8Graphics.png"}},{"@id":"8",image:{"@width":"18","@height":"22","@source":"decor/Decor9Graphics.png"}},{"@id":"9",image:{"@width":"35","@height":"58","@source":"decor/Decor10Graphics.png"}},{"@id":"10",image:{"@width":"19","@height":"66","@source":"decor/Decor11Graphics.png"}},{"@id":"11",image:{"@width":"23","@height":"33","@source":"decor/Decor12Graphics.png"}},{"@id":"12",image:{"@width":"38","@height":"26","@source":"decor/Decor13Graphics.png"}},{"@id":"13",image:{"@width":"43","@height":"78","@source":"decor/Decor14Graphics.png"}},{"@id":"14",image:{"@width":"60","@height":"86","@source":"decor/Decor15Graphics.png"}},{"@id":"15",image:{"@width":"41","@height":"69","@source":"decor/Decor16Graphics.png"}},{"@id":"16",image:{"@width":"55","@height":"58","@source":"decor/Decor17Graphics.png"}},{"@id":"17",image:{"@width":"57","@height":"54","@source":"decor/Decor18Graphics.png"}},{"@id":"18",image:{"@width":"18","@height":"45","@source":"decor/Decor19Graphics.png"}},{"@id":"19",image:{"@width":"41","@height":"49","@source":"decor/Decor20Graphics.png"}},{"@id":"20",image:{"@width":"51","@height":"38","@source":"decor/Decor21Graphics.png"}},{"@id":"21",image:{"@width":"54","@height":"54","@source":"decor/Decor22Graphics.png"}},{"@id":"22",image:{"@width":"63","@height":"136","@source":"decor/Decor23Graphics.png"}},{"@id":"23",image:{"@width":"21","@height":"39","@source":"decor/Decor24Graphics.png"}},{"@id":"24",image:{"@width":"104","@height":"50","@source":"decor/Decor25Graphics.png"}},{"@id":"25",image:{"@width":"104","@height":"46","@source":"decor/Decor26Graphics.png"}},{"@id":"26",image:{"@width":"86","@height":"38","@source":"decor/Decor27Graphics.png"}},{"@id":"27",image:{"@width":"63","@height":"55","@source":"decor/Decor28Graphics.png"}},{"@id":"28",image:{"@width":"13","@height":"23","@source":"decor/Decor29Graphics.png"}},{"@id":"29",image:{"@width":"28","@height":"40","@source":"decor/Decor30Graphics.png"}},{"@id":"30",image:{"@width":"69","@height":"30","@source":"decor/Decor31Graphics.png"}},{"@id":"31",image:{"@width":"33","@height":"29","@source":"decor/Decor32Graphics.png"}},{"@id":"32",image:{"@width":"42","@height":"42","@source":"decor/Decor33Graphics.png"}},{"@id":"33",image:{"@width":"60","@height":"66","@source":"decor/Decor34Graphics.png"}},{"@id":"34",image:{"@width":"46","@height":"65","@source":"decor/Decor35Graphics.png"}},{"@id":"35",image:{"@width":"71","@height":"55","@source":"decor/Decor36Graphics.png"}},{"@id":"36",image:{"@width":"35","@height":"55","@source":"decor/Decor37Graphics.png"}},{"@id":"37",image:{"@width":"28","@height":"29","@source":"decor/Decor38Graphics.png"}},{"@id":"38",image:{"@width":"38","@height":"37","@source":"decor/Decor39Graphics.png"}},{"@id":"39",image:{"@width":"103","@height":"50","@source":"decor/Decor40Graphics.png"}},{"@id":"40",image:{"@width":"56","@height":"55","@source":"decor/Decor41Graphics.png"}},{"@id":"41",image:{"@width":"71","@height":"50","@source":"decor/Decor42Graphics.png"}},{"@id":"42",image:{"@width":"200","@height":"44","@source":"decor/TxtGraphics.png"}}]}],imagelayer:{"@name":"background",image:{"@source":"bg/Background1Graphics.png"}},objectgroup:[{"@name":"decorations",object:[{"@id":"1","@gid":"43","@x":"143","@y":"377","@width":"232","@height":"79",properties:{property:{"@name":"text","@value":"Bring him down"}}},{"@id":"2","@gid":"78","@x":"570","@y":"455","@width":"71","@height":"55"},{"@id":"3","@gid":"62","@x":"594","@y":"387","@width":"41","@height":"49"},{"@id":"4","@gid":"65","@x":"599","@y":"214","@width":"63","@height":"136"},{"@id":"5","@gid":"81","@x":"245","@y":"210","@width":"38","@height":"37"},{"@id":"6","@gid":"67","@x":"140","@y":"245","@width":"104","@height":"50"},{"@id":"7","@gid":"55","@x":"175","@y":"455","@width":"38","@height":"26"},{"@id":"8","@gid":"57","@x":"272","@y":"469","@width":"60","@height":"86"},{"@id":"9","@gid":"44","@x":"175","@y":"159","@width":"54","@height":"20"}]},{"@name":"tiles",object:[{"@id":"10","@gid":"12","@x":"560","@y":"525","@width":"35","@height":"35"},{"@id":"11","@gid":"12","@x":"595","@y":"525","@width":"35","@height":"35"},{"@id":"12","@gid":"12","@x":"560","@y":"175","@width":"35","@height":"35"},{"@id":"13","@gid":"12","@x":"0","@y":"525","@width":"35","@height":"35"},{"@id":"14","@gid":"12","@x":"665","@y":"525","@width":"35","@height":"35"},{"@id":"15","@gid":"12","@x":"420","@y":"525","@width":"35","@height":"35"},{"@id":"16","@gid":"12","@x":"665","@y":"490","@width":"35","@height":"35"},{"@id":"17","@gid":"12","@x":"455","@y":"525","@width":"35","@height":"35"},{"@id":"18","@gid":"12","@x":"490","@y":"525","@width":"35","@height":"35"},{"@id":"19","@gid":"12","@x":"490","@y":"490","@width":"35","@height":"35"},{"@id":"20","@gid":"12","@x":"525","@y":"525","@width":"35","@height":"35"},{"@id":"21","@gid":"12","@x":"35","@y":"525","@width":"35","@height":"35"},{"@id":"22","@gid":"12","@x":"630","@y":"525","@width":"35","@height":"35"},{"@id":"23","@gid":"12","@x":"665","@y":"280","@width":"35","@height":"35"},{"@id":"24","@gid":"9","@x":"630","@y":"490","@width":"35","@height":"35"},{"@id":"25","@gid":"9","@x":"595","@y":"490","@width":"35","@height":"35"},{"@id":"26","@gid":"9","@x":"560","@y":"490","@width":"35","@height":"35"},{"@id":"27","@gid":"9","@x":"525","@y":"490","@width":"35","@height":"35"},{"@id":"28","@gid":"9","@x":"455","@y":"490","@width":"35","@height":"35"},{"@id":"29","@gid":"9","@x":"0","@y":"490","@width":"35","@height":"35"},{"@id":"30","@gid":"10","@x":"35","@y":"490","@width":"35","@height":"35"},{"@id":"31","@gid":"10","@x":"140","@y":"385","@width":"35","@height":"35"},{"@id":"32","@gid":"10","@x":"210","@y":"420","@width":"35","@height":"35"},{"@id":"33","@gid":"10","@x":"455","@y":"315","@width":"35","@height":"35"},{"@id":"34","@gid":"10","@x":"280","@y":"140","@width":"35","@height":"35"},{"@id":"35","@gid":"10","@x":"560","@y":"105","@width":"35","@height":"35"},{"@id":"36","@gid":"8","@x":"665","@y":"175","@width":"35","@height":"35"},{"@id":"37","@gid":"8","@x":"525","@y":"315","@width":"35","@height":"35"},{"@id":"38","@gid":"8","@x":"70","@y":"140","@width":"35","@height":"35"},{"@id":"39","@gid":"14","@x":"280","@y":"175","@width":"35","@height":"35"},{"@id":"40","@gid":"14","@x":"70","@y":"280","@width":"35","@height":"35"},{"@id":"41","@gid":"8","@x":"420","@y":"490","@width":"35","@height":"35"},{"@id":"42","@gid":"14","@x":"140","@y":"420","@width":"35","@height":"35"},{"@id":"43","@gid":"14","@x":"385","@y":"315","@width":"35","@height":"35"},{"@id":"44","@gid":"14","@x":"525","@y":"210","@width":"35","@height":"35"},{"@id":"45","@gid":"16","@x":"560","@y":"315","@width":"35","@height":"35"},{"@id":"46","@gid":"2","@x":"630","@y":"280","@width":"35","@height":"35"},{"@id":"47","@gid":"2","@x":"420","@y":"105","@width":"35","@height":"35"},{"@id":"48","@gid":"7","@x":"455","@y":"210","@width":"35","@height":"35"},{"@id":"49","@gid":"7","@x":"210","@y":"455","@width":"35","@height":"35"},{"@id":"50","@gid":"5","@x":"490","@y":"455","@width":"35","@height":"35"},{"@id":"51","@gid":"3","@x":"490","@y":"350","@width":"35","@height":"35"},{"@id":"52","@gid":"3","@x":"420","@y":"315","@width":"35","@height":"35"},{"@id":"53","@gid":"3","@x":"105","@y":"280","@width":"35","@height":"35"},{"@id":"54","@gid":"3","@x":"140","@y":"280","@width":"35","@height":"35"},{"@id":"55","@gid":"3","@x":"175","@y":"280","@width":"35","@height":"35"},{"@id":"56","@gid":"3","@x":"210","@y":"280","@width":"35","@height":"35"},{"@id":"57","@gid":"3","@x":"245","@y":"280","@width":"35","@height":"35"},{"@id":"58","@gid":"3","@x":"105","@y":"140","@width":"35","@height":"35"},{"@id":"59","@gid":"3","@x":"140","@y":"140","@width":"35","@height":"35"},{"@id":"60","@gid":"3","@x":"175","@y":"140","@width":"35","@height":"35"},{"@id":"61","@gid":"3","@x":"210","@y":"140","@width":"35","@height":"35"},{"@id":"62","@gid":"3","@x":"245","@y":"140","@width":"35","@height":"35"},{"@id":"63","@gid":"3","@x":"315","@y":"175","@width":"35","@height":"35"},{"@id":"64","@gid":"3","@x":"350","@y":"175","@width":"35","@height":"35"},{"@id":"65","@gid":"3","@x":"385","@y":"175","@width":"35","@height":"35"},{"@id":"66","@gid":"3","@x":"420","@y":"175","@width":"35","@height":"35"},{"@id":"67","@gid":"3","@x":"455","@y":"105","@width":"35","@height":"35"},{"@id":"68","@gid":"3","@x":"490","@y":"105","@width":"35","@height":"35"},{"@id":"69","@gid":"4","@x":"595","@y":"175","@width":"35","@height":"35"},{"@id":"70","@gid":"4","@x":"280","@y":"280","@width":"35","@height":"35"},{"@id":"71","@gid":"5","@x":"385","@y":"280","@width":"35","@height":"35"},{"@id":"72","@gid":"3","@x":"175","@y":"420","@width":"35","@height":"35"},{"@id":"73","@gid":"3","@x":"105","@y":"385","@width":"35","@height":"35"},{"@id":"74","@gid":"2","@x":"70","@y":"385","@width":"35","@height":"35"},{"@id":"75","@gid":"9","@x":"70","@y":"525","@width":"35","@height":"35"},{"@id":"76","@gid":"9","@x":"105","@y":"525","@width":"35","@height":"35"},{"@id":"77","@gid":"9","@x":"140","@y":"525","@width":"35","@height":"35"},{"@id":"78","@gid":"9","@x":"175","@y":"525","@width":"35","@height":"35"},{"@id":"79","@gid":"9","@x":"210","@y":"525","@width":"35","@height":"35"},{"@id":"80","@gid":"9","@x":"245","@y":"525","@width":"35","@height":"35"},{"@id":"81","@gid":"9","@x":"280","@y":"525","@width":"35","@height":"35"},{"@id":"82","@gid":"9","@x":"315","@y":"525","@width":"35","@height":"35"},{"@id":"83","@gid":"9","@x":"350","@y":"525","@width":"35","@height":"35"},{"@id":"84","@gid":"9","@x":"385","@y":"525","@width":"35","@height":"35"},{"@id":"85","@gid":"6","@x":"70","@y":"245","@width":"35","@height":"35"},{"@id":"86","@gid":"6","@x":"70","@y":"210","@width":"35","@height":"35"},{"@id":"87","@gid":"6","@x":"70","@y":"175","@width":"35","@height":"35"},{"@id":"88","@gid":"6","@x":"560","@y":"245","@width":"35","@height":"35"},{"@id":"89","@gid":"6","@x":"560","@y":"280","@width":"35","@height":"35"},{"@id":"90","@gid":"11","@x":"665","@y":"210","@width":"35","@height":"35"},{"@id":"91","@gid":"11","@x":"665","@y":"245","@width":"35","@height":"35"},{"@id":"92","@gid":"11","@x":"665","@y":"315","@width":"35","@height":"35"},{"@id":"93","@gid":"11","@x":"665","@y":"350","@width":"35","@height":"35"},{"@id":"94","@gid":"11","@x":"665","@y":"385","@width":"35","@height":"35"},{"@id":"95","@gid":"11","@x":"665","@y":"420","@width":"35","@height":"35"},{"@id":"96","@gid":"11","@x":"665","@y":"455","@width":"35","@height":"35"},{"@id":"97","@gid":"10","@x":"455","@y":"175","@width":"35","@height":"35"},{"@id":"98","@gid":"13","@x":"560","@y":"210","@width":"35","@height":"35"},{"@id":"99","@gid":"13","@x":"560","@y":"140","@width":"35","@height":"35"},{"@id":"100","@gid":"9","@x":"525","@y":"105","@width":"35","@height":"35"},{"@id":"101","@gid":"11","@x":"525","@y":"175","@width":"35","@height":"35"},{"@id":"102","@gid":"11","@x":"525","@y":"140","@width":"35","@height":"35"},{"@id":"103","@gid":"13","@x":"525","@y":"350","@width":"35","@height":"35"},{"@id":"104","@gid":"11","@x":"455","@y":"350","@width":"35","@height":"35"},{"@id":"105","@gid":"7","@x":"525","@y":"385","@width":"35","@height":"35"},{"@id":"106","@gid":"7","@x":"455","@y":"385","@width":"35","@height":"35"}]},{"@name":"active",object:[{"@id":"107","@gid":"25","@x":"548","@y":"240","@width":"32","@height":"22",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"0"},{"@name":"minAngle","@value":"0"},{"@name":"speedX","@value":"0"}]}},{"@id":"108","@type":"5","@gid":"17","@x":"118","@y":"351","@width":"24","@height":"11"},{"@id":"109","@type":"2","@gid":"17","@x":"460","@y":"456","@width":"24","@height":"11"},{"@id":"110","@type":"2","@gid":"21","@x":"1","@y":"367.5","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"180"},{"@name":"speedY","@value":"-45"}]}},{"@id":"111","@type":"5","@gid":"19","@x":"497","@y":"384","@width":"20","@height":"70"},{"@id":"112","@gid":"27","@x":"419","@y":"352","@width":"31","@height":"34"},{"@id":"113","@gid":"27","@x":"595","@y":"245","@width":"31","@height":"34"},{"@id":"114","@gid":"27","@x":"193","@y":"74","@width":"31","@height":"34"},{"@id":"115","@type":"6","@gid":"17","@x":"281","@y":"245.5","@width":"24","@height":"11"},{"@id":"116","@type":"6","@gid":"19","@x":"406","@y":"175","@width":"20","@height":"70","@rotation":"180"},{"@id":"117","@gid":"32","@x":"455","@y":"140","@width":"35","@height":"35"},{"@id":"118","@gid":"40","@x":"350","@y":"139","@width":"100","@height":"20"},{"@id":"119","@gid":"30","@x":"146","@y":"246","@width":"60","@height":"56",properties:{property:[{"@name":"limitLeft"},{"@name":"limitRight"}]}}]},{"@name":"characters",object:[{"@id":"120","@gid":"24","@x":"122","@y":"488","@width":"44","@height":"52"},{"@id":"121","@gid":"28","@x":"318.5","@y":"488","@width":"63","@height":"50"}]},{"@name":"physics",object:[{"@id":"122","@x":"0","@y":"455","@width":"70","@height":"70"},{"@id":"123","@x":"70","@y":"490","@width":"350","@height":"35"},{"@id":"124","@x":"420","@y":"455","@width":"280","@height":"70"},{"@id":"125","@x":"490","@y":"420","@width":"35","@height":"35"},{"@id":"126","@x":"665","@y":"140","@width":"35","@height":"315"},{"@id":"127","@x":"630","@y":"245","@width":"35","@height":"35"},{"@id":"128","@x":"595","@y":"140","@width":"35","@height":"35"},{"@id":"129","@x":"420","@y":"70","@width":"175","@height":"35"},{"@id":"130","@x":"525","@y":"105","@width":"70","@height":"105"},{"@id":"131","@x":"560","@y":"210","@width":"35","@height":"105"},{"@id":"132","@x":"525","@y":"280","@width":"35","@height":"105"},{"@id":"133","@x":"490","@y":"315","@width":"35","@height":"35"},{"@id":"134","@x":"455","@y":"315","@width":"35","@height":"70"},{"@id":"135","@x":"385","@y":"280","@width":"105","@height":"35"},{"@id":"136","@x":"385","@y":"245","@width":"35","@height":"35"},{"@id":"137","@x":"455","@y":"175","@width":"35","@height":"35"},{"@id":"138","@x":"280","@y":"140","@width":"210","@height":"35"},{"@id":"139","@x":"70","@y":"105","@width":"245","@height":"35"},{"@id":"140","@x":"70","@y":"140","@width":"35","@height":"105"},{"@id":"141","@x":"70","@y":"245","@width":"245","@height":"35"},{"@id":"142","@x":"70","@y":"350","@width":"105","@height":"35"},{"@id":"143","@x":"140","@y":"385","@width":"105","@height":"35"},{"@id":"144","@x":"210","@y":"420","@width":"35","@height":"35"}]}]},{"@level":"12","@version":"1.0","@orientation":"orthogonal","@renderorder":"right-down","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35","@nextobjectid":"152",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35","@tilecount":"16",tile:[{"@id":"0",image:{"@width":"35","@height":"35","@source":"tiles/singleTile.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"tiles/platformLeft.png"}},{"@id":"2",image:{"@width":"35","@height":"35","@source":"tiles/platformCenter.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"tiles/platformRight.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformTop.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformCenter.png"}},{"@id":"6",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformBottom.png"}},{"@id":"7",image:{"@width":"35","@height":"35","@source":"tiles/tileTopLeft.png"}},{"@id":"8",image:{"@width":"35","@height":"35","@source":"tiles/tileTopCenter.png"}},{"@id":"9",image:{"@width":"35","@height":"35","@source":"tiles/tileTopRight.png"}},{"@id":"10",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterLeft.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"tiles/tileCenter.png"}},{"@id":"12",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterRight.png"}},{"@id":"13",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomLeft.png"}},{"@id":"14",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomCenter.png"}},{"@id":"15",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"70","@tilecount":"14",tile:[{"@id":"0",image:{"@width":"24","@height":"11","@source":"active/PushButtonGraphics.png"}},{"@id":"1",image:{"@width":"25","@height":"19","@source":"active/TriggerGraphics.png"}},{"@id":"2",image:{"@width":"20","@height":"70","@source":"active/DoorGraphics.png"}},{"@id":"3",image:{"@width":"20","@height":"70","@source":"active/GlassDoorGraphics.png"}},{"@id":"4",image:{"@width":"70","@height":"19","@source":"active/ElevatorGraphics.png"}},{"@id":"5",image:{"@width":"105","@height":"20","@source":"active/BigElevatorGraphics.png"}},{"@id":"6",image:{"@width":"70","@height":"70","@source":"active/ExitGraphics.png"}},{"@id":"7",image:{"@width":"44","@height":"52","@source":"characters/HustlerGraphics.png"}},{"@id":"8",image:{"@width":"32","@height":"22","@source":"active/CameraGraphics.png"}},{"@id":"9",image:{"@width":"15","@height":"15","@source":"characters/EnemyLimiterGraphics.png"}},{"@id":"10",image:{"@width":"31","@height":"34","@source":"passive/MoneyBagGraphics.png"}},{"@id":"11",image:{"@width":"63","@height":"50","@source":"characters/DogGraphics.png"}},{"@id":"12",image:{"@width":"60","@height":"55","@source":"characters/Prisoner2Graphics.png"}},{"@id":"13",image:{"@width":"60","@height":"56","@source":"characters/PrisonerGraphics.png"}}]},{"@firstgid":"31","@name":"passive","@tilewidth":"210","@tileheight":"50","@tilecount":"12",tile:[{"@id":"0",image:{"@width":"50","@height":"50","@source":"passive/BigBoxGraphics.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"passive/BoxGraphics.png"}},{"@id":"2",image:{"@width":"37","@height":"35","@source":"passive/ToiletGraphics.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"passive/MonitorGraphics.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"passive/BasketBallGraphics.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"passive/StoolGraphics.png"}},{"@id":"6",image:{"@width":"150","@height":"20","@source":"passive/PlankGraphics.png"}},{"@id":"7",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"8",image:{"@width":"210","@height":"20","@source":"passive/BigPlankGraphics.png"}},{"@id":"9",image:{"@width":"100","@height":"20","@source":"passive/Plank5Graphics.png"}},{"@id":"10",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"passive/MirrorGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"136","@tilecount":"43",tile:[{"@id":"0",image:{"@width":"232","@height":"79","@source":"decor/LevelTextGraphics.png"}},{"@id":"1",image:{"@width":"54","@height":"20","@source":"decor/Decor1Graphics.png"}},{"@id":"2",image:{"@width":"54","@height":"20","@source":"decor/Decor2Graphics.png"}},{"@id":"3",image:{"@width":"33","@height":"27","@source":"decor/Decor3Graphics.png"}},{"@id":"4",image:{"@width":"34","@height":"25","@source":"decor/Decor4Graphics.png"}},{"@id":"5",image:{"@width":"22","@height":"31","@source":"decor/Decor5Graphics.png"}},{"@id":"6",image:{"@width":"126","@height":"59","@source":"decor/Decor6Graphics.png"}},{"@id":"7",image:{"@width":"25","@height":"21","@source":"decor/Decor8Graphics.png"}},{"@id":"8",image:{"@width":"18","@height":"22","@source":"decor/Decor9Graphics.png"}},{"@id":"9",image:{"@width":"35","@height":"58","@source":"decor/Decor10Graphics.png"}},{"@id":"10",image:{"@width":"19","@height":"66","@source":"decor/Decor11Graphics.png"}},{"@id":"11",image:{"@width":"23","@height":"33","@source":"decor/Decor12Graphics.png"}},{"@id":"12",image:{"@width":"38","@height":"26","@source":"decor/Decor13Graphics.png"}},{"@id":"13",image:{"@width":"43","@height":"78","@source":"decor/Decor14Graphics.png"}},{"@id":"14",image:{"@width":"60","@height":"86","@source":"decor/Decor15Graphics.png"}},{"@id":"15",image:{"@width":"41","@height":"69","@source":"decor/Decor16Graphics.png"}},{"@id":"16",image:{"@width":"55","@height":"58","@source":"decor/Decor17Graphics.png"}},{"@id":"17",image:{"@width":"57","@height":"54","@source":"decor/Decor18Graphics.png"}},{"@id":"18",image:{"@width":"18","@height":"45","@source":"decor/Decor19Graphics.png"}},{"@id":"19",image:{"@width":"41","@height":"49","@source":"decor/Decor20Graphics.png"}},{"@id":"20",image:{"@width":"51","@height":"38","@source":"decor/Decor21Graphics.png"}},{"@id":"21",image:{"@width":"54","@height":"54","@source":"decor/Decor22Graphics.png"}},{"@id":"22",image:{"@width":"63","@height":"136","@source":"decor/Decor23Graphics.png"}},{"@id":"23",image:{"@width":"21","@height":"39","@source":"decor/Decor24Graphics.png"}},{"@id":"24",image:{"@width":"104","@height":"50","@source":"decor/Decor25Graphics.png"}},{"@id":"25",image:{"@width":"104","@height":"46","@source":"decor/Decor26Graphics.png"}},{"@id":"26",image:{"@width":"86","@height":"38","@source":"decor/Decor27Graphics.png"}},{"@id":"27",image:{"@width":"63","@height":"55","@source":"decor/Decor28Graphics.png"}},{"@id":"28",image:{"@width":"13","@height":"23","@source":"decor/Decor29Graphics.png"}},{"@id":"29",image:{"@width":"28","@height":"40","@source":"decor/Decor30Graphics.png"}},{"@id":"30",image:{"@width":"69","@height":"30","@source":"decor/Decor31Graphics.png"}},{"@id":"31",image:{"@width":"33","@height":"29","@source":"decor/Decor32Graphics.png"}},{"@id":"32",image:{"@width":"42","@height":"42","@source":"decor/Decor33Graphics.png"}},{"@id":"33",image:{"@width":"60","@height":"66","@source":"decor/Decor34Graphics.png"}},{"@id":"34",image:{"@width":"46","@height":"65","@source":"decor/Decor35Graphics.png"}},{"@id":"35",image:{"@width":"71","@height":"55","@source":"decor/Decor36Graphics.png"}},{"@id":"36",image:{"@width":"35","@height":"55","@source":"decor/Decor37Graphics.png"}},{"@id":"37",image:{"@width":"28","@height":"29","@source":"decor/Decor38Graphics.png"}},{"@id":"38",image:{"@width":"38","@height":"37","@source":"decor/Decor39Graphics.png"}},{"@id":"39",image:{"@width":"103","@height":"50","@source":"decor/Decor40Graphics.png"}},{"@id":"40",image:{"@width":"56","@height":"55","@source":"decor/Decor41Graphics.png"}},{"@id":"41",image:{"@width":"71","@height":"50","@source":"decor/Decor42Graphics.png"}},{"@id":"42",image:{"@width":"200","@height":"44","@source":"decor/TxtGraphics.png"}}]}],imagelayer:{"@name":"background","@y":"-1",image:{"@source":"bg/Background1Graphics.png"}},objectgroup:[{"@name":"decorations",object:[{"@id":"1","@gid":"44","@x":"105","@y":"299","@width":"54","@height":"20"},{"@id":"2","@gid":"46","@x":"490","@y":"210","@width":"33","@height":"27"},{"@id":"3","@gid":"49","@x":"560","@y":"315","@width":"126","@height":"59"},{"@id":"4","@gid":"67","@x":"385","@y":"490","@width":"104","@height":"50"},{"@id":"5","@gid":"84","@x":"560","@y":"490","@width":"71","@height":"50"},{"@id":"6","@gid":"66","@x":"493","@y":"464","@width":"21","@height":"39"},{"@id":"7","@gid":"62","@x":"128","@y":"408","@width":"41","@height":"49"},{"@id":"8","@gid":"64","@x":"15","@y":"175","@width":"54","@height":"54"},{"@id":"9","@gid":"70","@x":"8","@y":"490","@width":"63","@height":"55"}]},{"@name":"tiles",object:[{"@id":"10","@gid":"9","@x":"455","@y":"525","@width":"35","@height":"35"},{"@id":"11","@gid":"9","@x":"420","@y":"525","@width":"35","@height":"35"},{"@id":"12","@gid":"9","@x":"350","@y":"525","@width":"35","@height":"35"},{"@id":"13","@gid":"9","@x":"385","@y":"525","@width":"35","@height":"35"},{"@id":"14","@gid":"9","@x":"140","@y":"525","@width":"35","@height":"35"},{"@id":"15","@gid":"9","@x":"35","@y":"525","@width":"35","@height":"35"},{"@id":"16","@gid":"9","@x":"0","@y":"525","@width":"35","@height":"35"},{"@id":"17","@gid":"9","@x":"70","@y":"525","@width":"35","@height":"35"},{"@id":"18","@gid":"12","@x":"0","@y":"280","@width":"35","@height":"35"},{"@id":"19","@gid":"12","@x":"70","@y":"210","@width":"35","@height":"35"},{"@id":"20","@gid":"9","@x":"595","@y":"525","@width":"35","@height":"35"},{"@id":"21","@gid":"9","@x":"560","@y":"525","@width":"35","@height":"35"},{"@id":"22","@gid":"9","@x":"525","@y":"525","@width":"35","@height":"35"},{"@id":"23","@gid":"9","@x":"490","@y":"525","@width":"35","@height":"35"},{"@id":"24","@gid":"9","@x":"105","@y":"525","@width":"35","@height":"35"},{"@id":"25","@gid":"9","@x":"280","@y":"525","@width":"35","@height":"35"},{"@id":"26","@gid":"9","@x":"315","@y":"525","@width":"35","@height":"35"},{"@id":"27","@gid":"12","@x":"245","@y":"525","@width":"35","@height":"35"},{"@id":"28","@gid":"12","@x":"210","@y":"525","@width":"35","@height":"35"},{"@id":"29","@gid":"12","@x":"175","@y":"525","@width":"35","@height":"35"},{"@id":"30","@gid":"9","@x":"0","@y":"210","@width":"35","@height":"35"},{"@id":"31","@gid":"9","@x":"210","@y":"490","@width":"35","@height":"35"},{"@id":"32","@gid":"9","@x":"315","@y":"210","@width":"35","@height":"35"},{"@id":"33","@gid":"5","@x":"175","@y":"455","@width":"35","@height":"35"},{"@id":"34","@gid":"5","@x":"245","@y":"385","@width":"35","@height":"35"},{"@id":"35","@gid":"11","@x":"175","@y":"490","@width":"35","@height":"35"},{"@id":"36","@gid":"11","@x":"315","@y":"245","@width":"35","@height":"35"},{"@id":"37","@gid":"11","@x":"70","@y":"245","@width":"35","@height":"35"},{"@id":"38","@gid":"11","@x":"420","@y":"175","@width":"35","@height":"35"},{"@id":"39","@gid":"14","@x":"420","@y":"210","@width":"35","@height":"35"},{"@id":"40","@gid":"2","@x":"245","@y":"280","@width":"35","@height":"35"},{"@id":"41","@gid":"2","@x":"175","@y":"210","@width":"35","@height":"35"},{"@id":"42","@gid":"10","@x":"105","@y":"175","@width":"35","@height":"35"},{"@id":"43","@gid":"10","@x":"420","@y":"140","@width":"35","@height":"35"},{"@id":"44","@gid":"8","@x":"560","@y":"385","@width":"35","@height":"35"},{"@id":"45","@gid":"8","@x":"70","@y":"175","@width":"35","@height":"35"},{"@id":"46","@gid":"8","@x":"350","@y":"140","@width":"35","@height":"35"},{"@id":"47","@gid":"3","@x":"385","@y":"140","@width":"35","@height":"35"},{"@id":"48","@gid":"3","@x":"525","@y":"175","@width":"35","@height":"35"},{"@id":"49","@gid":"3","@x":"490","@y":"175","@width":"35","@height":"35"},{"@id":"50","@gid":"3","@x":"385","@y":"420","@width":"35","@height":"35"},{"@id":"51","@gid":"3","@x":"455","@y":"420","@width":"35","@height":"35"},{"@id":"52","@gid":"3","@x":"420","@y":"420","@width":"35","@height":"35"},{"@id":"53","@gid":"3","@x":"490","@y":"420","@width":"35","@height":"35"},{"@id":"54","@gid":"3","@x":"525","@y":"420","@width":"35","@height":"35"},{"@id":"55","@gid":"3","@x":"35","@y":"280","@width":"35","@height":"35"},{"@id":"56","@gid":"3","@x":"35","@y":"210","@width":"35","@height":"35"},{"@id":"57","@gid":"3","@x":"210","@y":"210","@width":"35","@height":"35"},{"@id":"58","@gid":"3","@x":"245","@y":"210","@width":"35","@height":"35"},{"@id":"59","@gid":"3","@x":"280","@y":"210","@width":"35","@height":"35"},{"@id":"60","@gid":"3","@x":"140","@y":"280","@width":"35","@height":"35"},{"@id":"61","@gid":"3","@x":"280","@y":"280","@width":"35","@height":"35"},{"@id":"62","@gid":"6","@x":"350","@y":"175","@width":"35","@height":"35"},{"@id":"63","@gid":"13","@x":"350","@y":"210","@width":"35","@height":"35"},{"@id":"64","@gid":"13","@x":"350","@y":"245","@width":"35","@height":"35"},{"@id":"65","@gid":"10","@x":"385","@y":"280","@width":"35","@height":"35"},{"@id":"66","@gid":"4","@x":"595","@y":"175","@width":"35","@height":"35"},{"@id":"67","@gid":"4","@x":"595","@y":"385","@width":"35","@height":"35"},{"@id":"68","@gid":"16","@x":"560","@y":"420","@width":"35","@height":"35"},{"@id":"69","@gid":"2","@x":"350","@y":"420","@width":"35","@height":"35"},{"@id":"70","@gid":"4","@x":"175","@y":"280","@width":"35","@height":"35"},{"@id":"71","@gid":"15","@x":"105","@y":"280","@width":"35","@height":"35"},{"@id":"72","@gid":"15","@x":"70","@y":"280","@width":"35","@height":"35"},{"@id":"73","@gid":"15","@x":"0","@y":"385","@width":"35","@height":"35"},{"@id":"74","@gid":"3","@x":"35","@y":"385","@width":"35","@height":"35"},{"@id":"75","@gid":"4","@x":"70","@y":"385","@width":"35","@height":"35"},{"@id":"76","@gid":"6","@x":"455","@y":"245","@width":"35","@height":"35"},{"@id":"77","@gid":"6","@x":"455","@y":"280","@width":"35","@height":"35"},{"@id":"78","@gid":"6","@x":"455","@y":"315","@width":"35","@height":"35"},{"@id":"79","@gid":"6","@x":"385","@y":"315","@width":"35","@height":"35"},{"@id":"80","@gid":"6","@x":"245","@y":"420","@width":"35","@height":"35"},{"@id":"81","@gid":"6","@x":"245","@y":"455","@width":"35","@height":"35"},{"@id":"82","@gid":"7","@x":"455","@y":"350","@width":"35","@height":"35"},{"@id":"83","@gid":"7","@x":"385","@y":"350","@width":"35","@height":"35"},{"@id":"84","@gid":"7","@x":"560","@y":"210","@width":"35","@height":"35"},{"@id":"85","@gid":"9","@x":"560","@y":"175","@width":"35","@height":"35"},{"@id":"86","@gid":"9","@x":"455","@y":"175","@width":"35","@height":"35"},{"@id":"87","@gid":"13","@x":"0","@y":"245","@width":"35","@height":"35"},{"@id":"88","@gid":"13","@x":"0","@y":"350","@width":"35","@height":"35"},{"@id":"89","@gid":"13","@x":"0","@y":"315","@width":"35","@height":"35"},{"@id":"90","@gid":"13","@x":"455","@y":"210","@width":"35","@height":"35"},{"@id":"91","@gid":"13","@x":"105","@y":"210","@width":"35","@height":"35"},{"@id":"92","@gid":"13","@x":"105","@y":"245","@width":"35","@height":"35"},{"@id":"93","@gid":"13","@x":"245","@y":"490","@width":"35","@height":"35"},{"@id":"94","@gid":"15","@x":"315","@y":"280","@width":"35","@height":"35"},{"@id":"95","@gid":"15","@x":"350","@y":"280","@width":"35","@height":"35"},{"@id":"96","@gid":"12","@x":"630","@y":"525","@width":"35","@height":"35"},{"@id":"97","@gid":"12","@x":"665","@y":"525","@width":"35","@height":"35"},{"@id":"98","@gid":"8","@x":"630","@y":"490","@width":"35","@height":"35"},{"@id":"99","@gid":"9","@x":"665","@y":"490","@width":"35","@height":"35"},{"@id":"100","@gid":"43","@x":"121","@y":"152","@width":"232","@height":"79",properties:{property:{"@name":"text","@value":"Billiards"}}}]},{"@name":"active",object:[{"@id":"101","@gid":"30","@x":"385","@y":"490","@width":"60","@height":"56"},{"@id":"102","@gid":"25","@x":"525","@y":"198","@width":"32","@height":"22",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"90"},{"@name":"minAngle","@value":"90"},{"@name":"speedX","@value":"0"}]}},{"@id":"103","@gid":"20","@x":"280","@y":"385","@width":"20","@height":"70","@rotation":"90"},{"@id":"104","@type":"6","@gid":"19","@x":"245","@y":"266","@width":"20","@height":"70","@rotation":"-90"},{"@id":"105","@type":"5","@gid":"21","@x":"630","@y":"370","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"210"},{"@name":"speedY","@value":"-45"}]}},{"@id":"106","@type":"2","@gid":"19","@x":"105","@y":"234","@width":"20","@height":"70","@rotation":"-90"},{"@id":"107","@type":"3","@gid":"17","@x":"215","@y":"456","@width":"24","@height":"11"},{"@id":"108","@gid":"35","@x":"206","@y":"172","@width":"35","@height":"35"},{"@id":"109","@type":"3","@gid":"19","@x":"272","@y":"280","@width":"20","@height":"70","@rotation":"180"},{"@id":"110","@type":"2","@gid":"17","@x":"146","@y":"246","@width":"24","@height":"11"},{"@id":"111","@gid":"20","@x":"347","@y":"489","@width":"20","@height":"70"},{"@id":"112","@type":"4","@gid":"19","@x":"352","@y":"212","@width":"20","@height":"70","@rotation":"90"},{"@id":"113","@type":"4","@gid":"17","@x":"287","@y":"245.5","@width":"24","@height":"11"},{"@id":"114","@type":"6","@gid":"17","@x":"419","@y":"319.5","@width":"24","@height":"11","@rotation":"90"},{"@id":"115","@gid":"27","@x":"317","@y":"332","@width":"31","@height":"34"},{"@id":"116","@gid":"27","@x":"20","@y":"99","@width":"31","@height":"34"},{"@id":"117","@gid":"27","@x":"495","@y":"255","@width":"31","@height":"34"},{"@id":"118","@type":"5","@gid":"18","@x":"38","@y":"351","@width":"25","@height":"19"},{"@id":"119","@gid":"42","@x":"280","@y":"490","@width":"35","@height":"35"},{"@id":"120","@gid":"3221225514","@x":"385.5","@y":"176.5","@width":"35","@height":"35"},{"@id":"121","@gid":"2147483690","@x":"383.5","@y":"211.5","@width":"35","@height":"35"}]},{"@name":"characters",object:[{"@id":"122","@gid":"24","@x":"86","@y":"484","@width":"44","@height":"52"},{"@id":"123","@gid":"28","@x":"630","@y":"350","@width":"63","@height":"50"}]},{"@name":"physics",object:[{"@id":"124","@x":"0","@y":"490","@width":"700","@height":"35"},{"@id":"125","@x":"630","@y":"455","@width":"70","@height":"35"},{"@id":"126","@x":"175","@y":"420","@width":"35","@height":"70"},{"@id":"127","@x":"210","@y":"455","@width":"35","@height":"35"},{"@id":"128","@x":"245","@y":"350","@width":"35","@height":"140"},{"@id":"129","@x":"350","@y":"385","@width":"245","@height":"35"},{"@id":"130","@x":"560","@y":"350","@width":"70","@height":"35"},{"@id":"131","@x":"0","@y":"350","@width":"105","@height":"35"},{"@id":"132","@x":"0","@y":"210","@width":"35","@height":"140"},{"@id":"133","@x":"0","@y":"175","@width":"70","@height":"35"},{"@id":"134","@x":"70","@y":"140","@width":"70","@height":"140"},{"@id":"135","@x":"35","@y":"245","@width":"175","@height":"35"},{"@id":"139","@x":"245","@y":"245","@width":"140","@height":"35"},{"@id":"140","@x":"385","@y":"245","@width":"35","@height":"105"},{"@id":"144","@x":"455","@y":"175","@width":"35","@height":"175"},{"@id":"145","@x":"455","@y":"140","@width":"175","@height":"35"},{"@id":"146","@x":"560","@y":"175","@width":"35","@height":"35"},{"@id":"147","@x":"420","@y":"140","@width":"35","@height":"70"},{"@id":"148","@x":"350","@y":"105","@width":"105","@height":"35"},{"@id":"149","@x":"350","@y":"140","@width":"35","@height":"105"},{"@id":"150","@x":"175","@y":"175","@width":"175","@height":"35"},{"@id":"151","@x":"315","@y":"210","@width":"35","@height":"35"}]}]},{"@level":"13","@version":"1.0","@orientation":"orthogonal","@renderorder":"right-down","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@width":"35","@height":"35","@source":"tiles/singleTile.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"tiles/platformLeft.png"}},{"@id":"2",image:{"@width":"35","@height":"35","@source":"tiles/platformCenter.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"tiles/platformRight.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformTop.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformCenter.png"}},{"@id":"6",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformBottom.png"}},{"@id":"7",image:{"@width":"35","@height":"35","@source":"tiles/tileTopLeft.png"}},{"@id":"8",image:{"@width":"35","@height":"35","@source":"tiles/tileTopCenter.png"}},{"@id":"9",image:{"@width":"35","@height":"35","@source":"tiles/tileTopRight.png"}},{"@id":"10",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterLeft.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"tiles/tileCenter.png"}},{"@id":"12",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterRight.png"}},{"@id":"13",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomLeft.png"}},{"@id":"14",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomCenter.png"}},{"@id":"15",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"70",tile:[{"@id":"0",image:{"@width":"24","@height":"11","@source":"active/PushButtonGraphics.png"}},{"@id":"1",image:{"@width":"25","@height":"19","@source":"active/TriggerGraphics.png"}},{"@id":"2",image:{"@width":"20","@height":"70","@source":"active/DoorGraphics.png"}},{"@id":"3",image:{"@width":"20","@height":"70","@source":"active/GlassDoorGraphics.png"}},{"@id":"4",image:{"@width":"70","@height":"19","@source":"active/ElevatorGraphics.png"}},{"@id":"5",image:{"@width":"105","@height":"20","@source":"active/BigElevatorGraphics.png"}},{"@id":"6",image:{"@width":"70","@height":"70","@source":"active/ExitGraphics.png"}},{"@id":"7",image:{"@width":"44","@height":"52","@source":"characters/HustlerGraphics.png"}},{"@id":"8",image:{"@width":"32","@height":"22","@source":"active/CameraGraphics.png"}},{"@id":"9",image:{"@width":"15","@height":"15","@source":"characters/EnemyLimiterGraphics.png"}},{"@id":"10",image:{"@width":"31","@height":"34","@source":"passive/MoneyBagGraphics.png"}},{"@id":"11",image:{"@width":"63","@height":"50","@source":"characters/DogGraphics.png"}},{"@id":"12",image:{"@width":"60","@height":"55","@source":"characters/Prisoner2Graphics.png"}},{"@id":"13",image:{"@width":"60","@height":"56","@source":"characters/PrisonerGraphics.png"}}]},{"@firstgid":"31","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@width":"50","@height":"50","@source":"passive/BigBoxGraphics.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"passive/BoxGraphics.png"}},{"@id":"2",image:{"@width":"37","@height":"35","@source":"passive/ToiletGraphics.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"passive/MonitorGraphics.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"passive/BasketBallGraphics.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"passive/StoolGraphics.png"}},{"@id":"6",image:{"@width":"150","@height":"20","@source":"passive/PlankGraphics.png"}},{"@id":"7",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"8",image:{"@width":"210","@height":"20","@source":"passive/BigPlankGraphics.png"}},{"@id":"9",image:{"@width":"100","@height":"20","@source":"passive/Plank5Graphics.png"}},{"@id":"10",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"passive/MirrorGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"136",tile:[{"@id":"0",image:{"@width":"232","@height":"79","@source":"decor/LevelTextGraphics.png"}},{"@id":"1",image:{"@width":"54","@height":"20","@source":"decor/Decor1Graphics.png"}},{"@id":"2",image:{"@width":"54","@height":"20","@source":"decor/Decor2Graphics.png"}},{"@id":"3",image:{"@width":"33","@height":"27","@source":"decor/Decor3Graphics.png"}},{"@id":"4",image:{"@width":"34","@height":"25","@source":"decor/Decor4Graphics.png"}},{"@id":"5",image:{"@width":"22","@height":"31","@source":"decor/Decor5Graphics.png"}},{"@id":"6",image:{"@width":"126","@height":"59","@source":"decor/Decor6Graphics.png"}},{"@id":"7",image:{"@width":"25","@height":"21","@source":"decor/Decor8Graphics.png"}},{"@id":"8",image:{"@width":"18","@height":"22","@source":"decor/Decor9Graphics.png"}},{"@id":"9",image:{"@width":"35","@height":"58","@source":"decor/Decor10Graphics.png"}},{"@id":"10",image:{"@width":"19","@height":"66","@source":"decor/Decor11Graphics.png"}},{"@id":"11",image:{"@width":"23","@height":"33","@source":"decor/Decor12Graphics.png"}},{"@id":"12",image:{"@width":"38","@height":"26","@source":"decor/Decor13Graphics.png"}},{"@id":"13",image:{"@width":"43","@height":"78","@source":"decor/Decor14Graphics.png"}},{"@id":"14",image:{"@width":"60","@height":"86","@source":"decor/Decor15Graphics.png"}},{"@id":"15",image:{"@width":"41","@height":"69","@source":"decor/Decor16Graphics.png"}},{"@id":"16",image:{"@width":"55","@height":"58","@source":"decor/Decor17Graphics.png"}},{"@id":"17",image:{"@width":"57","@height":"54","@source":"decor/Decor18Graphics.png"}},{"@id":"18",image:{"@width":"18","@height":"45","@source":"decor/Decor19Graphics.png"}},{"@id":"19",image:{"@width":"41","@height":"49","@source":"decor/Decor20Graphics.png"}},{"@id":"20",image:{"@width":"51","@height":"38","@source":"decor/Decor21Graphics.png"}},{"@id":"21",image:{"@width":"54","@height":"54","@source":"decor/Decor22Graphics.png"}},{"@id":"22",image:{"@width":"63","@height":"136","@source":"decor/Decor23Graphics.png"}},{"@id":"23",image:{"@width":"21","@height":"39","@source":"decor/Decor24Graphics.png"}},{"@id":"24",image:{"@width":"104","@height":"50","@source":"decor/Decor25Graphics.png"}},{"@id":"25",image:{"@width":"104","@height":"46","@source":"decor/Decor26Graphics.png"}},{"@id":"26",image:{"@width":"86","@height":"38","@source":"decor/Decor27Graphics.png"}},{"@id":"27",image:{"@width":"63","@height":"55","@source":"decor/Decor28Graphics.png"}},{"@id":"28",image:{"@width":"13","@height":"23","@source":"decor/Decor29Graphics.png"}},{"@id":"29",image:{"@width":"28","@height":"40","@source":"decor/Decor30Graphics.png"}},{"@id":"30",image:{"@width":"69","@height":"30","@source":"decor/Decor31Graphics.png"}},{"@id":"31",image:{"@width":"33","@height":"29","@source":"decor/Decor32Graphics.png"}},{"@id":"32",image:{"@width":"42","@height":"42","@source":"decor/Decor33Graphics.png"}},{"@id":"33",image:{"@width":"60","@height":"66","@source":"decor/Decor34Graphics.png"}},{"@id":"34",image:{"@width":"46","@height":"65","@source":"decor/Decor35Graphics.png"}},{"@id":"35",image:{"@width":"71","@height":"55","@source":"decor/Decor36Graphics.png"}},{"@id":"36",image:{"@width":"35","@height":"55","@source":"decor/Decor37Graphics.png"}},{"@id":"37",image:{"@width":"28","@height":"29","@source":"decor/Decor38Graphics.png"}},{"@id":"38",image:{"@width":"38","@height":"37","@source":"decor/Decor39Graphics.png"}},{"@id":"39",image:{"@width":"103","@height":"50","@source":"decor/Decor40Graphics.png"}},{"@id":"40",image:{"@width":"56","@height":"55","@source":"decor/Decor41Graphics.png"}},{"@id":"41",image:{"@width":"71","@height":"50","@source":"decor/Decor42Graphics.png"}},{"@id":"42",image:{"@width":"200","@height":"44","@source":"decor/TxtGraphics.png"}}]}],imagelayer:{"@name":"background",image:{"@source":"bg/Background1Graphics.png"}},objectgroup:[{"@name":"decorations",object:[{"@gid":"43","@x":"333","@y":"445","@width":"232","@height":"79",properties:{property:{"@name":"text","@value":"Manipulation"}}},{"@gid":"44","@x":"105","@y":"372"},{"@gid":"47","@x":"420","@y":"245"},{"@gid":"62","@x":"175","@y":"280"},{"@gid":"68","@x":"84","@y":"486"},{"@gid":"78","@x":"280","@y":"315"},{"@gid":"81","@x":"35","@y":"455"},{"@gid":"76","@x":"490","@y":"175"},{"@gid":"52","@x":"648","@y":"455"},{"@gid":"64","@x":"385","@y":"140"}]},{"@name":"tiles",object:[{"@gid":"12","@x":"280","@y":"210","@width":"35","@height":"35"},{"@gid":"12","@x":"455","@y":"210","@width":"35","@height":"35"},{"@gid":"12","@x":"560","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"595","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"525","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"490","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"455","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"420","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"385","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"350","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"315","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"280","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"245","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"210","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"175","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"140","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"105","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"70","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"35","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"0","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"630","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"665","@y":"525","@width":"35","@height":"35"},{"@gid":"8","@x":"560","@y":"490","@width":"35","@height":"35"},{"@gid":"10","@x":"595","@y":"490","@width":"35","@height":"35"},{"@gid":"7","@x":"210","@y":"455","@width":"35","@height":"35"},{"@gid":"8","@x":"210","@y":"420","@width":"35","@height":"35"},{"@gid":"8","@x":"315","@y":"350","@width":"35","@height":"35"},{"@gid":"8","@x":"245","@y":"70","@width":"35","@height":"35"},{"@gid":"10","@x":"0","@y":"315","@width":"35","@height":"35"},{"@gid":"10","@x":"595","@y":"210","@width":"35","@height":"35"},{"@gid":"10","@x":"105","@y":"175","@width":"35","@height":"35"},{"@gid":"4","@x":"455","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"350","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"385","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"420","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"280","@y":"420","@width":"35","@height":"35"},{"@gid":"3","@x":"245","@y":"420","@width":"35","@height":"35"},{"@gid":"16","@x":"315","@y":"420","@width":"35","@height":"35"},{"@gid":"6","@x":"315","@y":"385","@width":"35","@height":"35"},{"@gid":"6","@x":"245","@y":"140","@width":"35","@height":"35"},{"@gid":"6","@x":"245","@y":"175","@width":"35","@height":"35"},{"@gid":"6","@x":"595","@y":"245","@width":"35","@height":"35"},{"@gid":"6","@x":"595","@y":"280","@width":"35","@height":"35"},{"@gid":"6","@x":"595","@y":"315","@width":"35","@height":"35"},{"@gid":"2","@x":"560","@y":"350","@width":"35","@height":"35"},{"@gid":"2","@x":"420","@y":"210","@width":"35","@height":"35"},{"@gid":"4","@x":"245","@y":"350","@width":"35","@height":"35"},{"@gid":"4","@x":"140","@y":"210","@width":"35","@height":"35"},{"@gid":"14","@x":"245","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"210","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"175","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"140","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"105","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"70","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"35","@y":"350","@width":"35","@height":"35"},{"@gid":"15","@x":"0","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"70","@y":"175","@width":"35","@height":"35"},{"@gid":"3","@x":"35","@y":"175","@width":"35","@height":"35"},{"@gid":"3","@x":"0","@y":"175","@width":"35","@height":"35"},{"@gid":"7","@x":"105","@y":"245","@width":"35","@height":"35"},{"@gid":"7","@x":"455","@y":"245","@width":"35","@height":"35"},{"@gid":"5","@x":"455","@y":"175","@width":"35","@height":"35"},{"@gid":"3","@x":"490","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"525","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"560","@y":"210","@width":"35","@height":"35"},{"@gid":"11","@x":"105","@y":"210","@width":"35","@height":"35"},{"@gid":"16","@x":"595","@y":"350","@width":"35","@height":"35"},{"@gid":"14","@x":"315","@y":"245","@width":"35","@height":"35"},{"@gid":"16","@x":"350","@y":"245","@width":"35","@height":"35"},{"@gid":"10","@x":"350","@y":"210","@width":"35","@height":"35"},{"@gid":"9","@x":"315","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"280","@y":"210","@width":"35","@height":"35"},{"@gid":"16","@x":"315","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"280","@y":"70","@width":"35","@height":"35"},{"@gid":"6","@x":"315","@y":"35","@width":"35","@height":"35"},{"@gid":"6","@x":"245","@y":"105","@width":"35","@height":"35"}]},{"@name":"active",object:[{"@gid":"30","@x":"276","@y":"315","@width":"60","@height":"56",properties:{property:[{"@name":"limitLeft","@value":"0"},{"@name":"limitRight","@value":"50"}]}},{"@gid":"25","@x":"246","@y":"232","@width":"32","@height":"22",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"90"},{"@name":"minAngle","@value":"90"},{"@name":"speedX","@value":"0"}]}},{"@type":"2","@gid":"19","@x":"245","@y":"196","@width":"20","@height":"70","@rotation":"-90"},{"@type":"6","@gid":"19","@x":"246","@y":"315","@width":"20","@height":"70","@rotation":"90"},{"@type":"3","@gid":"17","@x":"410","@y":"317","@width":"24","@height":"11"},{"@type":"3","@gid":"19","@x":"379","@y":"174","@width":"20","@height":"70","@rotation":"180"},{"@type":"5","@gid":"17","@x":"6","@y":"282","@width":"24","@height":"11"},{"@type":"4","@gid":"19","@x":"463","@y":"315","@width":"20","@height":"70"},{"@type":"5","@gid":"21","@x":"489","@y":"334.5","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"140"},{"@name":"speedY","@value":"45"}]}},{"@type":"6","@gid":"21","@x":"631","@y":"473.5","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"280"},{"@name":"speedY","@value":"-45"}]}},{"@type":"2","@gid":"17","@x":"18","@y":"491.5","@width":"24","@height":"11"},{"@gid":"27","@x":"29","@y":"234","@width":"31","@height":"34"},{"@gid":"27","@x":"530","@y":"90","@width":"31","@height":"34"},{"@gid":"27","@x":"513","@y":"272","@width":"31","@height":"34"},{"@type":"6","@gid":"17","@x":"566","@y":"316.5","@width":"24","@height":"11"},{"@type":"4","@gid":"18","@x":"292","@y":"176","@width":"25","@height":"19"},{"@gid":"32","@x":"236","@y":"387","@width":"35","@height":"35"},{"@gid":"30","@x":"104","@y":"491","@width":"60","@height":"56",properties:{property:[{"@name":"limitLeft","@value":"50"},{"@name":"limitRight","@value":"25"}]}},{"@type":"3","@gid":"19","@x":"111","@y":"315","@width":"20","@height":"70"}]},{"@name":"characters",object:[{"@gid":"24","@x":"73","@y":"141","@width":"44","@height":"52"},{"@gid":"28","@x":"437.5","@y":"488","@width":"63","@height":"50"}]},{"@name":"physics",object:[{"@x":"0","@y":"490","@width":"700","@height":"35"},{"@x":"560","@y":"455","@width":"70","@height":"35"},{"@x":"210","@y":"420","@width":"35","@height":"35"},{"@x":"210","@y":"385","@width":"140","@height":"35"},{"@x":"315","@y":"350","@width":"35","@height":"35"},{"@x":"315","@y":"315","@width":"175","@height":"35"},{"@x":"0","@y":"315","@width":"280","@height":"35"},{"@x":"0","@y":"280","@width":"35","@height":"35"},{"@x":"560","@y":"315","@width":"35","@height":"35"},{"@x":"595","@y":"210","@width":"35","@height":"140"},{"@x":"420","@y":"175","@width":"210","@height":"35"},{"@x":"455","@y":"140","@width":"35","@height":"105"},{"@x":"245","@y":"175","@width":"140","@height":"35"},{"@x":"315","@y":"210","@width":"70","@height":"35"},{"@x":"245","@y":"35","@width":"35","@height":"140"},{"@x":"280","@y":"35","@width":"70","@height":"35"},{"@x":"315","@y":"0","@width":"35","@height":"35"},{"@x":"0","@y":"140","@width":"140","@height":"35"},{"@x":"105","@y":"175","@width":"70","@height":"35"},{"@x":"105","@y":"210","@width":"35","@height":"35"}]}]},{"@level":"14","@version":"1.0","@orientation":"orthogonal","@renderorder":"right-down","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35","@nextobjectid":"168",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35","@tilecount":"16",tile:[{"@id":"0",image:{"@width":"35","@height":"35","@source":"tiles/singleTile.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"tiles/platformLeft.png"}},{"@id":"2",image:{"@width":"35","@height":"35","@source":"tiles/platformCenter.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"tiles/platformRight.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformTop.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformCenter.png"}},{"@id":"6",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformBottom.png"}},{"@id":"7",image:{"@width":"35","@height":"35","@source":"tiles/tileTopLeft.png"}},{"@id":"8",image:{"@width":"35","@height":"35","@source":"tiles/tileTopCenter.png"}},{"@id":"9",image:{"@width":"35","@height":"35","@source":"tiles/tileTopRight.png"}},{"@id":"10",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterLeft.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"tiles/tileCenter.png"}},{"@id":"12",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterRight.png"}},{"@id":"13",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomLeft.png"}},{"@id":"14",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomCenter.png"}},{"@id":"15",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"70","@tilecount":"14",tile:[{"@id":"0",image:{"@width":"24","@height":"11","@source":"active/PushButtonGraphics.png"}},{"@id":"1",image:{"@width":"25","@height":"19","@source":"active/TriggerGraphics.png"}},{"@id":"2",image:{"@width":"20","@height":"70","@source":"active/DoorGraphics.png"}},{"@id":"3",image:{"@width":"20","@height":"70","@source":"active/GlassDoorGraphics.png"}},{"@id":"4",image:{"@width":"70","@height":"19","@source":"active/ElevatorGraphics.png"}},{"@id":"5",image:{"@width":"105","@height":"20","@source":"active/BigElevatorGraphics.png"}},{"@id":"6",image:{"@width":"70","@height":"70","@source":"active/ExitGraphics.png"}},{"@id":"7",image:{"@width":"44","@height":"52","@source":"characters/HustlerGraphics.png"}},{"@id":"8",image:{"@width":"32","@height":"22","@source":"active/CameraGraphics.png"}},{"@id":"9",image:{"@width":"15","@height":"15","@source":"characters/EnemyLimiterGraphics.png"}},{"@id":"10",image:{"@width":"31","@height":"34","@source":"passive/MoneyBagGraphics.png"}},{"@id":"11",image:{"@width":"63","@height":"50","@source":"characters/DogGraphics.png"}},{"@id":"12",image:{"@width":"60","@height":"55","@source":"characters/Prisoner2Graphics.png"}},{"@id":"13",image:{"@width":"60","@height":"56","@source":"characters/PrisonerGraphics.png"}}]},{"@firstgid":"31","@name":"passive","@tilewidth":"210","@tileheight":"50","@tilecount":"12",tile:[{"@id":"0",image:{"@width":"50","@height":"50","@source":"passive/BigBoxGraphics.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"passive/BoxGraphics.png"}},{"@id":"2",image:{"@width":"37","@height":"35","@source":"passive/ToiletGraphics.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"passive/MonitorGraphics.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"passive/BasketBallGraphics.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"passive/StoolGraphics.png"}},{"@id":"6",image:{"@width":"150","@height":"20","@source":"passive/PlankGraphics.png"}},{"@id":"7",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"8",image:{"@width":"210","@height":"20","@source":"passive/BigPlankGraphics.png"}},{"@id":"9",image:{"@width":"100","@height":"20","@source":"passive/Plank5Graphics.png"}},{"@id":"10",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"passive/MirrorGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"136","@tilecount":"43",tile:[{"@id":"0",image:{"@width":"232","@height":"79","@source":"decor/LevelTextGraphics.png"}},{"@id":"1",image:{"@width":"54","@height":"20","@source":"decor/Decor1Graphics.png"}},{"@id":"2",image:{"@width":"54","@height":"20","@source":"decor/Decor2Graphics.png"}},{"@id":"3",image:{"@width":"33","@height":"27","@source":"decor/Decor3Graphics.png"}},{"@id":"4",image:{"@width":"34","@height":"25","@source":"decor/Decor4Graphics.png"}},{"@id":"5",image:{"@width":"22","@height":"31","@source":"decor/Decor5Graphics.png"}},{"@id":"6",image:{"@width":"126","@height":"59","@source":"decor/Decor6Graphics.png"}},{"@id":"7",image:{"@width":"25","@height":"21","@source":"decor/Decor8Graphics.png"}},{"@id":"8",image:{"@width":"18","@height":"22","@source":"decor/Decor9Graphics.png"}},{"@id":"9",image:{"@width":"35","@height":"58","@source":"decor/Decor10Graphics.png"}},{"@id":"10",image:{"@width":"19","@height":"66","@source":"decor/Decor11Graphics.png"}},{"@id":"11",image:{"@width":"23","@height":"33","@source":"decor/Decor12Graphics.png"}},{"@id":"12",image:{"@width":"38","@height":"26","@source":"decor/Decor13Graphics.png"}},{"@id":"13",image:{"@width":"43","@height":"78","@source":"decor/Decor14Graphics.png"}},{"@id":"14",image:{"@width":"60","@height":"86","@source":"decor/Decor15Graphics.png"}},{"@id":"15",image:{"@width":"41","@height":"69","@source":"decor/Decor16Graphics.png"}},{"@id":"16",image:{"@width":"55","@height":"58","@source":"decor/Decor17Graphics.png"}},{"@id":"17",image:{"@width":"57","@height":"54","@source":"decor/Decor18Graphics.png"}},{"@id":"18",image:{"@width":"18","@height":"45","@source":"decor/Decor19Graphics.png"}},{"@id":"19",image:{"@width":"41","@height":"49","@source":"decor/Decor20Graphics.png"}},{"@id":"20",image:{"@width":"51","@height":"38","@source":"decor/Decor21Graphics.png"}},{"@id":"21",image:{"@width":"54","@height":"54","@source":"decor/Decor22Graphics.png"}},{"@id":"22",image:{"@width":"63","@height":"136","@source":"decor/Decor23Graphics.png"}},{"@id":"23",image:{"@width":"21","@height":"39","@source":"decor/Decor24Graphics.png"}},{"@id":"24",image:{"@width":"104","@height":"50","@source":"decor/Decor25Graphics.png"}},{"@id":"25",image:{"@width":"104","@height":"46","@source":"decor/Decor26Graphics.png"}},{"@id":"26",image:{"@width":"86","@height":"38","@source":"decor/Decor27Graphics.png"}},{"@id":"27",image:{"@width":"63","@height":"55","@source":"decor/Decor28Graphics.png"}},{"@id":"28",image:{"@width":"13","@height":"23","@source":"decor/Decor29Graphics.png"}},{"@id":"29",image:{"@width":"28","@height":"40","@source":"decor/Decor30Graphics.png"}},{"@id":"30",image:{"@width":"69","@height":"30","@source":"decor/Decor31Graphics.png"}},{"@id":"31",image:{"@width":"33","@height":"29","@source":"decor/Decor32Graphics.png"}},{"@id":"32",image:{"@width":"42","@height":"42","@source":"decor/Decor33Graphics.png"}},{"@id":"33",image:{"@width":"60","@height":"66","@source":"decor/Decor34Graphics.png"}},{"@id":"34",image:{"@width":"46","@height":"65","@source":"decor/Decor35Graphics.png"}},{"@id":"35",image:{"@width":"71","@height":"55","@source":"decor/Decor36Graphics.png"}},{"@id":"36",image:{"@width":"35","@height":"55","@source":"decor/Decor37Graphics.png"}},{"@id":"37",image:{"@width":"28","@height":"29","@source":"decor/Decor38Graphics.png"}},{"@id":"38",image:{"@width":"38","@height":"37","@source":"decor/Decor39Graphics.png"}},{"@id":"39",image:{"@width":"103","@height":"50","@source":"decor/Decor40Graphics.png"}},{"@id":"40",image:{"@width":"56","@height":"55","@source":"decor/Decor41Graphics.png"}},{"@id":"41",image:{"@width":"71","@height":"50","@source":"decor/Decor42Graphics.png"}},{"@id":"42",image:{"@width":"200","@height":"44","@source":"decor/TxtGraphics.png"}}]}],imagelayer:{"@name":"background",image:{"@source":"bg/Background1Graphics.png"}},objectgroup:[{"@name":"decorations",object:[{"@id":"1","@gid":"43","@x":"35","@y":"175","@width":"232","@height":"79",properties:{property:{"@name":"text","@value":"Ball delivery"}}},{"@id":"2","@gid":"44","@x":"321","@y":"160","@width":"54","@height":"20"},{"@id":"3","@gid":"56","@x":"609","@y":"385","@width":"43","@height":"78"},{"@id":"4","@gid":"57","@x":"84","@y":"454","@width":"60","@height":"86"},{"@id":"5","@gid":"69","@x":"385","@y":"350","@width":"86","@height":"38"},{"@id":"6","@gid":"71","@x":"490","@y":"350","@width":"13","@height":"23"},{"@id":"7","@gid":"84","@x":"189","@y":"347","@width":"71","@height":"50"},{"@id":"8","@gid":"55","@x":"35","@y":"260","@width":"38","@height":"26"},{"@id":"9","@gid":"49","@x":"323","@y":"447","@width":"126","@height":"59"},{"@id":"10","@gid":"50","@x":"467","@y":"200","@width":"25","@height":"21"}]},{"@name":"tiles",object:[{"@id":"11","@gid":"9","@x":"490","@y":"490","@width":"35","@height":"35"},{"@id":"12","@gid":"9","@x":"455","@y":"490","@width":"35","@height":"35"},{"@id":"13","@gid":"9","@x":"385","@y":"490","@width":"35","@height":"35"},{"@id":"14","@gid":"9","@x":"420","@y":"490","@width":"35","@height":"35"},{"@id":"15","@gid":"9","@x":"280","@y":"490","@width":"35","@height":"35"},{"@id":"16","@gid":"9","@x":"245","@y":"490","@width":"35","@height":"35"},{"@id":"17","@gid":"9","@x":"210","@y":"490","@width":"35","@height":"35"},{"@id":"18","@gid":"12","@x":"35","@y":"525","@width":"35","@height":"35"},{"@id":"19","@gid":"12","@x":"0","@y":"490","@width":"35","@height":"35"},{"@id":"20","@gid":"12","@x":"0","@y":"455","@width":"35","@height":"35"},{"@id":"21","@gid":"12","@x":"0","@y":"525","@width":"35","@height":"35"},{"@id":"22","@gid":"12","@x":"490","@y":"280","@width":"35","@height":"35"},{"@id":"23","@gid":"12","@x":"140","@y":"245","@width":"35","@height":"35"},{"@id":"24","@gid":"12","@x":"140","@y":"525","@width":"35","@height":"35"},{"@id":"25","@gid":"12","@x":"175","@y":"525","@width":"35","@height":"35"},{"@id":"26","@gid":"12","@x":"665","@y":"525","@width":"35","@height":"35"},{"@id":"27","@gid":"12","@x":"525","@y":"280","@width":"35","@height":"35"},{"@id":"28","@gid":"12","@x":"0","@y":"420","@width":"35","@height":"35"},{"@id":"29","@gid":"12","@x":"560","@y":"525","@width":"35","@height":"35"},{"@id":"30","@gid":"12","@x":"245","@y":"525","@width":"35","@height":"35"},{"@id":"31","@gid":"12","@x":"350","@y":"525","@width":"35","@height":"35"},{"@id":"32","@gid":"12","@x":"210","@y":"525","@width":"35","@height":"35"},{"@id":"33","@gid":"12","@x":"280","@y":"525","@width":"35","@height":"35"},{"@id":"34","@gid":"12","@x":"315","@y":"525","@width":"35","@height":"35"},{"@id":"35","@gid":"12","@x":"490","@y":"525","@width":"35","@height":"35"},{"@id":"36","@gid":"12","@x":"420","@y":"525","@width":"35","@height":"35"},{"@id":"37","@gid":"12","@x":"455","@y":"525","@width":"35","@height":"35"},{"@id":"38","@gid":"12","@x":"525","@y":"525","@width":"35","@height":"35"},{"@id":"39","@gid":"12","@x":"385","@y":"525","@width":"35","@height":"35"},{"@id":"40","@gid":"9","@x":"525","@y":"490","@width":"35","@height":"35"},{"@id":"41","@gid":"9","@x":"350","@y":"490","@width":"35","@height":"35"},{"@id":"42","@gid":"9","@x":"315","@y":"490","@width":"35","@height":"35"},{"@id":"43","@gid":"9","@x":"175","@y":"490","@width":"35","@height":"35"},{"@id":"44","@gid":"9","@x":"70","@y":"525","@width":"35","@height":"35"},{"@id":"45","@gid":"9","@x":"105","@y":"525","@width":"35","@height":"35"},{"@id":"46","@gid":"9","@x":"595","@y":"525","@width":"35","@height":"35"},{"@id":"47","@gid":"9","@x":"630","@y":"525","@width":"35","@height":"35"},{"@id":"48","@gid":"10","@x":"560","@y":"490","@width":"35","@height":"35"},{"@id":"49","@gid":"8","@x":"140","@y":"490","@width":"35","@height":"35"},{"@id":"50","@gid":"8","@x":"140","@y":"385","@width":"35","@height":"35"},{"@id":"51","@gid":"8","@x":"455","@y":"245","@width":"35","@height":"35"},{"@id":"52","@gid":"8","@x":"140","@y":"210","@width":"35","@height":"35"},{"@id":"53","@gid":"8","@x":"105","@y":"280","@width":"35","@height":"35"},{"@id":"54","@gid":"10","@x":"35","@y":"385","@width":"35","@height":"35"},{"@id":"55","@gid":"10","@x":"560","@y":"245","@width":"35","@height":"35"},{"@id":"56","@gid":"10","@x":"175","@y":"210","@width":"35","@height":"35"},{"@id":"57","@gid":"10","@x":"0","@y":"175","@width":"35","@height":"35"},{"@id":"58","@gid":"13","@x":"35","@y":"490","@width":"35","@height":"35"},{"@id":"59","@gid":"13","@x":"35","@y":"455","@width":"35","@height":"35"},{"@id":"60","@gid":"13","@x":"35","@y":"420","@width":"35","@height":"35"},{"@id":"61","@gid":"13","@x":"385","@y":"245","@width":"35","@height":"35"},{"@id":"62","@gid":"13","@x":"560","@y":"280","@width":"35","@height":"35"},{"@id":"63","@gid":"13","@x":"560","@y":"315","@width":"35","@height":"35"},{"@id":"64","@gid":"13","@x":"140","@y":"280","@width":"35","@height":"35"},{"@id":"65","@gid":"11","@x":"665","@y":"490","@width":"35","@height":"35"},{"@id":"66","@gid":"11","@x":"665","@y":"455","@width":"35","@height":"35"},{"@id":"67","@gid":"11","@x":"665","@y":"420","@width":"35","@height":"35"},{"@id":"68","@gid":"11","@x":"665","@y":"385","@width":"35","@height":"35"},{"@id":"69","@gid":"11","@x":"665","@y":"350","@width":"35","@height":"35"},{"@id":"70","@gid":"11","@x":"665","@y":"315","@width":"35","@height":"35"},{"@id":"71","@gid":"11","@x":"665","@y":"280","@width":"35","@height":"35"},{"@id":"72","@gid":"11","@x":"665","@y":"245","@width":"35","@height":"35"},{"@id":"73","@gid":"11","@x":"665","@y":"210","@width":"35","@height":"35"},{"@id":"74","@gid":"11","@x":"665","@y":"175","@width":"35","@height":"35"},{"@id":"75","@gid":"9","@x":"665","@y":"140","@width":"35","@height":"35"},{"@id":"76","@gid":"9","@x":"0","@y":"385","@width":"35","@height":"35"},{"@id":"77","@gid":"3","@x":"455","@y":"140","@width":"35","@height":"35"},{"@id":"78","@gid":"3","@x":"490","@y":"140","@width":"35","@height":"35"},{"@id":"79","@gid":"3","@x":"525","@y":"140","@width":"35","@height":"35"},{"@id":"80","@gid":"3","@x":"560","@y":"140","@width":"35","@height":"35"},{"@id":"81","@gid":"3","@x":"595","@y":"140","@width":"35","@height":"35"},{"@id":"82","@gid":"3","@x":"630","@y":"140","@width":"35","@height":"35"},{"@id":"83","@gid":"3","@x":"315","@y":"140","@width":"35","@height":"35"},{"@id":"84","@gid":"3","@x":"350","@y":"140","@width":"35","@height":"35"},{"@id":"85","@gid":"3","@x":"455","@y":"385","@width":"35","@height":"35"},{"@id":"86","@gid":"3","@x":"420","@y":"385","@width":"35","@height":"35"},{"@id":"87","@gid":"2","@x":"385","@y":"385","@width":"35","@height":"35"},{"@id":"88","@gid":"2","@x":"280","@y":"140","@width":"35","@height":"35"},{"@id":"89","@gid":"4","@x":"490","@y":"385","@width":"35","@height":"35"},{"@id":"90","@gid":"4","@x":"35","@y":"210","@width":"35","@height":"35"},{"@id":"91","@gid":"15","@x":"0","@y":"210","@width":"35","@height":"35"},{"@id":"92","@gid":"2","@x":"35","@y":"315","@width":"35","@height":"35"},{"@id":"93","@gid":"14","@x":"140","@y":"420","@width":"35","@height":"35"},{"@id":"94","@gid":"14","@x":"455","@y":"280","@width":"35","@height":"35"},{"@id":"95","@gid":"14","@x":"490","@y":"315","@width":"35","@height":"35"},{"@id":"96","@gid":"16","@x":"140","@y":"315","@width":"35","@height":"35"},{"@id":"97","@gid":"16","@x":"280","@y":"420","@width":"35","@height":"35"},{"@id":"98","@gid":"16","@x":"420","@y":"175","@width":"35","@height":"35"},{"@id":"99","@gid":"9","@x":"420","@y":"140","@width":"35","@height":"35"},{"@id":"100","@gid":"9","@x":"385","@y":"140","@width":"35","@height":"35"},{"@id":"101","@gid":"11","@x":"385","@y":"175","@width":"35","@height":"35"},{"@id":"102","@gid":"11","@x":"280","@y":"280","@width":"35","@height":"35"},{"@id":"103","@gid":"6","@x":"385","@y":"210","@width":"35","@height":"35"},{"@id":"104","@gid":"6","@x":"560","@y":"350","@width":"35","@height":"35"},{"@id":"105","@gid":"6","@x":"280","@y":"315","@width":"35","@height":"35"},{"@id":"106","@gid":"6","@x":"280","@y":"350","@width":"35","@height":"35"},{"@id":"107","@gid":"6","@x":"280","@y":"385","@width":"35","@height":"35"},{"@id":"108","@gid":"7","@x":"560","@y":"385","@width":"35","@height":"35"},{"@id":"109","@gid":"16","@x":"385","@y":"280","@width":"35","@height":"35"},{"@id":"110","@gid":"15","@x":"315","@y":"280","@width":"35","@height":"35"},{"@id":"111","@gid":"15","@x":"350","@y":"280","@width":"35","@height":"35"},{"@id":"112","@gid":"3","@x":"245","@y":"245","@width":"35","@height":"35"},{"@id":"113","@gid":"3","@x":"210","@y":"245","@width":"35","@height":"35"},{"@id":"114","@gid":"9","@x":"350","@y":"245","@width":"35","@height":"35"},{"@id":"115","@gid":"9","@x":"315","@y":"245","@width":"35","@height":"35"},{"@id":"116","@gid":"9","@x":"280","@y":"245","@width":"35","@height":"35"},{"@id":"117","@gid":"15","@x":"175","@y":"245","@width":"35","@height":"35"},{"@id":"118","@gid":"15","@x":"105","@y":"315","@width":"35","@height":"35"},{"@id":"119","@gid":"3","@x":"70","@y":"315","@width":"35","@height":"35"},{"@id":"120","@gid":"3","@x":"245","@y":"420","@width":"35","@height":"35"},{"@id":"121","@gid":"15","@x":"210","@y":"420","@width":"35","@height":"35"},{"@id":"122","@gid":"15","@x":"175","@y":"420","@width":"35","@height":"35"},{"@id":"123","@gid":"9","@x":"175","@y":"385","@width":"35","@height":"35"},{"@id":"124","@gid":"10","@x":"210","@y":"385","@width":"35","@height":"35"},{"@id":"125","@gid":"15","@x":"525","@y":"315","@width":"35","@height":"35"},{"@id":"126","@gid":"9","@x":"525","@y":"245","@width":"35","@height":"35"},{"@id":"127","@gid":"9","@x":"490","@y":"245","@width":"35","@height":"35"}]},{"@name":"active",object:[{"@id":"128","@gid":"30","@x":"387","@y":"349","@width":"60","@height":"56"},{"@id":"129","@type":"2","@gid":"21","@x":"595","@y":"474","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"245"},{"@name":"speedY","@value":"-45"}]}},{"@id":"130","@gid":"19","@x":"385","@y":"370","@width":"20","@height":"70","@rotation":"-90"},{"@id":"131","@gid":"35","@x":"522","@y":"211","@width":"35","@height":"35"},{"@id":"132","@type":"4","@gid":"21","@x":"70","@y":"475.5","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"105"},{"@name":"speedY","@value":"-45"}]}},{"@id":"133","@type":"4","@gid":"17","@x":"427","@y":"455.5","@width":"24","@height":"11"},{"@id":"134","@type":"3","@gid":"19","@x":"310","@y":"140","@width":"20","@height":"70","@rotation":"180"},{"@id":"135","@gid":"27","@x":"215","@y":"302","@width":"31","@height":"34"},{"@id":"136","@gid":"27","@x":"481","@y":"70","@width":"31","@height":"34"},{"@id":"137","@gid":"27","@x":"611","@y":"188","@width":"31","@height":"34"},{"@id":"138","@gid":"17","@x":"345","@y":"210.5","@width":"24","@height":"11"},{"@id":"139","@type":"2","@gid":"17","@x":"6","@y":"141.5","@width":"24","@height":"11"},{"@id":"140","@type":"6","@gid":"17","@x":"428","@y":"105.5","@width":"24","@height":"11"},{"@id":"141","@type":"3","@gid":"17","@x":"251","@y":"385.5","@width":"24","@height":"11"},{"@id":"142","@type":"6","@gid":"19","@x":"489","@y":"264","@width":"20","@height":"70","@rotation":"-90"},{"@id":"143","@type":"4","@gid":"19","@x":"160","@y":"315","@width":"20","@height":"70","@rotation":"180"},{"@id":"144","@type":"4","@gid":"19","@x":"70","@y":"315","@width":"20","@height":"70","@rotation":"180"}]},{"@name":"characters",object:[{"@id":"145","@gid":"24","@x":"210","@y":"210","@width":"44","@height":"52"},{"@id":"146","@gid":"28","@x":"472.5","@y":"457","@width":"63","@height":"50"}]},{"@name":"physics",object:[{"@id":"147","@x":"0","@y":"490","@width":"700","@height":"35"},{"@id":"148","@x":"0","@y":"350","@width":"70","@height":"140"},{"@id":"149","@x":"140","@y":"455","@width":"455","@height":"35"},{"@id":"150","@x":"665","@y":"140","@width":"35","@height":"350"},{"@id":"151","@x":"280","@y":"105","@width":"420","@height":"35"},{"@id":"152","@x":"420","@y":"140","@width":"35","@height":"35"},{"@id":"153","@x":"385","@y":"140","@width":"35","@height":"70"},{"@id":"154","@x":"140","@y":"210","@width":"280","@height":"35"},{"@id":"155","@x":"140","@y":"175","@width":"70","@height":"35"},{"@id":"156","@x":"280","@y":"245","@width":"140","@height":"35"},{"@id":"157","@x":"455","@y":"210","@width":"140","@height":"70"},{"@id":"158","@x":"490","@y":"280","@width":"105","@height":"35"},{"@id":"159","@x":"560","@y":"315","@width":"35","@height":"70"},{"@id":"160","@x":"385","@y":"350","@width":"140","@height":"35"},{"@id":"161","@x":"280","@y":"280","@width":"35","@height":"140"},{"@id":"162","@x":"140","@y":"385","@width":"140","@height":"35"},{"@id":"163","@x":"140","@y":"350","@width":"105","@height":"35"},{"@id":"164","@x":"35","@y":"280","@width":"140","@height":"35"},{"@id":"165","@x":"105","@y":"245","@width":"70","@height":"35"},{"@id":"166","@x":"0","@y":"175","@width":"70","@height":"35"},{"@id":"167","@x":"0","@y":"140","@width":"35","@height":"35"}]}]},{"@level":"15","@version":"1.0","@orientation":"orthogonal","@renderorder":"right-down","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35","@nextobjectid":"160",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35","@tilecount":"16",tile:[{"@id":"0",image:{"@width":"35","@height":"35","@source":"tiles/singleTile.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"tiles/platformLeft.png"}},{"@id":"2",image:{"@width":"35","@height":"35","@source":"tiles/platformCenter.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"tiles/platformRight.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformTop.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformCenter.png"}},{"@id":"6",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformBottom.png"}},{"@id":"7",image:{"@width":"35","@height":"35","@source":"tiles/tileTopLeft.png"}},{"@id":"8",image:{"@width":"35","@height":"35","@source":"tiles/tileTopCenter.png"}},{"@id":"9",image:{"@width":"35","@height":"35","@source":"tiles/tileTopRight.png"}},{"@id":"10",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterLeft.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"tiles/tileCenter.png"}},{"@id":"12",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterRight.png"}},{"@id":"13",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomLeft.png"}},{"@id":"14",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomCenter.png"}},{"@id":"15",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"70","@tilecount":"14",tile:[{"@id":"0",image:{"@width":"24","@height":"11","@source":"active/PushButtonGraphics.png"}},{"@id":"1",image:{"@width":"25","@height":"19","@source":"active/TriggerGraphics.png"}},{"@id":"2",image:{"@width":"20","@height":"70","@source":"active/DoorGraphics.png"}},{"@id":"3",image:{"@width":"20","@height":"70","@source":"active/GlassDoorGraphics.png"}},{"@id":"4",image:{"@width":"70","@height":"19","@source":"active/ElevatorGraphics.png"}},{"@id":"5",image:{"@width":"105","@height":"20","@source":"active/BigElevatorGraphics.png"}},{"@id":"6",image:{"@width":"70","@height":"70","@source":"active/ExitGraphics.png"}},{"@id":"7",image:{"@width":"44","@height":"52","@source":"characters/HustlerGraphics.png"}},{"@id":"8",image:{"@width":"32","@height":"22","@source":"active/CameraGraphics.png"}},{"@id":"9",image:{"@width":"15","@height":"15","@source":"characters/EnemyLimiterGraphics.png"}},{"@id":"10",image:{"@width":"31","@height":"34","@source":"passive/MoneyBagGraphics.png"}},{"@id":"11",image:{"@width":"63","@height":"50","@source":"characters/DogGraphics.png"}},{"@id":"12",image:{"@width":"60","@height":"55","@source":"characters/Prisoner2Graphics.png"}},{"@id":"13",image:{"@width":"60","@height":"56","@source":"characters/PrisonerGraphics.png"}}]},{"@firstgid":"31","@name":"passive","@tilewidth":"210","@tileheight":"50","@tilecount":"12",tile:[{"@id":"0",image:{"@width":"50","@height":"50","@source":"passive/BigBoxGraphics.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"passive/BoxGraphics.png"}},{"@id":"2",image:{"@width":"37","@height":"35","@source":"passive/ToiletGraphics.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"passive/MonitorGraphics.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"passive/BasketBallGraphics.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"passive/StoolGraphics.png"}},{"@id":"6",image:{"@width":"150","@height":"20","@source":"passive/PlankGraphics.png"}},{"@id":"7",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"8",image:{"@width":"210","@height":"20","@source":"passive/BigPlankGraphics.png"}},{"@id":"9",image:{"@width":"100","@height":"20","@source":"passive/Plank5Graphics.png"}},{"@id":"10",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"passive/MirrorGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"136","@tilecount":"43",tile:[{"@id":"0",image:{"@width":"232","@height":"79","@source":"decor/LevelTextGraphics.png"}},{"@id":"1",image:{"@width":"54","@height":"20","@source":"decor/Decor1Graphics.png"}},{"@id":"2",image:{"@width":"54","@height":"20","@source":"decor/Decor2Graphics.png"}},{"@id":"3",image:{"@width":"33","@height":"27","@source":"decor/Decor3Graphics.png"}},{"@id":"4",image:{"@width":"34","@height":"25","@source":"decor/Decor4Graphics.png"}},{"@id":"5",image:{"@width":"22","@height":"31","@source":"decor/Decor5Graphics.png"}},{"@id":"6",image:{"@width":"126","@height":"59","@source":"decor/Decor6Graphics.png"}},{"@id":"7",image:{"@width":"25","@height":"21","@source":"decor/Decor8Graphics.png"}},{"@id":"8",image:{"@width":"18","@height":"22","@source":"decor/Decor9Graphics.png"}},{"@id":"9",image:{"@width":"35","@height":"58","@source":"decor/Decor10Graphics.png"}},{"@id":"10",image:{"@width":"19","@height":"66","@source":"decor/Decor11Graphics.png"}},{"@id":"11",image:{"@width":"23","@height":"33","@source":"decor/Decor12Graphics.png"}},{"@id":"12",image:{"@width":"38","@height":"26","@source":"decor/Decor13Graphics.png"}},{"@id":"13",image:{"@width":"43","@height":"78","@source":"decor/Decor14Graphics.png"}},{"@id":"14",image:{"@width":"60","@height":"86","@source":"decor/Decor15Graphics.png"}},{"@id":"15",image:{"@width":"41","@height":"69","@source":"decor/Decor16Graphics.png"}},{"@id":"16",image:{"@width":"55","@height":"58","@source":"decor/Decor17Graphics.png"}},{"@id":"17",image:{"@width":"57","@height":"54","@source":"decor/Decor18Graphics.png"}},{"@id":"18",image:{"@width":"18","@height":"45","@source":"decor/Decor19Graphics.png"}},{"@id":"19",image:{"@width":"41","@height":"49","@source":"decor/Decor20Graphics.png"}},{"@id":"20",image:{"@width":"51","@height":"38","@source":"decor/Decor21Graphics.png"}},{"@id":"21",image:{"@width":"54","@height":"54","@source":"decor/Decor22Graphics.png"}},{"@id":"22",image:{"@width":"63","@height":"136","@source":"decor/Decor23Graphics.png"}},{"@id":"23",image:{"@width":"21","@height":"39","@source":"decor/Decor24Graphics.png"}},{"@id":"24",image:{"@width":"104","@height":"50","@source":"decor/Decor25Graphics.png"}},{"@id":"25",image:{"@width":"104","@height":"46","@source":"decor/Decor26Graphics.png"}},{"@id":"26",image:{"@width":"86","@height":"38","@source":"decor/Decor27Graphics.png"}},{"@id":"27",image:{"@width":"63","@height":"55","@source":"decor/Decor28Graphics.png"}},{"@id":"28",image:{"@width":"13","@height":"23","@source":"decor/Decor29Graphics.png"}},{"@id":"29",image:{"@width":"28","@height":"40","@source":"decor/Decor30Graphics.png"}},{"@id":"30",image:{"@width":"69","@height":"30","@source":"decor/Decor31Graphics.png"}},{"@id":"31",image:{"@width":"33","@height":"29","@source":"decor/Decor32Graphics.png"}},{"@id":"32",image:{"@width":"42","@height":"42","@source":"decor/Decor33Graphics.png"}},{"@id":"33",image:{"@width":"60","@height":"66","@source":"decor/Decor34Graphics.png"}},{"@id":"34",image:{"@width":"46","@height":"65","@source":"decor/Decor35Graphics.png"}},{"@id":"35",image:{"@width":"71","@height":"55","@source":"decor/Decor36Graphics.png"}},{"@id":"36",image:{"@width":"35","@height":"55","@source":"decor/Decor37Graphics.png"}},{"@id":"37",image:{"@width":"28","@height":"29","@source":"decor/Decor38Graphics.png"}},{"@id":"38",image:{"@width":"38","@height":"37","@source":"decor/Decor39Graphics.png"}},{"@id":"39",image:{"@width":"103","@height":"50","@source":"decor/Decor40Graphics.png"}},{"@id":"40",image:{"@width":"56","@height":"55","@source":"decor/Decor41Graphics.png"}},{"@id":"41",image:{"@width":"71","@height":"50","@source":"decor/Decor42Graphics.png"}},{"@id":"42",image:{"@width":"200","@height":"44","@source":"decor/TxtGraphics.png"}}]}],imagelayer:{"@name":"background","@y":"-2",image:{"@source":"bg/Background1Graphics.png"}},objectgroup:[{"@name":"decorations",object:[{"@id":"1","@gid":"43","@x":"175","@y":"422","@width":"232","@height":"79",properties:{property:{"@name":"text","@value":"Hi-tech"}}},{"@id":"2","@gid":"44","@x":"490","@y":"404","@width":"54","@height":"20"},{"@id":"3","@gid":"49","@x":"387","@y":"206","@width":"126","@height":"59"},{"@id":"4","@gid":"73","@x":"105","@y":"161","@width":"69","@height":"30"},{"@id":"5","@gid":"78","@x":"308","@y":"487","@width":"71","@height":"55"},{"@id":"6","@gid":"65","@x":"0","@y":"385","@width":"63","@height":"136"},{"@id":"7","@gid":"64","@x":"245","@y":"105","@width":"54","@height":"54"},{"@id":"8","@gid":"81","@x":"562","@y":"316","@width":"38","@height":"37"}]},{"@name":"tiles",object:[{"@id":"9","@gid":"12","@x":"665","@y":"490","@width":"35","@height":"35"},{"@id":"10","@gid":"12","@x":"630","@y":"525","@width":"35","@height":"35"},{"@id":"11","@gid":"12","@x":"385","@y":"525","@width":"35","@height":"35"},{"@id":"12","@gid":"12","@x":"455","@y":"525","@width":"35","@height":"35"},{"@id":"13","@gid":"12","@x":"665","@y":"525","@width":"35","@height":"35"},{"@id":"14","@gid":"12","@x":"385","@y":"525","@width":"35","@height":"35"},{"@id":"15","@gid":"12","@x":"420","@y":"525","@width":"35","@height":"35"},{"@id":"16","@gid":"12","@x":"35","@y":"525","@width":"35","@height":"35"},{"@id":"17","@gid":"12","@x":"0","@y":"525","@width":"35","@height":"35"},{"@id":"18","@gid":"9","@x":"595","@y":"525","@width":"35","@height":"35"},{"@id":"19","@gid":"9","@x":"560","@y":"525","@width":"35","@height":"35"},{"@id":"20","@gid":"9","@x":"525","@y":"525","@width":"35","@height":"35"},{"@id":"21","@gid":"9","@x":"490","@y":"525","@width":"35","@height":"35"},{"@id":"22","@gid":"9","@x":"350","@y":"525","@width":"35","@height":"35"},{"@id":"23","@gid":"9","@x":"315","@y":"525","@width":"35","@height":"35"},{"@id":"24","@gid":"9","@x":"280","@y":"525","@width":"35","@height":"35"},{"@id":"25","@gid":"9","@x":"245","@y":"525","@width":"35","@height":"35"},{"@id":"26","@gid":"9","@x":"210","@y":"525","@width":"35","@height":"35"},{"@id":"27","@gid":"9","@x":"175","@y":"525","@width":"35","@height":"35"},{"@id":"28","@gid":"9","@x":"140","@y":"525","@width":"35","@height":"35"},{"@id":"29","@gid":"9","@x":"105","@y":"525","@width":"35","@height":"35"},{"@id":"30","@gid":"9","@x":"70","@y":"525","@width":"35","@height":"35"},{"@id":"31","@gid":"9","@x":"0","@y":"490","@width":"35","@height":"35"},{"@id":"32","@gid":"9","@x":"420","@y":"490","@width":"35","@height":"35"},{"@id":"33","@gid":"9","@x":"105","@y":"245","@width":"35","@height":"35"},{"@id":"34","@gid":"10","@x":"35","@y":"490","@width":"35","@height":"35"},{"@id":"35","@gid":"10","@x":"455","@y":"490","@width":"35","@height":"35"},{"@id":"36","@gid":"8","@x":"630","@y":"490","@width":"35","@height":"35"},{"@id":"37","@gid":"8","@x":"385","@y":"385","@width":"35","@height":"35"},{"@id":"38","@gid":"2","@x":"630","@y":"385","@width":"35","@height":"35"},{"@id":"39","@gid":"2","@x":"595","@y":"245","@width":"35","@height":"35"},{"@id":"40","@gid":"2","@x":"35","@y":"420","@width":"35","@height":"35"},{"@id":"41","@gid":"5","@x":"70","@y":"210","@width":"35","@height":"35"},{"@id":"42","@gid":"5","@x":"175","@y":"420","@width":"35","@height":"35"},{"@id":"43","@gid":"5","@x":"420","@y":"245","@width":"35","@height":"35"},{"@id":"44","@gid":"7","@x":"525","@y":"280","@width":"35","@height":"35"},{"@id":"45","@gid":"11","@x":"385","@y":"490","@width":"35","@height":"35"},{"@id":"46","@gid":"6","@x":"385","@y":"420","@width":"35","@height":"35"},{"@id":"47","@gid":"6","@x":"385","@y":"455","@width":"35","@height":"35"},{"@id":"48","@gid":"11","@x":"665","@y":"420","@width":"35","@height":"35"},{"@id":"49","@gid":"11","@x":"665","@y":"455","@width":"35","@height":"35"},{"@id":"50","@gid":"9","@x":"665","@y":"385","@width":"35","@height":"35"},{"@id":"51","@gid":"3","@x":"455","@y":"385","@width":"35","@height":"35"},{"@id":"52","@gid":"3","@x":"490","@y":"385","@width":"35","@height":"35"},{"@id":"53","@gid":"4","@x":"525","@y":"385","@width":"35","@height":"35"},{"@id":"54","@gid":"15","@x":"420","@y":"385","@width":"35","@height":"35"},{"@id":"55","@gid":"14","@x":"105","@y":"455","@width":"35","@height":"35"},{"@id":"56","@gid":"16","@x":"175","@y":"455","@width":"35","@height":"35"},{"@id":"57","@gid":"3","@x":"140","@y":"455","@width":"35","@height":"35"},{"@id":"58","@gid":"15","@x":"70","@y":"420","@width":"35","@height":"35"},{"@id":"59","@gid":"13","@x":"105","@y":"420","@width":"35","@height":"35"},{"@id":"60","@gid":"13","@x":"105","@y":"385","@width":"35","@height":"35"},{"@id":"61","@gid":"13","@x":"105","@y":"350","@width":"35","@height":"35"},{"@id":"62","@gid":"8","@x":"70","@y":"350","@width":"35","@height":"35"},{"@id":"63","@gid":"8","@x":"525","@y":"140","@width":"35","@height":"35"},{"@id":"64","@gid":"8","@x":"315","@y":"70","@width":"35","@height":"35"},{"@id":"65","@gid":"11","@x":"70","@y":"385","@width":"35","@height":"35"},{"@id":"66","@gid":"6","@x":"105","@y":"280","@width":"35","@height":"35"},{"@id":"67","@gid":"6","@x":"105","@y":"315","@width":"35","@height":"35"},{"@id":"68","@gid":"14","@x":"70","@y":"245","@width":"35","@height":"35"},{"@id":"69","@gid":"4","@x":"175","@y":"245","@width":"35","@height":"35"},{"@id":"70","@gid":"3","@x":"140","@y":"245","@width":"35","@height":"35"},{"@id":"71","@gid":"6","@x":"420","@y":"280","@width":"35","@height":"35"},{"@id":"72","@gid":"6","@x":"420","@y":"315","@width":"35","@height":"35"},{"@id":"73","@gid":"6","@x":"420","@y":"350","@width":"35","@height":"35"},{"@id":"74","@gid":"6","@x":"525","@y":"175","@width":"35","@height":"35"},{"@id":"75","@gid":"6","@x":"525","@y":"210","@width":"35","@height":"35"},{"@id":"76","@gid":"6","@x":"525","@y":"245","@width":"35","@height":"35"},{"@id":"77","@gid":"4","@x":"560","@y":"140","@width":"35","@height":"35"},{"@id":"78","@gid":"3","@x":"630","@y":"245","@width":"35","@height":"35"},{"@id":"79","@gid":"15","@x":"665","@y":"245","@width":"35","@height":"35"},{"@id":"80","@gid":"11","@x":"665","@y":"210","@width":"35","@height":"35"},{"@id":"81","@gid":"11","@x":"665","@y":"175","@width":"35","@height":"35"},{"@id":"82","@gid":"11","@x":"665","@y":"140","@width":"35","@height":"35"},{"@id":"83","@gid":"11","@x":"665","@y":"105","@width":"35","@height":"35"},{"@id":"84","@gid":"9","@x":"665","@y":"70","@width":"35","@height":"35"},{"@id":"85","@gid":"9","@x":"385","@y":"70","@width":"35","@height":"35"},{"@id":"86","@gid":"3","@x":"420","@y":"70","@width":"35","@height":"35"},{"@id":"87","@gid":"3","@x":"455","@y":"70","@width":"35","@height":"35"},{"@id":"88","@gid":"3","@x":"490","@y":"70","@width":"35","@height":"35"},{"@id":"89","@gid":"3","@x":"525","@y":"70","@width":"35","@height":"35"},{"@id":"90","@gid":"3","@x":"560","@y":"70","@width":"35","@height":"35"},{"@id":"91","@gid":"3","@x":"595","@y":"70","@width":"35","@height":"35"},{"@id":"92","@gid":"3","@x":"630","@y":"70","@width":"35","@height":"35"},{"@id":"93","@gid":"3","@x":"140","@y":"105","@width":"35","@height":"35"},{"@id":"94","@gid":"3","@x":"105","@y":"105","@width":"35","@height":"35"},{"@id":"95","@gid":"3","@x":"70","@y":"105","@width":"35","@height":"35"},{"@id":"96","@gid":"3","@x":"35","@y":"105","@width":"35","@height":"35"},{"@id":"97","@gid":"3","@x":"0","@y":"105","@width":"35","@height":"35"},{"@id":"98","@gid":"3","@x":"210","@y":"140","@width":"35","@height":"35"},{"@id":"99","@gid":"3","@x":"245","@y":"140","@width":"35","@height":"35"},{"@id":"100","@gid":"3","@x":"280","@y":"140","@width":"35","@height":"35"},{"@id":"101","@gid":"14","@x":"175","@y":"140","@width":"35","@height":"35"},{"@id":"102","@gid":"10","@x":"175","@y":"105","@width":"35","@height":"35"},{"@id":"103","@gid":"16","@x":"315","@y":"140","@width":"35","@height":"35"},{"@id":"104","@gid":"6","@x":"385","@y":"105","@width":"35","@height":"35"},{"@id":"105","@gid":"6","@x":"315","@y":"105","@width":"35","@height":"35"},{"@id":"106","@gid":"7","@x":"385","@y":"140","@width":"35","@height":"35"},{"@id":"107","@gid":"3","@x":"350","@y":"70","@width":"35","@height":"35"}]},{"@name":"active",object:[{"@id":"108","@gid":"25","@x":"373.833","@y":"379.667","@width":"32","@height":"22",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"0"},{"@name":"minAngle","@value":"0"},{"@name":"speedX","@value":"0"}]}},{"@id":"109","@type":"6","@gid":"21","@x":"198.333","@y":"314.667","@width":"70","@height":"19",properties:{property:[{"@name":"distanceX","@value":"140"},{"@name":"distanceY","@value":"0"},{"@name":"speedX","@value":"30"},{"@name":"speedY","@value":"0"}]}},{"@id":"110","@gid":"20","@x":"176","@y":"316","@width":"20","@height":"70","@rotation":"-90"},{"@id":"111","@gid":"30","@x":"317.667","@y":"211.667","@width":"60","@height":"56",properties:{property:[{"@name":"limitLeft","@value":"15"},{"@name":"limitRight","@value":"60"}]}},{"@id":"112","@type":"4","@gid":"19","@x":"147","@y":"523","@width":"20","@height":"70"},{"@id":"113","@type":"6","@gid":"21","@x":"-0.66667","@y":"333.833","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"140"},{"@name":"speedY","@value":"-45"}]}},{"@id":"114","@type":"5","@gid":"19","@x":"318","@y":"120","@width":"20","@height":"70","@rotation":"90"},{"@id":"115","@gid":"3221225514","@x":"140","@y":"296","@width":"35","@height":"35"},{"@id":"116","@gid":"20","@x":"419.667","@y":"230","@width":"20","@height":"70","@rotation":"-90"},{"@id":"117","@gid":"20","@x":"349.667","@y":"230","@width":"20","@height":"70","@rotation":"-90"},{"@id":"118","@type":"5","@gid":"17","@x":"474.5","@y":"351.5","@width":"24","@height":"11"},{"@id":"119","@type":"6","@gid":"17","@x":"657","@y":"351.667","@width":"24","@height":"11"},{"@id":"120","@type":"2","@gid":"17","@x":"6","@y":"456.5","@width":"24","@height":"11"},{"@id":"121","@type":"2","@gid":"21","@x":"560","@y":"369.5","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"105"},{"@name":"speedY","@value":"45"}]}},{"@id":"122","@type":"5","@gid":"19","@x":"531","@y":"349","@width":"20","@height":"70"},{"@id":"123","@gid":"27","@x":"620","@y":"298","@width":"31","@height":"34"},{"@id":"124","@gid":"27","@x":"70","@y":"286","@width":"31","@height":"34"},{"@id":"125","@gid":"27","@x":"615","@y":"178","@width":"31","@height":"34"},{"@id":"126","@type":"4","@gid":"18","@x":"443","@y":"455","@width":"25","@height":"19"},{"@id":"127","@gid":"2147483690","@x":"214","@y":"297","@width":"35","@height":"35"},{"@id":"128","@gid":"1073741866","@x":"351","@y":"121","@width":"35","@height":"35"},{"@id":"129","@gid":"42","@x":"139","@y":"422","@width":"35","@height":"35"},{"@id":"130","@type":"5","@gid":"19","@x":"524","@y":"212","@width":"20","@height":"70","@rotation":"90"},{"@id":"131","@gid":"30","@x":"126","@y":"212","@width":"60","@height":"56",properties:{property:[{"@name":"limitLeft","@value":"30"},{"@name":"limitRight","@value":"30"}]}},{"@id":"132","@gid":"20","@x":"280","@y":"230","@width":"20","@height":"70","@rotation":"-90"}]},{"@name":"characters",object:[{"@id":"133","@gid":"24","@x":"280","@y":"490","@width":"44","@height":"52"},{"@id":"134","@gid":"28","@x":"507.833","@y":"488","@width":"63","@height":"50"}]},{"@name":"physics",object:[{"@id":"135","@x":"0","@y":"490","@width":"700","@height":"35"},{"@id":"136","@x":"0","@y":"455","@width":"70","@height":"35"},{"@id":"137","@x":"420","@y":"455","@width":"70","@height":"35"},{"@id":"138","@x":"630","@y":"455","@width":"70","@height":"35"},{"@id":"139","@x":"630","@y":"350","@width":"70","@height":"35"},{"@id":"140","@x":"665","@y":"385","@width":"35","@height":"70"},{"@id":"141","@x":"385","@y":"350","@width":"35","@height":"140"},{"@id":"142","@x":"420","@y":"350","@width":"140","@height":"35"},{"@id":"143","@x":"420","@y":"210","@width":"35","@height":"140"},{"@id":"144","@x":"105","@y":"420","@width":"105","@height":"35"},{"@id":"145","@x":"175","@y":"385","@width":"35","@height":"35"},{"@id":"146","@x":"35","@y":"385","@width":"105","@height":"35"},{"@id":"147","@x":"70","@y":"315","@width":"70","@height":"70"},{"@id":"148","@x":"105","@y":"245","@width":"35","@height":"70"},{"@id":"149","@x":"70","@y":"210","@width":"140","@height":"35"},{"@id":"150","@x":"70","@y":"175","@width":"35","@height":"35"},{"@id":"151","@x":"525","@y":"140","@width":"35","@height":"140"},{"@id":"152","@x":"525","@y":"105","@width":"70","@height":"35"},{"@id":"153","@x":"595","@y":"210","@width":"105","@height":"35"},{"@id":"154","@x":"665","@y":"70","@width":"35","@height":"140"},{"@id":"155","@x":"315","@y":"35","@width":"385","@height":"35"},{"@id":"156","@x":"385","@y":"70","@width":"35","@height":"70"},{"@id":"157","@x":"315","@y":"70","@width":"35","@height":"35"},{"@id":"158","@x":"175","@y":"105","@width":"175","@height":"35"},{"@id":"159","@x":"0","@y":"70","@width":"210","@height":"35"}]}]},{"@level":"16","@version":"1.0","@orientation":"orthogonal","@renderorder":"right-down","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@width":"35","@height":"35","@source":"tiles/singleTile.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"tiles/platformLeft.png"}},{"@id":"2",image:{"@width":"35","@height":"35","@source":"tiles/platformCenter.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"tiles/platformRight.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformTop.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformCenter.png"}},{"@id":"6",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformBottom.png"}},{"@id":"7",image:{"@width":"35","@height":"35","@source":"tiles/tileTopLeft.png"}},{"@id":"8",image:{"@width":"35","@height":"35","@source":"tiles/tileTopCenter.png"}},{"@id":"9",image:{"@width":"35","@height":"35","@source":"tiles/tileTopRight.png"}},{"@id":"10",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterLeft.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"tiles/tileCenter.png"}},{"@id":"12",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterRight.png"}},{"@id":"13",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomLeft.png"}},{"@id":"14",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomCenter.png"}},{"@id":"15",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"70",tile:[{"@id":"0",image:{"@width":"24","@height":"11","@source":"active/PushButtonGraphics.png"}},{"@id":"1",image:{"@width":"25","@height":"19","@source":"active/TriggerGraphics.png"}},{"@id":"2",image:{"@width":"20","@height":"70","@source":"active/DoorGraphics.png"}},{"@id":"3",image:{"@width":"20","@height":"70","@source":"active/GlassDoorGraphics.png"}},{"@id":"4",image:{"@width":"70","@height":"19","@source":"active/ElevatorGraphics.png"}},{"@id":"5",image:{"@width":"105","@height":"20","@source":"active/BigElevatorGraphics.png"}},{"@id":"6",image:{"@width":"70","@height":"70","@source":"active/ExitGraphics.png"}},{"@id":"7",image:{"@width":"44","@height":"52","@source":"characters/HustlerGraphics.png"}},{"@id":"8",image:{"@width":"32","@height":"22","@source":"active/CameraGraphics.png"}},{"@id":"9",image:{"@width":"15","@height":"15","@source":"characters/EnemyLimiterGraphics.png"}},{"@id":"10",image:{"@width":"31","@height":"34","@source":"passive/MoneyBagGraphics.png"}},{"@id":"11",image:{"@width":"63","@height":"50","@source":"characters/DogGraphics.png"}},{"@id":"12",image:{"@width":"60","@height":"55","@source":"characters/Prisoner2Graphics.png"}},{"@id":"13",image:{"@width":"60","@height":"56","@source":"characters/PrisonerGraphics.png"}},{"@id":"14",image:{"@width":"50","@height":"29","@source":"active/TurrelGraphics.png"}}]},{"@firstgid":"32","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@width":"50","@height":"50","@source":"passive/BigBoxGraphics.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"passive/BoxGraphics.png"}},{"@id":"2",image:{"@width":"37","@height":"35","@source":"passive/ToiletGraphics.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"passive/MonitorGraphics.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"passive/BasketBallGraphics.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"passive/StoolGraphics.png"}},{"@id":"6",image:{"@width":"150","@height":"20","@source":"passive/PlankGraphics.png"}},{"@id":"7",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"8",image:{"@width":"210","@height":"20","@source":"passive/BigPlankGraphics.png"}},{"@id":"9",image:{"@width":"100","@height":"20","@source":"passive/Plank5Graphics.png"}},{"@id":"10",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"passive/MirrorGraphics.png"}}]},{"@firstgid":"44","@name":"decor","@tilewidth":"232","@tileheight":"136",tile:[{"@id":"0",image:{"@width":"232","@height":"79","@source":"decor/LevelTextGraphics.png"}},{"@id":"1",image:{"@width":"54","@height":"20","@source":"decor/Decor1Graphics.png"}},{"@id":"2",image:{"@width":"54","@height":"20","@source":"decor/Decor2Graphics.png"}},{"@id":"3",image:{"@width":"33","@height":"27","@source":"decor/Decor3Graphics.png"}},{"@id":"4",image:{"@width":"34","@height":"25","@source":"decor/Decor4Graphics.png"}},{"@id":"5",image:{"@width":"22","@height":"31","@source":"decor/Decor5Graphics.png"}},{"@id":"6",image:{"@width":"126","@height":"59","@source":"decor/Decor6Graphics.png"}},{"@id":"7",image:{"@width":"25","@height":"21","@source":"decor/Decor8Graphics.png"}},{"@id":"8",image:{"@width":"18","@height":"22","@source":"decor/Decor9Graphics.png"}},{"@id":"9",image:{"@width":"35","@height":"58","@source":"decor/Decor10Graphics.png"}},{"@id":"10",image:{"@width":"19","@height":"66","@source":"decor/Decor11Graphics.png"}},{"@id":"11",image:{"@width":"23","@height":"33","@source":"decor/Decor12Graphics.png"}},{"@id":"12",image:{"@width":"38","@height":"26","@source":"decor/Decor13Graphics.png"}},{"@id":"13",image:{"@width":"43","@height":"78","@source":"decor/Decor14Graphics.png"}},{"@id":"14",image:{"@width":"60","@height":"86","@source":"decor/Decor15Graphics.png"}},{"@id":"15",image:{"@width":"41","@height":"69","@source":"decor/Decor16Graphics.png"}},{"@id":"16",image:{"@width":"55","@height":"58","@source":"decor/Decor17Graphics.png"}},{"@id":"17",image:{"@width":"57","@height":"54","@source":"decor/Decor18Graphics.png"}},{"@id":"18",image:{"@width":"18","@height":"45","@source":"decor/Decor19Graphics.png"}},{"@id":"19",image:{"@width":"41","@height":"49","@source":"decor/Decor20Graphics.png"}},{"@id":"20",image:{"@width":"51","@height":"38","@source":"decor/Decor21Graphics.png"}},{"@id":"21",image:{"@width":"54","@height":"54","@source":"decor/Decor22Graphics.png"}},{"@id":"22",image:{"@width":"63","@height":"136","@source":"decor/Decor23Graphics.png"}},{"@id":"23",image:{"@width":"21","@height":"39","@source":"decor/Decor24Graphics.png"}},{"@id":"24",image:{"@width":"104","@height":"50","@source":"decor/Decor25Graphics.png"}},{"@id":"25",image:{"@width":"104","@height":"46","@source":"decor/Decor26Graphics.png"}},{"@id":"26",image:{"@width":"86","@height":"38","@source":"decor/Decor27Graphics.png"}},{"@id":"27",image:{"@width":"63","@height":"55","@source":"decor/Decor28Graphics.png"}},{"@id":"28",image:{"@width":"13","@height":"23","@source":"decor/Decor29Graphics.png"}},{"@id":"29",image:{"@width":"28","@height":"40","@source":"decor/Decor30Graphics.png"}},{"@id":"30",image:{"@width":"69","@height":"30","@source":"decor/Decor31Graphics.png"}},{"@id":"31",image:{"@width":"33","@height":"29","@source":"decor/Decor32Graphics.png"}},{"@id":"32",image:{"@width":"42","@height":"42","@source":"decor/Decor33Graphics.png"}},{"@id":"33",image:{"@width":"60","@height":"66","@source":"decor/Decor34Graphics.png"}},{"@id":"34",image:{"@width":"46","@height":"65","@source":"decor/Decor35Graphics.png"}},{"@id":"35",image:{"@width":"71","@height":"55","@source":"decor/Decor36Graphics.png"}},{"@id":"36",image:{"@width":"35","@height":"55","@source":"decor/Decor37Graphics.png"}},{"@id":"37",image:{"@width":"28","@height":"29","@source":"decor/Decor38Graphics.png"}},{"@id":"38",image:{"@width":"38","@height":"37","@source":"decor/Decor39Graphics.png"}},{"@id":"39",image:{"@width":"103","@height":"50","@source":"decor/Decor40Graphics.png"}},{"@id":"40",image:{"@width":"56","@height":"55","@source":"decor/Decor41Graphics.png"}},{"@id":"41",image:{"@width":"71","@height":"50","@source":"decor/Decor42Graphics.png"}},{"@id":"42",image:{"@width":"200","@height":"44","@source":"decor/TxtGraphics.png"}}]}],imagelayer:{"@name":"background",image:{"@source":"bg/Background1Graphics.png"}},objectgroup:[{"@name":"decorations",object:[{"@gid":"45","@x":"280","@y":"194","@width":"54","@height":"20"},{"@gid":"69","@x":"420","@y":"140","@width":"104","@height":"46"},{"@gid":"66","@x":"560","@y":"315","@width":"63","@height":"136"},{"@gid":"57","@x":"551","@y":"512","@width":"43","@height":"78"},{"@gid":"70","@x":"420","@y":"455","@width":"86","@height":"38"},{"@gid":"73","@x":"369","@y":"430","@width":"28","@height":"40"},{"@gid":"72","@x":"490","@y":"420","@width":"13","@height":"23"},{"@gid":"80","@x":"268","@y":"448","@width":"35","@height":"55"},{"@gid":"55","@x":"385","@y":"140","@width":"23","@height":"33"},{"@gid":"85","@x":"62","@y":"449","@width":"71","@height":"50"},{"@gid":"75","@x":"315","@y":"301","@width":"33","@height":"29"}]},{"@name":"tiles",object:[{"@gid":"12","@x":"0","@y":"490","@width":"35","@height":"35"},{"@gid":"12","@x":"385","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"665","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"455","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"630","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"245","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"490","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"280","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"420","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"70","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"0","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"35","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"105","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"140","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"315","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"350","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"665","@y":"490","@width":"35","@height":"35"},{"@gid":"12","@x":"665","@y":"455","@width":"35","@height":"35"},{"@gid":"3","@x":"490","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"525","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"560","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"595","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"630","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"665","@y":"70","@width":"35","@height":"35"},{"@gid":"14","@x":"455","@y":"70","@width":"35","@height":"35"},{"@gid":"13","@x":"455","@y":"35","@width":"35","@height":"35"},{"@gid":"15","@x":"315","@y":"35","@width":"35","@height":"35"},{"@gid":"15","@x":"280","@y":"35","@width":"35","@height":"35"},{"@gid":"15","@x":"245","@y":"35","@width":"35","@height":"35"},{"@gid":"15","@x":"210","@y":"35","@width":"35","@height":"35"},{"@gid":"15","@x":"175","@y":"35","@width":"35","@height":"35"},{"@gid":"15","@x":"140","@y":"35","@width":"35","@height":"35"},{"@gid":"11","@x":"105","@y":"35","@width":"35","@height":"35"},{"@gid":"6","@x":"105","@y":"175","@width":"35","@height":"35"},{"@gid":"6","@x":"105","@y":"140","@width":"35","@height":"35"},{"@gid":"6","@x":"105","@y":"70","@width":"35","@height":"35"},{"@gid":"7","@x":"105","@y":"210","@width":"35","@height":"35"},{"@gid":"13","@x":"105","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"70","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"35","@y":"105","@width":"35","@height":"35"},{"@gid":"3","@x":"0","@y":"105","@width":"35","@height":"35"},{"@gid":"8","@x":"175","@y":"140","@width":"35","@height":"35"},{"@gid":"10","@x":"315","@y":"140","@width":"35","@height":"35"},{"@gid":"9","@x":"210","@y":"140","@width":"35","@height":"35"},{"@gid":"14","@x":"175","@y":"175","@width":"35","@height":"35"},{"@gid":"15","@x":"210","@y":"175","@width":"35","@height":"35"},{"@gid":"2","@x":"420","@y":"175","@width":"35","@height":"35"},{"@gid":"4","@x":"595","@y":"175","@width":"35","@height":"35"},{"@gid":"3","@x":"560","@y":"175","@width":"35","@height":"35"},{"@gid":"3","@x":"490","@y":"175","@width":"35","@height":"35"},{"@gid":"3","@x":"455","@y":"175","@width":"35","@height":"35"},{"@gid":"9","@x":"525","@y":"175","@width":"35","@height":"35"},{"@gid":"6","@x":"525","@y":"210","@width":"35","@height":"35"},{"@gid":"6","@x":"525","@y":"245","@width":"35","@height":"35"},{"@gid":"6","@x":"525","@y":"280","@width":"35","@height":"35"},{"@gid":"6","@x":"105","@y":"315","@width":"35","@height":"35"},{"@gid":"5","@x":"105","@y":"280","@width":"35","@height":"35"},{"@gid":"2","@x":"455","@y":"315","@width":"35","@height":"35"},{"@gid":"9","@x":"490","@y":"315","@width":"35","@height":"35"},{"@gid":"13","@x":"525","@y":"315","@width":"35","@height":"35"},{"@gid":"13","@x":"525","@y":"350","@width":"35","@height":"35"},{"@gid":"10","@x":"595","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"560","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"455","@y":"385","@width":"35","@height":"35"},{"@gid":"14","@x":"595","@y":"420","@width":"35","@height":"35"},{"@gid":"9","@x":"630","@y":"420","@width":"35","@height":"35"},{"@gid":"9","@x":"665","@y":"420","@width":"35","@height":"35"},{"@gid":"3","@x":"315","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"350","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"385","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"420","@y":"385","@width":"35","@height":"35"},{"@gid":"2","@x":"245","@y":"385","@width":"35","@height":"35"},{"@gid":"15","@x":"490","@y":"385","@width":"35","@height":"35"},{"@gid":"15","@x":"525","@y":"385","@width":"35","@height":"35"},{"@gid":"11","@x":"490","@y":"350","@width":"35","@height":"35"},{"@gid":"10","@x":"490","@y":"490","@width":"35","@height":"35"},{"@gid":"10","@x":"140","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"455","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"420","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"385","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"350","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"315","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"35","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"70","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"105","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"280","@y":"490","@width":"35","@height":"35"},{"@gid":"8","@x":"245","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"210","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"175","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"595","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"560","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"525","@y":"525","@width":"35","@height":"35"},{"@gid":"10","@x":"0","@y":"420","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"455","@width":"35","@height":"35"},{"@gid":"13","@x":"105","@y":"350","@width":"35","@height":"35"},{"@gid":"8","@x":"70","@y":"350","@width":"35","@height":"35"},{"@gid":"11","@x":"630","@y":"455","@width":"35","@height":"35"},{"@gid":"11","@x":"630","@y":"490","@width":"35","@height":"35"},{"@gid":"14","@x":"70","@y":"385","@width":"35","@height":"35"},{"@gid":"4","@x":"140","@y":"385","@width":"35","@height":"35"},{"@gid":"15","@x":"105","@y":"385","@width":"35","@height":"35"},{"@gid":"16","@x":"315","@y":"175","@width":"35","@height":"35"},{"@gid":"9","@x":"245","@y":"140","@width":"35","@height":"35"},{"@gid":"15","@x":"245","@y":"175","@width":"35","@height":"35"},{"@gid":"9","@x":"280","@y":"140","@width":"35","@height":"35"},{"@gid":"15","@x":"280","@y":"175","@width":"35","@height":"35"},{"@gid":"15","@x":"385","@y":"35","@width":"35","@height":"35"},{"@gid":"15","@x":"350","@y":"35","@width":"35","@height":"35"},{"@gid":"15","@x":"420","@y":"35","@width":"35","@height":"35"},{"@gid":"3","@x":"280","@y":"385","@width":"35","@height":"35"}]},{"@name":"active",object:[{"@type":"4","@gid":"17","@x":"113","@y":"456","@width":"24","@height":"11"},{"@type":"5","@gid":"17","@x":"496","@y":"281","@width":"24","@height":"11"},{"@gid":"33","@x":"175","@y":"105","@width":"35","@height":"35"},{"@type":"4","@gid":"21","@x":"175","@y":"369","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"110"},{"@name":"speedY","@value":"70"}]}},{"@type":"4","@gid":"19","@x":"340","@y":"385","@width":"20","@height":"70","@rotation":"180"},{"@gid":"27","@x":"306","@y":"93","@width":"31","@height":"34"},{"@gid":"27","@x":"212","@y":"215","@width":"31","@height":"34"},{"@gid":"27","@x":"21","@y":"376","@width":"31","@height":"34"},{"@type":"3","@gid":"17","@x":"560","@y":"140","@width":"24","@height":"11"},{"@gid":"26","@x":"558","@y":"110","@width":"15","@height":"15"},{"@gid":"30","@x":"490","@y":"140","@width":"60","@height":"56"},{"@type":"5","@gid":"21","@x":"630","@y":"159","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"206"},{"@name":"speedY","@value":"45"}]}},{"@type":"6","@gid":"19","@x":"70","@y":"334","@width":"20","@height":"70","@rotation":"-90"},{"@type":"6","@gid":"17","@x":"144","@y":"350.5","@width":"24","@height":"11"},{"@gid":"20","@x":"154","@y":"455","@width":"20","@height":"70"},{"@type":"3","@gid":"19","@x":"420","@y":"159.5","@width":"20","@height":"70","@rotation":"-90"},{"@gid":"26","@x":"523","@y":"426","@width":"15","@height":"15"},{"@gid":"31","@x":"441","@y":"351","@width":"50","@height":"29"},{"@gid":"26","@x":"245","@y":"335","@width":"15","@height":"15"},{"@gid":"44","@x":"245","@y":"280","@width":"232","@height":"79",properties:{property:{"@name":"text","@value":"Embrasure"}}},{"@gid":"29","@x":"350","@y":"455","@width":"60","@height":"55"}]},{"@name":"characters",object:[{"@gid":"24","@x":"60","@y":"317","@width":"44","@height":"52"},{"@gid":"28","@x":"560","@y":"350","@width":"63","@height":"50"}]},{"@name":"physics",object:[{"@x":"0","@y":"385","@width":"35","@height":"140"},{"@x":"35","@y":"455","@width":"140","@height":"70"},{"@x":"175","@y":"490","@width":"525","@height":"35"},{"@x":"245","@y":"455","@width":"280","@height":"35"},{"@x":"630","@y":"385","@width":"70","@height":"105"},{"@x":"595","@y":"385","@width":"35","@height":"35"},{"@x":"245","@y":"350","@width":"385","@height":"35"},{"@x":"525","@y":"175","@width":"35","@height":"105"},{"@x":"420","@y":"140","@width":"210","@height":"35"},{"@x":"175","@y":"105","@width":"175","@height":"70"},{"@x":"105","@y":"245","@width":"35","@height":"70"},{"@x":"70","@y":"315","@width":"70","@height":"70"},{"@x":"140","@y":"350","@width":"35","@height":"35"},{"@x":"105","@y":"0","@width":"35","@height":"210"},{"@x":"455","@y":"0","@width":"245","@height":"70"},{"@x":"140","@y":"0","@width":"315","@height":"35"},{"@x":"0","@y":"70","@width":"105","@height":"35"},{"@x":"455","@y":"280","@width":"105","@height":"35"},{"@x":"490","@y":"315","@width":"70","@height":"35"},{"@x":"450","@y":"338","@width":"29","@height":"10"}]}]},{"@level":"17","@version":"1.0","@orientation":"orthogonal","@renderorder":"right-down","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35","@nextobjectid":"154",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35","@tilecount":"16",tile:[{"@id":"0",image:{"@width":"35","@height":"35","@source":"tiles/singleTile.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"tiles/platformLeft.png"}},{"@id":"2",image:{"@width":"35","@height":"35","@source":"tiles/platformCenter.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"tiles/platformRight.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformTop.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformCenter.png"}},{"@id":"6",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformBottom.png"}},{"@id":"7",image:{"@width":"35","@height":"35","@source":"tiles/tileTopLeft.png"}},{"@id":"8",image:{"@width":"35","@height":"35","@source":"tiles/tileTopCenter.png"}},{"@id":"9",image:{"@width":"35","@height":"35","@source":"tiles/tileTopRight.png"}},{"@id":"10",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterLeft.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"tiles/tileCenter.png"}},{"@id":"12",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterRight.png"}},{"@id":"13",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomLeft.png"}},{"@id":"14",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomCenter.png"}},{"@id":"15",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"70","@tilecount":"15",tile:[{"@id":"0",image:{"@width":"24","@height":"11","@source":"active/PushButtonGraphics.png"}},{"@id":"1",image:{"@width":"25","@height":"19","@source":"active/TriggerGraphics.png"}},{"@id":"2",image:{"@width":"20","@height":"70","@source":"active/DoorGraphics.png"}},{"@id":"3",image:{"@width":"20","@height":"70","@source":"active/GlassDoorGraphics.png"}},{"@id":"4",image:{"@width":"70","@height":"19","@source":"active/ElevatorGraphics.png"}},{"@id":"5",image:{"@width":"105","@height":"20","@source":"active/BigElevatorGraphics.png"}},{"@id":"6",image:{"@width":"70","@height":"70","@source":"active/ExitGraphics.png"}},{"@id":"7",image:{"@width":"44","@height":"52","@source":"characters/HustlerGraphics.png"}},{"@id":"8",image:{"@width":"32","@height":"22","@source":"active/CameraGraphics.png"}},{"@id":"9",image:{"@width":"15","@height":"15","@source":"characters/EnemyLimiterGraphics.png"}},{"@id":"10",image:{"@width":"31","@height":"34","@source":"passive/MoneyBagGraphics.png"}},{"@id":"11",image:{"@width":"63","@height":"50","@source":"characters/DogGraphics.png"}},{"@id":"12",image:{"@width":"60","@height":"55","@source":"characters/Prisoner2Graphics.png"}},{"@id":"13",image:{"@width":"60","@height":"56","@source":"characters/PrisonerGraphics.png"}},{"@id":"14",image:{"@width":"50","@height":"29","@source":"active/TurrelGraphics.png"}}]},{"@firstgid":"32","@name":"passive","@tilewidth":"210","@tileheight":"50","@tilecount":"12",tile:[{"@id":"0",image:{"@width":"50","@height":"50","@source":"passive/BigBoxGraphics.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"passive/BoxGraphics.png"}},{"@id":"2",image:{"@width":"37","@height":"35","@source":"passive/ToiletGraphics.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"passive/MonitorGraphics.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"passive/BasketBallGraphics.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"passive/StoolGraphics.png"}},{"@id":"6",image:{"@width":"150","@height":"20","@source":"passive/PlankGraphics.png"}},{"@id":"7",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"8",image:{"@width":"210","@height":"20","@source":"passive/BigPlankGraphics.png"}},{"@id":"9",image:{"@width":"100","@height":"20","@source":"passive/Plank5Graphics.png"}},{"@id":"10",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"passive/MirrorGraphics.png"}}]},{"@firstgid":"44","@name":"decor","@tilewidth":"232","@tileheight":"136","@tilecount":"43",tile:[{"@id":"0",image:{"@width":"232","@height":"79","@source":"decor/LevelTextGraphics.png"}},{"@id":"1",image:{"@width":"54","@height":"20","@source":"decor/Decor1Graphics.png"}},{"@id":"2",image:{"@width":"54","@height":"20","@source":"decor/Decor2Graphics.png"}},{"@id":"3",image:{"@width":"33","@height":"27","@source":"decor/Decor3Graphics.png"}},{"@id":"4",image:{"@width":"34","@height":"25","@source":"decor/Decor4Graphics.png"}},{"@id":"5",image:{"@width":"22","@height":"31","@source":"decor/Decor5Graphics.png"}},{"@id":"6",image:{"@width":"126","@height":"59","@source":"decor/Decor6Graphics.png"}},{"@id":"7",image:{"@width":"25","@height":"21","@source":"decor/Decor8Graphics.png"}},{"@id":"8",image:{"@width":"18","@height":"22","@source":"decor/Decor9Graphics.png"}},{"@id":"9",image:{"@width":"35","@height":"58","@source":"decor/Decor10Graphics.png"}},{"@id":"10",image:{"@width":"19","@height":"66","@source":"decor/Decor11Graphics.png"}},{"@id":"11",image:{"@width":"23","@height":"33","@source":"decor/Decor12Graphics.png"}},{"@id":"12",image:{"@width":"38","@height":"26","@source":"decor/Decor13Graphics.png"}},{"@id":"13",image:{"@width":"43","@height":"78","@source":"decor/Decor14Graphics.png"}},{"@id":"14",image:{"@width":"60","@height":"86","@source":"decor/Decor15Graphics.png"}},{"@id":"15",image:{"@width":"41","@height":"69","@source":"decor/Decor16Graphics.png"}},{"@id":"16",image:{"@width":"55","@height":"58","@source":"decor/Decor17Graphics.png"}},{"@id":"17",image:{"@width":"57","@height":"54","@source":"decor/Decor18Graphics.png"}},{"@id":"18",image:{"@width":"18","@height":"45","@source":"decor/Decor19Graphics.png"}},{"@id":"19",image:{"@width":"41","@height":"49","@source":"decor/Decor20Graphics.png"}},{"@id":"20",image:{"@width":"51","@height":"38","@source":"decor/Decor21Graphics.png"}},{"@id":"21",image:{"@width":"54","@height":"54","@source":"decor/Decor22Graphics.png"}},{"@id":"22",image:{"@width":"63","@height":"136","@source":"decor/Decor23Graphics.png"}},{"@id":"23",image:{"@width":"21","@height":"39","@source":"decor/Decor24Graphics.png"}},{"@id":"24",image:{"@width":"104","@height":"50","@source":"decor/Decor25Graphics.png"}},{"@id":"25",image:{"@width":"104","@height":"46","@source":"decor/Decor26Graphics.png"}},{"@id":"26",image:{"@width":"86","@height":"38","@source":"decor/Decor27Graphics.png"}},{"@id":"27",image:{"@width":"63","@height":"55","@source":"decor/Decor28Graphics.png"}},{"@id":"28",image:{"@width":"13","@height":"23","@source":"decor/Decor29Graphics.png"}},{"@id":"29",image:{"@width":"28","@height":"40","@source":"decor/Decor30Graphics.png"}},{"@id":"30",image:{"@width":"69","@height":"30","@source":"decor/Decor31Graphics.png"}},{"@id":"31",image:{"@width":"33","@height":"29","@source":"decor/Decor32Graphics.png"}},{"@id":"32",image:{"@width":"42","@height":"42","@source":"decor/Decor33Graphics.png"}},{"@id":"33",image:{"@width":"60","@height":"66","@source":"decor/Decor34Graphics.png"}},{"@id":"34",image:{"@width":"46","@height":"65","@source":"decor/Decor35Graphics.png"}},{"@id":"35",image:{"@width":"71","@height":"55","@source":"decor/Decor36Graphics.png"}},{"@id":"36",image:{"@width":"35","@height":"55","@source":"decor/Decor37Graphics.png"}},{"@id":"37",image:{"@width":"28","@height":"29","@source":"decor/Decor38Graphics.png"}},{"@id":"38",image:{"@width":"38","@height":"37","@source":"decor/Decor39Graphics.png"}},{"@id":"39",image:{"@width":"103","@height":"50","@source":"decor/Decor40Graphics.png"}},{"@id":"40",image:{"@width":"56","@height":"55","@source":"decor/Decor41Graphics.png"}},{"@id":"41",image:{"@width":"71","@height":"50","@source":"decor/Decor42Graphics.png"}},{"@id":"42",image:{"@width":"200","@height":"44","@source":"decor/TxtGraphics.png"}}]}],imagelayer:{"@name":"background",image:{"@source":"bg/Background1Graphics.png"}},objectgroup:[{"@name":"decorations",object:[{"@id":"1","@gid":"44","@x":"140","@y":"175","@width":"232","@height":"79",properties:{property:{"@name":"text","@value":"Combo x3"}}},{"@id":"2","@gid":"50","@x":"164","@y":"280","@width":"126","@height":"59"},{"@id":"3","@gid":"57","@x":"221","@y":"472","@width":"43","@height":"78"},{"@id":"4","@gid":"71","@x":"5","@y":"323","@width":"63","@height":"55"},{"@id":"5","@gid":"85","@x":"385","@y":"490","@width":"71","@height":"50"},{"@id":"6","@gid":"84","@x":"509","@y":"208","@width":"56","@height":"55"},{"@id":"7","@gid":"30","@x":"420","@y":"210","@width":"60","@height":"56"},{"@id":"8","@gid":"29","@x":"385","@y":"350","@width":"60","@height":"55"},{"@id":"9","@gid":"66","@x":"595","@y":"175","@width":"63","@height":"136"},{"@id":"10","@gid":"69","@x":"490","@y":"105","@width":"104","@height":"46"},{"@id":"11","@gid":"76","@x":"442","@y":"338","@width":"42","@height":"42"},{"@id":"12","@gid":"53","@x":"622","@y":"315","@width":"35","@height":"58"}]},{"@name":"tiles",object:[{"@id":"13","@gid":"12","@x":"245","@y":"525","@width":"35","@height":"35"},{"@id":"14","@gid":"9","@x":"420","@y":"525","@width":"35","@height":"35"},{"@id":"15","@gid":"9","@x":"385","@y":"525","@width":"35","@height":"35"},{"@id":"16","@gid":"9","@x":"315","@y":"525","@width":"35","@height":"35"},{"@id":"17","@gid":"9","@x":"350","@y":"525","@width":"35","@height":"35"},{"@id":"18","@gid":"9","@x":"105","@y":"525","@width":"35","@height":"35"},{"@id":"19","@gid":"9","@x":"140","@y":"525","@width":"35","@height":"35"},{"@id":"20","@gid":"9","@x":"280","@y":"525","@width":"35","@height":"35"},{"@id":"21","@gid":"9","@x":"70","@y":"525","@width":"35","@height":"35"},{"@id":"22","@gid":"12","@x":"490","@y":"525","@width":"35","@height":"35"},{"@id":"23","@gid":"12","@x":"665","@y":"350","@width":"35","@height":"35"},{"@id":"24","@gid":"12","@x":"665","@y":"525","@width":"35","@height":"35"},{"@id":"25","@gid":"12","@x":"525","@y":"525","@width":"35","@height":"35"},{"@id":"26","@gid":"12","@x":"665","@y":"455","@width":"35","@height":"35"},{"@id":"27","@gid":"12","@x":"665","@y":"420","@width":"35","@height":"35"},{"@id":"28","@gid":"12","@x":"665","@y":"385","@width":"35","@height":"35"},{"@id":"29","@gid":"12","@x":"630","@y":"490","@width":"35","@height":"35"},{"@id":"30","@gid":"12","@x":"665","@y":"490","@width":"35","@height":"35"},{"@id":"31","@gid":"12","@x":"595","@y":"525","@width":"35","@height":"35"},{"@id":"32","@gid":"12","@x":"560","@y":"525","@width":"35","@height":"35"},{"@id":"33","@gid":"12","@x":"630","@y":"525","@width":"35","@height":"35"},{"@id":"34","@gid":"12","@x":"420","@y":"35","@width":"35","@height":"35"},{"@id":"35","@gid":"12","@x":"0","@y":"525","@width":"35","@height":"35"},{"@id":"36","@gid":"12","@x":"35","@y":"525","@width":"35","@height":"35"},{"@id":"37","@gid":"12","@x":"210","@y":"525","@width":"35","@height":"35"},{"@id":"38","@gid":"9","@x":"455","@y":"525","@width":"35","@height":"35"},{"@id":"39","@gid":"9","@x":"595","@y":"490","@width":"35","@height":"35"},{"@id":"40","@gid":"9","@x":"560","@y":"490","@width":"35","@height":"35"},{"@id":"41","@gid":"9","@x":"525","@y":"490","@width":"35","@height":"35"},{"@id":"42","@gid":"10","@x":"245","@y":"490","@width":"35","@height":"35"},{"@id":"43","@gid":"10","@x":"35","@y":"490","@width":"35","@height":"35"},{"@id":"44","@gid":"8","@x":"210","@y":"490","@width":"35","@height":"35"},{"@id":"45","@gid":"8","@x":"490","@y":"490","@width":"35","@height":"35"},{"@id":"46","@gid":"8","@x":"490","@y":"350","@width":"35","@height":"35"},{"@id":"47","@gid":"8","@x":"630","@y":"350","@width":"35","@height":"35"},{"@id":"48","@gid":"8","@x":"665","@y":"315","@width":"35","@height":"35"},{"@id":"49","@gid":"8","@x":"385","@y":"245","@width":"35","@height":"35"},{"@id":"50","@gid":"8","@x":"350","@y":"385","@width":"35","@height":"35"},{"@id":"51","@gid":"8","@x":"70","@y":"175","@width":"35","@height":"35"},{"@id":"52","@gid":"11","@x":"630","@y":"455","@width":"35","@height":"35"},{"@id":"53","@gid":"11","@x":"630","@y":"420","@width":"35","@height":"35"},{"@id":"54","@gid":"11","@x":"630","@y":"385","@width":"35","@height":"35"},{"@id":"55","@gid":"9","@x":"385","@y":"385","@width":"35","@height":"35"},{"@id":"56","@gid":"14","@x":"350","@y":"420","@width":"35","@height":"35"},{"@id":"57","@gid":"14","@x":"70","@y":"385","@width":"35","@height":"35"},{"@id":"58","@gid":"14","@x":"70","@y":"245","@width":"35","@height":"35"},{"@id":"59","@gid":"14","@x":"385","@y":"140","@width":"35","@height":"35"},{"@id":"60","@gid":"16","@x":"385","@y":"420","@width":"35","@height":"35"},{"@id":"61","@gid":"3","@x":"420","@y":"140","@width":"35","@height":"35"},{"@id":"62","@gid":"3","@x":"525","@y":"245","@width":"35","@height":"35"},{"@id":"63","@gid":"3","@x":"490","@y":"245","@width":"35","@height":"35"},{"@id":"64","@gid":"3","@x":"420","@y":"385","@width":"35","@height":"35"},{"@id":"65","@gid":"3","@x":"455","@y":"385","@width":"35","@height":"35"},{"@id":"66","@gid":"3","@x":"140","@y":"385","@width":"35","@height":"35"},{"@id":"67","@gid":"3","@x":"175","@y":"385","@width":"35","@height":"35"},{"@id":"68","@gid":"3","@x":"210","@y":"385","@width":"35","@height":"35"},{"@id":"69","@gid":"3","@x":"245","@y":"385","@width":"35","@height":"35"},{"@id":"70","@gid":"4","@x":"525","@y":"350","@width":"35","@height":"35"},{"@id":"71","@gid":"16","@x":"490","@y":"385","@width":"35","@height":"35"},{"@id":"72","@gid":"4","@x":"280","@y":"385","@width":"35","@height":"35"},{"@id":"73","@gid":"7","@x":"105","@y":"455","@width":"35","@height":"35"},{"@id":"74","@gid":"6","@x":"105","@y":"420","@width":"35","@height":"35"},{"@id":"75","@gid":"9","@x":"105","@y":"385","@width":"35","@height":"35"},{"@id":"76","@gid":"13","@x":"70","@y":"350","@width":"35","@height":"35"},{"@id":"77","@gid":"5","@x":"70","@y":"315","@width":"35","@height":"35"},{"@id":"78","@gid":"3","@x":"35","@y":"350","@width":"35","@height":"35"},{"@id":"79","@gid":"3","@x":"0","@y":"350","@width":"35","@height":"35"},{"@id":"80","@gid":"6","@x":"70","@y":"210","@width":"35","@height":"35"},{"@id":"81","@gid":"4","@x":"105","@y":"245","@width":"35","@height":"35"},{"@id":"82","@gid":"16","@x":"105","@y":"175","@width":"35","@height":"35"},{"@id":"83","@gid":"6","@x":"105","@y":"140","@width":"35","@height":"35"},{"@id":"84","@gid":"6","@x":"105","@y":"105","@width":"35","@height":"35"},{"@id":"85","@gid":"6","@x":"105","@y":"70","@width":"35","@height":"35"},{"@id":"86","@gid":"13","@x":"105","@y":"35","@width":"35","@height":"35"},{"@id":"87","@gid":"15","@x":"70","@y":"35","@width":"35","@height":"35"},{"@id":"88","@gid":"15","@x":"35","@y":"35","@width":"35","@height":"35"},{"@id":"89","@gid":"15","@x":"0","@y":"35","@width":"35","@height":"35"},{"@id":"90","@gid":"15","@x":"455","@y":"140","@width":"35","@height":"35"},{"@id":"91","@gid":"6","@x":"455","@y":"105","@width":"35","@height":"35"},{"@id":"92","@gid":"6","@x":"385","@y":"105","@width":"35","@height":"35"},{"@id":"93","@gid":"15","@x":"420","@y":"70","@width":"35","@height":"35"},{"@id":"94","@gid":"13","@x":"455","@y":"70","@width":"35","@height":"35"},{"@id":"95","@gid":"13","@x":"455","@y":"35","@width":"35","@height":"35"},{"@id":"96","@gid":"11","@x":"385","@y":"35","@width":"35","@height":"35"},{"@id":"97","@gid":"11","@x":"385","@y":"70","@width":"35","@height":"35"},{"@id":"98","@gid":"3","@x":"490","@y":"140","@width":"35","@height":"35"},{"@id":"99","@gid":"3","@x":"525","@y":"140","@width":"35","@height":"35"},{"@id":"100","@gid":"10","@x":"560","@y":"140","@width":"35","@height":"35"},{"@id":"101","@gid":"6","@x":"560","@y":"175","@width":"35","@height":"35"},{"@id":"102","@gid":"6","@x":"560","@y":"210","@width":"35","@height":"35"},{"@id":"103","@gid":"15","@x":"560","@y":"245","@width":"35","@height":"35"},{"@id":"104","@gid":"4","@x":"595","@y":"245","@width":"35","@height":"35"},{"@id":"105","@gid":"16","@x":"455","@y":"280","@width":"35","@height":"35"},{"@id":"106","@gid":"9","@x":"420","@y":"245","@width":"35","@height":"35"},{"@id":"107","@gid":"9","@x":"455","@y":"245","@width":"35","@height":"35"},{"@id":"108","@gid":"15","@x":"385","@y":"280","@width":"35","@height":"35"},{"@id":"109","@gid":"15","@x":"420","@y":"280","@width":"35","@height":"35"},{"@id":"110","@gid":"2","@x":"350","@y":"280","@width":"35","@height":"35"},{"@id":"111","@gid":"9","@x":"175","@y":"525","@width":"35","@height":"35"},{"@id":"112","@gid":"9","@x":"0","@y":"490","@width":"35","@height":"35"}]},{"@name":"active",object:[{"@id":"113","@type":"4","@gid":"19","@x":"350","@y":"370","@width":"20","@height":"70","@rotation":"-90"},{"@id":"114","@type":"5","@gid":"21","@x":"559","@y":"448","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"110"},{"@name":"speedY","@value":"-45"}]}},{"@id":"115","@type":"2","@gid":"19","@x":"420","@y":"77","@width":"20","@height":"70","@rotation":"90"},{"@id":"116","@type":"6","@gid":"19","@x":"371","@y":"280","@width":"20","@height":"70","@rotation":"180"},{"@id":"117","@type":"6","@gid":"17","@x":"500","@y":"316.5","@width":"24","@height":"11"},{"@id":"118","@type":"2","@gid":"17","@x":"600","@y":"211.5","@width":"24","@height":"11"},{"@id":"119","@type":"4","@gid":"17","@x":"229","@y":"456.5","@width":"24","@height":"11"},{"@id":"120","@gid":"27","@x":"21","@y":"400","@width":"31","@height":"34"},{"@id":"121","@gid":"27","@x":"575","@y":"296","@width":"31","@height":"34"},{"@id":"122","@gid":"27","@x":"217","@y":"249","@width":"31","@height":"34"},{"@id":"123","@gid":"26","@x":"400","@y":"182","@width":"15","@height":"15"},{"@id":"124","@gid":"40","@x":"365","@y":"34","@width":"210","@height":"20","@rotation":"90"},{"@id":"125","@type":"4","@gid":"21","@x":"5.68434e-14","@y":"160.5","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"140"},{"@name":"speedY","@value":"45"}]}},{"@id":"126","@type":"5","@gid":"17","@x":"20","@y":"456.5","@width":"24","@height":"11"},{"@id":"127","@gid":"30","@x":"138","@y":"351","@width":"60","@height":"56",properties:{property:[{"@name":"limitLeft","@value":"0"},{"@name":"limitRight","@value":"100"}]}},{"@id":"128","@gid":"2147483679","@x":"106","@y":"212","@width":"50","@height":"29"}]},{"@name":"characters",object:[{"@id":"129","@gid":"24","@x":"14","@y":"144","@width":"44","@height":"52"},{"@id":"130","@gid":"28","@x":"309","@y":"490","@width":"63","@height":"50"}]},{"@name":"physics",object:[{"@id":"131","@x":"0","@y":"455","@width":"70","@height":"70"},{"@id":"132","@x":"70","@y":"490","@width":"630","@height":"35"},{"@id":"133","@x":"210","@y":"455","@width":"70","@height":"35"},{"@id":"134","@x":"490","@y":"455","@width":"210","@height":"35"},{"@id":"135","@x":"630","@y":"315","@width":"70","@height":"140"},{"@id":"136","@x":"665","@y":"280","@width":"35","@height":"35"},{"@id":"137","@x":"490","@y":"315","@width":"70","@height":"35"},{"@id":"138","@x":"350","@y":"350","@width":"175","@height":"35"},{"@id":"139","@x":"350","@y":"385","@width":"70","@height":"35"},{"@id":"140","@x":"70","@y":"350","@width":"245","@height":"35"},{"@id":"141","@x":"105","@y":"385","@width":"35","@height":"70"},{"@id":"142","@x":"0","@y":"315","@width":"105","@height":"35"},{"@id":"143","@x":"70","@y":"280","@width":"35","@height":"35"},{"@id":"144","@x":"350","@y":"245","@width":"140","@height":"35"},{"@id":"145","@x":"385","@y":"210","@width":"245","@height":"35"},{"@id":"146","@x":"560","@y":"140","@width":"35","@height":"70"},{"@id":"147","@x":"385","@y":"105","@width":"210","@height":"35"},{"@id":"148","@x":"385","@y":"0","@width":"105","@height":"105"},{"@id":"149","@x":"70","@y":"210","@width":"70","@height":"35"},{"@id":"151","@x":"70","@y":"140","@width":"35","@height":"70"},{"@id":"152","@x":"105","@y":"0","@width":"35","@height":"175"},{"@id":"153","@x":"0","@y":"0","@width":"105","@height":"35"}]}]},{"@level":"18","@version":"1.0","@orientation":"orthogonal","@renderorder":"right-down","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35","@nextobjectid":"154",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35","@tilecount":"16",tile:[{"@id":"0",image:{"@width":"35","@height":"35","@source":"tiles/singleTile.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"tiles/platformLeft.png"}},{"@id":"2",image:{"@width":"35","@height":"35","@source":"tiles/platformCenter.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"tiles/platformRight.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformTop.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformCenter.png"}},{"@id":"6",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformBottom.png"}},{"@id":"7",image:{"@width":"35","@height":"35","@source":"tiles/tileTopLeft.png"}},{"@id":"8",image:{"@width":"35","@height":"35","@source":"tiles/tileTopCenter.png"}},{"@id":"9",image:{"@width":"35","@height":"35","@source":"tiles/tileTopRight.png"}},{"@id":"10",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterLeft.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"tiles/tileCenter.png"}},{"@id":"12",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterRight.png"}},{"@id":"13",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomLeft.png"}},{"@id":"14",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomCenter.png"}},{"@id":"15",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"70","@tilecount":"15",tile:[{"@id":"0",image:{"@width":"24","@height":"11","@source":"active/PushButtonGraphics.png"}},{"@id":"1",image:{"@width":"25","@height":"19","@source":"active/TriggerGraphics.png"}},{"@id":"2",image:{"@width":"20","@height":"70","@source":"active/DoorGraphics.png"}},{"@id":"3",image:{"@width":"20","@height":"70","@source":"active/GlassDoorGraphics.png"}},{"@id":"4",image:{"@width":"70","@height":"19","@source":"active/ElevatorGraphics.png"}},{"@id":"5",image:{"@width":"105","@height":"20","@source":"active/BigElevatorGraphics.png"}},{"@id":"6",image:{"@width":"70","@height":"70","@source":"active/ExitGraphics.png"}},{"@id":"7",image:{"@width":"44","@height":"52","@source":"characters/HustlerGraphics.png"}},{"@id":"8",image:{"@width":"32","@height":"22","@source":"active/CameraGraphics.png"}},{"@id":"9",image:{"@width":"15","@height":"15","@source":"characters/EnemyLimiterGraphics.png"}},{"@id":"10",image:{"@width":"31","@height":"34","@source":"passive/MoneyBagGraphics.png"}},{"@id":"11",image:{"@width":"63","@height":"50","@source":"characters/DogGraphics.png"}},{"@id":"12",image:{"@width":"60","@height":"55","@source":"characters/Prisoner2Graphics.png"}},{"@id":"13",image:{"@width":"60","@height":"56","@source":"characters/PrisonerGraphics.png"}},{"@id":"14",image:{"@width":"50","@height":"29","@source":"active/TurrelGraphics.png"}}]},{"@firstgid":"32","@name":"passive","@tilewidth":"210","@tileheight":"50","@tilecount":"12",tile:[{"@id":"0",image:{"@width":"50","@height":"50","@source":"passive/BigBoxGraphics.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"passive/BoxGraphics.png"}},{"@id":"2",image:{"@width":"37","@height":"35","@source":"passive/ToiletGraphics.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"passive/MonitorGraphics.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"passive/BasketBallGraphics.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"passive/StoolGraphics.png"}},{"@id":"6",image:{"@width":"150","@height":"20","@source":"passive/PlankGraphics.png"}},{"@id":"7",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"8",image:{"@width":"210","@height":"20","@source":"passive/BigPlankGraphics.png"}},{"@id":"9",image:{"@width":"100","@height":"20","@source":"passive/Plank5Graphics.png"}},{"@id":"10",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"passive/MirrorGraphics.png"}}]},{"@firstgid":"44","@name":"decor","@tilewidth":"232","@tileheight":"136","@tilecount":"43",tile:[{"@id":"0",image:{"@width":"232","@height":"79","@source":"decor/LevelTextGraphics.png"}},{"@id":"1",image:{"@width":"54","@height":"20","@source":"decor/Decor1Graphics.png"}},{"@id":"2",image:{"@width":"54","@height":"20","@source":"decor/Decor2Graphics.png"}},{"@id":"3",image:{"@width":"33","@height":"27","@source":"decor/Decor3Graphics.png"}},{"@id":"4",image:{"@width":"34","@height":"25","@source":"decor/Decor4Graphics.png"}},{"@id":"5",image:{"@width":"22","@height":"31","@source":"decor/Decor5Graphics.png"}},{"@id":"6",image:{"@width":"126","@height":"59","@source":"decor/Decor6Graphics.png"}},{"@id":"7",image:{"@width":"25","@height":"21","@source":"decor/Decor8Graphics.png"}},{"@id":"8",image:{"@width":"18","@height":"22","@source":"decor/Decor9Graphics.png"}},{"@id":"9",image:{"@width":"35","@height":"58","@source":"decor/Decor10Graphics.png"}},{"@id":"10",image:{"@width":"19","@height":"66","@source":"decor/Decor11Graphics.png"}},{"@id":"11",image:{"@width":"23","@height":"33","@source":"decor/Decor12Graphics.png"}},{"@id":"12",image:{"@width":"38","@height":"26","@source":"decor/Decor13Graphics.png"}},{"@id":"13",image:{"@width":"43","@height":"78","@source":"decor/Decor14Graphics.png"}},{"@id":"14",image:{"@width":"60","@height":"86","@source":"decor/Decor15Graphics.png"}},{"@id":"15",image:{"@width":"41","@height":"69","@source":"decor/Decor16Graphics.png"}},{"@id":"16",image:{"@width":"55","@height":"58","@source":"decor/Decor17Graphics.png"}},{"@id":"17",image:{"@width":"57","@height":"54","@source":"decor/Decor18Graphics.png"}},{"@id":"18",image:{"@width":"18","@height":"45","@source":"decor/Decor19Graphics.png"}},{"@id":"19",image:{"@width":"41","@height":"49","@source":"decor/Decor20Graphics.png"}},{"@id":"20",image:{"@width":"51","@height":"38","@source":"decor/Decor21Graphics.png"}},{"@id":"21",image:{"@width":"54","@height":"54","@source":"decor/Decor22Graphics.png"}},{"@id":"22",image:{"@width":"63","@height":"136","@source":"decor/Decor23Graphics.png"}},{"@id":"23",image:{"@width":"21","@height":"39","@source":"decor/Decor24Graphics.png"}},{"@id":"24",image:{"@width":"104","@height":"50","@source":"decor/Decor25Graphics.png"}},{"@id":"25",image:{"@width":"104","@height":"46","@source":"decor/Decor26Graphics.png"}},{"@id":"26",image:{"@width":"86","@height":"38","@source":"decor/Decor27Graphics.png"}},{"@id":"27",image:{"@width":"63","@height":"55","@source":"decor/Decor28Graphics.png"}},{"@id":"28",image:{"@width":"13","@height":"23","@source":"decor/Decor29Graphics.png"}},{"@id":"29",image:{"@width":"28","@height":"40","@source":"decor/Decor30Graphics.png"}},{"@id":"30",image:{"@width":"69","@height":"30","@source":"decor/Decor31Graphics.png"}},{"@id":"31",image:{"@width":"33","@height":"29","@source":"decor/Decor32Graphics.png"}},{"@id":"32",image:{"@width":"42","@height":"42","@source":"decor/Decor33Graphics.png"}},{"@id":"33",image:{"@width":"60","@height":"66","@source":"decor/Decor34Graphics.png"}},{"@id":"34",image:{"@width":"46","@height":"65","@source":"decor/Decor35Graphics.png"}},{"@id":"35",image:{"@width":"71","@height":"55","@source":"decor/Decor36Graphics.png"}},{"@id":"36",image:{"@width":"35","@height":"55","@source":"decor/Decor37Graphics.png"}},{"@id":"37",image:{"@width":"28","@height":"29","@source":"decor/Decor38Graphics.png"}},{"@id":"38",image:{"@width":"38","@height":"37","@source":"decor/Decor39Graphics.png"}},{"@id":"39",image:{"@width":"103","@height":"50","@source":"decor/Decor40Graphics.png"}},{"@id":"40",image:{"@width":"56","@height":"55","@source":"decor/Decor41Graphics.png"}},{"@id":"41",image:{"@width":"71","@height":"50","@source":"decor/Decor42Graphics.png"}},{"@id":"42",image:{"@width":"200","@height":"44","@source":"decor/TxtGraphics.png"}}]}],imagelayer:{"@name":"background","@y":"1",image:{"@source":"bg/Background1Graphics.png"}},objectgroup:[{"@name":"decorations",object:[{"@id":"1","@gid":"45","@x":"36","@y":"299","@width":"54","@height":"20"},{"@id":"2","@gid":"53","@x":"595","@y":"455","@width":"35","@height":"58"},{"@id":"3","@gid":"57","@x":"330","@y":"386","@width":"43","@height":"78"},{"@id":"4","@gid":"59","@x":"579","@y":"325","@width":"41","@height":"69"},{"@id":"5","@gid":"70","@x":"35","@y":"245","@width":"86","@height":"38"},{"@id":"6","@gid":"69","@x":"35","@y":"455","@width":"104","@height":"46"},{"@id":"7","@gid":"78","@x":"70","@y":"385","@width":"46","@height":"65"},{"@id":"8","@gid":"44","@x":"424","@y":"169.5","@width":"232","@height":"79",properties:{property:{"@name":"text","@value":"Nowhere to run"}}}]},{"@name":"tiles",object:[{"@id":"9","@gid":"12","@x":"0","@y":"525","@width":"35","@height":"35"},{"@id":"10","@gid":"12","@x":"420","@y":"350","@width":"35","@height":"35"},{"@id":"11","@gid":"12","@x":"-132","@y":"-197","@width":"35","@height":"35"},{"@id":"12","@gid":"12","@x":"-97","@y":"-197","@width":"35","@height":"35"},{"@id":"13","@gid":"12","@x":"-62","@y":"-197","@width":"35","@height":"35"},{"@id":"14","@gid":"12","@x":"35","@y":"525","@width":"35","@height":"35"},{"@id":"15","@gid":"12","@x":"245","@y":"385","@width":"35","@height":"35"},{"@id":"16","@gid":"12","@x":"490","@y":"525","@width":"35","@height":"35"},{"@id":"17","@gid":"12","@x":"525","@y":"525","@width":"35","@height":"35"},{"@id":"18","@gid":"12","@x":"385","@y":"525","@width":"35","@height":"35"},{"@id":"19","@gid":"12","@x":"420","@y":"385","@width":"35","@height":"35"},{"@id":"20","@gid":"12","@x":"420","@y":"490","@width":"35","@height":"35"},{"@id":"21","@gid":"12","@x":"140","@y":"525","@width":"35","@height":"35"},{"@id":"22","@gid":"12","@x":"70","@y":"525","@width":"35","@height":"35"},{"@id":"23","@gid":"12","@x":"245","@y":"525","@width":"35","@height":"35"},{"@id":"24","@gid":"12","@x":"105","@y":"525","@width":"35","@height":"35"},{"@id":"25","@gid":"12","@x":"175","@y":"525","@width":"35","@height":"35"},{"@id":"26","@gid":"12","@x":"210","@y":"525","@width":"35","@height":"35"},{"@id":"27","@gid":"12","@x":"455","@y":"525","@width":"35","@height":"35"},{"@id":"28","@gid":"12","@x":"420","@y":"525","@width":"35","@height":"35"},{"@id":"29","@gid":"12","@x":"280","@y":"525","@width":"35","@height":"35"},{"@id":"30","@gid":"9","@x":"0","@y":"490","@width":"35","@height":"35"},{"@id":"31","@gid":"9","@x":"35","@y":"490","@width":"35","@height":"35"},{"@id":"32","@gid":"9","@x":"70","@y":"490","@width":"35","@height":"35"},{"@id":"33","@gid":"9","@x":"105","@y":"490","@width":"35","@height":"35"},{"@id":"34","@gid":"9","@x":"140","@y":"490","@width":"35","@height":"35"},{"@id":"35","@gid":"9","@x":"175","@y":"490","@width":"35","@height":"35"},{"@id":"36","@gid":"9","@x":"210","@y":"490","@width":"35","@height":"35"},{"@id":"37","@gid":"9","@x":"245","@y":"490","@width":"35","@height":"35"},{"@id":"38","@gid":"10","@x":"280","@y":"490","@width":"35","@height":"35"},{"@id":"39","@gid":"9","@x":"315","@y":"525","@width":"35","@height":"35"},{"@id":"40","@gid":"9","@x":"350","@y":"525","@width":"35","@height":"35"},{"@id":"41","@gid":"9","@x":"490","@y":"490","@width":"35","@height":"35"},{"@id":"42","@gid":"9","@x":"455","@y":"490","@width":"35","@height":"35"},{"@id":"43","@gid":"9","@x":"560","@y":"525","@width":"35","@height":"35"},{"@id":"44","@gid":"9","@x":"595","@y":"525","@width":"35","@height":"35"},{"@id":"45","@gid":"9","@x":"630","@y":"525","@width":"35","@height":"35"},{"@id":"46","@gid":"9","@x":"665","@y":"525","@width":"35","@height":"35"},{"@id":"47","@gid":"9","@x":"350","@y":"210","@width":"35","@height":"35"},{"@id":"48","@gid":"9","@x":"315","@y":"210","@width":"35","@height":"35"},{"@id":"49","@gid":"9","@x":"280","@y":"210","@width":"35","@height":"35"},{"@id":"50","@gid":"10","@x":"525","@y":"490","@width":"35","@height":"35"},{"@id":"51","@gid":"8","@x":"385","@y":"490","@width":"35","@height":"35"},{"@id":"52","@gid":"6","@x":"420","@y":"455","@width":"35","@height":"35"},{"@id":"53","@gid":"6","@x":"455","@y":"245","@width":"35","@height":"35"},{"@id":"54","@gid":"6","@x":"455","@y":"280","@width":"35","@height":"35"},{"@id":"55","@gid":"6","@x":"175","@y":"35","@width":"35","@height":"35"},{"@id":"56","@gid":"7","@x":"175","@y":"70","@width":"35","@height":"35"},{"@id":"57","@gid":"7","@x":"140","@y":"315","@width":"35","@height":"35"},{"@id":"58","@gid":"2","@x":"140","@y":"385","@width":"35","@height":"35"},{"@id":"59","@gid":"3","@x":"175","@y":"385","@width":"35","@height":"35"},{"@id":"60","@gid":"2","@x":"105","@y":"175","@width":"35","@height":"35"},{"@id":"61","@gid":"2","@x":"630","@y":"385","@width":"35","@height":"35"},{"@id":"62","@gid":"4","@x":"525","@y":"385","@width":"35","@height":"35"},{"@id":"63","@gid":"14","@x":"385","@y":"420","@width":"35","@height":"35"},{"@id":"64","@gid":"14","@x":"245","@y":"420","@width":"35","@height":"35"},{"@id":"65","@gid":"14","@x":"175","@y":"210","@width":"35","@height":"35"},{"@id":"66","@gid":"14","@x":"280","@y":"245","@width":"35","@height":"35"},{"@id":"67","@gid":"14","@x":"560","@y":"245","@width":"35","@height":"35"},{"@id":"68","@gid":"16","@x":"280","@y":"420","@width":"35","@height":"35"},{"@id":"69","@gid":"16","@x":"595","@y":"245","@width":"35","@height":"35"},{"@id":"70","@gid":"16","@x":"350","@y":"245","@width":"35","@height":"35"},{"@id":"71","@gid":"13","@x":"420","@y":"420","@width":"35","@height":"35"},{"@id":"72","@gid":"15","@x":"210","@y":"385","@width":"35","@height":"35"},{"@id":"73","@gid":"11","@x":"210","@y":"315","@width":"35","@height":"35"},{"@id":"74","@gid":"11","@x":"210","@y":"350","@width":"35","@height":"35"},{"@id":"75","@gid":"9","@x":"245","@y":"315","@width":"35","@height":"35"},{"@id":"76","@gid":"5","@x":"210","@y":"280","@width":"35","@height":"35"},{"@id":"77","@gid":"10","@x":"140","@y":"280","@width":"35","@height":"35"},{"@id":"78","@gid":"3","@x":"105","@y":"280","@width":"35","@height":"35"},{"@id":"79","@gid":"3","@x":"70","@y":"280","@width":"35","@height":"35"},{"@id":"80","@gid":"3","@x":"35","@y":"280","@width":"35","@height":"35"},{"@id":"81","@gid":"3","@x":"0","@y":"280","@width":"35","@height":"35"},{"@id":"82","@gid":"9","@x":"665","@y":"385","@width":"35","@height":"35"},{"@id":"83","@gid":"14","@x":"665","@y":"420","@width":"35","@height":"35"},{"@id":"84","@gid":"8","@x":"385","@y":"315","@width":"35","@height":"35"},{"@id":"85","@gid":"11","@x":"385","@y":"385","@width":"35","@height":"35"},{"@id":"86","@gid":"11","@x":"385","@y":"350","@width":"35","@height":"35"},{"@id":"87","@gid":"13","@x":"455","@y":"350","@width":"35","@height":"35"},{"@id":"88","@gid":"13","@x":"455","@y":"315","@width":"35","@height":"35"},{"@id":"89","@gid":"9","@x":"420","@y":"315","@width":"35","@height":"35"},{"@id":"90","@gid":"3","@x":"420","@y":"210","@width":"35","@height":"35"},{"@id":"91","@gid":"3","@x":"385","@y":"210","@width":"35","@height":"35"},{"@id":"92","@gid":"3","@x":"490","@y":"210","@width":"35","@height":"35"},{"@id":"93","@gid":"3","@x":"525","@y":"210","@width":"35","@height":"35"},{"@id":"94","@gid":"9","@x":"455","@y":"210","@width":"35","@height":"35"},{"@id":"95","@gid":"9","@x":"560","@y":"210","@width":"35","@height":"35"},{"@id":"96","@gid":"10","@x":"595","@y":"210","@width":"35","@height":"35"},{"@id":"97","@gid":"10","@x":"175","@y":"175","@width":"35","@height":"35"},{"@id":"98","@gid":"3","@x":"210","@y":"210","@width":"35","@height":"35"},{"@id":"99","@gid":"3","@x":"245","@y":"210","@width":"35","@height":"35"},{"@id":"100","@gid":"3","@x":"140","@y":"175","@width":"35","@height":"35"},{"@id":"101","@gid":"3","@x":"490","@y":"385","@width":"35","@height":"35"},{"@id":"102","@gid":"15","@x":"455","@y":"385","@width":"35","@height":"35"},{"@id":"103","@gid":"15","@x":"315","@y":"245","@width":"35","@height":"35"},{"@id":"104","@gid":"10","@x":"280","@y":"315","@width":"35","@height":"35"},{"@id":"105","@gid":"12","@x":"245","@y":"350","@width":"35","@height":"35"},{"@id":"106","@gid":"13","@x":"280","@y":"350","@width":"35","@height":"35"},{"@id":"107","@gid":"13","@x":"280","@y":"385","@width":"35","@height":"35"}]},{"@name":"active",object:[{"@id":"108","@type":"6","@gid":"21","@x":"561","@y":"369","@width":"70","@height":"19",properties:{property:[{"@name":"distanceX","@value":"0"},{"@name":"distanceY","@value":"105"},{"@name":"speedX","@value":"0"},{"@name":"speedY","@value":"45"}]}},{"@id":"109","@type":"4","@gid":"17","@x":"498","@y":"351","@width":"24","@height":"11"},{"@id":"110","@type":"2","@gid":"17","@x":"481","@y":"456","@width":"24","@height":"11"},{"@id":"111","@gid":"17","@x":"244","@y":"251","@width":"24","@height":"11","@rotation":"90"},{"@id":"112","@gid":"33","@x":"243","@y":"454","@width":"35","@height":"35"},{"@id":"113","@type":"4","@gid":"21","@x":"315","@y":"476","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"174"},{"@name":"speedY","@value":"-45"}]}},{"@id":"114","@type":"3","@gid":"17","@x":"275","@y":"207.5","@width":"24","@height":"11","@rotation":"180"},{"@id":"115","@type":"4","@gid":"19","@x":"184","@y":"142","@width":"20","@height":"70"},{"@id":"116","@gid":"27","@x":"350","@y":"140","@width":"31","@height":"34"},{"@id":"117","@gid":"27","@x":"46","@y":"104","@width":"31","@height":"34"},{"@id":"118","@gid":"27","@x":"508","@y":"278","@width":"31","@height":"34"},{"@id":"119","@type":"5","@gid":"17","@x":"115","@y":"141.5","@width":"24","@height":"11"},{"@id":"120","@type":"2","@gid":"19","@x":"141","@y":"245","@width":"20","@height":"70","@rotation":"90"},{"@id":"121","@type":"3","@gid":"19","@x":"290","@y":"222","@width":"20","@height":"70","@rotation":"90"},{"@id":"122","@gid":"19","@x":"258","@y":"384","@width":"20","@height":"70"},{"@id":"123","@type":"5","@gid":"21","@x":"630","@y":"195","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"140"},{"@name":"speedY","@value":"45"}]}},{"@id":"124","@type":"2","@gid":"19","@x":"280","@y":"372","@width":"20","@height":"70","@rotation":"270"},{"@id":"125","@type":"6","@gid":"17","@x":"427","@y":"282.5","@width":"24","@height":"11"},{"@id":"126","@gid":"25","@x":"199","@y":"64","@width":"32","@height":"22",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"135"},{"@name":"minAngle","@value":"135"},{"@name":"speedX","@value":"0"}]}},{"@id":"127","@gid":"30","@x":"399","@y":"177","@width":"60","@height":"56",properties:{property:[{"@name":"limitLeft","@value":"50"},{"@name":"limitRight","@value":"120"}]}},{"@id":"128","@gid":"30","@x":"38","@y":"455","@width":"60","@height":"56",properties:{property:[{"@name":"limitLeft","@value":"30"},{"@name":"limitRight","@value":"80"}]}},{"@id":"129","@gid":"31","@x":"367","@y":"456","@width":"50","@height":"29"}]},{"@name":"characters",object:[{"@id":"130","@gid":"24","@x":"37","@y":"248","@width":"44","@height":"52"},{"@id":"131","@gid":"28","@x":"598","@y":"494","@width":"63","@height":"50"}]},{"@name":"physics",object:[{"@id":"132","@x":"0","@y":"455","@width":"315","@height":"70"},{"@id":"133","@x":"315","@y":"490","@width":"385","@height":"35"},{"@id":"134","@x":"385","@y":"455","@width":"175","@height":"35"},{"@id":"135","@x":"665","@y":"385","@width":"35","@height":"35"},{"@id":"136","@x":"630","@y":"350","@width":"70","@height":"35"},{"@id":"137","@x":"490","@y":"350","@width":"70","@height":"35"},{"@id":"141","@x":"455","@y":"210","@width":"35","@height":"175"},{"@id":"142","@x":"175","@y":"175","@width":"455","@height":"35"},{"@id":"143","@x":"560","@y":"210","@width":"70","@height":"35"},{"@id":"144","@x":"280","@y":"210","@width":"105","@height":"35"},{"@id":"145","@x":"105","@y":"140","@width":"105","@height":"35"},{"@id":"146","@x":"175","@y":"0","@width":"35","@height":"70"},{"@id":"147","@x":"0","@y":"245","@width":"175","@height":"35"},{"@id":"148","@x":"140","@y":"280","@width":"35","@height":"35"},{"@id":"149","@x":"140","@y":"350","@width":"70","@height":"35"},{"@id":"150","@x":"210","@y":"245","@width":"35","@height":"140"},{"@id":"151","@x":"245","@y":"280","@width":"70","@height":"140"},{"@id":"153","@x":"385","@y":"280","@width":"70","@height":"175"}]}]},{"@level":"19","@version":"1.0","@orientation":"orthogonal","@renderorder":"right-down","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@width":"35","@height":"35","@source":"tiles/singleTile.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"tiles/platformLeft.png"}},{"@id":"2",image:{"@width":"35","@height":"35","@source":"tiles/platformCenter.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"tiles/platformRight.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformTop.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformCenter.png"}},{"@id":"6",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformBottom.png"}},{"@id":"7",image:{"@width":"35","@height":"35","@source":"tiles/tileTopLeft.png"}},{"@id":"8",image:{"@width":"35","@height":"35","@source":"tiles/tileTopCenter.png"}},{"@id":"9",image:{"@width":"35","@height":"35","@source":"tiles/tileTopRight.png"}},{"@id":"10",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterLeft.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"tiles/tileCenter.png"}},{"@id":"12",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterRight.png"}},{"@id":"13",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomLeft.png"}},{"@id":"14",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomCenter.png"}},{"@id":"15",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"70",tile:[{"@id":"0",image:{"@width":"24","@height":"11","@source":"active/PushButtonGraphics.png"}},{"@id":"1",image:{"@width":"25","@height":"19","@source":"active/TriggerGraphics.png"}},{"@id":"2",image:{"@width":"20","@height":"70","@source":"active/DoorGraphics.png"}},{"@id":"3",image:{"@width":"20","@height":"70","@source":"active/GlassDoorGraphics.png"}},{"@id":"4",image:{"@width":"70","@height":"19","@source":"active/ElevatorGraphics.png"}},{"@id":"5",image:{"@width":"105","@height":"20","@source":"active/BigElevatorGraphics.png"}},{"@id":"6",image:{"@width":"70","@height":"70","@source":"active/ExitGraphics.png"}},{"@id":"7",image:{"@width":"44","@height":"52","@source":"characters/HustlerGraphics.png"}},{"@id":"8",image:{"@width":"32","@height":"22","@source":"active/CameraGraphics.png"}},{"@id":"9",image:{"@width":"15","@height":"15","@source":"characters/EnemyLimiterGraphics.png"}},{"@id":"10",image:{"@width":"31","@height":"34","@source":"passive/MoneyBagGraphics.png"}},{"@id":"11",image:{"@width":"63","@height":"50","@source":"characters/DogGraphics.png"}},{"@id":"12",image:{"@width":"60","@height":"55","@source":"characters/Prisoner2Graphics.png"}},{"@id":"13",image:{"@width":"60","@height":"56","@source":"characters/PrisonerGraphics.png"}}]},{"@firstgid":"31","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@width":"50","@height":"50","@source":"passive/BigBoxGraphics.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"passive/BoxGraphics.png"}},{"@id":"2",image:{"@width":"37","@height":"35","@source":"passive/ToiletGraphics.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"passive/MonitorGraphics.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"passive/BasketBallGraphics.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"passive/StoolGraphics.png"}},{"@id":"6",image:{"@width":"150","@height":"20","@source":"passive/PlankGraphics.png"}},{"@id":"7",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"8",image:{"@width":"210","@height":"20","@source":"passive/BigPlankGraphics.png"}},{"@id":"9",image:{"@width":"100","@height":"20","@source":"passive/Plank5Graphics.png"}},{"@id":"10",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"passive/MirrorGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"136",tile:[{"@id":"0",image:{"@width":"232","@height":"79","@source":"decor/LevelTextGraphics.png"}},{"@id":"1",image:{"@width":"54","@height":"20","@source":"decor/Decor1Graphics.png"}},{"@id":"2",image:{"@width":"54","@height":"20","@source":"decor/Decor2Graphics.png"}},{"@id":"3",image:{"@width":"33","@height":"27","@source":"decor/Decor3Graphics.png"}},{"@id":"4",image:{"@width":"34","@height":"25","@source":"decor/Decor4Graphics.png"}},{"@id":"5",image:{"@width":"22","@height":"31","@source":"decor/Decor5Graphics.png"}},{"@id":"6",image:{"@width":"126","@height":"59","@source":"decor/Decor6Graphics.png"}},{"@id":"7",image:{"@width":"25","@height":"21","@source":"decor/Decor8Graphics.png"}},{"@id":"8",image:{"@width":"18","@height":"22","@source":"decor/Decor9Graphics.png"}},{"@id":"9",image:{"@width":"35","@height":"58","@source":"decor/Decor10Graphics.png"}},{"@id":"10",image:{"@width":"19","@height":"66","@source":"decor/Decor11Graphics.png"}},{"@id":"11",image:{"@width":"23","@height":"33","@source":"decor/Decor12Graphics.png"}},{"@id":"12",image:{"@width":"38","@height":"26","@source":"decor/Decor13Graphics.png"}},{"@id":"13",image:{"@width":"43","@height":"78","@source":"decor/Decor14Graphics.png"}},{"@id":"14",image:{"@width":"60","@height":"86","@source":"decor/Decor15Graphics.png"}},{"@id":"15",image:{"@width":"41","@height":"69","@source":"decor/Decor16Graphics.png"}},{"@id":"16",image:{"@width":"55","@height":"58","@source":"decor/Decor17Graphics.png"}},{"@id":"17",image:{"@width":"57","@height":"54","@source":"decor/Decor18Graphics.png"}},{"@id":"18",image:{"@width":"18","@height":"45","@source":"decor/Decor19Graphics.png"}},{"@id":"19",image:{"@width":"41","@height":"49","@source":"decor/Decor20Graphics.png"}},{"@id":"20",image:{"@width":"51","@height":"38","@source":"decor/Decor21Graphics.png"}},{"@id":"21",image:{"@width":"54","@height":"54","@source":"decor/Decor22Graphics.png"}},{"@id":"22",image:{"@width":"63","@height":"136","@source":"decor/Decor23Graphics.png"}},{"@id":"23",image:{"@width":"21","@height":"39","@source":"decor/Decor24Graphics.png"}},{"@id":"24",image:{"@width":"104","@height":"50","@source":"decor/Decor25Graphics.png"}},{"@id":"25",image:{"@width":"104","@height":"46","@source":"decor/Decor26Graphics.png"}},{"@id":"26",image:{"@width":"86","@height":"38","@source":"decor/Decor27Graphics.png"}},{"@id":"27",image:{"@width":"63","@height":"55","@source":"decor/Decor28Graphics.png"}},{"@id":"28",image:{"@width":"13","@height":"23","@source":"decor/Decor29Graphics.png"}},{"@id":"29",image:{"@width":"28","@height":"40","@source":"decor/Decor30Graphics.png"}},{"@id":"30",image:{"@width":"69","@height":"30","@source":"decor/Decor31Graphics.png"}},{"@id":"31",image:{"@width":"33","@height":"29","@source":"decor/Decor32Graphics.png"}},{"@id":"32",image:{"@width":"42","@height":"42","@source":"decor/Decor33Graphics.png"}},{"@id":"33",image:{"@width":"60","@height":"66","@source":"decor/Decor34Graphics.png"}},{"@id":"34",image:{"@width":"46","@height":"65","@source":"decor/Decor35Graphics.png"}},{"@id":"35",image:{"@width":"71","@height":"55","@source":"decor/Decor36Graphics.png"}},{"@id":"36",image:{"@width":"35","@height":"55","@source":"decor/Decor37Graphics.png"}},{"@id":"37",image:{"@width":"28","@height":"29","@source":"decor/Decor38Graphics.png"}},{"@id":"38",image:{"@width":"38","@height":"37","@source":"decor/Decor39Graphics.png"}},{"@id":"39",image:{"@width":"103","@height":"50","@source":"decor/Decor40Graphics.png"}},{"@id":"40",image:{"@width":"56","@height":"55","@source":"decor/Decor41Graphics.png"}},{"@id":"41",image:{"@width":"71","@height":"50","@source":"decor/Decor42Graphics.png"}},{"@id":"42",image:{"@width":"200","@height":"44","@source":"decor/TxtGraphics.png"}}]}],imagelayer:{"@name":"background","@y":"1",image:{"@source":"bg/Background1Graphics.png"}},objectgroup:[{"@name":"decorations",object:[{"@gid":"43","@x":"161","@y":"399","@width":"232","@height":"79",properties:{property:{"@name":"text","@value":"Got ya!"}}},{"@gid":"70","@x":"630","@y":"350","@width":"63","@height":"55"},{"@gid":"82","@x":"420","@y":"385","@width":"103","@height":"50"},{"@gid":"78","@x":"490","@y":"280","@width":"71","@height":"55"},{"@gid":"84","@x":"94","@y":"379","@width":"71","@height":"50"},{"@gid":"68","@x":"560","@y":"140","@width":"104","@height":"46"},{"@gid":"54","@x":"264","@y":"468","@width":"23","@height":"33"},{"@gid":"53","@x":"45","@y":"363","@width":"19","@height":"66"}]},{"@name":"tiles",object:[{"@gid":"12","@x":"665","@y":"175","@width":"35","@height":"35"},{"@gid":"12","@x":"490","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"560","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"630","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"595","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"525","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"665","@y":"490","@width":"35","@height":"35"},{"@gid":"12","@x":"420","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"665","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"455","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"385","@y":"490","@width":"35","@height":"35"},{"@gid":"12","@x":"0","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"385","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"315","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"350","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"280","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"245","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"210","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"175","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"140","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"105","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"70","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"35","@y":"525","@width":"35","@height":"35"},{"@gid":"8","@x":"315","@y":"490","@width":"35","@height":"35"},{"@gid":"8","@x":"665","@y":"385","@width":"35","@height":"35"},{"@gid":"8","@x":"70","@y":"420","@width":"35","@height":"35"},{"@gid":"7","@x":"70","@y":"455","@width":"35","@height":"35"},{"@gid":"3","@x":"105","@y":"420","@width":"35","@height":"35"},{"@gid":"3","@x":"280","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"315","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"350","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"385","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"595","@y":"175","@width":"35","@height":"35"},{"@gid":"3","@x":"35","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"105","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"140","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"175","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"210","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"245","@y":"70","@width":"35","@height":"35"},{"@gid":"3","@x":"280","@y":"70","@width":"35","@height":"35"},{"@gid":"4","@x":"140","@y":"420","@width":"35","@height":"35"},{"@gid":"4","@x":"560","@y":"315","@width":"35","@height":"35"},{"@gid":"5","@x":"385","@y":"420","@width":"35","@height":"35"},{"@gid":"6","@x":"385","@y":"455","@width":"35","@height":"35"},{"@gid":"6","@x":"525","@y":"350","@width":"35","@height":"35"},{"@gid":"6","@x":"420","@y":"245","@width":"35","@height":"35"},{"@gid":"6","@x":"70","@y":"105","@width":"35","@height":"35"},{"@gid":"7","@x":"70","@y":"140","@width":"35","@height":"35"},{"@gid":"7","@x":"315","@y":"105","@width":"35","@height":"35"},{"@gid":"10","@x":"315","@y":"70","@width":"35","@height":"35"},{"@gid":"9","@x":"70","@y":"70","@width":"35","@height":"35"},{"@gid":"9","@x":"0","@y":"70","@width":"35","@height":"35"},{"@gid":"8","@x":"665","@y":"140","@width":"35","@height":"35"},{"@gid":"9","@x":"350","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"420","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"455","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"490","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"525","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"560","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"595","@y":"490","@width":"35","@height":"35"},{"@gid":"9","@x":"630","@y":"490","@width":"35","@height":"35"},{"@gid":"7","@x":"525","@y":"420","@width":"35","@height":"35"},{"@gid":"7","@x":"385","@y":"350","@width":"35","@height":"35"},{"@gid":"8","@x":"385","@y":"315","@width":"35","@height":"35"},{"@gid":"3","@x":"490","@y":"315","@width":"35","@height":"35"},{"@gid":"9","@x":"525","@y":"315","@width":"35","@height":"35"},{"@gid":"10","@x":"455","@y":"280","@width":"35","@height":"35"},{"@gid":"10","@x":"420","@y":"210","@width":"35","@height":"35"},{"@gid":"15","@x":"420","@y":"315","@width":"35","@height":"35"},{"@gid":"15","@x":"455","@y":"315","@width":"35","@height":"35"},{"@gid":"15","@x":"105","@y":"315","@width":"35","@height":"35"},{"@gid":"15","@x":"665","@y":"210","@width":"35","@height":"35"},{"@gid":"14","@x":"630","@y":"210","@width":"35","@height":"35"},{"@gid":"14","@x":"70","@y":"315","@width":"35","@height":"35"},{"@gid":"2","@x":"525","@y":"175","@width":"35","@height":"35"},{"@gid":"2","@x":"245","@y":"210","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"490","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"455","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"420","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"385","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"350","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"315","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"280","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"245","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"210","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"175","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"140","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"105","@width":"35","@height":"35"},{"@gid":"11","@x":"70","@y":"245","@width":"35","@height":"35"},{"@gid":"11","@x":"70","@y":"280","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"455","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"420","@width":"35","@height":"35"},{"@gid":"11","@x":"420","@y":"280","@width":"35","@height":"35"},{"@gid":"8","@x":"70","@y":"210","@width":"35","@height":"35"},{"@gid":"9","@x":"105","@y":"210","@width":"35","@height":"35"},{"@gid":"9","@x":"630","@y":"175","@width":"35","@height":"35"},{"@gid":"6","@x":"525","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"560","@y":"175","@width":"35","@height":"35"},{"@gid":"10","@x":"140","@y":"210"},{"@gid":"13","@x":"140","@y":"245"},{"@gid":"13","@x":"140","@y":"280"},{"@gid":"16","@x":"140","@y":"315"},{"@gid":"12","@x":"105","@y":"280"},{"@gid":"12","@x":"105","@y":"245"}]},{"@name":"active",object:[{"@type":"6","@gid":"19","@x":"1","@y":"387","@width":"20","@height":"70","@rotation":"90"},{"@type":"4","@gid":"17","@x":"41","@y":"491","@width":"24","@height":"11"},{"@gid":"21","@x":"314","@y":"424","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"100"},{"@name":"speedY","@value":"-45"}]}},{"@gid":"27","@x":"338","@y":"450","@width":"31","@height":"34"},{"@gid":"27","@x":"595","@y":"105","@width":"31","@height":"34"},{"@gid":"27","@x":"271","@y":"247","@width":"31","@height":"34"},{"@type":"2","@gid":"17","@x":"624","@y":"456.5","@width":"24","@height":"11"},{"@type":"3","@gid":"19","@x":"104","@y":"267","@width":"20","@height":"70","@rotation":"-90"},{"@type":"2","@gid":"19","@x":"175","@y":"175","@width":"20","@height":"70","@rotation":"90"},{"@gid":"39","@x":"174","@y":"406","@width":"210","@height":"20"},{"@gid":"21","@x":"175","@y":"424","@width":"80","@height":"19",properties:{property:[{"@name":"distanceY","@value":"100"},{"@name":"speedY","@value":"-45"}]}},{"@gid":"25","@x":"409","@y":"254","@width":"32","@height":"22",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"0"},{"@name":"minAngle","@value":"0"},{"@name":"speedX","@value":"0"}]}},{"@gid":"42","@x":"70","@y":"175","@width":"35","@height":"35"},{"@type":"3","@gid":"18","@x":"392","@y":"280","@width":"25","@height":"19"},{"@gid":"25","@x":"42","@y":"91","@width":"32","@height":"22",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"90"},{"@name":"minAngle","@value":"90"},{"@name":"speedX","@value":"0"}]}},{"@gid":"30","@x":"91","@y":"386","@width":"60","@height":"56",properties:{property:[{"@name":"limitLeft","@value":"27"},{"@name":"limitRight","@value":"23"}]}},{"@type":"6","@gid":"18","@x":"270","@y":"491","@width":"25","@height":"19"},{"@gid":"19","@x":"323","@y":"176","@width":"20","@height":"70"},{"@type":"4","@gid":"19","@x":"0","@y":"117","@width":"20","@height":"70","@rotation":"90"},{"@gid":"18","@x":"428","@y":"455","@width":"25","@height":"19"},{"@gid":"19","@x":"399","@y":"455","@width":"20","@height":"70"},{"@gid":"29","@x":"140","@y":"490","@width":"60","@height":"55"},{"@type":"3","@gid":"19","@x":"140","@y":"267","@width":"20","@height":"70","@rotation":"-90"},{"@type":"3","@gid":"19","@x":"536","@y":"525","@width":"20","@height":"70"}]},{"@name":"characters",object:[{"@gid":"24","@x":"205.333","@y":"171.667","@width":"44","@height":"52"},{"@gid":"28","@x":"381","@y":"174","@width":"63","@height":"50"}]},{"@name":"physics","@visible":"0",object:[{"@x":"0","@y":"490","@width":"700","@height":"35"},{"@x":"315","@y":"455","@width":"385","@height":"35"},{"@x":"385","@y":"385","@width":"35","@height":"70"},{"@x":"665","@y":"350","@width":"35","@height":"105"},{"@x":"525","@y":"315","@width":"35","@height":"105"},{"@x":"385","@y":"315","@width":"35","@height":"35"},{"@x":"385","@y":"280","@width":"210","@height":"35"},{"@x":"420","@y":"245","@width":"70","@height":"35"},{"@x":"420","@y":"210","@width":"35","@height":"35"},{"@x":"245","@y":"175","@width":"210","@height":"35"},{"@x":"525","@y":"140","@width":"175","@height":"35"},{"@x":"630","@y":"175","@width":"70","@height":"35"},{"@x":"665","@y":"105","@width":"35","@height":"35"},{"@x":"70","@y":"385","@width":"105","@height":"35"},{"@x":"70","@y":"420","@width":"35","@height":"35"},{"@x":"0","@y":"70","@width":"35","@height":"420"},{"@x":"70","@y":"175","@width":"105","@height":"140"},{"@x":"70","@y":"70","@width":"35","@height":"70"},{"@x":"0","@y":"35","@width":"350","@height":"35"},{"@x":"315","@y":"70","@width":"35","@height":"35"}]}]},{"@level":"20","@version":"1.0","@orientation":"orthogonal","@renderorder":"right-down","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35","@nextobjectid":"173",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35","@tilecount":"16",tile:[{"@id":"0",image:{"@width":"35","@height":"35","@source":"tiles/singleTile.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"tiles/platformLeft.png"}},{"@id":"2",image:{"@width":"35","@height":"35","@source":"tiles/platformCenter.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"tiles/platformRight.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformTop.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformCenter.png"}},{"@id":"6",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformBottom.png"}},{"@id":"7",image:{"@width":"35","@height":"35","@source":"tiles/tileTopLeft.png"}},{"@id":"8",image:{"@width":"35","@height":"35","@source":"tiles/tileTopCenter.png"}},{"@id":"9",image:{"@width":"35","@height":"35","@source":"tiles/tileTopRight.png"}},{"@id":"10",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterLeft.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"tiles/tileCenter.png"}},{"@id":"12",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterRight.png"}},{"@id":"13",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomLeft.png"}},{"@id":"14",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomCenter.png"}},{"@id":"15",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"70","@tilecount":"15",tile:[{"@id":"0",image:{"@width":"24","@height":"11","@source":"active/PushButtonGraphics.png"}},{"@id":"1",image:{"@width":"25","@height":"19","@source":"active/TriggerGraphics.png"}},{"@id":"2",image:{"@width":"20","@height":"70","@source":"active/DoorGraphics.png"}},{"@id":"3",image:{"@width":"20","@height":"70","@source":"active/GlassDoorGraphics.png"}},{"@id":"4",image:{"@width":"70","@height":"19","@source":"active/ElevatorGraphics.png"}},{"@id":"5",image:{"@width":"105","@height":"20","@source":"active/BigElevatorGraphics.png"}},{"@id":"6",image:{"@width":"70","@height":"70","@source":"active/ExitGraphics.png"}},{"@id":"7",image:{"@width":"44","@height":"52","@source":"characters/HustlerGraphics.png"}},{"@id":"8",image:{"@width":"32","@height":"22","@source":"active/CameraGraphics.png"}},{"@id":"9",image:{"@width":"15","@height":"15","@source":"characters/EnemyLimiterGraphics.png"}},{"@id":"10",image:{"@width":"31","@height":"34","@source":"passive/MoneyBagGraphics.png"}},{"@id":"11",image:{"@width":"63","@height":"50","@source":"characters/DogGraphics.png"}},{"@id":"12",image:{"@width":"60","@height":"55","@source":"characters/Prisoner2Graphics.png"}},{"@id":"13",image:{"@width":"60","@height":"56","@source":"characters/PrisonerGraphics.png"}},{"@id":"14",image:{"@width":"50","@height":"29","@source":"active/TurrelGraphics.png"}}]},{"@firstgid":"32","@name":"passive","@tilewidth":"210","@tileheight":"50","@tilecount":"12",tile:[{"@id":"0",image:{"@width":"50","@height":"50","@source":"passive/BigBoxGraphics.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"passive/BoxGraphics.png"}},{"@id":"2",image:{"@width":"37","@height":"35","@source":"passive/ToiletGraphics.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"passive/MonitorGraphics.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"passive/BasketBallGraphics.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"passive/StoolGraphics.png"}},{"@id":"6",image:{"@width":"150","@height":"20","@source":"passive/PlankGraphics.png"}},{"@id":"7",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"8",image:{"@width":"210","@height":"20","@source":"passive/BigPlankGraphics.png"}},{"@id":"9",image:{"@width":"100","@height":"20","@source":"passive/Plank5Graphics.png"}},{"@id":"10",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"passive/MirrorGraphics.png"}}]},{"@firstgid":"44","@name":"decor","@tilewidth":"232","@tileheight":"136","@tilecount":"43",tile:[{"@id":"0",image:{"@width":"232","@height":"79","@source":"decor/LevelTextGraphics.png"}},{"@id":"1",image:{"@width":"54","@height":"20","@source":"decor/Decor1Graphics.png"}},{"@id":"2",image:{"@width":"54","@height":"20","@source":"decor/Decor2Graphics.png"}},{"@id":"3",image:{"@width":"33","@height":"27","@source":"decor/Decor3Graphics.png"}},{"@id":"4",image:{"@width":"34","@height":"25","@source":"decor/Decor4Graphics.png"}},{"@id":"5",image:{"@width":"22","@height":"31","@source":"decor/Decor5Graphics.png"}},{"@id":"6",image:{"@width":"126","@height":"59","@source":"decor/Decor6Graphics.png"}},{"@id":"7",image:{"@width":"25","@height":"21","@source":"decor/Decor8Graphics.png"}},{"@id":"8",image:{"@width":"18","@height":"22","@source":"decor/Decor9Graphics.png"}},{"@id":"9",image:{"@width":"35","@height":"58","@source":"decor/Decor10Graphics.png"}},{"@id":"10",image:{"@width":"19","@height":"66","@source":"decor/Decor11Graphics.png"}},{"@id":"11",image:{"@width":"23","@height":"33","@source":"decor/Decor12Graphics.png"}},{"@id":"12",image:{"@width":"38","@height":"26","@source":"decor/Decor13Graphics.png"}},{"@id":"13",image:{"@width":"43","@height":"78","@source":"decor/Decor14Graphics.png"}},{"@id":"14",image:{"@width":"60","@height":"86","@source":"decor/Decor15Graphics.png"}},{"@id":"15",image:{"@width":"41","@height":"69","@source":"decor/Decor16Graphics.png"}},{"@id":"16",image:{"@width":"55","@height":"58","@source":"decor/Decor17Graphics.png"}},{"@id":"17",image:{"@width":"57","@height":"54","@source":"decor/Decor18Graphics.png"}},{"@id":"18",image:{"@width":"18","@height":"45","@source":"decor/Decor19Graphics.png"}},{"@id":"19",image:{"@width":"41","@height":"49","@source":"decor/Decor20Graphics.png"}},{"@id":"20",image:{"@width":"51","@height":"38","@source":"decor/Decor21Graphics.png"}},{"@id":"21",image:{"@width":"54","@height":"54","@source":"decor/Decor22Graphics.png"}},{"@id":"22",image:{"@width":"63","@height":"136","@source":"decor/Decor23Graphics.png"}},{"@id":"23",image:{"@width":"21","@height":"39","@source":"decor/Decor24Graphics.png"}},{"@id":"24",image:{"@width":"104","@height":"50","@source":"decor/Decor25Graphics.png"}},{"@id":"25",image:{"@width":"104","@height":"46","@source":"decor/Decor26Graphics.png"}},{"@id":"26",image:{"@width":"86","@height":"38","@source":"decor/Decor27Graphics.png"}},{"@id":"27",image:{"@width":"63","@height":"55","@source":"decor/Decor28Graphics.png"}},{"@id":"28",image:{"@width":"13","@height":"23","@source":"decor/Decor29Graphics.png"}},{"@id":"29",image:{"@width":"28","@height":"40","@source":"decor/Decor30Graphics.png"}},{"@id":"30",image:{"@width":"69","@height":"30","@source":"decor/Decor31Graphics.png"}},{"@id":"31",image:{"@width":"33","@height":"29","@source":"decor/Decor32Graphics.png"}},{"@id":"32",image:{"@width":"42","@height":"42","@source":"decor/Decor33Graphics.png"}},{"@id":"33",image:{"@width":"60","@height":"66","@source":"decor/Decor34Graphics.png"}},{"@id":"34",image:{"@width":"46","@height":"65","@source":"decor/Decor35Graphics.png"}},{"@id":"35",image:{"@width":"71","@height":"55","@source":"decor/Decor36Graphics.png"}},{"@id":"36",image:{"@width":"35","@height":"55","@source":"decor/Decor37Graphics.png"}},{"@id":"37",image:{"@width":"28","@height":"29","@source":"decor/Decor38Graphics.png"}},{"@id":"38",image:{"@width":"38","@height":"37","@source":"decor/Decor39Graphics.png"}},{"@id":"39",image:{"@width":"103","@height":"50","@source":"decor/Decor40Graphics.png"}},{"@id":"40",image:{"@width":"56","@height":"55","@source":"decor/Decor41Graphics.png"}},{"@id":"41",image:{"@width":"71","@height":"50","@source":"decor/Decor42Graphics.png"}},{"@id":"42",image:{"@width":"200","@height":"44","@source":"decor/TxtGraphics.png"}}]}],imagelayer:{"@name":"background",image:{"@source":"bg/Background1Graphics.png"}},objectgroup:[{"@name":"decorations",object:[{"@id":"1","@gid":"44","@x":"357","@y":"335","@width":"232","@height":"79",properties:{property:{"@name":"text","@value":"Vicious circle"}}},{"@id":"2","@gid":"68","@x":"245","@y":"490","@width":"104","@height":"50"},{"@id":"3","@gid":"67","@x":"280","@y":"455","@width":"21","@height":"39"},{"@id":"4","@gid":"64","@x":"59","@y":"332","@width":"51","@height":"38"},{"@id":"5","@gid":"75","@x":"163","@y":"409","@width":"33","@height":"29"},{"@id":"6","@gid":"76","@x":"350","@y":"105","@width":"42","@height":"42"},{"@id":"7","@gid":"82","@x":"541","@y":"438","@width":"38","@height":"37"},{"@id":"8","@gid":"80","@x":"490","@y":"490","@width":"35","@height":"55"}]},{"@name":"tiles",object:[{"@id":"9","@gid":"12","@x":"0","@y":"525","@width":"35","@height":"35"},{"@id":"10","@gid":"12","@x":"175","@y":"525","@width":"35","@height":"35"},{"@id":"11","@gid":"12","@x":"210","@y":"525","@width":"35","@height":"35"},{"@id":"12","@gid":"12","@x":"105","@y":"525","@width":"35","@height":"35"},{"@id":"13","@gid":"9","@x":"420","@y":"525","@width":"35","@height":"35"},{"@id":"14","@gid":"9","@x":"385","@y":"525","@width":"35","@height":"35"},{"@id":"15","@gid":"9","@x":"315","@y":"525","@width":"35","@height":"35"},{"@id":"16","@gid":"9","@x":"350","@y":"525","@width":"35","@height":"35"},{"@id":"17","@gid":"9","@x":"560","@y":"525","@width":"35","@height":"35"},{"@id":"18","@gid":"9","@x":"280","@y":"525","@width":"35","@height":"35"},{"@id":"19","@gid":"9","@x":"245","@y":"525","@width":"35","@height":"35"},{"@id":"20","@gid":"9","@x":"595","@y":"525","@width":"35","@height":"35"},{"@id":"21","@gid":"9","@x":"455","@y":"525","@width":"35","@height":"35"},{"@id":"22","@gid":"9","@x":"35","@y":"525","@width":"35","@height":"35"},{"@id":"23","@gid":"9","@x":"525","@y":"525","@width":"35","@height":"35"},{"@id":"24","@gid":"9","@x":"490","@y":"525","@width":"35","@height":"35"},{"@id":"25","@gid":"9","@x":"70","@y":"525","@width":"35","@height":"35"},{"@id":"26","@gid":"12","@x":"140","@y":"525","@width":"35","@height":"35"},{"@id":"27","@gid":"12","@x":"665","@y":"280","@width":"35","@height":"35"},{"@id":"28","@gid":"12","@x":"665","@y":"385","@width":"35","@height":"35"},{"@id":"29","@gid":"12","@x":"665","@y":"315","@width":"35","@height":"35"},{"@id":"30","@gid":"12","@x":"665","@y":"210","@width":"35","@height":"35"},{"@id":"31","@gid":"12","@x":"665","@y":"245","@width":"35","@height":"35"},{"@id":"32","@gid":"12","@x":"630","@y":"525","@width":"35","@height":"35"},{"@id":"33","@gid":"12","@x":"665","@y":"455","@width":"35","@height":"35"},{"@id":"34","@gid":"12","@x":"665","@y":"350","@width":"35","@height":"35"},{"@id":"35","@gid":"12","@x":"665","@y":"420","@width":"35","@height":"35"},{"@id":"36","@gid":"12","@x":"665","@y":"490","@width":"35","@height":"35"},{"@id":"37","@gid":"12","@x":"665","@y":"175","@width":"35","@height":"35"},{"@id":"38","@gid":"12","@x":"665","@y":"525","@width":"35","@height":"35"},{"@id":"39","@gid":"10","@x":"0","@y":"455","@width":"35","@height":"35"},{"@id":"40","@gid":"10","@x":"105","@y":"385","@width":"35","@height":"35"},{"@id":"41","@gid":"10","@x":"385","@y":"175","@width":"35","@height":"35"},{"@id":"42","@gid":"10","@x":"0","@y":"140","@width":"35","@height":"35"},{"@id":"43","@gid":"8","@x":"630","@y":"455","@width":"35","@height":"35"},{"@id":"44","@gid":"8","@x":"455","@y":"385","@width":"35","@height":"35"},{"@id":"45","@gid":"8","@x":"210","@y":"385","@width":"35","@height":"35"},{"@id":"46","@gid":"8","@x":"245","@y":"175","@width":"35","@height":"35"},{"@id":"47","@gid":"13","@x":"0","@y":"490","@width":"35","@height":"35"},{"@id":"48","@gid":"13","@x":"210","@y":"490","@width":"35","@height":"35"},{"@id":"49","@gid":"11","@x":"630","@y":"490","@width":"35","@height":"35"},{"@id":"50","@gid":"11","@x":"105","@y":"490","@width":"35","@height":"35"},{"@id":"51","@gid":"9","@x":"175","@y":"490","@width":"35","@height":"35"},{"@id":"52","@gid":"9","@x":"140","@y":"490","@width":"35","@height":"35"},{"@id":"53","@gid":"6","@x":"105","@y":"455","@width":"35","@height":"35"},{"@id":"54","@gid":"6","@x":"105","@y":"420","@width":"35","@height":"35"},{"@id":"55","@gid":"6","@x":"210","@y":"455","@width":"35","@height":"35"},{"@id":"56","@gid":"6","@x":"210","@y":"420","@width":"35","@height":"35"},{"@id":"57","@gid":"6","@x":"595","@y":"245","@width":"35","@height":"35"},{"@id":"58","@gid":"6","@x":"595","@y":"280","@width":"35","@height":"35"},{"@id":"59","@gid":"6","@x":"595","@y":"315","@width":"35","@height":"35"},{"@id":"60","@gid":"6","@x":"595","@y":"350","@width":"35","@height":"35"},{"@id":"61","@gid":"6","@x":"315","@y":"315","@width":"35","@height":"35"},{"@id":"62","@gid":"6","@x":"315","@y":"350","@width":"35","@height":"35"},{"@id":"63","@gid":"6","@x":"385","@y":"210","@width":"35","@height":"35"},{"@id":"64","@gid":"6","@x":"560","@y":"70","@width":"35","@height":"35"},{"@id":"65","@gid":"6","@x":"560","@y":"105","@width":"35","@height":"35"},{"@id":"66","@gid":"3","@x":"560","@y":"385","@width":"35","@height":"35"},{"@id":"67","@gid":"3","@x":"525","@y":"385","@width":"35","@height":"35"},{"@id":"68","@gid":"3","@x":"490","@y":"385","@width":"35","@height":"35"},{"@id":"69","@gid":"3","@x":"280","@y":"385","@width":"35","@height":"35"},{"@id":"70","@gid":"3","@x":"245","@y":"385","@width":"35","@height":"35"},{"@id":"71","@gid":"3","@x":"420","@y":"245","@width":"35","@height":"35"},{"@id":"72","@gid":"3","@x":"455","@y":"245","@width":"35","@height":"35"},{"@id":"73","@gid":"3","@x":"70","@y":"175","@width":"35","@height":"35"},{"@id":"74","@gid":"3","@x":"35","@y":"175","@width":"35","@height":"35"},{"@id":"75","@gid":"3","@x":"490","@y":"140","@width":"35","@height":"35"},{"@id":"76","@gid":"3","@x":"525","@y":"140","@width":"35","@height":"35"},{"@id":"77","@gid":"3","@x":"595","@y":"140","@width":"35","@height":"35"},{"@id":"78","@gid":"3","@x":"630","@y":"140","@width":"35","@height":"35"},{"@id":"79","@gid":"3","@x":"350","@y":"175","@width":"35","@height":"35"},{"@id":"80","@gid":"3","@x":"315","@y":"175","@width":"35","@height":"35"},{"@id":"81","@gid":"2","@x":"70","@y":"385","@width":"35","@height":"35"},{"@id":"82","@gid":"2","@x":"70","@y":"280","@width":"35","@height":"35"},{"@id":"83","@gid":"2","@x":"210","@y":"280","@width":"35","@height":"35"},{"@id":"84","@gid":"2","@x":"455","@y":"140","@width":"35","@height":"35"},{"@id":"85","@gid":"4","@x":"105","@y":"175","@width":"35","@height":"35"},{"@id":"86","@gid":"4","@x":"105","@y":"280","@width":"35","@height":"35"},{"@id":"87","@gid":"4","@x":"350","@y":"385","@width":"35","@height":"35"},{"@id":"88","@gid":"4","@x":"490","@y":"245","@width":"35","@height":"35"},{"@id":"89","@gid":"9","@x":"665","@y":"140","@width":"35","@height":"35"},{"@id":"90","@gid":"9","@x":"280","@y":"175","@width":"35","@height":"35"},{"@id":"91","@gid":"10","@x":"315","@y":"280","@width":"35","@height":"35"},{"@id":"92","@gid":"15","@x":"245","@y":"280","@width":"35","@height":"35"},{"@id":"93","@gid":"15","@x":"280","@y":"280","@width":"35","@height":"35"},{"@id":"94","@gid":"15","@x":"280","@y":"35","@width":"35","@height":"35"},{"@id":"95","@gid":"15","@x":"315","@y":"35","@width":"35","@height":"35"},{"@id":"96","@gid":"15","@x":"350","@y":"35","@width":"35","@height":"35"},{"@id":"97","@gid":"15","@x":"385","@y":"35","@width":"35","@height":"35"},{"@id":"98","@gid":"15","@x":"420","@y":"35","@width":"35","@height":"35"},{"@id":"99","@gid":"15","@x":"490","@y":"35","@width":"35","@height":"35"},{"@id":"100","@gid":"15","@x":"455","@y":"35","@width":"35","@height":"35"},{"@id":"101","@gid":"7","@x":"455","@y":"420","@width":"35","@height":"35"},{"@id":"102","@gid":"15","@x":"315","@y":"385","@width":"35","@height":"35"},{"@id":"103","@gid":"15","@x":"560","@y":"140","@width":"35","@height":"35"},{"@id":"104","@gid":"14","@x":"385","@y":"245","@width":"35","@height":"35"},{"@id":"105","@gid":"13","@x":"280","@y":"210","@width":"35","@height":"35"},{"@id":"106","@gid":"13","@x":"280","@y":"245","@width":"35","@height":"35"},{"@id":"107","@gid":"11","@x":"245","@y":"210","@width":"35","@height":"35"},{"@id":"108","@gid":"11","@x":"245","@y":"245","@width":"35","@height":"35"},{"@id":"109","@gid":"5","@x":"595","@y":"210","@width":"35","@height":"35"},{"@id":"110","@gid":"16","@x":"595","@y":"385","@width":"35","@height":"35"},{"@id":"111","@gid":"15","@x":"0","@y":"175","@width":"35","@height":"35"},{"@id":"112","@gid":"7","@x":"245","@y":"70","@width":"35","@height":"35"},{"@id":"113","@gid":"11","@x":"245","@y":"35","@width":"35","@height":"35"},{"@id":"114","@gid":"13","@x":"560","@y":"35","@width":"35","@height":"35"},{"@id":"115","@gid":"15","@x":"525","@y":"35","@width":"35","@height":"35"}]},{"@name":"active",object:[{"@id":"116","@gid":"20","@x":"525","@y":"210","@width":"20","@height":"70","@rotation":"90"},{"@id":"117","@type":"4","@gid":"19","@x":"211","@y":"265","@width":"20","@height":"70","@rotation":"-90"},{"@id":"118","@type":"5","@gid":"19","@x":"140","@y":"353","@width":"20","@height":"70","@rotation":"90"},{"@id":"119","@type":"3","@gid":"17","@x":"216","@y":"245","@width":"24","@height":"11"},{"@id":"120","@type":"3","@gid":"19","@x":"264","@y":"71","@width":"20","@height":"70","@rotation":"180"},{"@id":"121","@type":"2","@gid":"17","@x":"161","@y":"456","@width":"24","@height":"11"},{"@id":"122","@gid":"33","@x":"141","@y":"244","@width":"35","@height":"35"},{"@id":"123","@gid":"20","@x":"121","@y":"350","@width":"20","@height":"70"},{"@id":"124","@type":"4","@gid":"19","@x":"282","@y":"209","@width":"20","@height":"70","@rotation":"90"},{"@id":"125","@type":"5","@gid":"17","@x":"592","@y":"492","@width":"24","@height":"11"},{"@id":"126","@gid":"27","@x":"5","@y":"91","@width":"31","@height":"34"},{"@id":"127","@gid":"26","@x":"255","@y":"119","@width":"15","@height":"15"},{"@id":"128","@gid":"26","@x":"197","@y":"432","@width":"15","@height":"15"},{"@id":"129","@gid":"2147483679","@x":"36","@y":"140","@width":"50","@height":"29"},{"@id":"130","@type":"2","@gid":"21","@x":"1","@y":"264","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"70"},{"@name":"speedY","@value":"45"}]}},{"@id":"131","@type":"4","@gid":"21","@x":"385","@y":"369.5","@width":"70","@height":"19",properties:{property:[{"@name":"distanceY","@value":"110"},{"@name":"speedY","@value":"45"}]}},{"@id":"132","@type":"4","@gid":"17","@x":"529","@y":"106","@width":"24","@height":"11"},{"@id":"133","@gid":"30","@x":"231","@y":"352","@width":"60","@height":"56",properties:{property:[{"@name":"limitLeft","@value":"10"},{"@name":"limitRight","@value":"20"}]}},{"@id":"134","@gid":"25","@x":"358","@y":"195","@width":"32","@height":"22",properties:{property:[{"@name":"delay","@value":"0"},{"@name":"maxAngle","@value":"90"},{"@name":"minAngle","@value":"90"},{"@name":"speedX","@value":"0"}]}},{"@id":"135","@type":"6","@gid":"17","@x":"635","@y":"420.5","@width":"24","@height":"11"},{"@id":"136","@gid":"30","@x":"501","@y":"491","@width":"60","@height":"56",properties:{property:[{"@name":"limitLeft","@value":"5"},{"@name":"limitRight","@value":"30"}]}},{"@id":"137","@gid":"27","@x":"560","@y":"280","@width":"31","@height":"34"},{"@id":"138","@gid":"27","@x":"467","@y":"92","@width":"31","@height":"34"},{"@id":"139","@type":"6","@gid":"20","@x":"463","@y":"490","@width":"20","@height":"70"},{"@id":"140","@gid":"43","@x":"315","@y":"210","@width":"35","@height":"35"},{"@id":"141","@gid":"2147483691","@x":"490","@y":"350","@width":"35","@height":"35"},{"@id":"142","@gid":"1073741867","@x":"560","@y":"210","@width":"35","@height":"35"},{"@id":"143","@gid":"26","@x":"408.5","@y":"125.5","@width":"15","@height":"15"},{"@id":"144","@gid":"29","@x":"481","@y":"208","@width":"60","@height":"55"},{"@id":"145","@gid":"29","@x":"280","@y":"140","@width":"60","@height":"55"}]},{"@name":"characters",object:[{"@id":"146","@gid":"24","@x":"40","@y":"484","@width":"44","@height":"52"},{"@id":"147","@gid":"28","@x":"277.5","@y":"487","@width":"63","@height":"50"}]},{"@name":"physics",object:[{"@id":"148","@x":"0","@y":"490","@width":"700","@height":"35"},{"@id":"149","@x":"0","@y":"420","@width":"35","@height":"70"},{"@id":"150","@x":"630","@y":"420","@width":"35","@height":"70"},{"@id":"151","@x":"665","@y":"140","@width":"35","@height":"350"},{"@id":"152","@x":"105","@y":"385","@width":"35","@height":"105"},{"@id":"153","@x":"70","@y":"350","@width":"70","@height":"35"},{"@id":"154","@x":"210","@y":"385","@width":"35","@height":"105"},{"@id":"155","@x":"140","@y":"455","@width":"70","@height":"35"},{"@id":"156","@x":"210","@y":"350","@width":"175","@height":"35"},{"@id":"157","@x":"455","@y":"350","@width":"140","@height":"35"},{"@id":"158","@x":"455","@y":"385","@width":"35","@height":"35"},{"@id":"159","@x":"595","@y":"175","@width":"35","@height":"210"},{"@id":"160","@x":"70","@y":"245","@width":"70","@height":"35"},{"@id":"161","@x":"210","@y":"245","@width":"140","@height":"35"},{"@id":"162","@x":"315","@y":"280","@width":"35","@height":"70"},{"@id":"163","@x":"0","@y":"140","@width":"140","@height":"35"},{"@id":"164","@x":"0","@y":"105","@width":"35","@height":"35"},{"@id":"165","@x":"245","@y":"35","@width":"35","@height":"35"},{"@id":"166","@x":"245","@y":"0","@width":"350","@height":"35"},{"@id":"167","@x":"560","@y":"35","@width":"35","@height":"70"},{"@id":"168","@x":"455","@y":"105","@width":"245","@height":"35"},{"@id":"169","@x":"420","@y":"210","@width":"105","@height":"35"},{"@id":"170","@x":"385","@y":"175","@width":"35","@height":"70"},{"@id":"171","@x":"245","@y":"140","@width":"175","@height":"35"},{"@id":"172","@x":"245","@y":"175","@width":"70","@height":"70"}]}]},{"@level":"21","@version":"1.0","@orientation":"orthogonal","@renderorder":"right-down","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35",tile:[{"@id":"0",image:{"@width":"35","@height":"35","@source":"tiles/singleTile.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"tiles/platformLeft.png"}},{"@id":"2",image:{"@width":"35","@height":"35","@source":"tiles/platformCenter.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"tiles/platformRight.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformTop.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformCenter.png"}},{"@id":"6",image:{"@width":"35","@height":"35","@source":"tiles/verticalPlatformBottom.png"}},{"@id":"7",image:{"@width":"35","@height":"35","@source":"tiles/tileTopLeft.png"}},{"@id":"8",image:{"@width":"35","@height":"35","@source":"tiles/tileTopCenter.png"}},{"@id":"9",image:{"@width":"35","@height":"35","@source":"tiles/tileTopRight.png"}},{"@id":"10",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterLeft.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"tiles/tileCenter.png"}},{"@id":"12",image:{"@width":"35","@height":"35","@source":"tiles/tileCenterRight.png"}},{"@id":"13",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomLeft.png"}},{"@id":"14",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomCenter.png"}},{"@id":"15",image:{"@width":"35","@height":"35","@source":"tiles/tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"70",tile:[{"@id":"0",image:{"@width":"24","@height":"11","@source":"active/PushButtonGraphics.png"}},{"@id":"1",image:{"@width":"25","@height":"19","@source":"active/TriggerGraphics.png"}},{"@id":"2",image:{"@width":"20","@height":"70","@source":"active/DoorGraphics.png"}},{"@id":"3",image:{"@width":"20","@height":"70","@source":"active/GlassDoorGraphics.png"}},{"@id":"4",image:{"@width":"70","@height":"19","@source":"active/ElevatorGraphics.png"}},{"@id":"5",image:{"@width":"105","@height":"20","@source":"active/BigElevatorGraphics.png"}},{"@id":"6",image:{"@width":"70","@height":"70","@source":"active/ExitGraphics.png"}},{"@id":"7",image:{"@width":"44","@height":"52","@source":"characters/HustlerGraphics.png"}},{"@id":"8",image:{"@width":"32","@height":"22","@source":"active/CameraGraphics.png"}},{"@id":"9",image:{"@width":"15","@height":"15","@source":"characters/EnemyLimiterGraphics.png"}},{"@id":"10",image:{"@width":"31","@height":"34","@source":"passive/MoneyBagGraphics.png"}},{"@id":"11",image:{"@width":"63","@height":"50","@source":"characters/DogGraphics.png"}},{"@id":"12",image:{"@width":"60","@height":"55","@source":"characters/Prisoner2Graphics.png"}},{"@id":"13",image:{"@width":"60","@height":"56","@source":"characters/PrisonerGraphics.png"}}]},{"@firstgid":"31","@name":"passive","@tilewidth":"210","@tileheight":"50",tile:[{"@id":"0",image:{"@width":"50","@height":"50","@source":"passive/BigBoxGraphics.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"passive/BoxGraphics.png"}},{"@id":"2",image:{"@width":"37","@height":"35","@source":"passive/ToiletGraphics.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"passive/MonitorGraphics.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"passive/BasketBallGraphics.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"passive/StoolGraphics.png"}},{"@id":"6",image:{"@width":"150","@height":"20","@source":"passive/PlankGraphics.png"}},{"@id":"7",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"8",image:{"@width":"210","@height":"20","@source":"passive/BigPlankGraphics.png"}},{"@id":"9",image:{"@width":"100","@height":"20","@source":"passive/Plank5Graphics.png"}},{"@id":"10",image:{"@width":"150","@height":"20","@source":"passive/Plank2Graphics.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"passive/MirrorGraphics.png"}}]},{"@firstgid":"43","@name":"decor","@tilewidth":"232","@tileheight":"136",tile:[{"@id":"0",image:{"@width":"232","@height":"79","@source":"decor/LevelTextGraphics.png"}},{"@id":"1",image:{"@width":"54","@height":"20","@source":"decor/Decor1Graphics.png"}},{"@id":"2",image:{"@width":"54","@height":"20","@source":"decor/Decor2Graphics.png"}},{"@id":"3",image:{"@width":"33","@height":"27","@source":"decor/Decor3Graphics.png"}},{"@id":"4",image:{"@width":"34","@height":"25","@source":"decor/Decor4Graphics.png"}},{"@id":"5",image:{"@width":"22","@height":"31","@source":"decor/Decor5Graphics.png"}},{"@id":"6",image:{"@width":"126","@height":"59","@source":"decor/Decor6Graphics.png"}},{"@id":"7",image:{"@width":"25","@height":"21","@source":"decor/Decor8Graphics.png"}},{"@id":"8",image:{"@width":"18","@height":"22","@source":"decor/Decor9Graphics.png"}},{"@id":"9",image:{"@width":"35","@height":"58","@source":"decor/Decor10Graphics.png"}},{"@id":"10",image:{"@width":"19","@height":"66","@source":"decor/Decor11Graphics.png"}},{"@id":"11",image:{"@width":"23","@height":"33","@source":"decor/Decor12Graphics.png"}},{"@id":"12",image:{"@width":"38","@height":"26","@source":"decor/Decor13Graphics.png"}},{"@id":"13",image:{"@width":"43","@height":"78","@source":"decor/Decor14Graphics.png"}},{"@id":"14",image:{"@width":"60","@height":"86","@source":"decor/Decor15Graphics.png"}},{"@id":"15",image:{"@width":"41","@height":"69","@source":"decor/Decor16Graphics.png"}},{"@id":"16",image:{"@width":"55","@height":"58","@source":"decor/Decor17Graphics.png"}},{"@id":"17",image:{"@width":"57","@height":"54","@source":"decor/Decor18Graphics.png"}},{"@id":"18",image:{"@width":"18","@height":"45","@source":"decor/Decor19Graphics.png"}},{"@id":"19",image:{"@width":"41","@height":"49","@source":"decor/Decor20Graphics.png"}},{"@id":"20",image:{"@width":"51","@height":"38","@source":"decor/Decor21Graphics.png"}},{"@id":"21",image:{"@width":"54","@height":"54","@source":"decor/Decor22Graphics.png"}},{"@id":"22",image:{"@width":"63","@height":"136","@source":"decor/Decor23Graphics.png"}},{"@id":"23",image:{"@width":"21","@height":"39","@source":"decor/Decor24Graphics.png"}},{"@id":"24",image:{"@width":"104","@height":"50","@source":"decor/Decor25Graphics.png"}},{"@id":"25",image:{"@width":"104","@height":"46","@source":"decor/Decor26Graphics.png"}},{"@id":"26",image:{"@width":"86","@height":"38","@source":"decor/Decor27Graphics.png"}},{"@id":"27",image:{"@width":"63","@height":"55","@source":"decor/Decor28Graphics.png"}},{"@id":"28",image:{"@width":"13","@height":"23","@source":"decor/Decor29Graphics.png"}},{"@id":"29",image:{"@width":"28","@height":"40","@source":"decor/Decor30Graphics.png"}},{"@id":"30",image:{"@width":"69","@height":"30","@source":"decor/Decor31Graphics.png"}},{"@id":"31",image:{"@width":"33","@height":"29","@source":"decor/Decor32Graphics.png"}},{"@id":"32",image:{"@width":"42","@height":"42","@source":"decor/Decor33Graphics.png"}},{"@id":"33",image:{"@width":"60","@height":"66","@source":"decor/Decor34Graphics.png"}},{"@id":"34",image:{"@width":"46","@height":"65","@source":"decor/Decor35Graphics.png"}},{"@id":"35",image:{"@width":"71","@height":"55","@source":"decor/Decor36Graphics.png"}},{"@id":"36",image:{"@width":"35","@height":"55","@source":"decor/Decor37Graphics.png"}},{"@id":"37",image:{"@width":"28","@height":"29","@source":"decor/Decor38Graphics.png"}},{"@id":"38",image:{"@width":"38","@height":"37","@source":"decor/Decor39Graphics.png"}},{"@id":"39",image:{"@width":"103","@height":"50","@source":"decor/Decor40Graphics.png"}},{"@id":"40",image:{"@width":"56","@height":"55","@source":"decor/Decor41Graphics.png"}},{"@id":"41",image:{"@width":"71","@height":"50","@source":"decor/Decor42Graphics.png"}},{"@id":"42",image:{"@width":"200","@height":"44","@source":"decor/TxtGraphics.png"}}]}],imagelayer:{"@name":"background","@x":"1",image:{"@source":"bg/Background1Graphics.png"}},objectgroup:[{"@name":"decorations"},{"@name":"tiles",object:[{"@gid":"12","@x":"0","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"455","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"420","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"350","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"385","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"140","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"245","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"210","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"175","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"630","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"35","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"105","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"595","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"70","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"665","@y":"525","@width":"35","@height":"35"},{"@gid":"12","@x":"245","@y":"210","@width":"35","@height":"35"},{"@gid":"12","@x":"490","@y":"175","@width":"35","@height":"35"},{"@gid":"12","@x":"0","@y":"385","@width":"35","@height":"35"},{"@gid":"12","@x":"665","@y":"210","@width":"35","@height":"35"},{"@gid":"12","@x":"0","@y":"245","@width":"35","@height":"35"},{"@gid":"9","@x":"560","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"525","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"490","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"315","@y":"525","@width":"35","@height":"35"},{"@gid":"9","@x":"280","@y":"525","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"490","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"455","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"420","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"385","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"350","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"315","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"280","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"245","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"175","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"140","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"105","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"70","@width":"35","@height":"35"},{"@gid":"11","@x":"665","@y":"35","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"490","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"455","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"420","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"350","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"315","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"280","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"210","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"175","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"140","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"105","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"70","@width":"35","@height":"35"},{"@gid":"13","@x":"0","@y":"35","@width":"35","@height":"35"},{"@gid":"4","@x":"35","@y":"245","@width":"35","@height":"35"},{"@gid":"4","@x":"560","@y":"315","@width":"35","@height":"35"},{"@gid":"4","@x":"525","@y":"455","@width":"35","@height":"35"},{"@gid":"2","@x":"455","@y":"455","@width":"35","@height":"35"},{"@gid":"2","@x":"245","@y":"455","@width":"35","@height":"35"},{"@gid":"10","@x":"525","@y":"175","@width":"35","@height":"35"},{"@gid":"10","@x":"280","@y":"175","@width":"35","@height":"35"},{"@gid":"10","@x":"140","@y":"140","@width":"35","@height":"35"},{"@gid":"8","@x":"455","@y":"175","@width":"35","@height":"35"},{"@gid":"8","@x":"105","@y":"140","@width":"35","@height":"35"},{"@gid":"14","@x":"105","@y":"175","@width":"35","@height":"35"},{"@gid":"16","@x":"175","@y":"385","@width":"35","@height":"35"},{"@gid":"16","@x":"280","@y":"455","@width":"35","@height":"35"},{"@gid":"16","@x":"420","@y":"350","@width":"35","@height":"35"},{"@gid":"5","@x":"280","@y":"420","@width":"35","@height":"35"},{"@gid":"5","@x":"420","@y":"280","@width":"35","@height":"35"},{"@gid":"5","@x":"490","@y":"140","@width":"35","@height":"35"},{"@gid":"1","@x":"560","@y":"385","@width":"35","@height":"35"},{"@gid":"15","@x":"490","@y":"455","@width":"35","@height":"35"},{"@gid":"6","@x":"490","@y":"420","@width":"35","@height":"35"},{"@gid":"6","@x":"490","@y":"385","@width":"35","@height":"35"},{"@gid":"6","@x":"490","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"525","@y":"315","@width":"35","@height":"35"},{"@gid":"3","@x":"455","@y":"315","@width":"35","@height":"35"},{"@gid":"9","@x":"490","@y":"315","@width":"35","@height":"35"},{"@gid":"8","@x":"245","@y":"175","@width":"35","@height":"35"},{"@gid":"3","@x":"140","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"105","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"70","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"35","@y":"385","@width":"35","@height":"35"},{"@gid":"3","@x":"385","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"350","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"315","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"280","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"245","@y":"350","@width":"35","@height":"35"},{"@gid":"3","@x":"210","@y":"350","@width":"35","@height":"35"},{"@gid":"8","@x":"175","@y":"350","@width":"35","@height":"35"},{"@gid":"11","@x":"420","@y":"315","@width":"35","@height":"35"},{"@gid":"13","@x":"140","@y":"175","@width":"35","@height":"35"},{"@gid":"14","@x":"140","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"210","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"175","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"420","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"385","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"350","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"315","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"560","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"595","@y":"210","@width":"35","@height":"35"},{"@gid":"3","@x":"630","@y":"210","@width":"35","@height":"35"},{"@gid":"15","@x":"455","@y":"210","@width":"35","@height":"35"},{"@gid":"15","@x":"490","@y":"210","@width":"35","@height":"35"},{"@gid":"15","@x":"525","@y":"210","@width":"35","@height":"35"},{"@gid":"7","@x":"245","@y":"245","@width":"35","@height":"35"},{"@gid":"15","@x":"280","@y":"210","@width":"35","@height":"35"}]},{"@name":"active",object:[{"@gid":"27","@x":"525","@y":"140","@width":"31","@height":"34"},{"@gid":"27","@x":"350","@y":"385","@width":"31","@height":"34"},{"@type":"2","@gid":"17","@x":"493","@y":"281.5","@width":"24","@height":"11"},{"@type":"5","@gid":"19","@x":"595","@y":"370","@width":"20","@height":"70","@rotation":"-90"},{"@gid":"27","@x":"280","@y":"385","@width":"31","@height":"34"},{"@gid":"27","@x":"315","@y":"420","@width":"31","@height":"34"},{"@gid":"27","@x":"490","@y":"105","@width":"31","@height":"34"},{"@gid":"27","@x":"420","@y":"455","@width":"31","@height":"34"},{"@gid":"27","@x":"420","@y":"105","@width":"31","@height":"34"},{"@gid":"27","@x":"315","@y":"70","@width":"31","@height":"34"},{"@gid":"27","@x":"350","@y":"105","@width":"31","@height":"34"},{"@gid":"27","@x":"420","@y":"175","@width":"31","@height":"34"},{"@gid":"27","@x":"210","@y":"105","@width":"31","@height":"34"},{"@gid":"27","@x":"210","@y":"245","@width":"31","@height":"34"},{"@gid":"27","@x":"455","@y":"140","@width":"31","@height":"34"},{"@gid":"27","@x":"350","@y":"175","@width":"31","@height":"34"},{"@gid":"27","@x":"455","@y":"70","@width":"31","@height":"34"},{"@gid":"27","@x":"35","@y":"140","@width":"31","@height":"34"},{"@gid":"27","@x":"35","@y":"350","@width":"31","@height":"34"},{"@gid":"27","@x":"140","@y":"105","@width":"31","@height":"34"},{"@gid":"27","@x":"245","@y":"420","@width":"31","@height":"34"},{"@gid":"27","@x":"175","@y":"420","@width":"31","@height":"34"},{"@gid":"27","@x":"140","@y":"245","@width":"31","@height":"34"},{"@gid":"27","@x":"70","@y":"175","@width":"31","@height":"34"},{"@gid":"27","@x":"175","@y":"280","@width":"31","@height":"34"},{"@gid":"27","@x":"420","@y":"245","@width":"31","@height":"34"},{"@gid":"27","@x":"280","@y":"105","@width":"31","@height":"34"},{"@gid":"27","@x":"70","@y":"245","@width":"31","@height":"34"},{"@gid":"27","@x":"595","@y":"70","@width":"31","@height":"34"},{"@gid":"27","@x":"315","@y":"140","@width":"31","@height":"34"},{"@gid":"27","@x":"105","@y":"350","@width":"31","@height":"34"},{"@gid":"27","@x":"105","@y":"280","@width":"31","@height":"34"},{"@gid":"27","@x":"595","@y":"350","@width":"31","@height":"34"},{"@gid":"27","@x":"525","@y":"70","@width":"31","@height":"34"},{"@gid":"27","@x":"455","@y":"350","@width":"31","@height":"34"},{"@gid":"27","@x":"490","@y":"245","@width":"31","@height":"34"},{"@gid":"27","@x":"630","@y":"245","@width":"31","@height":"34"},{"@gid":"27","@x":"630","@y":"455","@width":"31","@height":"34"},{"@gid":"27","@x":"455","@y":"490","@width":"31","@height":"34"},{"@gid":"27","@x":"385","@y":"280","@width":"31","@height":"34"},{"@gid":"27","@x":"70","@y":"105","@width":"31","@height":"34"},{"@gid":"27","@x":"385","@y":"420","@width":"31","@height":"34"},{"@gid":"27","@x":"35","@y":"280","@width":"31","@height":"34"},{"@gid":"27","@x":"385","@y":"490","@width":"31","@height":"34"},{"@gid":"27","@x":"245","@y":"140","@width":"31","@height":"34"},{"@gid":"27","@x":"560","@y":"105","@width":"31","@height":"34"},{"@gid":"27","@x":"35","@y":"210","@width":"31","@height":"34"},{"@gid":"27","@x":"525","@y":"280","@width":"31","@height":"34"},{"@gid":"27","@x":"70","@y":"315","@width":"31","@height":"34"},{"@gid":"27","@x":"315","@y":"490","@width":"31","@height":"34"},{"@gid":"27","@x":"560","@y":"245","@width":"31","@height":"34"},{"@gid":"27","@x":"455","@y":"280","@width":"31","@height":"34"},{"@gid":"27","@x":"560","@y":"455","@width":"31","@height":"34"},{"@gid":"27","@x":"420","@y":"385","@width":"31","@height":"34"},{"@gid":"27","@x":"175","@y":"140","@width":"31","@height":"34"},{"@gid":"27","@x":"350","@y":"455","@width":"31","@height":"34"},{"@gid":"27","@x":"525","@y":"350","@width":"31","@height":"34"},{"@gid":"27","@x":"280","@y":"280","@width":"31","@height":"34"},{"@gid":"27","@x":"525","@y":"490","@width":"31","@height":"34"},{"@gid":"27","@x":"210","@y":"385","@width":"31","@height":"34"},{"@gid":"27","@x":"595","@y":"280","@width":"31","@height":"34"},{"@gid":"27","@x":"175","@y":"70","@width":"31","@height":"34"},{"@gid":"27","@x":"455","@y":"420","@width":"31","@height":"34"},{"@gid":"27","@x":"210","@y":"455","@width":"31","@height":"34"},{"@gid":"27","@x":"105","@y":"490","@width":"31","@height":"34"},{"@gid":"27","@x":"630","@y":"315","@width":"31","@height":"34"},{"@gid":"27","@x":"630","@y":"105","@width":"31","@height":"34"},{"@gid":"27","@x":"595","@y":"490","@width":"31","@height":"34"},{"@gid":"27","@x":"245","@y":"490","@width":"31","@height":"34"},{"@gid":"27","@x":"595","@y":"420","@width":"31","@height":"34"},{"@gid":"27","@x":"385","@y":"70","@width":"31","@height":"34"},{"@gid":"27","@x":"105","@y":"420","@width":"31","@height":"34"},{"@gid":"27","@x":"525","@y":"420","@width":"31","@height":"34"},{"@gid":"27","@x":"140","@y":"455","@width":"31","@height":"34"},{"@gid":"27","@x":"210","@y":"175","@width":"31","@height":"34"},{"@gid":"27","@x":"245","@y":"70","@width":"31","@height":"34"},{"@gid":"27","@x":"175","@y":"490","@width":"31","@height":"34"},{"@gid":"27","@x":"385","@y":"140","@width":"31","@height":"34"},{"@gid":"27","@x":"210","@y":"315","@width":"31","@height":"34"},{"@gid":"27","@x":"630","@y":"385","@width":"31","@height":"34"},{"@gid":"27","@x":"35","@y":"420","@width":"31","@height":"34"},{"@gid":"27","@x":"140","@y":"315","@width":"31","@height":"34"},{"@type":"2","@gid":"19","@x":"251","@y":"315","@width":"20","@height":"70"},{"@type":"5","@gid":"17","@x":"283","@y":"141.5","@width":"24","@height":"11"},{"@gid":"30","@x":"308","@y":"318","@width":"60","@height":"56",properties:{property:[{"@name":"limitLeft","@value":"25"},{"@name":"limitRight","@value":"50"}]}}]},{"@name":"characters",object:[{"@gid":"24","@x":"44","@y":"491","@width":"44","@height":"52"},{"@gid":"28","@x":"581","@y":"174","@width":"63","@height":"50"}]},{"@name":"physics",object:[{"@x":"0","@y":"490","@width":"700","@height":"35"},{"@x":"665","@y":"0","@width":"35","@height":"490"},{"@x":"0","@y":"0","@width":"35","@height":"490"},{"@x":"35","@y":"210","@width":"35","@height":"35"},{"@x":"35","@y":"350","@width":"175","@height":"35"},{"@x":"175","@y":"315","@width":"280","@height":"35"},{"@x":"420","@y":"280","@width":"175","@height":"35"},{"@x":"420","@y":"245","@width":"35","@height":"35"},{"@x":"490","@y":"315","@width":"35","@height":"105"},{"@x":"455","@y":"420","@width":"105","@height":"35"},{"@x":"560","@y":"350","@width":"35","@height":"35"},{"@x":"245","@y":"420","@width":"70","@height":"35"},{"@x":"280","@y":"385","@width":"35","@height":"35"},{"@x":"245","@y":"210","@width":"35","@height":"35"},{"@x":"140","@y":"175","@width":"525","@height":"35"},{"@x":"455","@y":"140","@width":"105","@height":"35"},{"@x":"490","@y":"105","@width":"35","@height":"35"},{"@x":"245","@y":"140","@width":"70","@height":"35"},{"@x":"105","@y":"105","@width":"70","@height":"70"}]}]}],e}(),Objects=function(){function e(){}return e.data={frames:[{filename:"BackButton0000",frame:{x:3521,y:1790,w:122,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:.4,y:.1,w:122,h:54},sourceSize:{w:122,h:54}},{filename:"BackButton0001",frame:{x:2302,y:1792,w:122,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:.4,y:.1,w:122,h:54},sourceSize:{w:122,h:54}},{filename:"BackButton0002",frame:{x:589,y:1793,w:122,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:.4,y:.1,w:122,h:54},sourceSize:{w:122,h:54}},{filename:"Background1Graphics0000",frame:{x:2836,y:3,w:702,h:526},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:0,w:702,h:526},sourceSize:{w:702,h:526}},{filename:"BasketBallGraphics0000",frame:{x:3216,y:1323,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.6,y:-17.6,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"BigBoxGraphics0000",frame:{x:1461,y:1743,w:50,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-25,w:50,h:50},sourceSize:{w:50,h:50}},{filename:"BigPlankGraphics0000",frame:{x:3,y:2489,w:210,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-105,y:-10,w:210,h:20},sourceSize:{w:210,h:20}},{filename:"BoxGraphics0000",frame:{x:3216,y:1361,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.5,y:-17.5,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"BulletFxGraphics0000",frame:{x:2818,y:584,w:15,h:9},rotated:!1,trimmed:!0,spriteSourceSize:{x:-7.1,y:-4.8,w:57,h:53},sourceSize:{w:57,h:53}},{filename:"BulletFxGraphics0001",frame:{x:1022,y:985,w:41,h:37},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22.1,y:-19.8,w:57,h:53},sourceSize:{w:57,h:53}},{filename:"BulletFxGraphics0002",frame:{x:838,y:2196,w:54,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.1,y:-21.8,w:57,h:53},sourceSize:{w:57,h:53}},{filename:"BulletFxGraphics0003",frame:{x:239,y:2689,w:54,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27.1,y:-26.8,w:57,h:53},sourceSize:{w:57,h:53}},{filename:"BulletFxGraphics0004",frame:{x:1363,y:2669,w:56,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.1,y:-27.8,w:57,h:53},sourceSize:{w:57,h:53}},{filename:"BulletFxGraphics0005",frame:{x:3,y:3,w:0,h:0},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:-.8,w:57,h:53},sourceSize:{w:57,h:53}},{filename:"BulletGraphics0000",frame:{x:4079,y:333,w:11,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-5.4,y:-3.8,w:11,h:7},sourceSize:{w:11,h:7}},{filename:"BurgerAchievementGraphics0000",frame:{x:1423,y:3,w:705,h:528},rotated:!1,trimmed:!0,spriteSourceSize:{x:-2,y:-1,w:705,h:528},sourceSize:{w:705,h:528}},{filename:"BurgerGraphics0000",frame:{x:3126,y:1267,w:30,h:34},rotated:!1,trimmed:!0,spriteSourceSize:{x:-14.9,y:-20.7,w:30,h:34},sourceSize:{w:30,h:34}},{filename:"BurgerIndicator0000",frame:{x:2008,y:2061,w:114,h:42},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.8,y:-3.6,w:114,h:42},sourceSize:{w:114,h:42}},{filename:"BurgerSmallGraphics0000",frame:{x:2734,y:1471,w:27,h:29},rotated:!1,trimmed:!0,spriteSourceSize:{x:-14.2,y:-17.5,w:27,h:29},sourceSize:{w:27,h:29}},{filename:"CameraGraphics0000",frame:{x:425,y:1538,w:26,h:24},rotated:!1,trimmed:!0,spriteSourceSize:{x:-6,y:-10,w:26,h:24},sourceSize:{w:26,h:24}},{filename:"CameraGun0000",frame:{x:851,y:1060,w:24,h:18},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22,y:-10.9,w:68,h:23},sourceSize:{w:68,h:23}},{filename:"CameraGun0001",frame:{x:422,y:1074,w:68,h:23},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22,y:-11.9,w:68,h:23},sourceSize:{w:68,h:23}},{filename:"CreditsButton0000",frame:{x:2396,y:2605,w:106,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:.2,w:106,h:33},sourceSize:{w:106,h:33}},{filename:"CreditsButton0001",frame:{x:3222,y:2607,w:106,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:.2,w:106,h:33},sourceSize:{w:106,h:33}},{filename:"CreditsButton0002",frame:{x:3222,y:2607,w:106,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:.2,w:106,h:33},sourceSize:{w:106,h:33}},{filename:"Decor10Graphics0000",frame:{x:2091,y:534,w:36,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-57.8,w:36,h:57},sourceSize:{w:36,h:57}},{filename:"Decor11Graphics0000",frame:{x:3811,y:949,w:20,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-66.3,w:20,h:66},sourceSize:{w:20,h:66}},{filename:"Decor12Graphics0000",frame:{x:2734,y:1435,w:24,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-33,w:24,h:33},sourceSize:{w:24,h:33}},{filename:"Decor13Graphics0000",frame:{x:4055,y:1286,w:38,h:25},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-25.8,w:38,h:25},sourceSize:{w:38,h:25}},{filename:"Decor14Graphics0000",frame:{x:4041,y:804,w:43,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-77.5,w:43,h:77},sourceSize:{w:43,h:77}},{filename:"Decor15Graphics0000",frame:{x:1635,y:796,w:60,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-86.4,w:60,h:86},sourceSize:{w:60,h:86}},{filename:"Decor16Graphics0000",frame:{x:2086,y:659,w:42,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-68.9,w:42,h:68},sourceSize:{w:42,h:68}},{filename:"Decor17Graphics0000",frame:{x:3405,y:2644,w:56,h:58},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-58.4,w:56,h:58},sourceSize:{w:56,h:58}},{filename:"Decor18Graphics0000",frame:{x:342,y:1897,w:58,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-53.8,w:58,h:53},sourceSize:{w:58,h:53}},{filename:"Decor19Graphics0000",frame:{x:4071,y:44,w:18,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-44.5,w:18,h:44},sourceSize:{w:18,h:44}},{filename:"Decor1Graphics0000",frame:{x:1635,y:885,w:54,h:19},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-19.9,w:54,h:19},sourceSize:{w:54,h:19}},{filename:"Decor20Graphics0000",frame:{x:2086,y:730,w:42,h:49},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-49.1,w:42,h:49},sourceSize:{w:42,h:49}},{filename:"Decor21Graphics0000",frame:{x:1580,y:979,w:52,h:38},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-38.2,w:52,h:38},sourceSize:{w:52,h:38}},{filename:"Decor22Graphics0000",frame:{x:1305,y:2669,w:55,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-54.4,w:55,h:54},sourceSize:{w:55,h:54}},{filename:"Decor23Graphics0000",frame:{x:2499,y:1407,w:63,h:135},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-135.5,w:63,h:135},sourceSize:{w:63,h:135}},{filename:"Decor24Graphics0000",frame:{x:4071,y:3,w:22,h:38},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-38.7,w:22,h:38},sourceSize:{w:22,h:38}},{filename:"Decor25Graphics0000",frame:{x:950,y:1949,w:105,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-50.1,w:105,h:51},sourceSize:{w:105,h:51}},{filename:"Decor26Graphics0000",frame:{x:3158,y:2056,w:105,h:46},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.2,y:-46.4,w:105,h:46},sourceSize:{w:105,h:46}},{filename:"Decor27Graphics0000",frame:{x:1164,y:2654,w:86,h:38},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:-38.3,w:86,h:38},sourceSize:{w:86,h:38}},{filename:"Decor28Graphics0000",frame:{x:159,y:2557,w:64,h:55},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-55.1,w:64,h:55},sourceSize:{w:64,h:55}},{filename:"Decor29Graphics0000",frame:{x:4079,y:290,w:14,h:23},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-23.3,w:14,h:23},sourceSize:{w:14,h:23}},{filename:"Decor2Graphics0000",frame:{x:646,y:926,w:54,h:19},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-19.8,w:54,h:19},sourceSize:{w:54,h:19}},{filename:"Decor30Graphics0000",frame:{x:1266,y:1229,w:28,h:40},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-40.3,w:28,h:40},sourceSize:{w:28,h:40}},{filename:"Decor31Graphics0000",frame:{x:985,y:1843,w:69,h:30},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-30.3,w:69,h:30},sourceSize:{w:69,h:30}},{filename:"Decor32Graphics0000",frame:{x:4056,y:364,w:33,h:28},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-28.6,w:33,h:28},sourceSize:{w:33,h:28}},{filename:"Decor33Graphics0000",frame:{x:3411,y:1426,w:42,h:41},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-41.6,w:42,h:41},sourceSize:{w:42,h:41}},{filename:"Decor34Graphics0000",frame:{x:2055,y:1337,w:61,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-65.5,w:61,h:65},sourceSize:{w:61,h:65}},{filename:"Decor35Graphics0000",frame:{x:3458,y:1569,w:47,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-64.8,w:47,h:64},sourceSize:{w:47,h:64}},{filename:"Decor36Graphics0000",frame:{x:1202,y:2532,w:72,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-54.8,w:72,h:54},sourceSize:{w:72,h:54}},{filename:"Decor37Graphics0000",frame:{x:2091,y:594,w:36,h:55},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-55.3,w:36,h:55},sourceSize:{w:36,h:55}},{filename:"Decor38Graphics0000",frame:{x:2818,y:1516,w:29,h:28},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-28.7,w:29,h:28},sourceSize:{w:29,h:28}},{filename:"Decor39Graphics0000",frame:{x:2841,y:1130,w:38,h:37},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-37.2,w:38,h:37},sourceSize:{w:38,h:37}},{filename:"Decor3Graphics0000",frame:{x:3952,y:1076,w:34,h:26},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-26.9,w:34,h:26},sourceSize:{w:34,h:26}},{filename:"Decor40Graphics0000",frame:{x:2536,y:1999,w:103,h:49},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-49.6,w:103,h:49},sourceSize:{w:103,h:49}},{filename:"Decor41Graphics0000",frame:{x:2995,y:2228,w:56,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-54.7,w:56,h:54},sourceSize:{w:56,h:54}},{filename:"Decor42Graphics0000",frame:{x:1646,y:1024,w:72,h:49},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-49.6,w:72,h:49},sourceSize:{w:72,h:49}},{filename:"Decor4Graphics0000",frame:{x:2568,y:1077,w:34,h:25},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-25.5,w:34,h:25},sourceSize:{w:34,h:25}},{filename:"Decor5Graphics0000",frame:{x:4067,y:645,w:23,h:31},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-31.2,w:23,h:31},sourceSize:{w:23,h:31}},{filename:"Decor6Graphics0000",frame:{x:3646,y:1698,w:126,h:58},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-58.6,w:126,h:58},sourceSize:{w:126,h:58}},{filename:"Decor7Graphics0000",frame:{x:2470,y:2667,w:111,h:27},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.8,y:-27.1,w:111,h:27},sourceSize:{w:111,h:27}},{filename:"Decor8Graphics0000",frame:{x:1680,y:1284,w:25,h:21},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-21.4,w:25,h:21},sourceSize:{w:25,h:21}},{filename:"Decor9Graphics0000",frame:{x:400,y:1167,w:19,h:21},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-21.8,w:19,h:21},sourceSize:{w:19,h:21}},{filename:"DogGraphics0000",frame:{x:3583,y:1109,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0001",frame:{x:3499,y:1214,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0002",frame:{x:3499,y:1214,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0003",frame:{x:169,y:2433,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0004",frame:{x:3029,y:2438,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0005",frame:{x:252,y:2444,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0006",frame:{x:969,y:2445,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0007",frame:{x:2183,y:2445,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0008",frame:{x:2266,y:2445,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0009",frame:{x:2349,y:2448,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0010",frame:{x:1901,y:2454,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0011",frame:{x:1984,y:2454,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0012",frame:{x:497,y:2455,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0013",frame:{x:724,y:2456,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0014",frame:{x:807,y:2456,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0015",frame:{x:3458,y:2466,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0016",frame:{x:3112,y:2467,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0017",frame:{x:3195,y:2467,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0018",frame:{x:580,y:2469,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0019",frame:{x:3788,y:2469,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0020",frame:{x:3871,y:2469,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0021",frame:{x:3954,y:2469,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0022",frame:{x:1640,y:2471,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0023",frame:{x:1723,y:2471,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0024",frame:{x:1052,y:2475,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0025",frame:{x:1135,y:2476,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0026",frame:{x:1218,y:2476,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0027",frame:{x:1301,y:2476,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0028",frame:{x:3541,y:2476,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0029",frame:{x:3624,y:2476,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0030",frame:{x:2067,y:2478,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0031",frame:{x:2602,y:2478,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0032",frame:{x:1384,y:2480,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0033",frame:{x:1467,y:2480,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0034",frame:{x:2432,y:2481,w:80,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-51,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0035",frame:{x:3788,y:2412,w:80,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0036",frame:{x:3871,y:2412,w:80,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0037",frame:{x:3954,y:2412,w:80,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0038",frame:{x:1652,y:2414,w:80,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0039",frame:{x:1735,y:2414,w:80,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0040",frame:{x:1153,y:2419,w:80,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0041",frame:{x:1236,y:2419,w:80,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0042",frame:{x:3545,y:2419,w:80,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0043",frame:{x:2100,y:2421,w:80,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0044",frame:{x:1391,y:2423,w:80,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0045",frame:{x:1474,y:2423,w:80,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0046",frame:{x:2436,y:2424,w:80,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0047",frame:{x:2519,y:2424,w:80,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0048",frame:{x:3,y:2428,w:80,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0049",frame:{x:86,y:2428,w:80,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0050",frame:{x:414,y:2428,w:80,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0051",frame:{x:1818,y:2428,w:80,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0052",frame:{x:1557,y:2430,w:80,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0053",frame:{x:2760,y:2430,w:80,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0054",frame:{x:1842,y:1831,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0055",frame:{x:2124,y:1842,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0056",frame:{x:894,y:1843,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0057",frame:{x:3521,y:1847,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0058",frame:{x:3612,y:1847,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0059",frame:{x:2301,y:1849,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0060",frame:{x:589,y:1850,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0061",frame:{x:3398,y:1851,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0062",frame:{x:2601,y:1858,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0063",frame:{x:1744,y:1861,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0064",frame:{x:3823,y:1868,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0065",frame:{x:1264,y:1872,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0066",frame:{x:1933,y:1872,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0067",frame:{x:3038,y:1872,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0068",frame:{x:1152,y:1875,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0069",frame:{x:985,y:1877,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0070",frame:{x:1638,y:1877,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0071",frame:{x:3914,y:1877,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0072",frame:{x:4005,y:1877,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0073",frame:{x:1457,y:1879,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0074",frame:{x:3703,y:1879,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0075",frame:{x:163,y:1880,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0076",frame:{x:2392,y:1881,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0077",frame:{x:413,y:1882,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0078",frame:{x:2821,y:1884,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0079",frame:{x:1355,y:1886,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0080",frame:{x:680,y:1888,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0081",frame:{x:771,y:1888,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0082",frame:{x:1842,y:1831,w:88,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-67,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0083",frame:{x:177,y:2166,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0084",frame:{x:3653,y:2605,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0085",frame:{x:2881,y:2607,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0086",frame:{x:3331,y:2607,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0087",frame:{x:344,y:2610,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0088",frame:{x:1759,y:2610,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0089",frame:{x:1495,y:2612,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0090",frame:{x:2624,y:2612,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0091",frame:{x:2698,y:2612,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0092",frame:{x:2772,y:2614,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0093",frame:{x:2955,y:2614,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0094",frame:{x:121,y:2615,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0095",frame:{x:195,y:2622,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0096",frame:{x:942,y:2623,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0097",frame:{x:2081,y:2623,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0098",frame:{x:2155,y:2623,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0099",frame:{x:2229,y:2626,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0100",frame:{x:1833,y:2632,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0101",frame:{x:1907,y:2632,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0102",frame:{x:418,y:2633,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0103",frame:{x:3,y:2634,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0104",frame:{x:610,y:2634,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0105",frame:{x:684,y:2634,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0106",frame:{x:269,y:2639,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0107",frame:{x:2396,y:2640,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0108",frame:{x:3222,y:2642,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0109",frame:{x:3029,y:2645,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0110",frame:{x:3103,y:2645,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0111",frame:{x:758,y:2646,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0112",frame:{x:492,y:2647,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0113",frame:{x:3727,y:2647,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0114",frame:{x:3801,y:2647,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0115",frame:{x:3875,y:2647,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0116",frame:{x:1569,y:2649,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0117",frame:{x:1643,y:2649,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0118",frame:{x:3949,y:2653,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0119",frame:{x:2881,y:2607,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0120",frame:{x:1016,y:2654,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0121",frame:{x:1090,y:2654,w:71,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-45,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0122",frame:{x:1446,y:1951,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0123",frame:{x:3663,y:1951,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0124",frame:{x:91,y:1952,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0125",frame:{x:169,y:1952,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0126",frame:{x:2380,y:1953,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0127",frame:{x:342,y:1954,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0128",frame:{x:420,y:1954,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0129",frame:{x:2780,y:1956,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0130",frame:{x:1322,y:1958,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0131",frame:{x:665,y:1960,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0132",frame:{x:743,y:1960,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0133",frame:{x:3086,y:1962,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0134",frame:{x:2458,y:1963,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0135",frame:{x:498,y:1965,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0136",frame:{x:2858,y:1965,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0137",frame:{x:2659,y:1969,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0138",frame:{x:3,y:1971,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0139",frame:{x:247,y:1971,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0140",frame:{x:1524,y:1971,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0141",frame:{x:2002,y:1971,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0142",frame:{x:1781,y:1977,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0143",frame:{x:3164,y:1983,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0144",frame:{x:3242,y:1983,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0145",frame:{x:2080,y:1988,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0146",frame:{x:2158,y:1988,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0147",frame:{x:821,y:1989,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0148",frame:{x:1058,y:1990,w:75,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0149",frame:{x:895,y:2136,w:75,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-42,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0150",frame:{x:335,y:2460,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0151",frame:{x:890,y:2467,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0152",frame:{x:3707,y:2480,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0153",frame:{x:2922,y:2482,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0154",frame:{x:3278,y:2482,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0155",frame:{x:3356,y:2482,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0156",frame:{x:413,y:2485,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0157",frame:{x:1806,y:2485,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0158",frame:{x:1550,y:2487,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0159",frame:{x:2685,y:2487,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0160",frame:{x:2763,y:2487,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0161",frame:{x:2841,y:2489,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0162",frame:{x:3e3,y:2494,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0163",frame:{x:216,y:2500,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0164",frame:{x:968,y:2501,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0165",frame:{x:2150,y:2501,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0166",frame:{x:2228,y:2501,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0167",frame:{x:2306,y:2504,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0168",frame:{x:1884,y:2510,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0169",frame:{x:1962,y:2510,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0170",frame:{x:491,y:2511,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0171",frame:{x:3,y:2512,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0172",frame:{x:81,y:2512,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0173",frame:{x:663,y:2512,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0174",frame:{x:741,y:2512,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0175",frame:{x:294,y:2517,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0176",frame:{x:968,y:2501,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0177",frame:{x:2150,y:2501,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0178",frame:{x:2228,y:2501,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0179",frame:{x:2306,y:2504,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0180",frame:{x:1884,y:2510,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0181",frame:{x:1962,y:2510,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0182",frame:{x:491,y:2511,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0183",frame:{x:3,y:2512,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0184",frame:{x:81,y:2512,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0185",frame:{x:3434,y:2522,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0186",frame:{x:3078,y:2523,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0187",frame:{x:3156,y:2523,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0188",frame:{x:819,y:2524,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0189",frame:{x:569,y:2525,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0190",frame:{x:3356,y:2482,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0191",frame:{x:3278,y:2482,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0192",frame:{x:3785,y:2525,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0193",frame:{x:3863,y:2525,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0194",frame:{x:3941,y:2525,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0195",frame:{x:1628,y:2527,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0196",frame:{x:1706,y:2527,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0197",frame:{x:1046,y:2531,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0198",frame:{x:1124,y:2532,w:75,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0199",frame:{x:1136,y:2052,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0200",frame:{x:2125,y:2061,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0201",frame:{x:2212,y:2061,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0202",frame:{x:803,y:2062,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0203",frame:{x:1047,y:2063,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0204",frame:{x:547,y:2067,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0205",frame:{x:3266,y:2074,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0206",frame:{x:3353,y:2074,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0207",frame:{x:890,y:2076,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0208",frame:{x:2885,y:2085,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0209",frame:{x:2972,y:2085,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0210",frame:{x:3815,y:2087,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0211",frame:{x:3703,y:2089,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0212",frame:{x:3902,y:2090,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0213",frame:{x:3989,y:2090,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0214",frame:{x:1837,y:2092,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0215",frame:{x:1375,y:2097,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0216",frame:{x:3616,y:2097,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0217",frame:{x:78,y:2098,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0218",frame:{x:2299,y:2099,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0219",frame:{x:316,y:2100,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0220",frame:{x:1554,y:2101,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0221",frame:{x:1641,y:2101,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0222",frame:{x:2716,y:2102,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0223",frame:{x:3440,y:2103,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0224",frame:{x:3527,y:2103,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0225",frame:{x:1223,y:2104,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0226",frame:{x:3158,y:2105,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0227",frame:{x:165,y:2106,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0228",frame:{x:634,y:2106,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0229",frame:{x:634,y:2106,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0230",frame:{x:634,y:2106,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0231",frame:{x:634,y:2106,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0232",frame:{x:634,y:2106,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0233",frame:{x:634,y:2106,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0234",frame:{x:2008,y:2106,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0235",frame:{x:3059,y:2108,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0236",frame:{x:403,y:2111,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0237",frame:{x:1462,y:2111,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0238",frame:{x:1728,y:2111,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0239",frame:{x:1134,y:2112,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0240",frame:{x:2386,y:2112,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0241",frame:{x:2473,y:2112,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0242",frame:{x:2560,y:2115,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0243",frame:{x:2095,y:2121,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0244",frame:{x:2182,y:2121,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0245",frame:{x:2182,y:2121,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0246",frame:{x:2182,y:2121,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0247",frame:{x:2182,y:2121,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0248",frame:{x:2095,y:2121,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0249",frame:{x:2560,y:2115,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0250",frame:{x:721,y:2122,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0251",frame:{x:977,y:2123,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0252",frame:{x:490,y:2127,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0253",frame:{x:3245,y:2134,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0254",frame:{x:3332,y:2134,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0255",frame:{x:808,y:2136,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0256",frame:{x:2803,y:2145,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0257",frame:{x:2803,y:2145,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0258",frame:{x:2890,y:2145,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0259",frame:{x:634,y:2106,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0260",frame:{x:634,y:2106,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0261",frame:{x:634,y:2106,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0262",frame:{x:634,y:2106,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0263",frame:{x:634,y:2106,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0264",frame:{x:2008,y:2106,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0265",frame:{x:3059,y:2108,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0266",frame:{x:403,y:2111,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0267",frame:{x:1462,y:2111,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0268",frame:{x:1728,y:2111,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0269",frame:{x:1134,y:2112,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0270",frame:{x:2386,y:2112,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0271",frame:{x:2473,y:2112,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0272",frame:{x:2560,y:2115,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0273",frame:{x:2095,y:2121,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0274",frame:{x:2182,y:2121,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0275",frame:{x:2182,y:2121,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0276",frame:{x:2182,y:2121,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0277",frame:{x:2182,y:2121,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0278",frame:{x:2095,y:2121,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0279",frame:{x:2560,y:2115,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0280",frame:{x:721,y:2122,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0281",frame:{x:977,y:2123,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0282",frame:{x:490,y:2127,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0283",frame:{x:3245,y:2134,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0284",frame:{x:3332,y:2134,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0285",frame:{x:808,y:2136,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0286",frame:{x:2803,y:2145,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0287",frame:{x:2803,y:2145,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0288",frame:{x:2890,y:2145,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0289",frame:{x:634,y:2106,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0290",frame:{x:634,y:2106,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0291",frame:{x:634,y:2106,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0292",frame:{x:3790,y:2147,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0293",frame:{x:3703,y:2149,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0294",frame:{x:3877,y:2150,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0295",frame:{x:3964,y:2150,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0296",frame:{x:1815,y:2152,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0297",frame:{x:1902,y:2152,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0298",frame:{x:1310,y:2157,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0299",frame:{x:3614,y:2157,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0300",frame:{x:3,y:2158,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0301",frame:{x:2269,y:2159,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0302",frame:{x:252,y:2160,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0303",frame:{x:1549,y:2161,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0304",frame:{x:1636,y:2161,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0305",frame:{x:1136,y:2052,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0306",frame:{x:2647,y:2162,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0307",frame:{x:3419,y:2163,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0308",frame:{x:3506,y:2163,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0309",frame:{x:1221,y:2164,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0310",frame:{x:3146,y:2165,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0311",frame:{x:90,y:2166,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0312",frame:{x:577,y:2166,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0313",frame:{x:1989,y:2166,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0314",frame:{x:2977,y:2168,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0315",frame:{x:3146,y:2165,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0316",frame:{x:339,y:2171,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0317",frame:{x:577,y:2166,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0318",frame:{x:1989,y:2166,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0319",frame:{x:2977,y:2168,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0320",frame:{x:3146,y:2165,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0321",frame:{x:90,y:2166,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0322",frame:{x:577,y:2166,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0323",frame:{x:1989,y:2166,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0324",frame:{x:1397,y:2171,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0325",frame:{x:2647,y:2162,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0326",frame:{x:3419,y:2163,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0327",frame:{x:2647,y:2162,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0328",frame:{x:3419,y:2163,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0329",frame:{x:1723,y:2171,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0330",frame:{x:1064,y:2172,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0331",frame:{x:2356,y:2172,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0332",frame:{x:2443,y:2172,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0333",frame:{x:2530,y:2175,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0334",frame:{x:2076,y:2181,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0335",frame:{x:2163,y:2181,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0336",frame:{x:664,y:2182,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0337",frame:{x:895,y:2183,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0338",frame:{x:426,y:2187,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0339",frame:{x:3233,y:2194,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0340",frame:{x:3320,y:2194,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0341",frame:{x:751,y:2196,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0342",frame:{x:2734,y:2205,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0343",frame:{x:2821,y:2205,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0344",frame:{x:3790,y:2207,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0345",frame:{x:3701,y:2209,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0346",frame:{x:3877,y:2210,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0347",frame:{x:3964,y:2210,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0348",frame:{x:1810,y:2212,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0349",frame:{x:1897,y:2212,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0350",frame:{x:1308,y:2217,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0351",frame:{x:3593,y:2217,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0352",frame:{x:3,y:2218,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0353",frame:{x:2250,y:2219,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0354",frame:{x:177,y:2220,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0355",frame:{x:2647,y:2162,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0356",frame:{x:2647,y:2162,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0357",frame:{x:2647,y:2162,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0358",frame:{x:1484,y:2221,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0359",frame:{x:1484,y:2221,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0360",frame:{x:1484,y:2221,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0361",frame:{x:1484,y:2221,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0362",frame:{x:1484,y:2221,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0363",frame:{x:1484,y:2221,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0364",frame:{x:1484,y:2221,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0365",frame:{x:1571,y:2221,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0366",frame:{x:2617,y:2222,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0367",frame:{x:3407,y:2223,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0368",frame:{x:3494,y:2223,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0369",frame:{x:3494,y:2223,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0370",frame:{x:1151,y:2224,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0371",frame:{x:3064,y:2225,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0372",frame:{x:90,y:2226,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0373",frame:{x:513,y:2226,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0374",frame:{x:1984,y:2226,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0375",frame:{x:2908,y:2228,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0376",frame:{x:264,y:2231,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0377",frame:{x:264,y:2231,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0378",frame:{x:1395,y:2231,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DogGraphics0379",frame:{x:1395,y:2231,w:84,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-52,w:92,h:73},sourceSize:{w:92,h:73}},{filename:"DoorGraphics0000",frame:{x:1172,y:810,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"DoorGraphics0001",frame:{x:2606,y:899,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"DoorGraphics0002",frame:{x:4057,y:918,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"DoorGraphics0003",frame:{x:2568,y:1004,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"DoorGraphics0004",frame:{x:1171,y:1155,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"DoorGraphics0005",frame:{x:4055,y:1213,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"ElectroSplashGraphics0000",frame:{x:923,y:893,w:31,h:22},rotated:!1,trimmed:!0,spriteSourceSize:{x:-16,y:-10.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0001",frame:{x:3162,y:1191,w:42,h:28},rotated:!1,trimmed:!0,spriteSourceSize:{x:-26,y:-10.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0002",frame:{x:4039,y:1379,w:54,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-13.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0003",frame:{x:1064,y:2123,w:59,h:45},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-16.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0004",frame:{x:1588,y:1240,w:51,h:36},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22,y:-22.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0005",frame:{x:4046,y:1178,w:44,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:-8,y:-29.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0006",frame:{x:761,y:1020,w:50,h:37},rotated:!1,trimmed:!0,spriteSourceSize:{x:-11,y:-32.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0007",frame:{x:2841,y:1170,w:36,h:37},rotated:!1,trimmed:!0,spriteSourceSize:{x:-12,y:-32.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0008",frame:{x:3126,y:1225,w:33,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:-18,y:-40.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0009",frame:{x:923,y:846,w:36,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-20,y:-44.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0010",frame:{x:4071,y:91,w:22,h:31},rotated:!1,trimmed:!0,spriteSourceSize:{x:-6,y:-30.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0011",frame:{x:4079,y:316,w:10,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:-19.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0012",frame:{x:4085,y:142,w:5,h:13},rotated:!1,trimmed:!0,spriteSourceSize:{x:-2,y:-18.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0013",frame:{x:3,y:3,w:0,h:0},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:-.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0014",frame:{x:923,y:893,w:31,h:22},rotated:!1,trimmed:!0,spriteSourceSize:{x:-16,y:-10.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"EnemyLimiterGraphics0000",frame:{x:3523,y:532,w:15,h:15},rotated:!1,trimmed:!0,spriteSourceSize:{x:-7.5,y:-7.5,w:15,h:15},sourceSize:{w:15,h:15}},{filename:"ExitGraphics0000",frame:{x:3129,y:1888,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0001",frame:{x:3129,y:1888,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0002",frame:{x:2483,y:1889,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0003",frame:{x:2912,y:1891,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0004",frame:{x:2692,y:1895,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0005",frame:{x:3,y:1897,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0006",frame:{x:254,y:1897,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0007",frame:{x:1548,y:1897,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0008",frame:{x:2024,y:1897,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0009",frame:{x:1835,y:1903,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0010",frame:{x:3217,y:1909,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0011",frame:{x:3305,y:1909,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0012",frame:{x:2112,y:1914,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0013",frame:{x:2200,y:1914,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0014",frame:{x:862,y:1915,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0015",frame:{x:3489,y:1919,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0016",frame:{x:3489,y:1919,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0017",frame:{x:3489,y:1919,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0018",frame:{x:3489,y:1919,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0019",frame:{x:3489,y:1919,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0020",frame:{x:3489,y:1919,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0021",frame:{x:3489,y:1919,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0022",frame:{x:3489,y:1919,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0023",frame:{x:3489,y:1919,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0024",frame:{x:3938,y:920,w:116,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-61,y:-37.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0025",frame:{x:427,y:926,w:113,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-58,y:-39.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0026",frame:{x:215,y:909,w:111,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56,y:-42.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0027",frame:{x:646,y:954,w:112,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0028",frame:{x:192,y:1106,w:113,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-53,y:-47.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0029",frame:{x:1319,y:1621,w:100,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-37.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0030",frame:{x:3257,y:1322,w:106,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-54,y:-43.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0031",frame:{x:314,y:1074,w:105,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-53,y:-48.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0032",frame:{x:3546,y:1386,w:101,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-43.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0033",frame:{x:3737,y:1395,w:95,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-43.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0034",frame:{x:186,y:1393,w:92,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-42.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0035",frame:{x:2552,y:1108,w:98,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-42.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0036",frame:{x:497,y:1207,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0037",frame:{x:1742,y:1208,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0038",frame:{x:1837,y:1208,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0039",frame:{x:543,y:926,w:100,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0040",frame:{x:95,y:1210,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0041",frame:{x:2291,y:1210,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0042",frame:{x:3865,y:1213,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0043",frame:{x:3960,y:1213,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0044",frame:{x:2386,y:1214,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0045",frame:{x:2841,y:1214,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0046",frame:{x:2121,y:1216,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0047",frame:{x:1303,y:1218,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0048",frame:{x:592,y:1220,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0049",frame:{x:592,y:1220,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0050",frame:{x:592,y:1220,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0051",frame:{x:592,y:1220,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0052",frame:{x:592,y:1220,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0053",frame:{x:592,y:1220,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0054",frame:{x:592,y:1220,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0055",frame:{x:687,y:1220,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0056",frame:{x:3309,y:1221,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0057",frame:{x:3404,y:1221,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0058",frame:{x:3162,y:1222,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0059",frame:{x:2936,y:1225,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0060",frame:{x:3031,y:1225,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0061",frame:{x:1171,y:1229,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0062",frame:{x:1932,y:1233,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0063",frame:{x:2650,y:1233,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0064",frame:{x:2745,y:1233,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0065",frame:{x:1398,y:1240,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0066",frame:{x:1493,y:1240,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0067",frame:{x:782,y:1241,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0068",frame:{x:782,y:1241,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"FightingGraphics0000",frame:{x:1275,y:1625,w:39,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:-19.3,y:-19.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0001",frame:{x:2980,y:2551,w:62,h:60},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31.3,y:-22.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0002",frame:{x:2975,y:1727,w:85,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43.3,y:-36.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0003",frame:{x:1423,y:796,w:109,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55.4,y:-51.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0004",frame:{x:2639,y:789,w:111,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56.4,y:-53.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0005",frame:{x:3290,y:787,w:114,h:108},rotated:!1,trimmed:!0,spriteSourceSize:{x:-58.4,y:-55.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0006",frame:{x:2294,y:787,w:116,h:109},rotated:!1,trimmed:!0,spriteSourceSize:{x:-59.4,y:-56.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0007",frame:{x:1817,y:786,w:119,h:112},rotated:!1,trimmed:!0,spriteSourceSize:{x:-60.4,y:-58.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0008",frame:{x:3839,y:685,w:122,h:115},rotated:!1,trimmed:!0,spriteSourceSize:{x:-62.4,y:-60.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0009",frame:{x:400,y:1206,w:94,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51.4,y:-51.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0010",frame:{x:3178,y:787,w:109,h:113},rotated:!1,trimmed:!0,spriteSourceSize:{x:-58.4,y:-63.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0011",frame:{x:2060,y:787,w:111,h:117},rotated:!1,trimmed:!0,spriteSourceSize:{x:-59.4,y:-65.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0012",frame:{x:1700,y:786,w:114,h:119},rotated:!1,trimmed:!0,spriteSourceSize:{x:-60.4,y:-66.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0013",frame:{x:312,y:678,w:116,h:121},rotated:!1,trimmed:!0,spriteSourceSize:{x:-61.4,y:-67.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0014",frame:{x:1963,y:659,w:120,h:124},rotated:!1,trimmed:!0,spriteSourceSize:{x:-63.4,y:-69.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0015",frame:{x:3931,y:269,w:122,h:127},rotated:!1,trimmed:!0,spriteSourceSize:{x:-64.4,y:-70.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0016",frame:{x:818,y:846,w:102,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55.4,y:-49.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0017",frame:{x:3,y:862,w:102,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55.4,y:-49.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0018",frame:{x:187,y:799,w:104,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56.4,y:-50.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0019",frame:{x:294,y:802,w:104,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56.4,y:-50.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0020",frame:{x:2958,y:790,w:108,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-57.4,y:-50.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0021",frame:{x:2174,y:787,w:117,h:110},rotated:!1,trimmed:!0,spriteSourceSize:{x:-57.4,y:-53.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0022",frame:{x:1939,y:786,w:118,h:112},rotated:!1,trimmed:!0,spriteSourceSize:{x:-57.4,y:-54.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0023",frame:{x:3964,y:685,w:120,h:116},rotated:!1,trimmed:!0,spriteSourceSize:{x:-57.4,y:-56.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0024",frame:{x:187,y:678,w:122,h:118},rotated:!1,trimmed:!0,spriteSourceSize:{x:-58.4,y:-57.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0025",frame:{x:1963,y:534,w:125,h:122},rotated:!1,trimmed:!0,spriteSourceSize:{x:-60.4,y:-59.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0026",frame:{x:3931,y:142,w:128,h:124},rotated:!1,trimmed:!0,spriteSourceSize:{x:-62.4,y:-60.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0027",frame:{x:2413,y:789,w:110,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-60.4,y:-50.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0028",frame:{x:2526,y:789,w:110,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-60.4,y:-50.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0029",frame:{x:3407,y:787,w:111,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-61.4,y:-50.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0030",frame:{x:1195,y:789,w:111,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-61.4,y:-50.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0031",frame:{x:1309,y:789,w:111,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-61.4,y:-50.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"Fragment1Graphics0000",frame:{x:3961,y:1008,w:19,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-9.1,y:-3.5,w:19,h:7},sourceSize:{w:19,h:7}},{filename:"Fragment2Graphics0000",frame:{x:3523,y:584,w:15,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-7.1,y:-3.3,w:15,h:7},sourceSize:{w:15,h:7}},{filename:"Fragment3Graphics0000",frame:{x:4079,y:343,w:11,h:5},rotated:!1,trimmed:!0,spriteSourceSize:{x:-5.4,y:-2.6,w:11,h:5},sourceSize:{w:11,h:5}},{filename:"GlassDoorGraphics0000",frame:{x:4062,y:142,w:20,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:71},sourceSize:{w:20,h:71}},{filename:"GlassDoorGraphics0001",frame:{x:4062,y:216,w:20,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:71},sourceSize:{w:20,h:71}},{filename:"GlassDoorGraphics0002",frame:{x:4056,y:290,w:20,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:71},sourceSize:{w:20,h:71}},{filename:"GlassDoorGraphics0003",frame:{x:4067,y:423,w:20,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:71},sourceSize:{w:20,h:71}},{filename:"GlassDoorGraphics0004",frame:{x:4067,y:497,w:20,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:71},sourceSize:{w:20,h:71}},{filename:"GlassDoorGraphics0005",frame:{x:4067,y:571,w:20,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:71},sourceSize:{w:20,h:71}},{filename:"HustlerGraphics0000",frame:{x:1662,y:2699,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0001",frame:{x:3936,y:2703,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0002",frame:{x:996,y:2704,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0003",frame:{x:1045,y:2704,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0004",frame:{x:1094,y:2704,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0005",frame:{x:3402,y:2705,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0006",frame:{x:3985,y:2718,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0007",frame:{x:4034,y:2718,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0008",frame:{x:801,y:2720,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0009",frame:{x:850,y:2720,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0010",frame:{x:850,y:2720,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0011",frame:{x:3612,y:2720,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0012",frame:{x:850,y:2720,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0013",frame:{x:2836,y:2722,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0014",frame:{x:2885,y:2722,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0015",frame:{x:3292,y:2722,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0016",frame:{x:3341,y:2722,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0017",frame:{x:1422,y:2724,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0018",frame:{x:296,y:2725,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0019",frame:{x:345,y:2725,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0020",frame:{x:1363,y:2725,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0021",frame:{x:1711,y:2725,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0022",frame:{x:1760,y:2725,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0023",frame:{x:1662,y:2699,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0024",frame:{x:2265,y:2725,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0025",frame:{x:1305,y:2726,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0026",frame:{x:181,y:2727,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0027",frame:{x:1471,y:2727,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0028",frame:{x:2592,y:2727,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0029",frame:{x:2641,y:2727,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0030",frame:{x:899,y:2728,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0031",frame:{x:2033,y:2728,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0032",frame:{x:2082,y:2728,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0033",frame:{x:2131,y:2728,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0034",frame:{x:62,y:2729,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0035",frame:{x:1222,y:2729,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0036",frame:{x:2690,y:2729,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0037",frame:{x:2265,y:2725,w:46,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-53,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0038",frame:{x:977,y:2076,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0039",frame:{x:2647,y:2115,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0040",frame:{x:1484,y:2171,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0041",frame:{x:1151,y:2172,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0042",frame:{x:2550,y:2235,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0043",frame:{x:2488,y:2306,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0044",frame:{x:4037,y:2477,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0045",frame:{x:2934,y:2729,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0046",frame:{x:111,y:2731,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0047",frame:{x:1939,y:2731,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0048",frame:{x:2180,y:2731,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0049",frame:{x:1809,y:2737,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0050",frame:{x:1868,y:2737,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0051",frame:{x:3,y:2738,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0052",frame:{x:394,y:2738,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0053",frame:{x:562,y:2738,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0054",frame:{x:621,y:2738,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0055",frame:{x:680,y:2738,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0056",frame:{x:977,y:2076,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0057",frame:{x:2647,y:2115,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0058",frame:{x:1484,y:2171,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0059",frame:{x:1151,y:2172,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0060",frame:{x:2550,y:2235,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0061",frame:{x:2488,y:2306,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0062",frame:{x:4037,y:2477,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0063",frame:{x:2934,y:2729,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0064",frame:{x:111,y:2731,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0065",frame:{x:1939,y:2731,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0066",frame:{x:2180,y:2731,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0067",frame:{x:1809,y:2737,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0068",frame:{x:1868,y:2737,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0069",frame:{x:3,y:2738,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0070",frame:{x:394,y:2738,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0071",frame:{x:562,y:2738,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0072",frame:{x:621,y:2738,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0073",frame:{x:680,y:2738,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0074",frame:{x:977,y:2076,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0075",frame:{x:2647,y:2115,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0076",frame:{x:1484,y:2171,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0077",frame:{x:1151,y:2172,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0078",frame:{x:2550,y:2235,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0079",frame:{x:2488,y:2306,w:56,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-40,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0080",frame:{x:1303,y:1126,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0081",frame:{x:4034,y:1425,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0082",frame:{x:3067,y:1625,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0083",frame:{x:4034,y:1796,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0084",frame:{x:4037,y:2412,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0085",frame:{x:226,y:2557,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0086",frame:{x:964,y:2558,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0087",frame:{x:2101,y:2558,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0088",frame:{x:2160,y:2558,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0089",frame:{x:2219,y:2558,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0090",frame:{x:2278,y:2561,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0091",frame:{x:1845,y:2567,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0092",frame:{x:1904,y:2567,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0093",frame:{x:1963,y:2567,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0094",frame:{x:433,y:2568,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0095",frame:{x:492,y:2568,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0096",frame:{x:3,y:2569,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0097",frame:{x:62,y:2569,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0098",frame:{x:647,y:2569,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0099",frame:{x:706,y:2569,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0100",frame:{x:285,y:2574,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0101",frame:{x:3417,y:2579,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0102",frame:{x:3045,y:2580,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0103",frame:{x:3104,y:2580,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0104",frame:{x:3163,y:2580,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0105",frame:{x:765,y:2581,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0106",frame:{x:824,y:2581,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0107",frame:{x:551,y:2582,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0108",frame:{x:3756,y:2582,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0109",frame:{x:3815,y:2582,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0110",frame:{x:3874,y:2582,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0111",frame:{x:3933,y:2582,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0112",frame:{x:1582,y:2584,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0113",frame:{x:1641,y:2584,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0114",frame:{x:1700,y:2584,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0115",frame:{x:1023,y:2588,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0116",frame:{x:3992,y:2588,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0117",frame:{x:1082,y:2589,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0118",frame:{x:1141,y:2589,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0119",frame:{x:1200,y:2589,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0120",frame:{x:883,y:2590,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0121",frame:{x:1259,y:2600,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0122",frame:{x:3476,y:2600,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0123",frame:{x:3535,y:2600,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0124",frame:{x:3594,y:2600,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0125",frame:{x:2022,y:2602,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0126",frame:{x:2506,y:2602,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0127",frame:{x:2565,y:2602,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0128",frame:{x:1318,y:2604,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0129",frame:{x:1377,y:2604,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0130",frame:{x:1436,y:2604,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0131",frame:{x:2337,y:2605,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0132",frame:{x:1092,y:1024,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0133",frame:{x:2764,y:1334,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0134",frame:{x:3320,y:2001,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0135",frame:{x:3394,y:2001,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0136",frame:{x:899,y:2003,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0137",frame:{x:973,y:2003,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0138",frame:{x:2936,y:2012,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0139",frame:{x:3010,y:2012,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0140",frame:{x:3872,y:2014,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0141",frame:{x:3741,y:2016,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0142",frame:{x:3946,y:2017,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0143",frame:{x:1227,y:2019,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0144",frame:{x:1859,y:2019,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0145",frame:{x:1400,y:2024,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0146",frame:{x:3629,y:2024,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0147",frame:{x:81,y:2025,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0148",frame:{x:155,y:2025,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0149",frame:{x:2321,y:2026,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0150",frame:{x:325,y:2027,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0151",frame:{x:399,y:2027,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0152",frame:{x:1602,y:2028,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0153",frame:{x:1676,y:2028,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0154",frame:{x:2737,y:2029,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0155",frame:{x:3468,y:2030,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0156",frame:{x:3542,y:2030,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0157",frame:{x:1301,y:2031,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0158",frame:{x:655,y:2033,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0159",frame:{x:729,y:2033,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0160",frame:{x:3084,y:2035,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0161",frame:{x:2395,y:2036,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0162",frame:{x:473,y:2038,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0163",frame:{x:2811,y:2038,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0164",frame:{x:2642,y:2042,w:71,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-62,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0165",frame:{x:4039,y:1314,w:50,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0166",frame:{x:2085,y:1522,w:50,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0167",frame:{x:3673,y:1599,w:50,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0168",frame:{x:2302,y:1723,w:50,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0169",frame:{x:3741,y:1951,w:50,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0170",frame:{x:3815,y:2016,w:50,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0171",frame:{x:4023,y:2653,w:50,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0172",frame:{x:832,y:2655,w:50,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0173",frame:{x:885,y:2655,w:50,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0174",frame:{x:3653,y:2655,w:50,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0175",frame:{x:3653,y:2655,w:50,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0176",frame:{x:2846,y:2657,w:50,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0177",frame:{x:2899,y:2657,w:50,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0178",frame:{x:3296,y:2657,w:50,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0179",frame:{x:3349,y:2657,w:50,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0180",frame:{x:343,y:2660,w:50,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0181",frame:{x:1717,y:2660,w:50,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0182",frame:{x:1770,y:2660,w:50,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0183",frame:{x:1495,y:2662,w:50,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0184",frame:{x:2624,y:2662,w:50,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0185",frame:{x:2677,y:2662,w:50,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0186",frame:{x:2730,y:2664,w:50,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0187",frame:{x:2783,y:2664,w:50,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0188",frame:{x:2952,y:2664,w:50,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0189",frame:{x:1271,y:1791,w:84,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-70,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0190",frame:{x:1945,y:1791,w:84,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-70,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0191",frame:{x:3063,y:1791,w:84,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-70,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0192",frame:{x:1177,y:1794,w:84,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-70,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0193",frame:{x:1065,y:1796,w:84,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-70,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0194",frame:{x:3947,y:1796,w:84,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-70,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0195",frame:{x:1461,y:1798,w:84,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-70,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0196",frame:{x:3736,y:1798,w:84,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-70,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0197",frame:{x:163,y:1799,w:84,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-70,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0198",frame:{x:2427,y:1800,w:84,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-70,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0199",frame:{x:2864,y:1803,w:84,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-70,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0200",frame:{x:714,y:1807,w:84,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-70,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0201",frame:{x:2514,y:1808,w:84,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-70,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0202",frame:{x:2951,y:1810,w:84,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-70,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0203",frame:{x:1277,y:2532,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0204",frame:{x:3512,y:2532,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0205",frame:{x:3573,y:2532,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0206",frame:{x:3634,y:2532,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0207",frame:{x:2040,y:2534,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0208",frame:{x:2515,y:2534,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0209",frame:{x:2576,y:2534,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0210",frame:{x:1338,y:2536,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0211",frame:{x:1399,y:2536,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0212",frame:{x:1460,y:2536,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0213",frame:{x:2384,y:2537,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0214",frame:{x:2445,y:2537,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0215",frame:{x:3695,y:2537,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0216",frame:{x:2919,y:2539,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0217",frame:{x:3234,y:2539,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0218",frame:{x:3295,y:2539,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0219",frame:{x:3356,y:2539,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0220",frame:{x:3356,y:2539,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0221",frame:{x:3356,y:2539,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0222",frame:{x:3356,y:2539,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0223",frame:{x:3356,y:2539,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0224",frame:{x:3356,y:2539,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0225",frame:{x:3356,y:2539,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0226",frame:{x:3356,y:2539,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0227",frame:{x:372,y:2542,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0228",frame:{x:1784,y:2542,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0229",frame:{x:1521,y:2544,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0230",frame:{x:2637,y:2544,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0231",frame:{x:2698,y:2544,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0232",frame:{x:2759,y:2544,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0233",frame:{x:2820,y:2546,w:58,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0234",frame:{x:2621,y:2282,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0235",frame:{x:74,y:2286,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0236",frame:{x:493,y:2286,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0237",frame:{x:1960,y:2286,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0238",frame:{x:1624,y:2288,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0239",frame:{x:2846,y:2288,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0240",frame:{x:2914,y:2288,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0241",frame:{x:248,y:2291,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0242",frame:{x:1380,y:2291,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0243",frame:{x:3084,y:2296,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0244",frame:{x:3152,y:2296,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0245",frame:{x:316,y:2302,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0246",frame:{x:1051,y:2303,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0247",frame:{x:2284,y:2303,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0248",frame:{x:2284,y:2303,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0249",frame:{x:2352,y:2303,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0250",frame:{x:2420,y:2306,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0251",frame:{x:2028,y:2312,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0252",frame:{x:2096,y:2312,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0253",frame:{x:561,y:2313,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0254",frame:{x:629,y:2313,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0255",frame:{x:813,y:2314,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0256",frame:{x:881,y:2314,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0257",frame:{x:384,y:2318,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0258",frame:{x:949,y:2325,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0259",frame:{x:3220,y:2325,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0260",frame:{x:3288,y:2325,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0261",frame:{x:697,y:2327,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0262",frame:{x:1119,y:2333,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0263",frame:{x:2689,y:2336,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0264",frame:{x:2757,y:2336,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0265",frame:{x:3751,y:2338,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0266",frame:{x:2982,y:2340,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0267",frame:{x:3356,y:2340,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0268",frame:{x:3424,y:2340,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0269",frame:{x:3492,y:2340,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0270",frame:{x:3652,y:2340,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0271",frame:{x:3819,y:2341,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0272",frame:{x:3887,y:2341,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0273",frame:{x:3955,y:2341,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0274",frame:{x:4023,y:2341,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0275",frame:{x:1692,y:2343,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0276",frame:{x:1760,y:2343,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0277",frame:{x:1828,y:2343,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0278",frame:{x:1187,y:2348,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0279",frame:{x:1255,y:2348,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0280",frame:{x:3560,y:2348,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0281",frame:{x:3,y:2349,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0282",frame:{x:2164,y:2350,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0283",frame:{x:142,y:2351,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0284",frame:{x:1448,y:2352,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0285",frame:{x:1516,y:2352,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0286",frame:{x:2488,y:2353,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0287",frame:{x:2556,y:2353,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0288",frame:{x:71,y:2357,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0289",frame:{x:452,y:2357,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0290",frame:{x:1896,y:2357,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0291",frame:{x:1584,y:2359,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0292",frame:{x:2825,y:2359,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0293",frame:{x:2893,y:2359,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0294",frame:{x:210,y:2362,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0295",frame:{x:1323,y:2362,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0296",frame:{x:3050,y:2367,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0297",frame:{x:3118,y:2367,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0298",frame:{x:278,y:2373,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0299",frame:{x:1017,y:2374,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0300",frame:{x:2232,y:2374,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0301",frame:{x:2300,y:2374,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0302",frame:{x:2368,y:2377,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0303",frame:{x:1964,y:2383,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0304",frame:{x:2032,y:2383,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0305",frame:{x:520,y:2384,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0306",frame:{x:588,y:2384,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0307",frame:{x:765,y:2385,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0308",frame:{x:833,y:2385,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0309",frame:{x:346,y:2389,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0310",frame:{x:901,y:2396,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0311",frame:{x:3186,y:2396,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0312",frame:{x:3254,y:2396,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0313",frame:{x:656,y:2398,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0314",frame:{x:1085,y:2404,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0315",frame:{x:2624,y:2407,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0316",frame:{x:2692,y:2407,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0317",frame:{x:3720,y:2409,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0318",frame:{x:2961,y:2411,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0319",frame:{x:3322,y:2411,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0320",frame:{x:3390,y:2411,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0321",frame:{x:2352,y:2303,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0322",frame:{x:2142,y:1417,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0323",frame:{x:982,y:2183,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0324",frame:{x:3151,y:2225,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0325",frame:{x:351,y:2231,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0326",frame:{x:1053,y:2232,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0327",frame:{x:2337,y:2232,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0328",frame:{x:2408,y:2232,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0329",frame:{x:2479,y:2235,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0330",frame:{x:2071,y:2241,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0331",frame:{x:2142,y:2241,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0332",frame:{x:600,y:2242,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0333",frame:{x:671,y:2242,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0334",frame:{x:838,y:2243,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0335",frame:{x:909,y:2243,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0336",frame:{x:422,y:2247,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0337",frame:{x:980,y:2254,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0338",frame:{x:3222,y:2254,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0339",frame:{x:3293,y:2254,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0340",frame:{x:742,y:2256,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0341",frame:{x:2704,y:2265,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0342",frame:{x:2775,y:2265,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0343",frame:{x:3788,y:2267,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0344",frame:{x:3680,y:2269,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0345",frame:{x:3859,y:2270,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0346",frame:{x:3930,y:2270,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0347",frame:{x:4001,y:2270,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0348",frame:{x:1747,y:2272,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0349",frame:{x:1818,y:2272,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0350",frame:{x:1889,y:2272,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0351",frame:{x:1238,y:2277,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0352",frame:{x:1309,y:2277,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0353",frame:{x:3581,y:2277,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0354",frame:{x:3,y:2278,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0355",frame:{x:2213,y:2279,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0356",frame:{x:177,y:2280,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0357",frame:{x:1482,y:2281,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0358",frame:{x:1553,y:2281,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"HustlerGraphics0359",frame:{x:2550,y:2282,w:68,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:86,h:78},sourceSize:{w:86,h:78}},{filename:"LevelIconGraphics0000",frame:{x:3366,y:1514,w:42,h:49},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:62,h:50},sourceSize:{w:62,h:50}},{filename:"LevelIconGraphics0001",frame:{x:91,y:1897,w:62,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:62,h:50},sourceSize:{w:62,h:50}},{filename:"LevelIconGraphics0002",frame:{x:1400,y:1958,w:42,h:49},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:62,h:50},sourceSize:{w:62,h:50}},{filename:"LevelTextGraphics0000",frame:{x:4089,y:125,w:4,h:4},rotated:!1,trimmed:!0,spriteSourceSize:{x:-2,y:-2,w:4,h:4},sourceSize:{w:4,h:4}},{filename:"LevelsMapButton0000",frame:{x:3043,y:1065,w:176,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:1,w:176,h:54},sourceSize:{w:176,h:54}},{filename:"LevelsMapButton0001",frame:{x:2018,y:1073,w:176,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:1,w:176,h:54},sourceSize:{w:176,h:54}},{filename:"LevelsMapButton0002",frame:{x:2703,y:1073,w:176,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:1,w:176,h:54},sourceSize:{w:176,h:54}},{filename:"MenuButtonGraphics0000",frame:{x:2126,y:974,w:40,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:40,h:39},sourceSize:{w:40,h:39}},{filename:"MenuButtonGraphics0001",frame:{x:3456,y:1322,w:40,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:40,h:39},sourceSize:{w:40,h:39}},{filename:"MenuButtonGraphics0002",frame:{x:2126,y:974,w:40,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:40,h:39},sourceSize:{w:40,h:39}},{filename:"MirrorGraphics0000",frame:{x:3508,y:1515,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.3,y:-17.3,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"MonitorGraphics0000",frame:{x:2900,y:1551,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.3,y:-17.2,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"MonitorGraphics0001",frame:{x:2764,y:1720,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.3,y:-17.2,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"MonitorGraphics0002",frame:{x:2614,y:1724,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.3,y:-17.2,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"MusicButtonGraphics0000",frame:{x:1096,y:1567,w:40,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:40,h:39},sourceSize:{w:40,h:39}},{filename:"MusicButtonGraphics0001",frame:{x:1361,y:1701,w:40,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:40,h:39},sourceSize:{w:40,h:39}},{filename:"MusicButtonGraphics0002",frame:{x:2717,y:1788,w:40,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:40,h:39},sourceSize:{w:40,h:39}},{filename:"MusicButtonGraphics0003",frame:{x:2821,y:1831,w:40,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:40,h:39},sourceSize:{w:40,h:39}},{filename:"NicheGraphics0000",frame:{x:3794,y:1940,w:75,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37.1,y:-36.7,w:75,h:73},sourceSize:{w:75,h:73}},{filename:"Plank10Graphics0000",frame:{x:1303,y:1191,w:50,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-10,w:50,h:20},sourceSize:{w:50,h:20}},{filename:"Plank11Graphics0000",frame:{x:2882,y:1080,w:51,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-10,w:51,h:20},sourceSize:{w:51,h:20}},{filename:"Plank2Graphics0000",frame:{x:3464,y:2665,w:150,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-75,y:-10,w:150,h:20},sourceSize:{w:150,h:20}},{filename:"Plank3Graphics0000",frame:{x:2314,y:2745,w:100,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-50,y:-10,w:100,h:20},sourceSize:{w:100,h:20}},{filename:"Plank4Graphics0000",frame:{x:2993,y:2749,w:100,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-50,y:-10,w:100,h:20},sourceSize:{w:100,h:20}},{filename:"Plank5Graphics0000",frame:{x:2417,y:2751,w:100,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-50,y:-10,w:100,h:20},sourceSize:{w:100,h:20}},{filename:"Plank6Graphics0000",frame:{x:1835,y:1080,w:71,h:21},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-10,w:71,h:21},sourceSize:{w:71,h:21}},{filename:"Plank7Graphics0000",frame:{x:2573,y:1303,w:71,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-10,w:71,h:20},sourceSize:{w:71,h:20}},{filename:"Plank8Graphics0000",frame:{x:3865,y:1187,w:70,h:21},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-10.1,w:70,h:21},sourceSize:{w:70,h:21}},{filename:"Plank9Graphics0000",frame:{x:1209,y:1099,w:50,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-10,w:50,h:20},sourceSize:{w:50,h:20}},{filename:"PlankGraphics0000",frame:{x:3931,y:399,w:150,h:21},rotated:!1,trimmed:!0,spriteSourceSize:{x:-75,y:-10.1,w:150,h:21},sourceSize:{w:150,h:21}},{filename:"PlayGameButton0000",frame:{x:1636,y:1949,w:142,h:40},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.3,y:0,w:143,h:41},sourceSize:{w:143,h:41}},{filename:"PlayGameButton0001",frame:{x:1076,y:1947,w:143,h:40},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.3,y:0,w:143,h:41},sourceSize:{w:143,h:41}},{filename:"PlayGameButton0002",frame:{x:1076,y:1947,w:143,h:40},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.3,y:0,w:143,h:41},sourceSize:{w:143,h:41}},{filename:"Prisoner2Graphics0000",frame:{x:3309,y:1110,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0001",frame:{x:3952,y:1110,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0002",frame:{x:1224,y:1535,w:92,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0003",frame:{x:108,y:906,w:104,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0004",frame:{x:2900,y:1613,w:84,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-75.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0005",frame:{x:168,y:1705,w:79,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-75.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0006",frame:{x:3,y:1487,w:82,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-75.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0007",frame:{x:3277,y:1004,w:93,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-75.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0008",frame:{x:1006,y:1668,w:80,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-76.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0009",frame:{x:1614,y:1528,w:80,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-76.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0010",frame:{x:2028,y:907,w:95,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-76.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0011",frame:{x:3775,y:1285,w:84,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-76.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0012",frame:{x:3810,y:1607,w:80,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-76.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0013",frame:{x:1446,y:1442,w:79,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-76.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0014",frame:{x:964,y:810,w:101,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-57,y:-76.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0015",frame:{x:2469,y:1004,w:96,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-76.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0016",frame:{x:455,y:1412,w:104,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-53,y:-76.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0017",frame:{x:2944,y:1004,w:96,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-76.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0018",frame:{x:2174,y:900,w:96,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-76.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0019",frame:{x:2565,y:1428,w:79,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-76.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0020",frame:{x:102,y:1100,w:87,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-76.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0021",frame:{x:1266,y:1319,w:83,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-76.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0022",frame:{x:1068,y:1363,w:82,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-76.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0023",frame:{x:3716,y:949,w:92,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-76.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0024",frame:{x:2400,y:1507,w:84,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-75.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0025",frame:{x:3737,y:1489,w:80,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-75.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0026",frame:{x:88,y:1521,w:79,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-75.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0027",frame:{x:1012,y:1567,w:81,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-75.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0028",frame:{x:1167,y:1005,w:105,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0029",frame:{x:2142,y:1494,w:82,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-75.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0030",frame:{x:3546,y:1475,w:94,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0031",frame:{x:978,y:1363,w:87,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0032",frame:{x:2197,y:1113,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0033",frame:{x:3456,y:1374,w:87,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0034",frame:{x:3952,y:1110,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0035",frame:{x:1362,y:1115,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0036",frame:{x:3309,y:1110,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0037",frame:{x:3393,y:1661,w:82,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-65.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0038",frame:{x:2565,y:1633,w:86,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-62.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0039",frame:{x:3067,y:1699,w:82,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-63.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0040",frame:{x:517,y:1624,w:87,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-63.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0041",frame:{x:2358,y:1700,w:82,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-64.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0042",frame:{x:3775,y:1707,w:82,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-63.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0043",frame:{x:425,y:1591,w:89,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-63.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0044",frame:{x:1703,y:1502,w:94,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-62.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0045",frame:{x:2216,y:1311,w:102,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-50,y:-62.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0046",frame:{x:1680,y:1685,w:84,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-62.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0047",frame:{x:824,y:1625,w:87,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-62.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0048",frame:{x:250,y:1689,w:83,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-63.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0049",frame:{x:2395,y:1608,w:87,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-63.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0050",frame:{x:1342,y:1528,w:89,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-64.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0051",frame:{x:3820,y:1514,w:90,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-64.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0052",frame:{x:3561,y:1697,w:82,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-64.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0053",frame:{x:3411,y:1477,w:94,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-63.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0054",frame:{x:607,y:1701,w:82,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-63.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0055",frame:{x:455,y:1498,w:92,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-64.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0056",frame:{x:3393,y:1661,w:82,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-65.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0057",frame:{x:3577,y:1919,w:83,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-67.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0058",frame:{x:3646,y:1759,w:87,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-64.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0059",frame:{x:2216,y:1810,w:82,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0060",frame:{x:503,y:1715,w:83,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-62.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0061",frame:{x:3961,y:1949,w:82,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-63.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0062",frame:{x:3e3,y:1944,w:83,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-64.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0063",frame:{x:2571,y:1930,w:85,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-65.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0064",frame:{x:642,y:1614,w:92,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-64.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0065",frame:{x:3588,y:1599,w:82,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-63.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0066",frame:{x:550,y:1531,w:89,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-63.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0067",frame:{x:250,y:1781,w:82,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0068",frame:{x:503,y:1802,w:83,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-65.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0069",frame:{x:1177,y:1714,w:91,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-66.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0070",frame:{x:3577,y:1919,w:83,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-67.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0071",frame:{x:3309,y:1110,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0072",frame:{x:2842,y:910,w:99,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-78.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0073",frame:{x:229,y:2044,w:84,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-58.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0074",frame:{x:1703,y:1413,w:100,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-50,y:-72.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0075",frame:{x:754,y:1342,w:109,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-61.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0076",frame:{x:2288,y:1921,w:89,h:67},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-52.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0077",frame:{x:3872,y:1949,w:86,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-60.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0078",frame:{x:1548,y:1821,w:87,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-58.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0079",frame:{x:973,y:1764,w:89,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-61.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0080",frame:{x:3,y:1381,w:84,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-77.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0081",frame:{x:2214,y:1402,w:97,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0082",frame:{x:329,y:909,w:95,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-79.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0083",frame:{x:3669,y:1058,w:91,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-78.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0084",frame:{x:2407,y:1407,w:89,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-71.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0085",frame:{x:743,y:1425,w:96,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0086",frame:{x:609,y:1117,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0087",frame:{x:2294,y:899,w:101,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0088",frame:{x:3583,y:1165,w:89,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0089",frame:{x:3839,y:913,w:96,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0090",frame:{x:2672,y:1334,w:89,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-76.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0091",frame:{x:835,y:1532,w:89,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-68.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0092",frame:{x:3216,y:1408,w:89,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-68.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0093",frame:{x:3015,y:1326,w:91,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0094",frame:{x:1981,y:1613,w:91,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0095",frame:{x:308,y:1167,w:89,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-80.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0096",frame:{x:1835,y:1108,w:95,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0097",frame:{x:1375,y:1005,w:89,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-80.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0098",frame:{x:1068,y:810,w:101,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-77.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0099",frame:{x:703,y:1117,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0100",frame:{x:2398,y:899,w:101,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0101",frame:{x:3,y:1172,w:89,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0102",frame:{x:1068,y:918,w:96,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0103",frame:{x:1963,y:1337,w:89,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-76.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0104",frame:{x:835,y:1532,w:89,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-68.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0105",frame:{x:3216,y:1408,w:89,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-68.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0106",frame:{x:3015,y:1425,w:89,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0107",frame:{x:1153,y:1417,w:101,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0108",frame:{x:743,y:1517,w:89,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-68.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0109",frame:{x:422,y:1101,w:91,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0110",frame:{x:609,y:1117,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0111",frame:{x:1375,y:901,w:101,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0112",frame:{x:3839,y:913,w:96,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0113",frame:{x:914,y:1652,w:89,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0114",frame:{x:3216,y:1408,w:89,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-68.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0115",frame:{x:3931,y:1425,w:100,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0116",frame:{x:923,y:919,w:96,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-80.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0117",frame:{x:3407,y:897,w:101,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-77.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0118",frame:{x:609,y:1117,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0119",frame:{x:3173,y:903,w:101,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0120",frame:{x:2974,y:1122,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0121",frame:{x:3068,y:1122,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0122",frame:{x:1209,y:1126,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0123",frame:{x:1933,y:1130,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0124",frame:{x:3511,y:949,w:98,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0125",frame:{x:2027,y:1130,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0126",frame:{x:2653,y:1130,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0127",frame:{x:2747,y:1130,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0128",frame:{x:1456,y:1137,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0129",frame:{x:1550,y:1137,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0130",frame:{x:797,y:1138,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0131",frame:{x:3309,y:1110,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0132",frame:{x:3728,y:1596,w:79,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-73.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0133",frame:{x:3280,y:1514,w:83,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-72.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0134",frame:{x:742,y:1611,w:79,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-72.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0135",frame:{x:927,y:1552,w:82,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-71.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0136",frame:{x:1789,y:1613,w:79,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-72.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0137",frame:{x:82,y:1725,w:78,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-61.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0138",frame:{x:3127,y:1609,w:89,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-61.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0139",frame:{x:2817,y:1655,w:75,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0140",frame:{x:3150,y:1803,w:77,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-58.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0141",frame:{x:2655,y:1538,w:75,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-55.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0142",frame:{x:336,y:1719,w:77,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0143",frame:{x:562,y:1426,w:83,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-78.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0144",frame:{x:3,y:1694,w:76,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-77.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0145",frame:{x:1243,y:1944,w:76,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-71.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0146",frame:{x:1750,y:2050,w:84,h:58},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-57.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0147",frame:{x:1275,y:1701,w:83,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-61.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0148",frame:{x:335,y:1811,w:75,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-57.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0149",frame:{x:425,y:1683,w:75,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-73.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0150",frame:{x:3,y:1793,w:75,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-61.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0151",frame:{x:1867,y:1739,w:75,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0152",frame:{x:170,y:1601,w:77,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-75.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0153",frame:{x:1434,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-75.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0154",frame:{x:1434,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-75.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0155",frame:{x:1434,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-75.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0156",frame:{x:1434,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-75.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0157",frame:{x:1434,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-75.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0158",frame:{x:1434,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-75.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0159",frame:{x:1434,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-75.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0160",frame:{x:1434,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-75.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0161",frame:{x:1434,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-75.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0162",frame:{x:1434,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-75.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0163",frame:{x:1434,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-75.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0164",frame:{x:1434,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-75.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0165",frame:{x:1434,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-75.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0166",frame:{x:3393,y:1661,w:82,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-65.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0167",frame:{x:1894,y:1541,w:84,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-76.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0168",frame:{x:81,y:1815,w:79,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-64.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0169",frame:{x:1673,y:1776,w:68,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0170",frame:{x:2291,y:1113,w:71,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0171",frame:{x:791,y:1716,w:79,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-76.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0172",frame:{x:1310,y:2104,w:60,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-48.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0173",frame:{x:1238,y:2224,w:58,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-48.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0174",frame:{x:3,y:2684,w:56,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0175",frame:{x:566,y:2684,w:56,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0176",frame:{x:3822,y:2697,w:54,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0177",frame:{x:3879,y:2697,w:54,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0178",frame:{x:1548,y:2699,w:54,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0179",frame:{x:3234,y:2692,w:55,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0180",frame:{x:1164,y:2695,w:55,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0181",frame:{x:3005,y:2695,w:55,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0182",frame:{x:3063,y:2695,w:55,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0183",frame:{x:743,y:2696,w:55,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0184",frame:{x:454,y:2697,w:55,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0185",frame:{x:2418,y:2697,w:55,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0186",frame:{x:2476,y:2697,w:55,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0187",frame:{x:2534,y:2697,w:55,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0188",frame:{x:3706,y:2697,w:55,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0189",frame:{x:3706,y:2697,w:55,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0190",frame:{x:3706,y:2697,w:55,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0191",frame:{x:3764,y:2697,w:55,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0192",frame:{x:3764,y:2697,w:55,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0193",frame:{x:3764,y:2697,w:55,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0194",frame:{x:3764,y:2697,w:55,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0195",frame:{x:3764,y:2697,w:55,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0196",frame:{x:3764,y:2697,w:55,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0197",frame:{x:3764,y:2697,w:55,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0198",frame:{x:3764,y:2697,w:55,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0199",frame:{x:3764,y:2697,w:55,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0200",frame:{x:3764,y:2697,w:55,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-49.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0201",frame:{x:891,y:1138,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0202",frame:{x:2647,y:1435,w:84,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-74.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0203",frame:{x:3931,y:1513,w:92,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0204",frame:{x:1767,y:1714,w:97,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-54.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0205",frame:{x:801,y:1813,w:90,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-55.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0206",frame:{x:2938,y:1524,w:94,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-53,y:-65.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0207",frame:{x:2197,y:1010,w:70,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-78.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0208",frame:{x:2407,y:1315,w:69,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-76.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0209",frame:{x:2218,y:1723,w:81,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-62.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0210",frame:{x:2032,y:1823,w:89,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-42.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0211",frame:{x:3393,y:1923,w:77,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-50.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0212",frame:{x:2717,y:1831,w:101,h:61},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-56.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0213",frame:{x:3312,y:1828,w:83,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-57.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0214",frame:{x:2216,y:1216,w:71,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-57.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0215",frame:{x:1076,y:1877,w:69,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-39.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0216",frame:{x:2481,y:1214,w:67,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-26,y:-51.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0217",frame:{x:2121,y:1130,w:72,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-26,y:-51.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0218",frame:{x:4020,y:2017,w:70,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-26,y:-42.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0219",frame:{x:3,y:2044,w:72,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-42.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"Prisoner2Graphics0220",frame:{x:1933,y:2044,w:72,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-42.6,w:127,h:112},sourceSize:{w:127,h:112}},{filename:"PrisonerGraphics0000",frame:{x:2027,y:1233,w:89,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0001",frame:{x:972,y:1259,w:89,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0002",frame:{x:1990,y:1522,w:92,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0003",frame:{x:1921,y:901,w:104,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0004",frame:{x:1096,y:1615,w:84,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0005",frame:{x:2895,y:1708,w:77,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-76.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0006",frame:{x:1257,y:1429,w:82,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-76.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0007",frame:{x:3394,y:1003,w:93,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-76.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0008",frame:{x:3478,y:1673,w:80,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-76.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0009",frame:{x:2312,y:1531,w:80,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-76.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0010",frame:{x:2744,y:907,w:95,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-53,y:-76.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0011",frame:{x:3403,y:1110,w:84,h:108},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0012",frame:{x:2736,y:1619,w:78,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0013",frame:{x:1144,y:1505,w:77,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0014",frame:{x:3839,y:803,w:101,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-58,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0015",frame:{x:3,y:967,w:96,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0016",frame:{x:1156,y:1330,w:104,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-54,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0017",frame:{x:215,y:1002,w:96,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-53,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0018",frame:{x:1276,y:899,w:96,h:108},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0019",frame:{x:177,y:1490,w:77,h:108},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0020",frame:{x:3862,y:1076,w:87,h:108},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0021",frame:{x:3953,y:1314,w:83,h:108},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0022",frame:{x:2930,y:1326,w:82,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0023",frame:{x:818,y:951,w:92,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-76.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0024",frame:{x:257,y:1490,w:84,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-76.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0025",frame:{x:344,y:1509,w:78,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-76.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0026",frame:{x:3508,y:1567,w:77,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-76.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0027",frame:{x:1516,y:1597,w:79,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-76.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0028",frame:{x:102,y:1006,w:105,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-53,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0029",frame:{x:2227,y:1494,w:82,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0030",frame:{x:1806,y:1428,w:94,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0031",frame:{x:3366,y:1322,w:87,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0032",frame:{x:1064,y:1259,w:89,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0033",frame:{x:3126,y:1323,w:87,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0034",frame:{x:972,y:1259,w:89,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0035",frame:{x:3499,y:1270,w:89,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0036",frame:{x:2027,y:1233,w:89,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0037",frame:{x:90,y:1416,w:84,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-76.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0038",frame:{x:566,y:1321,w:87,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-76.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0039",frame:{x:1536,y:1388,w:84,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0040",frame:{x:95,y:1311,w:88,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0041",frame:{x:656,y:1417,w:84,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0042",frame:{x:2314,y:1426,w:83,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0043",frame:{x:3490,y:1109,w:90,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0044",frame:{x:1921,y:1002,w:94,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-50,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0045",frame:{x:2639,y:897,w:102,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-76.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0046",frame:{x:401,y:802,w:85,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-76.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0047",frame:{x:3862,y:1314,w:88,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-76.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0048",frame:{x:2055,y:1417,w:84,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-76.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0049",frame:{x:2840,y:1315,w:87,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0050",frame:{x:516,y:1101,w:90,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0051",frame:{x:1741,y:1080,w:91,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-50,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0052",frame:{x:3650,y:1389,w:84,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0053",frame:{x:2606,y:1002,w:94,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0054",frame:{x:3107,y:1427,w:83,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-76.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0055",frame:{x:1646,y:1080,w:92,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-76.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0056",frame:{x:90,y:1416,w:84,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-76.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0057",frame:{x:3960,y:1709,w:84,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-79.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0058",frame:{x:2565,y:1538,w:87,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-78.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0059",frame:{x:3219,y:1615,w:84,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-78.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0060",frame:{x:3193,y:1508,w:84,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-76.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0061",frame:{x:416,y:1785,w:84,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0062",frame:{x:3860,y:1786,w:84,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-78.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0063",frame:{x:3433,y:1769,w:85,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-78.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0064",frame:{x:877,y:1241,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-78.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0065",frame:{x:3222,y:1110,w:84,h:109},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0066",frame:{x:2367,y:1104,w:90,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-50,y:-76.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0067",frame:{x:257,y:1592,w:84,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0068",frame:{x:3306,y:1661,w:84,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-78.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0069",frame:{x:1800,y:1521,w:91,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-78.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0070",frame:{x:3960,y:1709,w:84,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-79.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0071",frame:{x:2027,y:1233,w:89,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0072",frame:{x:2367,y:1004,w:99,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0073",frame:{x:1136,y:1990,w:88,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-58.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0074",frame:{x:2614,y:1788,w:100,h:67},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-53.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0075",frame:{x:866,y:1363,w:109,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-61.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0076",frame:{x:1744,y:1789,w:95,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-54.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0077",frame:{x:2267,y:1634,w:88,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-85.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0078",frame:{x:3643,y:1495,w:82,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-86.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0079",frame:{x:3675,y:1177,w:89,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-87.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0080",frame:{x:1275,y:1010,w:84,h:113},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-87.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0081",frame:{x:1535,y:796,w:97,h:113},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-87.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0082",frame:{x:3943,y:804,w:95,h:113},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-87.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0083",frame:{x:1635,y:908,w:89,h:113},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-87.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0084",frame:{x:2273,y:1004,w:91,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-80.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0085",frame:{x:648,y:1522,w:91,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-63.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0086",frame:{x:290,y:1272,w:89,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0087",frame:{x:2958,y:898,w:101,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0088",frame:{x:1864,y:1334,w:96,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-63.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0089",frame:{x:3835,y:1419,w:93,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-63.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0090",frame:{x:3,y:1071,w:96,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-76.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0091",frame:{x:3035,y:1532,w:89,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-68.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0092",frame:{x:2460,y:1107,w:89,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0093",frame:{x:2119,y:1317,w:92,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0094",frame:{x:363,y:1409,w:89,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0095",frame:{x:1422,y:1655,w:89,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-63.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0096",frame:{x:656,y:1321,w:95,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-70.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0097",frame:{x:2882,y:1107,w:89,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0098",frame:{x:714,y:846,w:101,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0099",frame:{x:3,y:1277,w:89,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0100",frame:{x:3290,y:898,w:101,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0101",frame:{x:2573,y:1334,w:96,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-63.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0102",frame:{x:2764,y:1421,w:93,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-63.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0103",frame:{x:3763,y:1076,w:96,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-76.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0104",frame:{x:3035,y:1532,w:89,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-68.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0105",frame:{x:2460,y:1107,w:89,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0106",frame:{x:1697,y:1593,w:89,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-67.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0107",frame:{x:3612,y:949,w:101,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0108",frame:{x:1352,y:1341,w:89,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0109",frame:{x:1050,y:1472,w:91,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-64.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0110",frame:{x:290,y:1272,w:89,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0111",frame:{x:2502,y:899,w:101,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0112",frame:{x:3835,y:1419,w:93,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-63.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0113",frame:{x:2085,y:1598,w:92,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-63.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0114",frame:{x:2460,y:1107,w:89,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0115",frame:{x:3308,y:1426,w:100,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-63.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0116",frame:{x:1183,y:1625,w:89,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-63.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0117",frame:{x:1172,y:899,w:101,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0118",frame:{x:290,y:1272,w:89,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0119",frame:{x:1817,y:901,w:101,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0120",frame:{x:3591,y:1282,w:89,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0121",frame:{x:1588,y:1284,w:89,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0122",frame:{x:3683,y:1285,w:89,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0123",frame:{x:190,y:1289,w:89,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0124",frame:{x:1479,y:912,w:98,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0125",frame:{x:2481,y:1303,w:89,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0126",frame:{x:382,y:1305,w:89,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0127",frame:{x:474,y:1308,w:89,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0128",frame:{x:1680,y:1309,w:89,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0129",frame:{x:1772,y:1309,w:89,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0130",frame:{x:985,y:1155,w:90,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0131",frame:{x:2027,y:1233,w:89,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0132",frame:{x:3913,y:1605,w:77,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0133",frame:{x:2734,y:1516,w:81,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-74.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0134",frame:{x:2485,y:1608,w:77,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-73.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0135",frame:{x:3,y:1592,w:80,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-73.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0136",frame:{x:2987,y:1625,w:77,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-73.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0137",frame:{x:344,y:1617,w:78,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-73.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0138",frame:{x:2443,y:1710,w:81,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-61.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0139",frame:{x:1078,y:1155,w:90,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0140",frame:{x:1623,y:1413,w:77,h:112},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-88.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0141",frame:{x:504,y:1882,w:75,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-58.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0142",frame:{x:1593,y:1730,w:77,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-74.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0143",frame:{x:2321,y:1315,w:83,h:108},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-84.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0144",frame:{x:1514,y:1699,w:76,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-77.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0145",frame:{x:1923,y:1944,w:76,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-71.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0146",frame:{x:2469,y:2051,w:84,h:58},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-57.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0147",frame:{x:1952,y:1701,w:83,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-61.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0148",frame:{x:282,y:1376,w:78,h:111},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-85.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0149",frame:{x:2655,y:1619,w:78,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-73.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0150",frame:{x:2860,y:1436,w:75,h:112},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-86.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0151",frame:{x:2138,y:1750,w:75,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-63.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0152",frame:{x:3993,y:1605,w:77,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0153",frame:{x:2818,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0154",frame:{x:2818,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0155",frame:{x:2818,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0156",frame:{x:2818,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0157",frame:{x:2818,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0158",frame:{x:2818,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0159",frame:{x:2818,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0160",frame:{x:2818,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0161",frame:{x:2818,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0162",frame:{x:2818,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0163",frame:{x:2818,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0164",frame:{x:2818,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0165",frame:{x:2818,y:1551,w:79,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0166",frame:{x:1903,y:1438,w:84,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0167",frame:{x:2180,y:1598,w:84,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-75.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0168",frame:{x:3230,y:1827,w:79,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-65.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0169",frame:{x:1990,y:1438,w:62,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-55.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0170",frame:{x:582,y:1922,w:80,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-54.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0171",frame:{x:2938,y:1436,w:74,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-74.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0172",frame:{x:252,y:2106,w:60,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-49.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0173",frame:{x:2624,y:2353,w:58,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-50.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0174",frame:{x:625,y:2684,w:56,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-50.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0175",frame:{x:684,y:2684,w:56,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-50.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0176",frame:{x:1605,y:2699,w:54,h:51},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-50.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0177",frame:{x:2361,y:2690,w:54,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-51.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0178",frame:{x:3177,y:2692,w:54,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-51.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0179",frame:{x:1422,y:2669,w:55,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-51.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0180",frame:{x:2303,y:2670,w:55,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-51.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0181",frame:{x:181,y:2672,w:55,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-51.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0182",frame:{x:938,y:2673,w:55,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-51.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0183",frame:{x:2033,y:2673,w:55,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-51.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0184",frame:{x:2091,y:2673,w:55,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-51.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0185",frame:{x:2149,y:2673,w:55,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-51.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0186",frame:{x:2207,y:2676,w:55,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-51.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0187",frame:{x:1823,y:2682,w:55,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-51.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0188",frame:{x:1881,y:2682,w:55,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-51.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0189",frame:{x:1881,y:2682,w:55,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-50.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0190",frame:{x:1881,y:2682,w:55,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-51.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0191",frame:{x:396,y:2683,w:55,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-51.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0192",frame:{x:396,y:2683,w:55,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-51.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0193",frame:{x:396,y:2683,w:55,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-51.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0194",frame:{x:396,y:2683,w:55,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-51.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0195",frame:{x:396,y:2683,w:55,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-51.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0196",frame:{x:396,y:2683,w:55,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-51.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0197",frame:{x:396,y:2683,w:55,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-51.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0198",frame:{x:396,y:2683,w:55,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-51.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0199",frame:{x:396,y:2683,w:55,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-51.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0200",frame:{x:396,y:2683,w:55,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-51.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0201",frame:{x:1444,y:1341,w:89,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-73.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0202",frame:{x:3990,y:1008,w:96,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-73.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0203",frame:{x:1727,y:908,w:87,h:112},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-85.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0204",frame:{x:2527,y:1724,w:84,h:81},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-59.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0205",frame:{x:3152,y:1710,w:78,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-85.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0206",frame:{x:1528,y:1494,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-85.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0207",frame:{x:576,y:1998,w:76,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-61.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0208",frame:{x:1871,y:1639,w:78,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-78.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0209",frame:{x:3062,y:905,w:101,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-60,y:-84.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0210",frame:{x:1089,y:1710,w:85,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-60.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0211",frame:{x:1474,y:2044,w:77,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-39.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0212",frame:{x:2654,y:1721,w:107,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-60.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0213",frame:{x:1358,y:1816,w:96,h:67},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-41.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0214",frame:{x:1124,y:2284,w:98,h:46},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-43.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0215",frame:{x:1658,y:2231,w:86,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-40.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0216",frame:{x:692,y:1712,w:96,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-53.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0217",frame:{x:3860,y:1709,w:97,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-51.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0218",frame:{x:1342,y:1442,w:101,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-60.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0219",frame:{x:842,y:1446,w:101,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-60.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"PrisonerGraphics0220",frame:{x:946,y:1466,w:101,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-60.9,w:121,h:120},sourceSize:{w:121,h:120}},{filename:"ReplayButtonGraphics0000",frame:{x:1747,y:2231,w:40,h:38},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:40,h:38},sourceSize:{w:40,h:38}},{filename:"ReplayButtonGraphics0001",frame:{x:765,y:2327,w:40,h:38},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:40,h:38},sourceSize:{w:40,h:38}},{filename:"ReplayButtonGraphics0002",frame:{x:1747,y:2231,w:40,h:38},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:40,h:38},sourceSize:{w:40,h:38}},{filename:"SkipButton0000",frame:{x:3,y:2115,w:65,h:36},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:65,h:37},sourceSize:{w:65,h:37}},{filename:"SkipButton0001",frame:{x:2734,y:2162,w:65,h:36},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:65,h:37},sourceSize:{w:65,h:37}},{filename:"SkipButton0002",frame:{x:3233,y:1710,w:65,h:37},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:65,h:37},sourceSize:{w:65,h:37}},{filename:"SoundButtonGraphics0000",frame:{x:1781,y:1933,w:40,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:40,h:39},sourceSize:{w:40,h:39}},{filename:"SoundButtonGraphics0001",frame:{x:2737,y:1969,w:40,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:40,h:39},sourceSize:{w:40,h:39}},{filename:"SoundButtonGraphics0002",frame:{x:2885,y:2038,w:40,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:40,h:39},sourceSize:{w:40,h:39}},{filename:"SoundButtonGraphics0003",frame:{x:1554,y:2044,w:40,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:40,h:39},sourceSize:{w:40,h:39}},{filename:"StoolGraphics0000",frame:{x:577,y:2127,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.5,y:-17.5,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"Tip1Graphics0000",frame:{x:873,y:1740,w:97,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.2,y:-68.2,w:97,h:70},sourceSize:{w:97,h:70}},{filename:"Tip2Graphics0000",frame:{x:2764,y:1758,w:97,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.2,y:-68.2,w:97,h:70},sourceSize:{w:97,h:70}},{filename:"Tip3Graphics0000",frame:{x:1361,y:1743,w:97,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.2,y:-68.2,w:97,h:70},sourceSize:{w:97,h:70}},{filename:"Tip4Graphics0000",frame:{x:2038,y:1750,w:97,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.2,y:-68.2,w:97,h:70},sourceSize:{w:97,h:70}},{filename:"Tip5Graphics0000",frame:{x:86,y:1626,w:79,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-96.2,w:79,h:96},sourceSize:{w:79,h:96}},{filename:"Tip6Graphics0000",frame:{x:1598,y:1631,w:79,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-96.2,w:79,h:96},sourceSize:{w:79,h:96}},{filename:"Tip7Graphics0000",frame:{x:3233,y:1754,w:97,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.2,y:-68.2,w:97,h:70},sourceSize:{w:97,h:70}},{filename:"Tip8Graphics0000",frame:{x:3333,y:1755,w:97,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.2,y:-68.2,w:97,h:70},sourceSize:{w:97,h:70}},{filename:"ToiletGraphics0000",frame:{x:4019,y:2525,w:67,h:60},rotated:!1,trimmed:!0,spriteSourceSize:{x:-18.3,y:-23.3,w:67,h:60},sourceSize:{w:67,h:60}},{filename:"TurrelGraphics0000",frame:{x:3222,y:1074,w:50,h:29},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.4,y:-16.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0001",frame:{x:3306,y:1615,w:56,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.4,y:-22.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0002",frame:{x:108,y:862,w:64,h:41},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40.4,y:-28.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0003",frame:{x:1859,y:1977,w:60,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37.4,y:-26.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0004",frame:{x:2936,y:1965,w:57,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35.4,y:-31.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0005",frame:{x:431,y:749,w:55,h:48},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33.4,y:-35.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0006",frame:{x:1692,y:2288,w:52,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.4,y:-39.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0007",frame:{x:2739,y:2729,w:46,h:55},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24.4,y:-42.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0008",frame:{x:1253,y:2665,w:49,h:61},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24.4,y:-48.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0009",frame:{x:3162,y:1122,w:57,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27.4,y:-53.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0010",frame:{x:2882,y:1013,w:59,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27.4,y:-51.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0011",frame:{x:3127,y:1532,w:63,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.4,y:-51.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0012",frame:{x:897,y:2524,w:64,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.4,y:-50.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0013",frame:{x:4026,y:1513,w:67,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.4,y:-50.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0014",frame:{x:3628,y:2411,w:70,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.4,y:-49.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0015",frame:{x:2487,y:1545,w:73,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27.4,y:-46.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0016",frame:{x:2843,y:2430,w:76,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27.4,y:-43.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0017",frame:{x:3064,y:2168,w:78,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-26.4,y:-41.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0018",frame:{x:2515,y:2481,w:82,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:-26.4,y:-37.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0019",frame:{x:3458,y:2411,w:84,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27.4,y:-39.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0020",frame:{x:2995,y:2285,w:86,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27.4,y:-39.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0021",frame:{x:3364,y:2283,w:85,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-26.4,y:-41.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0022",frame:{x:3452,y:2283,w:85,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-26.4,y:-41.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0023",frame:{x:2556,y:2051,w:83,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24.4,y:-44.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0024",frame:{x:2236,y:1991,w:82,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24.4,y:-44.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0025",frame:{x:3257,y:1289,w:40,h:28},rotated:!1,trimmed:!0,spriteSourceSize:{x:-18.4,y:-15.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"WaterSplashGraphics0000",frame:{x:4051,y:2150,w:42,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22.2,y:-64.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0001",frame:{x:4046,y:1949,w:44,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23.2,y:-64.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0002",frame:{x:3513,y:2688,w:45,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23.2,y:-63.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0003",frame:{x:3464,y:2688,w:46,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23.2,y:-62.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0004",frame:{x:1022,y:919,w:43,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-20.2,y:-63.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0005",frame:{x:2126,y:907,w:45,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-21.2,y:-64.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0006",frame:{x:4047,y:1709,w:46,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22.2,y:-65.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0007",frame:{x:4046,y:1110,w:47,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23.2,y:-65.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0008",frame:{x:3222,y:1006,w:48,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23.2,y:-65.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0009",frame:{x:3257,y:1222,w:48,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23.2,y:-64.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0010",frame:{x:130,y:2665,w:48,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24.2,y:-63.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0011",frame:{x:1981,y:2667,w:49,h:61},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24.2,y:-61.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0012",frame:{x:1391,y:2362,w:50,h:58},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24.2,y:-58.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0013",frame:{x:948,y:2728,w:45,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-18.2,y:-57.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0014",frame:{x:512,y:2697,w:47,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-19.2,y:-56.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0015",frame:{x:3121,y:2695,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-20.2,y:-56.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0016",frame:{x:3561,y:2688,w:48,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-20.2,y:-59.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0017",frame:{x:77,y:2665,w:50,h:61},rotated:!1,trimmed:!0,spriteSourceSize:{x:-21.2,y:-61.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0018",frame:{x:761,y:954,w:51,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22.2,y:-63.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0019",frame:{x:1580,y:912,w:51,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22.2,y:-64.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"_beam0000",frame:{x:1817,y:1005,w:100,h:8},rotated:!1,trimmed:!0,spriteSourceSize:{x:-100,y:-4,w:100,h:8},sourceSize:{w:100,h:8}},{filename:"_beam0001",frame:{x:453,y:2756,w:100,h:8},rotated:!1,trimmed:!0,spriteSourceSize:{x:-100,y:-4,w:100,h:8},sourceSize:{w:100,h:8}},{filename:"_beam0002",frame:{x:3873,y:2762,w:100,h:8},rotated:!1,trimmed:!0,spriteSourceSize:{x:-100,y:-4,w:100,h:8},sourceSize:{w:100,h:8}},{filename:"_bigElevBack0000",frame:{x:3172,y:2747,w:105,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52.5,y:-10,w:105,h:20},sourceSize:{w:105,h:20}},{filename:"_bigElevatorFront0000",frame:{x:493,y:1027,w:103,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51.7,y:-5.1,w:103,h:11},sourceSize:{w:103,h:11}},{filename:"_bigElevatorFront0001",frame:{x:866,y:1342,w:103,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51.7,y:-5.1,w:103,h:11},sourceSize:{w:103,h:11}},{filename:"_bigElevatorFront0002",frame:{x:3661,y:2751,w:103,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51.7,y:-5.1,w:103,h:11},sourceSize:{w:103,h:11}},{filename:"_bigElevatorFront0003",frame:{x:3767,y:2751,w:103,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51.7,y:-5.1,w:103,h:11},sourceSize:{w:103,h:11}},{filename:"_bigElevatorFront0004",frame:{x:1520,y:2753,w:103,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51.7,y:-5.1,w:103,h:11},sourceSize:{w:103,h:11}},{filename:"_bigElevatorFront0005",frame:{x:3451,y:2754,w:103,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51.7,y:-5.1,w:103,h:11},sourceSize:{w:103,h:11}},{filename:"_burg10000",frame:{x:2753,y:790,w:101,h:114},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45.2,y:-55.7,w:101,h:114},sourceSize:{w:101,h:114}},{filename:"_burg20000",frame:{x:3069,y:790,w:101,h:112},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48.2,y:-56.8,w:101,h:112},sourceSize:{w:101,h:112}},{filename:"_burg30000",frame:{x:2857,y:790,w:98,h:117},rotated:!1,trimmed:!0,spriteSourceSize:{x:-53.3,y:-53.7,w:98,h:117},sourceSize:{w:98,h:117}},{filename:"_burgersBackground0000",frame:{x:714,y:677,w:247,h:166},rotated:!1,trimmed:!0,spriteSourceSize:{x:-123.2,y:-77.6,w:247,h:166},sourceSize:{w:247,h:166}},{filename:"_buttonTop0000",frame:{x:1172,y:883,w:20,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-3.5,w:20,h:7},sourceSize:{w:20,h:7}},{filename:"_buttonTop0001",frame:{x:1479,y:901,w:20,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-3.5,w:20,h:7},sourceSize:{w:20,h:7}},{filename:"_buttonTop0002",frame:{x:1502,y:901,w:20,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-3.5,w:20,h:7},sourceSize:{w:20,h:7}},{filename:"_buttonTop0003",frame:{x:3511,y:935,w:20,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-3.5,w:20,h:7},sourceSize:{w:20,h:7}},{filename:"_buttonTop0004",frame:{x:2703,y:1002,w:20,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-3.5,w:20,h:7},sourceSize:{w:20,h:7}},{filename:"_buttonTop0005",frame:{x:3938,y:1008,w:20,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-3.5,w:20,h:7},sourceSize:{w:20,h:7}},{filename:"_cogwheel0000",frame:{x:2273,y:900,w:18,h:18},rotated:!1,trimmed:!0,spriteSourceSize:{x:-9,y:-8.9,w:18,h:18},sourceSize:{w:18,h:18}},{filename:"_cogwheel20000",frame:{x:2273,y:921,w:18,h:18},rotated:!1,trimmed:!0,spriteSourceSize:{x:-9,y:-9,w:18,h:18},sourceSize:{w:18,h:18}},{filename:"_elevatorBack0000",frame:{x:1933,y:1108,w:70,h:17},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-8.5,w:70,h:17},sourceSize:{w:70,h:17}},{filename:"_elevatorFront0000",frame:{x:672,y:1044,w:69,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.5,y:-5.3,w:69,h:11},sourceSize:{w:69,h:11}},{filename:"_elevatorFront0001",frame:{x:1742,y:1186,w:69,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.5,y:-5.3,w:69,h:11},sourceSize:{w:69,h:11}},{filename:"_elevatorFront0002",frame:{x:2764,y:1407,w:69,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.5,y:-5.3,w:69,h:11},sourceSize:{w:69,h:11}},{filename:"_elevatorFront0003",frame:{x:714,y:1788,w:69,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.5,y:-5.3,w:69,h:11},sourceSize:{w:69,h:11}},{filename:"_elevatorFront0004",frame:{x:894,y:1813,w:69,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.5,y:-5.3,w:69,h:11},sourceSize:{w:69,h:11}},{filename:"_elevatorFront0005",frame:{x:894,y:1827,w:69,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.5,y:-5.3,w:69,h:11},sourceSize:{w:69,h:11}},{filename:"_levelCompletedSign0000",frame:{x:3,y:537,w:484,h:138},rotated:!1,trimmed:!0,spriteSourceSize:{x:-241.3,y:-3.3,w:484,h:138},sourceSize:{w:484,h:138}},{filename:"_levelFailedSign0000",frame:{x:490,y:537,w:484,h:137},rotated:!1,trimmed:!0,spriteSourceSize:{x:-241.9,y:-3.7,w:484,h:137},sourceSize:{w:484,h:137}},{filename:"_mainMenuButton0000",frame:{x:1467,y:1081,w:176,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:-.4,w:176,h:53},sourceSize:{w:176,h:53}},{filename:"_mainMenuButton0001",frame:{x:851,y:1082,w:176,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:-.4,w:176,h:53},sourceSize:{w:176,h:53}},{filename:"_mainMenuButton0002",frame:{x:1030,y:1099,w:176,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:-.4,w:176,h:53},sourceSize:{w:176,h:53}},{filename:"_moreButton0000",frame:{x:3473,y:1994,w:153,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:0,w:156,h:33},sourceSize:{w:156,h:33}},{filename:"_moreButton0001",frame:{x:1602,y:1992,w:156,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:156,h:33},sourceSize:{w:156,h:33}},{filename:"_moreButton0002",frame:{x:3473,y:1994,w:153,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:0,w:156,h:33},sourceSize:{w:156,h:33}},{filename:"_nextButton0000",frame:{x:3043,y:1008,w:176,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:1,w:176,h:54},sourceSize:{w:176,h:54}},{filename:"_nextButton0001",frame:{x:2018,y:1016,w:176,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:1,w:176,h:54},sourceSize:{w:176,h:54}},{filename:"_nextButton0002",frame:{x:2703,y:1016,w:176,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:1,w:176,h:54},sourceSize:{w:176,h:54}},{filename:"_pushButtonBase0000",frame:{x:493,y:1016,w:23,h:5},rotated:!1,trimmed:!0,spriteSourceSize:{x:-11.9,y:-2.3,w:23,h:5},sourceSize:{w:23,h:5}},{filename:"_replayButton0000",frame:{x:314,y:1017,w:176,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:1,w:176,h:54},sourceSize:{w:176,h:54}},{filename:"_replayButton0001",frame:{x:3811,y:1019,w:176,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:1,w:176,h:54},sourceSize:{w:176,h:54}},{filename:"_replayButton0002",frame:{x:1727,y:1023,w:176,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:1,w:176,h:54},sourceSize:{w:176,h:54}},{filename:"_triggerBase0000",frame:{x:427,y:907,w:30,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-7,w:30,h:14},sourceSize:{w:30,h:14}},{filename:"_triggerBase0001",frame:{x:4057,y:991,w:30,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-7,w:30,h:14},sourceSize:{w:30,h:14}},{filename:"_triggerBase0002",frame:{x:599,y:1027,w:30,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-7,w:30,h:14},sourceSize:{w:30,h:14}},{filename:"_triggerBase0003",frame:{x:3763,y:1058,w:30,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-7,w:30,h:14},sourceSize:{w:30,h:14}},{filename:"_triggerBase0004",frame:{x:878,y:1060,w:30,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-7,w:30,h:14},sourceSize:{w:30,h:14}},{filename:"_triggerBase0005",frame:{x:1030,y:1082,w:30,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-7,w:30,h:14},sourceSize:{w:30,h:14}},{filename:"_triggerHandle0000",frame:{x:4071,y:125,w:15,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-14,w:15,h:14},sourceSize:{w:15,h:14}},{filename:"_triggerHandle0001",frame:{x:2818,y:533,w:15,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-14,w:15,h:14},sourceSize:{w:15,h:14}},{filename:"_triggerHandle0002",frame:{x:2818,y:550,w:15,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-14,w:15,h:14},sourceSize:{w:15,h:14}},{filename:"_triggerHandle0003",frame:{x:3523,y:550,w:15,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-14,w:15,h:14},sourceSize:{w:15,h:14}},{filename:"_triggerHandle0004",frame:{x:2818,y:567,w:15,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-14,w:15,h:14},sourceSize:{w:15,h:14}},{filename:"_triggerHandle0005",frame:{x:3523,y:567,w:15,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-14,w:15,h:14},sourceSize:{w:15,h:14}},{filename:"_walkthroughButton0000",frame:{x:1467,y:1024,w:176,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:.2,w:176,h:54},sourceSize:{w:176,h:54}},{filename:"_walkthroughButton0001",frame:{x:913,y:1025,w:176,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:.2,w:176,h:54},sourceSize:{w:176,h:54}},{filename:"_walkthroughButton0002",frame:{x:493,y:1044,w:176,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:.2,w:176,h:54},sourceSize:{w:176,h:54}},{filename:"_walkthroughButtonBig0000",frame:{x:3490,y:1052,w:176,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:-.2,w:176,h:54},sourceSize:{w:176,h:54}},{filename:"_walkthroughButtonBig0001",frame:{x:672,y:1060,w:176,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:-.2,w:176,h:54},sourceSize:{w:176,h:54}},{filename:"_walkthroughButtonBig0002",frame:{x:672,y:1060,w:176,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:-.2,w:176,h:54},sourceSize:{w:176,h:54}},{filename:"cbtnArrow0000",frame:{x:1644,y:1186,w:95,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47.5,y:-47.5,w:95,h:95},sourceSize:{w:95,h:95}},{filename:"cbtnChange0000",frame:{x:3767,y:1187,w:95,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47.5,y:-47.5,w:95,h:95},sourceSize:{w:95,h:95}},{filename:"cbtnChange0001",frame:{x:192,y:1191,w:95,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47.5,y:-47.5,w:95,h:95},sourceSize:{w:95,h:95}},{filename:"cbtnGrab0000",frame:{x:2552,y:1205,w:95,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47.5,y:-47.5,w:95,h:95},sourceSize:{w:95,h:95}},{filename:"cmcActiveSign0000",frame:{x:460,y:907,w:25,h:16},rotated:!1,trimmed:!0,spriteSourceSize:{x:-12.5,y:6.5,w:25,h:16},sourceSize:{w:25,h:16}},{filename:"cmcAnim10000",frame:{x:1195,y:537,w:224,h:249},rotated:!1,trimmed:!0,spriteSourceSize:{x:8.6,y:8.3,w:224,h:249},sourceSize:{w:224,h:249}},{filename:"cmcAnim100000",frame:{x:2131,y:533,w:342,h:251},rotated:!1,trimmed:!0,spriteSourceSize:{x:7,y:268.5,w:342,h:251},sourceSize:{w:342,h:251}},{filename:"cmcAnim110000",frame:{x:3,y:678,w:181,h:181},rotated:!1,trimmed:!0,spriteSourceSize:{x:185.3,y:214.5,w:181,h:181},sourceSize:{w:181,h:181}},{filename:"cmcAnim120000",frame:{x:2476,y:533,w:339,h:253},rotated:!1,trimmed:!0,spriteSourceSize:{x:356.1,y:266.8,w:339,h:253},sourceSize:{w:339,h:253}},{filename:"cmcAnim20000",frame:{x:1700,y:534,w:260,h:249},rotated:!1,trimmed:!0,spriteSourceSize:{x:231.4,y:7.5,w:260,h:249},sourceSize:{w:260,h:249}},{filename:"cmcAnim30000",frame:{x:3931,y:3,w:137,h:136},rotated:!1,trimmed:!0,spriteSourceSize:{x:412.8,y:12,w:137,h:136},sourceSize:{w:137,h:136}},{filename:"cmcAnim40000",frame:{x:490,y:677,w:221,h:246},rotated:!1,trimmed:!0,spriteSourceSize:{x:473.5,y:7.5,w:221,h:246},sourceSize:{w:221,h:246}},{filename:"cmcAnim50000",frame:{x:3839,y:424,w:225,h:258},rotated:!1,trimmed:!0,spriteSourceSize:{x:8,y:261.4,w:225,h:258},sourceSize:{w:225,h:258}},{filename:"cmcAnim60000",frame:{x:1423,y:534,w:274,h:259},rotated:!1,trimmed:!0,spriteSourceSize:{x:201.6,y:259.1,w:274,h:259},sourceSize:{w:274,h:259}},{filename:"cmcAnim70000",frame:{x:977,y:537,w:215,h:270},rotated:!1,trimmed:!0,spriteSourceSize:{x:479.2,y:248.4,w:215,h:270},sourceSize:{w:215,h:270}},{filename:"cmcAnim80000",frame:{x:2836,y:532,w:339,h:255},rotated:!1,trimmed:!0,spriteSourceSize:{x:7,y:7,w:339,h:255},sourceSize:{w:339,h:255}},{filename:"cmcAnim90000",frame:{x:3178,y:532,w:342,h:252},rotated:!1,trimmed:!0,spriteSourceSize:{x:352.4,y:7.4,w:342,h:252},sourceSize:{w:342,h:252}},{filename:"cmcBonusBag0000",frame:{x:431,y:678,w:56,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:7,y:0,w:56,h:68},sourceSize:{w:56,h:68}},{filename:"cmcBonusHighlight0000",frame:{x:3366,y:1569,w:89,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44.9,y:-44.8,w:89,h:89},sourceSize:{w:89,h:89}},{filename:"cmcCreditsDialog0000",frame:{x:3541,y:424,w:295,h:522},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.7,y:-4.2,w:295,h:522},sourceSize:{w:295,h:522}},{filename:"cmcLevelSelectBG0000",frame:{x:2131,y:3,w:702,h:527},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.7,y:0,w:702,h:527},sourceSize:{w:702,h:527}},{filename:"cmcLock0000",frame:{x:3511,y:897,w:25,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-2.4,y:-2.4,w:25,h:35},sourceSize:{w:25,h:35}},{filename:"cmcMainMenuBack0000",frame:{x:3,y:3,w:712,h:531},rotated:!1,trimmed:!0,spriteSourceSize:{x:-11.1,y:-1.1,w:712,h:531},sourceSize:{w:712,h:531}},{filename:"cmcPanelBG0000",frame:{x:718,y:3,w:702,h:531},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:-4.2,w:702,h:531},sourceSize:{w:702,h:531}},{filename:"cmcPauseDialog0000",frame:{x:3541,y:3,w:387,h:418},rotated:!1,trimmed:!0,spriteSourceSize:{x:-78.2,y:-3.6,w:387,h:418},sourceSize:{w:387,h:418}},{filename:"cmcYouNeed0000",frame:{x:2075,y:1694,w:140,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:1.4,y:-1.6,w:140,h:53},sourceSize:{w:140,h:53}},{filename:"crossPoint0000",frame:{x:2606,y:972,w:26,h:26},rotated:!1,trimmed:!0,spriteSourceSize:{x:-11,y:-11,w:26,h:26},sourceSize:{w:26,h:26}},{filename:"crossPoint0001",frame:{x:1224,y:1505,w:26,h:26},rotated:!1,trimmed:!0,spriteSourceSize:{x:-11,y:-11,w:26,h:26},sourceSize:{w:26,h:26}},{filename:"crossPoint0002",frame:{x:425,y:1509,w:26,h:26},rotated:!1,trimmed:!0,spriteSourceSize:{x:-11,y:-11,w:26,h:26},sourceSize:{w:26,h:26}},{filename:"grabbedObject0000",frame:{x:3508,y:1477,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.5,y:-17.5,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"hamburgers0000",frame:{x:3,y:3,w:0,h:0},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.8,y:-.2,w:49,h:43},sourceSize:{w:49,h:43}},{filename:"hamburgers0001",frame:{x:1266,y:1272,w:28,h:30},rotated:!1,trimmed:!0,spriteSourceSize:{x:.2,y:-.2,w:49,h:43},sourceSize:{w:49,h:43}},{filename:"hamburgers0002",frame:{x:4041,y:884,w:48,h:31},rotated:!1,trimmed:!0,spriteSourceSize:{x:-2.8,y:-1.2,w:49,h:43},sourceSize:{w:49,h:43}},{filename:"hamburgers0003",frame:{x:1536,y:1341,w:48,h:43},rotated:!1,trimmed:!0,spriteSourceSize:{x:-3.8,y:-12.2,w:49,h:43},sourceSize:{w:49,h:43}},{filename:"platformCenter0000",frame:{x:3736,y:1759,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35.1,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"platformLeft0000",frame:{x:3e3,y:1891,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"platformRight0000",frame:{x:2780,y:1895,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"singleTile0000",frame:{x:3703,y:2024,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileBottomCenter0000",frame:{x:513,y:2187,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileBottomLeft0000",frame:{x:4051,y:2217,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileBottomRight0000",frame:{x:3540,y:2283,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileCenter0000",frame:{x:2164,y:2312,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileCenterLeft0000",frame:{x:452,y:2318,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileCenterRight0000",frame:{x:1652,y:2359,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileTopCenter0000",frame:{x:2436,y:2377,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35.1,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileTopLeft0000",frame:{x:2100,y:2383,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35.1,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileTopRight0000",frame:{x:414,y:2389,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35.1,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"verticalPlatformBottom0000",frame:{x:969,y:2396,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35.1,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"verticalPlatformCenter0000",frame:{x:724,y:2398,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"verticalPlatformTop0000",frame:{x:2922,y:2430,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35.1,w:35,h:35},sourceSize:{w:35,h:35}}],meta:{app:"Adobe Flash Professional",version:"13.1.0.226",image:"Objects.png",format:"RGBA8888",size:{w:4096,h:4096},scale:"1"}},e}(),ObjectsLayouts=function(){function e(){}return e.data=[{name:"BigElevatorGraphics",children:[{mc:"_bigElevBack",name:"",x:0,y:0},{mc:"_cogwheel",name:"cogwheel1",x:-14,y:0},{mc:"_cogwheel2",name:"cogwheel2",x:14,y:0},{mc:"_bigElevatorFront",name:"front",x:0,y:-4}]},{name:"cmcCredits",children:[{mc:"cmcCreditsDialog",name:"",x:0,y:0},{mc:"BackButton",name:"backButton",x:89,y:491}]},{name:"cmcJoypadLeft",children:[{mc:"cbtnArrow",name:"right",x:55,y:0,degrees:90},{mc:"cbtnArrow",name:"left",x:-55,y:0,degrees:-90}]},{name:"cmcJoypadRight",children:[{mc:"cbtnArrow",name:"up",x:54,y:0},{mc:"cbtnArrow",name:"down",x:-54,y:0,degrees:180},{mc:"cbtnGrab",name:"grab",x:-54,y:-108},{mc:"cbtnChange",name:"change",x:54,y:-108}]},{name:"cmcLevelSelect",children:[{mc:"cmcLevelSelectBG",name:"",x:-2,y:0},{mc:"cmcYouNeed",name:"youNeed",x:363,y:142},{mc:"_walkthroughButtonBig",name:"walkthroughButton",x:508,y:464},{mc:"_mainMenuButton",name:"menuButton",x:22,y:465},{mc:"cmcBonusHighlight",name:"bonusHighlight",x:544,y:169},{mc:"cmcBonusBag",name:"bonusBag",x:505,y:130},{mc:"cmcLock",name:"lock",x:501,y:176},{mc:"LevelIconGraphics",name:"l1",x:151,y:344},{mc:"LevelIconGraphics",name:"l2",x:221,y:372},{mc:"LevelIconGraphics",name:"l3",x:287,y:339},{mc:"LevelIconGraphics",name:"l4",x:356,y:336},{mc:"LevelIconGraphics",name:"l5",x:425,y:371},{mc:"LevelIconGraphics",name:"l6",x:490,y:347},{mc:"LevelIconGraphics",name:"l7",x:535,y:300},{mc:"LevelIconGraphics",name:"l8",x:532,y:236},{mc:"LevelIconGraphics",name:"l9",x:467,y:224},{mc:"LevelIconGraphics",name:"l10",x:405,y:206},{mc:"LevelIconGraphics",name:"l11",x:343,y:229},{mc:"LevelIconGraphics",name:"l12",x:275,y:213},{mc:"LevelIconGraphics",name:"l13",x:206,y:230},{mc:"LevelIconGraphics",name:"l14",x:130,y:211},{mc:"LevelIconGraphics",name:"l15",x:119,y:154},{mc:"LevelIconGraphics",name:"l16",x:159,y:99},{mc:"LevelIconGraphics",name:"l17",x:213,y:67},{mc:"LevelIconGraphics",name:"l18",x:288,y:82},{mc:"LevelIconGraphics",name:"l19",x:353,y:69},{mc:"LevelIconGraphics",name:"l20",x:425,y:83}]},{name:"cmcMainMenu",children:[{mc:"cmcMainMenuBack",name:"",x:0,y:0},{mc:"CreditsButton",name:"creditsButton",x:298,y:373},{mc:"PlayGameButton",name:"playButton",x:275,y:312,scaleX:1.0999755859375,scaleY:1.0999755859375},{mc:"_moreButton",name:"moreButton",x:278,y:429}]},{name:"cmcPause",children:[{mc:"cmcPauseDialog",name:"",x:0,y:0},{mc:"LevelsMapButton",name:"menuButton",x:27,y:156},{mc:"BackButton",name:"backButton",x:59,y:337}]},{name:"cmcYouLose",children:[{mc:"_levelFailedSign",name:"levelFailed",x:354,y:-203},{mc:"_walkthroughButton",name:"walkthroughButton",x:465,y:618},{mc:"_replayButton",name:"replayButton",x:271,y:618},{mc:"LevelsMapButton",name:"levelsButton",x:74,y:618}]},{name:"cmcYouWin",children:[{mc:"_levelCompletedSign",name:"levelCompleted",x:354,y:-203},{mc:"LevelsMapButton",name:"levelsButton",x:76,y:608},{mc:"_replayButton",name:"replayButton",x:269,y:608},{mc:"_nextButton",name:"nextButton",x:464,y:608},{mc:"_burgersBackground",name:"burgerBG",x:350,y:223},{mc:"_burg1",name:"b1",x:282,y:237},{mc:"_burg2",name:"b2",x:348,y:203},{mc:"_burg3",name:"b3",x:418,y:236}]},{name:"ElevatorGraphics",children:[{mc:"_elevatorBack",name:"",x:0,y:1},{mc:"_cogwheel",name:"cogwheel1",x:-8,y:2},{mc:"_cogwheel2",name:"cogwheel2",x:8,y:2},{mc:"_elevatorFront",name:"front",x:0,y:-2}]},{name:"PushButtonGraphics",children:[{mc:"_buttonTop",name:"top",x:0,y:-1},{mc:"_pushButtonBase",name:"",x:0,y:4}]},{name:"TopPanelBonusGraphics",children:[{mc:"cmcPanelBG",name:"panelBG",x:0,y:0},{mc:"_walkthroughButton",name:"walkthroughButton",x:273,y:4,scaleX:.75,scaleY:.75},{mc:"MenuButtonGraphics",name:"menuButton",x:530,y:4},{mc:"ReplayButtonGraphics",name:"replayButton",x:572,y:4},{mc:"SoundButtonGraphics",name:"soundButton",x:614,y:4},{mc:"MusicButtonGraphics",name:"musicButton",x:656,y:5}]},{name:"TopPanelGraphics",children:[{mc:"cmcPanelBG",name:"panelBG",x:0,y:0},{mc:"MenuButtonGraphics",name:"menuButton",x:530,y:4},{mc:"ReplayButtonGraphics",name:"replayButton",x:572,y:4},{mc:"SoundButtonGraphics",name:"soundButton",x:614,y:4},{mc:"MusicButtonGraphics",name:"musicButton",x:656,y:5},{mc:"_walkthroughButton",name:"walkthroughButton",x:280,y:4,scaleX:.75,scaleY:.75},{mc:"BurgerIndicator",name:"burgerPanel",x:28,y:7},{mc:"BurgerSmallGraphics",name:"b1",x:52,y:23},{mc:"BurgerSmallGraphics",name:"b2",x:83,y:23},{mc:"BurgerSmallGraphics",name:"b3",x:114,y:24}]},{name:"TriggerGraphics",children:[{mc:"_triggerHandle",name:"handle",x:2,y:5,scaleX:.999969482421875,scaleY:.999969482421875},{mc:"_triggerBase",name:"base",x:0,y:6}]}],e}(),PreloaderObjects=function(){function e(){}return e.data={frames:[{filename:"BigMenuButtonGraphics0000",frame:{x:585,y:1648,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigMenuButtonGraphics0001",frame:{x:640,y:1648,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigMenuButtonGraphics0002",frame:{x:585,y:1648,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigMusicMenuButton0000",frame:{x:491,y:1766,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigMusicMenuButton0001",frame:{x:491,y:1819,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigMusicMenuButton0002",frame:{x:546,y:1766,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigMusicMenuButton0003",frame:{x:546,y:1819,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigReplayButtonGraphics0000",frame:{x:585,y:1595,w:53,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:53,h:50},sourceSize:{w:53,h:50}},{filename:"BigReplayButtonGraphics0001",frame:{x:641,y:1595,w:53,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:53,h:50},sourceSize:{w:53,h:50}},{filename:"BigReplayButtonGraphics0002",frame:{x:585,y:1595,w:53,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:53,h:50},sourceSize:{w:53,h:50}},{filename:"BigSoundButtonGraphics0000",frame:{x:601,y:1766,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigSoundButtonGraphics0001",frame:{x:649,y:1701,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigSoundButtonGraphics0002",frame:{x:601,y:1819,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigSoundButtonGraphics0003",frame:{x:1064,y:1591,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"LeftCurtainGraphics0000",frame:{x:708,y:532,w:470,h:528},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.5,y:-1.1,w:470,h:528},sourceSize:{w:470,h:528}},{filename:"MusicButtonGraphics0000",frame:{x:656,y:1754,w:40,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:40,h:39},sourceSize:{w:40,h:39}},{filename:"MusicButtonGraphics0001",frame:{x:656,y:1796,w:40,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:40,h:39},sourceSize:{w:40,h:39}},{filename:"MusicButtonGraphics0002",frame:{x:656,y:1838,w:40,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:40,h:39},sourceSize:{w:40,h:39}},{filename:"MusicButtonGraphics0003",frame:{x:3,y:1835,w:40,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:40,h:39},sourceSize:{w:40,h:39}},{filename:"RightCurtainGraphics0000",frame:{x:1141,y:1063,w:370,h:527},rotated:!1,trimmed:!0,spriteSourceSize:{x:-368.9,y:-.8,w:370,h:527},sourceSize:{w:370,h:527}},{filename:"SoundButtonGraphics0000",frame:{x:46,y:1835,w:40,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:40,h:39},sourceSize:{w:40,h:39}},{filename:"SoundButtonGraphics0001",frame:{x:89,y:1835,w:40,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:40,h:39},sourceSize:{w:40,h:39}},{filename:"SoundButtonGraphics0002",frame:{x:132,y:1835,w:40,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:40,h:39},sourceSize:{w:40,h:39}},{filename:"SoundButtonGraphics0003",frame:{x:175,y:1835,w:40,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:40,h:39},sourceSize:{w:40,h:39}},{filename:"cbtnPlay0000",frame:{x:429,y:1595,w:153,h:67},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.1,y:0,w:153,h:67},sourceSize:{w:153,h:67}},{filename:"cbtnPlay0001",frame:{x:167,y:1642,w:153,h:67},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.1,y:0,w:153,h:67},sourceSize:{w:153,h:67}},{filename:"cbtnPlay0002",frame:{x:3,y:1685,w:153,h:67},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.1,y:0,w:153,h:67},sourceSize:{w:153,h:67}},{filename:"cmcFinalAnimationBG0000",frame:{x:3,y:537,w:702,h:526},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:702,h:526},sourceSize:{w:702,h:526}},{filename:"cmcIntroAnimationBG0000",frame:{x:3,y:1066,w:702,h:526},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:702,h:526},sourceSize:{w:702,h:526}},{filename:"cmcKizi0000",frame:{x:3,y:1595,w:161,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:1.7,w:161,h:87},sourceSize:{w:161,h:87}},{filename:"cmcLoaderBar0000",frame:{x:323,y:1665,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0001",frame:{x:323,y:1688,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0002",frame:{x:159,y:1743,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0003",frame:{x:403,y:1743,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0004",frame:{x:405,y:1711,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0005",frame:{x:3,y:1766,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0006",frame:{x:247,y:1766,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0007",frame:{x:3,y:1789,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0008",frame:{x:247,y:1789,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0009",frame:{x:3,y:1812,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0010",frame:{x:247,y:1812,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBarBack0000",frame:{x:159,y:1712,w:243,h:28},rotated:!1,trimmed:!0,spriteSourceSize:{x:8,y:9.3,w:243,h:28},sourceSize:{w:243,h:28}},{filename:"cmcLoaderBarFront0000",frame:{x:167,y:1595,w:259,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-1,w:259,h:44},sourceSize:{w:259,h:44}},{filename:"cmcPanelBG0000",frame:{x:3,y:3,w:702,h:531},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:-4.2,w:702,h:531},sourceSize:{w:702,h:531}},{filename:"cmcPreloaderBG0000",frame:{x:708,y:3,w:702,h:526},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:-.7,w:702,h:526},sourceSize:{w:702,h:526}},{filename:"cmcSidePad0000",frame:{x:708,y:1063,w:430,h:525},rotated:!1,trimmed:!0,spriteSourceSize:{x:-430,y:0,w:430,h:525},sourceSize:{w:430,h:525}},{filename:"cmcTitlePreloader0000",frame:{x:708,y:1591,w:353,h:259},rotated:!1,trimmed:!0,spriteSourceSize:{x:-11.5,y:0,w:353,h:259},sourceSize:{w:353,h:259}}],meta:{app:"Adobe Flash Professional",version:"13.1.0.226",image:"PreloaderObjects.png",format:"RGBA8888",size:{w:2048,h:2048},scale:"1"}},e}(),PreloaderObjectsLayouts=function(){function e(){}return e.data=[{name:"cmcPreloader",children:[{mc:"cmcPreloaderBG",name:"bg",x:0,y:0},{mc:"cbtnPlay",name:"btnPlay",x:279,y:423},{mc:"cmcLoaderBarBack",name:"barBack",x:222,y:432},{mc:"MusicButtonGraphics",name:"btnMusic",x:657,y:3},{mc:"SoundButtonGraphics",name:"btnSound",x:613,y:3},{mc:"cmcTitlePreloader",name:"title",x:197,y:136},{mc:"cmcLoaderBar",name:"bar",x:222,y:431},{mc:"cmcLoaderBarFront",name:"barFront",x:222,y:432}]}],e}(),WinningObjects=function(){function e(){}return e.data={frames:[{filename:"cmcCopLose0000",frame:{x:3664,y:979,w:172,h:205},rotated:!1,trimmed:!0,spriteSourceSize:{x:18,y:8.5,w:172,h:205},sourceSize:{w:172,h:205}},{filename:"cmcCopWin0000",frame:{x:1984,y:826,w:185,h:207},rotated:!1,trimmed:!0,spriteSourceSize:{x:-610.7,y:-80.8,w:587,h:252},sourceSize:{w:587,h:252}},{filename:"cmcCopWin0001",frame:{x:2704,y:217,w:193,h:228},rotated:!1,trimmed:!0,spriteSourceSize:{x:-564.7,y:-101.8,w:587,h:252},sourceSize:{w:587,h:252}},{filename:"cmcCopWin0002",frame:{x:2973,y:213,w:203,h:241},rotated:!1,trimmed:!0,spriteSourceSize:{x:-518.7,y:-115.8,w:587,h:252},sourceSize:{w:587,h:252}},{filename:"cmcCopWin0003",frame:{x:3759,y:198,w:213,h:249},rotated:!1,trimmed:!0,spriteSourceSize:{x:-472.7,y:-124.8,w:587,h:252},sourceSize:{w:587,h:252}},{filename:"cmcCopWin0004",frame:{x:3252,y:3,w:224,h:250},rotated:!1,trimmed:!0,spriteSourceSize:{x:-426.7,y:-125.8,w:587,h:252},sourceSize:{w:587,h:252}},{filename:"cmcCopWin0005",frame:{x:3479,y:206,w:200,h:249},rotated:!1,trimmed:!0,spriteSourceSize:{x:-380.7,y:-125.8,w:587,h:252},sourceSize:{w:587,h:252}},{filename:"cmcCopWin0006",frame:{x:1604,y:233,w:176,h:247},rotated:!1,trimmed:!0,spriteSourceSize:{x:-340.7,y:-123.8,w:587,h:252},sourceSize:{w:587,h:252}},{filename:"cmcCopWin0007",frame:{x:781,y:250,w:176,h:245},rotated:!1,trimmed:!0,spriteSourceSize:{x:-327.7,y:-121.8,w:587,h:252},sourceSize:{w:587,h:252}},{filename:"cmcCopWin0008",frame:{x:247,y:254,w:175,h:243},rotated:!1,trimmed:!0,spriteSourceSize:{x:-316.7,y:-119.8,w:587,h:252},sourceSize:{w:587,h:252}},{filename:"cmcCopWin0009",frame:{x:2389,y:397,w:175,h:241},rotated:!1,trimmed:!0,spriteSourceSize:{x:-306.7,y:-116.8,w:587,h:252},sourceSize:{w:587,h:252}},{filename:"cmcCopWin0010",frame:{x:2117,y:409,w:174,h:238},rotated:!1,trimmed:!0,spriteSourceSize:{x:-295.7,y:-113.8,w:587,h:252},sourceSize:{w:587,h:252}},{filename:"cmcCopWin0011",frame:{x:1318,y:421,w:174,h:235},rotated:!1,trimmed:!0,spriteSourceSize:{x:-284.7,y:-109.8,w:587,h:252},sourceSize:{w:587,h:252}},{filename:"cmcCopWin0012",frame:{x:425,y:426,w:173,h:230},rotated:!1,trimmed:!0,spriteSourceSize:{x:-271.7,y:-104.8,w:587,h:252},sourceSize:{w:587,h:252}},{filename:"cmcCopWin0013",frame:{x:3912,y:450,w:172,h:222},rotated:!1,trimmed:!0,spriteSourceSize:{x:-254.7,y:-95.8,w:587,h:252},sourceSize:{w:587,h:252}},{filename:"cmcCopWin0014",frame:{x:2418,y:986,w:170,h:206},rotated:!1,trimmed:!0,spriteSourceSize:{x:-231.7,y:-79.8,w:587,h:252},sourceSize:{w:587,h:252}},{filename:"cmcCopWin0015",frame:{x:3163,y:987,w:168,h:204},rotated:!1,trimmed:!0,spriteSourceSize:{x:-200.7,y:-77.8,w:587,h:252},sourceSize:{w:587,h:252}},{filename:"cmcCopWin0016",frame:{x:3839,y:979,w:172,h:205},rotated:!1,trimmed:!0,spriteSourceSize:{x:-200.7,y:-78.8,w:587,h:252},sourceSize:{w:587,h:252}},{filename:"cmcCopWin0017",frame:{x:3487,y:979,w:174,h:206},rotated:!1,trimmed:!0,spriteSourceSize:{x:-200.7,y:-79.8,w:587,h:252},sourceSize:{w:587,h:252}},{filename:"cmcCopWin0018",frame:{x:2985,y:963,w:175,h:206},rotated:!1,trimmed:!0,spriteSourceSize:{x:-200.7,y:-79.8,w:587,h:252},sourceSize:{w:587,h:252}},{filename:"cmcCopWin0019",frame:{x:870,y:953,w:176,h:207},rotated:!1,trimmed:!0,spriteSourceSize:{x:-200.7,y:-80.8,w:587,h:252},sourceSize:{w:587,h:252}},{filename:"cmcCopWin0020",frame:{x:690,y:953,w:177,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:-200.7,y:-81.8,w:587,h:252},sourceSize:{w:587,h:252}},{filename:"cmcCopWin0021",frame:{x:2591,y:987,w:168,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:-200.7,y:-81.8,w:587,h:252},sourceSize:{w:587,h:252}},{filename:"cmcCopWin0022",frame:{x:2762,y:987,w:168,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:-200.7,y:-81.8,w:587,h:252},sourceSize:{w:587,h:252}},{filename:"cmcCopWin20000",frame:{x:2172,y:992,w:160,h:209},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-96.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20001",frame:{x:1610,y:1001,w:160,h:209},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-96.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20002",frame:{x:1773,y:1001,w:160,h:209},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-96.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20003",frame:{x:222,y:1011,w:160,h:209},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-96.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20004",frame:{x:1049,y:1012,w:160,h:209},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-96.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20005",frame:{x:1212,y:1012,w:160,h:209},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-96.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20006",frame:{x:385,y:1028,w:160,h:209},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-96.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20007",frame:{x:1936,y:1036,w:160,h:209},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-96.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20008",frame:{x:1375,y:1113,w:160,h:209},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-96.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20009",frame:{x:3,y:1133,w:160,h:209},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-96.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20010",frame:{x:2661,y:1198,w:160,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-95.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20011",frame:{x:2099,y:1204,w:160,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-95.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20012",frame:{x:1538,y:1213,w:160,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-95.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20013",frame:{x:1701,y:1213,w:160,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-95.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20014",frame:{x:166,y:1223,w:160,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-95.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20015",frame:{x:1033,y:1224,w:160,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-95.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20016",frame:{x:1196,y:1224,w:160,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-95.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20017",frame:{x:329,y:1240,w:160,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-95.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20018",frame:{x:3823,y:1399,w:160,h:207},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-94.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20019",frame:{x:3823,y:1399,w:160,h:207},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-94.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20020",frame:{x:3259,y:1400,w:160,h:207},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-94.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20021",frame:{x:3422,y:1400,w:160,h:207},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-94.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20022",frame:{x:3422,y:1400,w:160,h:207},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-94.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20023",frame:{x:1864,y:1248,w:160,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-95.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20024",frame:{x:1359,y:1325,w:160,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-95.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20025",frame:{x:3,y:1345,w:160,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-95.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20026",frame:{x:711,y:1375,w:160,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-95.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20027",frame:{x:492,y:1376,w:160,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-95.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20028",frame:{x:2824,y:1384,w:160,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-95.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20029",frame:{x:3660,y:1399,w:160,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-95.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20030",frame:{x:870,y:1163,w:160,h:209},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-96.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20031",frame:{x:548,y:1164,w:160,h:209},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-96.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20032",frame:{x:2933,y:1172,w:160,h:209},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-96.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20033",frame:{x:3664,y:1187,w:160,h:209},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-96.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20034",frame:{x:3827,y:1187,w:160,h:209},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-96.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20035",frame:{x:3334,y:1188,w:160,h:209},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-96.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20036",frame:{x:3497,y:1188,w:160,h:209},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-96.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20037",frame:{x:3096,y:1194,w:160,h:209},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-96.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20038",frame:{x:2335,y:1195,w:160,h:209},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-96.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20039",frame:{x:2498,y:1198,w:160,h:209},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-96.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcCopWin20040",frame:{x:2172,y:992,w:160,h:209},rotated:!1,trimmed:!0,spriteSourceSize:{x:-187.2,y:-96.9,w:160,h:209},sourceSize:{w:160,h:209}},{filename:"cmcDogLose0000",frame:{x:3,y:963,w:216,h:167},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27.7,y:16.2,w:216,h:167},sourceSize:{w:216,h:167}},{filename:"cmcDogWin0000",frame:{x:1074,y:3,w:261,h:234},rotated:!1,trimmed:!0,spriteSourceSize:{x:288.4,y:-105.6,w:629,h:250},sourceSize:{w:629,h:250}},{filename:"cmcDogWin0001",frame:{x:811,y:3,w:260,h:244},rotated:!1,trimmed:!0,spriteSourceSize:{x:242.4,y:-116.6,w:629,h:250},sourceSize:{w:629,h:250}},{filename:"cmcDogWin0002",frame:{x:272,y:3,w:262,h:248},rotated:!1,trimmed:!0,spriteSourceSize:{x:193.4,y:-121.6,w:629,h:250},sourceSize:{w:629,h:250}},{filename:"cmcDogWin0003",frame:{x:3,y:3,w:266,h:246},rotated:!1,trimmed:!0,spriteSourceSize:{x:145.4,y:-119.6,w:629,h:250},sourceSize:{w:629,h:250}},{filename:"cmcDogWin0004",frame:{x:537,y:3,w:271,h:238},rotated:!1,trimmed:!0,spriteSourceSize:{x:97.4,y:-112.6,w:629,h:250},sourceSize:{w:629,h:250}},{filename:"cmcDogWin0005",frame:{x:1338,y:3,w:263,h:232},rotated:!1,trimmed:!0,spriteSourceSize:{x:73.4,y:-107.6,w:629,h:250},sourceSize:{w:629,h:250}},{filename:"cmcDogWin0006",frame:{x:1604,y:3,w:266,h:227},rotated:!1,trimmed:!0,spriteSourceSize:{x:56.4,y:-103.6,w:629,h:250},sourceSize:{w:629,h:250}},{filename:"cmcDogWin0007",frame:{x:1873,y:3,w:269,h:223},rotated:!1,trimmed:!0,spriteSourceSize:{x:43.4,y:-98.6,w:629,h:250},sourceSize:{w:629,h:250}},{filename:"cmcDogWin0008",frame:{x:2145,y:3,w:271,h:219},rotated:!1,trimmed:!0,spriteSourceSize:{x:31.4,y:-94.6,w:629,h:250},sourceSize:{w:629,h:250}},{filename:"cmcDogWin0009",frame:{x:2419,y:3,w:273,h:216},rotated:!1,trimmed:!0,spriteSourceSize:{x:21.5,y:-90.6,w:629,h:250},sourceSize:{w:629,h:250}},{filename:"cmcDogWin0010",frame:{x:2695,y:3,w:275,h:211},rotated:!1,trimmed:!0,spriteSourceSize:{x:10.5,y:-85.6,w:629,h:250},sourceSize:{w:629,h:250}},{filename:"cmcDogWin0011",frame:{x:2973,y:3,w:276,h:207},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.5,y:-80.6,w:629,h:250},sourceSize:{w:629,h:250}},{filename:"cmcDogWin0012",frame:{x:3479,y:3,w:277,h:200},rotated:!1,trimmed:!0,spriteSourceSize:{x:-12.5,y:-73.6,w:629,h:250},sourceSize:{w:629,h:250}},{filename:"cmcDogWin0013",frame:{x:3759,y:3,w:279,h:192},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.6,y:-64.6,w:629,h:250},sourceSize:{w:629,h:250}},{filename:"cmcDogWin0014",frame:{x:2419,y:222,w:282,h:172},rotated:!1,trimmed:!0,spriteSourceSize:{x:-57.6,y:-44.6,w:629,h:250},sourceSize:{w:629,h:250}},{filename:"cmcDogWin0015",frame:{x:1783,y:413,w:245,h:168},rotated:!1,trimmed:!0,spriteSourceSize:{x:-79.6,y:-39.6,w:629,h:250},sourceSize:{w:629,h:250}},{filename:"cmcDogWin0016",frame:{x:3179,y:256,w:241,h:175},rotated:!1,trimmed:!0,spriteSourceSize:{x:-79.6,y:-46.6,w:629,h:250},sourceSize:{w:629,h:250}},{filename:"cmcDogWin0017",frame:{x:3,y:252,w:241,h:178},rotated:!1,trimmed:!0,spriteSourceSize:{x:-79.6,y:-49.6,w:629,h:250},sourceSize:{w:629,h:250}},{filename:"cmcDogWin0018",frame:{x:1338,y:238,w:241,h:180},rotated:!1,trimmed:!0,spriteSourceSize:{x:-79.6,y:-51.6,w:629,h:250},sourceSize:{w:629,h:250}},{filename:"cmcDogWin0019",frame:{x:2145,y:225,w:241,h:181},rotated:!1,trimmed:!0,spriteSourceSize:{x:-79.6,y:-52.6,w:629,h:250},sourceSize:{w:629,h:250}},{filename:"cmcDogWin0020",frame:{x:1873,y:229,w:241,h:181},rotated:!1,trimmed:!0,spriteSourceSize:{x:-79.6,y:-52.6,w:629,h:250},sourceSize:{w:629,h:250}},{filename:"cmcDogWin0021",frame:{x:1074,y:240,w:241,h:180},rotated:!1,trimmed:!0,spriteSourceSize:{x:-79.6,y:-51.6,w:629,h:250},sourceSize:{w:629,h:250}},{filename:"cmcDogWin0022",frame:{x:537,y:244,w:241,h:179},rotated:!1,trimmed:!0,spriteSourceSize:{x:-79.6,y:-50.6,w:629,h:250},sourceSize:{w:629,h:250}},{filename:"cmcDogWin20000",frame:{x:232,y:835,w:226,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:-54,y:-60.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20001",frame:{x:2798,y:634,w:226,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:-54,y:-61.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20002",frame:{x:465,y:675,w:226,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:-54,y:-61.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20003",frame:{x:3179,y:434,w:227,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55,y:-61.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20004",frame:{x:2567,y:448,w:227,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55,y:-61.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20005",frame:{x:3682,y:450,w:227,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55,y:-61.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20006",frame:{x:1524,y:760,w:226,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:-54,y:-61.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20007",frame:{x:1152,y:836,w:226,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:-54,y:-60.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20008",frame:{x:461,y:852,w:226,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:-54,y:-60.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20009",frame:{x:3027,y:787,w:227,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55,y:-60.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20010",frame:{x:3489,y:803,w:227,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55,y:-60.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20011",frame:{x:1725,y:584,w:228,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56,y:-60.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20012",frame:{x:3,y:433,w:228,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56,y:-61.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20013",frame:{x:831,y:600,w:228,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56,y:-60.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20014",frame:{x:1062,y:600,w:228,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56,y:-60.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20015",frame:{x:3,y:610,w:228,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56,y:-60.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20016",frame:{x:3027,y:611,w:228,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56,y:-60.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20017",frame:{x:3639,y:627,w:228,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56,y:-60.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20018",frame:{x:2187,y:817,w:228,h:172},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56,y:-59.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20019",frame:{x:2567,y:634,w:228,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56,y:-60.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20020",frame:{x:1753,y:826,w:228,h:172},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56,y:-59.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20021",frame:{x:3258,y:635,w:228,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56,y:-60.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20022",frame:{x:2294,y:641,w:228,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56,y:-60.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20023",frame:{x:960,y:423,w:229,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:-57,y:-61.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20024",frame:{x:1956,y:650,w:228,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56,y:-60.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20025",frame:{x:234,y:659,w:228,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56,y:-60.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20026",frame:{x:1293,y:660,w:228,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56,y:-60.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20027",frame:{x:3719,y:803,w:227,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55,y:-60.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20028",frame:{x:2525,y:810,w:227,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55,y:-60.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20029",frame:{x:2755,y:811,w:227,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55,y:-60.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20030",frame:{x:3257,y:811,w:227,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55,y:-60.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20031",frame:{x:2797,y:457,w:227,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55,y:-61.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20032",frame:{x:3409,y:458,w:227,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55,y:-61.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20033",frame:{x:1495,y:483,w:227,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55,y:-61.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20034",frame:{x:601,y:498,w:227,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55,y:-61.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20035",frame:{x:694,y:776,w:226,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:-54,y:-61.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20036",frame:{x:923,y:776,w:226,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:-54,y:-61.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20037",frame:{x:1381,y:937,w:226,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:-54,y:-60.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20038",frame:{x:1381,y:937,w:226,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:-54,y:-60.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20039",frame:{x:3,y:786,w:226,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:-54,y:-61.9,w:229,h:174},sourceSize:{w:229,h:174}},{filename:"cmcDogWin20040",frame:{x:232,y:835,w:226,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:-54,y:-60.9,w:229,h:174},sourceSize:{w:229,h:174}}],meta:{app:"Adobe Flash Professional",version:"13.1.0.226",image:"WinningObjects.png",format:"RGBA8888",size:{w:4096,h:4096},scale:"1"}},e}(),WinningObjectsLayouts=function(){function e(){}return e.data=[],e}();!function(r){var o,e;(e=o||(o={})).PAUSED="Paused",e.RESUMED="Resumed";var t=function(){function e(){this.contentStatus=o.RESUMED}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.init=function(){var e=new h5ads.GameDistribution("db770064d7cd45a798b096d4397a0870");h5ads.adWrapper.setAdProvider(e),window.hasOwnProperty("fbrqSA")&&!0===window.fbrqSA&&(h5branding.Utils.ASSET_LOCATION="assets/")},e.prototype.showAd=function(e,t,i){var n=this;r.LoaderHelper.show(),h5ads.adWrapper.once(h5ads.AdEvents.CONTENT_PAUSED,function(){r.LoaderHelper.hide(),h5branding.google.sendScreenView("advertisement_"+e),i&&i.call(n),n.contentStatus=o.PAUSED,r.PauseHandler.getInstance().pause()}),h5ads.adWrapper.once(h5ads.AdEvents.CONTENT_RESUMED,function(){r.LoaderHelper.hide(),h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_PAUSED),h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_RESUMED),n.contentStatus=o.RESUMED,r.PauseHandler.getInstance().resume(),t&&t.call(n)}),h5ads.adWrapper.showAd(h5ads.AdType.interstitial)},e.prototype.isAdPlaying=function(){return this.contentStatus===o.PAUSED},e}();r.AdHandler=t}(Fabrique||(Fabrique={})),function(e){var t=function(){function e(){}return e.show=function(){var e=document.getElementById("loader");e&&(e.style.display="block")},e.hide=function(){var e=document.getElementById("loader");e&&(e.style.display="none")},e}();e.LoaderHelper=t}(Fabrique||(Fabrique={})),function(e){var t=function(){function t(e){this.game=e,this.focused=!0}return t.getInstance=function(e){return t.instance||(t.instance=new t(e)),t.instance},t.prototype.init=function(){var e=this;this.game.stage.disableVisibilityChange=!0,this.onPauseCallback=new Phaser.Signal,h5branding.Utils.isOnDevice()&&(document.addEventListener("pause",function(){return e.onPause()}),document.addEventListener("resume",function(){return e.onResume()})),this.game.onBlur.add(this.onBlur,this),this.game.onFocus.add(this.onFocus,this),this.game.onPause.add(this.onPause,this),this.game.onResume.add(this.onResume,this)},t.prototype.onBlur=function(){this.focused=!1,this.game.onPause.dispatch()},t.prototype.onFocus=function(){this.focused=!0,e.AdHandler.getInstance().isAdPlaying()||this.game.onResume.dispatch()},t.prototype.onPause=function(){this.game.sound.setMute(),this.onPauseCallback&&this.onPauseCallback.dispatch()},t.prototype.onResume=function(){this.game.sound.unsetMute()},t.prototype.pause=function(){this.game.onPause.dispatch()},t.prototype.resume=function(){this.hasFocus&&this.game.onResume.dispatch()},Object.defineProperty(t.prototype,"hasFocus",{get:function(){return this.focused},enumerable:!0,configurable:!0}),t}();e.PauseHandler=t}(Fabrique||(Fabrique={})),function(e){var t=function(){function e(){var o,e,a,t,i,s,n=this;this.apiKey="cBkvprYNJjmJtFnwUIiFw",this.recurringError=[],o=window,e=document,a="rg4js",o.RaygunObject=a,o[a]=o[a]||function(){(o[a].o=o[a].o||[]).push(arguments)},t=e.createElement("script"),i=e.getElementsByTagName("script")[0],t.async=1,t.src="//cdn.raygun.io/raygun4js/raygun.min.js",i.parentNode.insertBefore(t,i),s=o.onerror,o.onerror=function(e,t,i,n,r){s&&s(e,t,i,n,r),r||(r=new Error(e)),o[a].q=o[a].q||[],o[a].q.push({e:r})},rg4js("apiKey",this.apiKey),rg4js("enableCrashReporting",!0),rg4js("setVersion",version),rg4js("options",{ignore3rdPartyErrors:!0}),rg4js("onBeforeSend",function(e){return n.filterError(e)}),rg4js("enablePulse",!1)}return e.getInstance=function(){return null===e.instance&&(e.instance=new e),e.instance},e.prototype.filterError=function(e){if(void 0!==e&&e.Details&&e.Details.Error&&e.Details.Error.Message){if(-1!==this.recurringError.indexOf(e.Details.Error.Message))return!1;this.recurringError.push(e.Details.Error.Message)}return e},e.instance=null,e}();e.RayGun=t}(Fabrique||(Fabrique={}));var TweenMax=function(){function d(){this.dummy=0}return d.Init=function(e){d.game=e},d.delayedCall=function(e,t,i){var n=new d;return e*=1e3,n.tween=this.game.add.tween(n).to({dummy:1},e,Phaser.Easing.Linear.None,!0),n.tween.onComplete.add(t,i),n},d.to=function(e,t,i){var n=new d,r=0;i.delay&&(r=i.delay,delete i.delay);var o=!1;i.yoyo&&(o=i.yoyo,delete i.yoyo);var a=0;i.repeat&&(a=i.repeat,delete i.repeat);var s=0;i.repeatDelay&&(s=i.repeatDelay,delete i.repeatDelay);var p=null;i.onComplete&&(p=i.onComplete,delete i.onComplete);var l=e;i.onCompleteContext&&(l=i.onCompleteContext,delete i.onCompleteContext);var h=Phaser.Easing.Linear.None;if(i.ease){var u=i.ease;"Linear.easeNone"==u?h=Phaser.Easing.Linear.None:"Quad.easeOut"==u?h=Phaser.Easing.Quadratic.Out:"Quad.easeIn"==u?h=Phaser.Easing.Quadratic.In:"Back.easeOut"==u?h=Phaser.Easing.Back.Out:"Back.easeIn"==u&&(h=Phaser.Easing.Back.In),delete i.ease}return n.tween=this.game.add.tween(e).to(i,1e3*t,h,!0,1e3*r,a,o),p&&n.tween.onComplete.add(p,l),0!=s&&(n.tween.repeatDelay(1e3*s),o&&n.tween.yoyoDelay(1e3*s)),n},d.pauseAll=function(){d.game.tweens.pauseAll()},d.resumeAll=function(){d.game.tweens.resumeAll()},d.prototype.pause=function(){this.tween.pause()},d.prototype.paused=function(){return this.tween.isPaused},d.prototype.resume=function(){this.tween.resume()},d.prototype.kill=function(){this.tween.stop()},d}();!function(t){var e=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i._rotation=0,i._bodyType=null,i._body=null,i._shape=null,i._material=null,i._beginContactCallEnabled=!1,i._endContactCallEnabled=!1,i._visible=!0,i.points=null,t.rotation&&(i.rotation=t.rotation),i}return __extends(e,n),e.prototype.addPhysics=function(){this._nape=Constants.levelState._nape,this.defineBody(),this.createBody(),this.createMaterial(),this.createShape(),this.createFilter(),this.createConstraint()},e.prototype.destroy=function(){e.space.bodies.remove(this._body)},e.prototype.handlePreContact=function(e){return nape.callbacks.PreFlag.ACCEPT},e.prototype.handleBeginContact=function(e){},e.prototype.handleEndContact=function(e){},e.prototype.defineBody=function(){this._bodyType=nape.phys.BodyType.DYNAMIC},e.prototype.createBody=function(){if(this._body=new nape.phys.Body(this._bodyType,new nape.geom.Vec2(this._x,this._y)),(this._body.userData.myData=this).view){var e=0,t=0,i=0,n=0;if("topLeft"==this.registration){var r=Math.round((this.view.degrees+360)%360/90);"TriggerGraphics"==this.view.mc?1==r?(i=-5,n=-2):3==r&&(i=-4):"PushButtonGraphics"==this.view.mc?(2==r&&(n=-1),3==r&&(i=n=-7)):(e=-this.width/2,t=-this.height/2)}this._body.rotate(new nape.geom.Vec2(this._x+e,this._y+t),this.view.degrees*Math.PI/180),0!=i&&(this.x+=i),0!=n&&(this.y+=n)}this._body.rotate(new nape.geom.Vec2(this._x,this._y),this._rotation)},e.prototype.createMaterial=function(){this._material=new nape.phys.Material(.65,.57,1.2,1,0)},e.prototype.createShape=function(){if(null!=this.points&&1<this.points.length){for(var e=new nape.geom.Vec2List,t=0,i=this.points;t<i.length;t++){var n=i[t];e.push(new nape.geom.Vec2(n.x,n.y))}var r=new nape.shape.Polygon(e,this._material),o=r.validity();if(o!=nape.shape.ValidationResult.VALID){if(o!=nape.shape.ValidationResult.CONCAVE)throw new Error("Invalid polygon/polyline");return void new nape.geom.GeomPoly(e).convexDecomposition().foreach(function(e){this._body.shapes.add(new nape.shape.Polygon(e))})}this._shape=r}else 0!=this._radius?this._shape=new nape.shape.Circle(this._radius,null,this._material):this._shape=new nape.shape.Polygon(nape.shape.Polygon.box(this._width,this._height),this._material);this._body.shapes.add(this._shape)},e.prototype.createFilter=function(){this._body.setShapeFilters(new nape.dynamics.InteractionFilter(t.PhysicsCollisionCategories.Get("Level"),t.PhysicsCollisionCategories.GetAll()))},e.prototype.createConstraint=function(){this._body.space=e.space,this._body.cbTypes.add(e.PHYSICS_OBJECT)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._body?this._body.position.x:this._x},set:function(e){if(this._x=e,this._body){var t=this._body.position;t.x=this._x,this._body.position=t}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._body?this._body.position.y:this._y},set:function(e){if(this._y=e,this._body){var t=this._body.position;t.y=this._y,this._body.position=t}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._body?180*this._body.rotation/Math.PI:180*this._rotation/Math.PI},set:function(e){this._rotation=e*Math.PI/180,this._body&&(this._body.rotation=this._rotation)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this._initialized},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._initialized},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(e){this._radius=e,this._initialized},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return this._body},enumerable:!0,configurable:!0}),e.prototype.getBody=function(){return this._body},Object.defineProperty(e.prototype,"velocity",{get:function(){return[this._body.velocity.x,this._body.velocity.y,0]},set:function(e){this._body.velocity.setxy(e[0],e[1])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"beginContactCallEnabled",{get:function(){return this._beginContactCallEnabled},set:function(e){this._beginContactCallEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endContactCallEnabled",{get:function(){return this._endContactCallEnabled},set:function(e){this._endContactCallEnabled=e},enumerable:!0,configurable:!0}),e.prototype.draw=function(){this.view&&(this.view.degrees=this.rotation,this.view.x=this.x+this.offsetX,this.view.y=this.y+this.offsetY)},e.PHYSICS_OBJECT=new nape.callbacks.CbType,e}(t.CitrusObject);t.NapePhysicsObject=e}(objects||(objects={}));var NapeBody=nape.phys.Body;!function(e){var t=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i._vec=new Vec2,i.registration="topLeft",Constants.levelState.addObject(i),i}return __extends(e,n),e.prototype.hit=function(e){},e.prototype.action=function(){},e.prototype.moveHorizontally=function(e,t){(0<t&&e.velocity.x<t||t<0&&e.velocity.x>t)&&(e.velocity.x=t)},e.prototype.createMaterial=function(){n.prototype.createMaterial.call(this),this._material.elasticity=0,this._material.density=1,this._material.staticFriction=.1,this._material.dynamicFriction=1},e.prototype.destroy=function(){n.prototype.destroy.call(this),Constants.levelState.removeObject(this)},e}(e.NapePhysicsObject);e.LevelObject=t}(objects||(objects={}));var Vec2=nape.geom.Vec2;!function(e){var t=function(i){function e(e){var t=i.call(this,"ball",{view:e,radius:17,x:+e.x+18,y:+e.y-18,group:4})||this;return t.beginContactCallEnabled=!0,t.body.allowRotation=!0,t}return __extends(e,i),e.prototype.createMaterial=function(){i.prototype.createMaterial.call(this),this._material.elasticity=1,this._material.density=1.4,this._material.staticFriction=.5,this._material.dynamicFriction=1},e.prototype.handleBeginContact=function(e){},e}(e.LevelObject);e.BasketBall=t}(objects||(objects={})),function(e){var t=function(i){function e(e){var t=i.call(this,"bigBox",{view:e,width:e.width,height:e.height,x:+e.x+e.width/2,y:+e.y-e.height/2,group:4})||this;return t.beginContactCallEnabled=!0,t._isReadyToPlaySound=!0,t}return __extends(e,i),e.prototype.createMaterial=function(){i.prototype.createMaterial.call(this),this._material.elasticity=.1,this._material.density=.9,this._material.staticFriction=.1,this._material.dynamicFriction=.35},e.prototype.handleBeginContact=function(e){22<this._body.velocity.y&&(SoundManager.getInstance().playSound("BoxDownSound"),this._isReadyToPlaySound=!1,TweenMax.delayedCall(1.25,function(){this._isReadyToPlaySound=!0},this))},e}(e.LevelObject);e.BigBox=t}(objects||(objects={})),function(e){var t=function(i){function e(e){var t=i.call(this,"box",{view:e,width:33,height:33,x:+e.x+16.5,y:+e.y-16.5,group:4})||this;return t.beginContactCallEnabled=!0,t._isReadyToPlaySound=!0,t}return __extends(e,i),e.prototype.createMaterial=function(){i.prototype.createMaterial.call(this),this._material.density=1.5},e.prototype.handleBeginContact=function(e){22<this._body.velocity.y&&(SoundManager.getInstance().playSound("BoxDownSound"),this._isReadyToPlaySound=!1,TweenMax.delayedCall(1.25,this.isReadyToPlaySoundTrue,this))},e.prototype.isReadyToPlaySoundTrue=function(){this._isReadyToPlaySound=!0},e}(e.LevelObject);e.Box=t}(objects||(objects={})),function(n){var e=function(i){function e(){var e=this,t=new MovieClip("BulletGraphics");return(e=i.call(this,"bullet",{view:t,width:12,height:6,group:5})||this)._shape.sensorEnabled=!0,e.beginContactCallEnabled=!0,e}return __extends(e,i),e.prototype.handleBeginContact=function(e){var t=NapeUtils.CollisionGetOther(this,e);"hero"==t.name||"dog"==t.name?(Constants.hero.giveUp(),Constants.dog.giveUp(),Constants.levelState.failLevel(),this.die()):"fixedBox"==t.name||t instanceof n.Door||t instanceof n.Elevator?(SoundManager.getInstance().playSound("RicochetSound"),this.die()):"prisoner"==t.name?this.die():"box"==t.name||"plank"==t.name?(SoundManager.getInstance().playSound("RicochetSound"),this.die()):"removable"==t.name&&(SoundManager.getInstance().playSound("RicochetSound"),this.die())},e.prototype.hit=function(e){this.die()},e.prototype.die=function(){this.kill=!0;var e=new MovieClip("BulletFxGraphics");e.x=this.x,e.y=this.y,Constants.levelState.groupSprites[Constants.levelState.NumSpriteGroups-1].addChild(e),e.playOnce(),TweenMax.delayedCall(.75,e.remove,e)},e.prototype.defineBody=function(){this._bodyType=BodyType.KINEMATIC},e}(n.LevelObject);n.Bullet=e}(objects||(objects={})),function(n){var e=function(i){function e(e){var t=i.call(this,"burger",{view:e,radius:12,x:+e.x+14,y:+e.y-12,group:4})||this;return t._shape.sensorEnabled=!0,t.beginContactCallEnabled=!0,t._body.setShapeFilters(new InteractionFilter(n.PhysicsCollisionCategories.Get("hidden"),-1,n.PhysicsCollisionCategories.Get("hidden"))),t}return __extends(e,i),e.prototype.handleBeginContact=function(e){var t=NapeUtils.CollisionGetOther(this,e);"hero"!=t.name&&"dog"!=t.name||Constants.levelState.topPanel.collectBurger(this)},e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e}(n.LevelObject);n.Burger=e}(objects||(objects={}));var Ray=nape.geom.Ray,RayResult=nape.geom.RayResult;!function(o){var e=function(r){function e(e){var t,i=r.call(this,"camera",{view:e,width:20,height:20,x:+e.x+13,y:+e.y-13,group:4})||this;(i._shape.sensorEnabled=!0,i.updateCallEnabled=!0,i.lastObjectInChain=i,e.stop(),i._camera=new MovieClip("CameraGun",0,0),i._crossPoint=new MovieClip("crossPoint",-18,0),i._rayClip=new MovieClip("_beam",-18,0),i.view.addChild(i._camera),i._camera.addChild(i._rayClip),i.view.parent.addChild(i._crossPoint),i._filter=new InteractionFilter(1,o.PhysicsCollisionCategories.GetAllExcept("hidden","mirror")),i._minAngle=i._maxAngle=0,e.params.minAngle)&&(0!=(t=parseFloat(e.params.minAngle))&&(i._minAngle=-t));e.params.maxAngle&&(0!=(t=parseFloat(e.params.maxAngle))&&(i._maxAngle=-t));i._delay=parseFloat(e.params.delay);var n=1;return e.params.speedX&&(n=parseFloat(e.params.speedX)),i._camera.degrees=i._minAngle,i._minAngle!=i._maxAngle&&(i._motionTween=TweenMax.to(i._camera,Math.abs(i._minAngle-i._maxAngle)/6/n,{degrees:i._maxAngle,repeat:-1,yoyo:!0,repeatDelay:i._delay})),i.relax(),i}return __extends(e,r),e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e.prototype.relax=function(){"alert"==this._state&&this._currentTarget.cameraGoneAway(),this._state="relax",this._rayClip.gotoAndStop(e.GREEN_BEAM),this._crossPoint.gotoAndStop(e.GREEN_CROSS),this._motionTween&&this._motionTween.resume(),this._dangerTween&&(this._dangerTween.kill(),this._dangerTween=null)},e.prototype.danger=function(){this._currentTarget.detectByCamera(this.lastObjectInChain),this._state="danger",SoundManager.getInstance().playSound("YellowCameraSound"),this._rayClip.gotoAndStop(e.YELLOW_BEAM),this._crossPoint.gotoAndStop(e.YELLOW_CROSS),this._motionTween&&this._motionTween.pause(),this._relaxTween&&this._relaxTween.kill(),this._relaxTween=null,this._dangerTween&&this._dangerTween.paused()?this._dangerTween.resume():this._dangerTween=TweenMax.delayedCall(.7,this.alert,this)},e.prototype.suspect=function(){this._state="suspect",this._dangerTween.pause(),this._relaxTween||(this._relaxTween=TweenMax.delayedCall(1,this.relax,this))},e.prototype.alert=function(){"alert"!=this._state&&(SoundManager.getInstance().playSound("RedCameraSound"),this._rayClip.gotoAndStop(e.RED_BEAM),this._crossPoint.gotoAndStop(e.RED_CROSS)),this._state="alert",this._currentTarget.makeGiveUp()},e.prototype.update=function(e){if(r.prototype.update.call(this,e),this._ray=new Ray(this._body.worldCOM,Vec2.fromPolar(1,(this._camera.degrees+180)/180*Math.PI)),this._ray.maxDistance=1e3,this._rayResult=this._body.space.rayCast(this._ray,!1,this._filter),this._rayResult){var t=this._ray.at(this._rayResult.distance);this._crossPoint.visible=!0,this._crossPoint.x=t.x,this._crossPoint.y=t.y,this._rayClip.scale.x=(this._rayResult.distance-15.75)/100,this.process(this,this._rayResult,t.x,t.y)}},e.prototype.process=function(e,t,i,n){var r=t.shape.body.userData.myData.name;"prisoner"!=r||t.shape.body.userData.myData.isDisabled?"mirror"==r?(this.lastObjectInChain=t.shape.body.userData.myData,t.shape.body.userData.myData.drawRay(e,i,n,this)):"danger"==this._state?this.suspect():"alert"==this._state&&this.relax():"relax"==this._state||"suspect"==this._state?(this._currentTarget=t.shape.body.userData.myData,this.danger()):"alert"==this._state&&this.alert()},e.prototype.destroy=function(){r.prototype.destroy.call(this),this._motionTween&&this._motionTween.kill(),this._dangerTween&&this._dangerTween.kill(),this._relaxTween&&this._relaxTween.kill()},e.RED_CROSS=1,e.RED_BEAM=1,e.YELLOW_CROSS=3,e.YELLOW_BEAM=2,e.GREEN_CROSS=2,e.GREEN_BEAM=3,e}(o.LevelObject);o.Camera=e}(objects||(objects={})),function(e){var t=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i._registration="topLeft",1<i.view.totalFrames()&&i.view.playLoop(),i}return __extends(e,n),e}(e.CitrusObject);e.CitrusSprite=t}(objects||(objects={}));var NBody=nape.phys.Body;!function(e){var t=function(n){function e(e,t){void 0===t&&(t=null);var i=n.call(this,e,t)||this;return i.acceleration=30,i.maxVelocity=240,i.jumpHeight=330,i.inputChannel=0,i._groundContacts=[],i._groundContactsCount=0,i._onGround=!1,i._dynamicFriction=.5,i._playerMovingHero=!1,i._controlsEnabled=!0,i._isMoveKeyPressed=!1,i._isJustJumped=!1,i.registration="center",i.updateCallEnabled=!0,i.beginContactCallEnabled=!0,i.endContactCallEnabled=!0,i}return __extends(e,n),Object.defineProperty(e.prototype,"controlsEnabled",{get:function(){return this._controlsEnabled},set:function(e){this._controlsEnabled=e,this._body.velocity=Vec2.weak()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onGround",{get:function(){return this._onGround},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dynamicFriction",{get:function(){return this._dynamicFriction},set:function(e){this._material.dynamicFriction=this._dynamicFriction=e},enumerable:!0,configurable:!0}),e.prototype.update=function(e){n.prototype.update.call(this,e);var t=this._body.velocity;this._controlsEnabled&&(this._isMoveKeyPressed=!1,this._ce.input.isDoing("right",this.inputChannel)?(t.x+=this.acceleration,this._isMoveKeyPressed=!0,this.inverted=!1):this._ce.input.isDoing("left",this.inputChannel)?(t.x-=this.acceleration,this._isMoveKeyPressed=!0,this.inverted=!0):t.x*=.75,this._isMoveKeyPressed&&!this._playerMovingHero?(this._playerMovingHero=!0,this._material.dynamicFriction=0):!this._isMoveKeyPressed&&this._playerMovingHero&&(this._playerMovingHero=!1,this._material.dynamicFriction=this._dynamicFriction),this._onGround&&this._ce.input.isDoing("jump",this.inputChannel)&&(this._isMoveKeyPressed=!0,"dog"==name?0<this._groundContacts.length&&this._groundContacts[0]==Constants.hero.body&&0==Constants.hero.onGround||(t.y=-this.jumpHeight,this.jump()):0<this._groundContacts.length&&this._groundContacts[0]==Constants.dog.body&&0==Constants.dog.onGround||(t.y=-this.jumpHeight,this.jump())),t.x>this.maxVelocity?t.x=this.maxVelocity:t.x<-this.maxVelocity&&(t.x=-this.maxVelocity),this._body.velocity=t),this.updateAnimation(e)},e.prototype.createBody=function(){n.prototype.createBody.call(this),this._body.allowRotation=!1},e.prototype.createMaterial=function(){n.prototype.createMaterial.call(this),this._material.elasticity=0,this._material.staticFriction=0},e.prototype.handleBeginContact=function(e){var t=NapeUtils.CollisionGetOther(this,e);if(0<e.arbiters.length&&e.arbiters.at(0).collisionArbiter){var i=Math.round(180*e.arbiters.at(0).collisionArbiter.normal.angle/Math.PI);(45<=i&&i<=135||-30<i&&i<10||-90==i||-135==i)&&(1<i||i<-1)&&(this._groundContacts.push(t.body),this._onGround=!0)}},e.prototype.handleEndContact=function(e){var t=NapeUtils.CollisionGetOther(this,e),i=this._groundContacts.indexOf(t.body);-1!=i&&(this._groundContacts.splice(i,1),0==this._groundContacts.length&&(this._onGround=!1))},e.prototype.jump=function(){this._isJustJumped=!0,this._onGround=!1},e.prototype.updateAnimation=function(e){},e}(e.LevelObject);e.Hero=t}(objects||(objects={})),function(t){var e=function(i){function e(e){var t=i.call(this,"hero",{view:e,width:31,height:47,x:+e.x+23,y:+e.y-24,group:4})||this;return t._idleTime=0,t._isReadyToPlayStepSound=t._isReadyToPlayPushSound=!1,t._isObstacleOnLeft=t._isObstacleOnRight=t._isGaveUp=t._isLeftBalanceSensor=t._isRightBalanceSensor=!1,t.initialize2(),t.dynamicFriction=0,t}return __extends(e,i),e.prototype.initialize2=function(e){void 0===e&&(e=null),this._clip=this.view,(Constants.hero=this).inputChannel=Constants.hustlerInputChannel,this.jumpHeight=225,this.maxVelocity=80,this.acceleration=26,this._idleTime=0,this._isReadyToPlayStepSound=!0,this._isReadyToPlayPushSound=!0,this.offsetX=0,this.offsetY=25,this._clip.addAnimation("Stand",1,24,40,!0),this._clip.addAnimation("StandStill",1,1,1),this._clip.addAnimation("Walk",25,38,40,!0),this._clip.addAnimation("Sit",39,39,1),this._clip.addAnimation("SitWalk",39,56,40,!0),this._clip.addAnimation("JumpUp",81,89,40),this._clip.addAnimation("JumpDown",90,97,40),this._clip.addAnimation("Push",104,121,20,!0),this._clip.addAnimation("GiveUp",113,113,1),this._clip.addAnimation("Idle1",122,176,40,!1,this.stand,this),this._clip.addAnimation("Idle2",177,249,40,!1,this.stand,this),this._clip.addAnimation("Balance",250,322,40,!0),this._clip.addAnimation("Handcuff",323,359,40,!1,this.stand2,this),this._clip.addAnimation("Hurt",360,360,1),this._clip.playAnimation("Stand"),this.beginContactCallEnabled=!1,this.endContactCallEnabled=!1},e.prototype.jump=function(){this._isJustJumped||(this._clip.playAnimation("JumpUp"),SoundManager.getInstance().playSound("HustlerJumpSound"),this._isJustJumped=!0,TweenMax.delayedCall(.1,this.isJustJumpedFalse,this),this._onGround=!1)},e.prototype.isJustJumpedFalse=function(){this._isJustJumped=!1},e.prototype.giveUp=function(){this.controlsEnabled=!1,this._isGaveUp=!0,this._clip.playAnimation("Hurt")},e.prototype.handcuff=function(e){this.controlsEnabled=!1,e.x>this.x?this.inverted=!0:this.inverted=!1,this._clip.playAnimation("Handcuff"),SoundManager.getInstance().playSound("HandcuffSound"),Constants.dog.happy()},e.prototype.stand=function(){this._clip.playAnimation("Stand")},e.prototype.stand2=function(){Constants.levelState.isFinishing||(this.controlsEnabled=!0),this._clip.playAnimation("Stand")},e.prototype.createFilter=function(){this._filter=new InteractionFilter(t.PhysicsCollisionCategories.Get("hero"),t.PhysicsCollisionCategories.GetAllExcept("enemy")),this._shape.filter=this._filter,this._enemySensor.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,t.PhysicsCollisionCategories.Get("enemy")),this._topShape.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,-1),this._pushSensor.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,t.PhysicsCollisionCategories.GetAllExcept("tile","hidden")),this._balanceLeftSensor.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,t.PhysicsCollisionCategories.GetAllExcept("hidden")),this._balanceRightSensor.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,t.PhysicsCollisionCategories.GetAllExcept("hidden"))},e.prototype.createShape=function(){var e=this._width,t=this._height,i=t;this._shape=new Polygon([new Vec2(-e/2,-8),new Vec2(e/2,-8),new Vec2(e/2,t/2-5),new Vec2(e/2-8,t/2),new Vec2(-e/2+8,t/2),new Vec2(-e/2,t/2-5)],this._material),this._body.shapes.add(this._shape),this._enemySensor=new Polygon([new Vec2(-e/2,-8),new Vec2(e/2,-8),new Vec2(e/2,t/2-5),new Vec2(e/2-5,t/2),new Vec2(-e/2+5,t/2),new Vec2(-e/2,t/2-5)],this._material),this._enemySensor.sensorEnabled=!0,this._enemySensor.group=CollisionHelper.nonCollidable,this._body.shapes.add(this._enemySensor),this._topShape=new Polygon([new Vec2(-e/2+4,-20),new Vec2(e/2-4,-20),new Vec2(e/2-4,-8),new Vec2(-e/2+4,-8)],this._material),this._topShape.sensorEnabled=!0,this._body.shapes.add(this._topShape),this._topShape.group=CollisionHelper.nonCollidable,this._pushSensor=new Polygon([new Vec2(-e/2-4,-4),new Vec2(e/2+4,-4),new Vec2(e/2+4,0),new Vec2(-e/2-4,0)],this._material),this._pushSensor.sensorEnabled=!0,this._body.shapes.add(this._pushSensor),this._pushSensor.group=CollisionHelper.nonCollidable,this._balanceLeftSensor=new Polygon([new Vec2(-e/2+1,i/2+2),new Vec2(-2,i/2+2),new Vec2(-2,i/2+5),new Vec2(-e/2+1,i/2+5)],this._material),this._balanceLeftSensor.sensorEnabled=!0,this._body.shapes.add(this._balanceLeftSensor),this._balanceLeftSensor.group=CollisionHelper.nonCollidable,this._balanceRightSensor=new Polygon([new Vec2(2,i/2+2),new Vec2(e/2-1,i/2+2),new Vec2(e/2-1,i/2+5),new Vec2(2,i/2+5)],this._material),this._balanceRightSensor.sensorEnabled=!0,this._body.shapes.add(this._balanceRightSensor),this._balanceRightSensor.group=CollisionHelper.nonCollidable},e.prototype.handleBeginContact=function(e){},e.prototype.handleEndContact=function(e){},e.prototype.checkCollisions=function(){this._isObstacleOnLeft=!1,this._isObstacleOnRight=!1,this._isLeftBalanceSensor=!1,this._isRightBalanceSensor=!1;for(var e=this._groundContactsCount=0;e<this._body.arbiters.length;e++){var t=this._body.arbiters.at(e);if(t.shape1==this._topShape||t.shape2==this._topShape){var i=t.shape1;t.shape1==this._topShape&&(i=t.shape2),i.sensorEnabled||(this._isDuck=!0)}t.shape1==this._pushSensor?t.body2.position.x<this.x?this._isObstacleOnLeft=!0:this._isObstacleOnRight=!0:t.shape2==this._pushSensor&&(t.body1.position.x<this.x?this._isObstacleOnLeft=!0:this._isObstacleOnRight=!0),t.shape1==this._balanceLeftSensor||t.shape2==this._balanceLeftSensor?this._isLeftBalanceSensor=!0:t.shape1!=this._balanceRightSensor&&t.shape2!=this._balanceRightSensor||(this._isRightBalanceSensor=!0),t.shape1==this._shape?this.checkGround(t,t.body2):t.shape2==this._shape&&this.checkGround(t,t.body1)}0==this._groundContactsCount&&(this._onGround=!1)},e.prototype.checkGround=function(e,t){if(e.collisionArbiter){var i=Math.round(180*e.collisionArbiter.normal.angle/Math.PI);if(t==Constants.dog.body&&!Constants.dog.onGround)return;(15<=i&&i<=175||-30<i&&i<10||-90==i||-135==i)&&(1<i||i<-1)&&this._body.position.y<t.position.y-15&&(this._groundContactsCount++,this._onGround=!0)}},e.prototype.update=function(e){this.checkCollisions(),i.prototype.update.call(this,e),Constants._ce.input.isDoing("down",this.inputChannel)?this._isDuck=!0:this._isDuck=!1},e.prototype.updateAnimation=function(e){if(!this._isGaveUp&&"Handcuff"!=this._clip.currentAnimation){this._isMoveKeyPressed||this._isDuck?this._idleTime=0:this._idleTime+=e,14<this._idleTime&&(.5<Math.random()?(this._idleTime=0,SoundManager.getInstance().playSound("CopIdle1Sound"),this._clip.playAnimation("Idle1")):(this._idleTime=0,SoundManager.getInstance().playSound("CopIdle2Sound"),this._clip.playAnimation("Idle2")));var t=this._body.velocity.x;this._onGround&&!this._isJustJumped?Constants._ce.input.isDoing("right",this.inputChannel)&&this._isObstacleOnRight||Constants._ce.input.isDoing("left",this.inputChannel)&&this._isObstacleOnLeft?(this._isReadyToPlayPushSound&&(this._isReadyToPlayPushSound=!1,TweenMax.delayedCall(2,this.isReadyToPlayPushSoundTrue,this),SoundManager.getInstance().playSound("HustlerPushSound")),this._clip.playAnimation("Push")):t<-10||10<t?(SoundManager.getInstance().stopSound("HustlerPushSound"),this._isDuck?this._clip.playAnimation("SitWalk"):this._isMoveKeyPressed&&(SoundManager.getInstance().stopSound("CopIdle1Sound"),SoundManager.getInstance().stopSound("CopIdle2Sound"),this._clip.playAnimation("Walk")),this._isReadyToPlayStepSound&&(this._isReadyToPlayStepSound=!1,TweenMax.delayedCall(.2,this.isReadyToPlayStepSoundTrue,this),SoundManager.getInstance().playSound("HustlerStepSound"))):"Idle1"!=this._clip.currentAnimation&&"Idle2"!=this._clip.currentAnimation&&(SoundManager.getInstance().stopSound("HustlerPushSound"),this._isDuck?this._clip.playAnimation("Sit"):this._isLeftBalanceSensor&&!this._isRightBalanceSensor?(this._clip.playAnimation("Balance"),this.inverted=!0):!this._isLeftBalanceSensor&&this._isRightBalanceSensor?(this._clip.playAnimation("Balance"),this.inverted=!1):(this.inverted=!1,this._clip.playAnimation("Stand"))):"JumpDown"!=this._clip.currentAnimation&&50<this._body.velocity.y&&this._clip.playAnimation("JumpDown")}},e.prototype.isReadyToPlayPushSoundTrue=function(){this._isReadyToPlayPushSound=!0},e.prototype.isReadyToPlayStepSoundTrue=function(){this._isReadyToPlayStepSound=!0},e}(t.Hero);t.Cop=e}(objects||(objects={}));var PivotJoint=nape.constraint.PivotJoint,Shape=nape.shape.Shape,InteractionFilter=nape.dynamics.InteractionFilter,Polygon=nape.shape.Polygon,Arbiter=nape.dynamics.Arbiter;!function(t){var e=function(i){function e(e){var t=i.call(this,"dog",{view:e,width:48,height:46,x:+e.x+33,y:+e.y-24,group:4})||this;return t._idleTime=0,t._isReadyToPlayStepSound=t._isReadyToPlayPushSound=t._isReadyToPlayBarkAnimation=!1,t._isObstacleOnLeft=t._isObstacleOnRight=t._isGaveUp=t._isLeftBalanceSensor=t._isRightBalanceSensor=!1,t._isMainHeroTouching=!1,t.initialize2(),t.dynamicFriction=0,t}return __extends(e,i),e.prototype.initialize2=function(e){void 0===e&&(e=null),this._clip=this.view,(Constants.dog=this).inputChannel=Constants.dogInputChannel,this.jumpHeight=165,this.maxVelocity=86,this.acceleration=23,this._idleTime=0,this._isReadyToPlayStepSound=!0,this._isReadyToPlayPushSound=!0,this._isReadyToPlayBarkAnimation=!0,this.offsetX=0,this.offsetY=24,this._clip.addAnimation("Stand",1,35,40,!0),this._clip.addAnimation("Walk",36,54,40,!0),this._clip.addAnimation("JumpUp",55,63,40),this._clip.addAnimation("JumpDown",79,83,30),this._clip.addAnimation("Balance",84,122,40),this._clip.addAnimation("Push",123,149,40,!0),this._clip.addAnimation("Hurt",150,150,1),this._clip.addAnimation("Idle1",151,199,40,!1,this.stand,this),this._clip.addAnimation("Idle2",200,306,40,!1,this.stand,this),this._clip.addAnimation("Bark",307,327,40,!1,this.stand,this),this._clip.addAnimation("Roar",328,358,40,!1,this.stand,this),this._clip.addAnimation("Happy",359,380,40,!0),this._clip.playAnimation("Stand")},e.prototype.handleBeginContact=function(e){"hero"==NapeUtils.CollisionGetOther(this,e).name&&(this._isMainHeroTouching=!0)},e.prototype.handleEndContact=function(e){"hero"==NapeUtils.CollisionGetOther(this,e).name&&(this._isMainHeroTouching=!1)},e.prototype.jump=function(){this._isJustJumped||(this._clip.playAnimation("JumpUp"),SoundManager.getInstance().playSound("DogJumpSound"),this._isJustJumped=!0,TweenMax.delayedCall(.1,this.isJustJumpedFalse,this),this._onGround=!1)},e.prototype.isJustJumpedFalse=function(){this._isJustJumped=!1},e.prototype.giveUp=function(){this.controlsEnabled=!1,this._isGaveUp=!0,this._clip.playAnimation("Hurt")},e.prototype.bark=function(){this._isReadyToPlayBarkAnimation&&(this._isReadyToPlayBarkAnimation=!1,this.controlsEnabled=!1,this._clip.playAnimation("Bark"),SoundManager.getInstance().playSound("DogBarkSound"),TweenMax.delayedCall(.45,this.controlsEnabledTrue,this),TweenMax.delayedCall(3,this.isReadyToPlayBarkAnimationTrue,this))},e.prototype.controlsEnabledTrue=function(){this.controlsEnabled=!0},e.prototype.isReadyToPlayBarkAnimationTrue=function(){this._isReadyToPlayBarkAnimation=!0},e.prototype.happy=function(){this._clip.playAnimation("Happy"),TweenMax.delayedCall(1,this.stand,this)},e.prototype.stand=function(){this._clip.playAnimation("Stand")},e.prototype.createFilter=function(){this._filter=new InteractionFilter(t.PhysicsCollisionCategories.Get("hero"),t.PhysicsCollisionCategories.GetAllExcept("enemy")),this._shape.filter=this._filter,this._shapeReversed.filter=this._filter,this._enemySensor.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.Get("tile"),1,t.PhysicsCollisionCategories.Get("tile")),this._pushSensor.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,t.PhysicsCollisionCategories.GetAllExcept("tile","hidden","enemy")),this._balanceLeftSensor.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,t.PhysicsCollisionCategories.GetAllExcept("hidden")),this._balanceRightSensor.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,t.PhysicsCollisionCategories.GetAllExcept("hidden"))},e.prototype.createMaterial=function(){i.prototype.createMaterial.call(this),this._material.density=1.2},e.prototype.createShape=function(){var e=this.width,t=this._height,i=this.height;this._shape=new Polygon([new Vec2(-e/2,-t/2+18),new Vec2(-e/2+4,-t/2+15),new Vec2(e/2-15,-t/2+15),new Vec2(e/2+4,5),new Vec2(e/2+4,t/2-14),new Vec2(e/2-18,t/2),new Vec2(-e/2+15,t/2),new Vec2(-e/2,t/2-6)],this._material),this._body.shapes.add(this._shape),this._shapeReversed=new Polygon([new Vec2(-e/2-4,5),new Vec2(-e/2+15,-t/2+15),new Vec2(e/2-4,-t/2+15),new Vec2(e/2,-t/2+18),new Vec2(e/2,t/2-6),new Vec2(e/2-18,t/2),new Vec2(-e/2+15,t/2),new Vec2(-e/2-4,t/2-14)],this._material),this._body.shapes.add(this._shapeReversed),this._enemySensor=new Polygon([new Vec2(-e/2,-t/2+9),new Vec2(e/2,-t/2+9),new Vec2(e/2,-t/2+12),new Vec2(-e/2,-t/2+12)],this._material),this._body.shapes.add(this._enemySensor),this._pushSensor=new Polygon([new Vec2(-e/2-4,0),new Vec2(e/2+4,0),new Vec2(e/2+2,2),new Vec2(e/2-4,t/2-6),new Vec2(-e/2+4,t/2-6),new Vec2(-e/2-2,2)],this._material),this._pushSensor.sensorEnabled=!0,this._body.shapes.add(this._pushSensor),this._pushSensor.group=CollisionHelper.nonCollidable,this._balanceLeftSensor=new Polygon([new Vec2(-e/2+1,i/2+2),new Vec2(-10,i/2+2),new Vec2(-10,i/2+5),new Vec2(-e/2+1,i/2+5)],this._material),this._balanceLeftSensor.sensorEnabled=!0,this._body.shapes.add(this._balanceLeftSensor),this._balanceLeftSensor.group=CollisionHelper.nonCollidable,this._balanceRightSensor=new Polygon([new Vec2(10,i/2+2),new Vec2(e/2-1,i/2+2),new Vec2(e/2-1,i/2+5),new Vec2(10,i/2+5)],this._material),this._balanceRightSensor.sensorEnabled=!0,this._body.shapes.add(this._balanceRightSensor),this._balanceRightSensor.group=CollisionHelper.nonCollidable},e.prototype.checkCollisions=function(){this._isObstacleOnLeft=!1,this._isObstacleOnRight=!1,this._isLeftBalanceSensor=!1,this._isRightBalanceSensor=!1;for(var e=this._groundContactsCount=0;e<this._body.arbiters.length;e++){var t=this._body.arbiters.at(e);t.shape1==this._pushSensor?t.body2.position.x<this.x?this._isObstacleOnLeft=!0:this._isObstacleOnRight=!0:t.shape2==this._pushSensor&&(t.body1.position.x<this.x?this._isObstacleOnLeft=!0:this._isObstacleOnRight=!0),t.shape1==this._balanceLeftSensor||t.shape2==this._balanceLeftSensor?this._isLeftBalanceSensor=!0:t.shape1!=this._balanceRightSensor&&t.shape2!=this._balanceRightSensor||(this._isRightBalanceSensor=!0),t.shape1==this._shape||t.shape1==this._shapeReversed?this.checkGround(t,t.body2):t.shape2!=this._shape&&t.shape2!=this._shapeReversed||this.checkGround(t,t.body1)}0==this._groundContactsCount&&(this._onGround=!1)},e.prototype.checkGround=function(e,t){if(e.collisionArbiter){var i=Math.round(180*e.collisionArbiter.normal.angle/Math.PI);if(t==Constants.hero.body&&!Constants.hero.onGround)return;(15<=i&&i<=175||-30<i&&i<10||-90==i||-135==i)&&(1<i||i<-1)&&this._body.position.y<t.position.y-15&&(this._groundContactsCount++,this._onGround=!0)}},e.prototype.update=function(e){this.checkCollisions(),i.prototype.update.call(this,e)},e.prototype.updateAnimation=function(e){if(!this._isGaveUp&&"Grab"!=this._clip.currentAnimation&&"Bark"!=this._clip.currentAnimation&&"Happy"!=this._clip.currentAnimation){this._isMoveKeyPressed||this._isMainHeroTouching?this._idleTime=0:this._idleTime+=e,17<this._idleTime&&(.5<Math.random()?(this._idleTime=0,SoundManager.getInstance().playSound("DogIdle1Sound"),this._clip.playAnimation("Idle1")):(this._idleTime=0,SoundManager.getInstance().playSound("DogIdle2Sound"),this._clip.playAnimation("Idle2")));var t=this._body.velocity.x;t<0?(this._shape.sensorEnabled=!1,this._shapeReversed.sensorEnabled=!0,this.inverted=!0):0<t&&(this._shape.sensorEnabled=!0,this._shapeReversed.sensorEnabled=!1,this.inverted=!1),this._onGround&&!this._isJustJumped?Constants._ce.input.isDoing("right",this.inputChannel)&&this._isObstacleOnRight||Constants._ce.input.isDoing("left",this.inputChannel)&&this._isObstacleOnLeft?(this._isReadyToPlayStepSound&&(this._isReadyToPlayStepSound=!1,TweenMax.delayedCall(.4,this.isReadyToPlayStepSoundTrue,this),SoundManager.getInstance().playSound("DogStepSound")),this._clip.playAnimation("Push")):t<-7||7<t?this._isMoveKeyPressed&&(SoundManager.getInstance().stopSound("DogIdle1Sound"),SoundManager.getInstance().stopSound("DogIdle2Sound"),this._clip.playAnimation("Walk"),this._isReadyToPlayStepSound&&(this._isReadyToPlayStepSound=!1,TweenMax.delayedCall(.4,this.isReadyToPlayStepSoundTrue,this),SoundManager.getInstance().playSound("DogStepSound"))):"Idle1"!=this._clip.currentAnimation&&"Idle2"!=this._clip.currentAnimation&&(this._isLeftBalanceSensor&&!this._isRightBalanceSensor?(this._clip.playAnimation("Balance"),this.inverted=!1):!this._isLeftBalanceSensor&&this._isRightBalanceSensor?(this._clip.playAnimation("Balance"),this.inverted=!0):this._clip.playAnimation("Stand")):"JumpDown"!=this._clip.currentAnimation&&50<this._body.velocity.y&&this._clip.playAnimation("JumpDown")}},e.prototype.isReadyToPlayStepSoundTrue=function(){this._isReadyToPlayStepSound=!0},e}(t.Hero);t.Dog=e}(objects||(objects={})),function(s){var e=function(o){function a(e){var t=this,i=e._degrees,n=e.rotation=0;e.params.type&&(n=Math.round(parseFloat(e.params.type))),0==n&&(n=1);var r="subject"+n;return e.gotoAndStop(n),(t=o.call(this,r,{view:e,rotation:i,width:20,height:69,x:+e.x+10*Math.cos(i/180*Math.PI)+35*Math.sin(i/180*Math.PI),y:+e.y-35*Math.cos(i/180*Math.PI)+10*Math.sin(i/180*Math.PI),group:2})||this)._isGlass=0<=e.frameName.indexOf("GlassDoorGraphics"),i=(i%360+360)%360,0==Math.round(i)?t._direction=a.UP:180==Math.round(i)?t._direction=a.DOWN:90==Math.round(i)?t._direction=a.LEFT:270==Math.round(i)&&(t._direction=a.RIGHT),t._initX=t.x,t._initY=t.y,t.updateCallEnabled=!0,t._isGlass&&t._body.setShapeFilters(new InteractionFilter(s.PhysicsCollisionCategories.Get("hidden"))),t}return __extends(a,o),a.prototype.action=function(){this._isOpened?this._isOpened=!1:this._isOpened=!0,this._isMoving=!0,SoundManager.getInstance().playSound("OpenDoorSound")},a.prototype.stop=function(){this._isMoving=!1,this.body.velocity.x=0,this.body.velocity.y=0},a.prototype.defineBody=function(){this._bodyType=BodyType.KINEMATIC},a.prototype.update=function(e){o.prototype.update.call(this,e),this._isMoving&&(this._direction==a.UP?this._isOpened?this.y<=this._initY-69.5?this.stop():this._body.velocity.y=-50:this.y>=this._initY-.5?this.stop():this._body.velocity.y=50:this._direction==a.DOWN?this._isOpened?this.y>=this._initY+69.5?this.stop():this._body.velocity.y=50:this.y<=this._initY+.5?this.stop():this._body.velocity.y=-50:this._direction==a.LEFT?this._isOpened?this.x<=this._initX-69.5?this.stop():this._body.velocity.x=-50:this.x>=this._initX-.5?this.stop():this._body.velocity.x=50:this._direction==a.RIGHT&&(this._isOpened?this.x>=this._initX+69.5?this.stop():this._body.velocity.x=50:this.x<=this._initX+.5?this.stop():this._body.velocity.x=-50))},a.UP=1,a.DOWN=2,a.LEFT=3,a.RIGHT=4,a}(s.LevelObject);s.Door=e}(objects||(objects={})),function(e){var t=function(o){function a(e){var t=this,i=0;e.params.type&&(i=Math.round(parseFloat(e.params.type))),0==i&&(i=1);var n="subject"+String(i),r=!1;return"BigElevatorGraphics"==e.mc&&(r=!0),(t=o.call(this,n,{view:e,width:+(r?102:70),height:+(r?20:16),x:+e.x+ +(r?104:70)/2,y:+e.y-(r?10:12),group:4})||this).view.getChild("front").gotoAndStop(i),t._isBig=r,t._distanceX=parseFloat(e.params.distanceX),t._distanceY=parseFloat(e.params.distanceY),t._speedX=parseFloat(e.params.speedX),t._speedY=parseFloat(e.params.speedY),t._speedY<0?t._direction=a.UP:0<t._speedY?t._direction=a.DOWN:t._speedX<0?t._direction=a.LEFT:0<t._speedX&&(t._direction=a.RIGHT),t._initX=t.x,t._initY=t.y,t.updateCallEnabled=!0,t}return __extends(a,o),a.prototype.action=function(){this._isMovingToTarget?this._isMovingToTarget=!1:this._isMovingToTarget=!0,this._isMoving=!0},a.prototype.defineBody=function(){this._bodyType=BodyType.KINEMATIC},a.prototype.createShape=function(){o.prototype.createShape.call(this),this._isBig?(this._sensor1=new Polygon(OzUtil.verticesArrayToVec2([[56,0],[56,13],[10,13],[10,0]]),this._material),this._sensor2=new Polygon(OzUtil.verticesArrayToVec2([[-56,0],[-56,13],[-10,13],[-10,0]]),this._material)):(this._sensor1=new Polygon(OzUtil.verticesArrayToVec2([[40,0],[40,13],[10,13],[10,0]]),this._material),this._sensor2=new Polygon(OzUtil.verticesArrayToVec2([[-40,0],[-40,13],[-10,13],[-10,0]]),this._material)),this._sensor3=new Polygon(OzUtil.verticesArrayToVec2([[-33,0],[-33,13],[33,13],[33,0]]),this._material),this._sensor1.sensorEnabled=!0,this._sensor2.sensorEnabled=!0,this._sensor3.sensorEnabled=!0,this._body.shapes.add(this._sensor1),this._body.shapes.add(this._sensor2),this._body.shapes.add(this._sensor3)},a.prototype.createMaterial=function(){o.prototype.createMaterial.call(this),this._material.elasticity=0,this._material.dynamicFriction=8},a.prototype.pause=function(){this._isPaused=!0,this.body.velocity.x=0,this.body.velocity.y=0},a.prototype.stop=function(){this._isMoving=!1,this.body.velocity.x=0,this.body.velocity.y=0},a.prototype.update=function(e){if(this._isPaused=!1,this._isMoving){for(var t=0;t<this._body.arbiters.length;t++){var i=this._body.arbiters.at(t);this._direction==a.LEFT&&!this._isMovingToTarget||this._direction==a.RIGHT&&this._isMovingToTarget?i.shape1==this._sensor1?i.body2.type==BodyType.DYNAMIC&&"box"!=i.body2.userData.myData.name&&this.pause():i.shape2==this._sensor1&&i.body1.type==BodyType.DYNAMIC&&"box"!=i.body1.userData.myData.name&&this.pause():this._direction==a.LEFT&&this._isMovingToTarget||this._direction==a.RIGHT&&!this._isMovingToTarget?i.shape1==this._sensor2?i.body2.type==BodyType.DYNAMIC&&"box"!=i.body2.userData.myData.name&&this.pause():i.shape2==this._sensor2&&i.body1.type==BodyType.DYNAMIC&&"box"!=i.body1.userData.myData.name&&this.pause():(this._direction==a.DOWN&&this._isMovingToTarget||this._direction==a.UP&&!this._isMovingToTarget)&&(i.shape1==this._sensor3?i.body2.type==BodyType.DYNAMIC&&"box"!=i.body2.userData.myData.name&&this.pause():i.shape2==this._sensor3&&i.body1.type==BodyType.DYNAMIC&&"box"!=i.body1.userData.myData.name&&this.pause())}this._direction==a.UP?this._isMovingToTarget?this.y<=this._initY-this._distanceY?this.stop():this._isPaused||(this._body.velocity.y=this._speedY):this.y>=this._initY?this.stop():this._isPaused||(this._body.velocity.y=-this._speedY):this._direction==a.DOWN?this._isMovingToTarget?this.y>=this._initY+this._distanceY?this.stop():this._isPaused||(this._body.velocity.y=this._speedY):this.y<=this._initY?this.stop():this._isPaused||(this._body.velocity.y=-this._speedY):this._direction==a.LEFT?this._isMovingToTarget?this.x<=this._initX-this._distanceX?this.stop():this._isPaused||(this._body.velocity.x=this._speedX):this.x>=this._initX?this.stop():this._isPaused||(this._body.velocity.x=-this._speedX):this._direction==a.RIGHT&&(this._isMovingToTarget?this.x>=this._initX+this._distanceX?this.stop():this._isPaused||(this._body.velocity.x=this._speedX):this.x<=this._initX?this.stop():this._isPaused||(this._body.velocity.x=-this._speedX))}0!=this.body.velocity.x||0!=this.body.velocity.y?(this._isMovingToTarget?(this.view.getChild("cogwheel1").degrees-=6,this.view.getChild("cogwheel2").degrees+=6):(this.view.getChild("cogwheel1").degrees+=6,this.view.getChild("cogwheel2").degrees-=6),this._isPlayingSound||(SoundManager.getInstance().playSound("ElevatorSound"),this._isPlayingSound=!0)):this._isPlayingSound&&(SoundManager.getInstance().stopSound("ElevatorSound"),this._isPlayingSound=!1),o.prototype.update.call(this,e)},a.prototype.destroy=function(){o.prototype.destroy.call(this),SoundManager.getInstance().stopSound("ElevatorSound")},a.UP=1,a.DOWN=2,a.LEFT=3,a.RIGHT=4,a}(e.LevelObject);e.Elevator=t}(objects||(objects={}));var BodyType=nape.phys.BodyType;!function(i){var e=function(t){function e(e){return t.call(this,"limiter",{width:15,height:15,x:+e.x+7.5,y:+e.y-7.5})||this}return __extends(e,t),e.prototype.createFilter=function(){this._body.setShapeFilters(new InteractionFilter(i.PhysicsCollisionCategories.Get("limiter"),i.PhysicsCollisionCategories.Get("enemy"),i.PhysicsCollisionCategories.Get("limiter"),i.PhysicsCollisionCategories.Get("enemy")))},e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e}(i.LevelObject);i.EnemyLimiter=e}(objects||(objects={})),function(i){var e=function(t){function e(e){return t.call(this,"fixedBox",{width:+e.width,height:+e.height,x:+(e.x+e.width/2),y:+(e.y+e.height/2)})||this}return __extends(e,t),e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e.prototype.createFilter=function(){this._body.setShapeFilters(new InteractionFilter(i.PhysicsCollisionCategories.Get("tile"),i.PhysicsCollisionCategories.GetAll(),i.PhysicsCollisionCategories.Get("tile"),i.PhysicsCollisionCategories.GetAll()))},e}(i.LevelObject);i.FixedBox=e}(objects||(objects={})),function(t){var e=function(r){function e(e,t,i,n){return r.call(this,"fixedBox",{width:+i,height:+n,x:+(+e+ +i/2),y:+(+t+ +n/2)})||this}return __extends(e,r),e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e.prototype.createFilter=function(){this._body.setShapeFilters(new InteractionFilter(t.PhysicsCollisionCategories.Get("tile"),t.PhysicsCollisionCategories.GetAll(),t.PhysicsCollisionCategories.Get("tile"),t.PhysicsCollisionCategories.GetAll()))},e}(t.LevelObject);t.FixedBox2=e}(objects||(objects={})),function(e){var t=function(i){function e(e){var t=i.call(this,"levelText",{view:e,x:+e.x+116,y:+e.y-45-13})||this;t.game=PhaserGameHelper.getInstance().game;t.text1=t.game.add.text(0,0,"Level "+Constants.currentLevel+":",{font:"22px sc_gum_kidsregular",fill:"#F7E35C",boundsAlignH:"center",boundsAlignV:"middle"}),t.text1.stroke="#824E26",t.text1.strokeThickness=4,t.text1.setTextBounds(-96,-26,192,33);return t.text2=t.game.add.text(0,0,t.view.params.name,{font:"22px sc_gum_kidsregular",fill:"#FFFFFF",boundsAlignH:"center",boundsAlignV:"top"}),t.text2.stroke="#824E26",t.text2.strokeThickness=4,t.text2.setTextBounds(-116,-2,232,64),t.view.addChild(t.text1),t.view.addChild(t.text2),Constants.levelState.addObject(t),t}return __extends(e,i),e.prototype.destroy=function(){i.prototype.destroy.call(this),Constants.levelState.removeObject(this)},e}(e.CitrusSprite);e.LevelText=t}(objects||(objects={})),function(t){var e=function(i){function e(e){return i.call(this,"mirror",{view:e,width:33,height:33,x:+e.x+16.5,y:+e.y-16.5,group:2})||this}return __extends(e,i),e.prototype.constructor2=function(){this.rayRotation=0,this._isFlipped=this._isBottomHidden=this._isRayActive=!1,this._previousSource=null,1==this.view.params.flippedHorizontally&&(this.view.scaleX=-1,this._isFlipped=!0),1==this.view.params.flippedVertically&&(this._isBottomHidden=!0),this.beginContactCallEnabled=!0,this.updateCallEnabled=!0,this._isReadyToPlaySound=!0,this._body.allowRotation=!1,this.view.stop(),this.box=this.view,this._crossPoint=new MovieClip("crossPoint",0,0),this._rayClip=new MovieClip("_beam",0,0),this.view.addChild(this._rayClip),this.view.addChild(this._crossPoint),this._rayPosition=new Vec2,this._filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetAllExcept("hidden","mirror"))},e.prototype.createFilter=function(){this._isBottomHidden?(this._shape.filter=new InteractionFilter(t.PhysicsCollisionCategories.Get("mirror"),t.PhysicsCollisionCategories.GetAll()),this._shape2.filter=new InteractionFilter(t.PhysicsCollisionCategories.Get("Level"),t.PhysicsCollisionCategories.GetAll())):(this._shape.filter=new InteractionFilter(t.PhysicsCollisionCategories.Get("Level"),t.PhysicsCollisionCategories.GetAll()),this._shape2.filter=new InteractionFilter(t.PhysicsCollisionCategories.Get("mirror"),t.PhysicsCollisionCategories.GetAll()))},e.prototype.drawRay=function(e,t,i,n){this._previousSource=e,this._camera||(this._camera=n,this.calculateRayDirection()),this._isRayActive=!0,this._rayPosition.setxy(t,i),this._isFlipped?this._rayClip.x=this.x-t:this._rayClip.x=t-this.x,this._rayClip.y=i-this.y,this._rayClip.degrees=this.rayRotation,this._isFlipped&&(0<this.rayRotation?this._rayClip.degrees=180-this.rayRotation:this._rayClip.degrees=-180-this.rayRotation)},e.prototype.calculateRayDirection=function(){var e;for(e=this._previousSource instanceof t.Camera?Math.round(this._previousSource._camera.degrees):Math.round(this._previousSource.rayRotation);e<-180;)e+=360;for(;180<e;)e-=360;-90==(e=Math.round(e))?this._isBottomHidden?this.rayRotation=90:this._isFlipped?this.rayRotation=0:this.rayRotation=180:0==e?this._isFlipped?this._isBottomHidden?this.rayRotation=-90:this.rayRotation=180:this._isBottomHidden?this.rayRotation=180:this.rayRotation=90:-180==e||180==e?this._isFlipped?this._isBottomHidden?this.rayRotation=0:this.rayRotation=90:this._isBottomHidden?this.rayRotation=-90:this.rayRotation=0:90==e&&(this._isBottomHidden?this._isFlipped?this.rayRotation=180:this.rayRotation=0:this.rayRotation=-90)},e.prototype.createShape=function(){this.constructor2();var e=this._width,t=this._height;this._isFlipped?(this._shape=new Polygon([new Vec2(-e/2,t/2),new Vec2(e/2,-t/2),new Vec2(e/2,t/2)],this._material),this._body.shapes.add(this._shape),this._shape2=new Polygon([new Vec2(-e/2,-t/2),new Vec2(e/2,-t/2),new Vec2(-e/2,t/2)],this._material)):(this._shape=new Polygon([new Vec2(-e/2,-t/2),new Vec2(e/2,t/2),new Vec2(-e/2,t/2)],this._material),this._body.shapes.add(this._shape),this._shape2=new Polygon([new Vec2(-e/2,-t/2),new Vec2(e/2,-t/2),new Vec2(e/2,t/2)],this._material)),this._body.shapes.add(this._shape2)},e.prototype.createMaterial=function(){i.prototype.createMaterial.call(this)},e.prototype.handleBeginContact=function(e){15<Math.abs(this._body.velocity.y)&&(SoundManager.getInstance().playSound("BoxDownSound"),this._isReadyToPlaySound=!1,TweenMax.delayedCall(1.25,this.isReadToPlaySoundTrue,this))},e.prototype.isReadToPlaySoundTrue=function(){this._isReadyToPlaySound=!0},e.prototype.update=function(e){if(i.prototype.update.call(this,e),this._isRayActive){if(this._rayClip.visible=!0,this._crossPoint.visible=!0,this._isRayActive=!1,this._ray=new Ray(this._rayPosition,Vec2.fromPolar(1,(this.rayRotation+180)/180*Math.PI)),this._ray.maxDistance=1e3,this._rayResult=this._body.space.rayCast(this._ray,!1,this._filter),this._rayResult){var t=this._ray.at(this._rayResult.distance);this._crossPoint.visible=!0,this._crossPoint.x=t.x-this.x,this._isFlipped&&(this._crossPoint.x=-this._crossPoint.x),this._crossPoint.y=t.y-this.y,this._rayClip.scaleX=this._rayResult.distance/100,this._rayClip.gotoAndStop(this._camera._rayClip.currentFrameNumber),this._crossPoint.gotoAndStop(this._camera._crossPoint.currentFrameNumber),this._camera.process(this,this._rayResult,t.x,t.y)}}else this._crossPoint.visible=!1,this._rayClip.visible=!1},e.RED_CROSS=1,e.RED_BEAM=1,e.YELLOW_CROSS=3,e.YELLOW_BEAM=2,e.GREEN_CROSS=2,e.GREEN_BEAM=3,e}(t.LevelObject);t.Mirror=e}(objects||(objects={}));var InteractionGroup=nape.dynamics.InteractionGroup;!function(n){var e=function(i){function e(e){var t=i.call(this,"removable",{view:e,width:33,height:33,x:+e.x+16.5,y:+e.y-16.5,group:4})||this;return e.stop(),t.beginContactCallEnabled=!0,t}return __extends(e,i),e.prototype.action=function(){if(this._body.type==BodyType.STATIC){this._body.space=null,this._body.type=BodyType.DYNAMIC,this._body.space=this._nape.space,this.view.gotoAndStop(2);var e=new MovieClip("ElectroSplashGraphics");this.fountain=new n.CitrusObject("electro",{view:e,x:this.x-1,y:this.y+14}),e.playLoop(),Constants.levelState.addObject(this.fountain),SoundManager.getInstance().playSound("ElectricitySound"),TweenMax.delayedCall(1,this.removeFountain,this)}},e.prototype.removeFountain=function(){this.fountain.kill=!0},e.prototype.createBody=function(){this._bodyType=BodyType.STATIC,i.prototype.createBody.call(this)},e.prototype.handleBeginContact=function(e){if(100<NapeUtils.CollisionGetOther(this,e).body.normalImpulse(this.body,!0).xy(!0).length&&this._body.type==BodyType.DYNAMIC){this.view.gotoAndStop(3),this.beginContactCallEnabled=!1,SoundManager.getInstance().playSound("MonitorCrashSound");var t=new InteractionGroup(!0);this._body.group=t,this.fragment1=new n.NapePhysicsObject("f",{view:new MovieClip("Fragment1Graphics"),registration:"topLeft",x:this.x+5,y:this.y-2,width:18,height:4,group:2}),Constants.levelState.addObject(this.fragment1),this.fragment1.body.group=t,this.fragment1.body.applyImpulse(Vec2.weak(3*Math.random(),-12)),this.fragment1.body.applyAngularImpulse(40*Math.random()),this.fragment2=new n.NapePhysicsObject("f",{view:new MovieClip("Fragment2Graphics"),registration:"topLeft",x:this.x-4,y:this.y,width:14,height:4,group:2}),Constants.levelState.addObject(this.fragment2),this.fragment2.body.group=t,this.fragment2.body.applyImpulse(Vec2.weak(-3*Math.random(),-10)),this.fragment2.body.applyAngularImpulse(-40*Math.random()),this.fragment3=new n.NapePhysicsObject("f",{view:new MovieClip("Fragment3Graphics"),registration:"topLeft",x:this.x-4,y:this.y,width:14,height:4,group:2}),Constants.levelState.addObject(this.fragment3),this.fragment3.body.group=t,this.fragment3.body.applyImpulse(Vec2.weak(-.5*Math.random(),-10)),this.fragment3.body.applyAngularImpulse(35*Math.random()),this.fragment1.body.setShapeFilters(new InteractionFilter(1,n.PhysicsCollisionCategories.GetAllExcept("tile","hidden"))),this.fragment2.body.setShapeFilters(new InteractionFilter(1,n.PhysicsCollisionCategories.GetAllExcept("tile","hidden"))),this.fragment3.body.setShapeFilters(new InteractionFilter(1,n.PhysicsCollisionCategories.GetAllExcept("tile","hidden"))),TweenMax.delayedCall(2.5,this.removeFragments,this)}},e.prototype.removeFragments=function(){this.fragment1.kill=!0,this.fragment2.kill=!0,this.fragment3.kill=!0},e}(n.LevelObject);n.Monitor=e}(objects||(objects={}));var MovieClip=function(p){function l(e,t,i,n,r,o){void 0===e&&(e=null),void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=""),void 0===r&&(r=null),void 0===o&&(o=null);var a=p.call(this,PhaserGameHelper.getInstance().game,t,i,null)||this;a.game=PhaserGameHelper.getInstance().game,r||(r="Objects"),o||(o=ObjectsLayouts.data);var s=OzUtil.PE(o,null,"name",e);return e&&(s?a.createLayout(o,e,r):a.loadTexture(r,e+"0000")),a.mc=e,a.name=n,a.params={},a.spriteSheetName=r,a._currentFrameNumber=1,a._degrees=a.rotation=0,a.butFrameOffset=0,a}return __extends(l,p),l.RegisterSpritesheet=function(e,t){l.SpriteSheetDatas||(l.SpriteSheetDatas={}),l.SpriteSheetDatas[e]=t},l.FrameRate=function(e){return e<0?40:Math.round(60*e/40)},Object.defineProperty(l.prototype,"tintRed",{get:function(){return this.tint>>16&255},set:function(e){this.tint=(Math.round(Math.min(255,Math.max(0,e)))<<16)+(65535&this.tint)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"tintGreen",{get:function(){return this.tint>>8&255},set:function(e){this.tint=(Math.round(Math.min(255,Math.max(0,e)))<<8)+(this.tint&510<<16)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"tintBlue",{get:function(){return 255&this.tint},set:function(e){this.tint=Math.round(Math.min(255,Math.max(0,e)))+(16776960&this.tint)},enumerable:!0,configurable:!0}),l.prototype.generateDefaultAnimation=function(){var e=Phaser.Animation.generateFrameNames(this.mc,0,this.totalFrames(),"",4);this.animations.add("_null",e,l.FrameRate(-1))},l.prototype.playLoop=function(){this.animations.getAnimation("_null")||this.generateDefaultAnimation(),this.play("_null",l.FrameRate(-1),!0)},l.prototype.playOnce=function(){this.animations.getAnimation("_null")||this.generateDefaultAnimation(),this.play("_null",l.FrameRate(-1),!1)},Object.defineProperty(l.prototype,"scaleX",{get:function(){return this.scale.x},set:function(e){this.scale.x=e},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"scaleY",{get:function(){return this.scale.y},set:function(e){this.scale.y=e},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"degrees",{get:function(){return 180*this.rotation/Math.PI},set:function(e){this._degrees=e,this.rotation=e*Math.PI/180},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"currentFrameNumber",{get:function(){return this._currentFrameNumber},set:function(e){this.gotoAndStop(Math.round(e))},enumerable:!0,configurable:!0}),l.prototype.totalFrames=function(){for(var e=0;;){var t=this.mc+l.getPaddedNumber(e,4),i=l.SpriteSheetDatas[this.spriteSheetName];if(!OzUtil.PE(i,"frames","filename",t))break;e++}return e},l.getPaddedNumber=function(e,t){for(var i=""+Math.round(e),n=t-i.length,r=0;r<n;r++)i="0"+i;return i},l.prototype.addAnimation=function(e,t,i,n,r,o,a){void 0===r&&(r=!1),void 0===o&&(o=null),void 0===a&&(a=null);var s=Phaser.Animation.generateFrameNames(this.mc,t-1,i-1,"",4),p=this.animations.add(e,s,l.FrameRate(n),r);o&&p.onComplete.add(o,a)},l.prototype.playAnimation=function(e){this.currentAnimation=e;this.animations.play(e)},l.prototype.gotoAndStop=function(e){this._currentFrameNumber=e,e--;var t=this.mc;t+=l.getPaddedNumber(e,4),this.frameName=t},l.prototype.stop=function(){this.animations.stop()},l.prototype.getChild=function(e){for(var t=0,i=this.children;t<i.length;t++){var n=i[t];if(n instanceof l){var r=n;if(r.name==e)return r}}return null},l.prototype.clickedLevelSelect=function(){PhaserGameHelper.getInstance().game.state.getCurrentState().levelSelectClick(this)},l.prototype.makeButton=function(e,t,i,n){void 0===t&&(t=!0),void 0===i&&(i=null),void 0===n&&(n=!0),i||(i=this),this.inputEnabled=!0,this.input.useHandCursor=!0,this.events.onInputDown.add(e,i),t&&(GameController.Touch()?(this.events.onInputDown.add(this.changeFrame2,this),this.events.onInputUp.add(this.changeFrame1,this)):(this.events.onInputOver.add(this.changeFrame2,this),this.events.onInputOut.add(this.changeFrame1,this),n&&this.events.onInputOver.add(this.mouseOverSound,this)),n&&this.events.onInputDown.add(this.mouseClickSound,this))},l.prototype.mouseOverSound=function(){SoundManager.getInstance().playSound("MouseOverSound")},l.prototype.mouseClickSound=function(){SoundManager.getInstance().playSound("MouseClickSound")},l.prototype.getButFrameOffset=function(){return this.butFrameOffset},l.prototype.changeButtonFrameOffset=function(e){var t=e-this.butFrameOffset;this.butFrameOffset=e,this.currentFrameNumber=this.currentFrameNumber+t},l.prototype.changeFrame1=function(){this.currentFrameNumber=1+this.butFrameOffset},l.prototype.changeFrame2=function(){this.currentFrameNumber=2+this.butFrameOffset},l.prototype.makeMusicButton=function(){this.butFrameOffset=SoundManager.muteMusic?2:0,this.changeFrame1(),this.makeButton(this.toggleMuteMusic,!0,this,!1)},l.prototype.toggleMuteMusic=function(){SoundManager.ToggleMuteMusic(),this.changeButtonFrameOffset(1<this.getButFrameOffset()?0:2)},l.prototype.makeSoundButton=function(){this.butFrameOffset=SoundManager.muteSound?2:0,this.changeFrame1(),this.makeButton(this.toggleMuteSound,!0,this,!1)},l.prototype.toggleMuteSound=function(){SoundManager.ToggleMuteSound(),this.changeButtonFrameOffset(1<this.getButFrameOffset()?0:2)},l.prototype.createLayout=function(e,t,i){for(var n=OzUtil.PE(e,null,"name",t),r=OzUtil.ARR(n.children),o=0;o<r.length;o++){var a=r[o],s=new l(a.mc,a.x,a.y,a.name,i,e);a.degrees&&(s.degrees=a.degrees),a.scaleX&&(s.scale.x=a.scaleX),a.scaleY&&(s.scale.y=a.scaleY),a.alpha&&(s.alpha=a.alpha),this.addChild(s)}},l.prototype.changeChildByName=function(e,t,i,n){var r=this.getChild(e);this.removeChild(r);var o=new l(t,r.x,r.y,r.name,i,n);this.addChild(o)},l.prototype.remove=function(){this.parent&&this.parent.removeChild(this)},l}(Phaser.Sprite),Space=nape.space.Space;!function(t){var e=function(i){function e(e){var t=i.call(this,e,{})||this;return t.timeStep=.05,t.velocityIterations=8,t.positionIterations=8,t._gravity=new Vec2(0,450),t.updateCallEnabled=!0,t}return __extends(e,i),e.prototype.initialize=function(e){void 0===e&&(e=null),i.prototype.initialize.call(this),this._space=new Space(this._gravity),this._contactListener=new t.NapeContactListener(this._space),t.NapePhysicsObject.space=this._space,t.PhysicsCollisionCategories.Add("GoodGuys"),t.PhysicsCollisionCategories.Add("BadGuys"),t.PhysicsCollisionCategories.Add("Level"),t.PhysicsCollisionCategories.Add("Items")},e.prototype.destroy=function(){this._contactListener.destroy(),this._space.clear(),i.prototype.destroy.call(this)},Object.defineProperty(e.prototype,"space",{get:function(){return this._space},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gravity",{get:function(){return this._gravity},set:function(e){this._gravity=e,this._space&&(this._space.gravity=this._gravity)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contactListener",{get:function(){return this._contactListener},enumerable:!0,configurable:!0}),e.prototype.update=function(e){i.prototype.update.call(this,e),this._space.step(this.timeStep,this.velocityIterations,this.positionIterations)},e}(t.CitrusObject);t.Nape=e}(objects||(objects={}));var InteractionListener=nape.callbacks.InteractionListener,InteractionType=nape.callbacks.InteractionType,CbType=nape.callbacks.CbType,CbEvent=nape.callbacks.CbEvent;!function(e){var t=function(){function e(e){this._space=e,this._space.listeners.add(new InteractionListener(nape.callbacks.CbEvent.BEGIN,InteractionType.ANY,CbType.ANY_BODY,CbType.ANY_BODY,this.onInteractionBegin)),this._space.listeners.add(new InteractionListener(nape.callbacks.CbEvent.END,InteractionType.ANY,CbType.ANY_BODY,CbType.ANY_BODY,this.onInteractionEnd))}return e.prototype.destroy=function(){this._space.listeners.clear()},e.prototype.onInteractionBegin=function(e){var t=e.int1.userData.myData,i=e.int2.userData.myData;t.beginContactCallEnabled&&t.handleBeginContact(e),i.beginContactCallEnabled&&i.handleBeginContact(e)},e.prototype.onInteractionEnd=function(e){var t=e.int1.userData.myData,i=e.int2.userData.myData;t.endContactCallEnabled&&t.handleEndContact(e),i.endContactCallEnabled&&i.handleEndContact(e)},e}();e.NapeContactListener=t}(objects||(objects={})),function(n){var e=function(i){function e(e){var t=i.call(this,"niche",{view:e,width:4,height:20,x:+e.x+ +e.width/2,y:+e.y-e.height/2+25})||this;return t.isOccupied=!1,t._shape.sensorEnabled=!0,t.offsetY=-25,t._body.group=CollisionHelper.nonCollidable,t._body.setShapeFilters(new nape.dynamics.InteractionFilter(n.PhysicsCollisionCategories.Get("hidden"),-1,n.PhysicsCollisionCategories.Get("hidden"),-1)),t}return __extends(e,i),e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e}(n.LevelObject);n.Niche=e}(objects||(objects={})),function(e){var t=function(){function a(){}return a.Has=function(e,t){return Boolean(e&t)},a.Add=function(e){if(15==a._numCategories)throw new Error("You can only have 15 categories.");a._categoryNames[e]||(a._categoryNames[e]=a._categoryIndexes[a._numCategories],a._allCategories|=a._categoryIndexes[a._numCategories],a._numCategories++)},a.Get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=0,r=e;n<r.length;n++){var o=r[n];0!=a._categoryNames[o]&&(i|=a._categoryNames[o])}return i},a.GetAll=function(){return a._allCategories},a.GetAllExcept=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=a._allCategories,n=0,r=e;n<r.length;n++){var o=r[n];0!=a._categoryNames[o]&&(i&=~a._categoryNames[o])}return i},a.GetNone=function(){return 0},a._allCategories=0,a._numCategories=0,a._categoryIndexes=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384],a._categoryNames={},a}();e.PhysicsCollisionCategories=t}(objects||(objects={})),function(e){var t=function(o){function e(e){var t=this,i=50;175<e.width?i=210:125<e.width?i=150:80<e.width?i=100:60<e.width&&(i=70);for(var n=0,r=e._degrees;r<-180;)r+=360;for(;180<r;)r-=360;return 90!=r&&-90!=r||(n+=20),(t=o.call(this,"plank",{view:e,width:+i,height:20,x:+e.x+n+i/2,y:+e.y-10,group:4})||this).beginContactCallEnabled=!0,t._isReadyToPlaySound=!0,t}return __extends(e,o),e.prototype.createMaterial=function(){o.prototype.createMaterial.call(this),this._material.density=.8,this._material.staticFriction=.3,this._material.dynamicFriction=.65},e.prototype.handleBeginContact=function(e){15<Math.abs(this._body.velocity.y)&&(SoundManager.getInstance().playSound("PlankDownSound"),this._isReadyToPlaySound=!1,TweenMax.delayedCall(1.25,function(){this._isReadyToPlaySound=!0},this))},e}(e.LevelObject);e.Plank=t}(objects||(objects={})),function(t){var e=function(i){function e(e){var t=i.call(this,"prisoner",{view:e,width:38,height:48,x:+e.x+28,y:+e.y-24,group:4})||this;return t.isDisabled=t._isReadyToPlayStepSound=!1,t._direction=t._timeNotMoving=0,t.WALK_SPEED=25,t.RUN_SPEED=36,t._body.allowRotation=!1,t.initialize2(),t._limitLeft=-1e5,t._limitRight=1e5,t.view.params.limitLeft&&(t._limitLeft=t.x-parseInt(t.view.params.limitLeft)),t.view.params.limitRight&&(t._limitRight=t.x+parseInt(t.view.params.limitRight)),t}return __extends(e,i),e.prototype.initialize2=function(e){void 0===e&&(e=null),this._clip=this.view,this.updateCallEnabled=!0,this.beginContactCallEnabled=!0,this._isReadyToPlayStepSound=!0,this._timeNotMoving=0,this._direction=1,this.offsetX=0,this.offsetY=25,this._clip.addAnimation("Stand",1,37,30,!0),this._clip.addAnimation("Walk",38,57,40,!0),this._clip.addAnimation("Run",58,71,40,!0),this._clip.addAnimation("GiveUp",132,166,40,!1),this._clip.addAnimation("Handcuff",167,201,40,!1),this._clip.addAnimation("Wound",202,221,30,!1),this._taskManager=new TaskManager(!0),this.assignTasks(),Constants.levelState.prisoners.push(this)},e.prototype.woundStatic=function(){this._clip.playAnimation("WoundStatic")},e.prototype.assignTasks=function(){this._taskManager.removeAllTasks(),this._taskManager.addTask(this,this.wait),this._taskManager.addPause(80),this._taskManager.addInstantTask(this,this.startPatrol),this._taskManager.addTask(this,this.patrol)},e.prototype.handleBeginContact=function(e){if(!this.isDisabled){var t=NapeUtils.CollisionGetOther(this,e);if(("box"==t.name||"removable"==t.name||"plank"==t.name)&&30<t.body.normalImpulse(this.body,!0).xy(!0).length&&t.y<this.y)this._taskManager.addUrgentInstantTask(this,this.wound);else if("bullet"==t.name)this._taskManager.addUrgentInstantTask(this,this.wound);else if("hero"==t.name){if(this._taskManager.currentTask==this.giveUp)return void this.handcuff();this._taskManager.removeAllTasks(),this._taskManager.addTask(this,this.stand),this._body.velocity.x=0,this._clip.playAnimation("Stand"),Constants.hero.giveUp(),Constants.dog.giveUp();var i=new MovieClip("FightingGraphics");i.playOnce(),i.y=this.y,i.x=this.x+.5*(t.x-this.x),Constants.levelState.groupSprites[Constants.levelState.NumSpriteGroups-1].addChild(i),SoundManager.getInstance().playSound("AttackSound"),TweenMax.delayedCall(.5,Constants.levelState.failLevel,Constants.levelState)}}},e.prototype.handleEndContact=function(e){i.prototype.handleEndContact.call(this,e);NapeUtils.CollisionGetOther(this,e)},e.prototype.createShape=function(){var e=this._width,t=this._height;this._shape=new Polygon([new Vec2(-e/2,-t/2+3),new Vec2(0,-t/2-2),new Vec2(e/2,-t/2+3),new Vec2(e/2,t/2-8),new Vec2(e/2-6,t/2),new Vec2(-e/2+6,t/2),new Vec2(-e/2,t/2-8)],this._material),this._body.shapes.add(this._shape)},e.prototype.createMaterial=function(){i.prototype.createMaterial.call(this),this._material.elasticity=0,this._material.density=1,this._material.staticFriction=.01,this._material.dynamicFriction=.01},e.prototype.createFilter=function(){this._body.setShapeFilters(new InteractionFilter(t.PhysicsCollisionCategories.Get("enemy"),t.PhysicsCollisionCategories.GetAllExcept("enemy","hero"),t.PhysicsCollisionCategories.Get("enemy"),t.PhysicsCollisionCategories.GetAllExcept("enemy","hero")))},e.prototype.detectByCamera=function(e){this._taskManager.currentTask!=this.fearEscape&&(this._target=e,this._taskManager.addUrgentTask(this,this.fearEscape))},e.prototype.wait=function(){return SoundManager.getInstance().stopSound("GuardianStepSound"),SoundManager.getInstance().stopSound("GuardianRunSound"),this._clip.playAnimation("Stand"),!0},e.prototype.stand=function(){return!0},e.prototype.startPatrol=function(){this.moveHorizontally(this._body,this.WALK_SPEED*this._direction),0<this._direction?this.inverted=!1:this.inverted=!0},e.prototype.isReadyToPlayStepSoundTrue=function(){this._isReadyToPlayStepSound=!0},e.prototype.patrol=function(){return this._isReadyToPlayStepSound&&(this._isReadyToPlayStepSound=!1,TweenMax.delayedCall(.32,this.isReadyToPlayStepSoundTrue,this),SoundManager.getInstance().playSound("GuardianStepSound")),"Walk"!=this._clip.currentAnimation&&this._clip.playAnimation("Walk"),Math.abs(this._body.velocity.x)<=.05&&.05<this._timeNotMoving||this.x>this._limitRight&&1==this._direction&&this.x-this._limitRight<12||this.x<this._limitLeft&&-1==this._direction&&this._limitLeft-this.x<12?(this._direction=-this._direction,!0):(this.moveHorizontally(this._body,this.WALK_SPEED*this._direction),!1)},e.prototype.pursue=function(){return this._target.x<this.x?(this.inverted=!0,this.moveHorizontally(this._body,-this.RUN_SPEED)):(this.inverted=!1,this.moveHorizontally(this._body,this.RUN_SPEED)),1.5<this._timeNotMoving?this._clip.playAnimation("Stand"):"Run"!=this._clip.currentAnimation?this._clip.playAnimation("Run"):this._isReadyToPlayStepSound&&(this._isReadyToPlayStepSound=!1,TweenMax.delayedCall(.45,this.isReadyToPlayStepSoundTrue,this),SoundManager.getInstance().playSound("GuardianRunSound")),!1},e.prototype.fearEscapeTweenFunc=function(){this._fearTween=null,this._taskManager.currentTask==this.fearEscape&&this.assignTasks()},e.prototype.fearEscape=function(){return this._fearTween||(this._fearTween=TweenMax.delayedCall(2,this.fearEscapeTweenFunc,this)),this._target.x<this.x?(this.inverted=!1,this.moveHorizontally(this._body,this.RUN_SPEED)):(this.inverted=!0,this.moveHorizontally(this._body,-this.RUN_SPEED)),1.5<this._timeNotMoving?this._clip.playAnimation("Stand"):"Run"!=this._clip.currentAnimation?this._clip.playAnimation("Run"):this._isReadyToPlayStepSound&&(this._isReadyToPlayStepSound=!1,TweenMax.delayedCall(.45,this.isReadyToPlayStepSoundTrue,this),SoundManager.getInstance().playSound("GuardianRunSound")),!1},e.prototype.giveUp=function(){return this._body.velocity.x=0,"GiveUp"!=this._clip.currentAnimation&&this._clip.playAnimation("GiveUp"),!0},e.prototype.handcuff=function(){"Handcuff"!=this._clip.currentAnimation&&this._clip.playAnimation("Handcuff"),this.x>Constants.hero.x?this.inverted=!1:this.inverted=!0,Constants.hero.handcuff(this),this.disable()},e.prototype.disable=function(){this.isDisabled=!0,this.group=0,this._body.space=null,Constants.levelState.groupSprites[0].addChild(this.view),TweenMax.to(this.view,.6,{tintRed:41,tintGreen:29,tintBlue:29,delay:.5})},e.prototype.wound=function(){this.isDisabled||(this.disable(),this._clip.playAnimation("Wound"),this._taskManager.removeAllTasks(),SoundManager.getInstance().playSound("GuardianHurtSound"),TweenMax.delayedCall(.25,this.playGuardianStarsSound,this))},e.prototype.playGuardianStarsSound=function(){SoundManager.getInstance().playSound("GuardianStarsSound")},e.prototype.makeGiveUp=function(){this._taskManager.currentTask!=this.giveUp&&(this._taskManager.removeAllTasks(),this._taskManager.addUrgentInstantTask(this,this.giveUp))},e.prototype.cameraGoneAway=function(){this._taskManager.addInstantTask(this,this.startPatrol),this._taskManager.addTask(this,this.patrol)},e.prototype.update=function(e){if(i.prototype.update.call(this,e),!this.isDisabled&&this._taskManager.currentTask!=this.stand)if(Math.abs(this._body.velocity.x)<=.05?this._timeNotMoving+=e:this._timeNotMoving=0,this._taskManager.update(),Math.abs(this.y-Constants.dog.y)<60&&Math.abs(this.x-Constants.dog.x)<80)this._taskManager.currentTask!=this.giveUp&&(Constants.dog.bark(),this._taskManager.addUrgentInstantTask(this,this.giveUp));else{if(this._taskManager.currentTask==this.giveUp)return;Math.abs(this.y-Constants.dog.y)<60&&Math.abs(this.x-Constants.dog.x)<160?(this._target=Constants.dog,this._taskManager.currentTask!=this.fearEscape&&this._taskManager.addUrgentTask(this,this.fearEscape)):Math.abs(this.y-Constants.hero.y)<60&&(this._body.velocity.x<.5&&this.x-Constants.hero.x<155&&-10<this.x-Constants.hero.x||-.5<this._body.velocity.x&&Constants.hero.x-this.x<155&&-10<Constants.hero.x-this.x)?(this._target=Constants.hero,this._taskManager.currentTask!=this.pursue&&this._taskManager.addUrgentTask(this,this.pursue)):Math.abs(this.y-Constants.dog.y)<60&&Math.abs(this.x-Constants.dog.x)<200||this._taskManager.currentTask==this.pursue&&this.assignTasks()}},e.prototype.destroy=function(){i.prototype.destroy.call(this),Constants.levelState.prisoners.splice(Constants.levelState.prisoners.indexOf(this),1)},e}(t.LevelObject);t.Prisoner=e}(objects||(objects={})),function(r){var e=function(a){function e(e){var t=this,i=e._degrees;for(e.rotation=0;i<-180;)i+=360;for(;180<i;)i-=360;var n=12,r=-6;180==i?(n=-13,r=6):90==i?(n=6.5,r=12):-90==i&&(n=-6.5,r=-13);var o=(t=a.call(this,e.name,{view:e,width:22,height:11,rotation:+i,x:+e.x+n,y:+e.y+r,group:5})||this)._touchingObjects=0;return e.params.type&&(o=Math.round(parseFloat(e.params.type))),0==o&&(o=1),t._name="subject"+String(o),e.getChild("top").gotoAndStop(o),t.beginContactCallEnabled=!0,t.endContactCallEnabled=!0,t._shape.sensorEnabled=!0,t}return __extends(e,a),e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e.prototype.handleBeginContact=function(e){if(this._touchingObjects++,1==this._touchingObjects){this._targets||(this._targets=Constants.levelState.getObjectsByName(this._name));for(var t=0,i=this._targets;t<i.length;t++){var n=i[t];if(n instanceof r.LevelObject)n.action()}this.view.totalFrames();TweenMax.to(this.view.getChild("top"),.3,{y:3}),SoundManager.getInstance().playSound("PushButtonSound")}},e.prototype.handleEndContact=function(e){if(this._touchingObjects--,0==this._touchingObjects){for(var t=0,i=this._targets;t<i.length;t++){var n=i[t];if(n instanceof r.LevelObject)n.action()}TweenMax.to(this.view.getChild("top"),.3,{y:-1}),SoundManager.getInstance().playSound("PushButtonSound")}},e.prototype.createFilter=function(){this._body.setShapeFilters(new InteractionFilter(r.PhysicsCollisionCategories.Get("hidden"),-1,r.PhysicsCollisionCategories.Get("hidden"),-1))},e}(r.LevelObject);r.PushButton=e}(objects||(objects={}));var objects,states,InteractionCallback=nape.callbacks.InteractionCallback;!function(e){var t=function(i){function e(e){var t=i.call(this,"box",{view:e,width:+e.width-2,height:+e.height-3,x:+e.x+e.width/2,y:+e.y-e.height/2,group:4})||this;return t.beginContactCallEnabled=!0,t._isReadyToPlaySound=!0,t}return __extends(e,i),e.prototype.handleBeginContact=function(e){15<Math.abs(this._body.velocity.y)&&(SoundManager.getInstance().playSound("StoolDownSound"),this._isReadyToPlaySound=!1,TweenMax.delayedCall(1.25,function(){this._isReadyToPlaySound=!0},this))},e}(e.LevelObject);e.Stool=t}(objects||(objects={})),function(t){var e=function(i){function e(e){var t=i.call(this,"fixedBox",{width:35,height:35,x:+(+e.x+17.5),y:+(+e.y-17.5)})||this;return t}return __extends(e,i),e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e.prototype.createFilter=function(){this._body.setShapeFilters(new InteractionFilter(t.PhysicsCollisionCategories.Get("tile"),t.PhysicsCollisionCategories.GetAll(),t.PhysicsCollisionCategories.Get("tile"),t.PhysicsCollisionCategories.GetAll()))},e}(t.LevelObject);t.Tile=e}(objects||(objects={})),function(e){var t=function(i){function e(e){var t=i.call(this,"tile",{view:e,x:+e.x,y:+e.y,group:3})||this;return Constants.levelState.addObject(t),t}return __extends(e,i),e.prototype.destroy=function(){i.prototype.destroy.call(this),Constants.levelState.removeObject(this)},e}(e.CitrusSprite);e.TileVisual=t}(objects||(objects={})),function(n){var e=function(i){function e(e){var t=i.call(this,"removable",{view:e,width:33,height:33,x:+e.x+16.5+2,y:+e.y-16.5,group:4})||this;return t.beginContactCallEnabled=!0,t._isReadyToPlaySound=!0,t}return __extends(e,i),e.prototype.action=function(){if(this._body.type==BodyType.STATIC){this._body.space=null,this._body.type=BodyType.DYNAMIC,this._body.space=n.NapePhysicsObject.space,SoundManager.getInstance().playSound("ToiletSound"),SoundManager.getInstance().playSound("WaterSound");var e=new MovieClip("WaterSplashGraphics"),t=new n.CitrusObject("water",{view:e,x:this.x-1,y:this.y+16});e.playLoop(),Constants.levelState.addObject(t)}},e.prototype.createBody=function(){this._bodyType=BodyType.STATIC,i.prototype.createBody.call(this)},e.prototype.handleBeginContact=function(e){10<Math.abs(this._body.velocity.y)&&(SoundManager.getInstance().playSound("ToiletSound"),this._isReadyToPlaySound=!1,TweenMax.delayedCall(1.25,function(){this._isReadyToPlaySound=!0},this))},e}(n.LevelObject);n.Toilet=e}(objects||(objects={})),function(e){var t=function(i){function e(e){var t=i.call(this,"sprite",{view:e,width:+e.width,height:+e.height,x:+e.x+ +e.width/2,y:+e.y-e.height/2,group:4})||this;return t._shape.sensorEnabled=!0,t}return __extends(e,i),e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e}(e.LevelObject);e.TopDecoration=t}(objects||(objects={})),function(o){var e=function(a){function e(e){var t=this,i=e._degrees;for(e.rotation=0;i<-180;)i+=360;for(;180<i;)i-=360;var n=12.5,r=-11.5;180==i?(n=-13.5,r=11):90==i?(n=11.5,r=12):-90==i&&(n=-11,r=-13.5),t=a.call(this,e.name,{view:e,width:22,height:22,x:+e.x+n,rotation:+i,y:+e.y+r,group:5})||this;var o=0;return e.params.type&&(o=Math.round(parseFloat(e.params.type))),0==o&&(o=1),t._name="subject"+String(o),e.getChild("handle").gotoAndStop(o),e.getChild("base").gotoAndStop(o),e.stop(),t.beginContactCallEnabled=!0,t._shape.sensorEnabled=!0,t}return __extends(e,a),e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e.prototype.handleBeginContact=function(e){var t=NapeUtils.CollisionGetOther(this,e);if("dog"==t.name||"hero"==t.name){this._targets||(this._targets=Constants.levelState.getObjectsByName(this._name));for(var i=0,n=this._targets;i<n.length;i++){var r=n[i];if(r instanceof o.LevelObject)r.action()}this._isActivated=!this._isActivated,SoundManager.getInstance().playSound("TriggerSound"),this._isActivated?TweenMax.to(this.view.getChild("handle"),.5,{degrees:90}):TweenMax.to(this.view.getChild("handle"),.5,{degrees:0})}},e.prototype.createFilter=function(){this._body.setShapeFilters(new InteractionFilter(o.PhysicsCollisionCategories.Get("hidden"),-1,o.PhysicsCollisionCategories.Get("hidden"),-1))},e}(o.LevelObject);o.Trigger=e}(objects||(objects={})),function(t){var e=function(i){function e(e){var t=i.call(this,"turrel",{view:e,width:35,height:35,x:+e.x+28,y:+e.y-13,group:6})||this;return t._clip=e,t._shape.sensorEnabled=!0,t.initialize2(),1==t.view.params.flippedHorizontally&&(t.inverted=!0),t._fireTween=TweenMax.delayedCall(4.5,t.fire,t),t}return __extends(e,i),e.prototype.initialize2=function(e){void 0===e&&(e=null),this._clip.addAnimation("Stop",26,26,1),this._clip.addAnimation("Fire",1,26,40,!1),this._clip.playAnimation("Stop")},e.prototype.fire=function(){var e=new t.Bullet;e.x=this.x+(this.inverted?17:-17),e.y=this.y-8,e.body.velocity=new Vec2(this.inverted?120:-120,0),Constants.DEBUG,this._clip.playAnimation("Fire"),SoundManager.getInstance().playSound("TurrelFireSound"),this._fireTween=TweenMax.delayedCall(4.5,this.fire,this)},e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e.prototype.destroy=function(){i.prototype.destroy.call(this),this._fireTween&&this._fireTween.kill()},e}(t.LevelObject);t.Turrel=e}(objects||(objects={})),function(e){var t=function(i){function e(e){var t=i.call(this,"levelText",{view:e,x:+e.x+e.width/2,y:+e.y-e.height/2-2})||this;return Constants.levelState.addObject(t),t}return __extends(e,i),e.prototype.destroy=function(){i.prototype.destroy.call(this),Constants.levelState.removeObject(this)},e}(e.CitrusSprite);e.Txt=t}(objects||(objects={})),function(e){var t=function(i){function n(){var e=null!==i&&i.apply(this,arguments)||this;return e._sounds=[null,"Comix1Sound","Comix2Sound",null,"Comix3Sound","Comix4Sound","Comix5Sound","Comix6Sound","Comix7Sound","Comix8Sound","Comix9Sound","Comix10Sound","Comix11Sound",null],e._delays=[0,3,1,2.5,5.8,3,3.5,4,2.8,3.1,3.6,5.2,5,0],e}return __extends(n,i),n.prototype.create=function(){if(i.prototype.create.call(this),h5branding.google.sendScreenView("animation_state"),this.delayedCalls=new Array,SoundManager.getInstance().playSound("MenuMusic"),this.mc=new MovieClip,this.game.world.addChild(this.mc),0==n.ID_ANIMATION){this._currentFrame=0,this._finalFrame=8,this.mc.addChild(new MovieClip("cmcIntroAnimationBG",0,0,"bg","PreloaderObjects",PreloaderObjectsLayouts.data)),this.mc.makeButton(this.playFrame,!1,this,!1),this.mc.input.useHandCursor=!1;for(var e=this._finalFrame-1;e>this._currentFrame;e--)this.mc.addChild(new MovieClip("cmcAnim"+e,0,0,"anim"+e))}else{this._currentFrame=7,this._finalFrame=13,this.mc.addChild(new MovieClip("cmcFinalAnimationBG",0,0,"bg","PreloaderObjects",PreloaderObjectsLayouts.data)),this.mc.makeButton(this.playFrame,!1,this,!1),this.mc.input.useHandCursor=!1;for(e=this._finalFrame-1;e>this._currentFrame;e--)this.mc.addChild(new MovieClip("cmcAnim"+e,0,0,"anim"+e))}this.mc.addChild(new MovieClip("SkipButton",615,480,"skipButton"));for(e=1;e<this._delays.length;e++){var t=this.mc.getChild("anim"+e);t&&(t.alpha=0)}this.mc.getChild("skipButton").makeButton(this.endThis,!0,this),this.delayedCalls.push(TweenMax.delayedCall(1.3,this.playFrame,this))},n.prototype.clearDelayedCalls=function(){for(var e=0;e<this.delayedCalls.length;e++){var t=this.delayedCalls[e];t&&t.kill()}this.delayedCalls=[]},n.prototype.playFrame=function(){if(this.clearDelayedCalls(),this._currentFrame>=this._finalFrame)this.endThis();else{this._currentFrame++;var e=this.mc.getChild("anim"+(this._currentFrame-1));if(e&&(e.alpha=1),this._currentFrame<this._finalFrame){var t=this._sounds[this._currentFrame-1];t||(t=this._sounds[this._currentFrame-2]);var i=this._sounds[this._currentFrame];i&&SoundManager.getInstance().stopSound(t),i&&SoundManager.getInstance().playSound(i);var n=this.mc.getChild("anim"+this._currentFrame);n&&this.delayedCalls.push(TweenMax.to(n,1,{alpha:1})),this.delayedCalls.push(TweenMax.delayedCall(this._delays[this._currentFrame],this.playFrame,this))}else this.delayedCalls.push(TweenMax.delayedCall(3,this.playFrame,this))}},n.prototype.endThis=function(){this.clearDelayedCalls(),0==n.ID_ANIMATION?(Constants.currentLevel=1,Constants.stateSwitcher.switchToPlay()):Constants.stateSwitcher.switchToLevelSelect(),Constants.isIntroAnimationPlayed=!0,StorageHelper.saveCookies()},n.prototype.shutdown=function(){for(var e=0;e<this._sounds.length;e++)this._sounds[e]&&SoundManager.getInstance().stopSound(this._sounds[e])},n.ID_ANIMATION=0,n}(e.OzState);e.AnimationState=t}(states||(states={})),function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){Fabrique.AdHandler.getInstance().init(),Fabrique.PauseHandler.getInstance(this.game).init(),h5branding.google.sendScreenView("splash"),window.hasOwnProperty("fbrqSA")&&!0===window.fbrqSA&&(h5branding.Utils.ASSET_LOCATION="assets/")},t.prototype.preload=function(){var e=this;Fabrique.LoaderHelper.hide(),this.game.load.onFileComplete.add(function(e){h5branding.SplashLoader.getInstance().setLoadProgress(e)}),this.game.load.onLoadComplete.add(function(){h5branding.SplashLoader.getInstance().setLoadProgress(100)}),h5ads.adWrapper.preloadAd(h5ads.AdType.interstitial),h5branding.SplashLoader.getInstance().setButtonCallback(function(){h5branding.SplashLoader.getInstance().destroy(),SoundManager.decodeSounds(),h5branding.Utils.inGDGameZone()||e.game.device.cordova?(Fabrique.LoaderHelper.hide(),e.game.state.start("MainMenu")):Fabrique.AdHandler.getInstance().showAd("splash",function(){e.game.state.start("MainMenu")})}),this.game.load.atlas("Objects","assets/images/Objects.png",null,Objects.data),this.game.load.atlas("WinningObjects","assets/images/WinningObjects.png",null,WinningObjects.data),SoundManager.Preload(),Constants.maxLevel=21,Constants.currentLevel=1,GameController.LEFT_CURTAIN_OPEN_X=-386,GameController.RIGHT_CURTAIN_OPEN_X=Constants.WIDTH+422,StorageHelper.readCookies(),TweenMax.Init(this.game),this.game.load.cacheBuster="undefined"==typeof version?null:version,this.load.image("AzerionLogo","assets/images/AZERION_logo_txt_stencil_white.png"),this.load.image("rotateDevice","assets/images/rotateDevice.png"),this.load.atlas("PreloaderObjects","assets/images/PreloaderObjects.png",null,PreloaderObjects.data),MovieClip.RegisterSpritesheet("Objects",Objects.data),MovieClip.RegisterSpritesheet("PreloaderObjects",PreloaderObjects.data),MovieClip.RegisterSpritesheet("WinningObjects",WinningObjects.data),this.game.load.crossOrigin=!0,h5branding.Utils.getBrandingDomain()!==h5branding.BrandingDomain.Neutral&&this.game.load.image(h5branding.Branding.LOGO_KEY,h5branding.Branding.brandingLogoUrl)},t.prototype.initAnalytics=function(){h5branding.gameanalytics.setup(Constants.GAME_KEY,Constants.SECRET_KEY,version),h5branding.google.setup(Constants.GOOGLE_ID,Constants.GOOGLE_APP_NAME,version),h5branding.google.sendScreenView("splash")},t.prototype.create=function(){this.game.stage.backgroundColor=0,this.initAnalytics(),this.game.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this.game.canvas.oncontextmenu=function(e){e.preventDefault()},this.initializeHelpers(),this.game.scale.setGameSize(window.innerWidth,window.innerHeight),this.game.scale.setUserScale(1,1,0,0)},t.prototype.initializeHelpers=function(){SoundManager.Init(),Constants.levelParser=new LevelParseSystem,Constants.stateSwitcher=new StateSwitchSystem,CollisionHelper.initCollisionCategories()},t.InW=-1,t.InH=-1,t.PADH=0,t.NUMRESIZE=0,t.inSplash=!0,t}(e.OzState);e.Boot=t}(states||(states={})),function(e){var t=function(o){function a(){return null!==o&&o.apply(this,arguments)||this}return __extends(a,o),a.prototype.create=function(){h5branding.google.sendScreenView("level_select"),a.NumShown++,SoundManager.getInstance().playSound("MenuMusic"),this.mc=new MovieClip("cmcLevelSelect"),this.game.world.addChild(this.mc),h5branding.Branding.outGoingLinksAllowed()&&!this.game.device.cordova?(this.mc.getChild("walkthroughButton").makeButton(Constants.walkthrough,!0,this),this.brandingLogo=this.game.add.button(230,445,h5branding.Branding.LOGO_KEY,function(){h5branding.Branding.openCampaignLink(Constants.GOOGLE_APP_NAME,h5branding.UtmTargets.logo)}),this.mc.addChild(this.brandingLogo)):this.mc.getChild("walkthroughButton").visible=!1,this.mc.getChild("menuButton").makeButton(this.goToMenu,!0,this);var e=60<=StorageHelper.totalPoints();this.burgerText=PhaserGameHelper.getInstance().game.add.text(0,0,"bubu",{font:"22px sc_gum_kidsregular",fill:"#FFFFFF",boundsAlignH:"center",boundsAlignV:"middle"}),this.burgerText.stroke="#291D1D",this.burgerText.strokeThickness=4,this.burgerText.setTextBounds(575,6,108,36),this.burgerText.text=StorageHelper.totalPoints()+(e?" / 140":" / 60"),this.mc.addChild(this.burgerText),o.prototype.create.call(this),this.buts=new Array;for(var t=1;t<21;t++){var i=new MovieClip("hamburgers",2,29),n=this.mc.getChild("l"+t);n.addChild(i),i.gotoAndStop(1+Constants.burgers[t]),this.buts.push(n),Constants.levelsComplete[t]?(n.gotoAndStop(3),n.makeButton(n.clickedLevelSelect,!1,n)):Constants.levelsComplete[t-1]?(n.gotoAndStop(2),n.makeButton(n.clickedLevelSelect,!1,n)):n.gotoAndStop(1),2==n.currentFrameNumber?n.hitArea=new Phaser.Rectangle(0,0,62,50):3==n.currentFrameNumber&&(n.hitArea=new Phaser.Rectangle(0,0,42,50))}if(e){this.mc.getChild("lock").visible=!1,this.mc.getChild("youNeed").visible=!1;var r=this.mc.getChild("bonusBag");r.name="l21",r.makeButton(r.clickedLevelSelect,!1,r),r.hitArea=new Phaser.Rectangle(0,0,75,75),this.buts.push(r),TweenMax.to(this.mc.getChild("bonusHighlight"),5,{degrees:360,repeat:-1})}},a.prototype.levelSelectClick=function(e){for(var t=0;t<this.buts.length;t++)this.buts[t]==e&&(Constants.currentLevel=t+1);Constants.stateSwitcher.switchToPlay()},a.prototype.goToMenu=function(){Constants.stateSwitcher.switchToMainMenu()},a.NumShown=0,a}(e.OzState);e.LevelSelectState=t}(states||(states={})),function(e){var t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.cnt=0,e}return __extends(n,t),n.prototype.preload=function(){var t=this;e.Boot.inSplash=!1,this.initGameController(),window.addEventListener("resize",function(e){t.onSizeChange()}),this.onSizeChange(),this.game.scale.refresh()},n.prototype.create=function(){if(h5branding.google.sendScreenView("menu"),this.cnt=0,n.NumShown++,SoundManager.getInstance().playSound("MenuMusic"),this.mc=new MovieClip("cmcMainMenu"),this.game.world.addChild(this.mc),this.mc.getChild("playButton").makeButton(this.goLevels,!0,this),this.mc.getChild("creditsButton").makeButton(this.showCredits,!0,this),this.mc.getChild("moreButton").makeButton(Constants.sponsor,!0,this),!h5branding.Branding.outGoingLinksAllowed()||this.game.device.cordova?this.mc.getChild("moreButton").visible=!1:this.brandingLogo=this.game.add.button(480,425,h5branding.Branding.LOGO_KEY,function(){h5branding.Branding.openCampaignLink(Constants.GOOGLE_APP_NAME,h5branding.UtmTargets.logo)}),this.mc.addChild(new MovieClip("SoundButtonGraphics",613,3,"btnSound","PreloaderObjects",PreloaderObjectsLayouts.data)),this.mc.addChild(new MovieClip("MusicButtonGraphics",657,3,"btnMusic","PreloaderObjects",PreloaderObjectsLayouts.data)),GameController.Touch()){this.mc.changeChildByName("btnSound","BigSoundButtonGraphics","PreloaderObjects",PreloaderObjectsLayouts.data),this.mc.changeChildByName("btnMusic","BigMusicMenuButton","PreloaderObjects",PreloaderObjectsLayouts.data);var e=this.mc.getChild("btnMusic"),t=this.mc.getChild("btnSound");e.x=647,e.y=3,t.x=594,t.y=3}if(this.mc.getChild("btnMusic").makeMusicButton(),this.mc.getChild("btnSound").makeSoundButton(),this.creditsSprite=new MovieClip("cmcCredits",203,-556),this.game.world.addChild(this.creditsSprite),this.creditsSprite.visible=!1,this.creditsSprite.getChild("backButton").makeButton(this.unShowCredits,!0,this),this.game.device.cordova){var i=this.game.add.image(10,0,"AzerionLogo");i.y=this.game.height-i.height-10}},n.prototype.onSizeChange=function(){e.Boot.inSplash||e.Boot.InW==Math.round(window.innerWidth)&&e.Boot.InH==Math.round(window.innerHeight)&&3<e.Boot.NUMRESIZE||(e.Boot.InW=Math.round(window.innerWidth),e.Boot.InH=Math.round(window.innerHeight),GameController.JoypadLeft&&e.Boot.NUMRESIZE++,this.adjustWorld(),e.Boot.PADH=Math.round(-this.camera.x),GameController.AdjustJoypad(),GameController.AdjustPad(),GameController.JoypadLeft)},n.prototype.update=function(){t.prototype.update.call(this),1==this.cnt&&t.prototype.create.call(this),this.cnt++},n.prototype.goLevels=function(){Constants.isIntroAnimationPlayed?Constants.stateSwitcher.switchToLevelSelect():(e.AnimationState.ID_ANIMATION=0,Constants.stateSwitcher.switchToAnimation())},n.prototype.showCredits=function(){this.creditsSprite.visible||(this.creditsSprite.visible=!0,this.creditsSprite.getChild("backButton").changeFrame1(),this.disableInput(),TweenMax.to(this.creditsSprite,.4,{y:-25,ease:"Quad.easeOut"}))},n.prototype.unShowCredits=function(){TweenMax.to(this.creditsSprite,.25,{y:-556,onComplete:this.hideCredits,onCompleteContext:this})},n.prototype.hideCredits=function(){this.creditsSprite.visible=!1,this.enableInput()},n.prototype.depressButtons=function(){this.mc.getChild("playButton").changeFrame1(),this.mc.getChild("creditsButton").changeFrame1(),this.mc.getChild("moreButton").changeFrame1()},n.prototype.disableInput=function(){this.mc.getChild("playButton").inputEnabled=!1,this.mc.getChild("creditsButton").inputEnabled=!1,this.mc.getChild("moreButton").inputEnabled=!1,TweenMax.delayedCall(.1,this.depressButtons,this)},n.prototype.enableInput=function(){this.mc.getChild("playButton").inputEnabled=!0,this.mc.getChild("creditsButton").inputEnabled=!0,this.mc.getChild("moreButton").inputEnabled=!0},n.prototype.initGameController=function(){GameController.PadLeft||(GameController.CurtainContainer=new MovieClip,this.game.stage.addChild(GameController.CurtainContainer),GameController.LeftCurtain=new MovieClip("LeftCurtainGraphics",0,0,null,"PreloaderObjects",PreloaderObjectsLayouts.data),GameController.LeftCurtain.x=GameController.LEFT_CURTAIN_OPEN_X,GameController.CurtainContainer.addChild(GameController.LeftCurtain),GameController.RightCurtain=new MovieClip("RightCurtainGraphics",0,0,null,"PreloaderObjects",PreloaderObjectsLayouts.data),GameController.RightCurtain.x=GameController.RIGHT_CURTAIN_OPEN_X,GameController.CurtainContainer.addChild(GameController.RightCurtain),GameController.PadLeft=new MovieClip("cmcSidePad",0,0,null,"PreloaderObjects",PreloaderObjectsLayouts.data),GameController.PadLeft.x=0,this.game.stage.addChild(GameController.PadLeft),GameController.PadRight=new MovieClip("cmcSidePad",0,0,null,"PreloaderObjects",PreloaderObjectsLayouts.data),GameController.PadRight.x=Constants.WIDTH,GameController.PadRight.scaleX=-1,this.game.stage.addChild(GameController.PadRight),GameController.AdjustPad(),Constants.RotateDevice=this.game.add.image(0,0,"rotateDevice"),this.game.stage.addChild(Constants.RotateDevice),Constants.RotateDevice.visible=!1)},n.NumShown=0,n}(e.OzState);e.MainMenuState=t}(states||(states={}));var ExternalLink,CitrusEngine=function(){function e(){this._playing=!0,this.input=Input.Init(),this.input.addKeyAction("jump",Phaser.Keyboard.UP,Constants.dogInputChannel),this.input.addKeyAction("right",Phaser.Keyboard.RIGHT,Constants.dogInputChannel),this.input.addKeyAction("left",Phaser.Keyboard.LEFT,Constants.dogInputChannel),this.input.addKeyAction("grab",Phaser.Keyboard.SPACEBAR,Constants.dogInputChannel),this.input.addKeyAction("grabDown",Phaser.Keyboard.DOWN,Constants.dogInputChannel),this.input.addKeyAction("down",Phaser.Keyboard.S,Constants.hustlerInputChannel),this.input.addKeyAction("jump",Phaser.Keyboard.W,Constants.hustlerInputChannel),this.input.addKeyAction("right",Phaser.Keyboard.D,Constants.hustlerInputChannel),this.input.addKeyAction("left",Phaser.Keyboard.A,Constants.hustlerInputChannel),this.input.addKeyAction("restart",Phaser.Keyboard.R),this.input.addKeyAction("pause",Phaser.Keyboard.P),this.input.addKeyAction("next",Phaser.Keyboard.SPACEBAR),this.input.addKeyAction("change",Phaser.Keyboard.C),this.input.addKeyAction("previousLevel",Phaser.Keyboard.ONE),this.input.addKeyAction("nextLevel",Phaser.Keyboard.TWO)}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.Init=function(){return e.instance=new e},Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},set:function(e){this._playing=e},enumerable:!0,configurable:!0}),e.instance=null,e}(),CollisionHelper=function(){function e(){}return e.initCollisionCategories=function(){objects.PhysicsCollisionCategories.Add("grab"),objects.PhysicsCollisionCategories.Add("hidden"),objects.PhysicsCollisionCategories.Add("enemy"),objects.PhysicsCollisionCategories.Add("limiter"),objects.PhysicsCollisionCategories.Add("tile"),objects.PhysicsCollisionCategories.Add("hero"),objects.PhysicsCollisionCategories.Add("mirror"),this.nonCollidable=new InteractionGroup(!0)},e}();!function(e){var t=function(){function e(){}return e.openCampaignLink=function(e,t,i){if(!h5branding.Branding.outGoingLinksAllowed())return null;var n=h5branding.Utils.getSourceSite(),r=i;return window.open("http://www.kizi.com/?utm_source="+n+"&utm_medium=html5&utm_term="+t+"&utm_content="+r+"&utm_campaign=sponsored_games","_blank")},e}();e.Utils=t}(ExternalLink||(ExternalLink={}));var Boot=states.Boot,GameController=function(){function t(){}return t.Touch=function(){var e=PhaserGameHelper.getInstance().game;return t.isTouchInitted||(t.isTouchInitted=!0,t.isTouch=!e.device.desktop&&e.device.touch),t.isTouch},t.AdjustPad=function(){t.PadLeft&&(t.PadLeft.x=Math.floor(Boot.PADH+1.9),t.PadLeft.y=0,t.PadRight.x=Boot.PADH+Constants.WIDTH,t.PadRight.y=0,t.CurtainContainer.x=Boot.PADH)},t.AdjustJoypad=function(){var e=PhaserGameHelper.getInstance().game;t.JoypadLeft&&(t.JoypadLeft.x=120,t.JoypadLeft.y=Constants.HEIGHT-55,t.JoypadRight.x=e.width-120,t.JoypadRight.y=Constants.HEIGHT-55,t.Touch()||t.HideJoypad())},t.HideJoypad=function(){t.JoypadLeft&&(t.JoypadLeft.visible=t.JoypadRight.visible=!1)},t.ShowJoypad=function(){t.JoypadLeft&&(t.JoypadLeft.visible=t.JoypadRight.visible=!0)},t.isTouchInitted=!1,t.isTouch=!1,t.JoypadLeft=null,t.JoypadRight=null,t.PadLeft=null,t.PadRight=null,t.CurtainContainer=null,t.LeftCurtain=null,t.RightCurtain=null,t}(),Input=function(){function t(){this.channels=new Array;for(var e=0;e<t.NUM_CHANNELS;e++)this.channels[e]={}}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.Init=function(){return t.instance=new t},t.prototype.addKeyAction=function(e,t,i){void 0===i&&(i=0);var n=PhaserGameHelper.getInstance().game;this.channels[i][e]=-1;var r=n.input.keyboard.addKey(t);r.onDown.add(function(){this.channels[i][e]=Constants.frame},this),r.onUp.add(function(){this.channels[i][e]=-1},this)},t.prototype.setDoing=function(e,t,i){i?this.channels[e][t]<0&&(this.channels[e][t]=Constants.frame):this.channels[e][t]=-1},t.prototype.isDoing=function(e,t){return void 0===t&&(t=0),0<=this.channels[t][e]},t.prototype.justDid=function(e,t){void 0===t&&(t=0);var i=this.channels[t][e];return 0<=i&&Constants.frame-i==1},t.NUM_CHANNELS=20,t.instance=null,t}(),LevelParseSystem=function(){function f(){this._objectsList=[]}return f.prototype.parse=function(e){},f.prototype.parseFromJSON=function(e){var t=OzUtil.PE(Levels.data,null,"@level",""+e);if(this._map=t,this.parseTileset("tiles"),this.parseTileset("decor"),this.parseTileset("active"),this.parseTileset("passive"),t.imagelayer){var i=t.imagelayer.image["@source"].split(".")[0].split("/").pop(),n=new MovieClip(i);this.createLevelObject(n)}if(OzUtil.PE(t,"objectgroup","@name","decorations")&&this.parseObjectGroup("decorations"),OzUtil.PE(t,"objectgroup","@name","active")&&this.parseObjectGroup("active"),OzUtil.PE(t,"objectgroup","@name","tiles")){var r=null,o=OzUtil.PE(t,"objectgroup","@name","tiles").properties;o&&(r=OzUtil.PE(o,"property","@name","physics")),r?this.parseObjectGroup("tiles",!0):this.parseObjectGroup("tiles")}OzUtil.PE(t,"objectgroup","@name","physics")&&this.parseObjectGroup("physics"),OzUtil.PE(t,"objectgroup","@name","characters")&&this.parseObjectGroup("characters")},f.prototype.parseTileset=function(e){for(var t=OzUtil.PE(this._map,"tileset","@name",e),i=parseInt(t["@firstgid"]),n=0,r=OzUtil.ARR(t,"tile");n<r.length;n++){var o=r[n],a=o.image["@source"].split(".")[0];this._objectsList[parseInt(o["@id"])+i]=a.split("/").pop()}},f.prototype.parseObjectGroup=function(e,t){void 0===t&&(t=!1);var i=OzUtil.PE(this._map,"objectgroup","@name",e),n=null,r=OzUtil.ARR(i,"object");if(r)for(var o=0,a=r;o<a.length;o++){var s=a[o],p=parseInt(s["@gid"]),l=0!=(p&f.FLIPPED_HORIZONTALLY_MASK),h=0!=(p&f.FLIPPED_VERTICALLY_MASK);if(0==(p&=~(f.FLIPPED_HORIZONTALLY_MASK|f.FLIPPED_VERTICALLY_MASK)))new objects.FixedBox2(s["@x"],s["@y"],s["@width"],s["@height"]);else{var u=this._objectsList[p];"MoneyBagGraphics"==u&&(u="BurgerGraphics"),(n=new MovieClip(u)).x=s["@x"],n.y=s["@y"],l&&(n.params.flippedHorizontally=!0),h&&(n.params.flippedVertically=!0);var d=s["@rotation"];d&&(n.degrees=parseFloat(d)),(m=s["@name"])&&(n.name=m);var c=s["@type"];c&&(n.params.type=c);var _=s.properties;if(_)for(var y=0,x=OzUtil.ARR(_,"property");y<x.length;y++){var m,g=x[y];"target"==(m=g["@name"])?n.params.target=g["@value"]:"target2"==m?n.params.target2=g["@value"]:"target3"==m?n.params.target3=g["@value"]:"speedX"==m?n.params.speedX=g["@value"]:"speedY"==m?n.params.speedY=g["@value"]:"distanceX"==m?n.params.distanceX=g["@value"]:"distanceY"==m?n.params.distanceY=g["@value"]:"limitRight"==m?n.params.limitRight=g["@value"]:"limitLeft"==m?n.params.limitLeft=g["@value"]:"minAngle"==m?n.params.minAngle=g["@value"]:"maxAngle"==m?n.params.maxAngle=g["@value"]:"delay"==m?n.params.delay=g["@value"]:"text"==m&&(n.params.name=g["@value"])}t&&new objects.Tile(n),this.createLevelObject(n)}}},f.prototype.createLevelObject=function(e){var t=e.mc;0<=["Guardian2Graphics"].indexOf(t)?new objects.Cop(e):0<=["DogGraphics"].indexOf(t)?new objects.Dog(e):0<=["HustlerGraphics"].indexOf(t)?new objects.Cop(e):0<=["BlockGraphics"].indexOf(t)?new objects.FixedBox(e):0<=["DoorGraphics","GlassDoorGraphics"].indexOf(t)?new objects.Door(e):0<=["BoxGraphics"].indexOf(t)?new objects.Box(e):0<=["MirrorGraphics"].indexOf(t)?new objects.Mirror(e):0<=["PlankGraphics","Plank2Graphics","Plank3Graphics","Plank4Graphics","Plank5Graphics","Plank6Graphics","Plank7Graphics","Plank8Graphics","Plank9Graphics","Plank10Graphics","Plank11Graphics","BigPlankGraphics"].indexOf(t)?new objects.Plank(e):0<=["BurgerGraphics"].indexOf(t)?new objects.Burger(e):0<=["BasketBall"].indexOf(t)?new objects.Stool(e):0<=["ToiletGraphics"].indexOf(t)?new objects.Toilet(e):0<=["MonitorGraphics"].indexOf(t)?new objects.Monitor(e):0<=["BasketBallGraphics"].indexOf(t)?new objects.BasketBall(e):0<=["BigBoxGraphics"].indexOf(t)?new objects.BigBox(e):0<=["PushButtonGraphics"].indexOf(t)?new objects.PushButton(e):0<=["TriggerGraphics"].indexOf(t)?new objects.Trigger(e):0<=["ElevatorGraphics","BigElevatorGraphics"].indexOf(t)?new objects.Elevator(e):0<=["TurrelGraphics"].indexOf(t)?new objects.Turrel(e):0<=["CameraGraphics"].indexOf(t)?new objects.Camera(e):0<=["EnemyLimiterGraphics"].indexOf(t)?new objects.EnemyLimiter(e):0<=["Prisoner2Graphics","PrisonerGraphics"].indexOf(t)?new objects.Prisoner(e):0<=["platformCenter","platformLeft","platformRight","singleTile","tileBottomCenter","tileBottomLeft","tileBottomRight","tileCenter","tileCenterLeft","tileCenterRight","tileTopCenter","tileTopLeft","tileTopRight","verticalPlatformBottom","verticalPlatformCenter","verticalPlatformTop"].indexOf(t)?new objects.TileVisual(e):"LevelTextGraphics"==t?new objects.LevelText(e):"TxtGraphics"==t?new objects.Txt(e):Constants.levelState.addObject(new objects.CitrusSprite("sprite",{view:e,x:+e.x,y:+e.y}))},f.FLIPPED_HORIZONTALLY_MASK=2147483648,f.FLIPPED_VERTICALLY_MASK=1073741824,f}(),NapeUtils=function(){function e(){}return e.CollisionGetOther=function(e,t){return e==t.int1.userData.myData?t.int2.userData.myData:t.int1.userData.myData},e.CollisionGetSelf=function(e,t){return e==t.int1.userData.myData?t.int1.userData.myData:t.int2.userData.myData},e}(),OzUtil=function(){function e(){}return e.PE=function(e,t,i,n){if(e)if(e instanceof Array)for(var r=0,o=e;r<o.length;r++){if((l=o[r])[i]==n)return l}else if(e instanceof Object){var a=e[t];if(a instanceof Array)for(var s=0,p=a;s<p.length;s++){var l;if((l=p[s])[i]==n)return l}else if(a instanceof Object&&a[i]==n)return e}return null},e.ARR=function(e,t){if(void 0===t&&(t=null),e instanceof Array)return e;if(e instanceof Object){var i=e[t];if(i instanceof Array)return i;if(i instanceof Object)return[i]}return null},e.verticesArrayToVec2=function(e){for(var t=new Array,i=0,n=e;i<n.length;i++){var r=n[i];t.push(new Vec2(r[0],r[1]))}return t},e.GetURL=function(e){window.open(e,"_blank")},e}(),PhaserGameHelper=function(){function e(){}return e.prototype.init=function(e){this.game=e},e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.instance=null,e}(),SoundManager=function(){function r(){}return r.AddSound=function(e,t){PhaserGameHelper.getInstance().game.load.audio(e,["assets/sound/"+e+".mp3","assets/sound/"+e+".ogg"]),this.dicSounds[e]={},t.music?this.dicSounds[e].music=!0:this.dicSounds[e].music=!1,10<t.loops?this.dicSounds[e].loops=!0:this.dicSounds[e].loops=!1,t.volume?this.dicSounds[e].volume=t.volume:this.dicSounds[e].volume=1,r.NumSounds++},r.Init=function(){r.AllDecoded=!1,r.NumSounds=0,r.muteMusic=!1,r.muteSound=!1,r.curMusic=null,r.arrSounds=new Array},r.decodeSounds=function(){var t=PhaserGameHelper.getInstance().game;Object.keys(r.dicSounds).forEach(function(e){r.dicSounds[e].sound=t.add.audio(e)})},r.Preload=function(){r.AddSound("GameMusic",{music:!0,loops:9999,volume:.45}),r.AddSound("MenuMusic",{music:!0,loops:9999,volume:.65}),r.AddSound("MouseClickSound",{}),r.AddSound("MouseOverSound",{volume:.6}),r.AddSound("ExitSound",{}),r.AddSound("LevelCompleteAnimationSound",{}),r.AddSound("LevelWinSound",{}),r.AddSound("LevelFailedSound",{}),r.AddSound("BoxDownSound",{volume:.6}),r.AddSound("PlankDownSound",{}),r.AddSound("Hamburger1Sound",{}),r.AddSound("Hamburger2Sound",{}),r.AddSound("Hamburger3Sound",{}),r.AddSound("GetHamburger1Sound",{}),r.AddSound("GetHamburger2Sound",{}),r.AddSound("GetHamburger3Sound",{}),r.AddSound("BrickWallOpenSound",{}),r.AddSound("BrickWallCloseSound",{}),r.AddSound("WaterSound",{}),r.AddSound("YellowCameraSound",{}),r.AddSound("RedCameraSound",{}),r.AddSound("OpenDoorSound",{volume:1}),r.AddSound("ElevatorSound",{loops:9999,volume:.4}),r.AddSound("TriggerSound",{}),r.AddSound("PushButtonSound",{}),r.AddSound("AttackSound",{}),r.AddSound("StoolDownSound",{}),r.AddSound("TurrelFireSound",{volume:.7}),r.AddSound("RicochetSound",{volume:.7}),r.AddSound("Comix1Sound",{}),r.AddSound("Comix2Sound",{}),r.AddSound("Comix3Sound",{}),r.AddSound("Comix4Sound",{}),r.AddSound("Comix5Sound",{}),r.AddSound("Comix6Sound",{}),r.AddSound("Comix7Sound",{}),r.AddSound("Comix8Sound",{}),r.AddSound("Comix9Sound",{}),r.AddSound("Comix10Sound",{}),r.AddSound("Comix11Sound",{}),r.AddSound("AchievementUnlockedSound",{}),r.AddSound("DogJumpSound",{}),r.AddSound("DogStepSound",{volume:1}),r.AddSound("DogBarkSound",{volume:.5}),r.AddSound("DogIdle2Sound",{}),r.AddSound("DogIdle1Sound",{}),r.AddSound("HustlerJumpSound",{}),r.AddSound("HustlerStepSound",{volume:.5}),r.AddSound("HustlerPushSound",{volume:.5}),r.AddSound("CopIdle1Sound",{}),r.AddSound("CopIdle2Sound",{}),r.AddSound("HandcuffSound",{volume:.5}),r.AddSound("GuardianStepSound",{volume:.5}),r.AddSound("GuardianRunSound",{volume:.5}),r.AddSound("GuardianHurtSound",{}),r.AddSound("GuardianStarsSound",{})},r.getInstance=function(){return null==r.instance&&(r.instance=new r),r.instance},r.prototype.stopMusic=function(){},r.prototype.playSound=function(e){var t=r.dicSounds[e];if(t)if(t.music){if(r.playingMusic&&r.playingMusic!=e){var i=r.dicSounds[r.playingMusic];i.sound&&i.sound.stop()}r.curMusic!=e&&e&&(r.playingMusic=r.muteMusic?null:(r._playSound(e,t.volume,t.loops),e),r.curMusic=e)}else r.muteSound||(this.isPlaying(e)&&this.stopSound(e),r._playSound(e,t.volume,t.loops))},r.prototype.stopSound=function(e){var t=r.dicSounds[e];t&&(t.sound.stop(),r.playingMusic==e&&(r.playingMusic=null))},r.prototype.isPlaying=function(e){var t=r.dicSounds[e];return!(!t||!t.sound)&&t.sound.isPlaying},r.ToggleMuteMusic=function(){if(r.muteMusic=!r.muteMusic)r.playingMusic&&(e=r.dicSounds[r.playingMusic]).sound&&e.sound.pause();else if(r.curMusic)if(r.playingMusic){var e;(e=r.dicSounds[r.playingMusic]).sound&&e.sound.resume()}else{var t=r.dicSounds[r.curMusic];r._playSound(r.curMusic,t.volume,t.loops),r.playingMusic=r.curMusic}},r._playSound=function(e,t,i){var n=r.dicSounds[e].sound;i?(n.loopFull(t),n.onLoop.getNumListeners()<1&&n.onLoop.add(r._loopSound,r,0,e,t)):n.play("",0,t)},r._loopSound=function(e,t,i){e.loopFull(i)},r.ToggleMuteSound=function(){if(r.muteSound=!r.muteSound)for(var e in r.dicSounds){var t=r.dicSounds[e];if(!t.music){var i=t.sound;i&&i.isPlaying&&i.stop()}}},r.instance=null,r.dicSounds={},r}(),StateSwitchSystem=function(){function e(){this.game=PhaserGameHelper.getInstance().game,this._ce=CitrusEngine.getInstance(),this._isSwitchingState=!1}return e.prototype.delayLevelCompleteAnimationSound=function(){SoundManager.getInstance().playSound("LevelCompleteAnimationSound")},e.prototype.delayLevelWinSound=function(){SoundManager.getInstance().playSound("LevelWinSound")},e.prototype.delayHamburger1Sound=function(){SoundManager.getInstance().playSound("Hamburger1Sound")},e.prototype.delayHamburger2Sound=function(){SoundManager.getInstance().playSound("Hamburger2Sound")},e.prototype.delayHamburger3Sound=function(){SoundManager.getInstance().playSound("Hamburger3Sound")},e.prototype.switchToLevelCompleted=function(){Constants.stateSwitcher._isSwitchingState||(Constants.stateSwitcher._isSwitchingState=!0,this.closeCurtains(this.showWin))},e.prototype.showWin=function(){this.winSprite=new MovieClip("cmcYouWin"),GameController.CurtainContainer.addChild(this.winSprite),this.winSprite.addChild(new MovieClip("cmcCopWin",414,275,"winnerCop","WinningObjects",null)),this.winSprite.addChild(new MovieClip("cmcDogWin",414,275,"winnerDog","WinningObjects",null)),this.winSprite.getChild("levelsButton").makeButton(this.goLevelSelectFromWin,!0,this),this.winSprite.getChild("replayButton").makeButton(this.goRestartFromWin,!0,this),this.winSprite.getChild("nextButton").makeButton(this.goNextFromWin,!0,this),Constants.currentLevel>=Constants.NUMLEVELS-1&&(this.winSprite.getChild("nextButton").visible=!1,this.winSprite.getChild("replayButton").x=this.winSprite.getChild("nextButton").x),this.winSprite.getChild("burgerBG").visible=!1,this.winSprite.getChild("b1").visible=!1,this.winSprite.getChild("b2").visible=!1,this.winSprite.getChild("b3").visible=!1,h5branding.Branding.outGoingLinksAllowed()&&(this.brandingLogo=this.game.add.button(220,320,h5branding.Branding.LOGO_KEY,function(){h5branding.Branding.openCampaignLink(Constants.GOOGLE_APP_NAME,h5branding.UtmTargets.logo)}),this.winSprite.addChild(this.brandingLogo)),this.winSprite.getChild("winnerCop").addAnimation("win",1,23,27,!1,this.showWin2,this),this.winSprite.getChild("winnerDog").addAnimation("win",1,23,27,!1),this.winSprite.getChild("winnerCop").playAnimation("win"),this.winSprite.getChild("winnerDog").playAnimation("win"),this.delayLevelCompleteAnimationSound(),TweenMax.delayedCall(1.8,this.delayLevelWinSound,this)},e.prototype.showWin2=function(){var e=this.winSprite.getChild("burgerBG"),t=this.winSprite.getChild("b1"),i=this.winSprite.getChild("b2"),n=this.winSprite.getChild("b3");e.visible=!0,e.scaleX=e.scaleY=0,TweenMax.to(e,.2,{scaleX:1,scaleY:1,ease:"Back.easeOut"}),(21==Constants.currentLevel&&26<Constants.levelState.burgers||Constants.currentLevel<21&&0<Constants.levelState.burgers)&&(t.visible=!0,t.scaleX=t.scaleY=0,TweenMax.to(t,.4,{scaleX:1,scaleY:1,degrees:360,ease:"Back.easeOut"}),TweenMax.delayedCall(.05,this.delayHamburger1Sound,this)),(21==Constants.currentLevel&&54<Constants.levelState.burgers||Constants.currentLevel<21&&1<Constants.levelState.burgers)&&(i.visible=!0,i.scaleX=i.scaleY=0,TweenMax.to(i,.4,{scaleX:1,scaleY:1,degrees:360,ease:"Back.easeOut",delay:.15}),TweenMax.delayedCall(.2,this.delayHamburger2Sound,this)),(21==Constants.currentLevel&&79<Constants.levelState.burgers||Constants.currentLevel<21&&2<Constants.levelState.burgers)&&(n.visible=!0,n.scaleX=n.scaleY=0,TweenMax.to(n,.4,{scaleX:1,scaleY:1,degrees:360,ease:"Back.easeOut",delay:.3}),TweenMax.delayedCall(.35,this.delayHamburger3Sound,this)),this.winSprite.removeChild(this.winSprite.getChild("winnerCop")),this.winSprite.removeChild(this.winSprite.getChild("winnerDog")),this.winSprite.addChild(new MovieClip("cmcCopWin2",403,290,"winnerCop","WinningObjects",null)),this.winSprite.addChild(new MovieClip("cmcDogWin2",403,290,"winnerDog","WinningObjects",null)),this.winSprite.getChild("winnerCop").playLoop(),this.winSprite.getChild("winnerDog").playLoop(),TweenMax.to(this.winSprite.getChild("levelCompleted"),.5,{y:-3,ease:"Back.easeOut"}),TweenMax.to(this.winSprite.getChild("winnerCop"),.6,{x:218,ease:"Back.easeOut"}),TweenMax.to(this.winSprite.getChild("winnerDog"),.6,{x:544,ease:"Back.easeOut"}),TweenMax.to(this.winSprite.getChild("levelsButton"),.5,{y:408,ease:"Back.easeOut",delay:.5}),TweenMax.to(this.winSprite.getChild("replayButton"),.5,{y:408,ease:"Back.easeOut",delay:.5}),TweenMax.to(this.winSprite.getChild("nextButton"),.5,{y:408,ease:"Back.easeOut",delay:.5})},e.prototype.goLevelSelectFromWin=function(){var e=this;Fabrique.AdHandler.getInstance().showAd("winToLevelSelect",function(){e.hideWin(e.directToLevelSelect)})},e.prototype.goRestartFromWin=function(){var e=this;Fabrique.AdHandler.getInstance().showAd("winRestart",function(){e.hideWin(e.directToPlay)})},e.prototype.goNextFromWin=function(){var e=this;Constants.currentLevel<=19?(Constants.currentLevel++,Fabrique.AdHandler.getInstance().showAd("nextLevel",function(){e.hideWin(e.directToPlay)})):Fabrique.AdHandler.getInstance().showAd("nextLevel",function(){e.hideWin(e.directToLevelSelect)})},e.prototype.hideWin=function(e){if(this.winSprite){TweenMax.to(this.winSprite.getChild("levelCompleted"),.5,{y:-203,ease:"Back.easeIn"}),TweenMax.to(this.winSprite.getChild("winnerCop"),.5,{x:21,ease:"Back.easeIn"}),TweenMax.to(this.winSprite.getChild("winnerDog"),.5,{x:760,ease:"Back.easeIn"}),TweenMax.to(this.winSprite.getChild("levelsButton"),.5,{y:618,ease:"Back.easeIn"}),TweenMax.to(this.winSprite.getChild("replayButton"),.5,{y:618,ease:"Back.easeIn"}),TweenMax.to(this.winSprite.getChild("nextButton"),.5,{y:618,ease:"Back.easeIn",onComplete:this.removeWin,onCompleteContext:this});var t=this.winSprite.getChild("b1"),i=this.winSprite.getChild("b2"),n=this.winSprite.getChild("b3");TweenMax.to(t,.2,{scaleX:0,scaleY:0}),TweenMax.to(i,.2,{scaleX:0,scaleY:0,delay:.1}),TweenMax.to(n,.2,{scaleX:0,scaleY:0,delay:.2}),TweenMax.to(this.winSprite.getChild("burgerBG"),.2,{scaleX:0,scaleY:0,delay:.3}),TweenMax.delayedCall(.55,e,this)}},e.prototype.removeWin=function(){this.winSprite&&(this.winSprite.visible=!1,GameController.CurtainContainer.removeChild(this.winSprite),this.winSprite=null)},e.prototype.switchToLose=function(){Constants.stateSwitcher._isSwitchingState||(Constants.stateSwitcher._isSwitchingState=!0,this.closeCurtains(this.showLose),SoundManager.getInstance().playSound("LevelFailedSound"))},e.prototype.showLose=function(){this.loseSprite=new MovieClip("cmcYouLose"),GameController.CurtainContainer.addChild(this.loseSprite),this.loseSprite.addChild(new MovieClip("cmcCopLose",-207,160,"loserCop","WinningObjects",null)),this.loseSprite.addChild(new MovieClip("cmcDogLose",742,188,"loserDog","WinningObjects",null)),this.loseSprite.getChild("levelsButton").makeButton(this.goLevelsFromLose,!0,this),this.loseSprite.getChild("replayButton").makeButton(this.goRestartFromLose,!0,this),h5branding.Branding.outGoingLinksAllowed()&&!this.game.device.cordova?(this.loseSprite.getChild("walkthroughButton").makeButton(Constants.walkthrough,!0,this),this.brandingLogo=this.game.add.button(220,320,h5branding.Branding.LOGO_KEY,function(){h5branding.Branding.openCampaignLink(Constants.GOOGLE_APP_NAME,h5branding.UtmTargets.logo)}),this.loseSprite.addChild(this.brandingLogo)):this.loseSprite.getChild("walkthroughButton").visible=!1;TweenMax.to(this.loseSprite.getChild("levelFailed"),.5,{y:-3,ease:"Back.easeOut"}),TweenMax.to(this.loseSprite.getChild("loserCop"),.5,{x:8,ease:"Back.easeOut"}),TweenMax.to(this.loseSprite.getChild("loserDog"),.5,{x:512,ease:"Back.easeOut"}),TweenMax.to(this.loseSprite.getChild("levelsButton"),.5,{y:418,ease:"Back.easeOut"}),TweenMax.to(this.loseSprite.getChild("replayButton"),.5,{y:418,ease:"Back.easeOut"}),TweenMax.to(this.loseSprite.getChild("walkthroughButton"),.5,{y:418,ease:"Back.easeOut"})},e.prototype.goRestartFromLose=function(){var e=this;Fabrique.AdHandler.getInstance().showAd("loseRestart",function(){e.hideLose(e.directToPlay)})},e.prototype.goLevelsFromLose=function(){var e=this;Fabrique.AdHandler.getInstance().showAd("loseToLevelSelect",function(){e.hideLose(e.directToLevelSelect)})},e.prototype.hideLose=function(e){if(this.loseSprite){TweenMax.to(this.loseSprite.getChild("levelFailed"),.5,{y:-203,ease:"Back.easeIn"}),TweenMax.to(this.loseSprite.getChild("loserCop"),.5,{x:-207,ease:"Back.easeIn"}),TweenMax.to(this.loseSprite.getChild("loserDog"),.5,{x:742,ease:"Back.easeIn"}),TweenMax.to(this.loseSprite.getChild("levelsButton"),.5,{y:618,ease:"Back.easeIn"}),TweenMax.to(this.loseSprite.getChild("replayButton"),.5,{y:618,ease:"Back.easeIn"}),TweenMax.to(this.loseSprite.getChild("walkthroughButton"),.5,{y:618,ease:"Back.easeIn",onComplete:this.removeLoss,onCompleteContext:this}),TweenMax.delayedCall(.55,e,this)}},e.prototype.removeLoss=function(){void 0!==this.loseSprite&&null!==this.loseSprite&&(this.loseSprite.visible=!1,GameController.CurtainContainer.removeChild(this.loseSprite),this.loseSprite=null)},e.prototype.switchToAnimation=function(){Constants.stateSwitcher._isSwitchingState||(Constants.stateSwitcher._isSwitchingState=!0,this.closeCurtains(this.directToAnimation))},e.prototype.switchToMainMenu=function(){var e=this;Constants.stateSwitcher._isSwitchingState||(Constants.stateSwitcher._isSwitchingState=!0,Fabrique.AdHandler.getInstance().showAd("levelSelect",function(){e.closeCurtains(e.directToMainMenu)}))},e.prototype.switchToLevelSelect=function(){Constants.stateSwitcher._isSwitchingState||(Constants.stateSwitcher._isSwitchingState=!0,this.closeCurtains(this.directToLevelSelect))},e.prototype.switchToPlay=function(){Constants.stateSwitcher._isSwitchingState||(Constants.stateSwitcher._isSwitchingState=!0,this.closeCurtains(this.directToPlay))},e.prototype.directToPlay=function(){this.game.state.start("Level")},e.prototype.directToLevelSelect=function(){this.game.state.start("LevelSelect")},e.prototype.directToMainMenu=function(){this.game.state.start("MainMenu")},e.prototype.directToAnimation=function(){this.game.state.start("Animation")},e.prototype.closeCurtains=function(e){void 0===e&&(e=null),e!=this.directToPlay&&GameController.HideJoypad(),GameController.LeftCurtain.visible=GameController.RightCurtain.visible=!0,GameController.LeftCurtain.x=GameController.LEFT_CURTAIN_OPEN_X,GameController.RightCurtain.x=GameController.RIGHT_CURTAIN_OPEN_X,SoundManager.getInstance().playSound("BrickWallCloseSound"),TweenMax.to(GameController.LeftCurtain,.5,{x:0,ease:"Quad.easeOut"}),TweenMax.to(GameController.RightCurtain,.5,{x:Constants.WIDTH,onComplete:e,onCompleteContext:this,ease:"Quad.easeOut"})},e.prototype.openCurtains=function(e){TweenMax.delayedCall(e,this.delayBrickWallOpenSound,this),TweenMax.to(GameController.LeftCurtain,.5,{x:GameController.LEFT_CURTAIN_OPEN_X,ease:"Quad.easeIn",delay:e}),TweenMax.to(GameController.RightCurtain,.5,{x:GameController.RIGHT_CURTAIN_OPEN_X,ease:"Quad.easeIn",delay:e,onComplete:this.dispose})},e.prototype.delayBrickWallOpenSound=function(){SoundManager.getInstance().playSound("BrickWallOpenSound")},e.prototype.dispose=function(){GameController.LeftCurtain.visible=GameController.RightCurtain.visible=!1,Constants.stateSwitcher._isSwitchingState=!1},e}(),StorageHelper=function(){function t(){}return t.LS=function(e){return e+t.LocalStorageName},t.initCookies=function(){},t.readCookies=function(){if(t.clearProgress(),t.storageAvailable){var e=localStorage.getItem(t.LS("levelsComplete"));e&&(Constants.levelsComplete=JSON.parse(localStorage.getItem(t.LS("levelsComplete")))||Constants.levelsComplete,Constants.burgers=JSON.parse(localStorage.getItem(t.LS("burgers")))||Constants.burgers,Constants.isIntroAnimationPlayed=JSON.parse(localStorage.getItem(t.LS("isIntroAnimationPlayed")))||Constants.isIntroAnimationPlayed,Constants.isFinalAnimationPlayed=JSON.parse(localStorage.getItem(t.LS("isFinalAnimationPlayed")))||Constants.isFinalAnimationPlayed)}},t.saveCookies=function(){t.storageAvailable&&(localStorage.setItem(t.LS("levelsComplete"),JSON.stringify(Constants.levelsComplete)),localStorage.setItem(t.LS("burgers"),JSON.stringify(Constants.burgers)),localStorage.setItem(t.LS("isIntroAnimationPlayed"),JSON.stringify(Constants.isIntroAnimationPlayed)),localStorage.setItem(t.LS("isFinalAnimationPlayed"),JSON.stringify(Constants.isFinalAnimationPlayed)))},t.totalPoints=function(){for(var e=0,t=1;t<=Constants.NUMLEVELS;t++)e+=Constants.burgers[t];return e},t.clearProgress=function(){Constants.isIntroAnimationPlayed=!1,Constants.isFinalAnimationPlayed=!1,Constants.burgers=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Constants.levelsComplete=[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]},t.isLocalStorageSupport=function(){try{if("object"==typeof localStorage)return localStorage.setItem("testingLocalStorage","foo"),localStorage.removeItem("testingLocalStorage"),!0}catch(e){return!1}return!1},t.LocalStorageName="DODGERS3_ozdy",t.storageAvailable=t.isLocalStorageSupport(),t}(),TaskManager=function(){function e(e){void 0===e&&(e=!1),this._tasks=[],this._pauseCount=0,this.isStarted=!1,this.isPaused=!1,this.cycle=e,this._tasks=new Array,this._pauseCount=0,this.isStarted=this.isPaused=this.result=!1}return Object.defineProperty(e.prototype,"currentTask",{get:function(){return 0<this._tasks.length?this._tasks[0].func:null},enumerable:!0,configurable:!0}),e.prototype.addTask=function(e,t,i,n){void 0===i&&(i=null),void 0===n&&(n=!1),this._tasks.push({func:t,params:i,ignoreCycle:n,context:e}),this.start()},e.prototype.addInstantTask=function(e,t,i,n){void 0===i&&(i=null),void 0===n&&(n=!1),this._tasks.push({func:t,params:i,ignoreCycle:n,isInstant:!0,context:e}),this.start()},e.prototype.addUrgentTask=function(e,t,i,n){void 0===i&&(i=null),void 0===n&&(n=!1),this._tasks.unshift({func:t,params:i,ignoreCycle:n,context:e}),this.start()},e.prototype.addUrgentInstantTask=function(e,t,i,n){void 0===i&&(i=null),void 0===n&&(n=!1),this._tasks.unshift({func:t,params:i,ignoreCycle:n,isInstant:!0,context:e}),this.start()},e.prototype.addPause=function(e,t){void 0===t&&(t=!1),this.addTask(this,this.timerFrame,[e],t)},e.prototype.timerFrame=function(e){this._pauseCount++,this._pauseCount>=e&&(this._pauseCount=0,this.nextTask())},e.prototype.removeAllTasks=function(){this._tasks=new Array},e.prototype.nextTask=function(e){void 0===e&&(e=!1),this.cycle&&!e?this._tasks.push(this._tasks.shift()):this._tasks.shift()},e.prototype.start=function(){this.isStarted||(this.isStarted=!0,this.isPaused=!1)},e.prototype.stop=function(){this.isStarted=!1},e.prototype.update=function(){var e=this._tasks[0];e?(this.result=e.func.call(e.context,e.params),e==this._tasks[0]&&(e.isInstant||this.result)&&this.nextTask(e.ignoreCycle)):stop()},Object.defineProperty(e.prototype,"pause",{get:function(){return this.isPaused},set:function(e){e&&!this.isPaused?this.isPaused=!0:this._tasks[0]&&this.isPaused&&(this.isPaused=!1)},enumerable:!0,configurable:!0}),e.prototype.tasksNum=function(){return this._tasks.length},e.ALL_TASKS_DONE="allTasksDone",e}(),TopPanel=function(){function e(){this.game=PhaserGameHelper.getInstance().game,21==Constants.currentLevel?this._view=new MovieClip("TopPanelBonusGraphics"):this._view=new MovieClip("TopPanelGraphics"),this.game.world.addChild(this._view)}return e.prototype.depressButtons=function(){this._view.getChild("musicButton").changeFrame1(),this._view.getChild("soundButton").changeFrame1(),this._view.getChild("replayButton").changeFrame1(),this._view.getChild("menuButton").changeFrame1(),this._view.getChild("walkthroughButton").changeFrame1()},e.prototype.disableInput=function(){this._view.getChild("musicButton").inputEnabled=!1,this._view.getChild("soundButton").inputEnabled=!1,this._view.getChild("replayButton").inputEnabled=!1,this._view.getChild("menuButton").inputEnabled=!1,this._view.getChild("walkthroughButton").inputEnabled=!1,TweenMax.delayedCall(.1,this.depressButtons,this)},e.prototype.enableInput=function(){this._view.getChild("musicButton").inputEnabled=!0,this._view.getChild("soundButton").inputEnabled=!0,this._view.getChild("replayButton").inputEnabled=!0,this._view.getChild("menuButton").inputEnabled=!0,this._view.getChild("walkthroughButton").inputEnabled=!0},e.prototype.init=function(){if(GameController.Touch()){this._view.changeChildByName("musicButton","BigMusicMenuButton","PreloaderObjects",PreloaderObjectsLayouts.data),this._view.changeChildByName("soundButton","BigSoundButtonGraphics","PreloaderObjects",PreloaderObjectsLayouts.data),this._view.changeChildByName("replayButton","BigReplayButtonGraphics","PreloaderObjects",PreloaderObjectsLayouts.data),this._view.changeChildByName("menuButton","BigMenuButtonGraphics","PreloaderObjects",PreloaderObjectsLayouts.data);var e=this._view.getChild("musicButton"),t=this._view.getChild("soundButton"),i=this._view.getChild("replayButton"),n=this._view.getChild("menuButton");e.x=647,e.y=3,t.x=594,t.y=3,i.x=541,i.y=3,n.x=488,n.y=3}if(21==Constants.currentLevel){this._secondsLeft=45,this._maxBonusHearts=Constants.levelState.getObjectsByName("burger").length;this.heartsText=this.game.add.text(0,0,"Level "+Constants.currentLevel+":",{font:"26px sc_gum_kidsregular",fill:"#FFFFFF",boundsAlignH:"center",boundsAlignV:"middle"}),this.heartsText.stroke="#4F2E1F",this.heartsText.strokeThickness=4,this.heartsText.setTextBounds(31,6,105,38),this.heartsText.text="00 / "+String(this._maxBonusHearts),this._view.addChild(this.heartsText);this.timerText1=this.game.add.text(0,0,"Level "+Constants.currentLevel+":",{font:"28px sc_gum_kidsregular",fill:"#FFFF00",boundsAlignH:"right",boundsAlignV:"middle"}),this.timerText1.stroke="#4F2E1F",this.timerText1.strokeThickness=4,this.timerText1.setTextBounds(301,221,50,41),this.timerText1.text="30.",this._view.addChild(this.timerText1);this.timerText2=this.game.add.text(0,0,"Level "+Constants.currentLevel+":",{font:"20px sc_gum_kidsregular",fill:"#FFFF00",boundsAlignH:"left",boundsAlignV:"middle"}),this.timerText2.stroke="#4F2E1F",this.timerText2.strokeThickness=4,this.timerText2.setTextBounds(348,230,48,30),this.timerText2.text="00",this._view.addChild(this.timerText2),this._lastTime=this.game.time.totalElapsedSeconds()}else this._view.getChild("b1").scaleX=this._view.getChild("b1").scaleY=0,this._view.getChild("b2").scaleX=this._view.getChild("b2").scaleY=0,this._view.getChild("b3").scaleX=this._view.getChild("b3").scaleY=0},e.prototype.tick=function(){if(21==Constants.currentLevel){var e=this.game.time.totalElapsedSeconds();this._secondsLeft-=e-this._lastTime,this._secondsLeft=Math.max(0,this._secondsLeft),this._lastTime=e;var t=String(Math.floor(this._secondsLeft))+".";this.timerText1.text=t;for(var i=String(this._secondsLeft-Math.floor(this._secondsLeft)).substr(2,2);i.length<2;)i="0"+i;this.timerText2.text=i,0<this._secondsLeft||Constants.levelState.failLevel()}},e.prototype.getHeartX=function(){return 21==Constants.currentLevel?60:0==Constants.levelState.burgers?this._view.getChild("b1").x:1==Constants.levelState.burgers?this._view.getChild("b2").x:this._view.getChild("b3").x},e.prototype.getHeartY=function(){return 21==Constants.currentLevel?19:this._view.getChild("b1").y},e.prototype.collectBurger=function(e){var i=new MovieClip("BurgerSmallGraphics");i.x=e.x,i.y=e.y,this._view.addChild(i),TweenMax.to(i,.6,{x:this.getHeartX(),y:this.getHeartY(),rotation:360,onComplete:function(){i&&i.parent&&i.parent.removeChild(i);if(21==Constants.currentLevel){var e=String(n);e.length<2&&(e="0"+e),Constants.levelState.topPanel.heartsText.text=e+" / "+String(Constants.levelState.topPanel._maxBonusHearts)}else{var t=Constants.levelState.topPanel._view;1==n?t.getChild("b1").scaleX=t.getChild("b1").scaleY=1:2==n?t.getChild("b2").scaleX=t.getChild("b2").scaleY=1:3==n&&(t.getChild("b3").scaleX=t.getChild("b3").scaleY=1)}}}),Constants.levelState.burgers++,e.kill=!0,1==Constants.levelState.burgers?SoundManager.getInstance().playSound("GetHamburger1Sound"):2==Constants.levelState.burgers?SoundManager.getInstance().playSound("GetHamburger2Sound"):SoundManager.getInstance().playSound("GetHamburger3Sound");var n=Constants.levelState.burgers},e.prototype.dispose=function(){},e}();